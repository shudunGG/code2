# 主数据源 - dbreturn
spring.datasource.primary.url=jdbc:mysql://59.219.120.74:15192/dbreturn?serverTimezone=Asia/Shanghai&rewriteBatchedStatements=true&useUnicode=true&characterEncoding=UTF8&zeroDateTimeBehavior=CONVERT_TO_NULL&connectTimeout=10000&socketTimeout=120000
spring.datasource.primary.username=yycx
spring.datasource.primary.password=ENC(LumjZ0iwDgDvFLRJRmeRf1+7ewkwoymblbg3sFjVDXIBx6wmvkgI8zHWq3sMTLE8GFeGR5oW8zJFTfeeF1D4yA==)
spring.datasource.primary.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.primary.type=com.alibaba.druid.pool.DruidDataSource
# 主数据源连接池配置 - 优化版
spring.datasource.primary.initial-size=10
spring.datasource.primary.min-idle=10
spring.datasource.primary.max-active=50
spring.datasource.primary.max-wait=60000
spring.datasource.primary.time-between-eviction-runs-millis=30000
spring.datasource.primary.min-evictable-idle-time-millis=600000
spring.datasource.primary.validation-query=SELECT 1
spring.datasource.primary.test-while-idle=true
spring.datasource.primary.test-on-borrow=false
spring.datasource.primary.test-on-return=false
spring.datasource.primary.pool-prepared-statements=true
spring.datasource.primary.max-pool-prepared-statement-per-connection-size=50
# 连接泄露检测
spring.datasource.primary.remove-abandoned=true
spring.datasource.primary.remove-abandoned-timeout=1800
spring.datasource.primary.log-abandoned=true
# 性能监控
spring.datasource.primary.filters=stat,wall,slf4j
spring.datasource.primary.connection-properties=druid.stat.mergeSql=true;druid.stat.slowSqlMillis=2000

# 第二数据源 - dboriginal
spring.datasource.secondary.url=jdbc:mysql://59.219.120.74:15202/dboriginal?serverTimezone=Asia/Shanghai&rewriteBatchedStatements=true&useUnicode=true&characterEncoding=UTF8&zeroDateTimeBehavior=CONVERT_TO_NULL&connectTimeout=10000&socketTimeout=120000
spring.datasource.secondary.username=yycx
spring.datasource.secondary.password=ENC(LumjZ0iwDgDvFLRJRmeRf1+7ewkwoymblbg3sFjVDXIBx6wmvkgI8zHWq3sMTLE8GFeGR5oW8zJFTfeeF1D4yA==)
spring.datasource.secondary.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.secondary.type=com.alibaba.druid.pool.DruidDataSource
# 第二数据源连接池配置 - 优化版
spring.datasource.secondary.initial-size=10
spring.datasource.secondary.min-idle=10
spring.datasource.secondary.max-active=50
spring.datasource.secondary.max-wait=60000
spring.datasource.secondary.time-between-eviction-runs-millis=30000
spring.datasource.secondary.min-evictable-idle-time-millis=600000
spring.datasource.secondary.validation-query=SELECT 1
spring.datasource.secondary.test-while-idle=true
spring.datasource.secondary.test-on-borrow=false
spring.datasource.secondary.test-on-return=false
spring.datasource.secondary.pool-prepared-statements=true
spring.datasource.secondary.max-pool-prepared-statement-per-connection-size=50
# 连接泄露检测
spring.datasource.secondary.remove-abandoned=true
spring.datasource.secondary.remove-abandoned-timeout=1800
spring.datasource.secondary.log-abandoned=true
# 性能监控
spring.datasource.secondary.filters=stat,wall,slf4j
spring.datasource.secondary.connection-properties=druid.stat.mergeSql=true;druid.stat.slowSqlMillis=2000

# JPA配置优化
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL57Dialect
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# 日志配置
logging.level.com.example.demo=INFO
logging.level.druid.sql=WARN
logging.level.org.springframework.jdbc=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{50} - %msg%n
logging.file.name=logs/application.log
logging.file.max-size=10MB
logging.file.max-history=30

spring.thymeleaf.cache=true
server.port=10999

# 应用性能优化
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,text/css,text/javascript,application/javascript
server.compression.min-response-size=1024

# Redis缓存配置
spring.redis.host=localhost
spring.redis.port=6379
spring.redis.password=
spring.redis.database=0
spring.redis.timeout=10000ms
spring.redis.lettuce.pool.max-active=50
spring.redis.lettuce.pool.max-idle=10
spring.redis.lettuce.pool.min-idle=5
spring.redis.lettuce.pool.max-wait=10000ms

# 缓存配置 - 临时禁用Redis，使用简单内存缓存
spring.cache.type=simple
# spring.cache.type=redis
# spring.cache.redis.time-to-live=600000
# spring.cache.redis.cache-null-values=false
# spring.cache.redis.use-key-prefix=true
# spring.cache.redis.key-prefix=ksh:cache:

# Jasypt加密配置
jasypt.encryptor.password=mySecretKey123
jasypt.encryptor.algorithm=PBEWITHHMACSHA512ANDAES_256
jasypt.encryptor.iv-generator-classname=org.jasypt.iv.RandomIvGenerator
jasypt.encryptor.salt-generator-classname=org.jasypt.salt.RandomSaltGenerator

# Database initialization (temporarily disabled)
# spring.sql.init.mode=always
# spring.sql.init.schema-locations=classpath:schema.sql
# spring.sql.init.data-locations=classpath:data.sql
# spring.sql.init.continue-on-error=false