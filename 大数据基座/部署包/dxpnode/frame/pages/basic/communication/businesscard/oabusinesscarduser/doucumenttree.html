<!DOCTYPE html>
<html>

<head>
<title>外部通讯录联系人列表</title>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!-- 请修改相对路径 -->
<script src="../../../../fui/js/cssboot.js"></script>
</head>

<body>
	<!-- 必须有，加载时的loading效果 -->
	<div class="page-loading"></div>
		<!-- 内容区域 -->
		<div id="fuiContent" class="fui-content">
			<ul id="tree" name="tree" class="mini-tree"
				style="width: 100%; height: 100%" autoLoad="false"
				showTreeIcon="true" textField="text" idField="id" parentField="pid"
				action="getBelongProjectModal" resultAsTree="false">

			</ul>
			<div style="display: none">
				<input class="mini-textbox" id="categoryguid" bind="categoryguid" />
			</div>
		</div>

	<!-- 请修改相对路径 -->
	<script src="../../../../rest/resource/jsboot"></script>
	<script>
    // 初始化页面
    var tree = mini.get("tree");
    var categoryguid = mini.get('categoryguid');
    epoint.initPage('documenttreeaction');

    function callback(data) {
        if (data.msg) {
            epoint.alert(data.msg, '', searchData);
        }
    }

    tree.on('nodeclick', function(e) {
		// 获取点击节点的id
		console.log(e.node);
		var id = e.node.id;
		categoryguid.setValue(id);
		searchData();
	});

	tree.on('nodedblclick', function(e) {
		if(categoryguid.getValue()=="f9root"){
			mini.alert("请选择正确的分组！")
		}else{
			epoint.execute("transferSelect", '',categoryguid.getValue(), closeCallback);
		}
	});

	function closeCallback(data) {
		if (data.msg) {
			epoint.alertAndClose(data.msg);
		}
	}
</script>
</body>
</html>