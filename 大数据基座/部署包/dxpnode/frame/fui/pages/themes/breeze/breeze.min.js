/*!
 * 主题2-breeze
 * author:JiangJinJian
 * date: 2018-05-31
 * version: 1.0.0
 */

/* global UserSettings, _userName_, _userGuid_, _getNiceScroll_, tabsNavConfig, getDataUrl,resizeTab, EpTabsNav, createMainContentCover, dealLinkOpen, initPortal, eWebSocket:true */
var FIRST_MENU_TPL='{{#items}}\x3cli class\x3d"leaf-item"\x3e\x3ca href\x3d"javascript:;" data-code\x3d"{{code}}" data-name\x3d"{{name}}" data-url\x3d"{{url}}" data-openType\x3d"{{openType}}" data-hassub\x3d"{{hasSub}}" class\x3d"top-item"\x3e\x3cdiv class\x3d"clearfix relative"\x3e\x3cdiv class\x3d"l"\x3e\x3ci class\x3d"icons font-icons {{icon}}"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"l text-name-contain text-ellipsis"\x3e\x3cspan class\x3d"text-name" title\x3d"{{name}}"\x3e{{name}}\x3c/span\x3e\x3c/div\x3e{{#hasSub}}\x3cdiv class\x3d"l arrow-icon"\x3e\x3c/div\x3e{{/hasSub}}\x3c/div\x3e\x3c/a\x3e\x3c/li\x3e{{/items}}',SECOND_MENU_TPL='\x3cli class\x3d"leaf-item"\x3e\x3ca href\x3d"javascript:;" data-code\x3d"{{code}}" data-name\x3d"{{name}}" data-url\x3d"{{url}}" data-openType\x3d"{{openType}}" data-hassub\x3d"{{hasSub}}" style\x3d"padding-left: {{indent}}px;" class\x3d"second-item"\x3e\x3cdiv class\x3d"clearfix relative"\x3e\x3cdiv class\x3d"l icons-contain"\x3e\x3ci class\x3d"icons font-icons {{icon}}"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"l text-name-contain text-ellipsis"\x3e\x3cspan class\x3d"text-name" title\x3d"{{name}}"\x3e{{name}}\x3c/span\x3e\x3c/div\x3e{{#hasSub}}\x3cdiv class\x3d"l arrow-icon"\x3e\x3c/div\x3e{{/hasSub}}\x3c/div\x3e\x3c/a\x3e{{#hasSub}}\x3cul class\x3d"dep-{{depLen}}"\x3e{{{subMenu}}}\x3c/ul\x3e{{/hasSub}}\x3c/li\x3e',$surfaceMain=$("#surface-main"),$header=$("#header"),$sidebarPopUp=$("#sidebar-popup"),$msgPanel=$("#msg-panel"),$themeBtn=$("#themes-btn"),$breezeTabs=$(tabsNavConfig.tabsContainer),$coverContainer=$("#page-cover");window.createMainContentCover=Util.browsers.isIE&&window.hasObjectTag?function(){var a=document.createElement("iframe");a.width="100%";a.height="100%";a.scrolling="no";a.frameBorder=0;a.style.background="transparent";a.src="../../activexcover/activexcover.html";return $('\x3cdiv class\x3d"main-content-cover hidden"\x3e\x3c/div\x3e').append(a).appendTo($coverContainer)}:function(){return $('\x3cdiv class\x3d"main-content-cover hidden"\x3e\x3c/div\x3e').appendTo($coverContainer)};window.dealLinkOpen=function(a){switch(a.openType){case "tabsnav":TabsNav.addTab(a);break;case "dialog":epoint.openTopDialog(a.name,Util.getRightUrl(a.url));break;case "blank":window.open(Util.getRightUrl(a.url),a.id)}};var _breezeEvent_=new Util.UserEvent,useWebsocket=!0===Util.getFrameSysParam("useWebsocket");window.eWebSocket=void 0;var creatWebSocket=function(a,b,f){if(eWebSocket)f&&f();else{var g=window.EWebSocketConfig?window.EWebSocketConfig:{url:EmsgConfig.websocketUrl};g.uid=a;g.uname=b;window.EWebSocket?(eWebSocket=new EWebSocket(g),f&&f(),_breezeEvent_.fire("websocketCreated")):Util.loadJs("frame/fui/js/widgets/ewebsocket/ewebsocket.js",function(){eWebSocket=new EWebSocket(g);f&&f();_breezeEvent_.fire("websocketCreated")})}};window.TabsNav=new EpTabsNav(tabsNavConfig);(function(a,b){var f=b("#current-title"),g=TabsNav.activeTab;TabsNav.activeTab=function(){var a=b("#"+this._getTabId(arguments[0])).find(".tn-tabs-nav-name")[0].getAttribute("title");f.text(a);return g.apply(this,arguments)}})(this,jQuery);window.resizeTab=function(){$breezeTabs.css("opacity","0");setTimeout(function(){$(window).trigger("resize");$breezeTabs.css("opacity","1")},300)};var _getData_=function(a,b){return Util.ajax({url:epoint.dealRestfulUrl(getDataUrl+"/"+a),data:b})};(function(a,b){$header.on("click",".change-tab",function(){$surfaceMain.toggleClass("showtab");resizeTab()})})(window,jQuery);(function(a,b){function f(){var a=b.Deferred();_getData_("getMenu",{query:"all"}).done(function(c){c=c||[];e=[].concat(r,c);b(e).each(function(b,a){a.hasSub=a.hasSub||!(!a.items||!a.items.length);a.hasSub&&(A[a.code]=a.items)});a.resolve(e)});return a.promise()}var g=b("#menu"),l=b("#top-menu"),h=b("#second-menu"),d=l.add(h),z=b("#popup-title"),c=createMainContentCover(),A={},e=[],k=[],r=[];parseInt(b(a).width(),10);var t=parseInt(b(a).height(),10);b(a).on("resize",function(){parseInt(b(a).width(),10);t=parseInt(b(a).height(),10)});a.initPortal=function(a,c){function e(a){b.each(a,function(a,b){b.icon||(b.icon="modicon-75");b.items&&b.items.length&&e(b.items)})}if(a&&a.length){for(var n={closeIcon:!1,refresh:!0},q=[],m=0;m<a.length;m++){var p=a[m],d=!1;void 0!=p.items?!d&&b.each(p.items,function(b,a){if(c){if(a.code==c)return n.id=a.code||"home",n.url=a.url,n.name=a.name,d=!0,!1}else if("tabsnav"==a.openType)return n.id=a.code||"home",n.url=a.url,n.name=a.name,d=!0,!1}):(d||(c?p.code==c&&(n.id=p.code||"home",n.url=p.url,n.name=p.name,d=!0):"tabsnav"==p.openType&&(n.id=p.code||"home",n.url=p.url,n.name=p.name,d=!0)),q=q.concat(a.splice(m,1)),m--)}TabsNav.addTab(n);r=[{name:"\u5185\u7f51\u95e8\u6237",icon:"modicon-75",hasSub:!0,code:"portal",items:[].concat(q,a)}];e(r[0].items)}};var y=function(){if(e.length){var a=Mustache.render(FIRST_MENU_TPL,{items:e});l.html(a)}else f().done(function(a){a=Mustache.render(FIRST_MENU_TPL,{items:a});l.html(a);x(!0)})};_breezeEvent_.on("afterPageInfo",y);var v=function(){$sidebarPopUp.fadeOut(100);c.addClass("hidden")};b("body").on("click",function(a){b(a.target).closest(d).length||(v(),l.find(".leaf-item.active").removeClass("active"))});var u=function(){var a=$sidebarPopUp.data("top"),b=parseInt(h.outerHeight(),10)+5+39,c=a-100;a+b+32>t?(a="-32px",0<t-b-32?c="initial":b+32>t&&(c="-100px")):a="initial";$sidebarPopUp.css({bottom:a,top:c}).fadeIn(100)},w=function(a,c){var d=[];b.each(a,function(a,e){var m={name:e.name,code:e.code,url:e.url,icon:e.icon||"modicon-1",openType:e.openType,hasSub:!(!e.items||!e.items.length)};m.rowkey=void 0===c?a+"":c+"-"+a;var p=m.rowkey.split("-").length;m.depLen=p;1===p?(m.isTop=!0,m.indent=0):(m.isTop=!1,p=m.rowkey.split("-").length,2>p&&(p=2),m.indent=0+8*(p-2));m.hasSub?d.push(Mustache.render(SECOND_MENU_TPL,b.extend(m,{subMenu:w(e.items,m.rowkey)}))):d.push(Mustache.render(SECOND_MENU_TPL,m))});return d.join("")},x=function(a){if(k.length){if(!a){var c=Mustache.render(FIRST_MENU_TPL,{items:k});l.html(c)}}else _getData_("getQuickMenu").done(function(c){c&&c.length?(k=c,a||l.html(Mustache.render(FIRST_MENU_TPL,{items:c}))):b(".quick-btns").hide()})};g.on("click",".top-item",function(e){var d=b(this),k=d.data();e=k.code;var n=k.url,q=k.name,m=k.opentype,k=k.hassub;d.parent().addClass("active").siblings(".active").removeClass("active");k?(d=d.offset().top,n=A[e],z.attr("title",q).text(q),q=w(n),h.html(q).attr("top-code",e),$sidebarPopUp.data("top",d),u(),c.removeClass("hidden")):(v(),n&&("tabsnav"===m?TabsNav.addTab({id:e,name:q,url:n}):a.open(Util.getRightUrl(n),e)))}).on("click",".second-item",function(){var c=b(this),e=c.data(),d=e.code,k=e.url,q=e.name,m=e.opentype;e.hassub?(c.next().slideToggle(200),c.toggleClass("active"),setTimeout(function(){u()},400)):(v(),k&&("tabsnav"===m?TabsNav.addTab({id:d,name:q,url:k}):a.open(Util.getRightUrl(k),d)))}).on("click","#icon-quick",function(){var a=b(this);a.hasClass("active")?(a.removeClass("active"),y()):(a.addClass("active"),x())}).on("click","#icons-trigger",function(){b(this).toggleClass("active");g.toggleClass("narrow");$surfaceMain.toggleClass("narrow");resizeTab()})})(window,jQuery);(function(a,b){function f(){ThemeSelection._styleLoaded=!0;l=new ThemeSelection({getPagesUrl:getPagesUrl,savePageUrl:savePageUrl,showCallback:function(){g.removeClass("hidden")},hideCallback:function(){$themeBtn.removeClass("active");g.addClass("hidden")}});window.themeSelection=l;$themeBtn.on("click",function(){$themeBtn.hasClass("active")?($themeBtn.removeClass("active"),l.hide()):(l.show(),$themeBtn.addClass("active"))});b("body").on("click",function(a){b(a.target).closest(".theme-selection-container, #themes-btn").length||($themeBtn.removeClass("active"),l.hide())})}var g=createMainContentCover(),l;window.ThemeSelection?f():Util.loadJs("frame/fui/js/widgets/themeselection/themeselection.js",f)})(this,jQuery);(function(a,b){function f(){l.removeClass("active");d.addClass("hidden")}var g=b("#logo-img"),l=b("#user-info"),h=b(".user-portrait",l),d=createMainContentCover();l.on("click",".user-info-summary",function(){l.hasClass("active")?f():(l.addClass("active"),d.removeClass("hidden"))}).on("click",".user-action-item",function(){var a=b(this);if(a.hasClass("person-info"))dealLinkOpen({id:this.getAttribute("data-id"),name:this.getAttribute("data-name"),url:this.getAttribute("data-url"),openType:"tabsnav"});else if(a.hasClass("logout"))mini.confirm("\u60a8\u786e\u5b9a\u8981\u9000\u51fa\u7cfb\u7edf\u5417\uff1f","\u7cfb\u7edf\u63d0\u793a",function(a){"ok"==a&&(eWebSocket&&eWebSocket.close(),UserSettings.logout())});else if(a.hasClass("role-change"))UserSettings.changeRole(_userGuid_);else{var d=a.data("opentype"),e=a.data("id"),k=a.attr("url"),l=a.text(),h=a.attr("script");e||(e=Util.uuid(),a.data("id",e).attr("data-id",e));if(k)dealLinkOpen({id:e,openType:d,name:l,url:k});else if(h)try{eval(h)}catch(y){console.error(y)}}f()});b("body").on("click",function(a){b(a.target).closest("#user-info").length||f()});var z=function(a,b){var c=new Image;c.onload=function(){c.onload=null;b.src=a};c.onerror=function(){console.error(a+"\u5bf9\u5e94\u7684\u56fe\u7247\u8d44\u6e90\u65e0\u6cd5\u52a0\u8f7d\uff01")};c.src=a};_getData_("getUserInfo").done(function(c){a._userName_=c.name;a._userGuid_=c.guid;a._msgcenterConfig_=b.extend({},a.MsgCenterConfig,{isMsgCenterMaxSize:c.isMsgCenterMaxSize||!1,msgCenterOrder:c.msgCenterOrder||"asc",hideCallback:function(){}});useWebsocket&&creatWebSocket(_userGuid_,_userName_);if(c.portrait){var d=Util.getRightUrl(epoint.dealRestfulUrl(c.portrait));h.attr("src",d)}c.hasParttime&&l.find(".user-action-item.role-change").removeClass("hidden");d=b("#user-info-detail");d.find(".user-name").text(c.name).attr("title",c.name);d.find(".user-dept").text(c.ouName).attr("title",c.ouName)});_getData_("getPageInfo").done(function(b){b.title&&(document.title=b.title,a.systemTitle=b.title);z(Util.getRightUrl(b.logo||a.DEFAULT_LOGO_URL),g[0]);b.fullSearchUrl&&(a._fullSearchUrl_=b.fullSearchUrl);initPortal(b.homes,b.defaultHome);_breezeEvent_.fire("afterPageInfo")});_getData_("getExtTabsInfo").done(function(a){if(a&&a.length){var d="";b.each(a,function(a,b){b.icon=b.icon||"modicon-8";/^icon-/.test(b.icon)&&(b.icon="action-icon "+b.icon);d+=Mustache.render('\x3cli class\x3d"user-action-item" title\x3d"{{name}}" url\x3d"{{url}}" data-opentype\x3d"{{openType}}" script\x3d"{{script}}"\x3e\x3cspan class\x3d"{{icon}}"\x3e\x3c/span\x3e{{name}}\x3c/li\x3e',b)});b(d).insertAfter("#person-info-setting")}})})(this,jQuery);(function(a,b){function f(){B=new EMsgList({content:v,getUrl:EmsgConfig.baseUrl,ignoreUrl:EmsgConfig.baseUrl,userImg:EmsgConfig.userImg,groupImg:EmsgConfig.groupImg,afterOpenEMsg:function(){g()},onDecEmsgCount:D});a.RefreshEMsg=b.proxy(B.getData,B)}function g(){l.addClass("hidden");$msgPanel.stop(!0).animate({right:-350},function(){$msgPanel.addClass("hidden")});e.find(".js-panel.active").removeClass("active")}var l=createMainContentCover(),h="\u60a8\u6709\u65b0\u6d88\u606f\u63d0\u9192\uff0c\u8bf7\u70b9\u51fb\u67e5\u770b\uff01",d=0,z="";a.docTitle={roll:function(){z=a.systemTitle||document.title;document.title=h;clearTimeout(d);d=setTimeout(function p(){document.title=h.substring(1,h.length)+h.substring(0,1);h=document.title;d=setTimeout(p,300)},300)},stop:function(){clearTimeout(d);document.title=z||document.title;h="\u60a8\u6709\u65b0\u6d88\u606f\u63d0\u9192\uff0c\u8bf7\u70b9\u51fb\u67e5\u770b\uff01"}};var c=b("#msg-sound"),A=function(a){a=parseInt(a,10);return 99<a?"99+":0>=a?"":a+""},e=b("#top-icons"),k=b(".icons-emsg \x3e .tip-num",e),r=b(".icons-chat \x3e .tip-num",e),t=b("#msgEMsg",$msgPanel),y=b(".msg-panel-content",t),v=b(".emsg-recent-list",y),u=b(".online-user-num",t),w=document.getElementById("online-user"),x=function(a){var b={haseXun:!0,needNum:!0};a&&(b.inCache=!0);return _getData_("getMsgCount",b).done(function(a){n(a)})},n=function(a){var b,d=!1;a.remind?(b=parseInt(k.data("num"),10)||0,a.remind>b&&(d=!0),k.removeClass("hidden").text(A(a.remind)),k.data("num",a.remind)):k.text("").addClass("hidden");a.eXun?(b=parseInt(r.data("num"),10)||0,a.eXun>b&&(d=!0),r.removeClass("hidden").text(A(a.eXun)),r.data("num",a.eXun)):r.text("").addClass("hidden");d?(C(100),docTitle.roll()):docTitle.stop()},C=function(a,d,c){if(!1===Util.getFrameSysParam("messageSound"))return Util.noop;d=Util.getRightUrl(d);if(Util.browsers.isIE){var e=b('\x3ciframe src\x3d"" frameborder\x3d"0" class\x3d"hidden"\x3e\x3c/iframe\x3e').appendTo(a);return function(){e[0].src=d+"?_\x3d"+ +new Date}}var m=document.createElement("audio");m.src=Util.getRightUrl(c);m.className="hidden-accessible";a.append(m);var k=null;return function E(a){void 0===a&&(a=100);m.play()["catch"](function(){clearTimeout(k);0<a&&(k=setTimeout(function(){E(--a)},50))})}}(c,"../../msgsound/sound.html","../../msgsound/newsms.wav");_breezeEvent_.on("afterPageInfo",function(){x();useWebsocket||setInterval(function(){x(!0)},6E4)});if(useWebsocket)_breezeEvent_.on("websocketCreated",function(){eWebSocket.socketEvent.on("messagecount",function(a){n(a.data)})});a.getMessageCount=x;var D=function(){var a=r.text();a&&(a=parseInt(a)-1);0==a&&(a="",r.data("num",0).addClass("hidden"));r.text(a)},B;a.EMsgList?f():Util.loadJs("frame/fui/js/widgets/emsglist/emsglist.js",function(){f()});a.OnlineUserSettings&&a.OnlineUserSettings.show&&(t.find(".msg-panel-head").addClass("tab").find(".panel-hd-tab.hidden").removeClass("hidden"),t.on("click",".panel-hd-tab",function(){var a=b(this),d=a.data("ref"),c=a.data("hasShow"),e=v;a.hasClass("active")||(a.addClass("active").siblings().removeClass("active"),d&&(e=b("#"+d,y),c||setTimeout(function(){OnlineUserSettings.onRefreshData(function(a){u.html(a)});a.data("hasShow",!0)},10)),e.removeClass("hidden").siblings().addClass("hidden"))}));a.hideMessagePanel=g;var q;a.messageCenter={refresh:function(){q&&q.refresh()}};e.on("click",".js-panel",function(){var d=b(this),c=d.data("ref"),e=b("#"+c,$msgPanel);if(d.hasClass("active"))g();else if(d.addClass("active").siblings(".active").removeClass("active"),"msgRemind"==c)q||(q=new MsgCenter(a._msgcenterConfig_||{})),q.show(),hideMessagePanel();else{if("msgEMsg"==c&&(B.getData(),a.OnlineUserSettings&&a.OnlineUserSettings.show))if(w.src)OnlineUserSettings.onRefreshData(function(a){u.html(a)});else w.src=OnlineUserSettings.url,w.attachEvent?w.attachEvent("onload",function(){OnlineUserSettings.onRefreshData(function(a){u.html(a)})}):w.onload=function(){OnlineUserSettings.onRefreshData(function(a){u.html(a)})};e.removeClass("hidden").siblings(".js-detail").addClass("hidden");e.find(".msg-panel-content").removeClass("hidden");$msgPanel.removeClass("hidden");$msgPanel.stop(!0).animate({right:0});l.removeClass("hidden")}});$msgPanel.on("click",".msg-panel-hide",function(a){hideMessagePanel()});b("body").on("click",function(a){b(a.target).closest("#msg-panel , .js-panel[data-ref]").length||hideMessagePanel()});a.getMessageCount=x})(this,jQuery);(function(a,b){function f(){return Util.ajax({url:a._searchCfg.fullSearchCateUrl}).done(function(a){g(a.categories)})}function g(d){function f(a){if(Util.browsers.isIE||Util.browsers.isEdge)h[a?"addClass":"removeClass"]("show-overflow")}d=d||[];"string"==typeof d&&(d=mini.decode(d));var c=[];b.each(d,function(a,b){c.push({id:b.guid,name:b.name,iconCls:b.icon||"view"})});c.length||c.push({id:"all",name:"\u5168\u6587\u68c0\u7d22",iconCls:"modicon-25"});ClassifySearch._styleLoaded=!0;ClassifySearch.CLASSIFICATION_TPL='\x3cdiv class\x3d"classify-search-classify-item {{#isActive}}active{{/isActive}}" data-id\x3d"{{id}}" data-title-tpl\x3d"\u4e0e${keyword}\u76f8\u5173\u7684{{name}}"\x3e\x3cspan class\x3d"classify-search-classify-icon {{iconCls}}"\x3e\x3c/span\x3e\u4e0e\x3cspan class\x3d"classify-search-classify-kw"\x3e\x3c/span\x3e\u76f8\u5173\u7684{{name}}\x3cspan class\x3d"classify-search-classify-target hidden"\x3e{{target}}\x3c/span\x3e\x3c/div\x3e';ClassifySearch._$pageCover=createMainContentCover();var g=new ClassifySearch({id:"header-search",searchTarget:"\u5185\u5bb9",category:c,placeholder:"\u8bf7\u8f93\u5165",maxShowCharacter:4,enter:function(b,d){var c;c=b||"all";var e=document.getElementById("tab-content-fullsearch");c=a._fullSearchUrl_+"?wd\x3d"+a.encodeURI(d)+"\x26type\x3d"+c;e?e.src=Util.getRightUrl(c):dealLinkOpen({id:"fullsearch",name:"\u5168\u6587\u68c0\u7d22",url:c,openType:"tabsnav"});h.removeClass("active")}});l(g);h.on("click",".search-btn",function(){f(!1);h.toggleClass("active").trigger("autoFocus")}).on("autoFocus",function(){Util.browsers.isSupportTransition||h.hasClass("active")&&g.$input.trigger("focus")});if(Util.browsers.isSupportTransition)h.on(Util.browsers.transitionend,function(a){a.target===this&&h.hasClass("active")&&(f(!0),g.$input.trigger("focus"))});if(Util.browsers.isSupportAnimation)g.$popup.on(Util.browsers.animationend,function(a){a.target!==this||g.$container.hasClass("popup")||(f(!1),h.removeClass("active"))});else g.$input.on("blur",function(){Util.browsers.isIE&&h.removeClass("show-overflow");h.removeClass("active")})}function l(a){function d(){var c=b.trim(a.$input.val());h&&h.abort();c&&(h=Util.ajax({url:epoint.dealRestfulUrl(_searchCfg.userModuleSearchUrl),data:{cnum:"user,module",key:c,rn:3,location:"search"}}),h.done(function(a){a=mini.decode(a.frameinfo);var d=[],f=[],g=new RegExp(c,"ig");a.users&&b.each(a.users,function(a,b){b.portrait=Util.getRightUrl(b.portrait);b.hlname=b.name.replace(g,'\x3cspan class\x3d"search-kw"\x3e'+c+"\x3c/span\x3e");d.push(Mustache.render(v,b))});a.modules&&b.each(a.modules,function(a,b){b.icon=b.icon||"modicon-1";b.hlname=b.name.replace(g,'\x3cspan class\x3d"search-kw" \x3e'+c+"\x3c/span\x3e");f.push(Mustache.render(u,b))});b(d.join("")).appendTo(e.empty());b(f.join("")).appendTo(k.empty())}))}var c=a.$classifyList.find('[data-id\x3d"user"]'),f=a.$classifyList.find('[data-id\x3d"module"]');if(c.length&&f.length){var e=b('\x3cul class\x3d"top-search-user-list"\x3e\x3c/ul\x3e'),k=b('\x3cul class\x3d"top-search-module-list"\x3e\x3c/ul\x3e');c.length&&(e.insertAfter(c),e.on("click",".top-search-user-item",function(){_searchCfg.userClick&&_searchCfg.userClick(this.getAttribute("data-id"),this.title);a.$input.blur().val("");a.hidePopup()}));f.length&&(k.insertAfter(f),k.on("click",".top-search-module-item",function(){var c=b(this);c.data("url")&&dealLinkOpen({id:c.data("id"),name:this.title,url:c.data("url"),openType:c.data("opentype")});a.$input.blur().val("");a.hidePopup()}));var g,l=[13,16,17,18,27,37,38,39,40];if("oninput"in document.createElement("input"))a.$input.on("input",function(){clearTimeout(g);g=setTimeout(d,50)});else a.$input.on("keyup",function(a){-1==b.inArray(a.which,l)&&(clearTimeout(g),g=setTimeout(d,50))});a.$input.on("setHistoryValue",d);var h,v='\x3cli class\x3d"top-search-user-item" data-id\x3d"{{guid}}" title\x3d"{{name}}" \x3e\x3cimg class\x3d"top-search-user-item-img" src\x3d"{{portrait}}" \x3e{{{hlname}}}\x3c/li\x3e',u='\x3cli class\x3d"top-search-module-item" data-id\x3d"{{code}}" title\x3d"{{name}}" data-opentype\x3d"{{openType}}" data-url\x3d"{{url}}"\x3e\x3cspan class\x3d"top-search-module-item-icon {{icon}}"\x3e\x3c/span\x3e{{{hlname}}}\x3c/li\x3e'}}var h=b("#search-container");_breezeEvent_.on("afterPageInfo",function(){var d=b("#menu");a._fullSearchUrl_?(d.removeClass("no-search"),f()):d.addClass("no-search")})})(this,jQuery);window.OpenEMsg=function(a,b,f){window.eMsg?"undefined"===typeof b?eMsg.open(a):eMsg.openSession(a,b,f):creatWebSocket(_userGuid_,_userName_,function(){eWebSocket.openEmsg(a,b,f)})};