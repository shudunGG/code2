<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>修改操作按钮</title>
<script src="../../../frame/fui/js/cssboot.js"></script>
<style type="text/css">
p {
	margin-left: 16px;
	margin-right: 16px;
}
</style>
</head>

<body>
	<!-- 必须有，加载时的loading效果 -->
	<div class="page-loading"></div>

	<!-- toolbar区域 -->
	<div class="fui-toolbar">
		<a class="mini-button" state="primary" id="save" onclick="saveModify">修改保存</a>
		<a class="mini-button" onclick="epoint.closeDialog">取消修改</a>
		<!--帮助按钮 -->
		<a role="helper" class="mr10">使用过程中需注意的信息</a>
	</div>

	<!-- 帮助信息区域 默认隐藏-->
	<div class="fui-notice hidden">
		<p>备注:内容会作为按钮的Title，也就是光标放在按钮上浮现的文字</p>
	</div>

	<!-- 内容区域 -->
	<div class="fui-content">
		<div id="fui-form" class="fui-form">
			<div role="row">
				<div role="control" label="操作名称" starred="true">
					<input id="operateName" class="mini-textbox"
						bind="workflowActivityOperation.operationName" required="true"
						requiredErrorText="操作名称不能为空!" />
				</div>
			</div>
			<div role="row">
				<div role="control" label="操作类型" starred="true">
					<input id="opType" bind="workflowActivityOperation.operationType"
						onvaluechanged="selectConditionChange(this.value)"
						data="[{text:'签收',id:'8'},
							{text:'转缓办',id:'7'},
							{text:'通过',id:'10'},
							{text:'显示为操作按钮的变迁',id:'15'},
							{text:'阅读',id:'18'},
							{text:'转交',id:'20'},
							{text:'送阅读',id:'25'},
							{text:'回退',id:'30'},
							{text:'退回到开始',id:'2'},
							{text:'结束当前工作项',id:'40'},
							{text:'终止流程实例',id:'45'},
							{text:'收回',id:'50'},
							{text:'保存',id:'60'},
							{text:'特殊操作',id:'70'},
							{text:'自定义（For待办工作项）',id:'0'},
							{text:'自定义（For已办工作项）',id:'1'},
							{text:'空白占位符',id:'999'},
							{text:'自定义（For流程设计）',id:'80'}]"
						textField="text" valueField="id" class="mini-combobox"
						required="true" requiredErrorText="操作类型不能为空!" />
				</div>
			</div>
			<div role="row" id="buildingJsActivity" rendered="showBuildingJs"
				class="buildingJsActivity hidden">
				<div role="control" label="按钮触发前">
					<input class="mini-textbox" id="operationDispName"
						bind="workflowActivityOperation.operationDispName" />
				</div>
				<div role="control" label="按钮触发后">
					<input class="mini-textbox" id="operationAfterPageUrl"
						bind="workflowActivityOperation.operationPageUrl" />
				</div>
			</div>
			<!-- 回退目标活动范围-->
			<div role="row" id="trBackTargetActivity"
				class="trBackTargetActivity hidden">
				<div role="control" label="回退目标活动范围">
					<input id="chkBackTargetActivity" bind="backTargetActivity"
						action="getBackTargetActivityList" textField="text"
						valueField="id" class="mini-checkboxlist" style="width: 100%" />
				</div>
				<div role="control" label="目标活动处理人">
					<div bind="rdoBackScope" class="mini-radiobuttonlist"
						id="rdoBackScope" repeatItems="2" value="10" textField="text"
						valueField="id"
						data="[{text:'仅提交人',id:'1'},
							{text:'所有处理人',id:'2'}]">
					</div>
				</div>
			</div>
			<!-- 送阅读目标活动范围 -->
			<div role="row" id="trSendToSignTargetActivity"
				class="trSendToSignTargetActivity hidden">
				<div role="control" label="送阅读目标活动范围">
					<input id="chkSendToSignTargetActivity"
						bind="sendToSignTargetActivity"
						action="getSendToSignTargetActivityList" textField="text"
						valueField="id" class="mini-checkboxlist" style="width: 100%" />
				</div>
			</div>
			<!-- 退回到开始目标活动范围 -->
			<div role="row" id="trBackToStartTargetActivity"
				class="trBackToStartTargetActivity hidden">
				<div role="control" label="目标活动范围">
					<!-- 					<div bind="backToMain" checked="false" class="mini-checkbox">子流程是否退回至主流程</div> -->
					<input id="chkBackToMain" bind="backToMain" class="mini-checkbox"
						style="width: 2%" />子流程是否退回至主流程
				</div>
			</div>
			<div role="row" id="trMultiTransctorMode"
				class="trMultiTransctorMode hidden">
				<div role="control" label=" 多人处理方式">
					<div id="multiTransactorMode"
						bind="workflowActivityOperation.multiTransctorMode"
						action="getHandleTypeList" class="mini-radiobuttonlist" value="OR"
						repeatItems="2" repeatLayout="table" repeatDirection="vertical"
						textField="text" valueField="id"></div>
				</div>
			</div>
			<div role="row" id="trCustomScript" class="trCustomScript hidden">
				<div role="control" label="点击按钮后执行的Js脚本">
					<input id="jstext" bind="operationPageUrl" class="mini-buttonedit"
						emptyText="" onbuttonclick="setParValue" selectOnFocus="true" />
				</div>
			</div>
			<div role="row" id="trIs_ShowOperationPage"
				class="trIs_ShowOperationPage hidden">
				<div role="control" label="是否显示操作处理页面">
					<div bind="workflowActivityOperation.is_ShowOperationPage"
						id="is_ShowOperationPage" onvaluechanged="operationChanged"
						checked="true" class="mini-checkbox">显示</div>
				</div>
			</div>
			<div role="row" id="trOperationCommonPageUrl"
				class="trOperationCommonPageUrl hidden">
				<div role="control" label="操作处理页面">
					<input id="urlPage" class="mini-buttonedit"
						bind="workflowActivityOperation.operationCommonPageUrl"
						emptyText="" onbuttonclick="setPage" selectOnFocus="true" />
				</div>
			</div>
			<div role="row" id="trOperationMobilePageUrl"
				class="trOperationMobilePageUrl hidden">
				<div role="control" label="移动端操作处理页面">
					<input id="urlMobilePage" class="mini-textbox"
						bind="workflowActivityOperation.mobileOperationCommonPageUrl" />
				</div>
			</div>
			<div role="row" id="trIs_ShowOpinionTemplete"
				class="trIs_ShowOpinionTemplete hidden">
				<div role="control" label="是否显示意见模板">
					<div bind="workflowActivityOperation.is_ShowOpinionTemplete"
						id="is_ShowOpinionTemplete" checked="true" class="mini-checkbox">显示</div>
				</div>
			</div>
			<div role="row" id="trIs_ShowNextActivity"
				class="trIs_ShowNextActivity hidden">
				<div role="control" label="是否显示后继活动">
					<div bind="workflowActivityOperation.is_ShowNextActivity"
						id="is_ShowNextActivity" checked="true" class="mini-checkbox">显示</div>
				</div>
			</div>
			<div role="row" id="trIs_CheckMaterialSubmit"
				class="trIs_CheckMaterialSubmit hidden">
				<div role="control" label="检查必需材料">
					<div bind="isCheckMaterial" checked="true" class="mini-checkbox"
						id="isCheckMaterial">检查</div>
				</div>
			</div>
			<div role="row" id="trDefaultOpion">
				<div role="control" label="默认处理意见">
					<input class="mini-textarea"
						bind="workflowActivityOperation.defaultOpinion" />
				</div>
			</div>
			<div role="row" id="trOpionNeeded">
				<div role="control" label="必须输入意见">
					<div bind="workflowActivityOperation.isRequireOpinion"
						class="mini-radiobuttonlist" repeatItems="2" value="10"
						textField="text" valueField="id"
						data="[{text:'是',id:'10'},
							{text:'否',id:'20'}]"></div>
				</div>
			</div>
			<div role="row" id="trMethodBeforeOperate"
				class="trMethodBeforeOperate hidden">
				<div role="control" label="操作前调用的方法">
					<input id="mgbefore" class="mini-buttonedit" emptyText=""
						onbuttonclick="selMethodBeforeOperate" selectOnFocus="true" />
					<!-- 隐藏域 -->
					<input id="mgBeforeHide" class="mini-hidden"
						bind="workflowActivityOperation.methodGuidBeforeOperate" />
				</div>
			</div>
			<div role="row" id="trMethodAfterOperate"
				class="trMethodAfterOperate hidden">
				<div role="control" label="操作后调用的方法">
					<input id="mgAfter" class="mini-buttonedit" emptyText=""
						onbuttonclick="selMethodAfterOperate" selectOnFocus="true" />
					<!-- 隐藏域 -->
					<input id="mgAfterHide" class="mini-hidden"
						bind="workflowActivityOperation.methodGuidAfterOperate" />
				</div>
			</div>
			<div role="row" style="display: none">
				<div role="control" label="完成后父页面重定向地址">
					<input class="mini-textbox" id="openerPageUrlAfterOperate"
						bind="workflowActivityOperation.openerPageUrlAfterOperate" />
				</div>
			</div>
			<div role="row" class="trShiftTransactor hidden"
				id="trShiftTransactor">
				<div role="control" label="转交处理人设置">
					<div class="btn-group mr10">
						<a class="mini-button" id="shiftTransactor"
							onclick="openShiftTransactor" iconCls="icon-gear">设置处理人</a>
					</div>
				</div>
			</div>
			<div role="row" id="trIs_ShowOpinion" class="trIs_ShowOpinion hidden">
				<div role="control" label="收回是否保留办理意见">
					<div bind="workflowActivityOperation.inputInfo" checked="true"
						id="inputInfo" class="mini-checkbox">保留</div>
				</div>
			</div>
			<div role="row" id="trSpanWidth" class="trSpanWidth hidden">
				<div role="control" label="空白宽度">
					<input class="mini-textbox" id="spanWidth"
						bind="workflowActivityOperation.spanWidth" style="width: 80px" />
				</div>
			</div>
			<div role="row">
				<div role="control" label="排序">
					<input class="mini-textbox" required="true" id="orderNumber"
						bind="workflowActivityOperation.orderNumber"
						vtype="int;range:0,99999999" requiredErrorText="排序码不能为空!" />
				</div>
			</div>
			<div role="row" id="trNode" height="60">
				<div role="control" label="备注">
					<input class="mini-textarea" bind="workflowActivityOperation.note" />
				</div>
			</div>
			<div role="row" id="occasion">
				<div role="control" label="显示场合">
					<div bind="chkIs_ShowWhenNormal" checked="true"
						class="mini-checkbox">正常办理时</div>
					<div bind="chkIs_ShowWhenRollBack" checked="true"
						class="mini-checkbox">退回时</div>
				</div>
			</div>
			<div role="row">
				<div role="control" label="用来控制显示的方法">
					<input id="txtMethodName" class="mini-buttonedit" emptyText=""
						bind="txtMethodName" onbuttonclick="selEventMethod"
						selectOnFocus="true" />
				</div>
			</div>
			<div role="row" style="display: none">
				<div role="control">
					<input id="hidMethodGuid" class="mini-textbox"
						bind="workflowActivityOperation.controlVisiableMethodGuid" />
				</div>
			</div>

		</div>
	</div>

	<input bind="processVersionGuid" id="processVersionGuid"
		class="mini-hidden" />
	<input id="hidOperationGuid" class="mini-hidden"
		bind="workflowActivityOperation.operationGuid" />

	<script src="../../../rest/resource/jsboot"></script>
	<script>
		//<![CDATA[ 
		// 初始化页面
		epoint.initPage('activitymanualoperationeditaction', '', initCallBack);

		//由list页面传参时进行触发
		function initCallBack(data) {
			if (data && data.jsDate) {
				mini.get("jstext").setText(data.jsDate);
			}
			mini.get("urlPage").setText(mini.get("urlPage").getValue());
			mini.get("mgbefore").setText(mini.get("mgbefore").getValue());
			mini.get("mgAfter").setText(mini.get("mgAfter").getValue());
			mini.get("txtMethodName").setText(
					mini.get("txtMethodName").getValue());
			//操作后事件绑text的值
			if (data && data.afterOperateName) {
				mini.get('mgAfter').setText(data.afterOperateName);
			}
			//显隐控制
			var aa = mini.get("opType").getValue();
			//由于“按钮触发后”的值和“点击按钮后执行的Js脚本”的值绑的是同一个值，为了防止修改类型之后，“点击按钮后执行的Js脚本”的值会串到“按钮触发后”的控件上，这边做了区分。
			selectConditionChange(aa + "_true");
		}

		function showConditions() {
			//按钮触发前/按钮触发后
			$('.buildingJsActivity').addClass('hidden');
			//回退目标活动范围
			$('.trBackTargetActivity').addClass('hidden');
			//送阅读目标活动范围
			$('.trSendToSignTargetActivity').addClass('hidden');
			//退回到开始目标活动范围
			$('.trBackToStartTargetActivity').addClass('hidden');
			//多人处理方式
			$('.trMultiTransctorMode').addClass('hidden');
			//点击按钮后执行的Js脚本
			$('.trCustomScript').addClass('hidden');
			//是否显示操作处理页面
			$('.trIs_ShowOperationPage').addClass('hidden');
			//操作处理页面
			$('.trOperationCommonPageUrl').addClass('hidden');
			//移动端操作处理页面
			$('.trOperationMobilePageUrl').addClass('hidden');
			//是否显示后继活动
			$('.trIs_ShowNextActivity').addClass('hidden');
			//是否显示意见模板
			$('.trIs_ShowOpinionTemplete').addClass('hidden');
			//检查必需材料
			$('.trIs_CheckMaterialSubmit').addClass('hidden');
			//操作前调用的方法
			$('.trMethodBeforeOperate').addClass('hidden');
			//操作后调用的方法
			$('.trMethodAfterOperate').addClass('hidden');
			//空白宽度
			$('.trSpanWidth').addClass('hidden');
			//收回是否保留办理意见
			$('.trIs_ShowOpinion').addClass('hidden');
			//转交处理人设置
			$('.trShiftTransactor').addClass('hidden');
		}

		function selectConditionChange(e) {
			var aa;
			//如果有“_true”代表是初始化的时候，则不去清空操作后按钮的值。
			if (e.split("_true") > 0) {
				mini.get('operationAfterPageUrl').setValue('');
				aa = e;
			} else {
				//如果没有“_true”
				aa = e.split("_true")[0];
			}
			showConditions();

			var b = "templateform:" + aa;
			if (b.valueOf() == "templateform:10"
					|| b.valueOf() == "templateform:15") {
				$('.buildingJsActivity').removeClass('hidden');
				$('.trIs_ShowOperationPage').removeClass('hidden');
				$('.trOperationCommonPageUrl').removeClass('hidden');
				$('.trOperationMobilePageUrl').removeClass('hidden');
				$('.trIs_ShowNextActivity').removeClass('hidden');
				$('.trIs_ShowOpinionTemplete').removeClass('hidden');
				$('.trIs_CheckMaterialSubmit').removeClass('hidden');
			} else if (b.valueOf() == "templateform:2") {
				$('.buildingJsActivity').removeClass('hidden');
				$('.trBackToStartTargetActivity').removeClass('hidden');
				$('.trIs_ShowOperationPage').removeClass('hidden');
				$('.trOperationCommonPageUrl').removeClass('hidden');
				$('.trOperationMobilePageUrl').removeClass('hidden');
				$('.trIs_ShowOpinionTemplete').removeClass('hidden');
			} else if (b.valueOf() == "templateform:20"
					|| b.valueOf() == "templateform:70") {
				$('.buildingJsActivity').removeClass('hidden');
				$('.trIs_ShowOperationPage').removeClass('hidden');
				$('.trOperationCommonPageUrl').removeClass('hidden');
				$('.trOperationMobilePageUrl').removeClass('hidden');
				$('.trIs_CheckMaterialSubmit').removeClass('hidden');
				if (b.valueOf() == "templateform:70") {
					$('.trIs_ShowOpinionTemplete').removeClass('hidden');
				}
				if (b.valueOf() == "templateform:20") {
					$('.trShiftTransactor').removeClass('hidden');
				}
			} else if (b.valueOf() == "templateform:25") {
				$('.buildingJsActivity').removeClass('hidden');
				$('.trSendToSignTargetActivity').removeClass('hidden');
				$('.trIs_ShowOperationPage').removeClass('hidden');
				$('.trIs_ShowNextActivity').removeClass('hidden');
				$('.trOperationCommonPageUrl').removeClass('hidden');
				$('.trOperationMobilePageUrl').removeClass('hidden');
				$('.trIs_ShowOpinionTemplete').removeClass('hidden');
			} else if (b.valueOf() == "templateform:40"
					|| b.valueOf() == "templateform:45") {
				$('.buildingJsActivity').removeClass('hidden');
				$('.trIs_ShowOperationPage').removeClass('hidden');
				$('.trOperationCommonPageUrl').removeClass('hidden');
				$('.trOperationMobilePageUrl').removeClass('hidden');
				$('.trIs_ShowOpinionTemplete').removeClass('hidden');
			} else if (b.valueOf() == "templateform:30") {
				$('.buildingJsActivity').removeClass('hidden');
				$('.trBackTargetActivity').removeClass('hidden');
				$('.trMultiTransctorMode').removeClass('hidden');
				$('.trIs_ShowOperationPage').removeClass('hidden');
				$('.trOperationCommonPageUrl').removeClass('hidden');
				$('.trOperationMobilePageUrl').removeClass('hidden');
				$('.trIs_ShowOpinionTemplete').removeClass('hidden');
			} else if (b.valueOf() == "templateform:50") {
				$('.buildingJsActivity').removeClass('hidden');
				$('.trIs_ShowOperationPage').removeClass('hidden');
				$('.trOperationCommonPageUrl').removeClass('hidden');
				$('.trOperationMobilePageUrl').removeClass('hidden');
				$('.trIs_ShowOpinion').removeClass('hidden');
			} else if (b.valueOf() == "templateform:0"
					|| b.valueOf() == "templateform:80") {
				$('.trCustomScript').removeClass('hidden');
				$('.trIs_ShowOperationPage').removeClass('hidden');
				$('.trOperationCommonPageUrl').removeClass('hidden');
				$('.trOperationMobilePageUrl').removeClass('hidden');
				$('.trIs_ShowOpinionTemplete').removeClass('hidden');
				$('.trIs_CheckMaterialSubmit').removeClass('hidden');
				//如果自定义（For流程），默认带出Js事件
				if (b.valueOf() == "templateform:80") {
					var s = 'epoint.openDialog("设计", Util.getRightUrl("frame/pages/epointworkflow/client/drawDemo/drawDemo?processVersionInstanceGuid=[#=ProcessVersionInstance_ProcessVersionInstanceGuid#]"),function(e){ShowTdOperate(true);epoint.refresh("handlecontrols"); }, {width : 1700,height : 1500,allowResize : true});';
					mini.get("jstext").setValue(s);
					mini.get("jstext").setText(s);
				}
			} else if (b.valueOf() == "templateform:1") {
				$('.trCustomScript').removeClass('hidden');
				$('.trIs_ShowOpinionTemplete').removeClass('hidden');

			} else if (b.valueOf() == "templateform:999") {
				$('.buildingJsActivity').removeClass('hidden');
				$('.trIs_ShowOpinionTemplete').removeClass('hidden');
				$('.trSpanWidth').removeClass('hidden');
			} else if (b.valueOf() == "templateform:8"
					|| b.valueOf() == "templateform:18"
					|| b.valueOf() == "templateform:60") {
				$('.buildingJsActivity').removeClass('hidden');
				$('.trIs_ShowOperationPage').removeClass('hidden');
				$('.trOperationCommonPageUrl').removeClass('hidden');
				$('.trOperationMobilePageUrl').removeClass('hidden');
				$('.trMethodBeforeOperate').removeClass('hidden');
				$('.trMethodAfterOperate').removeClass('hidden');
			} else {
				$('.buildingJsActivity').removeClass('hidden');
				$('.trIs_ShowOpinionTemplete').removeClass('hidden');
			}
			operationPageCheck();
		}

		//修改
		function saveModify() {
			if ((mini.get("txtMethodName").getValue() == "")
					|| (mini.get("txtMethodName").getValue() == null)) {
				mini.get("hidMethodGuid").setValue("");
			}
			if (epoint.validate()) {
				var e = mini.get('opType').getValue();
				dataChanged(e);
				var obj = mini.get('is_ShowOperationPage').getValue();
				if (obj == 'false') {
					mini.get('urlPage').setValue('');
					mini.get('urlMobilePage').setValue('');
				}

				epoint.execute('editOperation', "fui-form", closeCallback);
			}
		}

		function openShiftTransactor() {
			var processVersionGuid = mini.get("processVersionGuid").getValue();
			var operationGuid = mini.get("hidOperationGuid").getValue();
			epoint.openDialog("处理人设置",
					"framemanager/workflow/design/activitytransactor?operationGuid="
							+ operationGuid + "&processVersionGuid="
							+ processVersionGuid);
		}

		// 关闭操作的回调
		function closeCallback(data) {
			if (data.msg) {
				epoint.closeDialog(data.msg);
			}
		}

		function setParValue() {
			var processVersionGuid = mini.get("processVersionGuid").getValue();
			epoint.openDialog("选择方法",
					"framemanager/workflow/design/designhelper?mode=context&processVersionGuid="
							+ processVersionGuid, setParValueOperJS, {
						'width' : 680,
						'height' : 900
					});
		}

		function setParValueOperJS(rtnValue) {
			if (rtnValue && rtnValue != 'close') {
				var s = rtnValue.split(";")[1];
				var text = rtnValue.split(";")[0]
				mini.get("jstext").setValue(s);
				mini.get("jstext").setText(text);
			}
		}

		function setPage() {
			var opeType = mini.get("opType").getValue();
			var designHelperType;
			if (opeType == "10") {
				designHelperType = "commonHandle";
			} else if (opeType == "20") {
				designHelperType = "commonHandleShift";
			} else if (opeType == "30") {
				designHelperType = "commonHandleBack";
			} else if (opeType == "25") {
				designHelperType = "commonHandleSendToSign";
			} else if (opeType == "40") {
				designHelperType = "commonHandleTerminate";
			} else if (opeType == "45") {
				designHelperType = "commonHandleTerminatePVI";
			} else {
				epoint.showTips("这类操作类型不可选！",  {state : 'warning'});
				return false;
			}
			epoint.openDialog("选择页面",
					"framemanager/workflow/design/designhelper?mode=activityPage&type="
							+ designHelperType, setPageOperJS, {
						'width' : 780,
						'height' : 300
					});
		}

		function setPageOperJS(data) {
			if (data && data != 'close') {
				mini.get("urlPage").setValue(data);
				mini.get("urlPage").setText(data);
			}
		}

		function selMethodBeforeOperate() {
			var processVersionGuid = mini.get("processVersionGuid").getValue();
			epoint.openDialog("选择",
					"framemanager/workflow/design/designhelper?mode=function&processVersionGuid="
							+ processVersionGuid, selMethodBeforeOperateOperJS);
		}

		function selMethodBeforeOperateOperJS(data) {
			if (data && data != 'close') {
				var s = data.split(";");
				mini.get("mgBeforeHide").setValue(s[1]);
				mini.get("mgbefore").setValue(s[0]);
				mini.get("mgbefore").setText(s[0]);
			}
		}

		function selMethodAfterOperate() {
			var processVersionGuid = mini.get("processVersionGuid").getValue();
			epoint.openDialog("选择",
					"framemanager/workflow/design/designhelper?mode=function&processVersionGuid="
							+ processVersionGuid, selMethodAfterOperateOperJS);
		}

		function selMethodAfterOperateOperJS(data) {
			if (data && data != 'close') {
				var s = data.split(";");
				mini.get("mgAfterHide").setValue(s[1]);
				mini.get("mgAfter").setValue(s[0]);
				mini.get("mgAfter").setText(s[0]);
			}
		}

		function selEventMethod() {
			var processVersionGuid = mini.get("processVersionGuid").getValue();
			epoint.openDialog("选择",
					"framemanager/workflow/design/designhelper?mode=function&processVersionGuid="
							+ processVersionGuid + "&mainPVActivityGuid=",
					selEventMethodOperJS);
		}

		function selEventMethodOperJS(data) {
			if (data && data != 'close') {
				var rtnArray = data.split(";");
				mini.get("txtMethodName").setValue(rtnArray[0]);
				mini.get("txtMethodName").setText(rtnArray[0]);
				mini.get("hidMethodGuid").setValue(rtnArray[1]);
			}
		}

		//消息数据置为空
		function dataChanged(e) {
			var b = "templateform:" + e;
			if (b.valueOf() == "templateform:10"
					|| b.valueOf() == "templateform:15") {
				mini.get('chkSendToSignTargetActivity').setValue('');
				mini.get('chkBackTargetActivity').setValue('');
				mini.get('rdoBackScope').setValue('');
				mini.get('chkBackToMain').setValue('');
				mini.get('multiTransactorMode').setValue('');
				mini.get('jstext').setValue('');
				mini.get('mgBeforeHide').setValue('');
				mini.get('mgAfterHide').setValue('');
				mini.get('openerPageUrlAfterOperate').setValue('');
				mini.get('spanWidth').setValue('');
				mini.get('inputInfo').setValue('');

			} else if (b.valueOf() == "templateform:2") {
				mini.get('chkBackTargetActivity').setValue('');
				mini.get('rdoBackScope').setValue('');
				mini.get('chkSendToSignTargetActivity').setValue('');
				mini.get('multiTransactorMode').setValue('');
				mini.get('jstext').setValue('');
				mini.get('mgBeforeHide').setValue('');
				mini.get('mgAfterHide').setValue('');
				mini.get('openerPageUrlAfterOperate').setValue('');
				mini.get('spanWidth').setValue('');
				mini.get('is_ShowNextActivity').setValue('');
				mini.get('isCheckMaterial').setValue('');
				mini.get('inputInfo').setValue('');

			} else if (b.valueOf() == "templateform:20"
					|| b.valueOf() == "templateform:70") {
				mini.get('chkSendToSignTargetActivity').setValue('');
				mini.get('chkBackTargetActivity').setValue('');
				mini.get('rdoBackScope').setValue('');
				mini.get('chkBackToMain').setValue('');
				mini.get('multiTransactorMode').setValue('');
				mini.get('jstext').setValue('');
				mini.get('is_ShowNextActivity').setValue('');
				mini.get('mgBeforeHide').setValue('');
				mini.get('mgAfterHide').setValue('');
				mini.get('openerPageUrlAfterOperate').setValue('');
				mini.get('spanWidth').setValue('');
				mini.get('inputInfo').setValue('');
				if (b.valueOf() == "templateform:20") {
					mini.get('is_ShowOpinionTemplete').setValue('');
				}
			} else if (b.valueOf() == "templateform:25") {
				mini.get('chkBackTargetActivity').setValue('');
				mini.get('rdoBackScope').setValue('');
				mini.get('chkBackToMain').setValue('');
				mini.get('multiTransactorMode').setValue('');
				mini.get('jstext').setValue('');
				mini.get('isCheckMaterial').setValue('');
				mini.get('mgBeforeHide').setValue('');
				mini.get('mgAfterHide').setValue('');
				mini.get('openerPageUrlAfterOperate').setValue('');
				mini.get('spanWidth').setValue('');
				mini.get('inputInfo').setValue('');

			} else if (b.valueOf() == "templateform:40"
					|| b.valueOf() == "templateform:45") {
				mini.get('chkBackTargetActivity').setValue('');
				mini.get('rdoBackScope').setValue('');
				mini.get('chkSendToSignTargetActivity').setValue('');
				mini.get('chkBackToMain').setValue('');
				mini.get('multiTransactorMode').setValue('');
				mini.get('jstext').setValue('');
				mini.get('is_ShowNextActivity').setValue('');
				mini.get('isCheckMaterial').setValue('');
				mini.get('mgBeforeHide').setValue('');
				mini.get('mgAfterHide').setValue('');
				mini.get('openerPageUrlAfterOperate').setValue('');
				mini.get('spanWidth').setValue('');
				mini.get('inputInfo').setValue('');
			} else if (b.valueOf() == "templateform:30") {
				mini.get('chkSendToSignTargetActivity').setValue('');
				mini.get('chkBackToMain').setValue('');
				mini.get('jstext').setValue('');
				mini.get('is_ShowNextActivity').setValue('');
				mini.get('isCheckMaterial').setValue('');
				mini.get('mgBeforeHide').setValue('');
				mini.get('mgAfterHide').setValue('');
				mini.get('openerPageUrlAfterOperate').setValue('');
				mini.get('spanWidth').setValue('');
				mini.get('inputInfo').setValue('');
				mini.get('hidOperationGuid').setValue('');

			} else if (b.valueOf() == "templateform:50") {
				mini.get('chkBackTargetActivity').setValue('');
				mini.get('rdoBackScope').setValue('');
				mini.get('chkSendToSignTargetActivity').setValue('');
				mini.get('chkBackToMain').setValue('');
				mini.get('multiTransactorMode').setValue('');
				mini.get('jstext').setValue('');
				mini.get('is_ShowNextActivity').setValue('');
				mini.get('isCheckMaterial').setValue('');
				mini.get('mgBeforeHide').setValue('');
				mini.get('mgAfterHide').setValue('');
				mini.get('openerPageUrlAfterOperate').setValue('');
				mini.get('spanWidth').setValue('');
			} else if (b.valueOf() == "templateform:0"
					|| b.valueOf() == "templateform:80") {
				mini.get('operationDispName').setValue('');
				mini.get('operationAfterPageUrl').setValue('');
				mini.get('chkBackTargetActivity').setValue('');
				mini.get('rdoBackScope').setValue('');
				mini.get('chkSendToSignTargetActivity').setValue('');
				mini.get('chkBackToMain').setValue('');
				mini.get('multiTransactorMode').setValue('');
				mini.get('is_ShowNextActivity').setValue('');
				mini.get('mgBeforeHide').setValue('');
				mini.get('mgAfterHide').setValue('');
				mini.get('openerPageUrlAfterOperate').setValue('');
				mini.get('spanWidth').setValue('');
				mini.get('inputInfo').setValue('');
				//如果自定义（For流程），默认带出Js事件
				if (b.valueOf() == "templateform:80") {
					var s = 'epoint.openDialog("设计", Util.getRightUrl("frame/pages/epointworkflow/client/drawDemo/drawDemo?processVersionInstanceGuid=[#=ProcessVersionInstance_ProcessVersionInstanceGuid#]"),function(e){ShowTdOperate(true);epoint.refresh("handlecontrols"); }, {width : 1700,height : 1500,allowResize : true});';
					mini.get("jstext").setValue(s);
					mini.get("jstext").setText('');
				}
			} else if (b.valueOf() == "templateform:1") {
				mini.get('operationDispName').setValue('');
				mini.get('operationAfterPageUrl').setValue('');
				mini.get('chkBackTargetActivity').setValue('');
				mini.get('rdoBackScope').setValue('');
				mini.get('chkSendToSignTargetActivity').setValue('');
				mini.get('chkBackToMain').setValue('');
				mini.get('multiTransactorMode').setValue('');
				mini.get('is_ShowNextActivity').setValue('');
				mini.get('mgBeforeHide').setValue('');
				mini.get('mgAfterHide').setValue('');
				mini.get('openerPageUrlAfterOperate').setValue('');
				mini.get('spanWidth').setValue('');
				mini.get('inputInfo').setValue('');
				mini.get('isCheckMaterial').setValue('');
				mini.get('urlMobilePage').setValue('');
				mini.get('urlPage').setValue('');
				mini.get('is_ShowOpinionTemplete').setValue('');

			} else if (b.valueOf() == "templateform:999") {
				mini.get('chkBackTargetActivity').setValue('');
				mini.get('rdoBackScope').setValue('');
				mini.get('chkSendToSignTargetActivity').setValue('');
				mini.get('chkBackToMain').setValue('');
				mini.get('multiTransactorMode').setValue('');
				mini.get('is_ShowNextActivity').setValue('');
				mini.get('mgBeforeHide').setValue('');
				mini.get('mgAfterHide').setValue('');
				mini.get('openerPageUrlAfterOperate').setValue('');
				mini.get('inputInfo').setValue('');
				mini.get('isCheckMaterial').setValue('');
				mini.get('urlMobilePage').setValue('');
				mini.get('urlPage').setValue('');
				mini.get('is_ShowOpinionTemplete').setValue('');
			} else if (b.valueOf() == "templateform:8"
					|| b.valueOf() == "templateform:18"
					|| b.valueOf() == "templateform:60") {
				mini.get('chkBackTargetActivity').setValue('');
				mini.get('rdoBackScope').setValue('');
				mini.get('chkSendToSignTargetActivity').setValue('');
				mini.get('chkBackToMain').setValue('');
				mini.get('multiTransactorMode').setValue('');
				mini.get('is_ShowNextActivity').setValue('');
				mini.get('openerPageUrlAfterOperate').setValue('');
				mini.get('inputInfo').setValue('');
				mini.get('isCheckMaterial').setValue('');
				mini.get('is_ShowOpinionTemplete').setValue('');
				mini.get('spanWidth').setValue('');

			} else {
				mini.get('urlPage').setValue('');
				mini.get('urlMobilePage').setValue('');
				mini.get('chkBackTargetActivity').setValue('');
				mini.get('rdoBackScope').setValue('');
				mini.get('chkSendToSignTargetActivity').setValue('');
				mini.get('chkBackToMain').setValue('');
				mini.get('multiTransactorMode').setValue('');
				mini.get('jstext').setValue('');
				mini.get('is_ShowNextActivity').setValue('');
				mini.get('isCheckMaterial').setValue('');
				mini.get('mgBeforeHide').setValue('');
				mini.get('mgAfterHide').setValue('');
				mini.get('openerPageUrlAfterOperate').setValue('');
				mini.get('spanWidth').setValue('');
				mini.get('inputInfo').setValue('');
				mini.get('is_ShowOpinionTemplete').setValue('');
				mini.get('is_ShowOperationPage').setValue('');
			}
		}

		function operationPageCheck() {
			var obj = mini.get('is_ShowOperationPage').getValue();
			if (obj == 'true') {
				$('.trOperationCommonPageUrl').removeClass('hidden');
				$('.trOperationMobilePageUrl').removeClass('hidden');
			} else {
				$('.trOperationCommonPageUrl').addClass('hidden');
				$('.trOperationMobilePageUrl').addClass('hidden');
			}
		}

		//是否显示操作处理页面
		function operationChanged() {
			var obj = this.getChecked();
			if (obj == true) {
				$('.trOperationCommonPageUrl').removeClass('hidden');
				$('.trOperationMobilePageUrl').removeClass('hidden');
			} else {
				$('.trOperationCommonPageUrl').addClass('hidden');
				$('.trOperationMobilePageUrl').addClass('hidden');
			}
		}
		//]]>
	</script>
</body>
</html>