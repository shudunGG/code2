<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"></meta>
<meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
<title>文件上传控件</title>
<script src="../../frame/fui/js/cssboot.js"></script>

</head>
<body>
	<div class="page-loading"></div>
	
		<!-- 内容区域 -->
		<div class="fui-content">
			<!-- 上传控件 -->
			<div class="mini-outputtext mini-btn-primary"
				value="示例1说明：设置属性auto=false(选择图片后，点击按钮才开始上传)"></div>
			<div id="uploader" class="mini-webuploader"
				action="uploadtestaction.getFileUploadModel"
				onuploadfinished="OnUploadFinished" auto="false"
				onfilesuccess="OnFileSuccess"></div>
			<br /> <br />
			<hr />
			<div class="mini-outputtext" value="示例2说明：设置属性auto=true(选择完图片立即上传)"></div>
			<div id="uploader1" class="mini-webuploader"
				action="uploadtestaction.getFileUploadModel1" auto="true"></div>
			<hr />
			<div class="mini-outputtext"
				value="示例3说明：这个只是展示如何上传前和上传后的自定义内容编写，把图片缓存在内存中，如果要存入数据库，需要再添加按钮开始正式上传，如示例1。"></div>
			<div role="row">
				<div role="control" label="照片">
					<div style="position: relative; float: left;">
						<span id="photo1" class="text-minor">暂无个人图片， </span>
						<div id="uploader2" class="mini-webuploader"
							action="uploadtestaction.getFileUploadModel2" fileNumLimit="1"
							fileSingleSizeLimit="5120" limitType="jpeg,jpg,gif,png,bmp"
							mimeTypes="image/*" showDefaultUI="false" auto="true"
							pickerText="请上传" onfilesuccess="OnPhotoSuccess"></div>
						<span class="text-minor" style="width: 300px" id="photo3">（最佳图片尺寸：120px<em>*</em>180px）
						</span>
					</div>
					<div class="img-view" id="photo">
						<img id="lblPicture" src="" width="120px" height="180px"
							alt="个人头像图片" />
					</div>
				</div>
			</div>
		</div>
	<br />
	<script src="../../rest/resource/jsboot"></script>
	<script type="text/javascript">
		epoint.initPage("uploadtestaction");

		function OnUploadFinished() {
			console.log("所有文件上传结束");
		}

		function OnFileSuccess(){
			
		}
		function OnPhotoSuccess(args) {
			if (args.data.extraDatas.lblPicture) {
				showPhoto(args.data.extraDatas.lblPicture);
			}
		}
	</script>
</body>
</html>