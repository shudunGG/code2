var RE={};RE.currentSelection={startContainer:0,startOffset:0,endContainer:0,endOffset:0},RE.editor=document.getElementById("editor"),document.addEventListener("selectionchange",function(){RE.backuprange()}),RE.callback=function(){window.location.href="re-callback://"+encodeURI(RE.getHtml())},RE.setHtml=function(e){RE.editor.innerHTML=decodeURIComponent(e.replace(/\+/g,"%20"))},RE.getHtml=function(){return RE.editor.innerHTML},RE.getText=function(){return RE.editor.innerText},RE.setBaseTextColor=function(e){RE.editor.style.color=e},RE.setBaseFontSize=function(e){RE.editor.style.fontSize=e},RE.setSelectionFontSize=function(e){RE.restorerange();var t=document.getSelection();if(t.rangeCount){var n=document.createElement("font");n.setAttribute("size",e);var o=t.getRangeAt(0).cloneRange();o.surroundContents(n),t.removeAllRanges(),t.addRange(o)}},RE.setSelectFontSize=function(e){document.execCommand("FontSize",!1,e)},RE.setPadding=function(e,t,n,o){RE.editor.style.paddingLeft=e,RE.editor.style.paddingTop=t,RE.editor.style.paddingRight=n,RE.editor.style.paddingBottom=o},RE.setBackgroundColor=function(e){document.body.style.backgroundColor=e},RE.setBackgroundImage=function(e){RE.editor.style.backgroundImage=e},RE.setWidth=function(e){RE.editor.style.minWidth=e},RE.setHeight=function(e){document.body.style.minHeight=e},RE.setTextAlign=function(e){RE.editor.style.textAlign=e},RE.setVerticalAlign=function(e){RE.editor.style.verticalAlign=e},RE.setPlaceholder=function(e){RE.editor.setAttribute("placeholder",e)},RE.undo=function(){document.execCommand("undo",!1,null)},RE.redo=function(){document.execCommand("redo",!1,null)},RE.setBold=function(){document.execCommand("bold",!1,null)},RE.setItalic=function(){document.execCommand("italic",!1,null)},RE.setSubscript=function(){document.execCommand("subscript",!1,null)},RE.setSuperscript=function(){document.execCommand("superscript",!1,null)},RE.setStrikeThrough=function(){document.execCommand("strikeThrough",!1,null)},RE.setUnderline=function(){document.execCommand("underline",!1,null)},RE.setBullets=function(){document.execCommand("InsertUnorderedList",!1,null)},RE.setNumbers=function(){document.execCommand("InsertOrderedList",!1,null)},RE.setTextColor=function(e){RE.restorerange(),document.execCommand("styleWithCSS",null,!0),document.execCommand("foreColor",!1,e),document.execCommand("styleWithCSS",null,!1)},RE.setTextBackgroundColor=function(e){RE.restorerange(),document.execCommand("styleWithCSS",null,!0),document.execCommand("hiliteColor",!1,e),document.execCommand("styleWithCSS",null,!1)},RE.setHeading=function(e){document.execCommand("formatBlock",!1,"<h"+e+">")},RE.setIndent=function(){document.execCommand("indent",!1,null)},RE.setOutdent=function(){document.execCommand("outdent",!1,null)},RE.setJustifyLeft=function(){document.execCommand("justifyLeft",!1,null)},RE.setJustifyCenter=function(){document.execCommand("justifyCenter",!1,null)},RE.setJustifyRight=function(){document.execCommand("justifyRight",!1,null)},RE.setBlockquote=function(){document.execCommand("formatBlock",!1,"<blockquote>")},RE.insertImage=function(e,t){var n='<img width="50%" src="'+e+'"/><br>';RE.insertHTML(n)},RE.insertAudioImage=function(e,t){var n="<img onclick=\"playEditorAudio('"+t+'\')" width="70%" src="'+e+'"/><br>';RE.insertHTML(n)},RE.insertHTML=function(e){RE.restorerange(),document.execCommand("insertHTML",!1,e)},RE.insertLink=function(e,t){RE.restorerange();var n=document.getSelection();if(0==n.toString().length)document.execCommand("insertHTML",!1,"<a href='"+e+"'>"+t+"</a>");else if(n.rangeCount){var o=document.createElement("a");o.setAttribute("href",e),o.setAttribute("title",t);var r=n.getRangeAt(0).cloneRange();r.surroundContents(o),n.removeAllRanges(),n.addRange(r)}RE.callback()},RE.setTodo=function(e){var t='<input type="checkbox" name="'+e+'" value="'+e+'"/> &nbsp;';document.execCommand("insertHTML",!1,t)},RE.prepareInsert=function(){RE.backuprange()},RE.backuprange=function(){var e=window.getSelection();if(e.rangeCount>0){var t=e.getRangeAt(0);RE.currentSelection={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}},RE.restorerange=function(){var e=window.getSelection();e.removeAllRanges();var t=document.createRange();t.setStart(RE.currentSelection.startContainer,RE.currentSelection.startOffset),t.setEnd(RE.currentSelection.endContainer,RE.currentSelection.endOffset),e.addRange(t)},RE.enabledEditingItems=function(e){var t=[];document.queryCommandState("bold")&&t.push("bold"),document.queryCommandState("italic")&&t.push("italic"),document.queryCommandState("subscript")&&t.push("subscript"),document.queryCommandState("superscript")&&t.push("superscript"),document.queryCommandState("strikeThrough")&&t.push("strikeThrough"),document.queryCommandState("underline")&&t.push("underline"),document.queryCommandState("insertOrderedList")&&t.push("orderedList"),document.queryCommandState("insertUnorderedList")&&t.push("unorderedList"),document.queryCommandState("justifyCenter")&&t.push("justifyCenter"),document.queryCommandState("justifyFull")&&t.push("justifyFull"),document.queryCommandState("justifyLeft")&&t.push("justifyLeft"),document.queryCommandState("justifyRight")&&t.push("justifyRight"),document.queryCommandState("insertHorizontalRule")&&t.push("horizontalRule");var n=document.queryCommandValue("formatBlock");n.length>0&&t.push(n),window.location.href="re-state://"+encodeURI(t.join(","))},RE.focus=function(){var e=document.createRange();e.selectNodeContents(RE.editor),e.collapse(!1);var t=window.getSelection();t.removeAllRanges(),t.addRange(e),RE.editor.focus()},RE.blurFocus=function(){RE.editor.blur()},RE.removeFormat=function(){execCommand("removeFormat",!1,null)};