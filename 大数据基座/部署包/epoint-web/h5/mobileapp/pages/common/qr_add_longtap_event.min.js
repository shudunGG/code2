!function(e,t,n){"use strict";function i(e){var t=this,n=document.querySelectorAll(e+" img");[].forEach.call(n,function(e,n){t.picUrlToPageUrl(e.src,function(t){e.setAttribute("imgurl",t)})}),mui(e).off("longtap","[imgurl]"),mui(e).on("longtap","[imgurl]",function(){var e=this.getAttribute("imgurl");t.isExternalUrl(e)&&ejs.ui.actionSheet({items:["识别图中二维码"],cancelable:1,success:function(t){ejs.page.open({pageUrl:e,pageStyle:1,orientation:1,data:{key1:"value1"},success:function(e){}})},error:function(e){}})})}i.prototype={picUrlToPageUrl:function(e,t){var n=this,i=e;this.convertFileToDataURLviaFileReader(i,function(e){var i=new Image;i.onload=function(){},i.src=e,ejs.util.recognizeQRCode({imgPath:"",imgBase64:e,success:function(e){var i=e.corePath;n.isExternalUrl(i)&&t&&t(i)},error:function(e){}})})},convertFileToDataURLviaFileReader:function(e,t){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(n.response)},n.open("GET",e),n.send()},isExternalUrl:function(e){var t=/^(\/\/|http|https|ftp|file)/;return this.checkReg(t,e)},checkReg:function(e,t){return!!t&&e.test(t)===!0}},n.QRtoLongTap=i}({},document,window);