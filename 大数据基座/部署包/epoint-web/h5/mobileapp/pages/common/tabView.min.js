!function(t,e,n){"use strict";function o(t){var e=this;if(!t)throw new Error("请传入配置项");var n=t.container,o=t.isSwipe||"1";1!==n.nodeType&&(n=document.querySelector(n)),e.TABBTNRENTNODE=document.querySelector(".em-nav"),e.TABBTNWIDTH=document.querySelector(".em-nav a").offsetWidth,e.TABLINENODE=document.querySelector("#topNavLine"),e.TABLINEWIDTH=e.TABLINENODE.offsetWidth,e.TABVIEWPARENTNODE=document.querySelector(".em-tab-view"),e.TABVIEWWIDTH=document.querySelector(".em-tab-item").offsetWidth,e.MESSAGEITEMGUID=Util.getExtraDataByKey("messageitemguid")||"",e.TYPE=Util.getExtraDataByKey("type")||"";1==o&&e._screenMove(),e._changeTab()}o.prototype={_screenMove:function(){this.currentPostion=this.currentPostion||0;var t,e,n,o=this,r=document.querySelector(".em-main"),a=this.TABVIEWPARENTNODE,i=this.TABVIEWWIDTH*(this.TABVIEWPARENTNODE.children.length-1),s=0,c="left",l=!1,u=!1,T=[];r.addEventListener("touchstart",function(r){var i=r.touches[0];e=i.pageX,n=i.pageY,t=o.currentPostion,a.style.webkitTransition="all 0s",l=!1}),r.addEventListener("touchmove",this._throttle(function(r){r.preventDefault();var f=r.touches[0],h=f.pageX,E=f.pageY,d=h-e,m=E-n;if(Math.abs(d)>Math.abs(m)&&1!=u){r.preventDefault(),s=d;var N=t+d,p=/(-?\d+)(\.\d+)?px/g;try{console.log(Zepto(o.TABVIEWPARENTNODE).css("transform"))}catch(v){}var B=o.TABVIEWPARENTNODE.style.webkitTransform.match(p);try{B=B[0].replace("px","")}catch(v){}T.push(d),T.length>2&&T.shift(),console.log(T[0]-T[1]),c=T[0]-T[1]<0?"right":"left",B<=0&&B>=-i&&(N<=0&&N>=-i?(o._transfrom(a,N),l=!0):(o._transfrom(a,d>0?0:-i),l=!0))}else u=!0},12,!0)),r.addEventListener("touchend",this._debounce(function(t){var e=0,n=o.currentPostion,r=o.TABVIEWWIDTH;if(u=!1,a.style.webkitTransition=".5s transform",l){console.log("deltaT < 300"),e="left"==c?n-(r+s):n+r-s,console.log("translate111"),console.log(n-(r+s)),console.log(n+r-s),e>0&&(console.log("translate > 0"),e=0),e<-i&&(console.log("translate < -maxWidth"),e=-i),o._transfrom(a,e);var T=Math.abs(o.currentPostion)/Math.abs(r);console.log("index:"+T),o._switchHead(T+1)}},16))},_transfrom:function(t,e,n){t.style.webkitTransform="translate3d("+e+"px,0,0)",1!=n&&(this.currentPostion=e)},_debounce:function(t,e,n){var o;return function(){var r=this,a=arguments;if(clearTimeout(o),n){var i=!o;o=setTimeout(function(){o=null},e),i&&t.apply(r,a)}else o=setTimeout(function(){t.apply(r,a)},e)}},_throttle:function(t,e){var n,o,r,a=0,i=function(){a=+new Date,n=null,t.apply(o,r)},s=function(){var o=+new Date,s=e-(o-a),c=this;r=arguments,s<=0?(n&&(clearTimeout(n),n=null),a=o,t.apply(c,r)):n||(n=setTimeout(i,s))};return s},_changeTab:function(){var t=this;setTimeout(function(){t.TABBTNWIDTH=document.querySelector(".em-nav a").offsetWidth,t.TABLINENODE=document.querySelector("#topNavLine");var e=(t.TABBTNWIDTH-t.TABLINEWIDTH)/2;t.TABLINENODE.style.webkitTransform="translate3d("+e+"px, 0px, 0px)",setTimeout(function(){t.TABLINENODE.style.opacity="1"},300),mui(".em-nav").on("tap","a",function(){var n=this.getBoundingClientRect().left,o=e+n;t.TABLINENODE.style.webkitTransform="translate3d("+o+"px, 0px, 0px)";var r=0,a=Zepto(this).index();t._transfrom(t.TABVIEWPARENTNODE,-(r+t.TABVIEWWIDTH*a))})},200)},_switchHead:function(t){var e=this,n=(e.TABBTNWIDTH-e.TABLINEWIDTH)/2;e._transfrom(e.TABLINENODE,n+e.TABBTNWIDTH*(t-1),!0)},_setBodyStyle:function(t){var e=t.children,n=100*e.length;t.style.cssText="display: flex; width: "+n+"%; overflow: hidden; transform: translate3d(0, 0, 0);";for(var o=0,r=e.length;o<r;o++)e[o].style.width="100%"}},n.tabView=o}({},document,window);