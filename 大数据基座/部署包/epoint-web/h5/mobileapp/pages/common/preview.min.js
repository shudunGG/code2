"use strict";var preview=window.preview||function(e,o){return e.openPreviewUrl=function(e){e={url:e.url||"default url",data:e.data||{},successCB:e.successCB||function(){},errorCB:e.errorCB||function(){},isDebug:e.isDebug||!1,fileName:e.fileName||"",reDownloaded:e.reDownloaded||"1"};var o=e.fileName,r="doc,docx,rtf,xls,xlsx,ppt,pptx,pdf,zip,rar,7z,wps,txt,png,jpg,jpeg,gif",n=o.substring(o.lastIndexOf(".")+1,o.length);"-1"!=r.indexOf(n.toLowerCase())||""==o?ejs.util.getPreviewUrl({success:function(r){var n,i=r.previewUrl,t=i.match(/furl=/);t&&t.length>0?(i=i.replace(/furl=/,""),n=i+"fname="+o+"&furl="+e.url):n=i+e.url,e.isDebug&&ejs.ui.showDebugDialog(n),ejs.page.open({pageUrl:n,pageStyle:1,orientation:1,success:function(o){e.successCB&&e.successCB(o)}})},error:function(o){e.errorCB&&e.errorCB(o)}}):preview.downloadFile({url:e.url,fileName:e.fileName,reDownloaded:e.reDownloaded,isBackground:0},function(){ejs.ui.toast("文件下载完成")})},e.downloadFile=function(e,o){e.isBackground=e.isBackground.toString()||"1",e.openAfterComplete=e.openAfterComplete||"1","1"==e.isBackground&&ejs.ui.showWaiting("努力下载中..."),ejs.io.downloadFile({url:e.url,fileName:e.fileName,isBackground:e.isBackground,reDownloaded:e.reDownloaded||"1",openAfterComplete:e.openAfterComplete,success:function(r){"1"==e.isBackground&&ejs.ui.closeWaiting(),"1"!=e.openAfterComplete&&o&&"function"==typeof o&&o(r)},error:function(e){ejs.ui.toast("下载错误"+JSON.stringify(e))}})},"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&(define.amd||define.cmd)&&define(function(){return e}),e}({});