"use strict";Util.loadJs(["pages/common/common.js"],function(){customBiz.configReady()});var customBiz={configReady:function(){var e=this;Config.configReady(null,function(){e.initListeners(),e.getModuleList()},function(e){})},initListeners:function(){var e=this;mui(".mui-content").on("tap",".module-list",function(){var t=this,i=t.getAttribute("modulename"),n=t.getAttribute("moduleguid");ejs.page.open({pageUrl:Util.getProjectBasePath().replace(/h5\/mobileapp\//i,"")+"frame/pages/epointworkflow/client/mobileprocesscreateinstance",pageStyle:1,orientation:1,data:{modulename:i,moduleguid:n,processguid:e.processGuid,canhandle:"1"},success:function(e){},error:function(e){}})})},getModuleList:function(){var e=this;ejs.ui.showWaiting("正在加载..."),Promise.all([new Promise(function(e,t){ejs.runtime.getAppKey({success:function(t){e(t.appKey)},error:function(e){t(e)}})}),new Promise(function(e,t){ejs.runtime.getPlatformUrl({success:function(t){e(t.platformUrl)},error:function(e){t(e)}})})]).then(function(t){var i={appguid:t[0],platform:Util.os.ios?6:5};common.ajax({url:"getfeedbackmodulelist",data:i,isShowWaiting:!1,isEncrypt:!1},function(i){ejs.ui.closeWaiting();var n=new RegExp("/client/");t[1].replace(n,"/file/getFile");if(1===i.status.code){var o=i.custom.module,s="",u=document.getElementById("template").innerHTML,c=document.getElementById("template-nop").innerHTML;e.processGuid=i.custom.processguid,mui.each(o,function(e,t){s+=t.moduleguid.indexOf("nop_")>-1?Mustache.render(c,t):Mustache.render(u,t)}),document.getElementById("listdata").innerHTML=s}else ejs.ui.toast(i.status.text)},function(e){ejs.ui.closeWaiting(),ejs.ui.toast(Config.TIPS_II)},{isDebug:!1})})["catch"](function(e){ejs.ui.toast(e)})}};