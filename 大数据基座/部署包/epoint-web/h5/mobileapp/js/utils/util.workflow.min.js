!function(t){"use strict";function e(e){var n=this;e=e||{},n.options=t.extend(a,e),e.serverUrl?n.serverUrl=e.serverUrl:n.serverUrl=n._getServerUrl()}var a={isDebug:!1},n=[],r=[],i={startProcess:"Handle_StartProcess_V6",getUserOpinion:"Opinion_GetUserOpinion_V6",getCommonOpinion:"Opinion_GetComm_V6",dealWaitHandle:"Handle_DealWaitHandle_V6"},o=i;e.prototype={startProcess:function(t,e,a){var i=this,s=null;if(a=a||!0,!t||"string"!=typeof t)throw new Error("请传入正确的ProcessGuid");a&&(s=function(t){ejs.navigator.setRightTextBtn("送下一步");var e=t.OperationList;e.forEach(function(t,e){n.push(t.OperationName),r.push(t.OperationGuid)})}),i._ajax({url:i.serverUrl+o.startProcess,data:{paras:{ProcessGuid:t}},dataPath:"UserArea.Worklowinfo",success:e,autoHandleCallback:s}),i._initListeners()},_ajax:function(e){var a=this,n=e.data;e.callback=e.callback||function(){},ejs.oauth.getToken(function(r){var i=r.token;n.ValidateData=i,ejs.sql.getConfigValue("MOA_KEY_UserGuid",function(r){var i=r.value;n.paras=n.paras||{},n.paras.UserGuid=i,n=JSON.stringify(n),a._showDebug(n),t.ajax({url:e.url,data:n,type:"post",dataPath:e.dataPath||"",success:function(t){e.dataPath&&(t=t.data),e.callback.call(a,t),e.autoHandleCallback&&e.autoHandleCallback.call(a,t),a._showDebug(JSON.stringify(t))},error:function(){e.callback.apply(a,arguments)}})})}),t.ajax({url:e.url})},getUserOpinionTpl:function(){},getCommonOpinionTpl:function(){},_initListeners:function(){window.onClickNBRightEJS=function(){ejs.nativeUI.actionSheet({items:n,cancelable:0},function(t,e,a){})}},_getServerUrl:function(){return Config.serverUrl},_showDebug:function(t){var e=this;e.options.isDebug&&console.log(t)}},t.workflow={init:function(t){return new e(t)},setInterfaceName:function(e){if(!e||"object"!=typeof e)throw new Error("传入参数不正确");t.extend(o,e)}}}(window.Util);