
<!DOCTYPE html>
<html>

<head>
<title>企业微信开放平台配置</title>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<script src="../../../fui/js/cssboot.js"></script>
</head>

<body>
	<!-- 必须有，加载时的loading效果 -->
	<div class="page-loading"></div>

	<!-- toolbar区域 -->
	<div class="fui-toolbar">
		<a class="mini-button" onclick="addConfig()">保存参数</a>
	</div>

	<!-- 内容区域 -->
	<div class="fui-content">
		<div id="fui-form" class="fui-form">
			<div role="form">
				<div role="row">
					<div role="control" label="企业标识" style="width: 700px"
						starred="true">
						<input class="mini-textbox" id="appid" bind="wechatCorpID"
							required="true" requiredErrorText="企业标识不能为空" />
					</div>
				</div>
				<div role="row">
					<div role="control" style="width: 700px">企业的CorpID，获取此信息可在企业微信管理后台“我的企业”－“企业信息”下查看（需要有管理员权限）</div>
				</div>

				<div role="row">
					<div role="control" label="应用凭证密钥" style="width: 700px"
						starred="true">
						<input class="mini-textbox" id="appsecret" bind="wechatCorpSecret"
							required="true" requiredErrorText="应用凭证密钥不能为空" />
					</div>
				</div>
				<div role="row">
					<div role="control" style="width: 700px">应用访问密钥，自建应用secret在企业微信管理后台->“企业应用”->“自建应用”，点进某个应用，即可看到。其它应用请参考：https://work.weixin.qq.com/api/doc#10013</div>
				</div>

				<div role="row">
					<div role="control" label="回掉地址" style="width: 700px"
						starred="true">
						<input class="mini-textbox" id="redirecturi" required="true"
							bind="wechatRedirectUri" requiredErrorText="回掉地址不能为空" />
					</div>
				</div>
				<div role="row">
					<div role="control" style="width: 700px">授权后重定向的回调链接地址，一般为统一认证平台的地址，配置示例：http://218.4.136.115:8060，如果有端口，则只需配置到端口，如果没有端口，则只需配置到ip地址</div>
				</div>

				<div role="row">
					<div role="control" label="返回类型" style="width: 700px"
						starred="true">
						<input class="mini-textbox" id="responsetype" required="true"
							bind="wechatResponsetype" enabled="false" />
					</div>
				</div>
				<div role="row">
					<div role="control" style="width: 700px">固定为：code</div>
				</div>

				<div role="row">
					<div role="control" label="授权作用域" style="width: 700px"
						starred="true">
						<input class="mini-textbox" id="scope" bind="wechatScope"
							enabled="false" required="true" />
					</div>
				</div>
				<div role="row">
					<div role="control" style="width: 700px">固定为：snsapi_base（静默授权），可获取成员的的基础信息（UserId与DeviceId）
					</div>
				</div>

				<!-- <div role="row">
					<div role="control" label="企业应用标识" style="width: 700px">
						<input class="mini-textbox" id="agentid" bind="wechatAgentid" />
					</div>
				</div> -->

				<!-- <div role="row">
					<div role="control" style="width: 700px">企业应用的id。当scope是snsapi_userinfo或snsapi_privateinfo时，该参数必填，注意redirect_uri的域名必须与该应用的可信域名一致。</div>
				</div> -->
			</div>
		</div>
	</div>
	<script src="../../../../rest/resource/jsboot"></script>
	<script>
		// 初始化页面
		epoint.initPage('openplatformconfiglistaction', '', function(e) {
			epoint.alert("配置页统一转移至统一参数配置页面===>frame/pages/basic/framesetting/framesetting");
		});

		// 表格的搜索
		function searchData() {
			epoint.refresh('fui-form');
		}

		function addConfig() {
			if (epoint.validate()) {
				epoint.execute('addConfig', '', callback);
			}
		}

		function callback(data) {
			if (data.msg) {
				epoint.alert(data.msg, '', function() {
					searchData();
				});
			}
		}
	</script>
</body>

</html>
