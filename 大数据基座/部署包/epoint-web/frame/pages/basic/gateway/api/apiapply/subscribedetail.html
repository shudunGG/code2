<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>应用API申请详情页面</title>
<!-- 请修改相对路径 -->
<script src="../../../../../../frame/fui/js/cssboot.js"></script>
</head>

<body>
	<!-- 必须有，加载时的loading效果 -->
	<div class="page-loading"></div>
	<!-- toolbar区域 -->
	<div class="fui-toolbar">
			<a id="approve" class="mini-button" state="success" onclick="approve">通过</a> <a
				id="refuse" class="mini-button" state="danger" onclick="refuse">拒绝</a>
			<a class="mini-button" onclick="epoint.closeDialog">关闭</a>
	</div>

	<!-- 内容区域 -->
	<div class="fui-content">
		<div class="fui-accordions" id="fui-accordions">
			<div id="fui-form" class="fui-form">
				<div role="form">
					<div role="accordion" opened="true">
						<div role="head" title="应用基本信息"></div>
						<div role="body">
							<div class="fui-form">
								<div role="form">
									<div role="row">
										<label class="form-label">应用logo:</label>
										<div class="form-control span2" starred="true">
											<div class="icon-view">
												<img id="appIcon" width="100px" height="100px" />
											</div>
										</div>
									</div>
									<div role="row">
										<label class="form-label">应用名称:</label>
										<div id="appName" class="form-control span2">
											<input id="appName" bind="appInfo.appname"
												class="mini-outputtext" />
										</div>
										<label class="form-label">系统地址:</label>
										<div class="form-control span2" starred="true">
											<input bind="appInfo.apprealurl" class="mini-outputtext" />
										</div>
									</div>
									<div role="row">
										<div role="control" label="功能介绍">
											<input id="appDesc" bind="appInfo.appdesc"
												class="mini-outputtext" />
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div role="accordion" opened="true">
						<div role="head" title="申请人基本信息"></div>
						<div role="body">
							<div role="row">
								<label class="form-label">申请人登录名:</label>
								<div class="form-control span2" starred="true">
									<input bind="frameDeveloper.loginId" class="mini-outputtext" />
								</div>
								<label class="form-label">申请人姓名:</label>
								<div id="displayName" class="form-control span2">
									<input id="displayName" bind="dataBean.applyusername"
										class="mini-outputtext" />
								</div>
							</div>
							<div role="row">
								<div role="control" label="手机号">
									<input id="mobile" bind="frameDeveloper.mobile"
										class="mini-outputtext" />
								</div>
								<div role="control" label=""></div>
							</div>
						</div>
					</div>
					<div role="accordion" opened="true">
						<div role="head" title="API基本信息"></div>
						<div role="body">
							<div role="row">
								<div role="control" label="API名称">
									<input bind="apiInfo.apiname" class="mini-outputtext" />
								</div>
								<div role="control" label="请求方式">
									<input bind="apiInfo.requestWay" class="mini-outputtext" />
								</div>
							</div>
							<div role="row">
								<div role="control" label="接口地址">
									<input bind="apiInfo.url" class="mini-outputtext" />
								</div>
								<div role="control" label="参数格式">
									<input bind="apiInfo.parameterFormat" class="mini-outputtext" />
								</div>
							</div>
							<div role="row">
								<div role="control" label="接口备注">
									<input bind="apiInfo.attention" allowInput=false
										class="mini-outputtext" />
								</div>
							</div>
						</div>
					</div>
					<div role="accordion" opened="true">
						<div role="head" title="申请信息"></div>
						<div role="body">
							<div role="row">
								<div role="control" label="申请时间">
									<input bind="dataBean.commitdate" class="mini-outputtext"
										data-options="{'format':'yyyy-MM-dd HH:mm:ss'}"
										dateFormat="yyyy-MM-dd HH:mm:ss" />
								</div>
							</div>
							<div role="row">
								<div role="control" label="申请理由">
									<input bind="dataBean.applyreason" class="mini-outputtext" />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- 请修改相对路径 -->
	<script src="../../../../../../rest/resource/jsboot"></script>

	<script>
		// 初始化页面
		epoint.initPage('subscribedetailaction', '', function(e) {
			if (e.hideButton) {
				mini.get("approve").hide();
				mini.get("refuse").hide();
			}
			$("#appIcon").attr('src', e.appIconUrl);
		});

		function approve() {
			epoint.execute("approve", '', '', function(e) {
				if (e) {
					epoint.alertAndClose(e, '', null, null, 'info');
				} else {
					epoint.alertAndClose('操作成功', '', null, null, 'success');
				}
			});
		}

		function refuse() {
			epoint.openDialog("输入拒绝理由",
					'frame/pages/basic/gateway/api/apiapply/inputreason',
					function(rtnValue) {
						if (rtnValue != 'close') {
							epoint.execute('refuse', '', [ rtnValue ],
									function(e) {
										if (e) {
											epoint.alertAndClose(e, '', null,
													null, 'info');
										} else {
											epoint.alertAndClose('操作成功', '',
													null, null, 'success');
										}
									});
						}
					}, {
						'width' : 350,
						'height' : 260
					});
		}
	</script>
</body>
</html>