<!-- 
        作者：戴荔春
        创建时间: 2017/06/01
        版本: [3.0, 2017/06/01 ]
        版权: 江苏国泰新点软件有限公司
        描述：  storage 模块的示例
-->
<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <!-- 移动端的响应式特性 -->
        <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <title>storage模块</title>

        <script>
            document.write("<script src='../../../js/cssboot.js?" + Math.random() + "'></scr" + "ipt>");
        </script>
        <script>
            SrcBoot.output([
                './_common/common.css'
            ]);
        </script>

    </head>

    <body>
        <div class="mui-content pt0" id="ejs-app">

        </div>
        <script>
            document.write("<script src='../../../js/jsboot.js?" + Math.random() + "'></scr" + "ipt>");
        </script>
        <script>
            "use strict";

            Util.loadJs(
                './_common/bizlogic_common_ready.js',
                function() {
                    Util.bizlogic.ready(initPage);
                });

            function initPage() {
                var litemplate = new Util.litemplate.listLitemplate({
                    isIndex: false,
                    title: 'storage模块',
                    ejsApi: [{
                        'id': 'getItem',
                        'text': 'getItem(获取测试key)',
                        'evn': 'ejs_h5',
                        'runCode': function() {
                            ejs.storage.getItem({
                                key: 'testkey',
                                success: function(result) {
                                    litemplate.showTips(JSON.stringify(result));
                                },
                                error: function(error) {
                                    litemplate.showTips('失败:' + JSON.stringify(error));
                                }
                            });
                        }
                    }, {
                        'id': 'getItems',
                        'text': 'getItem(获取多个测试key)',
                        'evn': 'ejs_h5',
                        'runCode': function() {
                            ejs.storage.getItem({
                                key: ['testkey', 'testkey2'],
                                success: function(result) {
                                    litemplate.showTips(JSON.stringify(result));
                                },
                                error: function(error) {
                                    litemplate.showTips('失败:' + JSON.stringify(error));
                                }
                            });
                        }
                    }, {
                        'id': 'setItem',
                        'text': 'setItem(存储测试key)',
                        'evn': 'ejs_h5',
                        'runCode': function() {
                            ejs.storage.setItem({
                                testkey: 'testvalue',
                                testkey2: 'testvalue2',
                                success: function(result) {
                                    litemplate.showTips(JSON.stringify(result));
                                },
                                error: function(error) {
                                    litemplate.showTips('失败:' + JSON.stringify(error));
                                }
                            });
                        }
                    }, {
                        'id': 'removeItem',
                        'text': 'removeItem(移除测试key)',
                        'evn': 'ejs_h5',
                        'runCode': function() {
                            ejs.storage.removeItem({
                                key: 'testkey',
                                success: function(result) {
                                    litemplate.showTips(JSON.stringify(result));
                                },
                                error: function(error) {
                                    litemplate.showTips('失败:' + JSON.stringify(error));
                                }
                            });
                        }
                    }, {
                        'id': 'removeItems',
                        'text': 'removeItem(移除多个测试key)',
                        'evn': 'ejs_h5',
                        'runCode': function() {
                            ejs.storage.removeItem({
                                key: ['testkey', 'testkey2'],
                                success: function(result) {
                                    litemplate.showTips(JSON.stringify(result));
                                },
                                error: function(error) {
                                    litemplate.showTips('失败:' + JSON.stringify(error));
                                }
                            });
                        }
                    }, {
                        'id': 'getCollections',
                        'text': 'getCollections(获取收藏列表)',
                        'evn': 'ejs',
                        'runCode': function() {
                            ejs.storage.collection.getCollections({
                                pageIndex: 1,
                                pageSize: 20,
                                success: function(result) {
                                    litemplate.showTips(JSON.stringify(result));
                                },
                                error: function(error) {
                                    litemplate.showTips('失败:' + JSON.stringify(error));
                                }
                            });
                        }
                    }, {
                        'id': 'saveCollection',
                        'text': 'saveCollection(收藏测试信息)',
                        'evn': 'ejs',
                        'runCode': function() {
                            ejs.storage.collection.saveCollections({
                                // 信息guid，必选
                                msgGuid: 'guid_test_001',
                                // 信息标题，必选
                                title: '测试收藏标题',
                                // 信息类型,根据业务需求自行定义，必选
                                type: '测试',
                                // 以下为可选内容
                                dateTime: '2017-06-05',
                                publisher: 'admin',
                                // 链接地址
                                forward: 'https://www.baidu.com/',
                                remark: '这是测试收藏的备注',
                                flag: '测试备用字段',
                                success: function(result) {
                                    litemplate.showTips(JSON.stringify(result));
                                },
                                error: function(error) {
                                    litemplate.showTips('失败:' + JSON.stringify(error));
                                }
                            });
                        }
                    }, {
                        'id': 'isCollection',
                        'text': 'isCollection(判断测试信息是否收藏)',
                        'evn': 'ejs',
                        'runCode': function() {
                            ejs.storage.collection.isCollection({
                                // 信息guid，必选
                                msgGuid: 'guid_test_001',
                                success: function(result) {
                                    litemplate.showTips(JSON.stringify(result));
                                },
                                error: function(error) {
                                    litemplate.showTips('失败:' + JSON.stringify(error));
                                }
                            });
                        }
                    }, {
                        'id': 'delCollection',
                        'text': 'delCollection(删除测试收藏)',
                        'evn': 'ejs',
                        'runCode': function() {
                            ejs.storage.collection.delCollection({
                                // 信息guid，必选
                                msgGuid: 'guid_test_001',
                                success: function(result) {
                                    litemplate.showTips(JSON.stringify(result));
                                },
                                error: function(error) {
                                    litemplate.showTips('失败:' + JSON.stringify(error));
                                }
                            });
                        }
                    }, {
                        'id': 'delAllCollections',
                        'text': 'delAllCollections(删除所有收藏)',
                        'evn': 'ejs',
                        'runCode': function() {
                            ejs.storage.collection.delAllCollections({
                                success: function(result) {
                                    litemplate.showTips(JSON.stringify(result));
                                },
                                error: function(error) {
                                    litemplate.showTips('失败:' + JSON.stringify(error));
                                }
                            });
                        }
                    }]
                });
            }
        </script>

    </body>

</html>