<!-- 
        作者：guotq
        创建时间: 2017/06/05
        版本: [1.0, 2017/06/05 ]
        版权: 江苏国泰新点软件有限公司
        描述： 下拉刷新的简单调用
-->
<!DOCTYPE html >
<html lang="zh-CN">

    <head>
        <meta charset="UTF-8">
        <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
        <meta name="format-detection" content="telephone=no, address=no, email=no">
        <title>列表1</title>
        <script>
            document.write("<script src='../../../js/cssboot.js?" + Math.random() + "'></scr" + "ipt>");
        </script>
        <style>
            body,
            .mui-content {
                background-color: #F5F5F5;
            }
            
            .msg-title {
                font-size: 15px;
            }
            
            .msg-fs14 {
                font-size: 14px;
                color: #999;
            }
            
            .msg-date {
                float: right;
            }
            
            .mui-table-view-cell:after {
                left: 0;
            }
        </style>
    </head>

    <body>
        <div id="pullrefresh" class="mui-content mui-scroll-wrapper">
            <div class="mui-scroll">
                <ul class="mui-table-view" id="listdata">

                </ul>
            </div>
        </div>

        <script type="text/x-tpl" id="item-template">
            <li class="mui-table-view-cell" id="{{guid}}">
                <h3 class="msg-title">
                    {{title}}
                </h3>
                <span class="msg-fs14 msg-date">
                    {{date}}
                </span>
            </li>
        </script>

        <script>
            document.write("<script src='../../../js/jsboot.js?" + Math.random() + "'></scr" + "ipt>");
        </script>
        <script>
            "use strict";

            Util.loadJs(
                // 下拉刷新
                'js/widgets/pulltorefresh/pulltorefresh.skin.default.js',
                'js/widgets/pulltorefresh/pulltorefresh.bizlogic.impl.js',
                function() {
                    initPage();
                });

            /**
             * 页面初始化请走这个函数
             */
            function initPage() {
                new PullToRefreshTools.bizlogic({
                    isAutoProxy: false,
                    url: '//115.29.151.25:8012/request.php?action=testV7List',
                    dataRequest: function(currPage) {
                        return JSON.stringify({
                            token: 'RXBvaW50X1dlYlNlcml2Y2VfKiojIzA2MDE=',
                            params: {
                                pageindex: currPage,
                                pagesize: 10,
                                keyword: 'type1'
                            }
                        });
                    },
                    itemClick: function(e) {
                        console.log("点击item");
                    }
                });
            }
        </script>
    </body>

</html>