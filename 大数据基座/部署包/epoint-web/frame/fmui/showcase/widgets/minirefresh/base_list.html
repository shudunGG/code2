<!--
        作者：guotq
        时间：2017-09-06
        描述： minirefresh-biz 如何使用主题
-->
<!DOCTYPE html >
<html lang="zh-CN">

    <head>
        <meta charset="UTF-8">
        <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
        <meta name="format-detection" content="telephone=no, address=no, email=no">
        <title>MiniRefreshBiz Basic</title>
        <script>
            document.write("<script src='../../../js/cssboot.js?" + Math.random() + "'></scr" + "ipt>");
        </script>
        <link rel="stylesheet" href="./common/common.css" />

        <style>
            .previewimg {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 10;
                width: 80%;
            }

            .mask {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #333;
                opacity: .6;
                z-index: 9;
            }
        </style>
    </head>

    <body>
        <nav class="navbar-header">
            <a class="nav-btn-left" href="../index.html">dashboard</a>
            Basic List
        </nav>

        <div class="content">
            <div id="minirefresh" class="minirefresh-wrap">
                <div class="minirefresh-scroll">
                    <ul class="data-list" id="listdata">

                    </ul>
                </div>
            </div>

        </div>

        <script type="text/x-tpl" id="item-template">
            <li class="list-item" id="{{guid}}">
                <h3 class="msg-title">
                    {{title}}
                </h3>
                <span class="msg-fs14 msg-date">
                    {{date}}
                </span>
            </li>
        </script>

        <script>
            document.write("<script src='../../../js/jsboot.js?" + Math.random() + "'></scr" + "ipt>");
        </script>
        <script>
            "use strict";

            var previewImg = document.getElementById('previewimg');
            var mask = document.getElementById(
                'mask'
            );
            var minirefresh = null;

            Util.loadJs([
                    'js/widgets/minirefresh/minirefresh.css',
                    'js/widgets/minirefresh/minirefresh.js'
                ],
                'js/widgets/minirefresh/minirefresh.bizlogic.js',
                function() {
                    initPage();
                });

            /**
             * 页面初始化请走这个函数
             */
            function initPage() {
                minirefresh = new MiniRefreshBiz({
                    isAutoProxy: false,
                    // 实际上默认值就是#minirefresh，所以可省略
                    container: '#minirefresh',
                    // 默认值是0
                    delay: 500,
                    // 实际上默认值就是#item-template，所以可省略
                    template: '#item-template',
                    url: 'http://115.29.151.25:8012/request.php?action=testV7List',
                    dataRequest: function(currPage) {
                        return JSON.stringify({
                            token: 'RXBvaW50X1dlYlNlcml2Y2VfKiojIzA2MDE=',
                            params: {
                                pageindex: currPage,
                                pagesize: 10,
                                keyword: 'type1'
                            }
                        });
                    },
                    itemClick: function(e) {
                        console.log("点击item");
                    }
                });
            }
        </script>
    </body>

</html>
