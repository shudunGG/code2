<!-- 
        作者：guotq
        时间：2017-09-07
        描述： minirefresh-biz 原生主题的使用
-->
<!DOCTYPE html >
<html lang="zh-CN">

    <head>
        <meta charset="UTF-8">
        <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
        <meta name="format-detection" content="telephone=no, address=no, email=no">
        <title>MiniRefreshBiz Theme Force Native</title>
        <script>
            document.write("<script src='../../../js/cssboot.js?" + Math.random() + "'></scr" + "ipt>");
        </script>
        <link rel="stylesheet" href="./common/common.css" />
    </head>

    <body>
        <nav class="navbar-header">
            <a class="nav-btn-left" href="index.html">dashboard</a>
            Theme Native
        </nav>
        
        <div id="minirefresh" class="minirefresh-wrap">

                <div class="minirefresh-scroll">

                    <ul class="data-list" id="listdata">

                    </ul>
                </div>
        </div>

        <script type="text/x-tpl" id="item-template">
            <li class="list-item" id="{{guid}}">
                <h3 class="msg-title">
                    {{title}}
                </h3>
                <span class="msg-fs14 msg-date">
                    {{date}}
                </span>
            </li>            
        </script>
        
       <script>
            document.write("<script src='../../../js/jsboot.js?" + Math.random() + "'></scr" + "ipt>");
        </script>
        <script>
            "use strict";

            Util.loadJs([
                    'js/widgets/minirefresh/minirefresh.css',
                    'js/widgets/minirefresh/minirefresh.js'
                ],[
                    'js/widgets/minirefresh/themes/native/minirefresh.theme.native.js'
                ],
                'js/widgets/minirefresh/minirefresh.bizlogic.js',
                function() {
                    initPage();
                    console.log(MiniRefreshTools);
                });

            /**
             * 页面初始化请走这个函数
             */
            function initPage() {
                new MiniRefreshBiz({
                    isDebug: false,
                    delay: 500,                   
                    // h5下使用默认主题，native下使用native主题
                    theme: Util.os.ejs ? MiniRefreshTools.theme.natives : MiniRefreshTools.theme.defaults,
                    url: 'http://115.29.151.25:8012/request.php?action=testV7List',
                    dataRequest: function(currPage) {
                        return JSON.stringify({
                            token: 'RXBvaW50X1dlYlNlcml2Y2VfKiojIzA2MDE=',
                            params: {
                                pageindex: currPage,
                                pagesize: 10,
                                keyword: 'type1'
                            }
                        });
                    },
                    itemClick: function(e) {
                        console.log("点击item");
                    }
                });
            }
        </script>
    </body>

</html>