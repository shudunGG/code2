<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport"
        content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <script>
        document.write(
            "<script src='../../js/cssboot.js?" + Math.random() + "'></scr" + "ipt>"
        );
    </script>
    <script>
        SrcBoot.output([
            './css/common.css'
        ]);
    </script>

<body class="ejs-f9-content">
    <div class="page-loading"></div>

    <!-- 内容区域 -->
    <div class="mui-content">
        <ul class="mui-table-view">
            <li class="mui-input-row"><label>标题</label><input id="textbox-983tr1ec7" bind="record.TxtTitle"
                    class="ep-mui-textbox" required="true" name="TxtTitle" regExpErrText="请输入符合规则的内容！" type="text" />
            </li>
            <li class="mui-input-row"><label>来文号</label><input id="textbox-7hp4t4ca3" bind="record.TxtLaiWenHao"
                    class="ep-mui-textbox" name="TxtLaiWenHao" regExpErrText="请输入符合规则的内容！" type="text" /></li>
            <li class="mui-input-row"><label>来文时间</label><input id="datepicker-48ou495vc" bind="record.TxtShouWenDate"
                    class="ep-mui-datepicker" name="TxtShouWenDate"
                    data-options='{ "type": "date", "format": "yyyy/MM/dd" }' type="text" type="text" /></li>
            <li class="mui-input-row"><label Style="width:100%;">来文单位</label>
                <div class="ep-mui-treeselect" action="jpdlaiwendwModel" allowInput="false" style="height:40px"
                    id="jpdlaiwendw" bind="lwdwTreeGuid" showFolderCheckBox="false" multiselect="false"
                    checkRecursive="false" url="oawd25sformdesignaction/jpdlaiwendwModel" onchange="changlaiwendw">
                </div>
            </li>
            <li class="mui-input-row"><input id="textbox-3oj41cmgq" bind="record.TxtLaiWenDept" class="ep-mui-textbox"
                    required="true" name="TxtLaiWenDept" regExpErrText="请输入符合规则的内容！" type="text" />
            </li>
            <li class="mui-input-row"><label>份数</label><input id="textbox-56ijnc5rb" bind="record.TxtCopyNum"
                    class="ep-mui-textbox" name="TxtCopyNum" vtype="int" regExpErrText="请输入符合规则的内容！" type="text" /></li>
            <li class="mui-input-row"><label>页数</label><input id="textbox-9j31avdq3" bind="record.TxtPages"
                    class="ep-mui-textbox" name="TxtPages" vtype="int" regExpErrText="请输入符合规则的内容！" type="text" /></li>
            <li class="mui-input-row"><label>备注</label><input id="textarea-73gppblp5" bind="record.TxtNote"
                    class="ep-mui-textarea" name="TxtNote" type="text" /></li>
            <li class="mui-input-row"><label>正文</label></li>
            <li class="mui-input-row"><label>附件</label></li>
            <li class="mui-input-row"><label>收文序列</label>
                <div id="jpdshouwenxl" class="ep-mui-combobox" action="jpdshouwenxlModel" bind="record.jpdshouwenxl"
                    onchange="change" />
            </li>
            <li class="mui-input-row"><label>收文序列</label>
                <div id="jpdshouwenyear" class="ep-mui-combobox" action="jpdyearModel" bind="record.jpdshouwenyear"
                    vType="int" onchange="changetime" />
            </li>
            <li class="mui-input-row"><label>收文序列</label>
                <input id="txtshouwennumber" bind="record.txtshouwennumber" vType="int" class="ep-mui-textbox"
                    regExpErrText="请输入符合规则的内容！" type="text" style="width: 30%;" />
            </li>
            <li class="mui-input-row"><label>收文序列</label>
                <button class="cswh">产生文号</button>
                <button class="whck">文号查看</button>
            </li>

            <li class="mui-input-row"><label>登记日期</label><input id="datepicker-3i917utjl" bind="record.TxtFileDate"
                    class="ep-mui-datepicker" name="TxtFileDate"
                    data-options='{ "type": "date", "format": "yyyy/MM/dd" }' type="text" type="text" /></li>
            <li class="mui-input-row"><label>办理类别</label>
                <div id="combobox-4jjckd8ld" bind="record.jpdshouwentype" class="ep-mui-combobox" name="jpdshouwentype"
                    action="getCodeitme(办理类别-0,false)" type="text"></div>
            </li>
            <li class="mui-input-row"><label>紧急程度</label>
                <div id="combobox-af13i7f37" bind="record.jinji" class="ep-mui-combobox" name="jinji"
                    action="getCodeitme(紧急程度-0,false)" type="text"></div>
            </li>
            <li class="mui-input-row"><label>要求办结时间</label><input id="datepicker-633a7vssq" bind="record.banjieDate"
                    class="ep-mui-datepicker" name="banjieDate"
                    data-options='{ "type": "date", "format": "yyyy/MM/dd" }' type="text" type="text" /></li>
            <li class="mui-input-row"><label>需要回复</label>
                <div id="radiobuttonlist-1hlfpicna" bind="record.huifuFlag" class="ep-mui-radiobuttonlist"
                    name="huifuFlag" action="getCodeitme(是否回复-1,false)" type="text"></div>
            </li>
            <li class="mui-input-row"><label>是否会议</label>
                <div id="radiobuttonlist-7e10do2tg" bind="record.mettingFlag" class="ep-mui-radiobuttonlist"
                    name="mettingFlag" action="getCodeitme(是否回复-1,false)" type="text"></div>
            </li>
            <li class="mui-input-row"><label>保存年限</label>
                <div id="combobox-1hmdmaot9" bind="record.JpdBaoCunQX" class="ep-mui-combobox" name="JpdBaoCunQX"
                    action="getCodeitme(保管期限-0,false)" type="text"></div>
            </li>
            <li class="mui-input-row"><label>归档类目</label>
                <div id="combobox-7t0kn4pno" bind="record.JpdArchiveType" class="ep-mui-combobox" name="JpdArchiveType"
                    action="getCodeitme(归档类目-0,false)" type="text"></div>
            </li>
            <li class="mui-input-row"><label>主办部门</label>
                <div id="organizationselect-9ochbpm2t" bind="record.TxtZhuBanChuShiGuid" class="ep-mui-selectcontact"
                    name="TxtZhuBanChuShiGuid"
                    action="sformdesigncommonaction.getCommonTreeModel(company,dept,false,txtzhubanchushiguid)"></div>
            </li>
            <li class="mui-input-row"><label>协办部门</label>
                <div id="organizationselect-59tn00lr4" bind="record.xiebanOuGuid" class="ep-mui-selectcontact"
                    name="xiebanOuGuid"
                    action="sformdesigncommonaction.getCommonTreeModel(company,dept,true,xiebanouguid)"></div>
            </li>
        </ul>

        <div class="ep-mui-webuploader webuploader  mt10" id="formal" tplId="tpl-fileitem" isMulti="true"
            action="getFileUploadModel(formal)">
            <div class="webuploader-title">文件上传 <span class="mui-icon mui-icon-plus-filled r webuploader-button"></span>
            </div>
            <ul class="webuploader-filelist">
                <li>暂未上传文件</li>
            </ul>
        </div>
        <div class="ep-mui-webuploader webuploader  mt10" id="attach" tplId="tpl-fileitem" isMulti="true"
            action="getFileUploadModel(attach)">
            <div class="webuploader-title">文件上传 <span class="mui-icon mui-icon-plus-filled r webuploader-button"></span>
            </div>
            <ul class="webuploader-filelist">
                <li>暂未上传文件</li>
            </ul>
        </div>
        <!-- HandleControls -->
        <div class="ep-mui-handlecontrols" id="handlecontrols" action="handleCtrl"
            workflowPageUrl="../../../../../frame/fmui/showcase/comdto/workflow"></div>
    </div>

    <script type="text/template" id="tpl-subtable">
        <div class="mui-table-view">
        <div class="mui-table-view-cell">名字：{{displayName}}</div>
    </div>
</script>

    <script type="text/template" id="tpl-fileitem">
        <li>{{name}} - 上传成功</li>
</script>

<script>
    document.write(
      "<script src='../../js/jsboot.js?" + Math.random() + "'></scr" + "ipt>"
    );
  </script>
<script>
    SrcBoot.output([
        './js/handlecontrols.js'
    ]);
</script>

    <script>
        Util.loadJs(initPage);

        function initPage() {
            ejs.navigator.setTitle(document.title);
            epointm.initPage(
                "data/combobox.json",
                null, null, null, {
                    method: "GET"
                });
        }

        function submit() {
            epointm.execute("submit", "mui-content", saveCallback);
        }

        function saveCallback(data) {
            Util.ejs.alert(data.msg);
        }

        function refresh() {
            epointm.refresh();
        }

        document.querySelector('.cswh').addEventListener('tap', function () {
            var shouwenxl = document.getElementById('jpdshouwenxl').textContent;
            epointm.execute('createFileNum', 'mui-content', shouwenxl, callback);
        });

        function callback(data) {
            document.getElementById('txtshouwennumber').value = data.num;
            if (data.msg) {
                alert(data.msg);
            }
        }

        document.querySelector('.whck').addEventListener('tap', function () {
            if (typeof url == "undefined") {
                url = "";
            }
            var year = document.getElementById('jpdshouwenyear').textContent;
            alert("oa9/archive/forms/wd25/shouwenfilenumberlist?" +
                url + "&fileYear=" + year);
            ejs.page.open("oa9/archive/forms/wd25/shouwenfilenumberlist?" +
                url + "&fileYear=" + year);
        });

        window.changetime = function (text, value, control) {
            epointm.execute('changetime', '', text, function (data) {
                if (data.msg) {
                    ejs.ui.confirm({
                        title: '友情提醒',
                        message: data.msg,
                        buttonLabels: ['确定', '取消'],
                        cancelable: 1,
                        success: function (result) {
                            if (result.which == 1) {
                                control.setValue('');
                                control.setText('');
                            } else {
                                control.setValue(value);
                                control.setText(text);
                            }
                        }
                    });
                }
            });
        };

        function change() {
            var shouwenxl = document.getElementById('jpdshouwenxl').textContent;
            epointm.execute('change', '', shouwenxl, callback1);
        }

        function callback1(data) {
            if (data.url) {
                url = data.url;
            }
        }
    </script>
</body>

</html>