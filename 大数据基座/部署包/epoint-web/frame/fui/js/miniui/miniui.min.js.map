{"version":3,"file":"miniui.min.js","sources":["miniui.js"],"sourcesContent":["/* buildTime: 2021-08-03T03:37:39.372Z */\r\n/**\r\n* jQuery MiniUI v3.0\r\n* \r\n* Web Site : http://www.miniui.com\r\n*\r\n* Commercial License : http://www.miniui.com/license\r\n*\r\n* Copyright(c) 2012 All Rights Reserved. Shanghai PusSoft Co., Ltd (上海普加软件有限公司) [ services@plusoft.com.cn ]. \r\n* \r\n*/\r\n\r\nmini = {\r\n    components: {},\r\n    uids: {},\r\n    ux: {},\r\n    doc: document,\r\n    window: window,\r\n\r\n    isReady: false,\r\n\r\n    createTime: new Date(),\r\n\r\n    byClass: function (cls, el) {\r\n        //getElementsByClassName\r\n        if (typeof el == \"string\") el = mini.byId(el);\r\n        return jQuery(\".\" + cls, el)[0];\r\n    },\r\n    getComponents: function () {\r\n        var cs = [];\r\n        for (var id in mini.components) {\r\n            var c = mini.components[id];\r\n            if (c.isControl) {\r\n                cs.push(c);\r\n            }\r\n        }\r\n        return cs;\r\n    },\r\n    get: function (id) {\r\n        if (!id) return null;\r\n        if (mini.isControl(id)) return id;\r\n        if (typeof id == \"string\") {\r\n            if (id.charAt(0) == '#') id = id.substr(1);\r\n        }\r\n        if (typeof id == \"string\") return mini.components[id];\r\n        else {\r\n            var control = mini.uids[id.uid];\r\n            if (control && control.el == id) return control;\r\n        }\r\n        return null;\r\n    },\r\n    getbyUID: function (uid) {\r\n        return mini.uids[uid];\r\n    },\r\n    findControls: function (fn, scope) {\r\n        if (!fn) return [];\r\n        scope = scope || mini;\r\n        var controls = [];\r\n        var uids = mini.uids;\r\n        for (var uid in uids) {\r\n            var control = uids[uid];\r\n            var ret = fn.call(scope, control);\r\n            if (ret === true || ret === 1) {\r\n                controls.push(control);\r\n                if (ret === 1) break;\r\n            }\r\n        }\r\n        return controls;\r\n    },\r\n    getChildControls: function (parent) {\r\n        var pel = parent.el ? parent.el : parent;\r\n        var controls = mini.findControls(function (control) {\r\n            if (!control.el || parent == control) return false;\r\n            if (mini.isAncestor(pel, control.el) && control.within) return true;\r\n            return false;\r\n        });\r\n        return controls;\r\n    },\r\n    emptyFn: function () { },\r\n    //遍历控件内部，将所有子控件，通过this._name的方式映射到控件对象上\r\n    //pre为true，表示首字母大写\r\n    createNameControls: function (obj, pre) {\r\n        if (!obj || !obj.el) return;\r\n        if (!pre) pre = \"_\";\r\n        var el = obj.el;\r\n        var controls = mini.findControls(function (control) {\r\n            if (!control.el || !control.name) return false;\r\n            if (mini.isAncestor(el, control.el)) return true;\r\n            return false;\r\n        });\r\n\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var c = controls[i];\r\n            var name = pre + c.name;\r\n            if (pre === true) {\r\n                name = c.name[0].toUpperCase() + c.name.substring(1, c.name.length);\r\n            }\r\n            obj[name] = c;\r\n        }\r\n\r\n    },\r\n\r\n    getsByName: function (name, parentNode) {\r\n        return mini.getsbyName(name, parentNode);\r\n    },\r\n\r\n    getsbyName: function (name, parentNode) {\r\n        var isControl = mini.isControl(parentNode);\r\n        var parentControl = parentNode;\r\n        if (parentNode && isControl) {\r\n            parentNode = parentNode.el;\r\n        }\r\n        parentNode = mini.byId(parentNode);\r\n        parentNode = parentNode || document.body;\r\n        var controls = mini.findControls(function (control) {\r\n            if (!control.el) return false;\r\n            if (control.name == name && mini.isAncestor(parentNode, control.el)) return true;\r\n            return false;\r\n        }, this);\r\n\r\n        if (isControl && controls.length == 0 && parentControl && parentControl.getbyName) {\r\n            var obj = parentControl.getbyName(name);\r\n            if (obj) controls.push(obj);\r\n        }\r\n\r\n        return controls;\r\n    },\r\n    getbyName: function (name, parentNode) {\r\n        return mini.getsbyName(name, parentNode)[0];\r\n    },\r\n\r\n    getByName: function (name, parentNode) {\r\n        return mini.getbyName(name, parentNode);\r\n    },\r\n\r\n    getParams: function (url) {\r\n        if (!url) url = location.href;\r\n        url = url.split(\"?\")[1];\r\n        var params = {};\r\n        if (url) {\r\n            var us = url.split(\"&\");\r\n            for (var i = 0, l = us.length; i < l; i++) {\r\n                var ps = us[i].split(\"=\");\r\n                //params[ps[0]] = decodeURIComponent(ps[1]);\r\n                try {\r\n                    params[ps[0]] = decodeURIComponent(unescape(ps[1]));\r\n                } catch (ex) {\r\n\r\n                }\r\n            }\r\n        }\r\n        return params;\r\n    },\r\n\r\n    reg: function (cmp) {\r\n        this.components[cmp.id] = cmp;\r\n        this.uids[cmp.uid] = cmp;\r\n        //cmp.type = cmp.constructor\r\n    },\r\n    unreg: function (cmp) {\r\n        delete mini.components[cmp.id];\r\n        delete mini.uids[cmp.uid];\r\n\r\n        //        mini.components[cmp.id] = null;\r\n        //        mini.uids[cmp.uid] = null;\r\n    },\r\n\r\n    classes: {},\r\n    uiClasses: {},\r\n    getClass: function (className) {\r\n        if (!className) return null;\r\n        return this.classes[className.toLowerCase()];\r\n    },\r\n    getClassByUICls: function (uiCls) {\r\n\r\n        return this.uiClasses[uiCls.toLowerCase()];\r\n    },\r\n\r\n\r\n    idPre: \"mini-\",\r\n    idIndex: 1,\r\n    newId: function (idPre) {\r\n        return (idPre || this.idPre) + this.idIndex++;\r\n    },\r\n\r\n    copyTo: function (to, from) {\r\n        if (to && from) {\r\n            for (var p in from) {\r\n                to[p] = from[p];\r\n            }\r\n        }\r\n        return to;\r\n    },\r\n    copyIf: function (to, from) {\r\n        if (to && from) {\r\n            for (var p in from) {\r\n                if (mini.isNull(to[p])) {\r\n                    to[p] = from[p];\r\n                }\r\n            }\r\n        }\r\n        return to;\r\n    },\r\n    createDelegate: function (fn, scope) {\r\n        if (!fn) return function () { };\r\n        return function () {\r\n            return fn.apply(scope, arguments);\r\n        }\r\n    },\r\n\r\n    isControl: function (obj) {\r\n        return !!(obj && obj.isControl);\r\n    },\r\n    isElement: function (obj) {\r\n        return obj && obj.appendChild;\r\n    },\r\n    isDate: function (value) {\r\n        return !!(value && value.getFullYear);\r\n    },\r\n    isArray: function (value) {\r\n        return !!(value && !!value.unshift);\r\n    },\r\n    isNull: function (value) {\r\n        return value === null || value === undefined;\r\n    },\r\n\r\n    isNumber: function (value) {\r\n        return !isNaN(value) && typeof value == 'number';\r\n    },\r\n    isEquals: function (a, b) {\r\n        //null, undefined\r\n        if (a !== 0 && b !== 0) {\r\n            if ((mini.isNull(a) || a == \"\") && (mini.isNull(b) || b == \"\")) return true;\r\n        }\r\n        //date\r\n        if (a && b && a.getFullYear && b.getFullYear) return a.getTime() === b.getTime();\r\n        //Object\r\n        if (typeof a == 'object' && typeof b == 'object') {\r\n            return a === b;\r\n        }\r\n        //common\r\n        return String(a) === String(b);\r\n    },\r\n    forEach: function (array, method, scope) {\r\n        var list = array.clone();\r\n        for (var i = 0, l = list.length; i < l; i++) {\r\n            var o = list[i];\r\n            if (method.call(scope, o, i, array) === false) break;\r\n        }\r\n    },\r\n    sort: function (array, fn, scope) {\r\n        scope = scope || array;\r\n        //array.sort(fn);           //chrome sort超过20个数字有bug\r\n        //alert(1);\r\n        // 冒泡排序  \r\n\r\n        function sort(array, func) {\r\n            var i = 0, len = array.length,\r\n              j, d;\r\n            for (; i < len; i++) {\r\n                for (j = i; j < len; j++) {\r\n                    var a = array[i], b = array[j];\r\n                    var r = func(a, b);\r\n                    if (r > 0) {\r\n\r\n                        //对象排序，保持原始顺序，必须要Insert, remove\r\n                        array.removeAt(j);\r\n                        array.insert(i, b);\r\n\r\n                        // 这个适合数字排序\r\n                        //                        d = array[j];\r\n                        //                        array[j] = array[i];\r\n                        //                        array[i] = d;\r\n                    }\r\n                }\r\n            }\r\n            return array;\r\n        }\r\n\r\n        sort(array, fn);\r\n    },\r\n    ////////////////////////////\r\n\r\n\r\n\r\n    elWarp: document.createElement(\"div\")\r\n    //    ,        \r\n    //    createElement: function (html) {        \r\n    //        html = html.trim();\r\n    //        this.elWarp.innerHTML = html;\r\n    //        var el = this.elWarp.firstChild;\r\n    //        this.elWarp.removeChild(el);\r\n    //        return el;\r\n    //    }\r\n};\r\n\r\n\r\nif (typeof mini_debugger == \"undefined\") {\r\n    mini_debugger = true;\r\n}\r\nif (typeof mini_useShims == \"undefined\") {\r\n    mini_useShims = false;\r\n}\r\nif (typeof mini_ajaxAsyncInvoke == \"undefined\") {\r\n    mini_ajaxAsyncInvoke = true;        //ie11下，如果post + data + setTimeout 异步调用，会有诡异问题\r\n}\r\n\r\n//mini.getbyDom = function (dom) {\r\n//    var controls = mini.getComponents();\r\n//    for (var i = 0, l = controls.length; i < l; i++) {\r\n//        var c = controls[i];\r\n//        if(e.el && mini.isAn\r\n//    }\r\n//}\r\n\r\nmini_regClass = function (clazz, className) {\r\n    className = className.toLowerCase();\r\n    if (!mini.classes[className]) {\r\n        mini.classes[className] = clazz;\r\n        clazz.prototype.type = className;\r\n    }\r\n    var uiCls = clazz.prototype.uiCls;\r\n    if (!mini.isNull(uiCls) && !mini.uiClasses[uiCls]) {\r\n        mini.uiClasses[uiCls] = clazz;\r\n    }\r\n}\r\nmini_extend = function (newClass, sp, overrides) {\r\n    if (typeof sp != 'function') return this;\r\n\r\n    var sb = newClass, sbp = sb.prototype, spp = sp.prototype;\r\n    if (sb.superclass == spp) return;\r\n    sb.superclass = spp;\r\n    sb.superclass.constructor = sp;\r\n\r\n    for (var p in spp) {\r\n        sbp[p] = spp[p];\r\n    }\r\n    if (overrides) {\r\n        for (var p in overrides) {\r\n            sbp[p] = overrides[p];\r\n        }\r\n    }\r\n    return sb;\r\n}\r\n//mini_extend = function (subClass, superClass, overrides) {\r\n\r\n//    var F = function () { };\r\n//    F.prototype = superClass.prototype;\r\n//    var fn = subClass.prototype = new F();\r\n\r\n//    if (overrides) {\r\n//        for (var prop in overrides) {\r\n//            fn[prop] = overrides[prop];\r\n//        }\r\n//    }\r\n\r\n//    subClass.superclass = superClass.prototype;\r\n//    subClass.superclass.constructor = superClass;\r\n\r\n//    return subClass;\r\n//}\r\nmini.copyTo(mini, {\r\n    extend: mini_extend,\r\n    regClass: mini_regClass,\r\n    debug: false\r\n});\r\n\r\n\r\nmini.namespace = function (names) {\r\n    if (typeof names != \"string\") return;\r\n    names = names.split(\".\");\r\n    var parent = window;\r\n    for (var i = 0, l = names.length; i < l; i++) {\r\n        var name = names[i];\r\n        var obj = parent[name];\r\n        if (!obj) {\r\n            obj = parent[name] = {};\r\n        }\r\n        parent = obj;\r\n    }\r\n}\r\n\r\nmini._BindCallbacks = [];\r\nmini._BindEvents = function (fn, scope) {\r\n    mini._BindCallbacks.push([fn, scope]);\r\n    if (!mini._EventTimer) {\r\n        mini._EventTimer = setTimeout(function () {\r\n            mini._FireBindEvents();\r\n        }, 50);\r\n    }\r\n}\r\nmini._FireBindEvents = function () {\r\n    for (var i = 0, l = mini._BindCallbacks.length; i < l; i++) {\r\n        var e = mini._BindCallbacks[i];\r\n        e[0].call(e[1]);\r\n    }\r\n    mini._BindCallbacks = [];\r\n    mini._EventTimer = null;\r\n}\r\n\r\nmini._getFunctoin = function (fnName) {\r\n    if (typeof fnName != \"string\") return null;\r\n    var names = fnName.split(\".\");\r\n    var fn = null;\r\n    for (var i = 0, l = names.length; i < l; i++) {\r\n        var name = names[i];\r\n        if (!fn) fn = window[name];\r\n        else fn = fn[name];\r\n        if (!fn) break;\r\n    }\r\n    return fn;\r\n}\r\n\r\n//var _eval = eval;       //window[\"ev\" + \"al\"]\r\n\r\n//计算表达式的值\r\n//function evalFn(fn) {\r\n//    var Fn = Function;  //一个变量指向Function，防止有些前端编译工具报错\r\n//    return new Fn('return ' + fn)();\r\n//}\r\n\r\n//var aaeval = eval;\r\n\r\nvar cacheParts = {};\r\n\r\nfunction createPathParts(path) {\r\n    var parts = cacheParts[path];\r\n    if (!parts) {\r\n        parts = path.split('.');\r\n        for (var i = 0, l = parts.length; i < l; i++) {\r\n            var field = parts[i];\r\n            var index = field.indexOf('[');\r\n            if (index > -1) {\r\n                parts[i] = field.substr(0, index);\r\n                parts.splice(++i, 0, parseInt(field.substr(index + 1)));\r\n            }\r\n        }\r\n        cacheParts[path] = parts;\r\n    }\r\n    return parts;\r\n}\r\n\r\n// getBindingValue\r\nfunction getValueByPath(obj, path) {\r\n    if (!obj || !path) return;\r\n\r\n    if (path in obj) return obj[path];\r\n\r\n    var parts = createPathParts(path);\r\n\r\n    for (var i = 0, l = parts.length; i < l && obj; i++) {\r\n        obj = obj[parts[i]];\r\n    }\r\n\r\n    return obj;\r\n}\r\n\r\n\r\nmini._getMap = function (name, obj) {\r\n    if (!name || !obj) return undefined;\r\n    var v = obj[name];\r\n    if (v !== undefined) return v;\r\n\r\n    var index = name.indexOf(\".\");\r\n    if (index == -1 && name.indexOf(\"[\") == -1) return obj[name];\r\n    if (index == (name.length - 1)) return obj[name];\r\n    var s = \"obj.\" + name;\r\n    try {\r\n        //var v = eval(s);\r\n        var v = getValueByPath(obj, name);\r\n        //var v = _eval(s);\r\n\r\n        //        var fn = new Function('return ' + s);\r\n        //        var v = fn();\r\n\r\n    } catch (e) {\r\n        return undefined;\r\n    }\r\n    return v;\r\n}\r\nmini._setMap = function (name, value, obj) {\r\n    if (!obj) return;\r\n    if (typeof name != \"string\") return;\r\n\r\n    var names = name.split(\".\");\r\n\r\n    function createArray(obj, name, num, defaultValue) {\r\n        var arr = obj[name];\r\n        if (!arr) {\r\n            arr = obj[name] = [];\r\n        }\r\n        for (var i = 0; i <= num; i++) {\r\n            var arrObj = arr[i];\r\n            if (!arrObj) {\r\n                if (defaultValue === null || defaultValue === undefined) {\r\n                    arrObj = arr[i] = {};\r\n                } else {\r\n                    arrObj = arr[i] = defaultValue;\r\n                }\r\n            }\r\n        }\r\n        return obj[name][num];\r\n    }\r\n\r\n    var obj2 = null;\r\n    for (var i = 0, l = names.length; i <= l - 1; i++) {\r\n        var name = names[i];\r\n\r\n        if (i == l - 1) {\r\n            if (name.indexOf(']') == -1) {\r\n                obj[name] = value;\r\n            } else {\r\n                //array\r\n                var as = name.split(\"[\");\r\n                var n1 = as[0], n2 = parseInt(as[1]);\r\n                createArray(obj, n1, n2, \"\");\r\n                obj[n1][n2] = value;\r\n            }\r\n\r\n            break;\r\n        }\r\n\r\n        if (name.indexOf(']') == -1) {\r\n            //obj\r\n            obj2 = obj[name];\r\n            if (i <= l - 2 && obj2 == null) {\r\n                obj[name] = obj2 = {};\r\n            }\r\n            obj = obj2;\r\n        } else {\r\n            //array\r\n            var as = name.split(\"[\");\r\n            var n1 = as[0], n2 = parseInt(as[1]);\r\n            obj = createArray(obj, n1, n2);\r\n            //var n3 = parseInt(as[2]), n4 = parseInt(as[3]), n5 = parseInt(as[4]);\r\n        }\r\n\r\n    }\r\n    return value;\r\n}\r\n\r\n//mini._setMap = function (name, value, obj) {\r\n//    if (!obj) return;\r\n//    if (typeof name != \"string\") return;\r\n\r\n//    var names = name.split(\".\");\r\n\r\n//    function createArray(obj, name, num) {\r\n//        var arr = obj[name];\r\n//        if (!arr) {\r\n//            arr = obj[name] = [];\r\n//        }\r\n//        for (var i = 0; i <= num; i++) {\r\n//            var arrObj = arr[i];\r\n//            if (!arrObj) arrObj = arr[i] = {};\r\n//        }\r\n//        return obj[name][num];\r\n//    }\r\n\r\n//    var obj2 = null;\r\n//    for (var i = 0, l = names.length; i <= l - 1; i++) {\r\n//        var name = names[i];\r\n\r\n//        if (i == l - 1) {\r\n//            obj[name] = value;\r\n//            break;\r\n//        }\r\n\r\n//        if (name.indexOf(']') == -1) {\r\n//            //obj\r\n//            obj2 = obj[name];\r\n//            if (i <= l - 2 && obj2 == null) {\r\n//                obj[name] = obj2 = {};\r\n//            }\r\n//            obj = obj2;\r\n//        } else {\r\n//            //array\r\n//            var as = name.split(\"[\");\r\n//            var n1 = as[0], n2 = parseInt(as[1]);\r\n//            obj = createArray(obj, n1, n2);\r\n\r\n//            //var n3 = parseInt(as[2]), n4 = parseInt(as[3]), n5 = parseInt(as[4]);\r\n//        }\r\n\r\n//    }\r\n//    return value;\r\n//}\r\n\r\nmini.getAndCreate = function (id) {\r\n    if (!id) return null;\r\n    if (typeof id == \"string\") return mini.components[id];\r\n\r\n    if (typeof id == \"object\") {\r\n        if (mini.isControl(id)) {\r\n            return id;\r\n        } else if (mini.isElement(id)) {\r\n            return mini.uids[id.uid];\r\n        } else {\r\n            return mini.create(id);\r\n        }\r\n    }\r\n    return null;\r\n};\r\nmini.create = function (uiConfig) {\r\n    if (!uiConfig) return null;\r\n    if (mini.get(uiConfig.id) === uiConfig) return uiConfig;\r\n    var clazz = this.getClass(uiConfig.type);\r\n    if (!clazz) return null;\r\n    var ui = new clazz();\r\n    ui.set(uiConfig);\r\n    return ui;\r\n}\r\n\r\n/* Component \r\n-----------------------------------------------------------------------------*/\r\nmini.Component = function () {\r\n    this._events = {};\r\n\r\n    this.uid = mini.newId(this._idPre);\r\n    this._id = this.uid;\r\n    if (!this.id) {\r\n        this.id = this.uid;\r\n    }\r\n    mini.reg(this);\r\n\r\n    //this._doInit();\r\n}\r\nmini.Component.prototype = {\r\n    isControl: true,\r\n    id: null,\r\n    _idPre: \"mini-\",\r\n    _idSet: false,\r\n    _canFire: true,\r\n\r\n    //    inited: false,\r\n    //    _doInit: function () {\r\n    //        if (this.inited == false) {\r\n    //            this.inited = true;\r\n    //            this.fire(\"init\");\r\n    //        }\r\n    //    },\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n        var _allowLayout = this._allowLayout;\r\n        this._allowLayout = false;\r\n\r\n        var renderTo = kv.renderTo || kv.render;\r\n        delete kv.renderTo;\r\n        delete kv.render;\r\n        //bind events\r\n        for (var key in kv) {\r\n            if (key.toLowerCase().indexOf('on') == 0) {\r\n                if (this[\"_$\" + key]) continue;\r\n                var fn = kv[key];\r\n                this.on(key.substring(2, key.length).toLowerCase(), fn);\r\n                delete kv[key];\r\n            }\r\n        }\r\n\r\n\r\n        //set property\r\n        for (var key in kv) {\r\n            var v = kv[key];\r\n            var n = 'set' + key.charAt(0).toUpperCase() + key.substring(1, key.length);\r\n            var setter = this[n];\r\n\r\n            if (setter) {\r\n                setter.call(this, v);\r\n            } else {\r\n                this[key] = v;\r\n            }\r\n        }\r\n\r\n        if (renderTo && this.render) {\r\n            this.render(renderTo);\r\n        }\r\n\r\n        this._allowLayout = _allowLayout;\r\n        if (this.doLayout) this.doLayout();\r\n\r\n        return this;\r\n    },\r\n\r\n    fire: function (type, event) {\r\n        if (this._canFire == false) return;\r\n        type = type.toLowerCase();\r\n        var handlers = this._events[type];\r\n        if (handlers) {\r\n            if (!event) event = {};\r\n            if (event && event != this) {\r\n                event.source = event.sender = this;\r\n                if (!event.type) {\r\n                    event.type = type;\r\n                }\r\n            }\r\n\r\n            for (var i = 0, l = handlers.length; i < l; i++) {\r\n                var listener = handlers[i];\r\n                if (listener) {\r\n                    listener[0].apply(listener[1], [event]);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    on: function (type, fn, scope) {\r\n\r\n        if (typeof fn == \"string\") {\r\n\r\n            var f = mini._getFunctoin(fn);\r\n            if (!f) {\r\n                //eval(\"fn = function(e){   \" + fn + \".call(this,e)}\");\r\n                var id = mini.newId(\"__str_\");\r\n                window[id] = fn;\r\n\r\n                //window[\"ev\" + \"al\"].call(window, \"fn = function(e){var s = \" + id + \";var fn = mini._getFunctoin(s); if(fn) {fn.call(this, e)}else{eval(s);}}\");                \r\n                //fn = new Function('e', 'var s = ' + id + ';var fn = mini._getFunctoin(s); if(fn) {fn.call(this, e)}else{window[\"ev\" + \"al\"](s);}');\r\n\r\n                fn = new Function('e', 'var s = ' + id + ';var fn = mini._getFunctoin(s); if(fn) {fn.call(this, e)}else{eval(s);}');\r\n            } else {\r\n                fn = f;\r\n            }\r\n        }\r\n\r\n        if (typeof fn != 'function' || !type) return false;\r\n        type = type.toLowerCase();\r\n        var event = this._events[type];\r\n        if (!event) {\r\n            event = this._events[type] = [];\r\n        }\r\n        scope = scope || this;\r\n        if (!this.findListener(type, fn, scope)) {\r\n            event.push([fn, scope]);\r\n        }\r\n        return this;\r\n    },\r\n    un: function (type, fn, scope) {\r\n        //if (typeof fn != 'function') return false;\r\n        type = type.toLowerCase();\r\n        var event = this._events[type];\r\n        if (event) {\r\n            if (fn) {\r\n                scope = scope || this;\r\n                var listener = this.findListener(type, fn, scope);\r\n                if (listener) {\r\n                    event.remove(listener);\r\n                }\r\n            } else {\r\n                delete this._events[type];\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n    findListener: function (type, fn, scope) {\r\n        type = type.toLowerCase();\r\n        scope = scope || this;\r\n        var handlers = this._events[type];\r\n        if (handlers) {\r\n            for (var i = 0, l = handlers.length; i < l; i++) {\r\n                var listener = handlers[i];\r\n                if (listener[0] === fn && listener[1] === scope) return listener;\r\n            }\r\n        }\r\n    },\r\n    //    removeAllListener: function () {\r\n    //        \r\n    //    },\r\n    setId: function (id) {\r\n        if (!id) throw new Error(\"id not null\");\r\n        if (this._idSet) throw new Error(\"id just set only one\");\r\n        mini[\"unreg\"](this);\r\n        this.id = id;\r\n        if (this.el) this.el.id = id;\r\n        if (this._valueEl) this._valueEl.id = id + \"$value\";\r\n        if (this._textEl) this._textEl.id = id + \"$text\";\r\n        this._idSet = true;\r\n        mini.reg(this);\r\n    },\r\n    getId: function () {\r\n        return this.id;\r\n    },\r\n    destroy: function () {\r\n        mini[\"unreg\"](this);\r\n        this.fire(\"destroy\");\r\n        //this._events = null;\r\n\r\n        this._events = {};\r\n    }\r\n}\r\n\r\n\r\n/* Control \r\n-----------------------------------------------------------------------------*/\r\n\r\nmini.Control = function (el) {\r\n    //mini.Control.superclass.constructor.apply(this, arguments);\r\n    mini.Control.superclass.constructor.apply(this, arguments);\r\n\r\n    this._create();\r\n    this.el.uid = this.uid;\r\n\r\n    //this.init();\r\n\r\n    this._initEvents();\r\n\r\n    //this._doInit(); \r\n\r\n    if (this._clearBorder) {\r\n        this.el.style.borderWidth = \"0\";\r\n    }\r\n    this.addCls(this.uiCls);\r\n    this.setWidth(this.width);\r\n    this.setHeight(this.height);\r\n\r\n    this.el.style.display = this.visible ? this._displayStyle : \"none\";\r\n\r\n    if (el) mini.applyTo.call(this, el);\r\n}\r\nmini.extend(mini.Control, mini.Component, {\r\n    jsName: null,\r\n\r\n    width: \"\",\r\n    height: \"\",\r\n\r\n    visible: true,\r\n    readOnly: false,\r\n    enabled: true,\r\n    //rendered: false,\r\n    tooltip: \"\",\r\n\r\n    _readOnlyCls: \"mini-readonly\",\r\n    _disabledCls: \"mini-disabled\",\r\n\r\n    _create: function () {\r\n        this.el = document.createElement(\"div\");\r\n    },\r\n    _initEvents: function () {\r\n    },\r\n    //    init: function () {\r\n\r\n    //    },\r\n    within: function (e) {\r\n\r\n        if (mini.isAncestor(this.el, e.target)) return true;\r\n        return false;\r\n    },\r\n\r\n    name: \"\",\r\n    setName: function (value) {\r\n        this.name = value;\r\n        //if (this._valueEl) mini.setAttr(this._valueEl, \"name\", this.name);\r\n    },\r\n    getName: function () {\r\n        return this.name;\r\n    },\r\n\r\n    isAutoHeight: function () {\r\n        var v = this.el.style.height;\r\n        return v == \"auto\" || v == \"\";\r\n        //var minHeight = mini_getStyle(this.el, 'min-height');\r\n        //return v == \"auto\" || (v == \"\" && !minHeight);\r\n    },\r\n    isAutoWidth: function () {\r\n        var v = this.el.style.width;\r\n        return v == \"auto\" || v == \"\";\r\n    },\r\n    isFixedSize: function () {\r\n        //        var el = this.el;\r\n        //        var width = String(el.style.width);\r\n        //        var height = String(el.style.height);\r\n\r\n        var width = this.width;\r\n        var height = this.height;\r\n        if (parseInt(width) + \"px\" == width && parseInt(height) + \"px\" == height) return true;\r\n        return false;\r\n    },\r\n\r\n    isRender: function (parentNode) {\r\n\r\n        return !!(this.el && this.el.parentNode && this.el.parentNode.tagName);\r\n    },\r\n    render: function (parent, position) {\r\n        if (typeof parent === 'string') {\r\n            if (parent == \"#body\") parent = document.body;\r\n            else parent = mini.byId(parent);\r\n        }\r\n        if (!parent) return;\r\n        if (!position) position = \"append\";\r\n        position = position.toLowerCase();\r\n\r\n        if (position == \"before\") {\r\n            jQuery(parent).before(this.el);\r\n        } else if (position == \"prepend\") {\r\n            jQuery(parent).prepend(this.el);\r\n        } else if (position == \"after\") {\r\n            jQuery(parent).after(this.el);\r\n        } else {\r\n            parent.appendChild(this.el);\r\n        }\r\n\r\n        //this.rendered = true;\r\n        this.el.id = this.id;\r\n\r\n        this.doLayout();\r\n        this.fire(\"render\");\r\n    },\r\n    //    isTopControl: function () {\r\n    //        var doc = document;\r\n    //        var p = this.el.parentNode;\r\n    //        while (p != doc && p != null) {\r\n    //            var pcontrol = mini.get(p);\r\n    //            if (pcontrol) {\r\n    //                if (mini.isControl(pcontrol)) return true;                \r\n    //            }\r\n    //            p = p.parentNode;\r\n    //        }\r\n    //        return true;\r\n    //    },\r\n\r\n    getEl: function () {\r\n        return this.el;\r\n    },\r\n    setJsName: function (value) {\r\n        this.jsName = value;\r\n        window[value] = this;\r\n    },\r\n    getJsName: function () {\r\n        return this.jsName;\r\n    },\r\n    //tooltipPlacement: \"bottom\",\r\n    setTooltip: function (value) {\r\n        this.tooltip = value;\r\n        this.el.title = value;\r\n\r\n        if (this.tooltipPlacement) jQuery(this.el).attr(\"data-placement\", this.tooltipPlacement);\r\n\r\n    },\r\n    getTooltip: function () {\r\n        return this.tooltip;\r\n    },\r\n    _sizeChanged: function () {\r\n        this.doLayout();\r\n    },\r\n    setWidth: function (value) {\r\n        if (parseInt(value) == value) value += \"px\";\r\n        this.width = value;\r\n        this.el.style.width = value;\r\n        this._sizeChanged();\r\n    },\r\n    getWidth: function (content) {\r\n        //var el = this._borderEl || this.el;\r\n        var el = this.el;\r\n        var w = content ? jQuery(el).width() : jQuery(el).outerWidth();\r\n        if (content && this._borderEl) {\r\n            var b2 = mini.getBorders(this._borderEl);\r\n            w = w - b2.left - b2.right;\r\n        }\r\n        return w;\r\n    },\r\n    setHeight: function (value) {\r\n        if (parseInt(value) == value) value += \"px\";\r\n        this.height = value;\r\n        this.el.style.height = value;\r\n        this._sizeChanged();\r\n    },\r\n    getHeight: function (content) {\r\n        var h = content ? jQuery(this.el).height() : jQuery(this.el).outerHeight();\r\n        //alert(jQuery(this.el).height());\r\n        \r\n        if (content && this._borderEl) {\r\n            var b2 = mini.getBorders(this._borderEl);\r\n            h = h - b2.top - b2.bottom;\r\n        }\r\n        return h;\r\n    },\r\n    getBox: function () {\r\n        return mini.getBox(this.el);\r\n    },\r\n    setBorderStyle: function (value) {\r\n        var el = this._borderEl || this.el;\r\n        mini.setStyle(el, value);\r\n        this.doLayout();\r\n    },\r\n    getBorderStyle: function () {\r\n        return this.borderStyle;\r\n    },\r\n    _clearBorder: true,\r\n    setStyle: function (value) {\r\n        this.style = value;\r\n        mini.setStyle(this.el, value);\r\n        if (this._clearBorder) {\r\n            this.el.style.borderWidth = \"0\";\r\n            this.el.style.padding = \"0px\";\r\n        }\r\n        //        this.width = mini.getWidth(this.el);\r\n        //        this.height = mini.getHeight(this.el);\r\n        this.width = this.el.style.width;\r\n        this.height = this.el.style.height;\r\n        this._sizeChanged();\r\n    },\r\n    getStyle: function () {\r\n        return this.style;\r\n    },\r\n    setCls: function (cls) {\r\n\r\n        this.addCls(cls);\r\n    },\r\n    getCls: function () {\r\n        return this.cls;\r\n    },\r\n    addCls: function (cls) {\r\n        mini.addClass(this.el, cls);\r\n    },\r\n    removeCls: function (cls) {\r\n        mini.removeClass(this.el, cls);\r\n    },\r\n    _doReadOnly: function () {\r\n        if (this.readOnly) {\r\n            this.addCls(this._readOnlyCls);\r\n        } else {\r\n            this.removeCls(this._readOnlyCls);\r\n        }\r\n    },\r\n    setReadOnly: function (value) {\r\n        this.readOnly = value;\r\n        this._doReadOnly();\r\n    },\r\n    getReadOnly: function () {\r\n        return this.readOnly;\r\n    },\r\n    getParent: function (uiCls) {\r\n        var doc = document;\r\n        var p = this.el.parentNode;\r\n        while (p != doc && p != null) {\r\n            var pcontrol = mini.get(p);\r\n            if (pcontrol) {\r\n                if (!mini.isControl(pcontrol)) return null;\r\n                if (!uiCls || pcontrol.uiCls == uiCls) return pcontrol;\r\n            }\r\n            p = p.parentNode;\r\n        }\r\n        return null;\r\n    },\r\n    isReadOnly: function () {\r\n        if (this.readOnly || !this.enabled) return true;\r\n        var p = this.getParent();\r\n        if (p) return p.isReadOnly();\r\n        return false;\r\n    },\r\n    setEnabled: function (value) {\r\n        this.enabled = value;\r\n        if (this.enabled) {\r\n            this.removeCls(this._disabledCls);\r\n        } else {\r\n            this.addCls(this._disabledCls);\r\n        }\r\n        this._doReadOnly();\r\n    },\r\n    getEnabled: function () {\r\n        return this.enabled;\r\n    },\r\n    enable: function () {\r\n        this.setEnabled(true);\r\n    },\r\n    disable: function () {\r\n        this.setEnabled(false);\r\n    },\r\n    _displayStyle: \"\",\r\n    setVisible: function (value) {\r\n        this.visible = value;\r\n        if (this.el) {\r\n            this.el.style.display = value ? this._displayStyle : \"none\";\r\n            this.doLayout();\r\n        }\r\n    },\r\n    getVisible: function () {\r\n        return this.visible;\r\n    },\r\n    show: function () {\r\n        this.setVisible(true);\r\n    },\r\n    hide: function () {\r\n        this.setVisible(false);\r\n    },\r\n    isDisplay: function (ignoresFn) {\r\n\r\n        if (mini.WindowVisible == false || !this.el) return false;\r\n        //\r\n\r\n        var doc = document.body;\r\n        var p = this.el;\r\n        while (1) {\r\n            if (p == null || !p.style) return false;\r\n            if (p && p.style && p.style.display == \"none\") {\r\n                //return false;\r\n                if (ignoresFn) {\r\n\r\n                    if (ignoresFn(p) !== true) return false;\r\n                }\r\n                else return false;\r\n            }\r\n            if (p == doc) return true;\r\n\r\n            p = p.parentNode;\r\n\r\n        }\r\n        return true;\r\n    },\r\n\r\n    _allowUpdate: true,\r\n    beginUpdate: function () {\r\n        this._allowUpdate = false;\r\n    },\r\n    endUpdate: function () {\r\n        this._allowUpdate = true;\r\n        this.doUpdate();\r\n    },\r\n    doUpdate: function () {\r\n\r\n    },\r\n    canLayout: function () {\r\n        //return false;\r\n        if (!mini.enableLayout) return false;\r\n        if (this._allowLayout == false) return false;\r\n        return this.isDisplay();\r\n    },\r\n    doLayout: function () {\r\n\r\n    },\r\n    layoutChanged: function () {\r\n        if (this.canLayout() == false) return;\r\n        this.doLayout();\r\n    },\r\n    _destroyChildren: function (removeEl) {\r\n        if (this.el) {\r\n            //            if (!mini.aaa) {\r\n            //                alert(1);\r\n            //                mini.aaa = 1;\r\n            //            }\r\n\r\n            var cs = mini.getChildControls(this);\r\n            for (var i = 0, l = cs.length; i < l; i++) {\r\n                var control = cs[i];\r\n                if (control.destroyed !== true) {\r\n                    control.destroy(removeEl);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    destroy: function (removeEl) {\r\n\r\n        if (this.destroyed !== true) {\r\n            if (!mini._destroying) {\r\n                this._destroyChildren(removeEl);\r\n            }\r\n        }\r\n\r\n        if (this.el) {\r\n\r\n            var el = this.el;\r\n            el.onclick = el.ondblclick = el.onmousedown = el.onmouseup = el.onmousemove = el.onmouseover = el.onmouseout = el.onkeydown = el.onkeyup = el.oncontextmenu = null;\r\n\r\n            mini.clearEvent(el);\r\n\r\n            if (removeEl !== false) {\r\n                //alert(2);\r\n                mini.removeNode(el);\r\n                //                var p = this.el.parentNode;\r\n                //                if (p) p.removeChild(this.el);\r\n            }\r\n\r\n\r\n            //                var p = this.el.parentNode;\r\n            //                if (p) p.removeChild(this.el);\r\n        }\r\n        this._borderEl = this._contentEl = this._valueEl = this._textEl = this._errorIconEl = null;\r\n        this.el = null;\r\n        mini[\"unreg\"](this);\r\n        this.destroyed = true;\r\n        this.fire(\"destroy\");\r\n    },\r\n\r\n    focus: function () {\r\n        try {\r\n            var me = this;\r\n            //setTimeout(function () {\r\n            me.el.focus();\r\n            //}, 1);\r\n        } catch (e) { };\r\n    },\r\n    blur: function () {\r\n        try {\r\n            var me = this;\r\n            //setTimeout(function () {\r\n            me.el.blur();\r\n            //}, 1);\r\n        } catch (e) { };\r\n    },\r\n\r\n    allowAnim: true,\r\n    setAllowAnim: function (value) {\r\n        this.allowAnim = value;\r\n    },\r\n    getAllowAnim: function () {\r\n        return this.allowAnim;\r\n    },\r\n    //////////////////////\r\n    /////////////////////////////////////////////////////////////////////////\r\n    _getMaskWrapEl: function () {\r\n        return this.el;\r\n    },\r\n    mask: function (options) {\r\n\r\n        if (typeof options == \"string\") options = { html: options };\r\n        options = options || {};\r\n        options.el = this._getMaskWrapEl();\r\n        if (!options.cls) options.cls = this._maskCls;\r\n\r\n        mini.mask(options);\r\n\r\n    },\r\n    unmask: function () {\r\n        mini.unmask(this._getMaskWrapEl());\r\n\r\n        this.isLoading = false;\r\n    },\r\n    _maskCls: \"mini-mask-loading\",\r\n    loadingMsg: \"Loading...\",\r\n    loading: function (msg) {\r\n        //this.isLoading = true;\r\n        this.mask(msg || this.loadingMsg);\r\n    },\r\n    setLoadingMsg: function (value) {\r\n        this.loadingMsg = value;\r\n    },\r\n    getLoadingMsg: function () {\r\n        return this.loadingMsg;\r\n    },\r\n    //////////////////////\r\n    _getContextMenu: function (value) {\r\n        var ui = value;\r\n        if (typeof value == \"string\") {\r\n            ui = mini.get(value);\r\n            if (!ui) {\r\n                mini.parse(value);\r\n                ui = mini.get(value);\r\n            }\r\n        } else if (mini.isArray(value)) {\r\n            ui = {\r\n                type: \"menu\",\r\n                items: value\r\n            };\r\n        } else if (!mini.isControl(value)) {\r\n            ui = mini.create(value);\r\n        }\r\n        return ui;\r\n    },\r\n    __OnHtmlContextMenu: function (e) {\r\n        var ev = {\r\n            popupEl: this.el,\r\n            htmlEvent: e,\r\n            cancel: false\r\n        };\r\n        this.contextMenu.fire(\"BeforeOpen\", ev);\r\n        if (ev.cancel == true) return;\r\n        this.contextMenu.fire(\"opening\", ev);\r\n        if (ev.cancel == true) return;\r\n\r\n        this.contextMenu.showAtPos(e.pageX, e.pageY);\r\n        this.contextMenu.fire(\"Open\", ev);\r\n        return false;\r\n    },\r\n    contextMenu: null,\r\n    setContextMenu: function (value) {\r\n        var ui = this._getContextMenu(value);\r\n        if (!ui) return;\r\n        if (this.contextMenu !== ui) {\r\n            this.contextMenu = ui;\r\n            mini.addClass(ui.el, \"mini-menu-open\");\r\n            this.contextMenu.owner = this;\r\n            mini.on(this.el, \"contextmenu\", this.__OnHtmlContextMenu, this);\r\n        }\r\n    },\r\n    getContextMenu: function () {\r\n        return this.contextMenu;\r\n    },\r\n    setDefaultValue: function (value) {\r\n        this.defaultValue = value;\r\n    },\r\n    getDefaultValue: function () {\r\n        return this.defaultValue;\r\n    },\r\n    setValue: function (value) {\r\n        this.value = value;\r\n    },\r\n    getValue: function () {\r\n        return this.value;\r\n    },\r\n    //////////////////////\r\n    ajaxData: null,\r\n    ajaxType: \"\",\r\n    ajaxOptions: null,\r\n    setAjaxOptions: function (value) {\r\n        this.ajaxOptions = value;\r\n    },\r\n    getAjaxOptions: function () {\r\n        return this.ajaxOptions;\r\n    },\r\n    setAjaxData: function (value) {\r\n        this.ajaxData = value;\r\n    },\r\n    getAjaxData: function () {\r\n        return this.ajaxData;\r\n    },\r\n    setAjaxType: function (value) {\r\n        this.ajaxType = value;\r\n    },\r\n    getAjaxType: function () {\r\n        return this.ajaxType;\r\n    },\r\n    //    setApplyTo: function (el) {\r\n    //        this.applyTo(el);\r\n    //    },\r\n\r\n    _afterApply: function (el) {\r\n        //        var cs = mini.getChildNodes(el, true);\r\n        //        for (var i = 0, l = cs.length; i < l; i++) {\r\n        //            var nodeEl = cs[i];\r\n        //            this._contentEl.appendChild(nodeEl);\r\n        //        }\r\n    },\r\n    //_tagName: \"\",\r\n    dataField: \"\",\r\n    setDataField: function (value) {\r\n        this.dataField = value;\r\n    },\r\n    getDataField: function () {\r\n        return this.dataField;\r\n    },\r\n    tabIndex: 0,\r\n    setTabIndex: function (value) {\r\n        var el = this._textEl || this.el;\r\n        el.tabIndex = value;\r\n        this.tabIndex = value;\r\n    },\r\n    getTabIndex: function () {\r\n        return this.tabIndex;\r\n    },\r\n    getAttrs: function (el) {\r\n        //        if (el.tagName.toLowerCase() != this._tagName) {\r\n        //            throw new Error(this.type + \" must be Tag \\\"\" + this._tagName+\"\\\"\");\r\n        //        }\r\n\r\n        var attrs = {};\r\n\r\n        var cls = el.className;\r\n        if (cls) attrs.cls = cls;\r\n\r\n        if (el.value) attrs.value = el.value;\r\n        mini._ParseString(el, attrs,\r\n            [\"id\", \"name\", \"width\", \"height\", \"borderStyle\", \"value\", \"defaultValue\", \"tabIndex\",\r\n            \"contextMenu\", \"tooltip\", \"ondestroy\", \"data-options\", \"ajaxData\", \"ajaxType\", \"dataField\"\r\n            , \"ajaxOptions\", \"data-placement\"\r\n\r\n             ]\r\n        );\r\n        if (attrs[\"data-placement\"]) this.tooltipPlacement = attrs[\"data-placement\"];\r\n\r\n        //        if (this.type == \"textbox\") {\r\n        //            alert(attrs.height);\r\n        //        }\r\n\r\n        mini._ParseBool(el, attrs,\r\n            [\"visible\", \"enabled\", \"readOnly\"\r\n             ]\r\n        );\r\n\r\n        if (el.readOnly && el.readOnly != \"false\") attrs.readOnly = true;\r\n\r\n        var style = el.style.cssText;\r\n        if (style) {\r\n            attrs.style = style;\r\n        }\r\n        //ie9 background bug\r\n        if (isIE9) {\r\n            var bg = el.style.background;\r\n            if (bg) {\r\n                if (!attrs.style) attrs.style = \"\";\r\n                attrs.style += \";background:\" + bg;\r\n            }\r\n        }\r\n        if (this.style) {\r\n            if (attrs.style) attrs.style = this.style + \";\" + attrs.style;\r\n            else attrs.style = this.style;\r\n        }\r\n        if (this.borderStyle) {\r\n            if (attrs.borderStyle) attrs.borderStyle = this.borderStyle + \";\" + attrs.borderStyle;\r\n            else attrs.borderStyle = this.borderStyle;\r\n        }\r\n\r\n        if (typeof attrs.ajaxOptions == \"string\") {\r\n\r\n            attrs.ajaxOptions = window[\"ev\" + \"al\"]('(' + attrs.ajaxOptions + ')');\r\n        }\r\n\r\n        //if (this.type == \"menu\") debugger\r\n        //if(attrs.id == \"folderTree\") debugger\r\n\r\n        //用户自定义标签参数\r\n        var ts = mini._attrs;\r\n        if (ts) {\r\n            for (var i = 0, l = ts.length; i < l; i++) {\r\n                var t = ts[i];\r\n                var name = t[0];\r\n                var type = t[1];\r\n                if (!type) type = \"string\";\r\n                if (type == \"string\") mini._ParseString(el, attrs, [name]);\r\n                else if (type == \"bool\") mini._ParseBool(el, attrs, [name]);\r\n                else if (type == \"int\") mini._ParseInt(el, attrs, [name]);\r\n            }\r\n        }\r\n\r\n        //data-options\r\n        var options = attrs[\"data-options\"];\r\n        if (options) {\r\n            options = window[\"ev\" + \"al\"](\"(\" + options + \")\");\r\n            if (options) {\r\n                //attrs[\"data-options\"] = options;\r\n                mini.copyTo(attrs, options);\r\n            }\r\n        }\r\n\r\n\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini._attrs = null;\r\nmini.regHtmlAttr = function (attr, type) {\r\n    if (!attr) return;\r\n    if (!type) type = \"string\";\r\n    if (!mini._attrs) mini._attrs = [];\r\n    mini._attrs.push([attr, type]);\r\n}\r\n\r\n\r\n\r\n\r\n/* Container\r\n-----------------------------------------------------------------------------*/\r\n\r\n__mini_setControls = function (controls, contentEl, scope) {\r\n\r\n    contentEl = contentEl || this._contentEl;\r\n    scope = scope || this;\r\n    if (!controls) controls = [];\r\n    if (!mini.isArray(controls)) controls = [controls];\r\n    //controls = controls.clone();        \r\n\r\n    for (var i = 0, l = controls.length; i < l; i++) {\r\n        var c = controls[i];\r\n        if (typeof c == \"string\") {                     //string\r\n            if (c.indexOf(\"#\") == 0) c = mini.byId(c);\r\n        } else if (mini.isElement(c)) {                 //dom\r\n        } else {                                        //object\r\n            c = mini.getAndCreate(c);\r\n            c = c.el;\r\n        }\r\n        if (!c) continue;\r\n        //mini.innerHTML\r\n        mini.append(contentEl, c);\r\n\r\n\r\n    }\r\n    \r\n    \r\n    mini.parse(contentEl);\r\n    scope.doLayout();\r\n    return scope;\r\n}\r\n\r\nmini.Container = function () {\r\n    mini.Container.superclass.constructor.apply(this, arguments);\r\n    if(!this._contentEl) this._contentEl = this.el;\r\n}\r\nmini.extend(mini.Container, mini.Control, {\r\n\r\n//    destroy: function(){\r\n//    },\r\n    \r\n    setControls: __mini_setControls,\r\n    getContentEl: function () {\r\n        return this._contentEl;\r\n    },\r\n    getBodyEl: function () {\r\n        return this._contentEl;\r\n    },\r\n    within: function (e) {\r\n        if (mini.isAncestor(this.el, e.target)) return true;\r\n        var controls = mini.getChildControls(this);\r\n\r\n        //if (this.id == 'gridPanel') debugger\r\n\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var c = controls[i];\r\n            //if (mini.isAncestor(c.el, e.target)) return true;\r\n            if (c.within(e)) return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n});\r\n\r\n\r\n\r\n/* ValidatorBase \r\n-----------------------------------------------------------------------------*/\r\n\r\nmini.ValidatorBase = function () {\r\n    mini.ValidatorBase.superclass.constructor.apply(this, arguments);    \r\n}\r\nmini.extend(mini.ValidatorBase, mini.Control, {\r\n    required: false,\r\n    requiredErrorText: \"This field is required.\",\r\n    _requiredCls: \"mini-required\",\r\n\r\n    errorText: \"\",\r\n    _errorCls: \"mini-error\",\r\n    _invalidCls: \"mini-invalid\", //当none时，加上_errorCls，比如红色边框，黄色背景\r\n\r\n    errorMode: \"icon\",      //icon、border、none\r\n    validateOnChanged: true,  //值改变时验证\r\n    validateOnLeave: true,  //离开失去焦点时验证\r\n    _IsValid: true,\r\n\r\n    forceValidate: false,\r\n    setForceValidate: function (value) {\r\n        this.forceValidate = value;\r\n    },\r\n    getForceValidate: function () {\r\n        return this.forceValidate;\r\n    },\r\n\r\n    keyNavEnabled: true,\r\n    setKeyNavEnabled: function (value) {\r\n        this.keyNavEnabled = value;\r\n    },\r\n    getKeyNavEnabled: function () {\r\n        return this.keyNavEnabled;\r\n    },\r\n\r\n    indentSpace: false,  //  错误缩进\r\n    _indentCls: \"mini-indent\",\r\n\r\n    setIndentSpace: function (value) {\r\n        if (value) {\r\n            this.addCls(this._indentCls)\r\n        } else {\r\n            this.removeCls(this._indentCls)\r\n        }\r\n        this.indentSpace = value;\r\n    },\r\n    getIndentSpace: function () {\r\n        return this.indentSpace;\r\n    },\r\n\r\n    isEditable: function () {\r\n        if (this.readOnly || !this.allowInput || !this.enabled) return false;\r\n        return true;\r\n    },\r\n\r\n    _tryValidate: function () {\r\n\r\n        if (this._tryValidateTimer) clearTimeout(this._tryValidateTimer);\r\n        var me = this;\r\n        this._tryValidateTimer = setTimeout(function () {\r\n            me.validate();\r\n        }, 30);\r\n    },\r\n    validate: function () {\r\n        //if (this.isReadOnly() || this.enabled == false) return true;\r\n        //        if (this.enabled == false) {\r\n        //            this.setIsValid(true);\r\n        //            return true;\r\n        //        }\r\n\r\n        var e = {\r\n            value: this.getValue(),\r\n            errorText: \"\",\r\n            isValid: true\r\n        };\r\n\r\n        if (this.required) {\r\n            if (mini.isNull(e.value) || String(e.value).trim() === \"\") {\r\n                e.isValid = false;\r\n                e.errorText = this.requiredErrorText;\r\n            }\r\n        }\r\n\r\n        this.fire(\"validation\", e);\r\n\r\n        this.errorText = e.errorText;\r\n        this.setIsValid(e.isValid);\r\n        return this.isValid();\r\n    },\r\n    isValid: function () {\r\n        return this._IsValid;\r\n    },\r\n    setIsValid: function (value) {\r\n        //if (this._IsValid != value) {\r\n        this._IsValid = value;\r\n        this.doUpdateValid();\r\n        //}\r\n    },\r\n    getIsValid: function () {\r\n        return this._IsValid;\r\n    },\r\n    setValidateOnChanged: function (value) {\r\n        this.validateOnChanged = value;\r\n    },\r\n    getValidateOnChanged: function (value) {\r\n        return this.validateOnChanged;\r\n    },\r\n    setValidateOnLeave: function (value) {\r\n        this.validateOnLeave = value;\r\n    },\r\n    getValidateOnLeave: function (value) {\r\n        return this.validateOnLeave;\r\n    },\r\n\r\n    setErrorMode: function (value) {\r\n        if (!value) value = \"none\";\r\n        this.errorMode = value.toLowerCase();\r\n        if (this._IsValid == false) this.doUpdateValid();\r\n    },\r\n    getErrorMode: function () {\r\n        return this.errorMode;\r\n    },\r\n    setErrorText: function (value) {\r\n        this.errorText = value;\r\n        if (this._IsValid == false) this.doUpdateValid();\r\n    },\r\n    getErrorText: function () {\r\n        return this.errorText;\r\n    },\r\n    setRequired: function (value) {\r\n        this.required = value;\r\n        if (this.required) {\r\n            this.addCls(this._requiredCls);\r\n        } else {\r\n            this.removeCls(this._requiredCls);\r\n        }\r\n    },\r\n    getRequired: function () {\r\n        return this.required;\r\n    },\r\n    setRequiredErrorText: function (value) {\r\n        this.requiredErrorText = value;\r\n    },\r\n    getRequiredErrorText: function () {\r\n        return this.requiredErrorText;\r\n    },\r\n    errorIconEl: null,\r\n    getErrorIconEl: function () {\r\n        return this._errorIconEl;\r\n    },\r\n    _RemoveErrorIcon: function () {\r\n\r\n    },\r\n    doUpdateValid: function () {\r\n        var me = this;\r\n        me.__doUpdateValid();\r\n        //        if (this._IsValid) {\r\n        //            me.__doUpdateValid();\r\n        //        } else {\r\n        //            this._doUpdateValidTimer = setTimeout(function () {\r\n        //                me.__doUpdateValid();\r\n        //            }, 1);\r\n        //        }\r\n    },\r\n    errorTooltipPlacement: 'right',\r\n    __doUpdateValid: function () {\r\n        if (!this.el) return;\r\n        this.removeCls(this._errorCls);\r\n        this.removeCls(this._invalidCls);\r\n\r\n        if (this.errorMode == \"border\") {\r\n            this.el.title = \"\";\r\n        }\r\n\r\n        if (this._IsValid == false) {\r\n            switch (this.errorMode) {\r\n                case \"icon\":\r\n                    this.addCls(this._errorCls);\r\n                    var icon = this.getErrorIconEl();\r\n                    if (icon) {\r\n                        icon.title = this.errorText;\r\n                        jQuery(icon).attr(\"data-placement\", this.errorTooltipPlacement);\r\n                    }\r\n                    break;\r\n                case \"border\":\r\n                    this.addCls(this._invalidCls);\r\n                    this.el.title = this.errorText;\r\n                default:\r\n                    this._RemoveErrorIcon();\r\n                    break;\r\n            }\r\n        } else {\r\n            this._RemoveErrorIcon();\r\n        }\r\n        this.doLayout();\r\n    },\r\n    doValueChanged: function () {\r\n        this._OnValueChanged();\r\n    },\r\n    _OnValueChanged: function () {\r\n        if (this.validateOnChanged) {\r\n            this._tryValidate();\r\n        }\r\n        this.fire(\"valuechanged\", { value: this.getValue(), oldValue: this._oldValue });\r\n\r\n        this._oldValue = this.getValue();\r\n    },\r\n    onValueChanged: function (fn, scope) {\r\n        this.on(\"valuechanged\", fn, scope);\r\n    },\r\n    onValidation: function (fn, scope) {\r\n        this.on(\"validation\", fn, scope);\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.ValidatorBase.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"onvaluechanged\", \"onvalidation\", \"label\", \"labelStyle\",\r\n            \"requiredErrorText\", \"errorMode\", \"errorTooltipPlacement\"\r\n             ]\r\n        );\r\n\r\n        mini._ParseBool(el, attrs,\r\n            [\"validateOnChanged\", \"validateOnLeave\", \"labelField\", \"indentSpace\", \"keyNavEnabled\", \"forceValidate\"\r\n             ]\r\n        );\r\n\r\n        var required = el.getAttribute(\"required\");\r\n        if (!required) required = el.required;\r\n        if (!required) {\r\n            var o = el.attributes[\"required\"];\r\n            if (o) {//fix ie10\r\n                required = o.value == 'null' ? null : 'true';\r\n            }\r\n        }\r\n        if (required) {\r\n            attrs.required = required != \"false\" ? true : false;\r\n        }\r\n\r\n        return attrs;\r\n    },\r\n\r\n    /////////////////////////////////////////////////////////////////\r\n    _labelLayout: function () {\r\n        var border = this._borderEl;\r\n        if (!border) return;\r\n\r\n        this._labelLayouted = true;\r\n        if (this.labelField) {\r\n            var w = this._labelEl.offsetWidth;\r\n            border.style[\"marginLeft\"] = w + \"px\";\r\n            this._doLabelLayout = w === 0;\r\n        } else {\r\n            border.style[\"marginLeft\"] = 0;\r\n        }\r\n    },\r\n    _labelFieldCls: 'mini-labelfield',\r\n    labelField: false,\r\n    label: '',\r\n    labelStyle: '',\r\n    setLabelField: function (value) {\r\n        if (this.labelField != value) {\r\n            this.labelField = value;\r\n            if (!this._borderEl) return;\r\n            if (!this._labelEl) {\r\n                this._labelEl = mini.append(this.el, '<label class=\"mini-labelfield-label\"></label>');\r\n                this._labelEl.innerHTML = this.label;\r\n                mini.setStyle(this._labelEl, this.labelStyle);\r\n            }\r\n            this._labelEl.style.display = value ? 'block' : 'none';\r\n            if (value) {\r\n                mini.addClass(this.el, this._labelFieldCls);\r\n            } else {\r\n                mini.removeClass(this.el, this._labelFieldCls);\r\n            }\r\n            this._labelLayout();\r\n            //this.doLayout();\r\n        }\r\n    },\r\n    getLabelField: function () {\r\n        this.labelField;\r\n    },\r\n    setLabel: function (value) {\r\n        if (this.label != value) {\r\n            this.label = value;\r\n            if (this._labelEl) this._labelEl.innerHTML = value;\r\n            this._labelLayout();\r\n        }\r\n    },\r\n    getLabel: function () {\r\n        this.label;\r\n    },\r\n    setLabelStyle: function (value) {\r\n        if (this.labelStyle != value) {\r\n            this.labelStyle = value;\r\n            if (this._labelEl) mini.setStyle(this._labelEl, value);\r\n            this._labelLayout();\r\n        }\r\n    },\r\n    getLabelStyle: function () {\r\n        this.labelStyle;\r\n    }\r\n});\r\n\r\n\r\n/* ListControl \r\n-----------------------------------------------------------------------------*/\r\n\r\n\r\nmini.ListControl = function (el) {\r\n    this.data = [];\r\n    this._selecteds = [];\r\n    mini.ListControl.superclass.constructor.call(this, null);\r\n    this.doUpdate();\r\n\r\n    if (el) mini.applyTo.call(this, el);\r\n}\r\nmini.ListControl.ajaxType = \"get\";\r\nmini.extend(mini.ListControl, mini.ValidatorBase, {\r\n    defaultValue: '',\r\n    value: '',\r\n    valueField: \"id\",\r\n    textField: \"text\",\r\n    dataField: \"\",\r\n    delimiter: ',',\r\n\r\n    setDelimiter: function (value) {\r\n        this.delimiter = value;\r\n    },\r\n    getDelimiter: function () {\r\n        return this.delimiter;\r\n    },\r\n\r\n    data: null,\r\n    url: \"\",\r\n\r\n    valueInCheckOrder: true,\r\n    setValueInCheckOrder: function (value) {\r\n        this.valueInCheckOrder = value;\r\n    },\r\n    getValueInCheckOrder: function () {\r\n        return this.valueInCheckOrder;\r\n    },\r\n\r\n    _itemCls: \"mini-list-item\",\r\n    _itemHoverCls: \"mini-list-item-hover\",\r\n    _itemSelectedCls: \"mini-list-item-selected\",\r\n\r\n    doLayout: function () {\r\n        if (this._doLabelLayout) {\r\n            this._labelLayout();\r\n        }\r\n    },\r\n\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var value = kv.value;\r\n        delete kv.value;\r\n        var url = kv.url;\r\n        delete kv.url;\r\n        var data = kv.data;\r\n        delete kv.data;\r\n\r\n        mini.ListControl.superclass.set.call(this, kv);\r\n\r\n        if (!mini.isNull(data)) {\r\n            this.setData(data);\r\n        }\r\n        if (!mini.isNull(url)) {\r\n            this.setUrl(url);\r\n        }\r\n        if (!mini.isNull(value)) {\r\n            this.setValue(value);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    uiCls: \"mini-list\",\r\n    _create: function () {\r\n\r\n    },\r\n    _initEvents: function () {\r\n        mini._BindEvents(function () {\r\n            mini_onOne(this.el, 'click', this.__OnClick, this);\r\n            mini_onOne(this.el, 'dblclick', this.__OnDblClick, this);\r\n\r\n            mini_onOne(this.el, 'mousedown', this.__OnMouseDown, this);\r\n            mini_onOne(this.el, 'mouseup', this.__OnMouseUp, this);\r\n            mini_onOne(this.el, 'mousemove', this.__OnMouseMove, this);\r\n            mini_onOne(this.el, 'mouseover', this.__OnMouseOver, this);\r\n            mini_onOne(this.el, 'mouseout', this.__OnMouseOut, this);\r\n\r\n            mini_onOne(this.el, 'keydown', this.__OnKeyDown, this);\r\n            mini_onOne(this.el, 'keyup', this.__OnKeyUp, this);\r\n\r\n            mini_onOne(this.el, 'contextmenu', this.__OnContextMenu, this);\r\n\r\n            //            mini.on(this.el, 'click', this.__OnClick, this);\r\n            //            mini.on(this.el, 'dblclick', this.__OnDblClick, this);\r\n\r\n            //            mini.on(this.el, 'mousedown', this.__OnMouseDown, this);\r\n            //            mini.on(this.el, 'mouseup', this.__OnMouseUp, this);\r\n            //            mini.on(this.el, 'mousemove', this.__OnMouseMove, this);\r\n            //            mini.on(this.el, 'mouseover', this.__OnMouseOver, this);\r\n            //            mini.on(this.el, 'mouseout', this.__OnMouseOut, this);\r\n\r\n            //            mini.on(this.el, 'keydown', this.__OnKeyDown, this);\r\n            //            mini.on(this.el, 'keyup', this.__OnKeyUp, this);\r\n\r\n            //            mini.on(this.el, 'contextmenu', this.__OnContextMenu, this);\r\n        }, this);\r\n    },\r\n    destroy: function (removeEl) {\r\n\r\n        mini.ListControl.superclass.destroy.call(this, removeEl);\r\n    },\r\n\r\n    name: \"\",\r\n    setName: function (value) {\r\n        this.name = value;\r\n        if (this._valueEl) mini.setAttr(this._valueEl, \"name\", this.name);\r\n    },\r\n\r\n    getItemByEvent: function (event) {\r\n        var domItem = mini.findParent(event.target, this._itemCls);\r\n        if (domItem) {\r\n\r\n            var index = parseInt(mini.getAttr(domItem, \"index\"));\r\n\r\n            return this.data[index];\r\n        }\r\n    },\r\n    addItemCls: function (item, cls) {\r\n        var itemEl = this.getItemEl(item);\r\n        if (itemEl) mini.addClass(itemEl, cls);\r\n    },\r\n    removeItemCls: function (item, cls) {\r\n        var itemEl = this.getItemEl(item);\r\n        if (itemEl) mini.removeClass(itemEl, cls);\r\n    },\r\n    getItemEl: function (item) {\r\n        item = this.getItem(item);\r\n        var index = this.data.indexOf(item);\r\n        var id = this._createItemId(index);\r\n        return document.getElementById(id);\r\n    },\r\n    _focusItem: function (item, view) {\r\n\r\n        item = this.getItem(item);\r\n        if (!item) return;\r\n        var dom = this.getItemEl(item);\r\n        if (view && dom) {\r\n            this.scrollIntoView(item);\r\n        }\r\n        if (this._focusedItem == item) {\r\n            if (dom) mini.addClass(dom, this._itemHoverCls);\r\n            return;\r\n        }\r\n        this._blurItem();\r\n        this._focusedItem = item;\r\n        if (dom) mini.addClass(dom, this._itemHoverCls);\r\n    },\r\n    _blurItem: function () {\r\n        if (!this._focusedItem) return;\r\n\r\n        var dom = this.getItemEl(this._focusedItem);\r\n        if (dom) {\r\n            mini.removeClass(dom, this._itemHoverCls);\r\n        }\r\n        this._focusedItem = null;\r\n    },\r\n    getFocusedItem: function () {\r\n        var row = this._focusedItem;\r\n        return this.indexOf(row) == -1 ? null : row;\r\n    },\r\n    getFocusedIndex: function () {\r\n        return this.data.indexOf(this._focusedItem);\r\n    },\r\n    _scrollViewEl: null,\r\n    scrollIntoView: function (item) {\r\n        try {\r\n            var itemEl = this.getItemEl(item);\r\n            var _scrollViewEl = this._scrollViewEl || this.el;\r\n            mini.scrollIntoView(itemEl, _scrollViewEl, false);\r\n        } catch (e) { }\r\n    },\r\n    ////////////////////////////////////////////\r\n    getItem: function (item) {\r\n        if (typeof item == \"object\") return item;\r\n        if (typeof item == \"number\") return this.data[item];\r\n        return this.findItems(item)[0];\r\n    },\r\n    getCount: function () {\r\n        return this.data.length;\r\n    },\r\n    indexOf: function (item) {\r\n        return this.data.indexOf(item);\r\n    },\r\n    getAt: function (index) {\r\n        return this.data[index];\r\n    },\r\n    updateItem: function (item, options) {\r\n        item = this.getItem(item);\r\n        if (!item) return;\r\n        mini.copyTo(item, options);\r\n        this.doUpdate();\r\n    },\r\n    load: function (data) {\r\n        if (typeof data == \"string\") this.setUrl(data);\r\n        else this.setData(data);\r\n    },\r\n    loadData: function (data) {\r\n        this.setData(data);\r\n    },\r\n    setData: function (data) {\r\n        if (typeof data == \"string\") {\r\n            data = window[\"ev\" + \"al\"](data);\r\n        }\r\n        if (!mini.isArray(data)) data = [];\r\n        this.data = data;\r\n\r\n\r\n\r\n\r\n        //        this._checkSelecteds();\r\n\r\n        this.doUpdate();\r\n\r\n        if (this.value != \"\") {\r\n            this.deselectAll();\r\n            var records = this.findItems(this.value);\r\n            this.selects(records);\r\n        }\r\n    },\r\n    getData: function () {\r\n        return this.data.clone();\r\n    },\r\n    setUrl: function (url) {\r\n        //if (this.url != url) {\r\n        this.url = url;\r\n        this._doLoad({});\r\n        //}\r\n    },\r\n    getUrl: function () {\r\n        return this.url;\r\n    },\r\n\r\n\r\n    ajaxData: null,\r\n    _doLoad: function (params) {\r\n\r\n        try {\r\n            var url = window[\"ev\" + \"al\"](this.url);\r\n            if (url != undefined) {\r\n                this.url = url;\r\n            }\r\n        } catch (e) { }\r\n        var url = this.url;\r\n\r\n        var ajaxMethod = mini.ListControl.ajaxType;\r\n        if (url) {\r\n            if (url.indexOf(\".txt\") != -1 || url.indexOf(\".json\") != -1) {\r\n                ajaxMethod = \"get\";\r\n            }\r\n        }\r\n\r\n        var obj = mini._evalAjaxData(this.ajaxData, this);\r\n        mini.copyTo(params, obj);\r\n\r\n        var e = {\r\n            url: this.url,\r\n            async: false,\r\n            type: this.ajaxType ? this.ajaxType : ajaxMethod,\r\n            data: params,\r\n            params: params,\r\n            cache: false,\r\n            cancel: false\r\n        };\r\n\r\n        //alert(this.ajaxOptions);\r\n        jQuery.extend(true, e, this.ajaxOptions);\r\n\r\n        this.fire(\"beforeload\", e);\r\n        if (e.data != e.params && e.params != params) {\r\n            e.data = e.params;\r\n        }\r\n        if (e.cancel == true) return;\r\n\r\n        var sf = me = this;\r\n        var url = e.url;\r\n        mini.copyTo(e, {\r\n            success: function (text, textStatus, xhr) {\r\n                delete e.params;\r\n                var obj = { text: text, result: null, sender: me, options: e, xhr: xhr };\r\n                var result = null;\r\n                try {\r\n                    mini_doload(obj);\r\n                    result = obj.result;\r\n                    if (!result) {\r\n                        result = mini.decode(text);\r\n                    }\r\n                } catch (ex) {\r\n                    if (mini_debugger == true) {\r\n                        alert(url + \"\\njson is error.\");\r\n                    }\r\n                }\r\n                if (mini.isArray(result)) result = { data: result };\r\n                if (sf.dataField) {\r\n                    result.data = mini._getMap(sf.dataField, result);\r\n                }\r\n                if (!result.data) result.data = [];\r\n\r\n                var ex = { data: result.data, cancel: false, result: result }\r\n                sf.fire(\"preload\", ex);\r\n                if (ex.cancel == true) return;\r\n\r\n                sf.setData(ex.data);\r\n\r\n                delete ex.cancel;\r\n                sf.fire(\"load\", ex);\r\n\r\n                setTimeout(function () {\r\n                    sf.doLayout();\r\n                }, 100);\r\n\r\n            },\r\n            error: function (xhr, textStatus, errorThrown) {\r\n                var e = {\r\n                    xhr: xhr,\r\n                    text: xhr.responseText,\r\n                    textStatus: textStatus,\r\n                    errorMsg: xhr.responseText,\r\n                    errorCode: xhr.status\r\n                };\r\n                if (mini_debugger == true) {\r\n                    alert(url + \"\\n\" + e.errorCode + \"\\n\" + e.errorMsg);\r\n                }\r\n                sf.fire(\"loaderror\", e);\r\n            }\r\n        });\r\n\r\n        this._ajaxer = mini.ajax(e);\r\n    },\r\n    setValue: function (value) {\r\n        if (mini.isNull(value)) value = \"\";\r\n        //if (this.value !== value) {\r\n        //var records = this.findItems(this.value);\r\n        this.deselectAll();\r\n\r\n        this.value = value;\r\n        if (this._valueEl) this._valueEl.value = value;\r\n\r\n        var records = this.findItems(this.value);\r\n        this.selects(records);\r\n\r\n        this.setSelected(records[0]);\r\n        //}\r\n    },\r\n    getValue: function () {\r\n        return this.value;\r\n    },\r\n    getFormValue: function () {\r\n        return this.value;\r\n    },\r\n    setValueField: function (valueField) {\r\n        this.valueField = valueField;\r\n    },\r\n    getValueField: function () {\r\n        return this.valueField;\r\n    },\r\n    setTextField: function (value) {\r\n        this.textField = value;\r\n    },\r\n    getTextField: function () {\r\n        return this.textField;\r\n    },\r\n\r\n    ////////////////////////////////////////////////////////\r\n    getItemValue: function (item) {\r\n        return String(mini._getMap(this.valueField, item));\r\n    },\r\n    getItemText: function (item) {\r\n        var t = mini._getMap(this.textField, item);\r\n        return mini.isNull(t) ? '' : String(t);\r\n    },\r\n    getValueAndText: function (records) {\r\n        if (mini.isNull(records)) records = [];\r\n        if (!mini.isArray(records)) {\r\n            records = this.findItems(records);\r\n        }\r\n\r\n        //按序号排序\r\n        if (this.valueInCheckOrder) {\r\n            var data = this.getData();\r\n            mini.sort(records, function (a, b) {\r\n                var index1 = data.indexOf(a);\r\n                var index2 = data.indexOf(b);\r\n                if (index1 > index2) return 1;\r\n                if (index1 < index2) return -1;\r\n                return 0;\r\n            });\r\n        }\r\n\r\n        var values = [];\r\n        var texts = [];\r\n        for (var i = 0, l = records.length; i < l; i++) {\r\n            var record = records[i];\r\n            if (record) {\r\n                values.push(this.getItemValue(record));\r\n                texts.push(this.getItemText(record));\r\n            }\r\n        }\r\n        return [values.join(this.delimiter), texts.join(this.delimiter)];\r\n    },\r\n    findItems: function (value) {\r\n        if (mini.isNull(value) || value === \"\") return [];\r\n        if (typeof value == 'function') {\r\n            var fn = value;\r\n            var items = [];\r\n            var data = this.data;\r\n            for (var j = 0, k = data.length; j < k; j++) {\r\n                var record = data[j];\r\n                if (fn(record, j) === true) {\r\n                    items.push(record);\r\n                }\r\n            }\r\n            return items;\r\n        }\r\n\r\n        var values = String(value).split(this.delimiter);\r\n\r\n        var data = this.data;\r\n        var valueRecords = {};\r\n        for (var j = 0, k = data.length; j < k; j++) {\r\n            var record = data[j];\r\n            //var v = record[this.valueField];\r\n            var v = mini._getMap(this.valueField, record);\r\n            valueRecords[v] = record;\r\n        }\r\n\r\n        var records = [];\r\n        for (var i = 0, l = values.length; i < l; i++) {\r\n            var v = values[i];\r\n            var record = valueRecords[v];\r\n            if (record) {\r\n                records.push(record);\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n        return records;\r\n    },\r\n\r\n    /////////////////////////////////////////////\r\n    removeAll: function () {\r\n        var items = this.getData();\r\n        this.removeItems(items);\r\n    },\r\n    addItems: function (items, index) {\r\n        if (!mini.isArray(items)) return;\r\n        if (mini.isNull(index)) index = this.data.length;\r\n        this.data.insertRange(index, items);\r\n        this.doUpdate();\r\n    },\r\n    addItem: function (item, index) {\r\n        if (!item) return;\r\n        if (this.data.indexOf(item) != -1) return;\r\n        if (mini.isNull(index)) index = this.data.length;\r\n        this.data.insert(index, item);\r\n        this.doUpdate();\r\n    },\r\n    removeItems: function (items) {\r\n        if (!mini.isArray(items)) return;\r\n        this.data.removeRange(items);\r\n\r\n        this._checkSelecteds();\r\n        this.doUpdate();\r\n    },\r\n    removeItem: function (item) {\r\n        var index = this.data.indexOf(item);\r\n        if (index != -1) {\r\n            this.data.removeAt(index);\r\n            this._checkSelecteds();\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    moveItem: function (item, index) {\r\n        if (!item || !mini.isNumber(index)) return;\r\n        //        var target = this.data[index];\r\n        //        if (target == item) return;\r\n        if (index < 0) index = 0;\r\n        if (index > this.data.length) index = this.data.length;\r\n        this.data.remove(item);\r\n        //index = this.data.indexOf(target);\r\n        this.data.insert(index, item);\r\n        this.doUpdate();\r\n    },\r\n    ///////////////////////////////////////////// \r\n\r\n    _isSelectedAll: function () {\r\n        var me = this,\r\n            data = this.getData();\r\n        //for(var \r\n\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var item = data[i];\r\n            if (item.enabled !== false) {\r\n                if (!me.isSelected(item)) return false;\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n\r\n    _selected: null,\r\n    _selecteds: [],\r\n    multiSelect: false,\r\n    _checkSelecteds: function () {\r\n        for (var i = this._selecteds.length - 1; i >= 0; i--) {\r\n            var record = this._selecteds[i];\r\n            if (this.data.indexOf(record) == -1) {\r\n                this._selecteds.removeAt(i);\r\n            }\r\n        }\r\n\r\n        if (this._selected && this.data.indexOf(this._selected) == -1) this._selected = null;\r\n\r\n        var vts = this.getValueAndText(this._selecteds);\r\n        this.value = vts[0];\r\n        if (this._valueEl) this._valueEl.value = this.value;\r\n    },\r\n    setMultiSelect: function (value) {\r\n        this.multiSelect = value;\r\n    },\r\n    getMultiSelect: function () {\r\n        return this.multiSelect;\r\n    },\r\n    isSelected: function (record) {\r\n        if (!record) return false;\r\n        return this._selecteds.indexOf(record) != -1;\r\n    },\r\n    getSelecteds: function () {\r\n        var arr = this._selecteds.clone();\r\n        var me = this;\r\n\r\n\r\n        //按序号排序\r\n        if (this.valueInCheckOrder) {\r\n            mini.sort(arr, function (a, b) {\r\n                var index1 = me.indexOf(a);\r\n                var index2 = me.indexOf(b);\r\n                if (index1 > index2) return 1;\r\n                if (index1 < index2) return -1;\r\n                return 0;\r\n            });\r\n        }\r\n\r\n        //        mini.sort(arr, function (a, b) {\r\n        //            var index1 = me.indexOf(a);\r\n        //            var index2 = me.indexOf(b);\r\n        //            if (index1 < index2) return 1;\r\n        //            //if (index1 < index2) return -1;\r\n        //            return 0;\r\n        //        });\r\n        return arr;\r\n    },\r\n    setSelected: function (record) {\r\n        if (record) {\r\n            this._selected = record;\r\n            this.select(record);\r\n        }\r\n    },\r\n    getSelected: function () {\r\n        return this._selected;\r\n    },\r\n    select: function (record) {\r\n        record = this.getItem(record);\r\n        if (!record) return;\r\n        if (this.isSelected(record)) return;\r\n        this._selected = record;\r\n        this.selects([record]);\r\n    },\r\n    deselect: function (record) {\r\n        record = this.getItem(record);\r\n        if (!record) return;\r\n        if (!this.isSelected(record)) return;\r\n        this.deselects([record]);\r\n    },\r\n    selectAll: function () {\r\n        var data = this.data.clone();\r\n        this.selects(data);\r\n    },\r\n    deselectAll: function () {\r\n        this.deselects(this._selecteds);\r\n    },\r\n    clearSelect: function () {\r\n        this.deselectAll();\r\n    },\r\n    selects: function (records) {\r\n        if (!records || records.length == 0) return;\r\n        records = records.clone();\r\n        if (this.multiSelect == false && records.length > 1) {\r\n            records.length = 1;\r\n        }\r\n        for (var i = 0, l = records.length; i < l; i++) {\r\n            var record = records[i];\r\n            //if (record.enabled === false) continue;\r\n            if (!this.isSelected(record)) {\r\n                this._selecteds.push(record);\r\n            }\r\n        }\r\n        var me = this;\r\n        //setTimeout(function () {\r\n        me._doSelects();\r\n        //}, 1);\r\n    },\r\n    deselects: function (records) {\r\n        if (!records || records.length == 0) return;\r\n        records = records.clone();\r\n        for (var i = records.length - 1; i >= 0; i--) {\r\n            var record = records[i];\r\n            if (this.isSelected(record)) {\r\n                this._selecteds.remove(record);\r\n            }\r\n        }\r\n\r\n        var me = this;\r\n        //setTimeout(function () {\r\n        me._doSelects();\r\n        //}, 1);\r\n    },\r\n    _doSelects: function () {\r\n        var vts = this.getValueAndText(this._selecteds);\r\n        this.value = vts[0];\r\n        if (this._valueEl) this._valueEl.value = this.value;\r\n\r\n        for (var i = 0, l = this.data.length; i < l; i++) {\r\n            var record = this.data[i];\r\n            var select = this.isSelected(record);\r\n            if (select) {\r\n                this.addItemCls(record, this._itemSelectedCls);\r\n            } else {\r\n                this.removeItemCls(record, this._itemSelectedCls);\r\n            }\r\n\r\n            var index = this.data.indexOf(record);\r\n            var id = this._createCheckId(index);\r\n            //var checkbox = document.getElementById(id);\r\n            var checkbox = mini.byId(id, this.el);\r\n            if (checkbox) checkbox.checked = !!select;\r\n        }\r\n    },\r\n    _OnSelectionChanged: function (records, select) {\r\n        var vts = this.getValueAndText(this._selecteds);\r\n        this.value = vts[0];\r\n        if (this._valueEl) this._valueEl.value = this.value;\r\n\r\n        var e = {\r\n            selecteds: this.getSelecteds(),\r\n            selected: this.getSelected(),\r\n            value: this.getValue()\r\n        };\r\n        this.fire(\"SelectionChanged\", e);\r\n\r\n        //if (this._doCheckState) this._doCheckState();\r\n    },\r\n    _createCheckId: function (index) {\r\n        return this.uid + \"$ck$\" + index;\r\n    },\r\n    _createItemId: function (index) {\r\n        return this.uid + \"$\" + index;\r\n    },\r\n\r\n    /////////////////////////////////////////////\r\n    __OnClick: function (e) {\r\n        if (this._clickTime) {\r\n            if (new Date() - this._clickTime < 100) return;\r\n        }\r\n        this._clickTime = new Date();\r\n\r\n        this._fireEvent(e, 'Click');\r\n    },\r\n    __OnDblClick: function (e) {\r\n        this._fireEvent(e, 'Dblclick');\r\n    },\r\n    __OnMouseDown: function (e) {\r\n        this._fireEvent(e, 'MouseDown');\r\n    },\r\n    __OnMouseUp: function (e) {\r\n        this._fireEvent(e, 'MouseUp');\r\n    },\r\n    __OnMouseMove: function (e) {\r\n        this._fireEvent(e, 'MouseMove');\r\n    },\r\n    __OnMouseOver: function (e) {\r\n        this._fireEvent(e, 'MouseOver');\r\n    },\r\n    __OnMouseOut: function (e) {\r\n        this._fireEvent(e, 'MouseOut');\r\n    },\r\n    __OnKeyDown: function (e) {\r\n        this._fireEvent(e, 'KeyDown');\r\n    },\r\n    __OnKeyUp: function (e) {\r\n        this._fireEvent(e, 'KeyUp');\r\n    },\r\n    __OnContextMenu: function (e) {\r\n        this._fireEvent(e, 'ContextMenu');\r\n    },\r\n    _fireEvent: function (e, name) {\r\n        if (!this.enabled) return;\r\n        //this.focus();\r\n\r\n        var item = this.getItemByEvent(e);\r\n        if (!item) return;\r\n        var fn = this['_OnItem' + name];\r\n        if (fn) {\r\n            fn.call(this, item, e);\r\n        } else {\r\n            var eve = {\r\n                item: item,\r\n                htmlEvent: e\r\n            };\r\n            this.fire(\"item\" + name, eve);\r\n        }\r\n    },\r\n\r\n    allowDeselect: false,\r\n    setAllowDeselect: function (value) {\r\n        this.allowDeselect = value;\r\n    },\r\n    getAllowDeselect: function () {\r\n        return this.allowDeselect;\r\n    },\r\n\r\n    _OnItemClick: function (item, e) {\r\n\r\n        if (this.isReadOnly() || this.enabled == false || item.enabled === false) {\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n\r\n        var value = this.getValue();\r\n\r\n        var ev = {\r\n            item: item,\r\n            htmlEvent: e,\r\n            cancel: false\r\n        };\r\n\r\n        this.fire(\"beforeselect\", ev);\r\n\r\n        var e = {\r\n            item: item,\r\n            htmlEvent: e,\r\n            cancel: false\r\n        };\r\n        this.fire(\"beforeitemclick\", e);\r\n        if (e.cancel) return;\r\n\r\n        if (ev.cancel == false) {\r\n\r\n            this._oldValue = value; \r\n\r\n            if (this.multiSelect) {\r\n                if (this.isSelected(item)) {\r\n                    this.deselect(item);\r\n                    if (this._selected == item) {\r\n                        this._selected = null;\r\n                    }\r\n                } else {\r\n                    this.select(item);\r\n                    this._selected = item;\r\n                }\r\n\r\n                if (item.__NullItem) {\r\n                    this.deselectAll();\r\n                    this._selected = null;\r\n                }\r\n\r\n                this._OnSelectionChanged();\r\n            } else {\r\n                //                if (!this.isSelected(item)) {\r\n                //                    this.deselectAll();\r\n                //                    this.select(item);\r\n                //                    this._selected = item;\r\n                //                    this._OnSelectionChanged();\r\n                //                }\r\n\r\n\r\n                if (!this.isSelected(item)) {\r\n                    this.deselectAll();\r\n                    this.select(item);\r\n                    this._selected = item;\r\n                    this._OnSelectionChanged();\r\n                } else {\r\n                    if (this.allowDeselect && this.multiSelect == false) {\r\n                        this.deselectAll();\r\n                        this._OnSelectionChanged();\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            if (value != this.getValue()) {\r\n                this._OnValueChanged();\r\n            }\r\n\r\n        }\r\n\r\n        var e = {\r\n            item: item,\r\n            htmlEvent: e\r\n        };\r\n        this.fire(\"itemclick\", e);\r\n    },\r\n    _blurOnOut: true,\r\n    _OnItemMouseOut: function (item, e) {\r\n        //mini.repaint(this.el);\r\n        if (!this.enabled) return;\r\n        if (this._blurOnOut) {\r\n            this._blurItem();\r\n        }\r\n        var e = {\r\n            item: item,\r\n            htmlEvent: e\r\n        };\r\n        this.fire(\"itemmouseout\", e);\r\n    },\r\n    _OnItemMouseMove: function (item, e) {\r\n        //mini.repaint(this.el);\r\n        if (!this.enabled || item.enabled === false) return;\r\n\r\n        this._focusItem(item);\r\n        var e = {\r\n            item: item,\r\n            htmlEvent: e\r\n        };\r\n        this.fire(\"itemmousemove\", e);\r\n    },\r\n    onItemClick: function (fn, scope) {\r\n        this.on(\"itemclick\", fn, scope);\r\n    },\r\n    onItemMouseDown: function (fn, scope) {\r\n        this.on(\"itemmousedown\", fn, scope);\r\n    },\r\n    onBeforeLoad: function (fn, scope) {\r\n        this.on(\"beforeload\", fn, scope);\r\n    },\r\n    onLoad: function (fn, scope) {\r\n        this.on(\"load\", fn, scope);\r\n    },\r\n    onLoadError: function (fn, scope) {\r\n        this.on(\"loaderror\", fn, scope);\r\n    },\r\n    onPreLoad: function (fn, scope) {\r\n        this.on(\"preload\", fn, scope);\r\n    },\r\n\r\n    getText: function () {\r\n        var selecteds = this.getSelecteds();\r\n        if (selecteds.length == 0) return \"\";\r\n        var text = [];\r\n        for (var i = 0, l = selecteds.length; i < l; i++) {\r\n            var item = selecteds[i];\r\n            var textField = this.getTextField();\r\n            text.push(item[textField]);\r\n        }\r\n        return text.join(\",\")\r\n    },\r\n\r\n    ////////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.ListControl.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"url\", \"data\", \"value\", \"textField\", \"valueField\",\r\n            \"onitemclick\", \"onitemmousemove\", \"onselectionchanged\", \"onitemdblclick\",\r\n            \"onbeforeload\", \"onload\", \"onloaderror\", \"ondataload\", \"onbeforeselect\", \"delimiter\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"multiSelect\", \"valueInCheckOrder\", \"allowDeselect\"\r\n             ]\r\n        );\r\n\r\n        var valueField = attrs.valueField || this.valueField;\r\n        var textField = attrs.textField || this.textField;\r\n        if (el.nodeName.toLowerCase() == \"select\") {\r\n            var data = [];\r\n            for (var i = 0, l = el.length; i < l; i++) {\r\n                var op = el.options[i];\r\n                var o = {};\r\n                o[textField] = op.text;\r\n                o[valueField] = op.value;\r\n\r\n                data.push(o);\r\n            }\r\n            if (data.length > 0) {\r\n                attrs.data = data;\r\n            }\r\n        }\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\n//__getText = function () {\r\n//    var selecteds = this.getSelecteds();\r\n//    if (selecteds.length == 0) return \"\";\r\n//    var text = [];\r\n//    for (var i = 0, l = selecteds.length; i < l; i++) {\r\n//        var item = selecteds[i];\r\n//        var textField = this.getTextField();\r\n//        text.push(item[textField]);\r\n//    }\r\n//    return text.join(\",\")\r\n\r\n//}\r\n\r\n//mini.ListControl.prototype.getText = __getText\r\n\r\n//mini.ListBox.prototype.getText = __getText\r\n\r\n//mini.CheckBoxList.prototype.getText = __getText\r\n\r\n//mini.RadioButtonList.prototype.getText = __getText \r\n\r\n////////////////////////////////////////////////////////////////////////////////////////////////////\r\nmini._Layouts = {};\r\nmini.layout = function (el, mustLayout) {\r\n    if (!mini.enableLayout) return;\r\n\r\n    //if (!el || el == document || el == document.body) alert(\"layout\");\r\n\r\n\r\n    if (!document.body) return;\r\n\r\n    //return;\r\n\r\n    function doLayout(el) {\r\n        if (!el) return;\r\n        var control = mini.get(el);\r\n        if (control) {\r\n\r\n            //判断control的width和height，是否是绝对值。如果都是绝对值，则不doLayout\r\n            if (control.doLayout) {\r\n                if (!mini._Layouts[control.uid]) {\r\n                    mini._Layouts[control.uid] = control;\r\n\r\n                    //                    var el = control.getEl();\r\n                    //                    var width = String(el.style.width);\r\n                    //                    var height = String(el.style.height);\r\n                    //                    if (!mini.isNumber(width) || !mini.isNumber(height)) {\r\n                    //                        control.doLayout(false);\r\n                    //                    }                    \r\n                    if (mustLayout !== false || control.isFixedSize() == false) {\r\n                        control.doLayout(false);\r\n                    }\r\n\r\n                    delete mini._Layouts[control.uid];\r\n                }\r\n            }\r\n        } else {\r\n            var cs = el.childNodes;\r\n            if (cs) {\r\n                for (var i = 0, l = cs.length; i < l; i++) {\r\n                    var cel = cs[i];\r\n\r\n                    //fix NPObject\r\n                    try {\r\n                        cel.toString();\r\n                    } catch (ex) {\r\n                        continue;\r\n                    }\r\n\r\n                    doLayout(cel);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!el) el = document.body;\r\n\r\n    //    if (el == document.body) {\r\n    //        \r\n    //        alert(\"layout\");\r\n    //    }\r\n\r\n    doLayout(el);\r\n\r\n    if (el == document.body) {\r\n        mini.layoutIFrames();\r\n\r\n        //alert(\"layout\");\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n////////////////////////////////////////////////////////////////////////\r\n//mini.applyTo = function (el) {\r\n//    el = mini.byId(el);\r\n//    if (!el) return this;\r\n//    if (mini.get(el)) throw new Error(\"not applyTo a mini control\");\r\n//    //mini.setAttr(el, \"parse\", 1);\r\n\r\n\r\n//    var temp = null;\r\n//    if (el && el != this.el) {\r\n//        temp = document.createTextNode(\"\");\r\n//        jQuery(el).before(temp).remove();\r\n//    }\r\n\r\n//    var config = this.getAttrs(el);\r\n//    delete config._applyTo;\r\n\r\n//    if (mini.isNull(config.defaultValue) && !mini.isNull(config.value)) {\r\n//        config.defaultValue = config.value;\r\n//    }\r\n\r\n//    if (mini.isNull(config.defaultText) && !mini.isNull(config.text)) {\r\n//        config.defaultText = config.text;\r\n//    }\r\n\r\n//    if (temp) {\r\n//        jQuery(temp).before(this.el).remove();\r\n//    }\r\n//    //    var p = el.parentNode;\r\n//    //    if (p && this.el != el) {    //\r\n//    //        //            var script1 = document.getElementById(\"script1\");\r\n//    //        //            alert(script1);\r\n//    //        //            document.body.appendChild(script1);\r\n\r\n//    //        p.replaceChild(this.el, el);\r\n\r\n//    //        //                        p.insertBefore(this.el, el);\r\n//    //        //                        p.removeChild(el);\r\n\r\n//    //    }\r\n\r\n//    this.set(config);\r\n\r\n\r\n//    //this.doLayout();\r\n\r\n//    this._afterApply(el);\r\n\r\n//    return this;\r\n//}\r\n\r\n//_mini_set = function (config, control) {\r\n//    \r\n//}\r\n\r\nmini.applyTo = function (el) {\r\n    el = mini.byId(el);\r\n    if (!el) return this;\r\n    if (mini.get(el)) throw new Error(\"not applyTo a mini control\");\r\n    //mini.setAttr(el, \"parse\", 1);\r\n\r\n\r\n    var config = this.getAttrs(el);\r\n    delete config._applyTo;\r\n\r\n    if (mini.isNull(config.defaultValue) && !mini.isNull(config.value)) {\r\n        config.defaultValue = config.value;\r\n    }\r\n\r\n    if (mini.isNull(config.defaultText) && !mini.isNull(config.text)) {\r\n        config.defaultText = config.text;\r\n    }\r\n\r\n    var p = el.parentNode;\r\n    if (p && this.el != el) {    //\r\n        //            var script1 = document.getElementById(\"script1\");\r\n        //            alert(script1);\r\n        //            document.body.appendChild(script1);\r\n\r\n        p.replaceChild(this.el, el);\r\n\r\n        //                        p.insertBefore(this.el, el);\r\n        //                        p.removeChild(el);\r\n\r\n    }\r\n\r\n    if (window._mini_set) _mini_set(config, this);    //预处理属性设置\r\n\r\n    this.set(config);\r\n\r\n\r\n    //this.doLayout();\r\n\r\n    this._afterApply(el);\r\n\r\n    return this;\r\n}\r\nmini._doParse = function (el) {\r\n    if (!el) return;\r\n\r\n    //if (el == document.body) alert(\"parse\");\r\n\r\n    var nodeName = el.nodeName.toLowerCase();\r\n    if (!nodeName) return;\r\n\r\n    if (jQuery(el).attr(\"noparser\") != null) return;\r\n\r\n    //if(el.id == \"twin_constrainttype\") debugger\r\n    var className = String(el.className);\r\n    if (className) {\r\n        var control = mini.get(el);\r\n        if (!control) {\r\n            var classes = className.split(\" \");\r\n            for (var i = 0, l = classes.length; i < l; i++) {\r\n                var cls = classes[i];\r\n                var clazz = mini.getClassByUICls(cls);\r\n                if (clazz) {\r\n                    mini.removeClass(el, cls);\r\n                    var ui = new clazz();\r\n\r\n                    mini.applyTo.call(ui, el);\r\n                    el = ui.el;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (nodeName == \"select\"\r\n            || mini.hasClass(el, \"mini-menu\")\r\n            || mini.hasClass(el, \"mini-datagrid\")\r\n            || mini.hasClass(el, \"mini-treegrid\")\r\n            || mini.hasClass(el, \"mini-tree\")\r\n            || mini.hasClass(el, \"mini-button\")\r\n            || mini.hasClass(el, \"mini-textbox\")\r\n            || mini.hasClass(el, \"mini-buttonedit\")\r\n        ) {\r\n        return;\r\n    }\r\n\r\n    var children = mini.getChildNodes(el, true);\r\n    for (var i = 0, l = children.length; i < l; i++) {\r\n        var node = children[i];\r\n        if (node.nodeType == 1) {\r\n            if (node.parentNode == el) {\r\n                mini._doParse(node);\r\n            }\r\n        }\r\n    }\r\n}\r\nmini._Removes = [];\r\nmini._firstParse = true;\r\n//mini._rootParsing = false;\r\n\r\n\r\nmini.parse = function (el, layout) {\r\n    //if (el == document.body) alert(\"parse\");\r\n\r\n    mini.parsed = true;\r\n\r\n    //    if (mini._rootParsing) return;\r\n    //    if (!el || el == document || el == document.body) mini._rootParsing = true;\r\n    if (mini._firstParse) {\r\n\r\n        mini._firstParse = false;\r\n        //alert(2);\r\n        var _doms = document.getElementsByTagName(\"iframe\");\r\n        var doms = [];\r\n        for (var i = 0, l = _doms.length; i < l; i++) {\r\n            var d = _doms[i];\r\n            doms.push(d);\r\n        }\r\n\r\n        for (var i = 0, l = doms.length; i < l; i++) {\r\n            var d = doms[i];\r\n            var src = jQuery(d).attr(\"src\");\r\n            if (!src) continue;\r\n            //jQuery(d).unbind(\"load\");\r\n            //d.parentNode.removeChild(d);\r\n\r\n            //alert(jQuery(d).attr(\"src\"));\r\n\r\n            d.loaded = false;\r\n\r\n            d._onload = d.onload;\r\n            d._src = src;\r\n            d.onload = function () { };\r\n            d.src = \"\";\r\n\r\n            //d.style.display = \"none\";\r\n            //            var t = document.createElement(\"div\");\r\n            //            t.innerHTML = 't';\r\n            //            jQuery(d).before(t);\r\n\r\n            //d._t = t;\r\n            //d.src = \"about:blank\";\r\n            //d.src = false;\r\n        }\r\n        setTimeout(function () {\r\n\r\n            for (var i = 0, l = doms.length; i < l; i++) {\r\n                var d = doms[i];\r\n\r\n                if (d._src && jQuery(d).attr(\"src\") == \"\") {\r\n                    d.loaded = true;\r\n                    d.onload = d._onload;\r\n                    d.src = d._src;\r\n                    d._src = d._onload = null;\r\n\r\n                    //jQuery(d._t).before(d);               \r\n                    //d._t.parentNode.replaceChild(d, d._t);\r\n                }\r\n            }\r\n        }, 20);\r\n\r\n        setTimeout(function () {\r\n\r\n            for (var i = 0, l = doms.length; i < l; i++) {\r\n                var d = doms[i];\r\n                var src = jQuery(d).attr(\"data-src\");\r\n                if (src) {\r\n                    d.src = src;\r\n                }\r\n            }\r\n        }, 30);\r\n\r\n    }\r\n    //document.body.style.display = \"block\";\r\n    if (typeof el == \"string\") {\r\n        var id = el;\r\n        el = mini.byId(id);\r\n        if (!el) el = document.body;\r\n        //        if (!el) {\r\n        //            var context = mini._getParseContext();\r\n        //            if (context && context != document.body) {\r\n        //                el = jQuery(\"#\" + id, context)[0];\r\n        //            }\r\n        //            if (!el) return;\r\n        //        }\r\n    }\r\n    if (el && !mini.isElement(el)) el = el.el;\r\n    if (!el) el = document.body;\r\n    //if (!context) context = el;\r\n\r\n    var visible = mini.WindowVisible;\r\n    if (isIE) {\r\n        mini.WindowVisible = false;\r\n    }\r\n\r\n    //var sss = new Date();\r\n\r\n\r\n    mini._doParse(el);\r\n    //  alert(new Date() - sss);\r\n    mini.WindowVisible = visible;\r\n\r\n    //    for (var i = mini._Removes.length - 1; i >= 0; i--) {\r\n    //        var el = mini._Removes[i];\r\n    //        var p = el.parentNode;\r\n    //        if (p) p.removeChild(el);\r\n    //        mini._Removes.removeAt(i);\r\n    //    }\r\n    if (layout !== false) {\r\n        mini.layout(el);\r\n        //alert(1);\r\n    }\r\n\r\n    //    mini._rootParsing = false;\r\n}\r\n\r\nmini._ParseString = function (el, config, attrs) {\r\n    for (var i = 0, l = attrs.length; i < l; i++) {\r\n        var property = attrs[i];\r\n        //if(property == \"onclick\") debugger\r\n        var value = mini.getAttr(el, property);\r\n        if (value) {\r\n            config[property] = value;\r\n        }\r\n    }\r\n}\r\nmini._ParseBool = function (el, config, attrs) {\r\n    for (var i = 0, l = attrs.length; i < l; i++) {\r\n        var property = attrs[i];\r\n        var value = mini.getAttr(el, property);\r\n        if (value) {\r\n            config[property] = value == \"true\" ? true : false;\r\n        }\r\n    }\r\n}\r\nmini._ParseInt = function (el, config, attrs) {    \r\n    for (var i = 0, l = attrs.length; i < l; i++) {\r\n        var property = attrs[i];\r\n        //if(property == \"maxLength\") debugger\r\n        var value = parseInt(mini.getAttr(el, property));\r\n        if (!isNaN(value)) {\r\n            config[property] = value;\r\n        }\r\n    }\r\n}\r\n\r\n//暂时不特殊处理IE：在IE7下，width/height/style等属性需要特殊处理。这个也节省不了多少时间。\r\n//轻易不要修改，关联影响的东西挺多的\r\n//if (jQuery.browser.msie) {\r\n//    //getAttribute 方法确实提高了一些. IE专用\r\n//    mini._ParseString = function (el, config, attrs) {\r\n//        for (var i = 0, l = attrs.length; i < l; i++) {\r\n//            var property = attrs[i];\r\n//            var value = null;\r\n//            var a = el.attributes[property];\r\n//            if (a) value = a.value;     \r\n//            //if(       \r\n//            if (value) {\r\n//                config[property] = value;\r\n//            }\r\n//        }\r\n//    }\r\n//    mini._ParseBool = function (el, config, attrs) {\r\n//        for (var i = 0, l = attrs.length; i < l; i++) {\r\n//            var property = attrs[i];\r\n//            var value = null;\r\n//            var a = el.attributes[property];\r\n//            if (a) value = a.value;\r\n//            if (value) {\r\n//                config[property] = value == \"true\" ? true : false;\r\n//            }\r\n//        }\r\n//    }\r\n//    mini._ParseInt = function (el, config, attrs) {\r\n//        for (var i = 0, l = attrs.length; i < l; i++) {\r\n//            var property = attrs[i];\r\n//            var value = null;\r\n//            var a = el.attributes[property];\r\n//            if (a) value = a.value;\r\n//            value = parseInt(value);\r\n//            if (!isNaN(value)) {\r\n//                config[property] = value;\r\n//            }\r\n//        }\r\n//    }\r\n//}\r\nmini._ParseColumns = function (el) {\r\n    var columns = [];\r\n    var cs = mini.getChildNodes(el);\r\n    for (var i = 0, l = cs.length; i < l; i++) {\r\n        var node = cs[i];\r\n        //var jq = jQuery(node);\r\n\r\n        var column = {};\r\n\r\n        var editor = null, filter = null;\r\n\r\n        //sub columns\r\n        var subCs = mini.getChildNodes(node);\r\n        if (subCs) {\r\n            for (var ii = 0, li = subCs.length; ii < li; ii++) {\r\n                var subNode = subCs[ii];\r\n                //var property = jQuery(subNode).attr(\"property\");\r\n                var property = mini.getAttr(subNode, \"property\");\r\n                if (!property) continue;\r\n                property = property.toLowerCase();\r\n                if (property == \"columns\") {\r\n                    column.columns = mini._ParseColumns(subNode);\r\n                    //jQuery(subNode).remove();\r\n                    if (subNode.parentNode) subNode.parentNode.removeChild(subNode);\r\n                }\r\n                if (property == \"editor\" || property == \"filter\") {\r\n                    \r\n                    var className = subNode.className;\r\n                    var classes = className.split(\" \");\r\n                    for (var i3 = 0, l3 = classes.length; i3 < l3; i3++) {\r\n                        var cls = classes[i3];\r\n                        var clazz = mini.getClassByUICls(cls);\r\n                        if (clazz) {\r\n                            var ui = new clazz();\r\n\r\n                            if (property == \"filter\") {\r\n                                filter = ui.getAttrs(subNode);\r\n                                filter.type = ui.type;\r\n                            } else {\r\n                                editor = ui.getAttrs(subNode);\r\n                                editor.type = ui.type;\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    //jQuery(subNode).remove();\r\n                    if (subNode.parentNode) subNode.parentNode.removeChild(subNode);\r\n                }\r\n            }\r\n        }\r\n\r\n        column.header = node.innerHTML;\r\n\r\n        //if (column.header == \"资源名称\") debugger\r\n\r\n        mini._ParseString(node, column,\r\n            [\"name\", \"header\", \"field\", \"editor\", \"filter\", \"renderer\", \"width\", \"type\", \"renderer\",\r\n                \"headerAlign\", \"align\", \"headerCls\", \"cellCls\", \"headerStyle\", \"cellStyle\"\r\n                , \"displayField\"\r\n                , \"dateFormat\", \"listFormat\", \"mapFormat\", \"numberFormat\",\r\n                'trueValue', \"falseValue\", \"dataType\", 'vtype', \"currencyUnit\",\r\n                \"summaryType\", \"summaryRenderer\", \"groupSummaryType\", \"groupSummaryRenderer\",\r\n                \"defaultValue\", \"defaultText\", \"decimalPlaces\", \"data-options\", \"sortField\", \"sortType\"\r\n             ]\r\n        );\r\n        mini._ParseBool(node, column,\r\n            [\"allowCellWrap\", \"visible\", \"readOnly\", \"allowSort\", \"allowResize\", \"allowMove\", \"allowDrag\", \"autoShowPopup\",\r\n            \"unique\", \"autoEscape\", \"enabled\", \"hideable\", \"showCellTip\", \"valueFromSelect\", \"navUpdown\"\r\n             ]\r\n        );\r\n        mini._ParseInt(node, column,\r\n            [\"minWidth\"\r\n             ]\r\n        );\r\n        //if(column.field == \"loginname\") debugger\r\n        if (editor) column.editor = editor;\r\n        if (filter) column.filter = filter;\r\n\r\n        if (typeof (column.editor) == \"string\") {\r\n            try {\r\n                column.editor = window[\"ev\" + \"al\"](\"(\" + column.editor + \")\");\r\n            } catch (e) { }\r\n        }\r\n\r\n        if (column.dataType) column.dataType = column.dataType.toLowerCase();\r\n\r\n        if (column.defaultValue === \"true\") column.defaultValue = true;\r\n        if (column.defaultValue === \"false\") column.defaultValue = false;\r\n\r\n        columns.push(column);\r\n\r\n        //data-options\r\n        var options = column[\"data-options\"];\r\n        if (options) {\r\n            options = window[\"ev\" + \"al\"](\"(\" + options + \")\");\r\n            if (options) {\r\n                //attrs[\"data-options\"] = options;\r\n                mini.copyTo(column, options);\r\n            }\r\n        }\r\n    }\r\n\r\n    return columns;\r\n}\r\n\r\n\r\n/* Grid Columns\r\n-----------------------------------------------------------------------------*/\r\n\r\nmini._Columns = {};\r\nmini._getColumn = function (columnType) {\r\n    var columnFn = mini._Columns[columnType.toLowerCase()];\r\n    if (!columnFn) return {};\r\n    return columnFn();\r\n}\r\n\r\n//IndexColumn\r\nmini.IndexColumn = function (config) {\r\n    return mini.copyTo({ ignoreCollapseIndex: false, width: 30, cellCls: \"\", align: \"center\", draggable: false, allowDrag: true, hideable: true,\r\n        init: function (grid) {\r\n            grid.on(\"addrow\", this.__OnIndexChanged, this);\r\n            grid.on(\"removerow\", this.__OnIndexChanged, this);\r\n            grid.on(\"moverow\", this.__OnIndexChanged, this);\r\n\r\n\r\n            //treegrid\r\n            if (grid.isTree) {\r\n\r\n                grid.on(\"addnode\", this.__OnIndexChanged, this);\r\n                grid.on(\"removenode\", this.__OnIndexChanged, this);\r\n                grid.on(\"movenode\", this.__OnIndexChanged, this);\r\n\r\n\r\n                grid.on(\"loadnode\", this.__OnIndexChanged, this);\r\n                this._gridUID = grid.uid;\r\n                this._rowIdField = \"_id\";\r\n            }\r\n        },\r\n        getNumberId: function (record) {\r\n            return this._gridUID + \"$number$\" + record[this._rowIdField];\r\n        },\r\n        createNumber: function (grid, rowIndex) {\r\n            if (mini.isNull(grid.pageIndex)) {\r\n                return rowIndex + 1;\r\n            }\r\n            else return (grid.pageIndex * grid.pageSize) + rowIndex + 1;\r\n        },\r\n        renderer: function (e) {\r\n\r\n            var grid = e.sender;\r\n            if (this.draggable) {\r\n                if (!e.cellStyle) e.cellStyle = \"\";\r\n                e.cellStyle += \";cursor:move;\";\r\n            }\r\n            var s = '<div id=\"' + this.getNumberId(e.record) + '\">';\r\n            var rowIndex = e.rowIndex;\r\n\r\n            if (this.ignoreCollapseIndex) {\r\n                //rowIndex = \r\n            }\r\n\r\n            if (mini.isNull(grid.getPageIndex)) s += rowIndex + 1;\r\n            else s += (grid.getPageIndex() * grid.getPageSize()) + rowIndex + 1;\r\n\r\n            s += '</div>';\r\n            return s;\r\n        },\r\n\r\n        __updateRowNumbers: function (grid) {\r\n            var records = grid.getDataView();\r\n\r\n            for (var i = 0, l = records.length; i < l; i++) {\r\n                var record = records[i];\r\n                var id = this.getNumberId(record);\r\n                var ck = document.getElementById(id);\r\n                if (ck) ck.innerHTML = this.createNumber(grid, i);\r\n            }\r\n            //alert(1);\r\n        },\r\n        __OnIndexChanged: function (e) {\r\n            var grid = e.sender;\r\n\r\n            //            this.__updateRowNumbers(grid);\r\n            //            return;\r\n            var me = this;\r\n            if (me._toIndex) return;\r\n            me._toIndex = setTimeout(function () {\r\n                me._toIndex = null;\r\n                me.__updateRowNumbers(grid);\r\n            }, 10);\r\n        }\r\n    }, config);\r\n}\r\nmini._Columns[\"indexcolumn\"] = mini.IndexColumn;\r\n\r\n//CheckColumn\r\nmini.CheckColumn = function (config) {\r\n    return mini.copyTo(\r\n        { width: 30, cellCls: \"mini-checkcolumn\", headerCls: \"mini-checkcolumn\", hideable: true,\r\n            _multiRowSelect: true,   //\r\n            header: function (column) {\r\n                //if(this.multiSelect == false) debugger\r\n                //                var id = this.uid + \"checkall\";\r\n                //                var s = '<input type=\"checkbox\" id=\"' + id + '\" ' + (column._checkedAll ? 'checked' : '') + '/>';\r\n                //                if (this.multiSelect == false) s = \"\";\r\n                //                return s;\r\n\r\n                var id = this.uid + \"checkall\";\r\n                var cls = column._checkedAll ? \"mini-grid-checkbox-checked\" : \"\";\r\n                var s = '<span class=\"mini-grid-checkbox mini-icon ' + cls + '\" id=\"' + id + '\"></span>';\r\n                if (this.multiSelect == false) s = \"\";\r\n                return s;\r\n            },\r\n            getCheckId: function (record, column) {\r\n                return this._gridUID + \"$checkcolumn$\" + record[this._rowIdField] + \"$\" + column._id;\r\n            },\r\n            init: function (grid) {\r\n\r\n                grid.on(\"_selectchange\", this.__OnSelectionChanged, this);\r\n                grid.on(\"HeaderCellClick\", this.__OnHeaderCellClick, this);\r\n\r\n                var me = this;\r\n                grid.on(\"removerow\", function () {\r\n                    if (grid.data && grid.data.length == 0) {\r\n                        me._doCheckState(grid);\r\n                    }\r\n                });\r\n\r\n                var me = this;\r\n                grid.on(\"load\", function () {\r\n                    var id = grid.uid + \"checkall\";\r\n                    //$(\"#\" + id).removeClass('mini-grid-checkbox-checked');\r\n                    me._doCheckState(grid);\r\n                }, this);\r\n            },\r\n            renderer: function (e) {\r\n                var id = this.getCheckId(e.record, e.column);\r\n                var selected = e.sender.isSelected ? e.sender.isSelected(e.record) : false;\r\n\r\n                var type = \"checkbox\";\r\n\r\n                //                var grid = e.sender;\r\n                //                if (grid.getMultiSelect() == false) type = \"radio\";\r\n\r\n                //                var html = '<input type=\"' + type + '\" id=\"' + id + '\" ' + (selected ? \"checked\" : \"\") + ' hidefocus style=\"outline:none;\" onclick=\"return false\"/>';\r\n                //                html += '<div class=\"mini-grid-radio-mask\"></div>';\r\n                //                return html;                \r\n\r\n\r\n                var grid = e.sender;\r\n                var html = '<span class=\"mini-grid-' + (grid.getMultiSelect() ? 'checkbox' : 'radio') + ' mini-icon\" id=\"' + id + '\"></span>';\r\n                return html;\r\n\r\n            },\r\n            __OnHeaderCellClick: function (e) {\r\n                var grid = e.sender;\r\n                if (e.column != this) return;\r\n                var id = grid.uid + \"checkall\";\r\n                var ck = document.getElementById(id);\r\n                if (ck) {\r\n\r\n                    var checkedCls = 'mini-grid-checkbox-checked';\r\n                    var checked = !mini.hasClass(ck, checkedCls);\r\n                    this._checkedAll = checked;\r\n\r\n                    if (grid.getMultiSelect()) {\r\n                        if (checked) {\r\n                            var list = grid.getDataView();\r\n                            grid.selects(list);\r\n                            mini.addClass(ck, checkedCls);\r\n                            setTimeout(function () {\r\n                                mini.addClass(ck, checkedCls);\r\n                            }, 30);\r\n                        } else {\r\n                            var list = grid.getDataView();\r\n                            grid.deselects(list);\r\n                            mini.removeClass(ck, checkedCls);\r\n                        }\r\n                    } else {\r\n                        grid.deselectAll();\r\n                        if (checked) {\r\n                            grid.select(0);\r\n                            mini.addClass(ck, checkedCls);\r\n                            \r\n                        }\r\n                    }\r\n                    grid.fire(\"checkall\");\r\n                }\r\n            },\r\n            __OnSelectionChanged: function (e) {\r\n\r\n\r\n                var grid = e.sender;\r\n                var records = grid.toArray();\r\n                var me = this;\r\n\r\n\r\n                var virtual = grid.isVirtualScroll(),\r\n                    region = grid._viewRegion,\r\n                    start = (virtual && region) ? region.start : -1,\r\n                    end = region ? region.end : -1,\r\n                    map = {};\r\n\r\n                if (start != -1) {\r\n                    var data = grid.getVisibleRows();\r\n                    for (var i = start, l = end; i < l; i++) {\r\n                        var row = data[i];\r\n                        if (row) map[row._id] = true;\r\n                    }\r\n                }\r\n\r\n\r\n                for (var i = 0, l = records.length; i < l; i++) {\r\n                    var record = records[i];\r\n\r\n                    //continue;\r\n                    if (start != -1) {\r\n                        if (!map[record._id]) continue;\r\n                    }\r\n\r\n                    //                    var select = grid.isSelected(record);\r\n                    //                    var id = me.getCheckId(record, me); //grid.uid + \"$checkcolumn$\" + record[grid._rowIdField];\r\n                    //                    var ck = document.getElementById(id);\r\n\r\n                    //                    if (ck) ck.checked = select;\r\n                }\r\n\r\n                if (!this._timer) {\r\n                    this._timer = setTimeout(function () {\r\n                        me._doCheckState(grid);\r\n                        me._timer = null;\r\n                    }, 10);\r\n                }\r\n            },\r\n            _doCheckState: function (grid) {\r\n\r\n                //处理顶部的checkbox\r\n                var id = grid.uid + \"checkall\";\r\n                var ck = document.getElementById(id);\r\n\r\n                if (ck) {\r\n                    var sels = grid.getSelecteds();\r\n                    //if (sels.length == grid.getData().length) {\r\n\r\n                    var len = grid.isTree ? grid.getList().length : grid.getData().length;\r\n\r\n                    if (sels.length == len && len != 0) {\r\n                        //if (sels.length == len){\r\n                        //ck.checked = true;\r\n                        jQuery(ck).addClass('mini-grid-checkbox-checked');\r\n                    } else {\r\n                        //ck.checked = false;\r\n                        jQuery(ck).removeClass('mini-grid-checkbox-checked');\r\n                    }\r\n                }\r\n\r\n                //                if (ck && grid._getSelectAllCheckState) {\r\n\r\n                //                    var state = grid._getSelectAllCheckState();\r\n                //                    if (state == \"has\") {\r\n                //                        ck.indeterminate = true;\r\n                //                        ck.checked = true;\r\n                //                    } else {\r\n                //                        ck.indeterminate = false;\r\n                //                        ck.checked = state;\r\n                //                    }\r\n                //                }\r\n            }\r\n        }, config);\r\n};\r\nmini._Columns[\"checkcolumn\"] = mini.CheckColumn;\r\n\r\n//ExpandColumn\r\nmini.ExpandColumn = function (config) {\r\n    return mini.copyTo({ width: 30, headerAlign: \"center\", align: \"center\", draggable: false, cellStyle: \"padding:0\", cellCls: \"mini-grid-expandCell\",\r\n        hideable: true,\r\n        renderer: function (e) {\r\n            return '<a class=\"mini-grid-ecIcon mini-icon\" href=\"javascript:#\" onclick=\"return false\"></a>';\r\n        },\r\n        init: function (grid) {\r\n            grid.on(\"cellclick\", this.__OnCellClick, this);\r\n        },\r\n        __OnCellClick: function (e) {\r\n            var grid = e.sender;\r\n            if (e.column == this && grid.isShowRowDetail) {\r\n                if (mini.findParent(e.htmlEvent.target, \"mini-grid-ecIcon\")) {\r\n                    var isShow = grid.isShowRowDetail(e.record);\r\n\r\n                    if (!isShow) {\r\n                        e.cancel = false;\r\n                        grid.fire(\"beforeshowrowdetail\", e);\r\n                        if (e.cancel === true) return;\r\n                    } else {\r\n                        e.cancel = false;\r\n                        grid.fire(\"beforehiderowdetail\", e);\r\n                        if (e.cancel === true) return;\r\n                    }\r\n\r\n                    if (grid.autoHideRowDetail) {\r\n                        grid.hideAllRowDetail();\r\n                    }\r\n                    if (isShow) {\r\n                        grid.hideRowDetail(e.record);\r\n                    } else {\r\n                        grid.showRowDetail(e.record);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, config);\r\n}\r\nmini._Columns[\"expandcolumn\"] = mini.ExpandColumn;\r\n\r\n//checkboxcolumn\r\nmini.CheckBoxColumn = function (config) {\r\n    return mini.copyTo({\r\n        _type: \"checkboxcolumn\", editMode: \"inline\",    //inlineEdit: true?\r\n        header: \"\", headerAlign: \"center\",\r\n        //cellCls: \"mini-checkcolumn\", \r\n        trueValue: true, falseValue: false,\r\n        readOnly: false,\r\n        getCheckId: function (record, column) {\r\n            return this._gridUID + \"$checkbox$\" + record[this._rowIdField] + \"$\" + column._id;\r\n        },\r\n        getCheckBoxEl: function (record, column) {\r\n            return document.getElementById(this.getCheckId(record, column));\r\n        },\r\n        isChecked: function (record, column) {\r\n            var ck = this.getCheckBoxEl(record, column);\r\n            return jQuery(ck).hasClass('mini-grid-checkbox-checked');\r\n        },\r\n        renderer: function (e) {\r\n            var id = this.getCheckId(e.record, e.column);\r\n            //var v = e.record[e.field];\r\n            var v = mini._getMap(e.field, e.record);\r\n            var checked = v == this.trueValue ? true : false;\r\n            //var type = \"checkbox\";\r\n\r\n            //if (this.grid.multiSelect == false) type = \"radio\";\r\n            //return '<input type=\"' + type + '\" id=\"' + id + '\" ' + (checked ? \"checked\" : \"\") + ' hidefocus style=\"outline:none;\" onclick=\"return false;\"/>';\r\n\r\n            return '<span  id=\"' + id + '\" class=\"mini-grid-checkbox mini-icon ' + (checked ? \"mini-grid-checkbox-checked\" : \"\") + '\"></span>';\r\n        },\r\n        //        __getValue: function (v) {\r\n        //            var value = v == this.trueValue ? this.falseValue : this.trueValue;\r\n        //            return value;\r\n        //        },\r\n        init: function (grid) {\r\n            this.grid = grid;\r\n            function oneditchange(e) {\r\n                if (grid.isReadOnly() || this.readOnly) return;\r\n                e.value = mini._getMap(e.field, e.record); //e.record[e.field];\r\n                grid.fire(\"cellbeginedit\", e);\r\n\r\n                if (e.cancel !== true) {\r\n\r\n                    //                    var v = mini._getMap(e.column.field, e.record);\r\n                    //                    var value = v == this.trueValue ? this.falseValue : this.trueValue;\r\n                    //alert(value);\r\n                    var v = mini._getMap(e.column.field, e.record);\r\n                    var value = v == this.trueValue ? this.falseValue : this.trueValue;\r\n\r\n                    if (grid._OnCellCommitEdit) {\r\n                        grid._OnCellCommitEdit(e.record, e.column, value);\r\n                        grid._OnCellEndEdit(e.record, e.column);\r\n                        //                                var checked = value == this.trueValue;\r\n                        //                                setTimeout(function () {\r\n                        //                                    ck.checked = checked;\r\n                        //                                    alert(checked);\r\n                        //                                }, 1);\r\n                    }\r\n                }\r\n            }\r\n            function onEdit(e) {\r\n\r\n                if (e.column == this) {\r\n                    var id = this.getCheckId(e.record, e.column);\r\n                    var ck = e.htmlEvent.target;\r\n                    if (ck.id == id) {\r\n                        if (grid.allowCellEdit) {\r\n                            e.cancel = false;\r\n                            oneditchange.call(this, e);\r\n                        } else {\r\n                            if (this.readOnly) return;\r\n                            e.value = mini._getMap(e.column.field, e.record); //e.record[e.field];\r\n                            grid.fire(\"cellbeginedit\", e);\r\n                            if (e.cancel == true) return;\r\n                            if (grid.isEditingRow && grid.isEditingRow(e.record)) {\r\n                                setTimeout(function () {\r\n                                    //ck.checked = !ck.checked;\r\n\r\n                                    jQuery(ck).toggleClass('mini-grid-checkbox-checked');\r\n\r\n                                }, 1);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            grid.on(\"cellclick\", onEdit, this);\r\n            mini.on(this.grid.el, \"keydown\", function (e) {\r\n\r\n                if (e.keyCode == 32 && grid.allowCellEdit) {\r\n                    var currentCell = grid.getCurrentCell();\r\n                    if (!currentCell) return;\r\n                    if (currentCell[1] != this) return;\r\n\r\n                    var ex = { record: currentCell[0], column: currentCell[1] };\r\n                    ex.field = ex.column.field;\r\n\r\n                    oneditchange.call(this, ex);\r\n                    e.preventDefault();\r\n                }\r\n            }, this);\r\n\r\n\r\n            var tv = parseInt(this.trueValue), fv = parseInt(this.falseValue);\r\n            if (!isNaN(tv)) this.trueValue = tv;\r\n            if (!isNaN(fv)) this.falseValue = fv;\r\n\r\n            if (this.trueValue == \"true\") this.trueValue = true;\r\n            if (this.falseValue == \"false\") this.falseValue = false;\r\n        }\r\n    }, config);\r\n};\r\nmini._Columns[\"checkboxcolumn\"] = mini.CheckBoxColumn;\r\n\r\n\r\n//radiobuttoncolumn\r\nmini.RadioButtonColumn = function (config) {\r\n    return mini.copyTo({\r\n        _type: \"radiobuttoncolumn\", editMode: \"inline\",\r\n        header: \"\", headerAlign: \"center\",\r\n        //cellCls: \"mini-checkcolumn\", \r\n        trueValue: true, falseValue: false,\r\n        readOnly: false,\r\n        getCheckId: function (record, column) {\r\n            return this._gridUID + \"$radio$\" + record[this._rowIdField] + \"$\" + column._id;\r\n        },\r\n        getCheckBoxEl: function (record, column) {\r\n            return document.getElementById(this.getCheckId(record, column));\r\n        },\r\n        renderer: function (e) {\r\n            var grid = e.sender;\r\n            var id = this.getCheckId(e.record, e.column);\r\n            var v = mini._getMap(e.field, e.record);\r\n            var checked = v == this.trueValue ? true : false;\r\n            var type = \"radio\";\r\n            var name = grid._id + e.column.field;\r\n\r\n            var disabled = '';\r\n            //            if (!grid.allowCellEdit) {\r\n            //                disabled = ' disabled ';\r\n            //            }\r\n//            var s = '<div style=\"position:relative;\">';\r\n//            s += '<input name=\"' + name + '\" type=\"' + type + '\" id=\"' + id + '\" ' + (checked ? \"checked\" : \"\") + ' hidefocus style=\"outline:none;\" onclick=\"return false;\" style=\"position:relative;z-index:1;\"/>';\r\n//            if (!grid.allowCellEdit) {\r\n//                if (!grid.isEditingRow(e.record)) {\r\n//                    s += '<div class=\"mini-grid-radio-mask\"></div>';\r\n//                }\r\n//            }\r\n//            s += '</div>';\r\n//            return s;\r\n\r\n            return '<span id=\"' + id + '\" class=\"mini-grid-radio ' + (checked ? \"mini-grid-radio-checked\" : \"\") + '\"></span>';\r\n\r\n            \r\n        },\r\n        //        __getValue: function (v) {\r\n        //            var value = v == this.trueValue ? this.falseValue : this.trueValue;\r\n        //            return value;\r\n        //        },\r\n        init: function (grid) {\r\n            this.grid = grid;\r\n\r\n            function oneditchange(e) {\r\n                if (grid.isReadOnly() || this.readOnly) return;\r\n                e.value = mini._getMap(e.field, e.record); //e.record[e.field];\r\n                grid.fire(\"cellbeginedit\", e);\r\n\r\n                if (e.cancel !== true) {\r\n                    var v = mini._getMap(e.column.field, e.record);\r\n                    if (v == this.trueValue) return;\r\n                    var value = v == this.trueValue ? this.falseValue : this.trueValue;\r\n\r\n                    //将其他行设置false\r\n                    var data = grid.getData();\r\n\r\n                    for (var i = 0, l = data.length; i < l; i++) {\r\n                        var row = data[i];\r\n                        if (row == e.record) continue;\r\n                        var v = mini._getMap(e.column.field, row);\r\n                        if (v != this.falseValue) {\r\n\r\n                            //var o = {};\r\n                            //mini._setMap(e.column.field, this.falseValue, o);\r\n\r\n                            grid.updateRow(row, e.column.field, this.falseValue);\r\n                        }\r\n                    }\r\n\r\n                    if (grid._OnCellCommitEdit) {\r\n                        grid._OnCellCommitEdit(e.record, e.column, value);\r\n\r\n                        grid._OnCellEndEdit(e.record, e.column);\r\n                    }\r\n                }\r\n            }\r\n            function onEdit(e) {\r\n                if (e.column == this) {\r\n                    \r\n                    var id = this.getCheckId(e.record, e.column);\r\n                    var ck = e.htmlEvent.target;\r\n                    if (ck.id == id) {\r\n                        if (grid.allowCellEdit) {\r\n                            e.cancel = false;\r\n                            oneditchange.call(this, e);\r\n                        } else {\r\n                            \r\n\r\n                            if (grid.isEditingRow && grid.isEditingRow(e.record)) {\r\n                                var that = this;\r\n                                setTimeout(function () {\r\n                                    ck.checked = true;\r\n\r\n                                    //将其他行设置false\r\n                                    var data = grid.getData();\r\n                                    for (var i = 0, l = data.length; i < l; i++) {\r\n                                        var row = data[i];\r\n                                        if (row == e.record) continue;\r\n                                        var field = e.column.field;\r\n                                        var v = mini._getMap(field, row);\r\n                                        if (v != that.falseValue) {\r\n                                            if (row != e.record) {\r\n                                                if (grid._dataSource) {\r\n                                                    mini._setMap(e.column.field, that.falseValue, row);\r\n                                                    grid._dataSource._setModified(row, field, v);\r\n                                                } else {\r\n                                                    var o = {};\r\n                                                    mini._setMap(field, that.falseValue, o);\r\n                                                    grid._doUpdateRow(row, o);\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n\r\n\r\n                                }, 1);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            grid.on(\"cellclick\", onEdit, this);\r\n\r\n            mini.on(this.grid.el, \"keydown\", function (e) {\r\n                if (e.keyCode == 32 && grid.allowCellEdit) {\r\n                    var currentCell = grid.getCurrentCell();\r\n                    if (!currentCell) return;\r\n                    if (currentCell[1] != this) return;\r\n                    var ex = { record: currentCell[0], column: currentCell[1] };\r\n                    ex.field = ex.column.field;\r\n                    oneditchange.call(this, ex);\r\n                    e.preventDefault();\r\n                }\r\n            }, this);\r\n\r\n\r\n            var tv = parseInt(this.trueValue), fv = parseInt(this.falseValue);\r\n            if (!isNaN(tv)) this.trueValue = tv;\r\n            if (!isNaN(fv)) this.falseValue = fv;\r\n        }\r\n    }, config);\r\n};\r\nmini._Columns[\"radiobuttoncolumn\"] = mini.RadioButtonColumn;\r\n\r\nfunction listColumnRenderer(e) {\r\n    var column = e.column;\r\n    var value = !mini.isNull(e.value) ? String(e.value) : \"\";\r\n    var values = value.split(\",\");\r\n\r\n    var valueField = \"id\", textField = \"text\";\r\n    var valueMaps = {};\r\n\r\n    var editor = column.editor;\r\n    var _editor = column.__editor;\r\n\r\n    if (editor) {\r\n        // var _editor = this.__editor;\r\n        \r\n        // debugger\r\n        if (!_editor && (editor.type == \"combobox\" || editor.type == \"treeselect\")) {\r\n            \r\n            if (mini.isControl(editor)) {\r\n                _editor = editor;\r\n            } else {\r\n                editor = mini.clone(editor);\r\n                _editor = mini.create(editor);          //如果没有editor控件对象，则马上创建，并同步加载数据\r\n            }\r\n            e.column.__editor = _editor;\r\n        }\r\n\r\n        valueField = _editor.getValueField();\r\n        textField = _editor.getTextField();\r\n\r\n        var data = _editor.getData();\r\n\r\n        valueMaps = column._valueMaps;\r\n        if (!valueMaps || data !== column._data) {\r\n            \r\n            var list = _editor.getList ? _editor.getList() : data;      //如果是tree则用list生成valueMaps\r\n\r\n            valueMaps = {};\r\n            for (var i = 0, l = list.length; i < l; i++) {\r\n                var o = list[i];\r\n                valueMaps[o[valueField]] = o;\r\n            }\r\n\r\n            column._valueMaps = valueMaps;\r\n            column._data = data;\r\n        }\r\n    }\r\n\r\n    var texts = [];\r\n    for (var i = 0, l = values.length; i < l; i++) {\r\n        var id = values[i];\r\n        var o = valueMaps[id];\r\n        if (o) {\r\n            var text = o[textField];\r\n            if (text === null || text === undefined) {\r\n                text = \"\";\r\n            }\r\n            texts.push(text);\r\n        }\r\n    }\r\n    //if (texts.length == 0) debugger\r\n     if (texts.length == 0 && column.valueFromSelect === false) {\r\n        return value;\r\n    }\r\n    return texts.join(',');\r\n}\r\n\r\n//ComboBoxColumn\r\nmini.ComboBoxColumn = function (config) {\r\n    return mini.copyTo(\r\n        {\r\n            renderer: listColumnRenderer\r\n        }, config);\r\n};\r\nmini._Columns[\"comboboxcolumn\"] = mini.ComboBoxColumn;\r\n\r\n///////////////treeselectColumn/////////////////////////////////////////////////////////////\r\nmini.TreeSelectColumn = function (config) {\r\n    return mini.copyTo(\r\n        {\r\n            renderer: listColumnRenderer\r\n\r\n        }, config);\r\n};\r\nmini._Columns[\"treeselectcolumn\"] = mini.TreeSelectColumn;\r\n\r\n////ComboBoxColumn\r\n//mini.ComboBoxColumn = function (config) {\r\n//    return mini.copyTo(\r\n//        {\r\n//            renderer: function (e) {\r\n//                var value = !mini.isNull(e.value) ? String(e.value) : \"\";\r\n//                var values = value.split(\",\");\r\n\r\n//                var valueField = \"id\", textField = \"text\";\r\n//                var valueMaps = {};\r\n\r\n//                var editor = e.column.editor;\r\n//                if (editor && editor.type == \"combobox\") {\r\n//                    var combo = this.__editor;\r\n//                    if (!combo) {\r\n\r\n//                        if (mini.isControl(editor)) {\r\n//                            combo = editor;\r\n//                        } else {\r\n//                            editor = mini.clone(editor);\r\n//                            combo = mini.create(editor); //必须同步加载combobox\r\n//                        }\r\n//                        this.__editor = combo;\r\n//                    }\r\n\r\n//                    valueField = combo.getValueField();\r\n//                    textField = combo.getTextField();\r\n\r\n//                    var data = combo.getData();\r\n//                    valueMaps = this._valueMaps;\r\n//                    if (!valueMaps || data !== this._data) {\r\n//                        \r\n//                        valueMaps = {};                        \r\n//                        for (var i = 0, l = data.length; i < l; i++) {\r\n//                            var o = data[i];\r\n//                            valueMaps[o[valueField]] = o;\r\n//                        }\r\n//                        this._valueMaps = valueMaps;\r\n//                        this._data = data;\r\n//                    }\r\n//                }\r\n\r\n//                var texts = [];\r\n//                for (var i = 0, l = values.length; i < l; i++) {\r\n//                    var id = values[i];\r\n//                    var o = valueMaps[id];\r\n//                    if (o) {\r\n//                        var text = o[textField];\r\n//                        if (text === null || text === undefined) {\r\n//                            text = \"\";\r\n//                        }\r\n//                        texts.push(text);\r\n//                    }\r\n//                }\r\n//                return texts.join(',');\r\n//            }\r\n//        }, config);\r\n//};\r\n//mini._Columns[\"comboboxcolumn\"] = mini.ComboBoxColumn;\r\n\r\n\r\n\r\n/* Resizer\r\n-----------------------------------------------------------------------------*/\r\nmini._Resizer = function (grid) {\r\n    this.owner = grid;\r\n    mini.on(this.owner.el, \"mousedown\", this.__OnMouseDown, this);\r\n}\r\nmini._Resizer.prototype = {\r\n    __OnMouseDown: function (e) {\r\n\r\n        var has = mini.hasClass(e.target, \"mini-resizer-trigger\");\r\n        if (has && this.owner.allowResize) {\r\n            var drag = this._getResizeDrag();\r\n            drag.start(e);\r\n        }\r\n    },\r\n    _getResizeDrag: function () {\r\n        if (!this._resizeDragger) {\r\n            this._resizeDragger = new mini.Drag({\r\n                capture: true,\r\n                onStart: mini.createDelegate(this._OnDragStart, this),\r\n                onMove: mini.createDelegate(this._OnDragMove, this),\r\n                onStop: mini.createDelegate(this._OnDragStop, this)\r\n            });\r\n        }\r\n        return this._resizeDragger;\r\n    },\r\n    _OnDragStart: function (drag) {\r\n\r\n        this.mask = mini.append(document.body, '<div class=\"mini-resizer-mask mini-fixed\"></div>');\r\n\r\n        this.proxy = mini.append(document.body, '<div class=\"mini-resizer-proxy\"></div>');\r\n        this.proxy.style.cursor = \"se-resize\";\r\n\r\n        var el = this.owner.el;\r\n        el.offsetWidth; //reflow\r\n\r\n        this.elBox = mini.getBox(el);\r\n        mini.setBox(this.proxy, this.elBox);\r\n    },\r\n    _OnDragMove: function (drag) {\r\n        var grid = this.owner;\r\n        var xOffset = drag.now[0] - drag.init[0];\r\n        var yOffset = drag.now[1] - drag.init[1];\r\n\r\n        var w = this.elBox.width + xOffset;\r\n        var h = this.elBox.height + yOffset;\r\n        if (w < grid.minWidth) w = grid.minWidth;\r\n        if (h < grid.minHeight) h = grid.minHeight;\r\n        if (w > grid.maxWidth) w = grid.maxWidth;\r\n        if (h > grid.maxHeight) h = grid.maxHeight;\r\n\r\n        mini.setSize(this.proxy, w, h);\r\n    },\r\n    _OnDragStop: function (drag, success) {\r\n        if (!this.proxy) return;\r\n        var box = mini.getBox(this.proxy);\r\n\r\n        jQuery(this.mask).remove();\r\n        jQuery(this.proxy).remove();\r\n        this.proxy = null;\r\n        this.elBox = null;\r\n\r\n        if (success) {\r\n            this.owner.setWidth(box.width);\r\n            this.owner.setHeight(box.height);\r\n            this.owner.fire(\"resize\");\r\n        }\r\n    }\r\n};\r\n\r\n\r\n/////////////////////////////////////////\r\n//function __UnLoadIFrame() {\r\n//    \r\n//}\r\nmini._topWindow = null;\r\nmini._getTopWindow = function (hasMini) {\r\n    if (mini._topWindow) return mini._topWindow;\r\n    var ps = [];\r\n    function getParents(me) {\r\n        try {\r\n            me[\"___try\"] = 1;                   //chrome下设置不会异常\r\n            if (me[\"___try\"] == 1) ps.push(me); //取值时会有异常（这个技术是客户反馈的）\r\n        } catch (ex) {\r\n        }\r\n        if (me.parent && me.parent != me) {\r\n            getParents(me.parent);\r\n        }\r\n    }\r\n    getParents(window);\r\n    mini._topWindow = ps[ps.length - 1];\r\n    return mini._topWindow;\r\n}\r\n\r\nvar __ps = mini.getParams();\r\n\r\nif (__ps._winid) {\r\n    try {\r\n        window.Owner = mini._getTopWindow()[__ps._winid];\r\n    } catch (ex) {\r\n    }\r\n}\r\n\r\n//if (window.Owner) {\r\n//    setTimeout(function () {\r\n//        alert(window.Owner.location);\r\n//    }, 100);\r\n//}\r\n\r\nmini._WindowID = \"w\" + Math.floor(Math.random() * 10000);\r\nmini._getTopWindow()[mini._WindowID] = window;\r\n\r\nmini.iframeParams = {};         //mini.iframeParams.MenuNo=52;\r\n\r\nmini.createIFrame = function (url, onIFrameLoad, cache, method, params) {\r\n    //alert(method + \":\" + params);\r\n\r\n    /*var iframe = document.createElement('iframe');\r\n    iframe.src = url;\r\n        \r\n    function onload () {\r\n    alert(\"aaa111\");\r\n    }\r\n\r\n    if (iframe.attachEvent) {\r\n    iframe.attachEvent('onload', onload);\r\n    } else {\r\n    iframe.onload = onload;\r\n    }\r\n    return iframe;*/\r\n\r\n\r\n    if (!url) url = \"\";\r\n    var urls = url.split(\"#\");\r\n    url = urls[0];\r\n\r\n\r\n    //修改url\r\n    var t = \"\";\r\n    if (cache !== true) {\r\n        //_t\r\n        t = '_t=' + Math.floor(Math.random() * 1000000); // \"&_winid=\" + mini._WindowID;\r\n\r\n        if (url.indexOf(\"?\") == -1) {\r\n            url += \"?\" + t;\r\n        } else {\r\n            url += \"&\" + t;\r\n        }\r\n    }\r\n\r\n    //_winid\r\n    if (url && url.indexOf(\"_winid\") == -1) {\r\n        var t = \"_winid=\" + mini._WindowID;\r\n        if (url.indexOf(\"?\") == -1) {\r\n            url += \"?\" + t;\r\n        } else {\r\n            url += \"&\" + t;\r\n        }\r\n    }\r\n\r\n    if (mini.iframeParams) {\r\n        for (var name in mini.iframeParams) {\r\n            url += '&' + name + '=' + mini.iframeParams[name];\r\n        }\r\n    }\r\n\r\n\r\n    if (urls[1]) {\r\n        url = url + \"#\" + urls[1];\r\n    }\r\n\r\n    var isMHT = url.indexOf(\".mht\") != -1;\r\n    var src = isMHT ? url : '';\r\n\r\n    var iframeName = mini.newId('mini-iframe-');\r\n\r\n    //window server版本下，是否用js绑定onload事件会比较好\r\n    var s = '<iframe name=\"' + iframeName + '\" src=\"' + (method == 'post' ? '' : src) + '\" style=\"width:100%;height:100%;\"  frameborder=\"0\"></iframe>';\r\n    //alert(method == 'post');\r\n\r\n    var div = document.createElement(\"div\");\r\n    var iframe = mini.append(div, s);\r\n    //iframe.src = \"\";\r\n    var canFireLoad = false;\r\n    if (isMHT) {\r\n        canFireLoad = true;\r\n    } else {\r\n        setTimeout(function () {\r\n            if (iframe) {\r\n                if (method != 'post') {\r\n                    iframe.src = url;\r\n                }\r\n                canFireLoad = true;\r\n            }\r\n        }, 5);\r\n    }\r\n\r\n    //iframe.onload = __OnLoad;                 \r\n    if (iframe.attachEvent) {\r\n        iframe.attachEvent('onload', __OnLoad);\r\n    } else {\r\n        iframe.onload = __OnLoad;\r\n    }\r\n\r\n    var destroyed = false;\r\n\r\n    //load\r\n    var firstLoad = true;\r\n    function __OnLoad() {\r\n\r\n        if (canFireLoad == false || destroyed) return;\r\n        //alert(\"onload\");\r\n        setTimeout(function () {\r\n\r\n            if (onIFrameLoad) onIFrameLoad(iframe, firstLoad);\r\n            firstLoad = false;\r\n            //onload = null;\r\n            //iframe.onload = null;\r\n            //\r\n        }, 1);\r\n    }\r\n\r\n    //destroy\r\n    iframe._ondestroy = function () {\r\n\r\n        //window[fnName] = mini.emptyFn;\r\n        destroyed = true;\r\n\r\n        iframe.src = \"\";\r\n        if (mini.isIE) {\r\n            try {\r\n                iframe.contentWindow.document.write(\"\");\r\n                iframe.contentWindow.document.close();\r\n            } catch (ex) { }\r\n        }\r\n        iframe._ondestroy = null;\r\n        iframe = null;\r\n\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////\r\n\r\n    var form;\r\n    if (method == \"post\") {\r\n\r\n        function createForm() {\r\n            return jQuery(\"<form />\")\r\n                    .attr({\r\n                        method: \"post\",\r\n                        action: url,\r\n                        enctype: \"multipart/form-data\",\r\n                        target: iframe.name\r\n                    })\r\n\t\t\t\t.hide()\r\n\t\t\t\t.appendTo(\"body\");\r\n        }\r\n\r\n        form = createForm();\r\n\r\n        setTimeout(function () {\r\n            form.submit();\r\n        }, 10);\r\n\r\n\r\n    }\r\n\r\n\r\n    return iframe;\r\n}\r\n\r\n//mini.__IFrameCreateCount = 1;\r\n//mini.createIFrame = function (url, onIFrameLoad, cache) {\r\n//    //    var iframe = document.createElement('iframe');\r\n//    //    iframe.src = '1.mht';\r\n//    //    //document.body.appendChild(iframe);\r\n//    //    return iframe;\r\n//    //    return;\r\n\r\n//    var fnName = \"__iframe_onload\" + mini.__IFrameCreateCount++;\r\n//    window[fnName] = __OnLoad;\r\n\r\n//    if (!url) url = \"\";\r\n//    var urls = url.split(\"#\");\r\n//    url = urls[0];\r\n\r\n\r\n//    //修改url\r\n//    var t = \"\";\r\n//    if (cache !== true) {\r\n//        //_t\r\n//        t = '_t=' + Math.floor(Math.random() * 1000000); // \"&_winid=\" + mini._WindowID;\r\n\r\n//        if (url.indexOf(\"?\") == -1) {\r\n//            url += \"?\" + t;\r\n//        } else {\r\n//            url += \"&\" + t;\r\n//        }\r\n//    }\r\n\r\n//    //_winid\r\n//    if (url && url.indexOf(\"_winid\") == -1) {\r\n//        var t = \"_winid=\" + mini._WindowID;\r\n//        if (url.indexOf(\"?\") == -1) {\r\n//            url += \"?\" + t;\r\n//        } else {\r\n//            url += \"&\" + t;\r\n//        }\r\n//    }\r\n\r\n\r\n//    if (urls[1]) {\r\n//        url = url + \"#\" + urls[1];\r\n//    }\r\n\r\n//    var isMHT = url.indexOf(\".mht\") != -1;\r\n//    var src = isMHT ? url : '';\r\n\r\n//    //window server版本下，是否用js绑定onload事件会比较好\r\n//    var s = '<iframe src=\"' + src + '\" style=\"width:100%;height:100%;\" onload=\"' + fnName + '()\"  frameborder=\"0\"></iframe>';\r\n\r\n//    var div = document.createElement(\"div\");\r\n//    var iframe = mini.append(div, s);\r\n//    //iframe.src = \"\";\r\n//    var canFireLoad = false;\r\n//    if (isMHT) {\r\n//        canFireLoad = true;\r\n//    } else {\r\n//        setTimeout(function () {\r\n//            if (iframe) {\r\n//                iframe.src = url;\r\n//                canFireLoad = true;\r\n//            }\r\n//        }, 5);\r\n//    }\r\n\r\n//    //load\r\n//    var firstLoad = true;\r\n//    function __OnLoad() {\r\n\r\n//        if (canFireLoad == false) return;\r\n\r\n//        setTimeout(function () {\r\n//            if (onIFrameLoad) onIFrameLoad(iframe, firstLoad);\r\n//            firstLoad = false;\r\n//            //onload = null;\r\n//            //iframe.onload = null;\r\n//            //\r\n//        }, 1);\r\n//    }\r\n\r\n//    //destroy\r\n//    iframe._ondestroy = function () {\r\n\r\n//        window[fnName] = mini.emptyFn;\r\n\r\n//        iframe.src = \"\";\r\n//        try {\r\n//            iframe.contentWindow.document.write(\"\");\r\n//            iframe.contentWindow.document.close();\r\n//        } catch (ex) { }\r\n//        iframe._ondestroy = null;\r\n//        iframe = null;\r\n\r\n//    }\r\n\r\n\r\n//    //    iframe.onunload = function () {\r\n\r\n//    //        if (ondestroy) ondestroy(iframe);\r\n//    //        iframe.src = \"\";\r\n//    //        iframe = null;\r\n//    //        iframe.onunload = null;\r\n//    //    }\r\n//    //    iframe._ondestroy = function () {\r\n//    //        var ret = true;\r\n//    //        if (ondestroy) ret = ondestroy(iframe);\r\n\r\n//    //        if (ret !== false) {\r\n//    //            window[fnName] = mini.emptyFn;\r\n\r\n//    //            iframe.src = \"\";\r\n//    //            iframe._ondestroy = null;\r\n//    //            iframe = null;\r\n//    //        }\r\n//    //        return ret;\r\n//    //    }\r\n\r\n//    return iframe;\r\n//}\r\n\r\n\r\n\r\n\r\nmini._doOpen = function (options) {\r\n    if (typeof options == \"string\") {\r\n        options = { url: options };\r\n    }\r\n\r\n    options = mini.copyTo({\r\n        width: 700,\r\n        height: 400,\r\n        allowResize: true,\r\n        allowModal: true,\r\n        closeAction: \"destroy\",\r\n\r\n        title: \"\",\r\n        titleIcon: \"\",\r\n        iconCls: \"\",\r\n        iconStyle: \"\",\r\n        bodyStyle: \"padding: 0\",\r\n\r\n        url: \"\",\r\n\r\n        showCloseButton: true,\r\n        showFooter: false\r\n    }, options);\r\n\r\n    options.closeAction = \"destroy\";\r\n\r\n    var onload = options.onload;\r\n    delete options.onload;\r\n    var ondestroy = options.ondestroy;\r\n    delete options.ondestroy;\r\n    var url = options.url;\r\n    delete options.url;\r\n\r\n    var box = mini.getViewportBox();\r\n    if (options.width && String(options.width).indexOf('%') != -1) {\r\n        var w = parseInt(options.width);\r\n        options.width = parseInt(box.width * (w / 100));\r\n    }\r\n    if (options.height && String(options.height).indexOf('%') != -1) {\r\n        var h = parseInt(options.height);\r\n        options.height = parseInt(box.height * (h / 100));\r\n    }\r\n\r\n    var win = new mini.Window();\r\n    win.set(options);\r\n\r\n    win.load(url,\r\n        onload,\r\n        ondestroy\r\n    );\r\n    win.show();\r\n\r\n    if (mini.isIE) {\r\n        setTimeout(function () {\r\n            fixIEFocus();\r\n        }, 100);\r\n    }\r\n\r\n    return win;\r\n}\r\n\r\n//ie11下，弹出后关闭，主页面会失去焦点，无法选中文本和输入框，需要特殊处理下。\r\nfunction fixIEFocus() {\r\n    var vbox = mini.getViewportBox();\r\n    var input = document.createElement(\"input\");\r\n    //input.style.cssText = \"position:absolute;left:-1000px;top:-1000px;\";\r\n    input.style.cssText = \"position:absolute;left:\" + vbox.left + \"px;top:\" + vbox.top + \"px;\";\r\n    document.body.appendChild(input);\r\n    input.focus();\r\n    input.parentNode.removeChild(input);\r\n}\r\n\r\nmini.getTopWindow = function () {\r\n    var ps = [];\r\n    function getParents(me) {\r\n        try {\r\n            if (me.mini) ps.push(me);\r\n            if (me.parent && me.parent != me) {\r\n                getParents(me.parent);\r\n            }\r\n        } catch (ex) { }\r\n    }\r\n    getParents(window);\r\n\r\n    var win = ps[ps.length - 1];\r\n    return win;\r\n}\r\n\r\nmini.open = function (options) {\r\n    if (!options) return;\r\n\r\n    var url = options.url;\r\n    if (!url) url = \"\";\r\n    var urls = url.split(\"#\");\r\n    var url = urls[0];\r\n\r\n    if (url && url.indexOf(\"_winid\") == -1) {\r\n        var t = \"_winid=\" + mini._WindowID;\r\n        if (url.indexOf(\"?\") == -1) {\r\n            url += \"?\" + t;\r\n        } else {\r\n            url += \"&\" + t;\r\n        }\r\n        if (urls[1]) {\r\n            url = url + \"#\" + urls[1];\r\n        }\r\n    }\r\n\r\n    options.url = url;\r\n\r\n    options.Owner = window;\r\n    var ps = [];\r\n    function getParents(me) {\r\n        try {\r\n            if (me.mini) ps.push(me);\r\n            if (me.parent && me.parent != me) {\r\n                getParents(me.parent);\r\n            }\r\n        } catch (ex) { }\r\n    }\r\n    getParents(window);\r\n\r\n    var win = ps[ps.length - 1];\r\n    if (options.targetWindow) win = options.targetWindow;\r\n    return win[\"mini\"]._doOpen(options);\r\n}\r\nmini.openTop = mini.open;\r\n\r\n//////////////////////////////\r\n\r\nmini._getResult = function (url, params, success, error, type, dataField) {\r\n    var xhr = null;\r\n    var text = mini.getText(url, params, function (text, o) {\r\n        xhr = o;\r\n        if (success) if (success) success(text, o);\r\n    }, error, type);\r\n\r\n    var obj = { text: text, result: null, sender: { type: '' }, options: { url: url, data: params, type: type }, xhr: xhr };\r\n    var result = null;\r\n    try {\r\n        mini_doload(obj);\r\n        result = obj.result;\r\n        if (!result) {\r\n            result = mini.decode(text);\r\n        }\r\n    } catch (ex) {\r\n        if (mini_debugger == true) {\r\n            alert(url + \"\\njson is error\");\r\n        }\r\n    }\r\n\r\n    if (!mini.isArray(result) && dataField) result = mini._getMap(dataField, result);\r\n\r\n    if (mini.isArray(result)) {\r\n        result = { data: result };\r\n    } \r\n\r\n    return result ? result.data : null;\r\n}\r\nmini.getData = function (url, params, success, error, type) {\r\n    var text = mini.getText(url, params, success, error, type);\r\n    var data = mini.decode(text);\r\n    return data;\r\n}\r\nmini.getText = function (url, params, success, error, type) {\r\n    \r\n    var returnText = null;\r\n    mini.ajax({\r\n        url: url,\r\n        data: params,\r\n        async: false,\r\n        type: type ? type : \"get\",\r\n        cache: false,\r\n        dataType: \"text\",\r\n        success: function (text, textStatus, xhr) {\r\n            returnText = text;\r\n            if (success) success(text, xhr);\r\n        },\r\n        error: error\r\n    });\r\n    return returnText;\r\n}\r\n\r\n////////////////////////////////////\r\n//JSPath, RootPath\r\nif (!window.mini_RootPath) {\r\n    mini_RootPath = \"/\";\r\n}\r\nmini_CreateJSPath = function (js) {\r\n    var scripts = document.getElementsByTagName(\"script\");\r\n    var path = \"\";\r\n    for (var i = 0, l = scripts.length; i < l; i++) {\r\n        var src = scripts[i].src;\r\n        if (src.indexOf(js) != -1) {\r\n            var ss = src.split(js);\r\n            path = ss[0];\r\n            break;\r\n        }\r\n    }\r\n    var href = location.href;\r\n    href = href.split(\"#\")[0];\r\n    href = href.split(\"?\")[0];\r\n    var ss = href.split(\"/\");\r\n    ss.length = ss.length - 1;\r\n    href = ss.join(\"/\");\r\n\r\n    if (path.indexOf(\"http:\") == -1 && path.indexOf(\"file:\") == -1) {\r\n        path = href + \"/\" + path;\r\n    }\r\n    return path;\r\n}\r\nif (!window.mini_JSPath) {\r\n    mini_JSPath = mini_CreateJSPath(\"miniui.js\");\r\n}\r\n\r\n/////////////////////////////////////\r\n//加载页面片段HTML：是否处理css，javascipt？\r\n//内部，销毁元素内部的所有组件对象，保持低内存。\r\nmini.update = function (options, el) {\r\n    if (typeof options == \"string\") options = { url: options };\r\n    if (el) options.el = el;\r\n    var html = mini.loadText(options.url);\r\n    mini.innerHTML(options.el, html);\r\n    mini.parse(options.el);\r\n}\r\n//mini.update = function (options, el) {\r\n//    if (typeof options == \"string\") options = { url: options };\r\n//    if (el) options.el = el;\r\n//    options = mini.copyTo({\r\n//        el: null,\r\n//        url: \"\",\r\n//        async: false,\r\n//        type: \"get\",\r\n//        cache: false,\r\n//        dataType: \"text\",\r\n//        success: function (text) {\r\n//            var el = options.el;\r\n//            if (el) {\r\n//                //处理CSS、js后。。。\r\n\r\n//                //el.innerHTML = text;\r\n//                jQuery(el).html(text);\r\n//                mini.parse(el);\r\n//            }\r\n//        },\r\n//        error: function (jqXHR, textStatus, errorThrown) {\r\n\r\n//        }\r\n//    }, options);\r\n\r\n//    jQuery.ajax(options);\r\n//}\r\n\r\n\r\n///////////////////////////////////////////////////\r\nmini.createSingle = function (Type) {\r\n    if (typeof Type == \"string\") {\r\n        Type = mini.getClass(Type);\r\n    }\r\n    if (typeof Type != \"function\") return;\r\n    var obj = Type.single;\r\n    if (!obj) {\r\n        obj = Type.single = new Type();\r\n    }\r\n    return obj;\r\n}\r\nmini.createTopSingle = function (Type) {\r\n    if (typeof Type != \"function\") return;\r\n    \r\n    var typeName = Type.prototype.type;\r\n    if (top && top != window && top.mini && top.mini.getClass(typeName)) {\r\n        return top.mini.createSingle(typeName);\r\n    } else {\r\n        return mini.createSingle(Type);\r\n    }\r\n}\r\n\r\n\r\n////////////////////////////////////////////////////////\r\nmini.sortTypes = {\r\n//    \"chinese\": function (s) {\r\n//        \r\n//    },\r\n    \"string\": function (s) {\r\n        return String(s).toUpperCase();\r\n    },\r\n    \"date\": function (s) {\r\n        if (!s) {\r\n            return 0;\r\n        }\r\n        if (mini.isDate(s)) {\r\n            return s.getTime();\r\n        }\r\n        return mini.parseDate(String(s));\r\n    },\r\n    \"float\": function (s) {\r\n        var val = parseFloat(String(s).replace(/,/g, \"\"));\r\n        return isNaN(val) ? 0 : val;\r\n    },\r\n    \"int\": function (s) {\r\n        var val = parseInt(String(s).replace(/,/g, \"\"), 10);\r\n        return isNaN(val) ? 0 : val;\r\n    },\r\n    \"currency\": function (s) {\r\n        var val = parseFloat(String(s).replace(/,/g, \"\"));\r\n        return isNaN(val) ? 0 : val;\r\n    }\r\n};\r\n\r\n////////////////////////////////////////////////\r\nmini._ValidateVType = function (vtype, value, e, scope) {\r\n    var vtypes = vtype.split(\";\");\r\n    \r\n    for (var i = 0, l = vtypes.length; i < l; i++) {\r\n        var vtype = vtypes[i].trim();\r\n        var vv = vtype.split(\":\");\r\n        var vt = vv[0];\r\n        \r\n        var args = vtype.substr(vt.length+1, 1000); //vv[1];\r\n        if (args) args = args.split(\",\");\r\n        else args = [];\r\n\r\n        var fn = mini.VTypes[vt];\r\n        if (fn) {\r\n            var isValid = fn(value, args);\r\n            if (isValid !== true) {\r\n                e.isValid = false;\r\n                var vtext = vv[0] + \"ErrorText\";\r\n                e.errorText = scope[vtext] || mini.VTypes[vtext] || \"\";\r\n                e.errorText = String.format(e.errorText, args[0], args[1], args[2], args[3], args[4]);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\nmini._getErrorText = function (obj, field) {\r\n    if(obj && obj[field]){\r\n        return  obj[field];\r\n    }else{\r\n        return mini.VTypes[field]\r\n    }\r\n    \r\n}\r\nmini.VTypes = {\r\n    minDateErrorText: 'Date can not be less than {0}',\r\n    maxDateErrorText: 'Date can not be greater than {0}',\r\n\r\n    uniqueErrorText: \"This field is unique.\",\r\n    requiredErrorText: \"This field is required.\",\r\n    emailErrorText: \"Please enter a valid email address.\",\r\n    urlErrorText: \"Please enter a valid URL.\",\r\n    floatErrorText: \"Please enter a valid number.\",\r\n    intErrorText: \"Please enter only digits\",\r\n    dateErrorText: \"Please enter a valid date. Date format is {0}\",\r\n    maxLengthErrorText: \"Please enter no more than {0} characters.\",\r\n    minLengthErrorText: \"Please enter at least {0} characters.\",\r\n    maxErrorText: \"Please enter a value less than or equal to {0}.\",\r\n    minErrorText: \"Please enter a value greater than or equal to {0}.\",\r\n    rangeLengthErrorText: \"Please enter a value between {0} and {1} characters long.\",\r\n    rangeCharErrorText: \"Please enter a value between {0} and {1} characters long.\",\r\n    rangeErrorText: \"Please enter a value between {0} and {1}.\",\r\n\r\n    required: function (v, args) {\r\n        if (mini.isNull(v) || v === \"\") return false;\r\n        return true;\r\n    },\r\n    email: function (v, args) {\r\n        if (mini.isNull(v) || v === \"\") return true;\r\n        if (v.search(/^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$/) != -1)\r\n            return true;\r\n        else\r\n            return false;\r\n    },\r\n    url: function (v, args) {\r\n\r\n        //http://a.aaa.com:90\r\n        //129.1.1.1:89\r\n\r\n        if (mini.isNull(v) || v === \"\") return true;\r\n        function IsURL(str_url) {\r\n            str_url = str_url.toLowerCase().split(\"?\")[0];\r\n\r\n            //            var re = new RegExp(\"[0-9a-z]{1,100}\");\r\n            //            if (re.test(str_url)) return false;\r\n\r\n            var strRegex = \"^((https|http|ftp|rtsp|mms)?:\\/\\/)?\"\r\n            //+ \"(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?\" //ftp的user@   \r\n                        + \"(([0-9]{1,3}\\.){3}[0-9]{1,3}\" // IP形式的URL- 199.194.52.184   \r\n                        + \"|\" // 允许IP和DOMAIN（域名）  \r\n                        + \"([0-9a-z_!~*'()-]+\\.)*\" // 域名- www.   \r\n                        + \"([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\\.\" // 二级域名   \r\n                        + \"[a-z]{2,6})\" // first level domain- .com or .museum   \r\n                        + \"(:[0-9]{1,5})?\" // 端口- :80\r\n                        + \"((/?)|\" // a slash isn't required if there is no file name   \r\n                        + \"(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$\";\r\n            var re = new RegExp(strRegex);\r\n\r\n            if (re.test(str_url)) {\r\n                return (true);\r\n            } else {\r\n                return (false);\r\n            }\r\n        }\r\n        return IsURL(v);\r\n    },\r\n    \"int\": function (v, args) {\r\n        if (mini.isNull(v) || v === \"\") return true;\r\n        //if (String(v).indexOf(0) == 0) return false;\r\n        function isInteger(s) {\r\n            if (s < 0) {\r\n                s = -s;\r\n            }\r\n            var n = String(s);\r\n            return n.length > 0 && !(/[^0-9]/).test(n);\r\n        }\r\n        return isInteger(v);\r\n        //        var v2 = parseInt(v);\r\n        //        if (isNaN(v2)) return false;\r\n        //        return typeof v2 == 'number' && String(v) == String(v2);\r\n    },\r\n    \"float\": function (v, args) {\r\n\r\n        if (mini.isNull(v) || v === \"\") return true;\r\n        //if (v.indexOf(0) == 0) return false;\r\n        function isFloat(s) {\r\n            //debugger\r\n\r\n            //            if (typeof s == 'string') {\r\n            //                \r\n            //                return;\r\n            //            }\r\n\r\n            //            if (typeof s == 'number') {\r\n            //                if (s < 0) {\r\n            //                    s = -s;\r\n            //                }\r\n            //            }\r\n            var n = String(s);\r\n\r\n            //if (n == '-') return false;\r\n            if (n.indexOf(\"-\") != -1 && n.indexOf(\"-\") != 0) return false;\r\n\r\n            n = n.replace('-', '');\r\n\r\n            if (n.split(\".\").length > 2) return false;\r\n            //return n.length > 0 && !(/[^0-9.]/).test(n); // && (/\\.\\d/).test(n);\r\n\r\n\r\n            return n.length > 0 && !(/[^0-9.]/).test(n) && !(n.charAt(n.length - 1) == \".\");\r\n        }\r\n        return isFloat(v);\r\n        //        var v2 = parseFloat(v);\r\n        //        if (isNaN(v2)) return false;\r\n        //        return typeof v2 == 'number' && v == v2;\r\n    },\r\n    \"date\": function (v, args) {\r\n\r\n        if (mini.isNull(v) || v === \"\") return true;\r\n        if (!v) return false;\r\n        var d = null;\r\n        var format = args[0];\r\n\r\n        if (format) {\r\n            d = mini.parseDate(v, format);\r\n            if (d && d.getFullYear) {\r\n                if (mini.formatDate(d, format) == v) return true;\r\n            }\r\n        } else {\r\n            d = mini.parseDate(v, \"yyyy-MM-dd\");\r\n            if (!d) d = mini.parseDate(v, \"yyyy/MM/dd\");\r\n            if (!d) d = mini.parseDate(v, \"MM/dd/yyyy\");\r\n            if (d && d.getFullYear) return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    maxLength: function (v, args) {\r\n        if (mini.isNull(v) || v === \"\") return true;\r\n        var n = parseInt(args);\r\n        if (!v || isNaN(n)) return true;\r\n        if (v.length <= n) return true;\r\n        else return false;\r\n    },\r\n    minLength: function (v, args) {\r\n        if (mini.isNull(v) || v === \"\") return true;\r\n        var n = parseInt(args);\r\n        if (isNaN(n)) return true;\r\n        if (v.length >= n) return true;\r\n        else return false;\r\n    },\r\n    rangeLength: function (v, args) {\r\n        if (mini.isNull(v) || v === \"\") return true;\r\n        if (!v) return false;\r\n        var min = parseFloat(args[0]), max = parseFloat(args[1]);\r\n        if (isNaN(min) || isNaN(max)) return true;\r\n        if (min <= v.length && v.length <= max) return true;\r\n        return false;\r\n    },\r\n    rangeChar: function (v, args) {\r\n        if (mini.isNull(v) || v === \"\") return true;\r\n        //if (!v) return false;\r\n        var min = parseFloat(args[0]), max = parseFloat(args[1]);\r\n        if (isNaN(min) || isNaN(max)) return true;\r\n\r\n        function isChinese(v) {\r\n            var re = new RegExp(\"^[\\u4e00-\\u9fa5]+$\");\r\n            if (re.test(v)) return true;\r\n            return false;\r\n        }\r\n\r\n        var len = 0;\r\n        var ss = String(v).split(\"\");\r\n        for (var i = 0, l = ss.length; i < l; i++) {\r\n            if (isChinese(ss[i])) {\r\n                len += 2;\r\n            } else {\r\n                len += 1;\r\n            }\r\n        }\r\n\r\n        if (min <= len && len <= max) return true;\r\n        return false;\r\n    },\r\n    range: function (v, args) {\r\n        if (mini.VTypes[\"float\"](v, args) == false) return false;\r\n        if (mini.isNull(v) || v === \"\") return true;\r\n        v = parseFloat(v);\r\n        if (isNaN(v)) return false;\r\n        var min = parseFloat(args[0]), max = parseFloat(args[1]);\r\n        if (isNaN(min) || isNaN(max)) return true;\r\n        if (min <= v && v <= max) return true;\r\n        return false;\r\n    },\r\n    min: function (v, args) {\r\n        if (mini.VTypes[\"float\"](v, args) == false) return false;\r\n        if (mini.isNull(v) || v === \"\") return true;\r\n        v = parseFloat(v);\r\n        if (isNaN(v)) return false;\r\n        var min = parseFloat(args[0]);\r\n        if (isNaN(min)) return true;\r\n        if (min <= v) return true;\r\n        return false;\r\n    },\r\n    max: function (v, args) {\r\n        if (mini.VTypes[\"float\"](v, args) == false) return false;\r\n        if (mini.isNull(v) || v === \"\") return true;\r\n        v = parseFloat(v);\r\n        if (isNaN(v)) return false;\r\n        var max = parseFloat(args[0]);\r\n        if (isNaN(max)) return true;\r\n        if (v <= max) return true;\r\n        return false;\r\n    }\r\n};\r\n\r\n\r\nmini.summaryTypes = {\r\n    \"count\": function (data) {\r\n        if (!data) data = [];\r\n        return data.length;\r\n    },\r\n    \"max\": function (data, field) {\r\n        if (!data) data = [];\r\n        var max = null;\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var o = data[i];\r\n            //var value = parseFloat(o[field]);\r\n            var value = parseFloat(mini._getMap(field, o));\r\n            if (value === null || value === undefined || isNaN(value)) continue;\r\n            if (max == null || max < value) {\r\n                max = value;\r\n            }\r\n        }\r\n        return max;\r\n    },\r\n    \"min\": function (data, field) {\r\n        if (!data) data = [];\r\n        var min = null;\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var o = data[i];\r\n            //var value = parseFloat(o[field]);\r\n            var value = parseFloat(mini._getMap(field, o));\r\n            if (value === null || value === undefined || isNaN(value)) continue;\r\n            if (min == null || min > value) {\r\n                min = value;\r\n            }\r\n        }\r\n        return min;\r\n    },\r\n    \"avg\": function (data, field) {\r\n        if (!data) data = [];\r\n        if (data.length == 0) return 0;\r\n        var total = 0;\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var o = data[i];\r\n            //var value = parseFloat(o[field]);\r\n            var value = parseFloat(mini._getMap(field, o));\r\n            if (value === null || value === undefined || isNaN(value)) continue;\r\n            total += value;\r\n        }\r\n        var v = total / data.length;\r\n        return v;\r\n    },\r\n    \"sum\": function (data, field) {\r\n        if (!data) data = [];\r\n        var total = 0;\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var o = data[i];\r\n            //var value = parseFloat(o[field]);\r\n            var value = parseFloat(mini._getMap(field, o));\r\n            if (value === null || value === undefined || isNaN(value)) continue;\r\n            total += value;\r\n        }\r\n        return total;\r\n    }\r\n};\r\n\r\n\r\nmini.formatCurrency = function (num, prefix) {\r\n    if (num === null || num === undefined) null == \"\";\r\n    num = String(num).replace(/\\$|\\,/g, '');\r\n    if (isNaN(num)) {\r\n        num = \"0\";\r\n    }\r\n    sign = (num == (num = Math.abs(num)));\r\n    num = Math.floor(num * 100 + 0.50000000001);\r\n    cents = num % 100;\r\n    num = Math.floor(num / 100).toString();\r\n    if (cents < 10) {\r\n        cents = \"0\" + cents;\r\n    }\r\n    for (var i = 0; i < Math.floor((num.length - (1 + i)) / 3); i++) {\r\n        num = num.substring(0, num.length - (4 * i + 3)) + ',' + num.substring(num.length - (4 * i + 3));\r\n    }\r\n    prefix = prefix || '';\r\n    return prefix + (((sign) ? '' : '-') + num + '.' + cents);\r\n}\r\n\r\n//var num = 9988812345.123;\r\n//alert(formatCurrency(num, \"￥\"));\r\n\r\n\r\nmini.getByUid = mini.getbyUID;\n\r\n/**\r\n拖拽基类\r\n    mouse.init:     初始鼠标点击坐标\r\n    mouse.now:      当前鼠标坐标\r\n    events: onStart, onMove, onStop    \r\n*/\r\nmini.emptyFn = function () { };\r\nmini.Drag = function (options) {\r\n    mini.copyTo(this, options);\r\n};\r\nmini.Drag.prototype = {\r\n    onStart: mini.emptyFn,\r\n    onMove: mini.emptyFn,\r\n    onStop: mini.emptyFn,\r\n    capture: false,\r\n    fps: 20,\r\n    event: null,\r\n    delay: 80,\r\n\r\n    //调用start的时候,鼠标已经按下去了.\t\r\n    start: function (e) {\r\n        \r\n        e.preventDefault();\r\n        if (e) this.event = e;\r\n\r\n        this.now = this.init = [this.event.pageX, this.event.pageY];  //初始时的mouse坐标\t    \r\n\r\n        var bd = document;\r\n        mini.on(bd, 'mousemove', this.move, this);\r\n        mini.on(bd, 'mouseup', this.stop, this);\r\n        mini.on(bd, 'contextmenu', this.contextmenu, this);\r\n        if (this.context) mini.on(this.context, 'contextmenu', this.contextmenu, this);\r\n\r\n        this.trigger = e.target; //e.trigger;\r\n        mini.selectable(this.trigger, false);\r\n        mini.selectable(bd.body, false);\r\n\r\n        if (this.capture) {//ie下,为true的时候,鼠标指针不能得到界面上的do元素\r\n            if (isIE) this.trigger.setCapture(true);\r\n            else if (document.captureEvents) document.captureEvents(Event.MOUSEMOVE | Event.MOUSEUP | Event.MOUSEDOWN);\r\n        }\r\n        this.started = false;\r\n\r\n        //定制一个延迟事件\r\n        this.startTime = new Date();\r\n    },\r\n    contextmenu: function (e) {\r\n        if (this.context) mini.un(this.context, 'contextmenu', this.contextmenu, this);\r\n        mini.un(document, 'contextmenu', this.contextmenu, this);\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    },\r\n    move: function (e) {\r\n        if (this.delay) { //如果有延迟配置,则判断当前是否超过了延迟时间\r\n            if (new Date() - this.startTime < this.delay) return;\r\n        }\r\n\r\n        //2)\r\n\r\n\r\n        //处理!!!        \r\n\r\n        var sf = this;\r\n\r\n        if (!this.timer) {\r\n            this.timer = setTimeout(function () {\r\n\r\n                if (!sf.started) {\r\n                    sf.started = true;\r\n                    sf.onStart(sf);             //在第一次move的时候,才开始onStart\t        \r\n                }\r\n\r\n\r\n                sf.now = [e.pageX, e.pageY]//e.xy.clone();             //移动中的鼠标坐标\t  \r\n                sf.event = e;\r\n                sf.onMove(sf);\r\n                sf.timer = null;\r\n            }, 5);\r\n        }\r\n    },\r\n    stop: function (e) {\r\n        \r\n        this.now = [e.pageX, e.pageY]//e.xy.clone();             //移动中的鼠标坐标\r\n        this.event = e;\r\n\r\n        if (this.timer) {\r\n            clearTimeout(this.timer);\r\n            this.timer = null;\r\n        }\r\n        var bd = document;\r\n\r\n        mini.selectable(this.trigger, true);\r\n        mini.selectable(bd.body, true);\r\n\r\n        if (isIE) {\r\n            this.trigger.setCapture(false);\r\n            this.trigger.releaseCapture();\r\n        }\r\n        //        if (this.capture) {\r\n        //            if (isIE) this.trigger.releaseCapture();\r\n        //            else if (document.captureEvents) document.releaseEvents(Event.MOUSEMOVE | Event.MOUSEUP | Event.MOUSEDOWN);\r\n        //        }\r\n\r\n        var success = mini.MouseButton.Right != e.button;\r\n        if (success == false) {\r\n            e.preventDefault();\r\n\r\n        }\r\n\r\n        //if (this.capture == false) {   \r\n        //if (isIE) this.trigger.setCapture(false);            \r\n        //}\r\n\r\n        mini.un(bd, 'mousemove', this.move, this);\r\n        mini.un(bd, 'mouseup', this.stop, this);\r\n        var sf = this;\r\n        setTimeout(function () {\r\n            mini.un(document, 'contextmenu', sf.contextmenu, sf);\r\n            if (sf.context) mini.un(sf.context, 'contextmenu', sf.contextmenu, sf);\r\n        }, 1);\r\n\r\n        //if (this.started || isIE9) this.onStop(this, success);\r\n        if (this.started) this.onStop(this, success);\r\n    }\r\n};\r\n\n\r\nmini.JSON = new (function () {\r\n    var sb = [];\r\n    var _dateFormat = null;\r\n    var useHasOwn = !!{}.hasOwnProperty,\r\n        replaceString = function (a, b) {\r\n\r\n            var c = m[b];\r\n            if (c) {\r\n\r\n                //sb[sb.length] = c;\r\n                return c;\r\n            }\r\n            c = b.charCodeAt();\r\n            return \"\\\\u00\" + Math.floor(c / 16).toString(16) + (c % 16).toString(16);\r\n\r\n        },\r\n        doEncode = function (o, field) {\r\n\r\n            if (o === null) {\r\n                sb[sb.length] = \"null\";\r\n                return;\r\n            }\r\n            var t = typeof o;\r\n            if (t == \"undefined\") {\r\n                sb[sb.length] = \"null\";\r\n                return;\r\n            } else if (o.push) {    //array\r\n\r\n                sb[sb.length] = '[';\r\n                var b, i, l = o.length, v;\r\n                for (i = 0; i < l; i += 1) {\r\n                    v = o[i];\r\n                    t = typeof v;\r\n                    if (t == \"undefined\" || t == \"function\" || t == \"unknown\") {\r\n                    } else {\r\n                        if (b) {\r\n                            sb[sb.length] = ',';\r\n                        }\r\n                        doEncode(v);\r\n\r\n                        b = true;\r\n                    }\r\n                }\r\n                sb[sb.length] = ']';\r\n                return;\r\n            } else if (o.getFullYear) {\r\n                if (_dateFormat) {\r\n                    sb[sb.length] = '\"';\r\n                    if (typeof _dateFormat == 'function') {\r\n                        sb[sb.length] = _dateFormat(o, field);\r\n                    } else {\r\n                        sb[sb.length] = mini.formatDate(o, _dateFormat);\r\n                    }\r\n                    sb[sb.length] = '\"';\r\n                } else {\r\n                    var n;\r\n                    sb[sb.length] = '\"';\r\n                    sb[sb.length] = o.getFullYear();\r\n                    sb[sb.length] = \"-\";\r\n                    n = o.getMonth() + 1;\r\n                    sb[sb.length] = n < 10 ? \"0\" + n : n;\r\n                    sb[sb.length] = \"-\";\r\n                    n = o.getDate();\r\n                    sb[sb.length] = n < 10 ? \"0\" + n : n;\r\n                    sb[sb.length] = \"T\"\r\n                    n = o.getHours();\r\n                    sb[sb.length] = n < 10 ? \"0\" + n : n;\r\n                    sb[sb.length] = \":\"\r\n                    n = o.getMinutes();\r\n                    sb[sb.length] = n < 10 ? \"0\" + n : n;\r\n                    sb[sb.length] = \":\"\r\n                    n = o.getSeconds();\r\n                    sb[sb.length] = n < 10 ? \"0\" + n : n;\r\n                    sb[sb.length] = '\"';\r\n                }\r\n                return;\r\n            } else if (t == \"string\") {\r\n                if (strReg1.test(o)) {\r\n                    sb[sb.length] = '\"';\r\n\r\n                    sb[sb.length] = o.replace(strReg2, replaceString);\r\n                    sb[sb.length] = '\"';\r\n                    return;\r\n                }\r\n                sb[sb.length] = '\"' + o + '\"';\r\n                return;\r\n            } else if (t == \"number\") {\r\n                sb[sb.length] = o;\r\n                return;\r\n            } else if (t == \"boolean\") {\r\n                sb[sb.length] = String(o);\r\n                return;\r\n            } else {    //object\r\n                sb[sb.length] = \"{\";\r\n                var b, i, v;\r\n                for (i in o) {\r\n                    //if (!useHasOwn || (o.hasOwnProperty && o.hasOwnProperty(i))) {\r\n                    if (!useHasOwn || Object.prototype.hasOwnProperty.call(o, i)) {\r\n\r\n                        v = o[i];\r\n                        t = typeof v;\r\n                        if (t == \"undefined\" || t == \"function\" || t == \"unknown\") {\r\n                        } else {\r\n                            if (b) {\r\n                                sb[sb.length] = ',';\r\n                            }\r\n                            doEncode(i);\r\n                            sb[sb.length] = \":\";\r\n                            doEncode(v, i)\r\n\r\n                            b = true;\r\n                        }\r\n                    }\r\n                }\r\n                sb[sb.length] = \"}\";\r\n                return;\r\n            }\r\n        },\r\n        m = {\r\n            \"\\b\": '\\\\b',\r\n            \"\\t\": '\\\\t',\r\n            \"\\n\": '\\\\n',\r\n            \"\\f\": '\\\\f',\r\n            \"\\r\": '\\\\r',\r\n            '\"': '\\\\\"',\r\n            \"\\\\\": '\\\\\\\\'\r\n        },\r\n        strReg1 = /[\"\\\\\\x00-\\x1f]/,\r\n        strReg2 = /([\\x00-\\x1f\\\\\"])/g;\r\n\r\n    this.encode = function () {\r\n\r\n        var ec;\r\n        return function (o, dateFormat) {\r\n            sb = [];\r\n\r\n            _dateFormat = dateFormat;\r\n            doEncode(o);\r\n\r\n            _dateFormat = null;\r\n\r\n            return sb.join(\"\");\r\n        };\r\n    } ();\r\n    this.decode = function () {\r\n\r\n        //        var dateRe1 = /(\\d{4})-(\\d{2})-(\\d{2})[T ](\\d{2}):(\\d{2}):(\\d{2})/g;\r\n        //        var dateRe2 = new RegExp('\\/Date\\\\(([0-9]+)\\\\)\\/', 'g');\r\n        //var dateRe2 = new RegExp('\\/Date\\((\\d+)\\)\\/', 'g');\r\n\r\n\r\n        //\"2000-11-12 11:22:33\", \"2000-05-12 11:22:33\", \"2008-01-11T12:22:00\", \"2008-01-11T12:22:00.111Z\"\r\n\r\n\r\n        var dateRe1 = /^(\\d{4})-(\\d{2})-(\\d{2})[T ](\\d{2}):(\\d{2}):(\\d{2}(?:\\.*\\d*)?)Z*$/;\r\n        //\"\\/Date(1382101422005)\\/\", \"//Date(1034000000000)//\", \"/Date(1034000000000+0800)/\"\r\n        var dateRe2 = new RegExp('^\\/+Date\\\\((-?[0-9]+)\\.*\\\\)\\/+$', 'g');\r\n\r\n        var re = /[\\\"\\'](\\d{4})-(\\d{1,2})-(\\d{1,2})[T ](\\d{1,2}):(\\d{1,2}):(\\d{1,2})(\\.*\\d*)[\\\"\\']/g;\r\n\r\n        return function (json, parseDate) {\r\n            if (json === \"\" || json === null || json === undefined) return json;\r\n\r\n            if (typeof json == 'object') {  //不应该序列化，应该遍历处理日期字符串\r\n                json = this.encode(json);\r\n            }\r\n\r\n            function evalParse(json) {\r\n                if (parseDate !== false) {\r\n\r\n                    //json = json.replace(__js_dateRegEx, \"$1new Date($2)\");\r\n\r\n                    json = json.replace(__js_dateRegEx, \"$1new Date($2)\");\r\n                    json = json.replace(re, \"new Date($1,$2-1,$3,$4,$5,$6)\");\r\n                    json = json.replace(__js_dateRegEx2, \"new Date($1)\");\r\n                }\r\n                return window[\"ev\" + \"al\"]('(' + json + ')');\r\n            }\r\n\r\n\r\n            var data = null;\r\n\r\n\r\n            if (window.JSON && window.JSON.parse) {\r\n                \r\n                var dateReviver = function (key, value) {\r\n                    if (typeof value === 'string' && parseDate !== false) {\r\n                        //dateRe1\r\n                        dateRe1.lastIndex = 0;\r\n                        var a = dateRe1.exec(value);\r\n                        if (a) {\r\n                            value = new Date(a[1], a[2] - 1, a[3], a[4], a[5], a[6]);\r\n\r\n                            return value;\r\n                        }\r\n                        //dateRe2\r\n                        dateRe2.lastIndex = 0;\r\n                        var a = dateRe2.exec(value);\r\n                        if (a) {\r\n                            value = new Date(parseInt(a[1]));\r\n\r\n                            return value;\r\n                        }\r\n                    }\r\n                    return value;\r\n                };\r\n\r\n                try {\r\n                    var json2 = json.replace(__js_dateRegEx, \"$1\\\"\\/Date($2)\\/\\\"\");\r\n                    data = window.JSON.parse(json2, dateReviver);\r\n                } catch (ex) {\r\n                    data = evalParse(json);\r\n                }\r\n\r\n            } else {\r\n\r\n                data = evalParse(json);\r\n            }\r\n            return data;\r\n        };\r\n\r\n    } ();\r\n\r\n})();\r\n__js_dateRegEx = new RegExp('(^|[^\\\\\\\\])\\\\\"\\\\\\\\/Date\\\\((-?[0-9]+)(?:[a-zA-Z]|(?:\\\\+|-)[0-9]{4})?\\\\)\\\\\\\\/\\\\\"', \"g\");\r\n__js_dateRegEx2 = new RegExp('[\\\"\\']\\/Date\\\\(([0-9]+)\\\\)\\/[\\\"\\']', 'g');\r\nmini.encode = mini.JSON.encode;\r\nmini.decode = mini.JSON.decode;\r\n\r\nmini.clone = function (o, _clear) {\r\n    if (o === null || o === undefined) return o;\r\n    var json = mini.encode(o);\r\n    var obj = mini.decode(json);\r\n\r\n    function clearProp(arr) {\r\n        for (var i = 0, l = arr.length; i < l; i++) {\r\n            var o = arr[i];\r\n            delete o._state;\r\n            delete o._id;\r\n            delete o._pid;\r\n            delete o._uid;\r\n            for (var p in o) {\r\n                var v = o[p];\r\n                if (v instanceof Array) clearProp(v);\r\n            }\r\n        }\r\n    }\r\n    if (_clear !== false) {\r\n        clearProp(obj instanceof Array ? obj : [obj]);\r\n    }\r\n\r\n    return obj;\r\n}\n\r\n\r\n\r\n/* Date\r\n-----------------------------------------------------------------------------*/\r\n\r\nvar DAY_MS = 86400000,\r\n\tHOUR_MS = 3600000,\r\n\tMINUTE_MS = 60000;\r\n\r\nmini.copyTo(mini, {\r\n    clearTime: function (date) {\r\n        if (!date) return null;\r\n        return new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n    },\r\n    maxTime: function (date) {\r\n        if (!date) return null;\r\n        return new Date(date.getFullYear(), date.getMonth(), date.getDate(), 23, 59, 59);\r\n    },\r\n    cloneDate: function (date) {\r\n        if (!date) return null;\r\n        return new Date(date.getTime());\r\n    },\r\n    addDate: function (date, num, type) {\r\n        if (!type) type = \"D\";\r\n        date = new Date(date.getTime());\r\n        switch (type.toUpperCase()) {\r\n            case \"Y\":\r\n                date.setFullYear(date.getFullYear() + num);\r\n                break;\r\n            case \"MO\":\r\n                date.setMonth(date.getMonth() + num);\r\n                break;\r\n            case \"D\":\r\n                date.setDate(date.getDate() + num);\r\n                break;\r\n            case \"H\":\r\n                date.setHours(date.getHours() + num);\r\n                break;\r\n            case \"M\":\r\n                date.setMinutes(date.getMinutes() + num);\r\n                break;\r\n            case \"S\":\r\n                date.setSeconds(date.getSeconds() + num);\r\n                break;\r\n            case \"MS\":\r\n                date.setMilliseconds(date.getMilliseconds() + num);\r\n                break;\r\n        }\r\n        return date;\r\n    },\r\n    getWeek: function (year, month, day) {\r\n        //month += 1; //use 1-12            //结果不对，代码注释掉了\r\n\r\n        var a = Math.floor((14 - (month)) / 12);\r\n        var y = year + 4800 - a;\r\n        var m = (month) + (12 * a) - 3;\r\n        var jd = day + Math.floor(((153 * m) + 2) / 5) +\r\n                     (365 * y) + Math.floor(y / 4) - Math.floor(y / 100) +\r\n                     Math.floor(y / 400) - 32045;\r\n\r\n        var d4 = (jd + 31741 - (jd % 7)) % 146097 % 36524 % 1461;\r\n        var L = Math.floor(d4 / 1460);\r\n        var d1 = ((d4 - L) % 365) + L;\r\n        NumberOfWeek = Math.floor(d1 / 7) + 1;\r\n        return NumberOfWeek;\r\n    },\r\n    //获得日期本周第一天的日期\r\n    getWeekStartDate: function (date, weekStartDay) {\r\n        if (!weekStartDay) weekStartDay = 0;\r\n        if (weekStartDay > 6 || weekStartDay < 0) throw new Error(\"out of weekday\");\r\n        var day = date.getDay();\r\n        var num = weekStartDay - day;\r\n        if (day < weekStartDay) {\r\n            num -= 7;\r\n        }\r\n        var d = new Date(date.getFullYear(), date.getMonth(), date.getDate() + num);\r\n        return d;\r\n    },\r\n    getShortWeek: function (week) {\r\n        var weeks = this.dateInfo.daysShort;\r\n        return weeks[week];\r\n    },\r\n    getLongWeek: function (week) {\r\n        var weeks = this.dateInfo.daysLong;\r\n        return weeks[week];\r\n    },\r\n    getShortMonth: function (month) {\r\n        var months = this.dateInfo.monthsShort;\r\n        return months[month];\r\n    },\r\n    getLongMonth: function (month) {\r\n        var months = this.dateInfo.monthsLong;\r\n        return months[month];\r\n    },\r\n    dateInfo: {\r\n        monthsLong: [\"January\", \"Febraury\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n        monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n        daysLong: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n        daysShort: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\r\n        quarterLong: ['Q1', 'Q2', 'Q3', 'Q4'],\r\n        quarterShort: ['Q1', 'Q2', 'Q3', 'Q4'],\r\n        halfYearLong: ['first half', 'second half'],\r\n        patterns: {\r\n            \"d\": \"M/d/yyyy\",\r\n            \"D\": \"dddd, MMMM dd, yyyy\",\r\n            \"f\": \"dddd, MMMM dd, yyyy H:mm tt\",\r\n            \"F\": \"dddd, MMMM dd, yyyy H:mm:ss tt\",\r\n            \"g\": \"M/d/yyyy H:mm tt\",\r\n            \"G\": \"M/d/yyyy H:mm:ss tt\",\r\n            \"m\": \"MMMM dd\",\r\n            \"o\": \"yyyy-MM-ddTHH:mm:ss.fff\",\r\n            \"s\": \"yyyy-MM-ddTHH:mm:ss\",\r\n            \"t\": \"H:mm tt\",\r\n            \"T\": \"H:mm:ss tt\",\r\n            \"U\": \"dddd, MMMM dd, yyyy HH:mm:ss tt\",\r\n            \"y\": \"MMM, yyyy\"\r\n        },\r\n        tt: {\r\n            \"AM\": \"AM\",\r\n            \"PM\": \"PM\"\r\n        },\r\n        ten: {\r\n            \"Early\": \"Early\",\r\n            \"Mid\": \"Mid\",\r\n            \"Late\": \"Late\"\r\n        },\r\n        today: 'Today',\r\n        clockType: 24\r\n    }\r\n});\r\nDate.prototype.getHalfYear = function () {\r\n    if (!this.getMonth) return null;\r\n    var m = this.getMonth();\r\n    if (m < 6) return 0;\r\n    return 1;\r\n}\r\nDate.prototype.getQuarter = function () {\r\n    if (!this.getMonth) return null;\r\n    var m = this.getMonth();\r\n    if (m < 3) return 0;\r\n    if (m < 6) return 1;\r\n    if (m < 9) return 2;\r\n    return 3;\r\n}\r\n\r\n\r\n/* Date Format\r\n-----------------------------------------------------------------------------*/\r\n\r\n\r\nmini.formatDate = function (date, format, locale) {\r\n    if (!date || !date.getFullYear || isNaN(date)) return \"\";\r\n    var fd = date.toString();\r\n\r\n    var dateFormat = mini.dateInfo;\r\n    if (!dateFormat) dateFormat = mini.dateInfo;\r\n\r\n    if (typeof (dateFormat) !== \"undefined\") {\r\n        var pattern = typeof (dateFormat.patterns[format]) !== \"undefined\" ? dateFormat.patterns[format] : format;\r\n\r\n        var year = date.getFullYear();\r\n        var month = date.getMonth();\r\n        var day = date.getDate();\r\n\r\n        if (format == \"yyyy-MM-dd\") { //yyyy-MM-dd\r\n            month = month + 1 < 10 ? \"0\" + (month + 1) : month + 1;\r\n            day = day < 10 ? \"0\" + day : day;\r\n            return year + \"-\" + month + \"-\" + day;\r\n        }\r\n        if (format == \"MM/dd/yyyy\") { //MM/dd/yyyy\r\n            month = month + 1 < 10 ? \"0\" + (month + 1) : month + 1;\r\n            day = day < 10 ? \"0\" + day : day;\r\n            return month + \"/\" + day + \"/\" + year;\r\n        }\r\n\r\n\r\n\r\n        fd = pattern.replace(/yyyy/g, year);\r\n        fd = fd.replace(/yy/g, (year + \"\").substring(2));\r\n\r\n        //\r\n        var halfyear = date.getHalfYear();\r\n        fd = fd.replace(/hy/g, dateFormat.halfYearLong[halfyear]);\r\n\r\n        //\r\n        var quarter = date.getQuarter();\r\n        fd = fd.replace(/Q/g, dateFormat.quarterLong[quarter]);\r\n        fd = fd.replace(/q/g, dateFormat.quarterShort[quarter]);\r\n\r\n\r\n        fd = fd.replace(/MMMM/g, dateFormat.monthsLong[month].escapeDateTimeTokens());\r\n        fd = fd.replace(/MMM/g, dateFormat.monthsShort[month].escapeDateTimeTokens());\r\n        fd = fd.replace(/MM/g, month + 1 < 10 ? \"0\" + (month + 1) : month + 1);\r\n        fd = fd.replace(/(\\\\)?M/g, function ($0, $1) { return $1 ? $0 : month + 1; });\r\n\r\n        var dayOfWeek = date.getDay();\r\n        fd = fd.replace(/dddd/g, dateFormat.daysLong[dayOfWeek].escapeDateTimeTokens());\r\n        fd = fd.replace(/ddd/g, dateFormat.daysShort[dayOfWeek].escapeDateTimeTokens());\r\n\r\n\r\n        fd = fd.replace(/dd/g, day < 10 ? \"0\" + day : day);\r\n        fd = fd.replace(/(\\\\)?d/g, function ($0, $1) { return $1 ? $0 : day; });\r\n\r\n        var hour = date.getHours();\r\n        var halfHour = hour > 12 ? hour - 12 : hour;\r\n        if (dateFormat.clockType == 12) {\r\n            if (hour > 12) {\r\n                hour -= 12;\r\n            }\r\n        }\r\n\r\n        //HH\r\n        fd = fd.replace(/HH/g, hour < 10 ? \"0\" + hour : hour);\r\n        fd = fd.replace(/(\\\\)?H/g, function ($0, $1) { return $1 ? $0 : hour; });\r\n\r\n        //hh        \r\n        fd = fd.replace(/hh/g, halfHour < 10 ? \"0\" + halfHour : halfHour);\r\n        fd = fd.replace(/(\\\\)?h/g, function ($0, $1) { return $1 ? $0 : halfHour; });\r\n\r\n        var minutes = date.getMinutes();\r\n        fd = fd.replace(/mm/g, minutes < 10 ? \"0\" + minutes : minutes);\r\n        fd = fd.replace(/(\\\\)?m/g, function ($0, $1) { return $1 ? $0 : minutes; });\r\n\r\n        var seconds = date.getSeconds();\r\n        fd = fd.replace(/ss/g, seconds < 10 ? \"0\" + seconds : seconds);\r\n        fd = fd.replace(/(\\\\)?s/g, function ($0, $1) { return $1 ? $0 : seconds; });\r\n\r\n        fd = fd.replace(/fff/g, date.getMilliseconds());\r\n\r\n        fd = fd.replace(/tt/g, date.getHours() > 12 || date.getHours() == 0 ? dateFormat.tt[\"PM\"] : dateFormat.tt[\"AM\"]);\r\n\r\n        //\r\n        var date = date.getDate();\r\n        var tenF = '';\r\n        if (date <= 10) tenF = dateFormat.ten['Early'];\r\n        else if (date <= 20) tenF = dateFormat.ten['Mid'];\r\n        else tenF = dateFormat.ten['Late'];\r\n        fd = fd.replace(/ten/g, tenF);\r\n    }\r\n\r\n    return fd.replace(/\\\\/g, \"\");\r\n}\r\nString.prototype.escapeDateTimeTokens = function () {\r\n    return this.replace(/([dMyHmsft])/g, \"\\\\$1\");\r\n}\r\n\r\n/* Date Parsing\r\n-----------------------------------------------------------------------------*/\r\n\r\nmini.fixDate = function (d, check) { // force d to be on check's YMD, for daylight savings purposes\r\n    if (+d) { // prevent infinite looping on invalid dates\r\n        while (d.getDate() != check.getDate()) {\r\n            d.setTime(+d + (d < check ? 1 : -1) * HOUR_MS);\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\nexamples:\r\n2000/12/22 23:23:59\r\n2000/12/22T23:23:59\r\n2000-12-22 23:23:59\r\n2000-12-22T23:23:59\r\n2000-12-22\r\n2000/12/22\r\n12-22-2000\r\n12/22/2000\r\n2010.11.12  \r\n*/\r\n\r\n\r\n\r\nmini.parseDate = function (s, ignoreTimezone) {\r\n\r\n    \r\n    try {\r\n        var d = window[\"ev\" + \"al\"](s);\r\n        if (d && d.getFullYear) return d;\r\n    } catch (ex) {\r\n    }\r\n    //if (isNaN(s)) return null; \r\n    if (typeof s == 'object') { // already a Date object    \r\n        return isNaN(s) ? null : s;\r\n    }\r\n    if (typeof s == 'number') { // a UNIX timestamp\r\n        //if (new Date(1970, 0, 1).getTime() > parseInt(s)) return null;\r\n        var d = new Date(s * 1000);\r\n        if (d.getTime() != s) return null;\r\n        return isNaN(d) ? null : d;\r\n    }\r\n    if (typeof s == 'string') {\r\n        //20101112, 201011\r\n\r\n        m = s.match(/^([0-9]{4})([0-9]{2})([0-9]{0,2})$/);\r\n        if (m) {\r\n            var date = new Date(parseInt(m[1], 10), parseInt(m[2], 10) - 1);\r\n            if (m[3]) date.setDate(m[3]);\r\n            return date;\r\n        }\r\n        \r\n        //2010.11\r\n        m = s.match(/^([0-9]{4}).([0-9]*)$/);\r\n        if (m) {\r\n            var date = new Date(m[1], m[2] - 1);\r\n            return date;\r\n        }\r\n\r\n        if (s.match(/^\\d+(\\.\\d+)?$/)) { // a UNIX timestamp\r\n            var d = new Date(parseFloat(s) * 1000);\r\n            if (d.getTime() != s) return null;\r\n            else return d;\r\n        }\r\n        if (ignoreTimezone === undefined) {\r\n            ignoreTimezone = true;\r\n        }\r\n        var d = mini.parseISO8601(s, ignoreTimezone) || (s ? new Date(s) : null);\r\n        return isNaN(d) ? null : d;\r\n    }\r\n    // TODO: never return invalid dates (like from new Date(<string>)), return null instead\r\n    return null;\r\n}\r\nmini.parseISO8601 = function (s, ignoreTimezone) { // ignoreTimezone defaults to false\r\n    // derived from http://delete.me.uk/2005/03/iso8601.html\r\n    // TODO: for a know glitch/feature, read tests/issue_206_parseDate_dst.html\r\n    //var m = s.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);\r\n    var m = s.match(/^([0-9]{4})([-\\/]([0-9]{1,2})([-\\/]([0-9]{1,2})([T ]([0-9]{1,2}):([0-9]{1,2})(:([0-9]{1,2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);\r\n    if (!m) {\r\n        //2010-11-22 9  小时额外处理下\r\n        m = s.match(/^([0-9]{4})[-\\/]([0-9]{2})[-\\/]([0-9]{2})[T ]([0-9]{1,2})/);\r\n        if (m) {\r\n            var date = new Date(m[1], m[2] - 1, m[3], m[4]);\r\n            return date;\r\n        }\r\n\r\n        //2010.11\r\n        m = s.match(/^([0-9]{4}).([0-9]*)$/);\r\n        if (m) {\r\n            var date = new Date(m[1], m[2] - 1);\r\n            return date;\r\n        }\r\n\r\n        //2010.11.22\r\n        m = s.match(/^([0-9]{4}).([0-9]*).([0-9]*)/);\r\n        if (m) {\r\n            var date = new Date(m[1], m[2] - 1, m[3]);\r\n            return date;\r\n        }\r\n\r\n        //ff \"12-22-2000\"\r\n        m = s.match(/^([0-9]{2})-([0-9]{2})-([0-9]{4})$/);\r\n        if (!m) return null;\r\n        else {\r\n            var date = new Date(m[3], m[1] - 1, m[2]);\r\n            return date;\r\n        }\r\n    }\r\n    var date = new Date(m[1], 0, 1);\r\n    if (ignoreTimezone || !m[14]) {\r\n        var check = new Date(m[1], 0, 1, 9, 0);\r\n        if (m[3]) {\r\n            date.setMonth(m[3] - 1);\r\n            check.setMonth(m[3] - 1);\r\n        }\r\n        if (m[5]) {\r\n            date.setDate(m[5]);\r\n            check.setDate(m[5]);\r\n        }\r\n        mini.fixDate(date, check);\r\n        if (m[7]) {\r\n            date.setHours(m[7]);\r\n        }\r\n        if (m[8]) {\r\n            date.setMinutes(m[8]);\r\n        }\r\n        if (m[10]) {\r\n            date.setSeconds(m[10]);\r\n        }\r\n        if (m[12]) {\r\n            date.setMilliseconds(Number(\"0.\" + m[12]) * 1000);\r\n        }\r\n        mini.fixDate(date, check);\r\n    } else {\r\n        date.setUTCFullYear(\r\n\t\t\tm[1],\r\n\t\t\tm[3] ? m[3] - 1 : 0,\r\n\t\t\tm[5] || 1\r\n\t\t);\r\n        date.setUTCHours(\r\n\t\t\tm[7] || 0,\r\n\t\t\tm[8] || 0,\r\n\t\t\tm[10] || 0,\r\n\t\t\tm[12] ? Number(\"0.\" + m[12]) * 1000 : 0\r\n\t\t);\r\n        var offset = Number(m[16]) * 60 + (m[18] ? Number(m[18]) : 0);\r\n        offset *= m[15] == '-' ? 1 : -1;\r\n        date = new Date(+date + (offset * 60 * 1000));\r\n    }\r\n    return date;\r\n}\r\n\r\n\r\nmini.parseTime = function (s, format) {\r\n    if (!s) return null;\r\n    var n = parseInt(s);\r\n\r\n    if (n == s && format) {\r\n        d = new Date(0);\r\n\r\n        var ch = format.charAt(0);\r\n\r\n        if (ch == \"H\") {\r\n            d.setHours(n);\r\n        } else if (ch == \"m\") {\r\n            d.setMinutes(n);\r\n        } else if (ch == \"s\") {\r\n            d.setSeconds(n);\r\n        }\r\n        if (isNaN(d)) d = null;\r\n        return d;\r\n    }\r\n\r\n    var d = mini.parseDate(s);\r\n    if (!d) {\r\n        var ss = s.split(\":\");\r\n        var t1 = parseInt(parseFloat(ss[0]));\r\n        var t2 = parseInt(parseFloat(ss[1]));\r\n        var t3 = parseInt(parseFloat(ss[2]));\r\n        if (!isNaN(t1) && !isNaN(t2) && !isNaN(t3)) {\r\n            d = new Date(0);\r\n            d.setHours(t1);\r\n            d.setMinutes(t2);\r\n            d.setSeconds(t3);\r\n        }\r\n        if (!isNaN(t1) && (format == \"H\" || format == \"HH\")) {\r\n            d = new Date(0);\r\n            d.setHours(t1);\r\n        } else if (!isNaN(t1) && !isNaN(t2) && (format == \"H:mm\" || format == \"HH:mm\")) {\r\n            d = new Date(0);\r\n            d.setHours(t1);\r\n            d.setMinutes(t2);\r\n        } else if (!isNaN(t1) && !isNaN(t2) && format == \"mm:ss\") {\r\n            d = new Date(0);\r\n            d.setMinutes(t1);\r\n            d.setSeconds(t2);\r\n        }\r\n    }\r\n    return d;\r\n}\r\n\r\n\r\n\r\n/*\r\n下表列出了可被合并以构造自定义模式的模式\r\n========================================\r\n这些模式是区分大小写的；例如，识别“MM”，但不识别“mm”。如果自定义模式包含空白字符或用单引号括起来的字符，则输出字符串页也将包含这些字符。未定义为格式模式的一部分或未定义为格式字符的字符按其原义复制。\r\n\r\n格式模式 说明 ：\r\nd 月中的某一天。一位数的日期没有前导零。\r\ndd 月中的某一天。一位数的日期有一个前导零。\r\nddd 周中某天的缩写名称，在 AbbreviatedDayNames 中定义。\r\ndddd 周中某天的完整名称，在 DayNames 中定义。\r\nM 月份数字。一位数的月份没有前导零。\r\nMM 月份数字。一位数的月份有一个前导零。\r\nMMM 月份的缩写名称，在 AbbreviatedMonthNames 中定义。\r\nMMMM 月份的完整名称，在 MonthNames 中定义。\r\ny 不包含纪元的年份。如果不包含纪元的年份小于 10，则显示不具有前导零的年份。\r\nyy 不包含纪元的年份。如果不包含纪元的年份小于 10，则显示具有前导零的年份。\r\nyyyy 包括纪元的四位数的年份。\r\ngg 时期或纪元。如果要设置格式的日期不具有关联的时期或纪元字符串，则忽略该模式。\r\nh 12 小时制的小时。一位数的小时数没有前导零。\r\nhh 12 小时制的小时。一位数的小时数有前导零。\r\nH 24 小时制的小时。一位数的小时数没有前导零。\r\nHH 24 小时制的小时。一位数的小时数有前导零。\r\nm 分钟。一位数的分钟数没有前导零。\r\nmm 分钟。一位数的分钟数有一个前导零。\r\ns 秒。一位数的秒数没有前导零。\r\nss 秒。一位数的秒数有一个前导零。\r\nf 秒的小数精度为一位。其余数字被截断。\r\nff 秒的小数精度为两位。其余数字被截断。\r\nfff 秒的小数精度为三位。其余数字被截断。\r\nffff 秒的小数精度为四位。其余数字被截断。\r\nfffff 秒的小数精度为五位。其余数字被截断。\r\nffffff 秒的小数精度为六位。其余数字被截断。\r\nfffffff 秒的小数精度为七位。其余数字被截断。\r\nt 在 AMDesignator 或 PMDesignator 中定义的 AM/PM 指示项的第一个字符（如果存在）。\r\ntt 在 AMDesignator 或 PMDesignator 中定义的 AM/PM 指示项（如果存在）。\r\nz 时区偏移量（“+”或“-”后面仅跟小时）。一位数的小时数没有前导零。例如，太平洋标准时间是“-8”。\r\nzz 时区偏移量（“+”或“-”后面仅跟小时）。一位数的小时数有前导零。例如，太平洋标准时间是“-08”。\r\nzzz 完整时区偏移量（“+”或“-”后面跟有小时和分钟）。一位数的小时数和分钟数有前导零。例如，太平洋标准时间是“-08:00”。\r\n: 在 TimeSeparator 中定义的默认时间分隔符。\r\n/ 在 DateSeparator 中定义的默认日期分隔符。\r\n% c 其中 c 是格式模式（如果单独使用）。如果格式模式与原义字符或其他格式模式合并，则可以省略“%”字符。\r\n\\ c 其中 c 是任意字符。照原义显示字符。若要显示反斜杠字符，请使用“\\\\”。\r\n\r\n只有上面第二个表中列出的格式模式才能用于创建自定义模式；在第一个表中列出的标准格式字符不能用于创建自定义模式。自定义模式的长度至少为两个字符；例如，\r\n\r\nDateTime.ToString( \"d\") 返回 DateTime 值；“d”是标准短日期模式。\r\nDateTime.ToString( \"%d\") 返回月中的某天；“%d”是自定义模式。\r\nDateTime.ToString( \"d \") 返回后面跟有一个空白字符的月中的某天；“d”是自定义模式。\r\n\r\n比较方便的是,上面的参数可以随意组合,并且不会出错,多试试,肯定会找到你要的时间格式\r\n如要得到2005年06月 这样格式的时间\r\n可以这样写:\r\ndate.ToString(\"yyyy年MM月\", DateTimeFormatInfo.InvariantInfo)\r\n或者\r\ndate.ToString(\"yyyy年MM月\")\r\n如此类推.\r\n\r\n*/\r\n\r\nmini.dateInfo = {\r\n    monthsLong: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\r\n    monthsShort: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\r\n    daysLong: [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\"],\r\n    daysShort: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"],\r\n    quarterLong: ['一季度', '二季度', '三季度', '四季度'],\r\n    quarterShort: ['Q1', 'Q2', 'Q2', 'Q4'],\r\n    halfYearLong: ['上半年', '下半年'],\r\n    patterns: {\r\n        \"d\": \"yyyy-M-d\",\r\n        \"D\": \"yyyy年M月d日\",\r\n        \"f\": \"yyyy年M月d日 H:mm\",\r\n        \"F\": \"yyyy年M月d日 H:mm:ss\",\r\n        \"g\": \"yyyy-M-d H:mm\",\r\n        \"G\": \"yyyy-M-d H:mm:ss\",\r\n        \"m\": \"MMMd日\",\r\n        \"o\": \"yyyy-MM-ddTHH:mm:ss.fff\",\r\n        \"s\": \"yyyy-MM-ddTHH:mm:ss\",\r\n        \"t\": \"H:mm\",\r\n        \"T\": \"H:mm:ss\",\r\n        \"U\": \"yyyy年M月d日 HH:mm:ss\",\r\n        \"y\": \"yyyy年MM月\"\r\n    },\r\n    tt: {\r\n        \"AM\": \"上午\",\r\n        \"PM\": \"下午\"\r\n    },\r\n    ten: {\r\n        \"Early\": \"上旬\",\r\n        \"Mid\": \"中旬\",\r\n        \"Late\": \"下旬\"\r\n    },\r\n    today: '今天',\r\n    clockType: 24\r\n};\r\n//var s = \"2000.1.2\";\r\n//alert(mini.parseDate(s));\n(function (window) {\r\n\r\n    var mini = window.mini;\r\n    if (!mini) mini = window.mini = {};\r\n\r\n\r\n    /////////////////////////////////////////////////////////\r\n    // Culture\r\n    ////////////////////////////////////////////////////////\r\n\r\n    var cultures = mini.cultures = {},\r\n        cultureName = \"en\";\r\n\r\n    mini.cultures[cultureName] = {\r\n        name: cultureName,\r\n        numberFormat: {\r\n            number: {\r\n                pattern: [\"n\", \"-n\"],\r\n                decimals: 2,\r\n                decimalsSeparator: \".\",\r\n                groupSeparator: \",\",\r\n                groupSize: [3]\r\n            },\r\n            percent: {\r\n                pattern: [\"n %\", \"-n %\"],\r\n                decimals: 2,\r\n                decimalsSeparator: \".\",\r\n                groupSeparator: \",\",\r\n                groupSize: [3],\r\n                symbol: \"%\"\r\n            },\r\n            currency: {\r\n                pattern: [\"$n\", \"($n)\"],\r\n                decimals: 2,\r\n                decimalsSeparator: \".\",\r\n                groupSeparator: \",\",\r\n                groupSize: [3],\r\n                symbol: \"$\"\r\n            }\r\n        }\r\n    };\r\n\r\n    function findCulture(cultureName) {\r\n        return mini.cultures[cultureName];\r\n    }\r\n\r\n    function getCulture(cultureName) {\r\n        if (cultureName && cultureName.name) return cultureName;\r\n        return findCulture(cultureName) || mini.cultures.current;\r\n    }\r\n\r\n    mini.getCulture = getCulture;\r\n\r\n    mini.culture = function (cultureName) {\r\n        if (cultureName !== undefined) {\r\n            mini.cultures.current = findCulture(cultureName);\r\n        } else {\r\n            return cultures.current;\r\n        }\r\n    };\r\n\r\n    mini.culture(cultureName);\r\n\r\n\r\n\r\n    /////////////////////////////////////////////////////////\r\n    // Number\r\n    ////////////////////////////////////////////////////////\r\n    var STRING = \"string\",\r\n        NUMBER = \"number\",\r\n        isArray = function (val) {\r\n            return val && !!val.unshift;\r\n        },\r\n        numberRegExp = {\r\n            2: /^\\d{1,2}/,\r\n            4: /^\\d{4}/\r\n        };\r\n\r\n    function pad(number, digits, end) {\r\n        number = number + \"\";\r\n        digits = typeof digits == NUMBER ? digits : 2;\r\n\r\n        var n = digits - number.length;\r\n        if (n > 0) {\r\n            var zeros = repeat(n, \"0\");\r\n            return end ? number + zeros : zeros + number;\r\n        }\r\n\r\n        return number;\r\n    }\r\n    function repeat(n, c) {\r\n        var s = \"\";\r\n        while (n) {\r\n            n -= 1;\r\n            s += c;\r\n        }\r\n        return s;\r\n    }\r\n\r\n    var numberFormatRegExp = /^(n|c|p)(\\d*)$/i,\r\n        eRegExp = /^(e)(\\d*)$/i,\r\n        clearRegExp = /[^0#]/g,\r\n        exponentRegExp = /[eE][\\-+]?[0-9]+/;\r\n\r\n\r\n    function doFormatNumber(number, format, options) {   //0,0.0%           0.00\r\n        number = Math.abs(number);\r\n\r\n\r\n\r\n        var isGroup = format.indexOf(\",\") != -1,\r\n            formats = format.split(\".\"),\r\n            format0 = (formats[0] || \"\").replace(clearRegExp, \"\"),\r\n            format1 = (formats[1] || \"\").replace(clearRegExp, \"\"),\r\n//            values = String(number).split(\".\"),\r\n//            value0 = values[0],\r\n//            value1 = values[1] || \"\",\r\n            value = \"\",\r\n            groupSize = options.groupSize[0],\r\n            decimalsSeparator = options.decimalsSeparator,\r\n            groupSeparator = options.groupSeparator;\r\n\r\n\r\n        //format0 = format0.substr(format0.indexOf(\"0\")) || \"0\";\r\n\r\n        var index = format0.indexOf(\"0\");\r\n        format0 = index == -1 ? \"0\" : (format0.substr(index) || \"0\");\r\n\r\n\r\n        var decimals = format1.length;                                              //保留小数位\r\n        var decimalPlaces = format1.substr(0, format1.lastIndexOf(\"0\") + 1).length; //补0小数位\r\n        //format1 = format1.substr(0, format1.lastIndexOf(\"0\") + 1);\r\n\r\n        //alert(number);\r\n\r\n        //先处理小数的四舍五入\r\n        function round2(number, fractionDigits) {\r\n            with (Math) {\r\n                return round(number * pow(10, fractionDigits)) / pow(10, fractionDigits);\r\n            }\r\n        }\r\n        number = round2(number, decimals);\r\n\r\n        var values = String(number).split(\".\");\r\n        value0 = values[0];\r\n        value1 = values[1] || \"\";\r\n\r\n        //alert(decimals + \":\" + decimalPlaces);\r\n\r\n        //整数\r\n        if (value0) {\r\n            value0 = pad(value0, format0.length);\r\n\r\n            if (isGroup) {\r\n                for (var i = 0; i < Math.floor((value0.length - (1 + i)) / 3); i++) {\r\n                    value0 = value0.substring(0, value0.length - (4 * i + 3)) + groupSeparator + value0.substring(value0.length - (4 * i + 3));\r\n                }\r\n            }\r\n\r\n            value += value0;\r\n        }\r\n\r\n        //小数\r\n        if (decimals > 0) {\r\n            value += decimalsSeparator;\r\n\r\n//            var n = parseInt(value1.charAt(decimals));\r\n//            if (!isNaN(n) && n > 4) {\r\n//                var v1s = value1.split(\"\");\r\n//                v1s[decimals - 1] = parseInt(v1s[decimals - 1]) + 1;\r\n//                value1 = v1s.join('');\r\n//            }\r\n\r\n            value += pad(value1.substr(0, decimals), decimalPlaces, true);\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    function transformFormat(format, value, culture, formats) {\r\n\r\n        var options = culture.numberFormat.number;\r\n\r\n        var map = numberFormatRegExp.exec(format);\r\n        if (map != null) {              //n,c,p     标准设置，替换n,%,$\r\n            var f1 = map[1], f2 = map[2];\r\n\r\n            if (f1 == \"p\") {\r\n                options = culture.numberFormat.percent;\r\n            } else if (f1 == \"c\") {\r\n                options = culture.numberFormat.currency;\r\n            }\r\n\r\n            var decimals = f2 ? parseInt(f2) : options.decimals;\r\n            var pattern = options.pattern[value < 0 ? 1 : 0];\r\n            pattern = pattern.replace(\"n\", \"#,#\" + (decimals > 0 ? \".\" + repeat(decimals, \"0\") : \"\"));\r\n\r\n            format = format.replace(f1 + f2, pattern)\r\n                            .replace(\"$\", culture.numberFormat.currency.symbol)\r\n                            .replace(\"%\", culture.numberFormat.percent.symbol);\r\n\r\n        } else {\r\n            if (isNumberFormat(format)) {\r\n                if (value < 0 && !formats[1]) format = \"-\" + format;\r\n            }\r\n        }\r\n\r\n        return format;\r\n    }\r\n\r\n    function isNumberFormat(format) {\r\n        return format.indexOf(\"0\") != -1 || format.indexOf(\"#\") != -1;\r\n    }\r\n\r\n    function getNumberFormat(format) {  //从\"￥#,#.00000 元\"中提取\"#,#.00000\"\r\n        if (!format) return null;\r\n        function getIndexs(format) {\r\n            var begin = format.indexOf(\"0\");\r\n            var begin2 = format.indexOf(\"#\");\r\n            if (begin == -1 || (begin2 != -1 && begin2 < begin)) begin = begin2;\r\n\r\n            var end = format.lastIndexOf(\"0\");\r\n            var end2 = format.lastIndexOf(\"#\");\r\n            if (end == -1 || (end2 != -1 && end2 > end)) end = end2;\r\n\r\n            return [begin, end];\r\n        }\r\n\r\n        var indexs = getIndexs(format);\r\n        var begin = indexs[0], end = indexs[1];\r\n\r\n\r\n        return begin > -1 ? { begin: begin, end: end, format: format.substring(begin, end + 1)} : null;\r\n    }\r\n\r\n    function formatNumber(number, format, culture) {\r\n        if (typeof number != NUMBER) return \"\";\r\n        if (!format) return String(number);\r\n\r\n        var formats = format.split(\";\");\r\n        format = formats[0];\r\n        if (number < 0 && formats.length >= 2) format = formats[1];\r\n        if (number == 0 && formats.length >= 3) format = formats[2];\r\n\r\n        var culture = getCulture(culture),\r\n            numberFormat = culture.numberFormat.number,\r\n            percentFormat = culture.numberFormat.percent,\r\n            currencyFormat = culture.numberFormat.currency,\r\n            format = transformFormat(format, number, culture, formats),\r\n            isCurrency = format.indexOf(currencyFormat.symbol) != -1,\r\n            isPercent = format.indexOf(percentFormat.symbol) != -1,\r\n            isDecimals = format.indexOf(\".\") != -1,\r\n            isFormat = isNumberFormat(format),\r\n            options = isCurrency ? currencyFormat : (isPercent ? currencyFormat : numberFormat),\r\n            number = isPercent ? number * 100 : number;\r\n\r\n\r\n        //e,e2,...\r\n        var ms = eRegExp.exec(format);\r\n        if (ms) {\r\n            var decimals = parseInt(ms[2]);\r\n            return isNaN(decimals) ? number.toExponential() : number.toExponential(decimals);\r\n        }\r\n\r\n        if (!isFormat) return format;\r\n\r\n\r\n        var value = \"\", nf = getNumberFormat(format);\r\n        if (nf != null) {\r\n            value = doFormatNumber(number, nf.format, options);\r\n            value = format.substr(0, nf.begin) + value + format.substr(nf.end + 1);\r\n        } else {\r\n            value = format;\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    mini.parseInt = function (value, culture, format) {\r\n        var result = mini.parseFloat(value, culture, format);\r\n        if (result) {\r\n            result = result | 0;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    mini.parseFloat = function (value, culture, format) {\r\n\r\n        if (!value && value !== 0) {\r\n            return null;\r\n        }\r\n\r\n        if (typeof value === NUMBER) {\r\n            return value;\r\n        }\r\n\r\n        if (format && format.split(\";\")[2] == value) return 0;\r\n\r\n        //handle exponential number\r\n        if (exponentRegExp.test(value)) {\r\n            value = parseFloat(value);\r\n            if (isNaN(value)) {\r\n                value = null;\r\n            }\r\n            return value;\r\n        }\r\n\r\n        value = value.toString();\r\n        culture = mini.getCulture(culture);\r\n\r\n        var numberFormat = culture.numberFormat,\r\n            number = numberFormat.number,\r\n            percent = numberFormat.percent,\r\n            currency = numberFormat.currency,\r\n            isPercent = value.indexOf(percent.symbol) != -1,\r\n            isCurrency = value.indexOf(currency.symbol) != -1,\r\n            number = isCurrency ? currency : (isPercent ? percent : number),\r\n            pattern = number.pattern[1],\r\n            decimals = number.decimals,\r\n            decimalsSeparator = number.decimalsSeparator,\r\n            groupSeparator = number.groupSeparator,\r\n            negative = value.indexOf(\"-\") > -1;\r\n\r\n\r\n        function getValue(value, format, _negative) {\r\n            var nf = getNumberFormat(format);\r\n            if (nf) {\r\n                var f1 = format.substr(0, nf.begin), f2 = format.substr(nf.end + 1);\r\n                if (value.indexOf(f1) == 0 && value.indexOf(f2) > -1) {\r\n                    value = value.replace(f1, \"\").replace(f2, \"\");\r\n                    negative = _negative;\r\n                }\r\n            }\r\n            return value;\r\n        }\r\n\r\n        if (!format) {\r\n            if (negative == false) {\r\n                format = pattern.replace(\"n\", \"#,#\" + (decimals > 0 ? \".\" + repeat(decimals, \"0\") : \"\"))\r\n                                .replace(\"$\", currency.symbol)\r\n                                .replace(\"%\", percent.symbol);\r\n                value = getValue(value, format, true);\r\n            }\r\n        } else {\r\n            //negative = false;\r\n            var formats = format.split(\";\");\r\n            if (formats[1]) {\r\n                format = formats[1];\r\n                value = getValue(value, format, true);\r\n            } else {\r\n\r\n                format = formats[0];\r\n                var temp = value;\r\n                value = getValue(temp, format, false);\r\n                if (temp == value) {\r\n                    value = getValue(temp, \"-\" + format, true);\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n        value = value.split(groupSeparator).join(\"\")\r\n                     .replace(decimalsSeparator, \".\");\r\n\r\n        var ms = value.match(/([0-9,.]+)/g);\r\n        if (ms == null) return null;\r\n        value = ms[0];\r\n\r\n\r\n        value = parseFloat(value);\r\n\r\n        if (isNaN(value)) {\r\n            value = null;\r\n        } else if (negative) {\r\n            value *= -1;\r\n        }\r\n\r\n        if (value && isPercent) {\r\n            value /= 100;\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    mini.formatNumber = formatNumber;\r\n\r\n})(this);\r\n\n\r\nvar inBrowser = typeof window !== 'undefined';\r\nvar UA = inBrowser && window.navigator.userAgent.toLowerCase();\r\nvar isIE = UA && /msie|trident/.test(UA);\r\nvar isIE9 = UA && UA.indexOf('msie 9.0') > 0;\r\nvar isEdge = UA && UA.indexOf('edge/') > 0;\r\nvar isAndroid = UA && UA.indexOf('android') > 0;\r\nvar isIOS = UA && /iphone|ipad|ipod|ios/.test(UA);\r\nvar isMobile = isAndroid || isIOS;\r\nmini.isAndroid = isAndroid;\r\nmini.isIOS = isIOS;\r\nmini.isMobile = isMobile;\r\n\r\n//mini.borderBox = $('body').css('box-sizing');\r\n//setTimeout(function () {\r\n//    alert($('div').css('box-sizing'));\r\n//}, 1);\r\n\r\n//    //把json格式转化成url的编码方式  \r\n//    // e.g. Ext.urlEncode({foo: 1, bar: 2}); would return \"foo=1&bar=2\"  \r\n//    urlEncode: function(o, pre){//o为json对象,pre为前缀  \r\n//                var undef, buf = [], key, e = encodeURIComponent;  \r\n//      \r\n//                for(key in o){  \r\n//                    undef = !Ext.isDefined(o[key]);  \r\n//                    Ext.each(undef ? key : o[key], function(val, i){  \r\n//                        buf.push(\"&\", e(key), \"=\", (val != key || !undef) ? e(val) : \"\");  \r\n//                    });  \r\n//                }  \r\n//                if(!pre){  \r\n//                    buf.shift();  \r\n//                    pre = \"\";  \r\n//                }  \r\n//                return pre + buf.join('');  \r\n//            },  \r\n//    //把URL字符串编码转化成json对象  \r\n//    //Ext.urlDecode(\"foo=1&bar=2\"); // returns {foo: \"1\", bar: \"2\"}  \r\n//    //Ext.urlDecode(\"foo=1&bar=2&bar=3&bar=4\", false); // returns {foo: \"1\", bar: [\"2\", \"3\", \"4\"]}  \r\n//      \r\n//    urlDecode : function(string, overwrite){//string URL参数,overwrite针对同一参数的多个值是否覆盖,false为不覆盖,那就返回这个参数的数组  \r\n//                var obj = {},  \r\n//                    pairs = string.split('&'),  \r\n//                    d = decodeURIComponent,  \r\n//                    name,  \r\n//                    value;  \r\n//                Ext.each(pairs, function(pair) {  \r\n//                    pair = pair.split('=');  \r\n//                    name = d(pair[0]);  \r\n//                    value = d(pair[1]);  \r\n//                    obj[name] = overwrite || !obj[name] ? value :  \r\n//                                [].concat(obj[name]).concat(value);  \r\n//                });  \r\n//                return obj;  \r\n//            }  \r\n\r\n\r\n//key\r\nmini.Keyboard = {\r\n    Left: 37,\r\n    Top: 38,\r\n    Right: 39,\r\n    Bottom: 40,\r\n\r\n    PageUp: 33,\r\n    PageDown: 34,\r\n    End: 35,\r\n    Home: 36,\r\n\r\n    Enter: 13,\r\n    ESC: 27,\r\n    Space: 32,\r\n    Tab: 9,\r\n    Del: 46,\r\n\r\n    F1: 112,\r\n    F2: 113,\r\n    F3: 114,\r\n    F4: 115,\r\n    F5: 116,\r\n    F6: 117,\r\n    F7: 118,\r\n    F8: 119,\r\n    F9: 120,\r\n    F10: 121,\r\n    F11: 122,\r\n    F12: 123\r\n};\r\n\r\nvar ua = navigator.userAgent.toLowerCase(),\r\n    check = function (regex) {\r\n        return regex.test(ua);\r\n    },\r\n    DOC = document,\r\n    isStrict = document.compatMode == \"CSS1Compat\",\r\n    version = function (is, regex) {\r\n        var m;\r\n        return (is && (m = regex.exec(ua))) ? parseFloat(m[1]) : 0;\r\n    },\r\n    docMode = document.documentMode,\r\n    isOpera = check(/opera/),\r\n    isOpera10_5 = isOpera && check(/version\\/10\\.5/),\r\n    isChrome = check(/\\bchrome\\b/),\r\n    isWebKit = check(/webkit/),\r\n    isSafari = !isChrome && check(/safari/),\r\n    isSafari2 = isSafari && check(/applewebkit\\/4/),\r\n    isSafari3 = isSafari && check(/version\\/3/),\r\n    isSafari4 = isSafari && check(/version\\/4/),\r\n    isSafari5_0 = isSafari && check(/version\\/5\\.0/),\r\n    isSafari5 = isSafari && check(/version\\/5/),\r\n    isIE = !isOpera && check(/msie/),\r\n    isIE7 = isIE && ((check(/msie 7/) && docMode != 8 && docMode != 9 && docMode != 10) || docMode == 7),\r\n    isIE8 = isIE && ((check(/msie 8/) && docMode != 7 && docMode != 9 && docMode != 10) || docMode == 8),\r\n    isIE9 = isIE && ((check(/msie 9/) && docMode != 7 && docMode != 8 && docMode != 10) || docMode == 9),\r\n    isIE10 = isIE && ((check(/msie 10/) && docMode != 7 && docMode != 8 && docMode != 9) || docMode == 10),\r\n    isIE6 = isIE && !isIE7 && !isIE8 && !isIE9 && !isIE10,\r\n    isIE11 = (ua.indexOf(\"trident\") > -1 && ua.indexOf(\"rv\") > -1),\r\n    isIE = isIE || isIE11,\r\n//IE_V = isIE ? parseInt(jQuery.browser.version) : -1,    \r\n    isFirefox = navigator.userAgent.indexOf(\"Firefox\") > 0,\r\n    isGecko = !isWebKit && check(/gecko/),\r\n    isGecko3 = isGecko && check(/rv:1\\.9/),\r\n    isGecko4 = isGecko && check(/rv:2\\.0/),\r\n    isGecko5 = isGecko && check(/rv:5\\./),\r\n    isGecko10 = isGecko && check(/rv:10\\./),\r\n    isFF3_0 = isGecko3 && check(/rv:1\\.9\\.0/),\r\n    isFF3_5 = isGecko3 && check(/rv:1\\.9\\.1/),\r\n    isFF3_6 = isGecko3 && check(/rv:1\\.9\\.2/),\r\n    isWindows = check(/windows|win32/),\r\n    isMac = check(/macintosh|mac os x/),\r\n    isAir = check(/adobeair/),\r\n    isLinux = check(/linux/),\r\n    scrollbarSize = null,\r\n    chromeVersion = version(true, /\\bchrome\\/(\\d+\\.\\d+)/),\r\n    firefoxVersion = version(true, /\\bfirefox\\/(\\d+\\.\\d+)/),\r\n    ieVersion = version(isIE, /msie (\\d+\\.\\d+)/),\r\n    IE_V = isIE ? parseInt(ieVersion) : -1,\r\n    operaVersion = version(isOpera, /version\\/(\\d+\\.\\d+)/),\r\n    safariVersion = version(isSafari, /version\\/(\\d+\\.\\d+)/),\r\n    webKitVersion = version(isWebKit, /webkit\\/(\\d+\\.\\d+)/),\r\n    isSecure = /^https/i.test(window.location.protocol),\r\n    isBorderBox = isIE && !isStrict;\r\n\r\n//alert(ieVersion + \":\" + IE_V);\r\n//var ua = navigator.userAgent.toLowerCase(),\r\n//    check = function (r) {\r\n//        return r.test(ua);\r\n//    },\r\n//    DOC = document,\r\n//    isStrict = DOC.compatMode == \"CSS1Compat\",\r\n//    isOpera = Object.prototype.toString.call(window.opera) == '[object Opera]',\r\n//    isChrome = check(/chrome/),\r\n//    isWebKit = check(/webkit/),\r\n//    isSafari = !isChrome && check(/safari/),\r\n//    isSafari2 = isSafari && check(/applewebkit\\/4/), // unique to Safari 2\r\n//    isSafari3 = isSafari && check(/version\\/3/),\r\n//    isSafari4 = isSafari && check(/version\\/4/),\r\n//    isIE = !!window.attachEvent && !isOpera,\r\n//    isIE7 = isIE && check(/msie 7/),\r\n//    isIE8 = isIE && check(/msie 8/),\r\n//    isIE9 = isIE && check(/msie 9/),\r\n//    isIE10 = isIE && document.documentMode == 10,\r\n//    isIE6 = isIE && !isIE7 && !isIE8 && !isIE9 && !isIE10,\r\n//    isFirefox = navigator.userAgent.indexOf(\"Firefox\") > 0,\r\n//    isGecko = !isWebKit && check(/gecko/),\r\n//    isGecko2 = isGecko && check(/rv:1\\.8/),\r\n//    isGecko3 = isGecko && check(/rv:1\\.9/),\r\n//    isBorderBox = isIE && !isStrict,\r\n//    isWindows = check(/windows|win32/),\r\n//    isMac = check(/macintosh|mac os x/),\r\n//    isAir = check(/adobeair/),\r\n//    isLinux = check(/linux/),\r\n//    isSecure = /^https/i.test(window.location.protocol);\r\n\r\nif (isIE6) {\r\n    try {\r\n        DOC.execCommand(\"BackgroundImageCache\", false, true);\r\n    } catch (e) { }\r\n}\r\nmini.boxModel = !isBorderBox;\r\nmini.isIE = isIE;\r\nmini.isIE6 = isIE6;\r\nmini.isIE7 = isIE7;\r\nmini.isIE8 = isIE8;\r\nmini.isIE9 = isIE9;\r\nmini.isIE10 = isIE10;\r\nmini.isIE11 = isIE11;\r\nmini.IE_V = isIE11 ? 11 : IE_V;\r\nmini.isFirefox = isFirefox;\r\nmini.isOpera = isOpera;\r\nmini.isSafari = isSafari;\r\nmini.isChrome = isChrome;\r\n\r\nif (isIE) {\r\n    jQuery(document.documentElement).addClass(\"ie ie\" + mini.IE_V);\r\n}\r\n\r\nif (jQuery) jQuery.boxModel = mini.boxModel;\r\n\r\n\r\n//alert(isFirefox + \":\" + isChrome + \":\" + isSafari+\":\"+isOpera);\r\n//alert(isIE6 + \":\" + isIE7 + \":\" + isIE8 + \":\" + isIE9 + \":\" + isIE10);\r\n\r\nmini.noBorderBox = false;\r\nif (jQuery.boxModel == false && isIE && isIE9 == false) mini.noBorderBox = true;\r\n\r\nmini.MouseButton = {\r\n    Left: 0,\r\n    Middle: 1,\r\n    Right: 2\r\n}\r\nif (isIE && !isIE9 && !isIE10) {\r\n    mini.MouseButton = {\r\n        Left: 1,\r\n        Middle: 4,\r\n        Right: 2\r\n    }\r\n}\r\n\r\n////////////////////////////////////////////////////////////////////////////////\r\n\r\nmini.append = function (to, html) {\r\n    to = mini.byId(to);\r\n    if (!html || !to) return;\r\n    if (typeof html == \"string\") {\r\n        if (html.charAt(0) == '#') {\r\n            html = mini.byId(html);\r\n            if (!html) return;\r\n            to.appendChild(html);\r\n            return html;\r\n        } else {\r\n            if (html.indexOf(\"<tr\") == 0) {\r\n                return jQuery(to).append(html)[0].lastChild;\r\n                return;\r\n            }\r\n\r\n            var d = document.createElement(\"div\");\r\n            d.innerHTML = html;\r\n            html = d.firstChild;\r\n            while (d.firstChild) {\r\n                to.appendChild(d.firstChild);\r\n            }\r\n            return html;\r\n        }\r\n    } else {\r\n        to.appendChild(html);\r\n        return html;\r\n    }\r\n\r\n    //return jQuery(to).append(html)[0].lastChild;\r\n}\r\nmini.prepend = function (to, html) {\r\n    if (typeof html == \"string\") {\r\n        if (html.charAt(0) == '#') {\r\n            html = mini.byId(html);\r\n        } else {\r\n            var d = document.createElement(\"div\");\r\n            d.innerHTML = html;\r\n            html = d.firstChild;\r\n        }\r\n    }\r\n    return jQuery(to).prepend(html)[0].firstChild;\r\n}\r\nmini.after = function (to, html) {\r\n    if (typeof html == \"string\") {\r\n        if (html.charAt(0) == '#') {\r\n            html = mini.byId(html);\r\n        } else {\r\n            var d = document.createElement(\"div\");\r\n            d.innerHTML = html;\r\n            html = d.firstChild;\r\n        }\r\n    }\r\n    if (!html || !to) return;\r\n    to.nextSibling ? to.parentNode.insertBefore(html, to.nextSibling) : to.parentNode.appendChild(html);\r\n    return html;\r\n}\r\nmini.before = function (to, html) {\r\n    if (typeof html == \"string\") {\r\n        if (html.charAt(0) == '#') {\r\n            html = mini.byId(html);\r\n        } else {\r\n            var d = document.createElement(\"div\");\r\n            d.innerHTML = html;\r\n            html = d.firstChild;\r\n        }\r\n    }\r\n    if (!html || !to) return;\r\n    to.parentNode.insertBefore(html, to);\r\n    //jQuery(to).before(html);\r\n    return html;\r\n}\r\n\r\nmini.__wrap = document.createElement('div');\r\nmini.createElements = function (html) {\r\n    mini.removeChilds(mini.__wrap);\r\n    var isTr = html.indexOf(\"<tr\") == 0;\r\n    if (isTr) {\r\n        html = '<table>' + html + '</table>';\r\n    }\r\n    mini.__wrap.innerHTML = html;\r\n    return isTr ? mini.__wrap.firstChild.rows : mini.__wrap.childNodes;\r\n}\r\n\r\nmini_byId = function (id, context) {\r\n    if (typeof id == \"string\") {\r\n        if (id.charAt(0) == '#') id = id.substr(1);\r\n        var el = document.getElementById(id);\r\n        if (el) return el;\r\n        if (context && !mini.isAncestor(document.body, context)) {\r\n            //return jQuery(\"#\" + id, context)[0];\r\n\r\n            var els = context.getElementsByTagName(\"*\");\r\n            for (var i = 0, l = els.length; i < l; i++) {\r\n                var el = els[i];\r\n                if (el.id == id) return el;\r\n            }\r\n            el = null;\r\n        }\r\n        return el;\r\n    } else {\r\n        return id;\r\n    }\r\n}\r\nmini_hasClass = function (el, className) {\r\n    el = mini.byId(el);\r\n    if (!el) return;\r\n    if (!el.className) return false;\r\n    var clss = String(el.className).split(\" \");\r\n    return clss.indexOf(className) != -1;\r\n}\r\nmini_addClass = function (el, className) {\r\n    if (!className) return;\r\n    if (mini.hasClass(el, className) == false) {\r\n        jQuery(el).addClass(className);\r\n    }\r\n}\r\nmini_removeClass = function (el, className) {\r\n    if (!className) return;\r\n    jQuery(el).removeClass(className);\r\n    //        el = mini.byId(el);\r\n    //        if (!el) return;\r\n    //        el.className = el.className.replace(className, \"\");\r\n}\r\n\r\nvar _ceil = function (n) {\r\n    return Math.ceil(parseFloat(n));\r\n}\r\n\r\nmini_getMargins = function (el) {\r\n    el = mini.byId(el);\r\n    var jq = jQuery(el);\r\n    return {\r\n        top: _ceil(jq.css(\"margin-top\"), 10) || 0,\r\n        left: _ceil(jq.css(\"margin-left\"), 10) || 0,\r\n        bottom: _ceil(jq.css(\"margin-bottom\"), 10) || 0,\r\n        right: _ceil(jq.css(\"margin-right\"), 10) || 0\r\n    };\r\n}\r\nmini_getBorders = function (el) {\r\n    el = mini.byId(el);\r\n    var jq = jQuery(el);\r\n    return {\r\n        top: _ceil(jq.css(\"border-top-width\"), 10) || 0,\r\n        left: _ceil(jq.css(\"border-left-width\"), 10) || 0,\r\n        bottom: _ceil(jq.css(\"border-bottom-width\"), 10) || 0,\r\n        right: _ceil(jq.css(\"border-right-width\"), 10) || 0\r\n    };\r\n}\r\n\r\nmini_getPaddings = function (el) {\r\n    el = mini.byId(el);\r\n    var jq = jQuery(el);\r\n    return {\r\n        top: _ceil(jq.css(\"padding-top\"), 10) || 0,\r\n        left: _ceil(jq.css(\"padding-left\"), 10) || 0,\r\n        bottom: _ceil(jq.css(\"padding-bottom\"), 10) || 0,\r\n        right: _ceil(jq.css(\"padding-right\"), 10) || 0\r\n    };\r\n}\r\n//var ___count = 0;\r\nmini_setWidth = function (el, width) {\r\n    el = mini.byId(el);\r\n    width = parseInt(width);\r\n    if (isNaN(width) || !el) return;\r\n    if (jQuery.boxModel) {\r\n        var p = mini.getPaddings(el);\r\n        var b = mini.getBorders(el);\r\n        width = width - p.left - p.right - b.left - b.right;\r\n\r\n        \r\n    }\r\n    //    var m = mini.getMargins(el);\r\n    //    width = width - m.left - m.right;\r\n    if (width < 0) width = 0;\r\n    el.style.width = width + \"px\";\r\n}\r\nmini_setHeight = function (el, height) {\r\n    el = mini.byId(el);\r\n    height = parseInt(height);\r\n    if (isNaN(height) || !el) return;\r\n    if (jQuery.boxModel) {\r\n        var p = mini.getPaddings(el);\r\n        var b = mini.getBorders(el);\r\n        height = height - p.top - p.bottom - b.top - b.bottom;\r\n        //document.title = ___count++;\r\n        \r\n    }\r\n    //    var m = mini.getMargins(el);\r\n    //    height = height - m.top - m.bottom;\r\n    if (height < 0) height = 0;\r\n    el.style.height = height + \"px\";\r\n}\r\nmini_getWidth = function (el, content) {\r\n    el = mini.byId(el);\r\n    if (el.style.display == \"none\" || el.type == \"text/javascript\") return 0;\r\n    return content ? jQuery(el).width() : jQuery(el).outerWidth();\r\n}\r\nmini_getHeight = function (el, content) {\r\n    el = mini.byId(el);\r\n    if (el.style.display == \"none\" || el.type == \"text/javascript\") return 0;\r\n    return content ? jQuery(el).height() : jQuery(el).outerHeight();\r\n}\r\nmini_setBox = function (el, x, y, width, height) {\r\n    if (y === undefined) {\r\n        y = x.y;\r\n        width = x.width;\r\n        height = x.height;\r\n        x = x.x;\r\n    }\r\n    mini.setXY(el, x, y);\r\n    mini.setWidth(el, width);\r\n    mini.setHeight(el, height);\r\n}\r\nmini_getBox = function (el) {\r\n    var xy = mini.getXY(el);\r\n    var box = {\r\n        x: xy[0],\r\n        y: xy[1],\r\n        width: mini.getWidth(el),\r\n        height: mini.getHeight(el)\r\n    };\r\n    box.left = box.x;\r\n    box.top = box.y;\r\n    box.right = box.x + box.width;\r\n    box.bottom = box.y + box.height;\r\n    return box;\r\n}\r\nmini_setStyle = function (el, style) {\r\n    el = mini.byId(el);\r\n    if (!el || typeof style != \"string\") return;\r\n\r\n    var jq = jQuery(el);\r\n    var styles = style.toLowerCase().split(\";\");\r\n    for (var i = 0, l = styles.length; i < l; i++) {\r\n        var s = styles[i];\r\n        var ss = s.split(\":\");\r\n        if (ss.length > 1) {\r\n            if (ss.length > 2) {\r\n                var s1 = ss[0].trim();\r\n                ss.removeAt(0);\r\n                var s2 = ss.join(\":\").trim();\r\n                jq.css(s1, s2);\r\n            } else {\r\n                jq.css(ss[0].trim(), ss[1].trim());\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nmini_getStyle = function () {\r\n    var f = document.defaultView;\r\n    return new Function('el', 'style', [\r\n        \"style.indexOf('-')>-1 && (style=style.replace(/-(\\\\w)/g,function(m,a){return a.toUpperCase()}));\",\r\n        \"style=='float' && (style='\",\r\n        f ? 'cssFloat' : 'styleFloat',\r\n        \"');return el.style[style] || \",\r\n        f ? 'window.getComputedStyle(el, null)[style]' : 'el.currentStyle[style]',\r\n        ' || null;'].join(''));\r\n} ();\r\nmini_isAncestor = function (p, c) {\r\n    var ret = false;\r\n    p = mini.byId(p);\r\n    c = mini.byId(c);\r\n    if (p === c) return true;\r\n    if (p && c) {\r\n        if (p.contains) {\r\n            try {\r\n                return p.contains(c);\r\n            } catch (e) {\r\n                return false;\r\n            }\r\n        } else\r\n            if (p.compareDocumentPosition) {\r\n                return !!(p.compareDocumentPosition(c) & 16);\r\n            } else {\r\n                while (c = c.parentNode) {\r\n                    ret = c == p || ret;\r\n                }\r\n            }\r\n    }\r\n    return ret;\r\n}\r\nmini_findParent = function (p, cls, maxDepth) {\r\n    p = mini.byId(p);\r\n    var b = document.body, depth = 0, stopEl;\r\n    maxDepth = maxDepth || 50;\r\n    if (typeof maxDepth != \"number\") {\r\n        stopEl = mini.byId(maxDepth);\r\n        maxDepth = 10;\r\n    }\r\n    while (p && p.nodeType == 1 && depth < maxDepth && p != b && p != stopEl) {\r\n        if (mini.hasClass(p, cls)) {\r\n            return p;\r\n        }\r\n        depth++;\r\n        p = p.parentNode;\r\n    }\r\n    return null;\r\n}\r\nmini.copyTo(mini, {\r\n    byId: mini_byId,\r\n    hasClass: mini_hasClass,\r\n    addClass: mini_addClass,\r\n    removeClass: mini_removeClass,\r\n\r\n    getMargins: mini_getMargins,\r\n    getBorders: mini_getBorders,\r\n    getPaddings: mini_getPaddings,\r\n    setWidth: mini_setWidth,\r\n    setHeight: mini_setHeight,\r\n    getWidth: mini_getWidth,\r\n    getHeight: mini_getHeight,\r\n    setBox: mini_setBox,\r\n    getBox: mini_getBox,\r\n\r\n    setStyle: mini_setStyle,\r\n    getStyle: mini_getStyle,\r\n\r\n    repaint: function (el) {\r\n        if (!el) el = document.body;\r\n        mini.addClass(el, \"mini-repaint\");\r\n        setTimeout(function () {\r\n            mini.removeClass(el, \"mini-repaint\");\r\n        }, 1);\r\n    },\r\n\r\n    getSize: function (el, content) {\r\n        return {\r\n            width: mini.getWidth(el, content),\r\n            height: mini.getHeight(el, content)\r\n        };\r\n    },\r\n    setSize: function (el, width, height) {\r\n        mini.setWidth(el, width);\r\n        mini.setHeight(el, height);\r\n    },\r\n    setX: function (el, x) {\r\n        x = parseInt(x);\r\n        var xy = jQuery(el).offset();\r\n        //var y = xy.top;\r\n        var y = parseInt(xy.top);\r\n        if (y === undefined) y = xy[1];\r\n        mini.setXY(el, x, y);\r\n    },\r\n    setY: function (el, y) {\r\n        y = parseInt(y);\r\n        var xy = jQuery(el).offset();\r\n        var x = parseInt(xy.left);\r\n        if (x === undefined) x = xy[0];\r\n        mini.setXY(el, x, y);\r\n    },\r\n    setXY: function (el, x, y) {\r\n\r\n        var xy = {\r\n            left: parseInt(x),\r\n            top: parseInt(y)\r\n        };\r\n        jQuery(el).offset(xy);\r\n\r\n\r\n        //jQuery(el).offset(xy);      //jquery 1.4 bug\r\n\r\n        //        if (jQuery.fn.jquery == \"1.4\") {\r\n        //            jQuery(el).offset(xy);      //jquery 1.4 bug\r\n        //        }\r\n\r\n        if (jQuery.fn.jquery && jQuery.fn.jquery.indexOf(\"1.4\") != -1) {\r\n            jQuery(el).offset(xy);      //jquery 1.4 bug\r\n        }\r\n    },\r\n    getXY: function (el) {\r\n\r\n        var xy = jQuery(el).offset();\r\n        //if (!xy) xy = { left: 0, top: 0 };\r\n        return [parseInt(xy.left), parseInt(xy.top)];\r\n    },\r\n    getViewportBox: function () {\r\n        //debugger\r\n        //  var top = jQuery(window).scrollTop();\r\n        var w = jQuery(window).width(), h = jQuery(window).height();\r\n        var x = jQuery(document).scrollLeft(), y = jQuery(document.body).scrollTop();\r\n        if (y == 0 && document.documentElement) y = document.documentElement.scrollTop;\r\n\r\n        return {\r\n            x: x, y: y, top: y, left: x, width: w, height: h, right: x + w, bottom: y + h\r\n        };\r\n    },\r\n    showAt: function (options) {\r\n        var $ = jQuery;\r\n        //{ el, left, top, animation, fixed, offset }            \r\n        options = jQuery.extend({\r\n            el: null,\r\n            //container: null,      //没用，自动匹配父元素尺寸定位\r\n            x: 'center',         //left|center|right\r\n            y: 'center',          //top|center|bottom\r\n            offset: [0, 0],\r\n            fixed: false,           //相对于页面整体，而非父元素\r\n            zindex: mini.getMaxZIndex(),\r\n            timeout: 0,\r\n            timeoutHandler: null,\r\n            constrain: false,\r\n            animation: false\r\n        }, options);\r\n        var el = jQuery(options.el)[0],\r\n            x = options.x,\r\n            y = options.y,\r\n            offsetx = options.offset[0],\r\n            offsety = options.offset[1],\r\n            zindex = options.zindex,\r\n            fixed = options.fixed,\r\n            animation = options.animation;\r\n        if (!el) return;\r\n\r\n        if (options.timeout) {\r\n            setTimeout(function () {\r\n                if (options.timeoutHandler) options.timeoutHandler();\r\n                //else el.style.display = 'none';\r\n            }, options.timeout);\r\n        }\r\n\r\n\r\n\r\n        var s = ';position:absolute;display:block;left:auto;top:auto;right:auto;bottom:auto;margin:0;z-index:' + zindex + ';';\r\n        mini.setStyle(el, s);\r\n        var s = \"\";\r\n\r\n        if (options && mini.isNumber(x) && mini.isNumber(y)) {\r\n            if (options.fixed && !mini.isIE6) {\r\n                s += \";position:fixed;\";\r\n            }\r\n            mini.setStyle(el, s);\r\n\r\n            if (options.constrain) {\r\n                var width = jQuery(window).width(),\r\n                    height = jQuery(window).height(),\r\n                    size = mini.getSize(el);\r\n\r\n                if (x + size.width > width) x = width - size.width;\r\n                if (x < 0) x = 0;\r\n                if (y + size.height > height) y = height - size.height;\r\n                if (y < 0) y = 0;\r\n\r\n            }\r\n\r\n            mini.setXY(el, x, y);\r\n\r\n\r\n            return;\r\n        }\r\n\r\n\r\n        //x\r\n        if (x == 'left') {\r\n            s += 'left:' + offsetx + 'px;';\r\n        } else if (x == 'right') {\r\n            s += 'right:' + offsetx + 'px;';\r\n        } else {\r\n            var size = mini.getSize(el);\r\n            s += 'left:50%;margin-left:' + (-size.width * 0.5) + 'px;';\r\n        }\r\n        //y\r\n        if (y == 'top') {\r\n            s += 'top:' + offsety + 'px;';\r\n        } else if (y == 'bottom') {\r\n            s += 'bottom:' + offsety + 'px;';\r\n        } else {\r\n            var size = mini.getSize(el);\r\n            s += 'top:50%;margin-top:' + (-size.height * 0.5) + 'px;';\r\n        }\r\n\r\n        if (fixed && !mini.isIE6) {\r\n            s += 'position:fixed';\r\n        }\r\n\r\n\r\n\r\n        mini.setStyle(el, s);\r\n\r\n    },\r\n    getChildNodes: function (el, all) {\r\n        el = mini.byId(el);\r\n        if (!el) return;\r\n        var nodes = el.childNodes;\r\n        var cs = [];\r\n        for (var i = 0, l = nodes.length; i < l; i++) {\r\n            var c = nodes[i];\r\n            if (c.nodeType == 1 || all === true) {\r\n                cs.push(c);\r\n            }\r\n        }\r\n        return cs;\r\n    },\r\n    //    getChildNodes: function (el, all) {\r\n    //        el = mini.byId(el);\r\n    //        if (!el) return [];\r\n    //        var node = el.firstChild;\r\n    //        if (!node) return [];\r\n    //        var arr = [];\r\n    //        while (node) {\r\n    //            if (node.nodeType == 1 || all == true) {\r\n    //                arr.push(node);\r\n    //            }\r\n    //            node = node.nextSibling;\r\n    //        }\r\n    //        return arr;   \r\n    //    },\r\n\r\n    //ie需要特殊处理才能正确删除元素，防止内存泄漏\r\n    removeNode: isIE ? function () {\r\n        var d;\r\n        return function (n) {\r\n            if (n && n.tagName != 'BODY') {\r\n                d = d || document.createElement('div');\r\n                d.appendChild(n);\r\n                d.innerHTML = '';\r\n            }\r\n        }\r\n    } () : function (n) {\r\n        if (n && n.parentNode && n.tagName != 'BODY') {\r\n            n.parentNode.removeChild(n);\r\n        }\r\n    },\r\n\r\n    //    removeNode: function (el) {\r\n    //        jQuery(el).remove();\r\n    //    },\r\n\r\n    removeChilds: function (el, butEl) {\r\n        el = mini.byId(el);\r\n        if (!el) return;\r\n        var cs = mini.getChildNodes(el, true);\r\n        for (var i = 0, l = cs.length; i < l; i++) {\r\n            var c = cs[i];\r\n            if (butEl && c == butEl) {\r\n            } else {\r\n                el.removeChild(cs[i]);\r\n            }\r\n        }\r\n    },\r\n    isAncestor: mini_isAncestor,\r\n    findParent: mini_findParent,\r\n    findChild: function (el, cls) {\r\n        el = mini.byId(el);\r\n        var els = el.getElementsByTagName('*');\r\n        for (var i = 0, l = els.length; i < l; i++) {\r\n            var el = els[i];\r\n            if (mini.hasClass(el, cls)) return el;\r\n        }\r\n    },\r\n    isAncestor: function (p, c) {\r\n        var ret = false;\r\n        p = mini.byId(p);\r\n        c = mini.byId(c);\r\n        if (p === c) return true;\r\n        if (p && c) {\r\n            if (p.contains) {\r\n                try {\r\n                    return p.contains(c);\r\n                } catch (e) { return false }\r\n            } else\r\n                if (p.compareDocumentPosition) {\r\n                    return !!(p.compareDocumentPosition(c) & 16);\r\n                } else {\r\n                    while (c = c.parentNode) {\r\n                        ret = c == p || ret;\r\n                    }\r\n                }\r\n        }\r\n        return ret;\r\n    },\r\n    getOffsetsTo: function (el, target) {\r\n        var o = this.getXY(el), e = this.getXY(target);\r\n        return [o[0] - e[0], o[1] - e[1]];\r\n    },\r\n    scrollIntoView: function (el, container, hscroll, vscroll) {\r\n        var c = mini.byId(container) || document.body,\r\n        \to = this.getOffsetsTo(el, c),\r\n            l = o[0] + c.scrollLeft,\r\n            t = o[1] + c.scrollTop,\r\n            b = t + el.offsetHeight,\r\n            r = l + el.offsetWidth,\r\n        \tch = c.clientHeight,\r\n        \tct = parseInt(c.scrollTop, 10),\r\n        \tcl = parseInt(c.scrollLeft, 10),\r\n        \tcb = ct + ch,\r\n        \tcr = cl + c.clientWidth;\r\n\r\n        if (vscroll !== false) {\r\n            if (el.offsetHeight > ch || t < ct) {\r\n                c.scrollTop = t;\r\n            } else if (b > cb) {\r\n                c.scrollTop = b - ch;\r\n            }\r\n            c.scrollTop = c.scrollTop; // corrects IE, other browsers will ignore\r\n        }\r\n\r\n        if (hscroll !== false) {\r\n            if (el.offsetWidth > c.clientWidth || l < cl) {\r\n                c.scrollLeft = l;\r\n            } else if (r > cr) {\r\n                c.scrollLeft = r - c.clientWidth;\r\n            }\r\n            c.scrollLeft = c.scrollLeft;\r\n        }\r\n        return this;\r\n    },\r\n    getScrollOffset: function () {\r\n        if (!mini._scrollOffset) {\r\n            var el = document.createElement('div');\r\n            //el.style.cssText = 'width:100px;background:#eee;height:50px;overflow:scroll;padding:1px;position:absolute;left:-1000px;top:0;';\r\n            el.style.cssText = 'width:100px;background:#eee;height:50px;overflow:scroll;padding:1px;position:absolute;left:-1000px;top:0;box-sizing:content-box;-moz-box-sizing: content-box;';\r\n\r\n            document.body.appendChild(el);\r\n\r\n            mini._scrollOffset = el.offsetWidth - el.clientWidth;\r\n\r\n            el.parentNode.removeChild(el);\r\n        }\r\n        return mini._scrollOffset;\r\n    },\r\n    setOpacity: function (el, opacity) {\r\n        jQuery(el).css({\r\n            \"opacity\": opacity\r\n        });\r\n    },\r\n    selectable: function (el, selected) {\r\n        el = mini.byId(el);\r\n        if (!!selected) {\r\n            jQuery(el).removeClass('mini-unselectable');\r\n            if (isIE) el.unselectable = \"off\";\r\n            else {\r\n                el.style.MozUserSelect = '';\r\n                el.style.KhtmlUserSelect = '';\r\n                el.style.UserSelect = '';\r\n\r\n            }\r\n        } else {\r\n            jQuery(el).addClass('mini-unselectable');\r\n            if (isIE) el.unselectable = 'on';\r\n            else {\r\n                el.style.MozUserSelect = 'none';\r\n                el.style.UserSelect = 'none';\r\n                el.style.KhtmlUserSelect = 'none';\r\n            }\r\n        }\r\n    },\r\n    selectRange: function (el, iStart, iEnd) {\r\n        if (el.createTextRange) {\r\n            var oRange = el.createTextRange();\r\n            oRange.moveStart(\"character\", iStart);\r\n            oRange.moveEnd(\"character\", iEnd - el.value.length);\r\n            oRange.select();\r\n        } else {\r\n            if (el.setSelectionRange) {\r\n                el.setSelectionRange(iStart, iEnd);\r\n            }\r\n        }\r\n        try {\r\n            el.focus();\r\n        } catch (e) {\r\n        }\r\n    },\r\n    getSelectRange: function (el) {\r\n        el = mini.byId(el);\r\n        if (!el) return;\r\n        try {\r\n            el.focus();\r\n        } catch (e) {\r\n        }\r\n        var start = 0, end = 0;\r\n        if (el.createTextRange && document.selection) {\r\n            //start\r\n            var r = document.selection.createRange().duplicate();\r\n            r.moveEnd('character', el.value.length);\r\n            if (r.text === '') {\r\n                start = el.value.length;\r\n            }\r\n            else {\r\n                start = el.value.lastIndexOf(r.text);\r\n            }\r\n\r\n            //end\r\n            var r = document.selection.createRange().duplicate();\r\n            r.moveStart('character', -el.value.length);\r\n            end = r.text.length;\r\n\r\n        } else {\r\n            start = el.selectionStart;\r\n            end = el.selectionEnd;\r\n        }\r\n\r\n        return [start, end];\r\n    }\r\n    //    setAttr: function (el, attr, value) {\r\n    //        //jQuery(el).attr(attr, value);\r\n\r\n    //    },\r\n    //    getAttr: function (el, attr) {\r\n    //        return jQuery(el).attr(attr);\r\n    //    },\r\n    //    removeAttr: function (el, attr) {\r\n    //        jQuery(el).removeAttr(attr, value);\r\n    //    }\r\n\r\n});\r\n(function () {\r\n    var fixAttr = {\r\n        tabindex: 'tabIndex',\r\n        readonly: 'readOnly',\r\n        'for': 'htmlFor',\r\n        'class': 'className',\r\n        maxlength: 'maxLength',\r\n        cellspacing: 'cellSpacing',\r\n        cellpadding: 'cellPadding',\r\n        rowspan: 'rowSpan',\r\n        colspan: 'colSpan',\r\n        usemap: 'useMap',\r\n        frameborder: 'frameBorder',\r\n        contenteditable: 'contentEditable'\r\n    };\r\n\r\n    var div = document.createElement('div');\r\n    div.setAttribute('class', 't');\r\n    var supportSetAttr = div.className === 't';\r\n\r\n    mini.setAttr = function (el, name, val) {\r\n        el.setAttribute(supportSetAttr ? name : (fixAttr[name] || name), val);\r\n    }\r\n\r\n    mini.getAttr = function (el, name) {\r\n        if(name == \"height\") return jQuery(el).attr(\"height\");\r\n\r\n        if(name == \"value\" && (isIE6 || isIE7)){\r\n            var a = el.attributes[name]\r\n            return a ? a.value : null;\r\n        }\r\n\r\n        if(!el.getAttribute) return null;\r\n\r\n        var v = el.getAttribute(supportSetAttr ? name : (fixAttr[name] || name));\r\n        \r\n        if(typeof v == \"function\" || name == \"maxLength\"){\r\n            var o = el.attributes[name];\r\n            if(o) v = o.value;\r\n        }\r\n\r\n        //onload\r\n        if(!v && name == \"onload\"){        \r\n            var node = el.getAttributeNode ? el.getAttributeNode(name) : null;\r\n            if(node){\r\n                v = node.nodeValue;\r\n            }\r\n        }\r\n\r\n        return v;\r\n    }\r\n//    mini.getAttr = function (el, name) {\r\n//        if (name == \"value\" && (isIE6 || isIE7)) {\r\n//            var a = el.attributes[name]\r\n//            return a ? a.value : null;\r\n//        }\r\n\r\n//        var v = el.getAttribute(supportSetAttr ? name : (fixAttr[name] || name));\r\n\r\n//        if (typeof v == \"function\") {\r\n//            v = el.attributes[name].value;\r\n//        }\r\n\r\n//        return v;\r\n//    }\r\n\r\n})()\r\n\r\n\r\n/* Html Event \r\n-----------------------------------------------------------------------------*/\r\n\r\n//mini_createOneDelegate = function (fn, scope) {\r\n//    if (!fn) return function () { };\r\n//    return function (e) {\r\n//        e = e || window.event;\r\n//        e.target = e.target || e.srcElement;\r\n//        var ret =  fn.apply(scope, arguments);\r\n//        if(ret === false) return false;\r\n//    }\r\n//}\r\n\r\n\r\nmini_preventDefault = function () {\r\n    if (window.event) {\r\n        window.event.returnValue = false;\r\n    }\r\n}\r\nmini_stopPropogation = function () {\r\n    if (window.event) {\r\n        window.event.cancelBubble = true;\r\n    }\r\n}\r\nmini_onOne = function (el, type, fn, scope) {\r\n    //    mini_on(el, type, fn, scope);\r\n    //    return;\r\n    if (!el) return;\r\n    var name = \"on\" + type.toLowerCase();\r\n    //el[name] = mini_createOneDelegate(fn, scope);\r\n    el[name] = function (e) {\r\n        e = e || window.event;\r\n        if (!e.target) {\r\n            e.target = e.srcElement;\r\n        }\r\n        if (!e.preventDefault) {\r\n            e.preventDefault = mini_preventDefault;\r\n        }\r\n        if (!e.stopPropogation) {\r\n            e.stopPropogation = mini_stopPropogation;\r\n        }\r\n        var ret = fn.call(scope, e);\r\n        if (ret === false) return false;\r\n    }\r\n}\r\n\r\n\r\n\r\nmini_on = function (el, type, fn, scope) {\r\n    el = mini.byId(el);\r\n    scope = scope || el;\r\n    if (!el || !type || !fn || !scope) return false\r\n    var listener = mini.findListener(el, type, fn, scope);\r\n    if (listener) return false;\r\n    var method = mini.createDelegate(fn, scope);\r\n    mini.listeners.push([el, type, fn, scope, method]);\r\n    if (mini.isFirefox && type == 'mousewheel') type = 'DOMMouseScroll';\r\n    jQuery(el).bind(type, method);\r\n};\r\nmini_un = function (el, type, fn, scope) {\r\n    el = mini.byId(el);\r\n    scope = scope || el;\r\n    if (!el || !type || !fn || !scope) return false\r\n    var listener = mini.findListener(el, type, fn, scope);\r\n    if (!listener) return false;\r\n    if (!mini._destroying) {\r\n        mini.listeners.remove(listener);\r\n    }\r\n    if (mini.isFirefox && type == 'mousewheel') type = 'DOMMouseScroll';\r\n    jQuery(el).unbind(type, listener[4]);\r\n};\r\nmini.copyTo(mini, {\r\n    listeners: [], //[el, type, fn, scope]    \r\n    on: mini_on,\r\n    un: mini_un,\r\n    _getListeners: function () {\r\n        var listeners = mini.listeners;\r\n        //        for (var i = listeners.length - 1; i >= 0; i--) {\r\n        //            var listener = listeners[i];\r\n        //            try {\r\n        //                if (listener[0] == 1\r\n        //                    && listener[1] == 1\r\n        //                    && listener[2] == 1\r\n        //                    && listener[3] == 1\r\n        //                ) {\r\n        //                    var m = 1;\r\n        //                }\r\n        //            } catch (ex) {\r\n        //                //跨iframe的事件绑定后，当iframe销毁，访问就出错\r\n        //                listeners.removeAt(i);\r\n        //            }\r\n        //        }\r\n        return listeners;\r\n    },\r\n    findListener: function (el, type, fn, scope) {\r\n        el = mini.byId(el);\r\n        scope = scope || el;\r\n        if (!el || !type || !fn || !scope) return false\r\n        var listeners = mini._getListeners();\r\n\r\n        for (var i = listeners.length - 1; i >= 0; i--) {\r\n            var listener = listeners[i];\r\n            try {\r\n                if (listener[0] == el\r\n                && listener[1] == type\r\n                && listener[2] == fn\r\n                && listener[3] == scope\r\n            ) {\r\n                    return listener;\r\n                }\r\n            } catch (ex) { }\r\n\r\n        }\r\n    },\r\n    clearEvent: function (el, type) {\r\n        el = mini.byId(el);\r\n        if (!el) return false;\r\n\r\n        if (mini._destroying) {\r\n            jQuery(el).unbind();\r\n            return;\r\n        }\r\n\r\n        var listeners = mini._getListeners();\r\n        for (var i = listeners.length - 1; i >= 0; i--) {\r\n            var listener = listeners[i];\r\n            //try {\r\n            if (listener[0] == el) {\r\n                if (!type || type == listener[1]) {\r\n                    mini.un(el, listener[1], listener[2], listener[3]);\r\n                }\r\n            }\r\n            //} catch (ex) { debugger }\r\n        }\r\n        el.onmouseover = el.onmousedown = null;\r\n    }\r\n    //    ,\r\n    //    fireEvent: function (el, type) {\r\n    //        \r\n    //    }\r\n});\r\n\r\n\r\n//window resize\r\nmini.__windowResizes = [];\r\nmini.onWindowResize = function (fn, scope) {\r\n    mini.__windowResizes.push([fn, scope]);\r\n}\r\nmini.on(window, \"resize\", function (e) {\r\n    var events = mini.__windowResizes;\r\n    for (var i = 0, l = events.length; i < l; i++) {\r\n        var event = events[i];\r\n        event[0].call(event[1], e);\r\n    }\r\n});\r\n\r\n\r\nmini.htmlEncode = function (str) {\r\n    if (typeof str !== \"string\") return str;\r\n    var s = \"\";\r\n    if (str.length == 0) return \"\";\r\n    s = str;\r\n    s = s.replace(/&/g, \"&amp;\");\r\n    s = s.replace(/</g, \"&lt;\");\r\n    s = s.replace(/>/g, \"&gt;\");\r\n    s = s.replace(/ /g, \"&nbsp;\");\r\n    s = s.replace(/\\'/g, \"&#39;\");\r\n    s = s.replace(/\\\"/g, \"&quot;\");\r\n    //s = s.replace(/\\n/g, \"<br>\");\r\n    return s;\r\n}\r\n\r\nmini.htmlDecode = function (str) {\r\n    if (typeof str !== \"string\") return str;\r\n    var s = \"\";\r\n    if (str.length == 0) return \"\";\r\n    s = str.replace(/&gt;/g, \"&\");\r\n    s = s.replace(/&lt;/g, \"<\");\r\n    s = s.replace(/&gt;/g, \">\");\r\n    s = s.replace(/&nbsp;/g, \" \");\r\n    s = s.replace(/&#39;/g, \"\\'\");\r\n    s = s.replace(/&quot;/g, \"\\\"\");\r\n    //s = s.replace(/<br>/g, \"\\n\");\r\n    return s;\r\n}\r\n\r\n/* Array \r\n-----------------------------------------------------------------------------*/\r\n\r\nmini.copyTo(Array.prototype, {\r\n    add: Array.prototype.enqueue = function (item) {\r\n        this[this.length] = item;\r\n        return this;\r\n    },\r\n    getRange: function (start, end) {\r\n        var arr = [];\r\n        for (var i = start; i <= end; i++) {\r\n            var o = this[i];\r\n            if (o) {\r\n                arr[arr.length] = o;\r\n            }\r\n        }\r\n        return arr;\r\n    },\r\n    addRange: function (array) {\r\n        for (var i = 0, j = array.length; i < j; i++) this[this.length] = array[i];\r\n        return this;\r\n    },\r\n    clear: function () {\r\n        this.length = 0;\r\n        return this;\r\n    },\r\n    clone: function () {\r\n        if (this.length === 1) {\r\n            return [this[0]];\r\n        }\r\n        else {\r\n            return Array.apply(null, this);\r\n        }\r\n    },\r\n    contains: function (item) {\r\n        return (this.indexOf(item) >= 0);\r\n    },\r\n    indexOf: function (item, from) {\r\n        var len = this.length;\r\n        for (var i = (from < 0) ? Math.max(0, len + from) : from || 0; i < len; i++) {\r\n            if (this[i] === item) return i;\r\n        }\r\n        return -1;\r\n    },\r\n    dequeue: function () {\r\n        return this.shift();\r\n    },\r\n    insert: function (index, item) {\r\n        this.splice(index, 0, item);\r\n        return this;\r\n    },\r\n    insertRange: function (index, items) {\r\n        for (var i = items.length - 1; i >= 0; i--) {\r\n            var item = items[i];\r\n            this.splice(index, 0, item);\r\n\r\n        }\r\n        return this;\r\n    },\r\n    remove: function (item) {\r\n        var index = this.indexOf(item);\r\n        if (index >= 0) {\r\n            this.splice(index, 1);\r\n        }\r\n        return (index >= 0);\r\n    },\r\n    removeAt: function (index) {\r\n        var ritem = this[index];\r\n        this.splice(index, 1);\r\n        return ritem;\r\n    },\r\n    removeRange: function (items) {\r\n        items = items.clone();\r\n        for (var i = 0, l = items.length; i < l; i++) {\r\n            this.remove(items[i]);\r\n        }\r\n    }\r\n});\r\n\r\n\r\n\r\n//////////////////////////////////////////////////////////\r\n\r\nmini.isShowBackdrop = !(mini.isIE && mini.IE_V <= 8);\r\n\r\n//if (mini.isIE && (window.navigator.userProfile + '') == 'null') {\r\n//    mini.is360 = true;\r\n//}\r\n\r\n\r\n\r\n//alert(mini.is360);\r\n\r\n\r\n//Mask\r\n//mini.LoadingText = \"Loading...\";\r\nmini._MaskID = 1;\r\nmini._MaskObjects = {};\r\nmini.mask = function (options) {\r\n    //{html, cls, style, opacity, background}\r\n\r\n    var el = mini.byId(options);\r\n    if (mini.isElement(el)) options = { el: el };\r\n    else if (typeof options == \"string\") options = { html: options };\r\n\r\n    options = mini.copyTo({\r\n        html: \"\",\r\n        cls: \"\",\r\n        style: \"\",\r\n        //opacity: .3,\r\n        backStyle: \"\"\r\n    }, options);\r\n    options.el = mini.byId(options.el);\r\n    if (!options.el) options.el = document.body;\r\n    var el = options.el;\r\n\r\n    mini[\"unmask\"](options.el);\r\n    el._maskid = mini._MaskID++;\r\n    mini._MaskObjects[el._maskid] = options;\r\n\r\n    var maskEl = mini.append(el, '<div class=\"mini-mask\">' +\r\n        '<div class=\"mini-mask-background\" style=\"' + options.backStyle + '\"></div>' +\r\n                        '<div class=\"mini-mask-msg ' + options.cls + '\" style=\"' + options.style + '\">' + options.html + '</div>'\r\n        + '</div>');\r\n    if (el == document.body) mini.addClass(maskEl, 'mini-fixed');\r\n\r\n    //if (!mini.isShowBackdrop) {\r\n        //$(maskEl).find('.mini-mask-background').css(\"display\", \"none\");\r\n    //}\r\n\r\n    options.maskEl = maskEl;\r\n    if (!mini.isNull(options.opacity)) {\r\n        mini.setOpacity(maskEl.firstChild, options.opacity);\r\n    }\r\n\r\n    function center() {\r\n        msgEl.style.display = \"block\";\r\n        var size = mini.getSize(msgEl);\r\n        msgEl.style.marginLeft = -size.width / 2 + \"px\";\r\n        msgEl.style.marginTop = -size.height / 2 + \"px\";\r\n        msgEl.style.zIndex = mini.getMaxZIndex();\r\n    }\r\n    var msgEl = maskEl.lastChild;\r\n    msgEl.style.display = \"none\";\r\n    //center();\r\n    setTimeout(function () {\r\n        center();\r\n    }, 0);\r\n\r\n    //    if (el == document.body) {\r\n    //        var vbox = mini.getViewportBox();\r\n    //        maskEl.style.height = vbox.height + \"px\";\r\n    //    }\r\n}\r\n\r\nmini[\"unmask\"] = function (el) {\r\n    el = mini.byId(el);\r\n    if (!el) el = document.body;\r\n    var options = mini._MaskObjects[el._maskid];\r\n    if (!options) return;\r\n    delete mini._MaskObjects[el._maskid];\r\n    var maskEl = options.maskEl;\r\n    options.maskEl = null;\r\n    if (maskEl && maskEl.parentNode) {\r\n        maskEl.parentNode.removeChild(maskEl);\r\n    }\r\n}\r\n\r\nmini.showMaskLoading = function (options) {\r\n    options = $.extend({\r\n        el: document.body,\r\n        cls: 'mini-mask-loading',\r\n        html: mini.Control.prototype.loadingMsg || 'Loading...'\r\n    }, options);\r\n    return mini.mask(options);\r\n}\r\n\r\n//mini.showMaskLoading();\r\n\r\n//setTimeout(function () {\r\n//    mini.unmask(document.body);\r\n//}, 2000);\r\n\r\n//////////////////////////////////////////\r\nmini.Cookie = {\r\n    get: function (sName) {\r\n        var aCookie = document.cookie.split(\"; \");\r\n        var lastMatch = null;\r\n        for (var i = 0; i < aCookie.length; i++) {\r\n            var aCrumb = aCookie[i].split(\"=\");\r\n            if (sName == aCrumb[0]) {\r\n                lastMatch = aCrumb;\r\n            }\r\n        }\r\n        if (lastMatch) {\r\n            var v = lastMatch[1];\r\n            if (v === undefined) return v;\r\n            return unescape(v);\r\n        }\r\n        return null;\r\n    },\r\n    set: function (name, value, expires, domain) {\r\n        var LargeExpDate = new Date();\r\n        if (expires != null) {\r\n            //LargeExpDate.setTime(LargeExpDate.getTime() + (expires*1000*3600*24));         \r\n\r\n            LargeExpDate = new Date(LargeExpDate.getTime() + (expires * 1000 * 3600 * 24)); //expires天数            \r\n        }\r\n\r\n        document.cookie = name + \"=\" + escape(value) + ((expires == null) ? \"\" : (\"; expires=\" + LargeExpDate.toGMTString())) + \";path=/\" + (domain ? \"; domain=\" + domain : \"\");\r\n    },\r\n    del: function (name, domain) {\r\n        this.set(name, null, -100, domain);\r\n    }\r\n};\r\n\r\n//////////////////////////////////////////\r\nmini.copyTo(mini, {\r\n    /*\r\n    var array = TreeToArray(dataTree.Root.Nodes, 'Nodes');\r\n    var array = TreeToArray(dataTree.Root.Nodes, 'Nodes', 'Id', 'ParentId', -1);\r\n    */\r\n    treeToArray: function (nodes, nodesField, idField, parentIdField, parentId) {\r\n        if (!nodesField) nodesField = 'children';\r\n        var array = [];\r\n        for (var i = 0, l = nodes.length; i < l; i++) {\r\n            var node = nodes[i];\r\n            array[array.length] = node;\r\n\r\n            if (parentIdField) node[parentIdField] = parentId;\r\n\r\n            var childrenNodes = node[nodesField];\r\n            if (childrenNodes && childrenNodes.length > 0) {\r\n                var id = node[idField];\r\n                var childrenArray = this.treeToArray(childrenNodes, nodesField, idField, parentIdField, id);\r\n                array.addRange(childrenArray);\r\n            }\r\n        }\r\n        return array;\r\n    },\r\n    /*\r\n    数组转树形\r\n    ArrayToTree(array, 'Nodes', '_Id', '_ParentId');\r\n    */\r\n    arrayToTree: function (data, nodesField, idField, parentIdField) {\r\n        if (!nodesField) nodesField = 'children';\r\n        idField = idField || '_id';\r\n        parentIdField = parentIdField || '_pid';\r\n\r\n        var nodes = [];\r\n\r\n        //建立快速索引\r\n        var idHash = {};\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var o = data[i];\r\n            if (!o) continue;\r\n            //var id = o[idField];\r\n            var id = mini._getMap(idField, o);\r\n            if (id !== null && id !== undefined) {\r\n                idHash[id] = o;\r\n            }\r\n            delete o[nodesField];\r\n        }\r\n\r\n        //数组转树形\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var o = data[i];\r\n            var pid = mini._getMap(parentIdField, o);\r\n            var p = idHash[pid];\r\n            if (!p) {\r\n                nodes.push(o);\r\n                continue;\r\n            }\r\n            if (!p[nodesField]) {\r\n                p[nodesField] = [];\r\n            }\r\n            p[nodesField].push(o);\r\n        }\r\n        return nodes;\r\n    }\r\n\r\n});\r\nmini.treeToList = mini.treeToArray;\r\nmini.listToTree = mini.arrayToTree;\r\n\r\nfunction UUID() {\r\n    var s = [], itoh = '0123456789ABCDEF'.split('');\r\n    for (var i = 0; i < 36; i++) s[i] = Math.floor(Math.random() * 0x10);\r\n    s[14] = 4;\r\n    s[19] = (s[19] & 0x3) | 0x8;\r\n    for (var i = 0; i < 36; i++) s[i] = itoh[s[i]];\r\n    s[8] = s[13] = s[18] = s[23] = '-';\r\n    return s.join('');\r\n}\r\n\r\n\r\nString.format = function (format) {\r\n    var args = Array.prototype.slice.call(arguments, 1);\r\n    format = format || \"\";\r\n    return format.replace(/\\{(\\d+)\\}/g, function (m, i) {\r\n        return args[i];\r\n    });\r\n}\r\nString.prototype.trim = function () {\r\n    var re = /^\\s+|\\s+$/g;\r\n    return function () { return this.replace(re, \"\"); };\r\n} ();\r\n\r\n\r\n\r\n//////////////////////////////////////////\r\nmini.copyTo(mini, {\r\n    measureText: function (el, text, style) {\r\n        if (!this.measureEl) {\r\n            this.measureEl = mini.append(document.body, '<div></div>');\r\n        }\r\n\r\n        this.measureEl.style.cssText = \"position:absolute;left:-1000px;top:-1000px;visibility:hidden;\";\r\n        if (typeof el == \"string\") {\r\n            this.measureEl.className = el;\r\n\r\n        } else {\r\n            this.measureEl.className = \"\";\r\n\r\n            var j1 = jQuery(el);\r\n            var j2 = jQuery(this.measureEl);\r\n            var csses = ['font-size', 'font-style', 'font-weight', 'font-family', 'line-height', 'text-transform', 'letter-spacing'];\r\n            for (var i = 0, l = csses.length; i < l; i++) {\r\n                var css = csses[i];\r\n                j2.css(css, j1.css(css));\r\n            }\r\n        }\r\n        if (style) mini.setStyle(this.measureEl, style);\r\n        this.measureEl.innerHTML = text;\r\n        return mini.getSize(this.measureEl);\r\n    }\r\n});\r\n\r\n\r\n//////////////////////////////////////////////////////////\r\nif (typeof mini_layoutOnParse == 'undefined') mini_layoutOnParse = true;\r\n\r\nmini.enableLayout = true;\r\n\r\nmini.autoParse = true;\r\n\r\njQuery(function () {\r\n\r\n    mini.updateDevice();\r\n\r\n    if (mini.autoParse) {\r\n        \r\n        //fix: requiredjs\r\n        setTimeout(function () {\r\n\r\n            //alert(new Date() -sss);\r\n            //判断：如果是ie6/7,把body自动修改overflow:visible    \r\n            //        if ((mini.getStyle(document.body, \"overflow\") == \"hidden\" || mini.getStyle(document.documentElement, \"overflow\") == \"hidden\")\r\n            //        && (isIE6 || isIE7)) {\r\n            //            //document.body.style.overFlow = \"visible\";\r\n            //            //document.documentElement.style.overFlow = \"visible\";\r\n            //            jQuery(document.body).css(\"overflow\", \"visible\");\r\n            //            jQuery(document.documentElement).css(\"overflow\", \"visible\");\r\n\r\n            //            //document.body.scroll = \"no\";\r\n\r\n            //            //alert(1);\r\n            //            //        jQuery(document.body).css(\"overflow\", \"hidden\");\r\n            //            //        jQuery(document.documentElement).css(\"overflow\", \"hidden\");\r\n            //        }\r\n\r\n            //判断：如果是ie6/7,把body自动修改overflow:visible   \r\n            var docEl = document.documentElement;\r\n            if ((isIE6 || isIE7) &&\r\n            (mini.getStyle(document.body, \"overflow\") == \"hidden\" || (docEl && mini.getStyle(docEl, \"overflow\") == \"hidden\"))\r\n        ) {\r\n                jQuery(document.body).css(\"overflow\", \"visible\");\r\n                if (docEl) jQuery(docEl).css(\"overflow\", \"visible\");\r\n\r\n            }\r\n\r\n\r\n            mini.__LastWindowWidth = document.documentElement.clientWidth;\r\n            mini.__LastWindowHeight = document.documentElement.clientHeight;\r\n\r\n            var sss = new Date();\r\n            mini.isReady = true;\r\n            mini.parse(null, mini_layoutOnParse);\r\n            mini._FireBindEvents();\r\n\r\n            //    mini.enableLayout = true;\r\n            //    mini.layout();\r\n\r\n            //    mini.enableLayout = true;\r\n            //    mini.layout(null);\r\n        }, 1);\r\n\r\n    }\r\n});\r\nmini_onload = function (e) {\r\n    //alert(mini_layoutOnParse ? false : true);\r\n\r\n    mini.on(window, \"resize\", mini_onresize);\r\n    //mini.repaint(document.body);    //\r\n\r\n    //mini.layout(null);\r\n}\r\nmini.on(window, \"load\", mini_onload);\r\n\r\nmini.__LastWindowWidth = document.documentElement.clientWidth;\r\nmini.__LastWindowHeight = document.documentElement.clientHeight;\r\nmini.doWindowResizeTimer = null;\r\n\r\nmini.allowLayout = true;\r\n\r\n\r\n\r\n//var count = 0;\r\nmini_onresize = function (e) {\r\n\r\n    mini.updateDevice();\r\n\r\n    //document.title = count++;\r\n    if (mini.doWindowResizeTimer) {\r\n        clearTimeout(mini.doWindowResizeTimer);\r\n    }\r\n    mini.WindowVisible = mini.isWindowDisplay();\r\n    if (mini.WindowVisible == false || mini.allowLayout == false) return;\r\n\r\n    if (typeof Ext != \"undefined\") {\r\n        mini.doWindowResizeTimer = setTimeout(function () {\r\n            var __LastWindowWidth = document.documentElement.clientWidth;\r\n            var __LastWindowHeight = document.documentElement.clientHeight;\r\n            if (mini.__LastWindowWidth == __LastWindowWidth && mini.__LastWindowHeight == __LastWindowHeight) {\r\n            } else {\r\n\r\n                mini.__LastWindowWidth = __LastWindowWidth;\r\n                mini.__LastWindowHeight = __LastWindowHeight;\r\n\r\n                \r\n                mini.layout(null, false);\r\n            }\r\n            mini.doWindowResizeTimer = null;\r\n        }, 300);\r\n    } else {\r\n        var deferTime = 100;\r\n        try {\r\n            if (parent && parent != window && parent.mini) {\r\n                deferTime = 0;\r\n            }\r\n        } catch (ex) {\r\n        }\r\n        mini.doWindowResizeTimer = setTimeout(function () {\r\n            var __LastWindowWidth = document.documentElement.clientWidth;\r\n            var __LastWindowHeight = document.documentElement.clientHeight;\r\n            //            if (__LastWindowHeight == 0 || __LastWindowHeight == 0) {\r\n            //                mini.doWindowResizeTimer = null;\r\n            //                return;\r\n            //            }\r\n            if (mini.__LastWindowWidth == __LastWindowWidth && mini.__LastWindowHeight == __LastWindowHeight) {\r\n            } else {\r\n\r\n                mini.__LastWindowWidth = __LastWindowWidth;\r\n                mini.__LastWindowHeight = __LastWindowHeight;\r\n\r\n                \r\n                mini.layout(null, false);\r\n            }\r\n            mini.doWindowResizeTimer = null;\r\n        }, deferTime);\r\n    }\r\n}\r\n\r\n\r\n\r\n//////////////////////////////////////////////////\r\nmini.isDisplay = function (p, body) {\r\n    var doc = body || document.body;\r\n    while (1) {\r\n        if (p == null || !p.style) return false;\r\n        if (p && p.style && p.style.display == \"none\") return false;\r\n        if (p == doc) return true;\r\n\r\n        p = p.parentNode;\r\n\r\n    }\r\n    return true;\r\n};\r\n\r\n\r\nmini.isWindowDisplay = function () {\r\n    try {\r\n        var parentWindow = window.parent;\r\n        var isIFrame = parentWindow != window;\r\n\r\n        if (isIFrame) {\r\n            var _iframes = parentWindow.document.getElementsByTagName(\"iframe\");\r\n            var _frames = parentWindow.document.getElementsByTagName(\"frame\");\r\n            var iframes = [];\r\n            for (var i = 0, l = _iframes.length; i < l; i++) {\r\n                iframes.push(_iframes[i]);\r\n            }\r\n            for (var i = 0, l = _frames.length; i < l; i++) {\r\n                iframes.push(_frames[i]);\r\n            }\r\n\r\n            var iframe = null;\r\n            for (var i = 0, l = iframes.length; i < l; i++) {\r\n                var el = iframes[i];\r\n                if (el.contentWindow == window) {\r\n                    iframe = el;\r\n                    break;\r\n                }\r\n            }\r\n            if (!iframe) return false;\r\n\r\n            return mini.isDisplay(iframe, parentWindow.document.body);\r\n\r\n\r\n        } else {\r\n            return true;\r\n        }\r\n    } catch (e) {\r\n        return true;\r\n    }\r\n};\r\n/////////////////////////////////////////////////////\r\n\r\nmini.WindowVisible = mini.isWindowDisplay();\r\n\r\n//var __MiniWindowTimer = setInterval(function () {\r\n//    var visible = mini.isWindowDisplay();    \r\n//    if (visible == true) {\r\n//        mini.WindowVisible = true;\r\n//        clearInterval(__MiniWindowTimer);\r\n//        if (visible != mini.WindowVisible) {\r\n//            mini.layout();\r\n//        }\r\n//    }\r\n//}, 150);\r\n\r\n/*\r\n是否跟mini加一个定时判断。\r\n判断iframe什么时候被隐藏，再次显示的时候，就layout一下？\r\n\r\n是否定义一个方法，专门用来调用iframe的layout，以达到自适应尺寸的目的？\r\nmini.layout();\r\nmini.layoutIFrames();\r\n\r\n*/\r\n//以后去除的话，提供一个全局变量\r\nmini.layoutIFrames = function (parentNode) {\r\n\r\n    \r\n\r\n    if (!document.body) return;\r\n    if (!parentNode) parentNode = document.body;\r\n    var iframes = parentNode.getElementsByTagName(\"iframe\");\r\n\r\n    //alert(iframes.length);\r\n\r\n    setTimeout(function () {\r\n        for (var i = 0, l = iframes.length; i < l; i++) {\r\n            var el = iframes[i];\r\n            try {\r\n                if (mini.isDisplay(el) && mini.isAncestor(parentNode, el)) {\r\n                    if (el.contentWindow.mini) {\r\n                        if (el.contentWindow.mini.WindowVisible == false) {\r\n                            el.contentWindow.mini.WindowVisible = el.contentWindow.mini.isWindowDisplay();\r\n                            el.contentWindow.mini.layout();\r\n                        } else {\r\n                            el.contentWindow.mini.layout(null, false);\r\n                        }\r\n                    }\r\n                    el.contentWindow.mini.layoutIFrames();\r\n                }\r\n            } catch (ex) { }\r\n        }\r\n    }, 30);\r\n}\r\n\r\n\r\njQuery.ajaxSetup({\r\n    cache: false\r\n})\r\n\r\n/////////////\r\nif (isIE) {\r\n    setInterval(function () {     //尝试去掉\r\n        //CollectGarbage();\r\n    }, 20000);\r\n}\r\n\r\n//__fixFlash = function () {\r\n//    var found = window[\"__flash__removeCallback\"];\r\n//    if (found) {\r\n//        clearInterval(__fixFlash_timer);\r\n//        window[\"__flash__removeCallback\"] = function (instance, name) {\r\n//            try {\r\n//                if (instance) {\r\n//                    instance[name] = null;\r\n//                }\r\n//            } catch (flashEx) {\r\n//            }\r\n//        }\r\n//    }\r\n//}\r\n//__fixFlash_timer = setInterval(__fixFlash, 100);\r\n\r\n\r\n\r\nmini_unload = function (e) {\r\n    //var sss = new Date();\r\n\r\n    //alert(\"unload\");\r\n    //debugger\r\n\r\n\r\n    //alert(\"unload\");\r\n\r\n    try {\r\n        var win = mini._getTopWindow();\r\n        win[mini._WindowID] = '';\r\n        delete win[mini._WindowID];\r\n    } catch (ex) {\r\n\r\n    }\r\n\r\n    //iframe\r\n    var iframes = document.body.getElementsByTagName(\"iframe\");\r\n    if (iframes.length > 0) {\r\n\r\n        var IFrames = [];\r\n        for (var i = 0, l = iframes.length; i < l; i++) {\r\n            IFrames.push(iframes[i]);\r\n        }\r\n\r\n        for (var i = 0, l = IFrames.length; i < l; i++) {\r\n            try {\r\n                var iframe = IFrames[i];\r\n                iframe._ondestroy = null;\r\n                iframe.onload = function () { };\r\n                jQuery(iframe).unbind(\"load\");\r\n                iframe.src = \"\";\r\n                if (mini.isIE) {\r\n                    try {\r\n                        iframe.contentWindow.document.write(\"\");\r\n                        iframe.contentWindow.document.close();\r\n                    } catch (ex) { }\r\n                }\r\n                if (iframe.parentNode) iframe.parentNode.removeChild(iframe);\r\n            } catch (e) { }\r\n        }\r\n    }\r\n\r\n    //========================================================\r\n\r\n    mini._destroying = true;\r\n\r\n    //    var count = 0;\r\n    //    \r\n    //    var map = {\r\n    //        'textbox': 1,\r\n    //        'buttonedit': 1,\r\n    //        'combobox': 1,\r\n    //        'autocomplete': 1,\r\n    //        'datepicker': 1,\r\n    //        'calendar': 1,\r\n    //        'panel': 1,\r\n    //        'tabs': 1,\r\n    //        'spinner': 1,\r\n    //        'hidden': 1,\r\n    //        'textarea': 1,\r\n    //        'button': 1,\r\n    //        'datagrid': 1,\r\n    //        'window': 1,\r\n    //        'toolbar': 1,\r\n    //        'listbox': 1,\r\n    //        'popup': 1,\r\n    //        'timespinner': 1,\r\n    //        'fileupload': 1,\r\n    //        'menu': 1,\r\n    //        'fit': 1,\r\n\r\n    //        'datagrid': 1,\r\n\r\n    //        'pager': 1\r\n    //    };\r\n\r\n    var cs = mini.getComponents().clone();\r\n    for (var i = 0, l = cs.length; i < l; i++) {\r\n        var control = cs[i];\r\n        if (control.destroyed !== true) {\r\n           \r\n            control.destroy(false);\r\n         \r\n        }\r\n    }\r\n\r\n\r\n\r\n    cs.length = 0;\r\n    cs = null;\r\n\r\n    //mini.components = mini.uids = mini.classes = mini.uiClasses = null;\r\n\r\n    mini.clearEvent(window);\r\n    mini.clearEvent(document);\r\n\r\n    mini.un(window, \"unload\", mini_unload);\r\n    mini.un(window, \"load\", mini_onload);\r\n    mini.un(window, \"resize\", mini_onresize);\r\n\r\n    mini.components = {};\r\n    mini.classes = {};\r\n    mini.uiClasses = {};\r\n    mini.uids = {};\r\n    mini.listeners.length = 0;\r\n\r\n    mini._topWindow = null;\r\n    window.mini = null;\r\n    window.Owner = null;\r\n    window.CloseOwnerWindow = null;\r\n\r\n    //    try {\r\n    //        //CollectGarbage();\r\n    //    } catch (e) { }\r\n\r\n    //alert(new Date() - sss);\r\n\r\n    //会造成小的内存泄漏\r\n    //window.onerror = function () { return true; };\r\n\r\n\r\n    //parent.document.title = \"unload\" + new Date().getTime();\r\n}\r\nmini.on(window, \"unload\", mini_unload);\r\n\r\n\r\n\r\n\r\n////监听出路滚轮事件，处理popupedit\r\n//mini.on(document, \"mousewheel\", function (e) {\r\n//    var popups = mini.findControls(function (c) {\r\n//        if (c.isShowPopup && c.isShowPopup() && !c.within(e)) {\r\n//            //c.hidePopup();\r\n//        }\r\n//    });\r\n//    //document.title = new Date().getTime();\r\n//});\r\n\r\n///////////////////////////\r\n//iframe mousedown/click\r\n//function __OnIFrameMouseDown() {\r\n//    \r\n//    jQuery(document).trigger(\"mousedown\");\r\n//}\r\nfunction __BindIFrames() {\r\n\r\n    //if (mini.isIE10) return;\r\n\r\n//    function bind(win, doc) {\r\n//        jQuery(doc).bind(\"mousedown.mini\", __OnIFrameMouseDown);\r\n//        jQuery(win).bind(\"unload.mini\", function () {\r\n//            try {\r\n//                jQuery(win).off(\".mini\");\r\n//                jQuery(doc).off(\".mini\");\r\n//            } catch (e) { }\r\n//        });\r\n//    }\r\n\r\n//    var iframes = document.getElementsByTagName(\"iframe\");\r\n//    for (var i = 0, l = iframes.length; i < l; i++) {\r\n//        var iframe = iframes[i];\r\n\r\n//        try {\r\n//            var win = iframe.contentWindow,\r\n//                doc = iframe.contentWindow.document;\r\n\r\n//            if (win && doc && !win.__mousedownbinded) {\r\n//                win.__mousedownbinded = true;\r\n\r\n//                bind(win, doc);\r\n//                \r\n//            }\r\n//        } catch (e) {\r\n//            \r\n//         }\r\n\r\n//    }\r\n}\r\n//setInterval(function () {\r\n//    __BindIFrames();\r\n//}, 1500);\r\n\r\n\r\nmini.zIndex = 1000;\r\nmini.zindex = mini.getMaxZIndex = function () {\r\n    return mini.zIndex++;\r\n}\r\n\r\n/////////////////////////\r\nfunction js_isTouchDevice() {\r\n    try {\r\n        document.createEvent(\"TouchEvent\");\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n}\r\nfunction js_touchScroll(id) {\r\n    if (js_isTouchDevice()) { //if touch events exist...\r\n        var el = typeof id == \"string\" ? document.getElementById(id) : id;\r\n        var scrollStartPos = 0;\r\n\r\n        el.addEventListener(\"touchstart\", function (event) {\r\n            scrollStartPos = this.scrollTop + event.touches[0].pageY;\r\n            event.preventDefault();\r\n        }, false);\r\n\r\n        el.addEventListener(\"touchmove\", function (event) {\r\n            this.scrollTop = scrollStartPos - event.touches[0].pageY;\r\n            event.preventDefault();\r\n        }, false);\r\n    }\r\n}\r\n\r\n\r\n\r\n///////////////////////////////////////////////////////////\r\n/* position \r\n-----------------------------------------------------------------------------*/\r\n//mini.showAtEl = function (options) {\r\n//    var c = {\r\n//        atCls: \"\",\r\n\r\n//        el: null,\r\n//        atEl: null,\r\n//        xAlign: \"left\",         //outleft,left,center,right,outright\r\n//        yAlign: \"below\",        //above, top, middle, bottom, below\r\n//        xOffset: 0,\r\n//        yOffset: 0,\r\n//        renderBody: true,\r\n//        onbeforeopen: function () { },\r\n//        onopen: function () { },\r\n//        onoutclick: function (htmlEvent) { },\r\n\r\n//        width: \"\",          //auto的时候，才measure\r\n//        height: \"\",         //auto的时候，才measure\r\n//        minWidth: 0,        //只有当width|height为auto的时候生效\r\n//        minHeight: 0,\r\n//        maxWidth: 2000,\r\n//        maxHeight: 2000\r\n//    };\r\n//    mini.copyTo(c, options);\r\n\r\n//    var el = mini.byId(c.el);\r\n//    var atEl = mini.byId(c.atEl);\r\n//    if (!atEl || !el) return;\r\n\r\n//    if (c.onbeforeopen() === false) return;\r\n\r\n//    //popupCls\r\n//    mini.addClass(atEl, c.atCls);\r\n\r\n//    //render\r\n//    if (!mini.isRendered(el) || (c.renderBody && el.parentNode != document.body)) {\r\n//        document.body.appendChild(el);\r\n//    }\r\n\r\n//    //do show    \r\n//    el.style.display = \"block\";\r\n//    el.style.position = \"absolute\";\r\n//    el.style.zIndex = __js_getMaxZIndex();\r\n\r\n//    //size\r\n//    mini.measureSize(c);\r\n\r\n//    //xy\r\n\r\n//    var vbox = mini.getBox(el.parentNode);\r\n//    var box = mini.getBox(el);\r\n//    var pbox = mini.getBox(atEl);\r\n\r\n//    var h = c.xAlign, v = c.yAlign;\r\n\r\n//    switch (c.xAlign) {\r\n//        case \"outleft\":\r\n//            x = pbox.x - box.width;\r\n//            break;\r\n//        case \"left\":\r\n//            x = pbox.x;\r\n//            break;\r\n//        case \"center\":\r\n//            x = pbox.x + pbox.width / 2 - box.width / 2;\r\n//            break;\r\n//        case \"right\":\r\n//            x = pbox.right - box.width;\r\n//            break;\r\n//        case \"outright\":\r\n//            x = pbox.right;\r\n//            break;\r\n//        default:\r\n\r\n//            break;\r\n//    }\r\n\r\n//    switch (c.yAlign) {\r\n//        case \"above\":\r\n//            y = pbox.y - box.height;\r\n//            break;\r\n//        case \"top\":\r\n//            y = pbox.y;\r\n//            break;\r\n//        case \"middle\":\r\n//            y = pbox.y + pbox.height / 2 - box.height / 2;\r\n//            break;\r\n//        case \"bottom\":\r\n//            y = pbox.bottom - box.height;\r\n//            break;\r\n//        case \"below\":\r\n//            y = pbox.bottom;\r\n//            break;\r\n//        default:\r\n\r\n//            break;\r\n//    }\r\n\r\n//    //out xAlign\r\n//    if (c.xAlign == \"outright\") {   //一般用于menu\r\n//        if (x + box.width > vbox.right) {\r\n//            var left = pbox.x - vbox.x;\r\n//            var right = vbox.right - pbox.right;\r\n//            if (left > right) {\r\n//                x = pbox.x - box.width;\r\n//            }\r\n//        }\r\n//    }\r\n//    //out xAlign\r\n//    if (c.xAlign == \"left\") {\r\n//        if (x + box.width > vbox.right) {\r\n//            var left = pbox.x - vbox.x;\r\n//            var right = vbox.right - pbox.right;\r\n//            if (left > right) {\r\n//                x = pbox.right - box.width;\r\n//            }\r\n//        }\r\n//    }\r\n\r\n//    //out yAlign\r\n//    if (c.yAlign == \"below\") {   //一般用于combobox/datepicker            \r\n//        if (y + box.height > vbox.bottom) {\r\n//            var top = pbox.y - vbox.y;\r\n//            var bottom = vbox.bottom - pbox.bottom;\r\n//            if (top > bottom) {\r\n//                y = pbox.y - box.height;\r\n//            }\r\n//        }\r\n//    }\r\n//    //out yAlign\r\n//    if (c.yAlign == \"top\") {\r\n//        if (y + box.height > vbox.bottom) {\r\n//            var top = pbox.y - vbox.y;\r\n//            var bottom = vbox.bottom - pbox.bottom;\r\n//            if (top > bottom) {\r\n//                y = pbox.bottom - box.height;\r\n//            }\r\n//        }\r\n//    }\r\n\r\n//    x = parseInt(x);\r\n//    y = parseInt(y);\r\n\r\n//    mini.setXY(el, x, y);\r\n\r\n//    __js_addShowOptions(c);\r\n\r\n//    mini.layout(c.el);\r\n\r\n//    c.onopen();\r\n//    return c;\r\n//}\r\n//mini.showAtPos = function (options) {\r\n//    var c = {\r\n//        el: null,\r\n//        x: \"center\",            //outleft,left,center,right,outright\r\n//        y: \"middle\",            //above, top, middle, bottom, below\r\n//        xOffset: 0,\r\n//        yOffset: 0,\r\n//        renderBody: false,\r\n//        onbeforeopen: function () { },\r\n//        onopen: function () { },\r\n//        onoutclick: function (htmlEvent) { },\r\n\r\n//        width: \"\",          //auto的时候，才measure\r\n//        height: \"\",         //auto的时候，才measure\r\n//        minWidth: 0,        //只有当width|height为auto的时候生效\r\n//        minHeight: 0,\r\n//        maxWidth: 2000,\r\n//        maxHeight: 2000,\r\n\r\n//        fixed: false,\r\n\r\n//        animate: false\r\n//    };\r\n//    mini.copyTo(c, options);\r\n\r\n//    var el = mini.byId(c.el);\r\n//    if (!el) return;\r\n\r\n//    if (c.onbeforeopen() === false) return;\r\n\r\n//    //render\r\n//    var renderBody = c.renderBody || c.fixed;\r\n//    if (!mini.isRendered(el) || (renderBody && el.parentNode != document.body)) {\r\n//        document.body.appendChild(el);\r\n//    }\r\n\r\n//    //do show\r\n//    el.style.display = \"block\";\r\n//    el.style.position = \"absolute\";\r\n//    el.style.zIndex = __js_getMaxZIndex();\r\n\r\n//    //size\r\n//    mini.measureSize(c);\r\n\r\n//    //x, y\r\n\r\n//    var vbox = mini.getBox(el.parentNode);\r\n//    var box = mini.getBox(el);\r\n\r\n//    var x = c.x;\r\n//    var y = c.y;\r\n//    if (!x) x = \"center\";\r\n//    if (!y) y = \"middle\";\r\n\r\n//    if (!c.fixed || mini.isIE6) {\r\n//        if (x == \"left\") x = vbox.x + c.xOffset;\r\n//        if (x == 'center') x = vbox.x + vbox.width / 2 - box.width / 2;\r\n//        if (x == \"right\") x = vbox.right - box.width - c.xOffset;\r\n\r\n//        if (y == \"top\") y = vbox.y + c.yOffset;\r\n//        if (y == \"middle\") y = vbox.y + vbox.height / 2 - box.height / 2;\r\n//        if (y == \"bottom\") y = vbox.bottom - box.height - c.yOffset;\r\n\r\n//        if (x + box.width > vbox.right) x = vbox.right - box.width;\r\n//        if (y + box.height > vbox.bottom) y = vbox.bottom - box.height;\r\n\r\n//        mini.setXY(el, x, y);\r\n//    } else {\r\n//        //fixed\r\n//        var s = el.style;\r\n//        s.margin = 0;\r\n//        s.position = \"fixed\";\r\n//        s.left = s.top = s.right = s.bottom = \"auto\";\r\n//        s[\"margin-top\"] = s[\"margin-left\"] = \"0px\";\r\n//        //x\r\n//        if (mini.isNumber(x)) s.left = x + \"px\";\r\n//        if (x == \"left\") {\r\n//            s.left = c.xOffset + \"px\";\r\n//        }\r\n//        if (x == \"center\") {\r\n//            s.left = \"50%\";\r\n//            s[\"margin-left\"] = (-box.width / 2) + \"px\";\r\n//        }\r\n//        if (x == \"right\") {\r\n//            s.right = c.xOffset + \"px\";\r\n//        }\r\n//        //y\r\n//        if (mini.isNumber(y)) s.top = y + \"px\";\r\n//        if (y == \"top\") {\r\n//            s.top = c.yOffset + \"px\";\r\n//        }\r\n//        if (y == \"middle\") {\r\n//            s.top = \"50%\";\r\n//            s[\"margin-top\"] = (-box.height / 2) + \"px\";\r\n//        }\r\n//        if (y == \"bottom\") {\r\n//            s.bottom = c.yOffset + \"px\";\r\n//        }\r\n//    }\r\n//    __js_addShowOptions(c);\r\n\r\n//    mini.layout(c.el);\r\n\r\n//    c.onopen();\r\n\r\n//    //__js_pos_animate(c);\r\n\r\n//    return c;\r\n//}\r\n//mini.measureSize = function (options) {\r\n//    var c = {\r\n//        el: null,\r\n//        width: \"\",          //auto的时候，才measure\r\n//        height: \"\",         //auto的时候，才measure\r\n//        minWidth: 0,        //只有当width|height为auto的时候生效\r\n//        minHeight: 0,\r\n//        maxWidth: 2000,\r\n//        maxHeight: 2000\r\n//    };\r\n//    mini.copyTo(c, options);\r\n//    var el = mini.byId(c.el);\r\n//    if (!el || mini.isDisplay(el) == false) return;\r\n\r\n//    //min, max\r\n//    if (c.width == \"auto\") {\r\n//        el.style.width = \"auto\";\r\n//        var size = mini.getSize(el);\r\n//        if (size.width > c.maxWidth) {\r\n//            mini.setWidth(el, c.maxWidth);\r\n//            size = mini.getSize(el);\r\n//        }\r\n//        if (size.width < c.minWidth) {\r\n//            mini.setWidth(el, c.minWidth);\r\n//            box = mini.getSize(el);\r\n//        }\r\n//    }\r\n//    if (c.height == \"auto\") {\r\n//        el.style.height = \"auto\";\r\n//        var size = mini.getSize(el);\r\n//        if (size.height > c.maxHeight) {\r\n//            mini.setHeight(el, c.maxHeight);\r\n//            box = mini.getSize(el);\r\n//        }\r\n//        if (size.height < c.minHeight) {\r\n//            mini.setHeight(el, c.minHeight);\r\n//        }\r\n//    }\r\n//}\r\n\r\n//__js__showOptions = [];\r\n//__js_addShowOptions = function (op) {\r\n//    for (var i = __js__showOptions.length - 1; i >= 0; i--) {\r\n//        var o = __js__showOptions[i];\r\n//        if (o.el == op.el) {\r\n//            __js__showOptions.removeAt(i);\r\n//        }\r\n//    }\r\n//    __js__showOptions.push(op);\r\n//}\r\n//mini.on(document, \"mousedown\", function (e) {\r\n\r\n//    function within(e, el) {\r\n//        if (mini.isAncestor(el, e.target)) return true;\r\n//        var controls = mini.getChildControls(el);\r\n//        for (var i = 0, l = controls.length; i < l; i++) {\r\n//            var c = controls[i];\r\n//            if (c.within(e)) return true;\r\n//        }\r\n//        return false;\r\n//    }\r\n\r\n//    for (var i = __js__showOptions.length - 1; i >= 0; i--) {\r\n//        var o = __js__showOptions[i];\r\n//        var el = o.el;\r\n//        if (mini.isDisplay(el) == false) continue;\r\n//        var atEl = o.atEl;\r\n//        var ret1 = within(e, el);\r\n//        var ret2 = within(e, atEl);\r\n//        if (ret1 || ret2) {\r\n//        } else {\r\n//            var ret = o.onoutclick(e);\r\n//            if (ret !== false) {\r\n//                if (atEl) mini.removeClass(atEl, o.atCls);\r\n//            }\r\n//        }\r\n//    }\r\n\r\n//});\r\n\r\n\r\n/////////////////////////////////////\r\nmini._placeholder = function (el) {\r\n    el = mini.byId(el);\r\n    if (!el || !isIE || isIE10 || isIE11) {\r\n        //var text = el.placeholder;\r\n        //el.placeholder = text.replace(/<br(\\/)*>/g, \"\\r\\n\");\r\n        return;\r\n    }\r\n\r\n    function doLabel() {\r\n        var label = el._placeholder_label;\r\n\r\n        if (!label) return;\r\n\r\n        var placeholder = el.getAttribute(\"placeholder\");\r\n        if (!placeholder) placeholder = el.placeholder;\r\n        //if (!el.value && !el.disabled) {\r\n        if (!el.value) {\r\n            label.innerHTML = placeholder;\r\n            label.style.display = \"\";\r\n        } else {\r\n            label.style.display = \"none\";\r\n        }\r\n    }\r\n\r\n    if (el._placeholder) {\r\n        doLabel();\r\n        return;\r\n    }\r\n    el._placeholder = true;\r\n\r\n    var label = document.createElement(\"label\");\r\n    label.className = \"mini-placeholder-label\";\r\n    el.parentNode.appendChild(label);\r\n    el._placeholder_label = label;\r\n\r\n    label.onmousedown = function () {\r\n        \r\n        try {\r\n            el.focus();\r\n        } catch (e) {\r\n        }\r\n    }\r\n\r\n    //ie 专用\r\n    el.onpropertychange = function (e) {\r\n        e = e || window.event;\r\n        if (e.propertyName == \"value\") {\r\n\r\n            doLabel();\r\n        }\r\n    }\r\n\r\n    doLabel();\r\n\r\n    //events\r\n    mini.on(el, \"focus\", function (e) {\r\n        if (!el.readOnly) {\r\n            label.style.display = \"none\";\r\n        }\r\n    });\r\n    mini.on(el, \"blur\", function (e) {\r\n        doLabel();\r\n    });\r\n\r\n}\r\n\r\n\r\n////////////////////////////////////////////////\r\n\r\nmini.ajax = function (options) {\r\n    \r\n    if (!options.dataType) {\r\n        options.dataType = \"text\";\r\n    }\r\n    //    if (!options.contentType) {\r\n    //        options.dataType = \"text\";\r\n//    }    \r\n    return window.jQuery.ajax(options);\r\n}\r\n////////////////////////////////////////////////\r\nmini._evalAjaxData = function (ajaxData, scope) {\r\n    var obj = ajaxData;\r\n    var t = typeof ajaxData;\r\n    if (t == \"string\") {\r\n        obj = window[\"ev\"+\"al\"](\"(\" + ajaxData + \")\");\r\n        if (typeof obj == \"function\") {\r\n            obj = obj.call(scope);\r\n        }\r\n    }\r\n    return obj;\r\n}\r\n\r\n\r\n//jquery兼容处理\r\n\r\nvar hasOn = !!jQuery.fn.on;\r\n\r\nif (!jQuery.fn.on) {\r\n    jQuery.fn.on = function (type, selector, data, fn) {\r\n        //return this.live(type, data, fn, selector);\r\n        //if (typeof selector == \"string\") {\r\n            return this.delegate(selector, type, data, fn);\r\n//        } else {\r\n//            return this.bind(type, data, fn);\r\n//        }\r\n    }\r\n}\r\n\r\n\r\n//mini.replaceHtml = function(el, html) {\r\n//    var oldEl = typeof el === \"string\" ? document.getElementById(el) : el;\r\n//    /*@cc_on // Pure innerHTML is slightly faster in IE\r\n//    oldEl.innerHTML = html;\r\n//    return oldEl;\r\n//    @*/\r\n//    var newEl = oldEl.cloneNode(false);\r\n//    newEl.innerHTML = html;\r\n//    oldEl.parentNode.replaceChild(newEl, oldEl);\r\n//    /* Since we just removed the old element from the DOM, return a reference\r\n//    to the new element, which can be used to restore variable references. */\r\n//    return newEl;\r\n//};\r\n\r\n\r\n//响应式布局\r\n\r\nmini._lastDevice;\r\nmini.updateDevice = function () {\r\n    var cls = \"mini-xs\",\r\n        width = jQuery(window).width(),\r\n        type = \"xs\";\r\n\r\n    if (width > 768) {\r\n        cls += \" mini-sm\";\r\n        type = \"sm\";\r\n    }\r\n    if (width > 992) {\r\n        cls += \" mini-md\";\r\n        type = \"md\";\r\n    }\r\n    if (width > 1200) {\r\n        cls += \" mini-lg\";\r\n        type = \"lg\";\r\n    }\r\n\r\n    cls += ' mini-' + type + \"-active\";\r\n\r\n    if (mini._lastDevice == type) return;\r\n\r\n    jQuery(document.documentElement)\r\n        .removeClass(\"mini-xs mini-sm mini-md mini-lg mini-xs-active mini-sm-active mini-md-active mini-lg-active \")\r\n        .addClass(cls);\r\n\r\n    if (mini._lastDevice != type) {\r\n\r\n        jQuery(window).triggerHandler(\"devicechange\", type);\r\n    }\r\n\r\n    mini._lastDevice = type;\r\n}\r\n\r\nmini.getClipboard = function (e) {\r\n    var text = '';\r\n    if (window.clipboardData) {\r\n        text = window.clipboardData.getData(\"Text\");\r\n    } else if (e) {\r\n        text = e.clipboardData.getData(\"text/plain\")\r\n    }\r\n    return text;\r\n}\r\nmini.setClipboard = function (text) {\r\n    if (window.clipboardData) {\r\n        window.clipboardData.setData(\"Text\", text);\r\n    } else {\r\n        var node = jQuery('<textarea style=\"position:absolute;left:0;top:-1000px;width:100px;z-index:1000;\"></textarea>').appendTo('body').val(text)[0];\r\n        node.select();\r\n        node.focus();\r\n        document.execCommand('copy');\r\n        \r\n    }\r\n}\r\n\r\n\r\nmini.getActiveElement = function () {\r\n    try {\r\n        return document.activeElement;\r\n    } catch (ex) {\r\n    }\r\n}\r\n\r\n\r\n\r\nmini.getScrollOffset = function () {\r\n    if (!mini._scrollOffset) {\r\n//        var el = document.createElement('div');\r\n//        //el.style.cssText = 'width:100px;background:#eee;height:50px;overflow:scroll;padding:1px;position:absolute;left:-1000px;top:0;';\r\n//        el.style.cssText = 'width:100px;background:#eee;height:50px;overflow:scroll;padding:1px;position:absolute;left:-1000px;top:0;box-sizing:content-box;-moz-box-sizing: content-box;';\r\n//        el.innerHTML = '<div style=\"width:200px;height:200px;\"></div>';\r\n//        document.body.appendChild(el);\r\n\r\n        var el = document.createElement('div');        \r\n        el.style.cssText = 'z-index:1000;width:100px;background:#eee;height:50px;overflow:auto;position:absolute;left:100px;top:100px;';\r\n        el.innerHTML = '<div style=\"width:50px;height:200px;\"></div>';\r\n        document.body.appendChild(el);\r\n\r\n        mini._scrollOffset = el.offsetWidth - el.clientWidth;\r\n\r\n        el.parentNode.removeChild(el);\r\n    }\r\n    return mini._scrollOffset;\r\n}\r\n\r\n//setTimeout(function () {\r\n//    alert(mini.getScrollOffset());\r\n\r\n//    var el = document.createElement('div');\r\n//    //el.style.cssText = 'width:100px;background:#eee;height:50px;overflow:scroll;padding:1px;position:absolute;left:-1000px;top:0;';\r\n//    el.style.cssText = 'z-index:1000;width:100px;background:#eee;height:50px;overflow:auto;position:absolute;left:100px;top:100px;';\r\n//    el.innerHTML = '<div style=\"width:50px;height:200px;\"></div>';\r\n//    document.body.appendChild(el);\r\n\r\n//    alert(el.offsetWidth - el.clientWidth);\r\n\r\n//}, 1000);\n/***************************************************\r\n* loadJS v1.0\r\n* \r\n* How to use : http://www.loadjs.org\r\n*\r\n* License : MIT\r\n*\r\n* Date : 2012/04/01\r\n*\r\n***************************************************/\r\n\r\nif (typeof window.rootpath == \"undefined\") {\r\n    rootpath = \"/\";\r\n}\r\n\r\nmini.loadJS = function (src, callback) {\r\n    if (!src) return;\r\n    if (typeof callback == \"function\") {\r\n        return mini.loadJS._async(src, callback);\r\n    } else {\r\n        return mini.loadJS._sync(src);\r\n    }\r\n}\r\nmini.loadJS._js = {};\r\nmini.loadJS._async = function (src, callback) {\r\n    var state = mini.loadJS._js[src];\r\n    if (!state) {\r\n        state = mini.loadJS._js[src] = { create: false, loaded: false, callbacks: [] };\r\n    }\r\n    if (state.loaded) {\r\n        setTimeout(function () {\r\n            callback();\r\n        }, 1);\r\n        return;\r\n    } else {\r\n        state.callbacks.push(callback);\r\n        if (state.create) return;\r\n    }\r\n\r\n    state.create = true;\r\n\r\n    var head = document.getElementsByTagName('head')[0];\r\n    var js = document.createElement('script');\r\n    js.src = src;\r\n    js.type = 'text/javascript';\r\n\r\n    function doCallback() {\r\n        for (var i = 0; i < state.callbacks.length; i++) {\r\n            var fn = state.callbacks[i];\r\n            if (fn) fn();\r\n        }\r\n        state.callbacks.length = 0;\r\n    }\r\n\r\n    setTimeout(function () {\r\n        if (document.all) {\r\n            js.onreadystatechange = function () {\r\n                if (js.readyState == 'loaded' || js.readyState == 'complete') {\r\n                    doCallback();\r\n                    state.loaded = true;\r\n                }\r\n            }\r\n        } else {\r\n            js.onload = function () {\r\n                doCallback();\r\n                state.loaded = true;\r\n            }\r\n        }\r\n        head.appendChild(js);\r\n    }, 1);\r\n    return js;\r\n}\r\nmini.loadJS._sync = function (src) {\r\n    if (loadJS._js[src]) return;\r\n    loadJS._js[src] = { create: true, loaded: true, callbacks: [] };\r\n\r\n    var head = document.getElementsByTagName('head')[0];\r\n    var js = document.createElement('script');\r\n    js.type = 'text/javascript';\r\n    js.text = loadText(src);\r\n    head.appendChild(js);\r\n    return js;\r\n}\r\n\r\nmini.loadText = function (url) {\r\n    var text = \"\";\r\n    var isLocal = document.all && location.protocol == \"file:\";\r\n\r\n\r\n    var xmlhttp = null;\r\n    if (isLocal) {\r\n        xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    } else {\r\n        if (window.XMLHttpRequest) {        // for all new browsers\r\n            xmlhttp = new XMLHttpRequest();\r\n        }\r\n        else if (window.ActiveXObject) {    // for IE5 and IE6\r\n            xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n        }\r\n    }\r\n\r\n\r\n    xmlhttp.onreadystatechange = state_Change;\r\n\r\n    var d = '_t=' + new Date().getTime();\r\n    if (url.indexOf(\"?\") == -1) d = \"?\" + d;\r\n    else d = \"&\" + d;\r\n    url += d;\r\n\r\n    xmlhttp.open(\"GET\", url, false);\r\n    xmlhttp.send(null);\r\n\r\n    function state_Change() {\r\n        if (xmlhttp.readyState == 4) {\r\n            var statusCode = isLocal ? 0 : 200;\r\n            if (xmlhttp.status == statusCode) {\r\n                text = xmlhttp.responseText;\r\n            }\r\n            else {\r\n                //error\r\n            }\r\n        }\r\n    }\r\n    return text;\r\n}\r\n\r\nmini.loadJSON = function (url) {\r\n    var text = loadText(url);\r\n    var o = window[\"ev\" + \"al\"](\"(\" + text + \")\");\r\n    return o;\r\n}\r\n\r\n\r\nmini.loadCSS = function (src, id) {\r\n    if (!src) return;\r\n    if (loadCSS._css[src]) return;\r\n    var head = document.getElementsByTagName('head')[0];\r\n    var link = document.createElement('link');\r\n    if (id) link.id = id;\r\n    link.href = src;\r\n    link.rel = 'stylesheet';\r\n    link.type = 'text/css';\r\n    head.appendChild(link);\r\n    return link;\r\n}\r\nmini.loadCSS._css = {};\r\n\r\n/* innerHTML */\r\nmini.innerHTML = function (el, html) {\r\n    if (typeof el == 'string') el = document.getElementById(el);\r\n    if (!el) return;\r\n    html = '<div style=\"display:none\">&nbsp;</div>' + html;\r\n    el.innerHTML = html;\r\n    mini.__executeScripts(el);\r\n    var d = el.firstChild;\r\n    //d.parentNode.removeChild(d);\r\n}\r\nmini.__executeScripts = function (d) {\r\n    var scripts = d.getElementsByTagName(\"script\")\r\n    for (var i = 0, l = scripts.length; i < l; i++) {\r\n        var sc = scripts[i];\r\n        var src = sc.src;\r\n        if (src) {\r\n            mini.loadJS(src);\r\n        } else {\r\n            var ns = document.createElement('script');\r\n            ns.type = \"text/javascript\";\r\n            ns.text = sc.text;\r\n            d.appendChild(ns);\r\n        }\r\n    }\r\n    for (var i = scripts.length - 1; i >= 0; i--) {\r\n        var sc = scripts[i];\r\n        sc.parentNode.removeChild(sc);\r\n    }\r\n}\n/**\r\n * 获取系统参数值\r\n *\r\n * @param {string} name 系统参数名称\r\n * @returns\r\n */\r\nmini.getF9FrameSysParams = function (name) {\r\n    return window.EpFrameSysParams && window.EpFrameSysParams[name];\r\n};\r\n/**\r\n * 获取取系统参数之后的控件默认值\r\n *\r\n * @param {string} name 系统参数名称\r\n * @param {any} defaultValue 无系统参数配置时的默认值\r\n * @returns 如果配置了系统参数且值不为 undefined 则取系统参数，否则取传入的默认值\r\n */\r\nmini.getCtrDefaultBySysParams = function (name, defaultValue) {\r\n    var c = mini.getF9FrameSysParams(name);\r\n    return c !== undefined ? c : defaultValue;\r\n};\r\n// 还原转义的html\r\nmini.htmlUnescape = function (str) {\r\n    if (str + '' !== str) return str;\r\n    // var div = document.createElement('div');\r\n    // div.innerHTML = str;\r\n    // var t = div.innerText;\r\n    // div = null;\r\n    // return t;\r\n    // 上面方法会出现 未转义的HTML传入时丢掉标签的问题 使用miniui中正则替换的方式实现\r\n    return mini.htmlDecode(str);\r\n};\r\n// html 转义\r\nmini.htmlEscape = function (html) {\r\n    if (html + '' !== html) return html;\r\n    var div = document.createElement('div');\r\n    div.appendChild(document.createTextNode(html));\r\n    var s = div.innerHTML;\r\n    div = null;\r\n    return s;\r\n};\r\n// mini.autoParse = false;\r\n// 是否支持 rem\r\nmini.supportRem = (function () {\r\n    var isSupport = false;\r\n    var s = document.createElement('span');\r\n    try {\r\n        s.style.fontSize = '13rem';\r\n        if (/rem/.test(s.style.fontSize)) {\r\n            isSupport = true;\r\n        }\r\n    } catch (error) {}\r\n    return isSupport;\r\n})();\r\n\r\nmini.getFontSizeRatio = function () {\r\n    if (!this._fontSizeRatio) {\r\n        this._fontSizeRatio = mini.Cookie.get('_font_size_ratio_') || parseInt($('html').css('fontSize')) / window.HtmlBaseFontSize;\r\n    }\r\n\r\n    return this._fontSizeRatio;\r\n};\r\n\r\nmini.setFontSizeRatio = function (ratio) {\r\n    this._fontSizeRatio = ratio;\r\n};\r\n\r\nmini.copyTo(mini, {\r\n    overwrite: function (dest, proto) {\r\n        var d;\r\n        if (typeof dest == 'function') {\r\n            d = dest.prototype;\r\n        } else if (typeof dest == 'object') {\r\n            d = dest;\r\n        } else {\r\n            return this;\r\n        }\r\n\r\n        // 支持 传递多个 proto\r\n        for (var i = 1, len = arguments.length; i < len; ++i) {\r\n            var prototype = arguments[i];\r\n            for (var c in prototype) {\r\n                d[c] = prototype[c];\r\n            }\r\n        }\r\n        return dest;\r\n    }\r\n});\r\n\r\nif (window._rootPath === undefined) {\r\n    window._rootPath = (function () {\r\n        var path = location.pathname;\r\n\r\n        if (path.indexOf('/') === 0) {\r\n            path = path.substring(1);\r\n        }\r\n\r\n        return '/' + path.split('/')[0];\r\n    })();\r\n}\r\n\r\n// mini.loadJS._sync源码中的方法有问题，这里重新实现这个方法\r\nmini.loadJS._sync = function (src) {\r\n    if (mini.loadJS._js[src]) return;\r\n    mini.loadJS._js[src] = {\r\n        create: true,\r\n        loaded: true,\r\n        callbacks: []\r\n    };\r\n\r\n    var head = document.getElementsByTagName('head')[0];\r\n    var js = document.createElement('script');\r\n    js.type = 'text/javascript';\r\n    js.text = mini.loadText(src);\r\n    head.appendChild(js);\r\n    return js;\r\n};\r\n\r\nmini.loadCSS = function (src, id) {\r\n    if (!src) return;\r\n    if (mini.loadCSS._css[src]) return;\r\n    var head = document.getElementsByTagName('head')[0];\r\n    var link = document.createElement('link');\r\n    if (id) link.id = id;\r\n    link.href = src;\r\n    link.rel = 'stylesheet';\r\n    link.type = 'text/css';\r\n    head.appendChild(link);\r\n\r\n    mini.loadCSS._css[src] = link;\r\n\r\n    return link;\r\n};\r\n\r\nmini.isDisplay = function (p, body, ignoresFn) {\r\n    if (typeof body === 'function') {\r\n        ignoresFn = body;\r\n        body = undefined;\r\n    }\r\n    var doc = body || document.body;\r\n    while (1) {\r\n        if (p == null || !p.style) return false;\r\n        // 原方法中通过p.style.display 无法获取到通过class设置的值\r\n        // jQuery(p).css('display') 在firefox中也无法获取到class设置的值\r\n        if (p && (jQuery(p).css('display') == 'none' || (mini.isFirefox && p.nodeName == 'IFRAME' && p.getBoundingClientRect().width === 0 && p.getBoundingClientRect().height === 0 && p.getBoundingClientRect().x === 0 && p.getBoundingClientRect().y === 0))) {\r\n            if (ignoresFn) {\r\n                if (ignoresFn(p) !== true) return false;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        if (p == doc) return true;\r\n\r\n        p = p.parentNode;\r\n    }\r\n    return true;\r\n};\r\nmini.loadCSS._css = {};\r\n\r\nmini.externalSrc = _rootPath + '/lib/';\r\n\r\nmini_useShims = true;\r\n\r\nmini_debugger = false;\r\n\r\n/*\r\nminiui源码中已加入该处理，下面代码可删掉\r\n// 参照zui，给ie浏览器body加上特殊标识\r\n// if(mini.IE_V > 0) {\r\n//     jQuery(function(){\r\n//         mini.addClass(document.body, 'ie' + mini.IE_V);\r\n//     });\r\n// }\r\n*/\r\n\r\nmini.showPageWarning = function (cfg) {\r\n    var $pageWarning = $('#mini-pageWarning');\r\n\r\n    if ($pageWarning.length) {\r\n        return;\r\n    }\r\n\r\n    $pageWarning = $('<div></div>', {\r\n            id: 'mini-pageWarning',\r\n            style: 'position:fixed;top:30%;left:50%;margin-left:-280px;width:560px;height:40px;color:#dd2727;background:#f2dede;text-align:center;border-radius:3px;line-height:40px;font-size:13px;'\r\n        })\r\n        .html(cfg.html)\r\n        .append(\r\n            // 插入关闭按钮\r\n            $('<span title= \"关闭\" style= \"position: absolute;top:0;right:10px;font-size:18px;line-height:40px;cursor:pointer\" onclick= \\'$(\"#mini-pageWarning\").remove();\\'>×</span>')\r\n        )\r\n        .css('z-index', cfg.zIndex || 9999)\r\n        .appendTo('body');\r\n\r\n    setTimeout(function () {\r\n        $pageWarning.remove();\r\n        $pageWarning = null;\r\n    }, cfg.timeout || 15000);\r\n};\r\n\r\nvar _oGetAttrs = mini.Control.prototype.getAttrs;\r\nmini.overwrite(mini.Control, {\r\n    getAttrs: function (el) {\r\n        var attrs = _oGetAttrs.call(this, el),\r\n            extraAttrs;\r\n\r\n        if (this.getExtraAttrs) {\r\n            extraAttrs = this.getExtraAttrs.call(this, el);\r\n            mini.copyTo(attrs, extraAttrs);\r\n        }\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\n// 由于 mini.Container 控件虽然继承于mini.Control，但是它定义中没有重写getAttrs方法，就导致上面 overwrite mini.Control 的 getAttrs 方法不会影响到 mini.Container ，所以需要对其再重写一遍\r\nmini.overwrite(mini.Container, {\r\n    getAttrs: function (el) {\r\n        return mini.Container.superclass.getAttrs.call(this, el);\r\n    }\r\n});\r\n\r\nmini.getValidErrorToolTip = function () {\r\n    if (!mini._errorToolTip) {\r\n        mini._errorToolTip = new mini.ToolTip();\r\n\r\n        mini._errorToolTip.set({\r\n            selector: '.mini-error[data-tooltip]',\r\n            placement: 'topright',\r\n            trigger: 'focus',\r\n            // cls: 'error-tooltip'\r\n            theme: 'error',\r\n            defaultTheme: 'error'\r\n        });\r\n\r\n        $(document).on('mousewheel', function () {\r\n            // 为了防止页面滚动时 tooltip 不随页面一起滚动，所以滚动时隐藏掉 tooltip\r\n            // 现在实现还有问题，用户直接通过拖动滚动条无法隐藏，需要进一步优化\r\n            mini._errorToolTip.close();\r\n        });\r\n    }\r\n\r\n    return mini._errorToolTip;\r\n};\r\n\r\n// 重写验证效果\r\n(function (win, $) {\r\n    var obj = {\r\n        errorMode: mini.getCtrDefaultBySysParams('ui_form_errormode', \"icon\"),      // text、icon、border、none\r\n        errorTextEl: null,\r\n        getErrorTextEl: function () {\r\n            return this._errorTextEl;\r\n        },\r\n        _RemoveErrorText: function () {},\r\n        __doUpdateValid: function () {\r\n            if (!this.el) return;\r\n            this.removeCls(this._errorCls);\r\n            this.removeCls(this._invalidCls);\r\n            // this.removeCls('mini-errorMode-' + this.errorMode);\r\n            jQuery(this.el).removeClass('mini-errorMode-text mini-errorMode-icon');\r\n    \r\n            if (this.errorMode == 'border') {\r\n                this.el.title = '';\r\n            }\r\n    \r\n            if (this._IsValid == false) {\r\n                mini.getValidErrorToolTip();\r\n                    \r\n                switch (this.errorMode) {\r\n                    case 'icon':\r\n                        jQuery(this.el).attr('data-tooltip', this.errorText);\r\n                        this.addCls(this._errorCls);\r\n                        jQuery(this.el).addClass('mini-errorMode-icon');\r\n                        var icon = this.getErrorIconEl();\r\n                        if (icon) {\r\n                            icon.title = this.errorText;\r\n                            jQuery(icon).attr('data-placement', this.errorTooltipPlacement);\r\n                        }\r\n                        break;\r\n                    case 'border':\r\n                        jQuery(this.el).attr('data-tooltip', this.errorText);\r\n                        this.addCls(this._invalidCls);\r\n                        this.el.title = this.errorText;\r\n                        this._RemoveErrorIcon();\r\n                        this._RemoveErrorText();\r\n                        break;\r\n                    case 'text':\r\n                        this.addCls(this._errorCls);\r\n                        var text = this.getErrorTextEl();\r\n                        jQuery(this.el).addClass('mini-errorMode-text');\r\n                        if (text) {\r\n                            $(text).text(this.errorText).attr('title', this.errorText);\r\n                        }\r\n                        this._RemoveErrorIcon();\r\n                        break;\r\n                    default:\r\n                        this._RemoveErrorText();\r\n                        this._RemoveErrorIcon();\r\n                        break;\r\n                }\r\n            } else {\r\n                this._RemoveErrorIcon();\r\n                this._RemoveErrorText();\r\n                jQuery(this.el).attr('data-tooltip', '');\r\n                mini._errorToolTip && mini._errorToolTip.close();\r\n            }\r\n            this.doLayout();\r\n        }\r\n    };\r\n    mini.overwrite(mini.ValidatorBase, obj);\r\n    mini.overwrite(mini.ListControl, obj);\r\n})(this, this.jQuery);\r\n\r\n\r\n// 重写默认宽度\r\n//IndexColumn\r\nmini.IndexColumn = function (config) {\r\n    return mini.copyTo({\r\n        ignoreCollapseIndex: false,\r\n        width: 56,\r\n        cellCls: \"\",\r\n        align: \"left\",\r\n        draggable: false,\r\n        allowDrag: true,\r\n        hideable: true,\r\n        init: function (grid) {\r\n            grid.on(\"addrow\", this.__OnIndexChanged, this);\r\n            grid.on(\"removerow\", this.__OnIndexChanged, this);\r\n            grid.on(\"moverow\", this.__OnIndexChanged, this);\r\n\r\n\r\n            //treegrid\r\n            if (grid.isTree) {\r\n\r\n                grid.on(\"addnode\", this.__OnIndexChanged, this);\r\n                grid.on(\"removenode\", this.__OnIndexChanged, this);\r\n                grid.on(\"movenode\", this.__OnIndexChanged, this);\r\n\r\n\r\n                grid.on(\"loadnode\", this.__OnIndexChanged, this);\r\n                this._gridUID = grid.uid;\r\n                this._rowIdField = \"_id\";\r\n            }\r\n        },\r\n        getNumberId: function (record) {\r\n            return this._gridUID + \"$number$\" + record[this._rowIdField];\r\n        },\r\n        createNumber: function (grid, rowIndex) {\r\n            if (mini.isNull(grid.pageIndex)) {\r\n                return rowIndex + 1;\r\n            } else return (grid.pageIndex * grid.pageSize) + rowIndex + 1;\r\n        },\r\n        renderer: function (e) {\r\n\r\n            var grid = e.sender;\r\n            if (this.draggable) {\r\n                if (!e.cellStyle) e.cellStyle = \"\";\r\n                e.cellStyle += \";cursor:move;\";\r\n            }\r\n            var s = '<div id=\"' + this.getNumberId(e.record) + '\">';\r\n            var rowIndex = e.rowIndex;\r\n\r\n            if (this.ignoreCollapseIndex) {\r\n                //rowIndex = \r\n            }\r\n\r\n            if (mini.isNull(grid.getPageIndex)) s += rowIndex + 1;\r\n            else s += (grid.getPageIndex() * grid.getPageSize()) + rowIndex + 1;\r\n\r\n            s += '</div>';\r\n            return s;\r\n        },\r\n\r\n        __updateRowNumbers: function (grid) {\r\n            var records = grid.getDataView();\r\n\r\n            for (var i = 0, l = records.length; i < l; i++) {\r\n                var record = records[i];\r\n                var id = this.getNumberId(record);\r\n                var ck = document.getElementById(id);\r\n                if (ck) ck.innerHTML = this.createNumber(grid, i);\r\n            }\r\n            //alert(1);\r\n        },\r\n        __OnIndexChanged: function (e) {\r\n            var grid = e.sender;\r\n\r\n            //            this.__updateRowNumbers(grid);\r\n            //            return;\r\n            var me = this;\r\n            if (me._toIndex) return;\r\n            me._toIndex = setTimeout(function () {\r\n                me._toIndex = null;\r\n                me.__updateRowNumbers(grid);\r\n            }, 10);\r\n        }\r\n    }, config);\r\n}\r\nmini._Columns[\"indexcolumn\"] = mini.IndexColumn;\r\n\r\n//CheckColumn\r\n// 源码中_doCheckState方法实现有问题，某些场景下最后又会update下表头，重新生成表头是会根据_checkedAll来决定是否选中，所以必须同时更新下_checkedAll的值\r\nmini.CheckColumn = function (config) {\r\n    return mini.copyTo({\r\n            width: 40,\r\n            cellCls: 'mini-checkcolumn',\r\n            headerCls: 'mini-checkcolumn',\r\n            hideable: true,\r\n            _multiRowSelect: true, //\r\n            header: function (column) {\r\n                //if(this.multiSelect == false) debugger\r\n                //                var id = this.uid + \"checkall\";\r\n                //                var s = '<input type=\"checkbox\" id=\"' + id + '\" ' + (column._checkedAll ? 'checked' : '') + '/>';\r\n                //                if (this.multiSelect == false) s = \"\";\r\n                //                return s;\r\n\r\n                var id = this.uid + 'checkall';\r\n                var cls = column._checkedAll ? 'mini-grid-checkbox-checked' : '';\r\n                var s = '<span class=\"mini-grid-checkbox mini-icon ' + cls + '\" id=\"' + id + '\"></span>';\r\n                if (this.multiSelect == false) s = '';\r\n                return s;\r\n            },\r\n            getCheckId: function (record, column) {\r\n                return this._gridUID + '$checkcolumn$' + record[this._rowIdField] + '$' + column._id;\r\n            },\r\n            init: function (grid) {\r\n                grid.on('_selectchange', this.__OnSelectionChanged, this);\r\n                grid.on('HeaderCellClick', this.__OnHeaderCellClick, this);\r\n\r\n                var me = this;\r\n                grid.on('removerow', function () {\r\n                    if (grid.data && grid.data.length == 0) {\r\n                        me._doCheckState(grid);\r\n                    }\r\n                });\r\n\r\n                var me = this;\r\n                grid.on(\r\n                    'load',\r\n                    function () {\r\n                        var id = grid.uid + 'checkall';\r\n                        //$(\"#\" + id).removeClass('mini-grid-checkbox-checked');\r\n                        me._doCheckState(grid);\r\n                    },\r\n                    this\r\n                );\r\n            },\r\n            renderer: function (e) {\r\n                var id = this.getCheckId(e.record, e.column);\r\n                var selected = e.sender.isSelected ? e.sender.isSelected(e.record) : false;\r\n\r\n                var type = 'checkbox';\r\n\r\n                //                var grid = e.sender;\r\n                //                if (grid.getMultiSelect() == false) type = \"radio\";\r\n\r\n                //                var html = '<input type=\"' + type + '\" id=\"' + id + '\" ' + (selected ? \"checked\" : \"\") + ' hidefocus style=\"outline:none;\" onclick=\"return false\"/>';\r\n                //                html += '<div class=\"mini-grid-radio-mask\"></div>';\r\n                //                return html;\r\n\r\n                var grid = e.sender;\r\n                var html = '<span class=\"mini-grid-' + (grid.getMultiSelect() ? 'checkbox' : 'radio') + ' mini-icon\" id=\"' + id + '\"></span>';\r\n                return html;\r\n            },\r\n            __OnHeaderCellClick: function (e) {\r\n                var grid = e.sender;\r\n                if (e.column != this) return;\r\n                var id = grid.uid + 'checkall';\r\n                var ck = document.getElementById(id);\r\n                if (ck) {\r\n                    var checkedCls = 'mini-grid-checkbox-checked';\r\n                    var checked = !mini.hasClass(ck, checkedCls);\r\n                    this._checkedAll = checked;\r\n\r\n                    if (grid.getMultiSelect()) {\r\n                        if (checked) {\r\n                            var list = grid.getDataView();\r\n                            grid.selects(list);\r\n                            mini.addClass(ck, checkedCls);\r\n                            setTimeout(function () {\r\n                                mini.addClass(ck, checkedCls);\r\n                            }, 30);\r\n                        } else {\r\n                            var list = grid.getDataView();\r\n                            grid.deselects(list);\r\n                            mini.removeClass(ck, checkedCls);\r\n                        }\r\n                    } else {\r\n                        grid.deselectAll();\r\n                        if (checked) {\r\n                            grid.select(0);\r\n                            mini.addClass(ck, checkedCls);\r\n                        }\r\n                    }\r\n                    grid.fire('checkall');\r\n                }\r\n            },\r\n            __OnSelectionChanged: function (e) {\r\n                var grid = e.sender;\r\n                var records = grid.toArray();\r\n                var me = this;\r\n\r\n                var virtual = grid.isVirtualScroll(),\r\n                    region = grid._viewRegion,\r\n                    start = virtual && region ? region.start : -1,\r\n                    end = region ? region.end : -1,\r\n                    map = {};\r\n\r\n                if (start != -1) {\r\n                    var data = grid.getVisibleRows();\r\n                    for (var i = start, l = end; i < l; i++) {\r\n                        var row = data[i];\r\n                        if (row) map[row._id] = true;\r\n                    }\r\n                }\r\n\r\n                for (var i = 0, l = records.length; i < l; i++) {\r\n                    var record = records[i];\r\n\r\n                    //continue;\r\n                    if (start != -1) {\r\n                        if (!map[record._id]) continue;\r\n                    }\r\n\r\n                    //                    var select = grid.isSelected(record);\r\n                    //                    var id = me.getCheckId(record, me); //grid.uid + \"$checkcolumn$\" + record[grid._rowIdField];\r\n                    //                    var ck = document.getElementById(id);\r\n\r\n                    //                    if (ck) ck.checked = select;\r\n                }\r\n\r\n                if (!this._timer) {\r\n                    this._timer = setTimeout(function () {\r\n                        me._doCheckState(grid);\r\n                        me._timer = null;\r\n                    }, 10);\r\n                }\r\n            },\r\n            _doCheckState: function (grid) {\r\n                //处理顶部的checkbox\r\n                var id = grid.uid + 'checkall';\r\n                var ck = document.getElementById(id);\r\n\r\n                if (ck) {\r\n                    var sels = grid.getSelecteds();\r\n                    //if (sels.length == grid.getData().length) {\r\n\r\n                    var len = grid.isTree ? grid.getList().length : grid.getData().length;\r\n\r\n                    if (sels.length == len && len != 0) {\r\n                        //if (sels.length == len){\r\n                        //ck.checked = true;\r\n                        jQuery(ck).addClass('mini-grid-checkbox-checked');\r\n                        // 源码中实现有问题，某些场景下最后又会update下表头，重新生成表头是会根据_checkedAll来决定是否选中，所以必须同时更新下_checkedAll的值\r\n                        this._checkedAll = true;\r\n                    } else {\r\n                        //ck.checked = false;\r\n                        jQuery(ck).removeClass('mini-grid-checkbox-checked');\r\n                        // 源码中实现有问题，某些场景下最后又会update下表头，重新生成表头是会根据_checkedAll来决定是否选中，所以必须同时更新下_checkedAll的值\r\n                        this._checkedAll = false;\r\n                    }\r\n                }\r\n\r\n                //                if (ck && grid._getSelectAllCheckState) {\r\n\r\n                //                    var state = grid._getSelectAllCheckState();\r\n                //                    if (state == \"has\") {\r\n                //                        ck.indeterminate = true;\r\n                //                        ck.checked = true;\r\n                //                    } else {\r\n                //                        ck.indeterminate = false;\r\n                //                        ck.checked = state;\r\n                //                    }\r\n                //                }\r\n            }\r\n        },\r\n        config\r\n    );\r\n};\r\nmini._Columns['checkcolumn'] = mini.CheckColumn;\r\n\r\n// 重写 ExpandColumn 解决chrome中点击当成锚点了\r\nmini.ExpandColumn = function (config) {\r\n    return mini.copyTo({\r\n            width: 30,\r\n            headerAlign: 'center',\r\n            align: 'center',\r\n            draggable: false,\r\n            cellStyle: 'padding:0',\r\n            cellCls: 'mini-grid-expandCell',\r\n            hideable: true,\r\n            renderer: function (e) {\r\n                // return '<a class=\"mini-grid-ecIcon mini-icon\" href=\"javascript:#\" onclick=\"return false\"></a>';\r\n                // 改成i标签，解决chrome中点击当成锚点了\r\n                return '<i class=\"mini-grid-ecIcon mini-icon\" ></i>';\r\n            },\r\n            init: function (grid) {\r\n                grid.on('cellclick', this.__OnCellClick, this);\r\n            },\r\n            __OnCellClick: function (e) {\r\n                var grid = e.sender;\r\n                if (e.column == this && grid.isShowRowDetail) {\r\n                    if (mini.findParent(e.htmlEvent.target, 'mini-grid-ecIcon')) {\r\n                        var isShow = grid.isShowRowDetail(e.record);\r\n\r\n                        if (!isShow) {\r\n                            e.cancel = false;\r\n                            grid.fire('beforeshowrowdetail', e);\r\n                            if (e.cancel === true) return;\r\n                        } else {\r\n                            e.cancel = false;\r\n                            grid.fire('beforehiderowdetail', e);\r\n                            if (e.cancel === true) return;\r\n                        }\r\n\r\n                        if (grid.autoHideRowDetail) {\r\n                            grid.hideAllRowDetail();\r\n                        }\r\n                        if (isShow) {\r\n                            grid.hideRowDetail(e.record);\r\n                        } else {\r\n                            grid.showRowDetail(e.record);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        config\r\n    );\r\n};\r\nmini._Columns['expandcolumn'] = mini.ExpandColumn;\r\n\r\n// miniui 中此方法写错了 误将&gt; 替换为 &\r\nmini.htmlDecode = function (str) {\r\n    if (typeof str !== 'string') return str;\r\n    var s = '';\r\n    if (str.length == 0) return '';\r\n    s = str.replace(/&amp;/g, '&');\r\n    s = s.replace(/&lt;/g, '<');\r\n    s = s.replace(/&gt;/g, '>');\r\n    s = s.replace(/&nbsp;/g, ' ');\r\n    s = s.replace(/&#39;/g, \"'\");\r\n    s = s.replace(/&quot;/g, '\"');\r\n    //s = s.replace(/<br>/g, \"\\n\");\r\n    return s;\r\n};\r\n\r\n// 某些场景下需要全屏功能，所以要预先设置iframe允许全屏\r\nmini.createIFrame = function (url, onIFrameLoad, cache, method, params) {\r\n    //alert(method + \":\" + params);\r\n\r\n    /*var iframe = document.createElement('iframe');\r\n    iframe.src = url;\r\n        \r\n    function onload () {\r\n    alert(\"aaa111\");\r\n    }\r\n\r\n    if (iframe.attachEvent) {\r\n    iframe.attachEvent('onload', onload);\r\n    } else {\r\n    iframe.onload = onload;\r\n    }\r\n    return iframe;*/\r\n\r\n    if (!url) url = '';\r\n    var urls = url.split('#');\r\n    url = urls[0];\r\n\r\n    //修改url\r\n    var t = '';\r\n    if (cache !== true) {\r\n        //_t\r\n        t = '_t=' + Math.floor(Math.random() * 1000000); // \"&_winid=\" + mini._WindowID;\r\n        if (url.indexOf('_t=') == -1) {\r\n\r\n\r\n            if (url.indexOf('?') == -1) {\r\n                url += '?' + t;\r\n            } else {\r\n                url += '&' + t;\r\n            }\r\n\r\n        } else {\r\n            url = url.replace(/_t=(\\d+)/, t);\r\n        }\r\n    }\r\n\r\n    //_winid\r\n    if (url && url.indexOf('_winid') == -1) {\r\n        var t = '_winid=' + mini._WindowID;\r\n        if (url.indexOf('?') == -1) {\r\n            url += '?' + t;\r\n        } else {\r\n            url += '&' + t;\r\n        }\r\n    }\r\n\r\n    if (mini.iframeParams) {\r\n        for (var name in mini.iframeParams) {\r\n            url += '&' + name + '=' + mini.iframeParams[name];\r\n        }\r\n    }\r\n\r\n    if (urls[1]) {\r\n        url = url + '#' + urls[1];\r\n    }\r\n\r\n    var isMHT = url.indexOf('.mht') != -1;\r\n    var src = isMHT ? url : '';\r\n\r\n    var iframeName = mini.newId('mini-iframe-');\r\n\r\n    //window server版本下，是否用js绑定onload事件会比较好\r\n    // var s = '<iframe name=\"' + iframeName + '\" src=\"' + (method == 'post' ? '' : src) + '\" style=\"width:100%;height:100%;\"  frameborder=\"0\"></iframe>';\r\n    // 添加 allowfullscreen 属性\r\n    var s = '<iframe name=\"' + iframeName + '\" src=\"' + (method == 'post' ? '' : src) + '\" style=\"width:100%;height:100%;\" allowfullscreen=\"true\" frameborder=\"0\"></iframe>';\r\n\r\n    //alert(method == 'post');\r\n\r\n    var div = document.createElement('div');\r\n    var iframe = mini.append(div, s);\r\n    //iframe.src = \"\";\r\n    var canFireLoad = false;\r\n    if (isMHT) {\r\n        canFireLoad = true;\r\n    } else {\r\n        setTimeout(function () {\r\n            if (iframe) {\r\n                if (method != 'post') {\r\n                    iframe.src = url;\r\n                }\r\n                canFireLoad = true;\r\n            }\r\n        }, 5);\r\n    }\r\n\r\n    //iframe.onload = __OnLoad;\r\n    if (iframe.attachEvent) {\r\n        iframe.attachEvent('onload', __OnLoad);\r\n    } else {\r\n        iframe.onload = __OnLoad;\r\n    }\r\n\r\n    var destroyed = false;\r\n\r\n    //load\r\n    var firstLoad = true;\r\n\r\n    function __OnLoad() {\r\n        if (canFireLoad == false || destroyed) return;\r\n        //alert(\"onload\");\r\n        setTimeout(function () {\r\n            if (onIFrameLoad) onIFrameLoad(iframe, firstLoad);\r\n            firstLoad = false;\r\n            //onload = null;\r\n            //iframe.onload = null;\r\n            //\r\n        }, 1);\r\n    }\r\n\r\n    //destroy\r\n    iframe._ondestroy = function () {\r\n        //window[fnName] = mini.emptyFn;\r\n        destroyed = true;\r\n\r\n        iframe.src = '';\r\n        if (mini.isIE) {\r\n            try {\r\n                iframe.contentWindow.document.write('');\r\n                iframe.contentWindow.document.close();\r\n            } catch (ex) {}\r\n        }\r\n        iframe._ondestroy = null;\r\n        iframe = null;\r\n    };\r\n\r\n    //////////////////////////////////////////////////////////////////////\r\n\r\n    var form;\r\n    if (method == 'post') {\r\n        function createForm() {\r\n            return jQuery('<form />')\r\n                .attr({\r\n                    method: 'post',\r\n                    action: url,\r\n                    enctype: 'multipart/form-data',\r\n                    target: iframe.name\r\n                })\r\n                .hide()\r\n                .appendTo('body');\r\n        }\r\n\r\n        form = createForm();\r\n\r\n        setTimeout(function () {\r\n            form.submit();\r\n        }, 10);\r\n    }\r\n\r\n    return iframe;\r\n};\r\n\r\n// 获取滚动条宽度\r\nmini.getScrollBarWidth = function getScrollBarWidth() {\r\n    var div = document.createElement('div');\r\n    var p = document.createElement('p');\r\n\r\n    div.style.display = p.style.display = 'block';\r\n    p.style.height = '100px';\r\n    div.style.padding = 0;\r\n    div.style.border = 'none';\r\n    div.style.overflow = 'auto';\r\n    div.style.height = '10px';\r\n\r\n    div.appendChild(p);\r\n    document.body.appendChild(div);\r\n\r\n    var w = div.offsetWidth - div.clientWidth;\r\n    div.parentNode.removeChild(div);\r\n    div = p = null;\r\n    return w;\r\n};\r\n// mini._scrollBarWidth\r\n(function () {\r\n    var _scrollBarWidth;\r\n    if (Object.defineProperty && !mini.isIE8) {\r\n        Object.defineProperty(mini, '_scrollBarWidth', {\r\n            get: function () {\r\n                if (!_scrollBarWidth) {\r\n                    _scrollBarWidth = mini.getScrollBarWidth();\r\n                }\r\n                return _scrollBarWidth;\r\n            }\r\n        });\r\n    } else {\r\n        jQuery(window).on('load', function () {\r\n            mini._scrollBarWidth = mini.getScrollBarWidth();\r\n        });\r\n    }\r\n})();\r\n\r\n// 保留一些 dom 上属性，防止控件解析后属性丢失\r\n(function () {\r\n    // 需要保留属性的正则数组\r\n    mini.reservedAttrsReg = [/title/, /data-*/];\r\n\r\n    var oldApply = mini.applyTo;\r\n    mini.applyTo = function (el) {\r\n        el = mini.byId(el);\r\n        // 获取属性\r\n        var savedAttrs = getSavedAttrs(el);\r\n        // 原来的 apply 方法\r\n        var returnValue = oldApply.apply(this, arguments);\r\n\r\n        // 还原属性 注意需要将属性加到实例的el上去 而非原来的el\r\n        restoreSavedAttrs(this.el, savedAttrs);\r\n\r\n        return returnValue;\r\n    };\r\n\r\n    function getSavedAttrs(el) {\r\n        if (el && el.hasAttributes && el.hasAttributes()) {\r\n            var attrs = el.attributes;\r\n            var name;\r\n            var savedAttrs = {};\r\n            var hasAttr = false;\r\n            for (var i = 0, len = attrs.length; i < len; i++) {\r\n                name = attrs[i].name;\r\n                if (isMatch(name)) {\r\n                    hasAttr = true;\r\n                    savedAttrs[name] = attrs[i].value;\r\n                }\r\n            }\r\n            return hasAttr ? savedAttrs : null;\r\n        }\r\n    }\r\n\r\n    function restoreSavedAttrs(el, attrs) {\r\n        if (!el || !attrs) return;\r\n        jQuery.map(attrs, function (v, k) {\r\n            if (!(k === 'title' && /mini-panel/.test(el.className))) {\r\n                el.setAttribute(k, v);\r\n            }\r\n        });\r\n    }\r\n\r\n    var isMatch = (function () {\r\n        if (Array.prototype.some) {\r\n            return function (name) {\r\n                return (\r\n                    mini.reservedAttrsReg &&\r\n                    mini.reservedAttrsReg.some(function (reg) {\r\n                        return reg.test(name);\r\n                    })\r\n                );\r\n            };\r\n        }\r\n        return function (name) {\r\n            if (!mini.reservedAttrsReg || !mini.reservedAttrsReg.length) return false;\r\n\r\n            for (var i = 0, len = mini.reservedAttrsReg.length; i < len; i++) {\r\n                if (mini.reservedAttrsReg[i].test(name)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n    })();\r\n})();\r\n\r\n// 添加通用验证错误提示validateErrorText，并且优先级最高\r\nmini._ValidateVType = function (vtype, value, e, scope) {\r\n    // 给数字类型的验证默认加上0-999999999999999的范围验证\r\n    if ((vtype.indexOf('int') > -1 || vtype.indexOf('float') > -1) && vtype.indexOf('range') == -1) {\r\n        vtype += ';range:0,' + mini._maximumNumber;\r\n    }\r\n    // 由于后端处理double类型数据时最大精度为15位数，超过15位就会被截取掉。所以为了保持统一，前端需对浮点数最最大15位长度的限制\r\n    if (vtype.indexOf('float') > -1 && vtype.indexOf('rangeLength') == -1) {\r\n        vtype += ';rangeLength:0,16';\r\n    }\r\n    // 有小数的验证默认加上0-9999999999999的范围验证，留两位给小数\r\n    if (vtype.indexOf('decimalLength') > -1 && vtype.indexOf('range') == -1) {\r\n        vtype += ';range:0,' + Math.floor(mini._maximumNumber / 100);\r\n    }\r\n    var vtypes = vtype.split(';');\r\n\r\n    for (var i = 0, l = vtypes.length; i < l; i++) {\r\n        var vtype = vtypes[i].trim();\r\n        var vv = vtype.split(':');\r\n        var vt = vv[0];\r\n\r\n        var args = vtype.substr(vt.length + 1, 1000); //vv[1];\r\n        if (args) args = args.split(',');\r\n        else args = [];\r\n\r\n        var fn = mini.VTypes[vt];\r\n        if (fn) {\r\n            var isValid = fn(value, args);\r\n            if (isValid !== true) {\r\n                e.isValid = false;\r\n                var vtext = vv[0] + 'ErrorText';\r\n                e.errorText = scope['validateErrorText'] || scope[vtext] || mini.VTypes[vtext] || '';\r\n                e.errorText = String.format(e.errorText, args[0], args[1], args[2], args[3], args[4]);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    \r\n    // 添加对特殊字符的校验\r\n    // eslint-disable-next-line\r\n    if(e.isValid && /[\\x00-\\x08\\x0b-\\x0c\\x0e-\\x1f\\x7f]/.test(value)) {\r\n        e.isValid = false;\r\n        e.errorText = '输入的内容中包含非法的特殊字符';\r\n    }\r\n};\r\n\r\nmini._maximumNumber = 2147483647;\r\n\r\n// VTypes的扩展\r\njQuery.extend(mini.VTypes, {\r\n    mobileErrorText: '输入的手机号码格式不正确',\r\n    telErrorText: '输入的固定电话号码格式不正确',\r\n    phoneErrorText: '输入的电话号码格式不正确',\r\n    phoneWithShortNumErrorText: '输入的电话号码格式不正确',\r\n    postCodeErrorText: '输入的邮政编码格式不正确',\r\n    orgCodeErrorText: '输入的统一社会信用代码格式不正确',\r\n    idCardErrorText: '输入的身份证号码格式不正确',\r\n    decimalLengthErrorText: '请输入小数，且最多只能输入{0}位小数',\r\n    projectCodeErrorText: '输入的投资项目统一代码格式不正确',\r\n\r\n    decimalLength: function (v, args) {\r\n        if (mini.VTypes['float'](v, args) == false) return false;\r\n        if (mini.isNull(v) || v === '') return true;\r\n        var n = parseInt(args);\r\n        if (!v || isNaN(n)) return true;\r\n\r\n        v = String(v);\r\n        var s = v.split('.');\r\n        if (s.length == 1) return true;\r\n        if (s[1].length <= n) return true;\r\n        else return false;\r\n    },\r\n\r\n    mobile: function (v, args) {\r\n        if (mini.isNull(v) || v === '') return true;\r\n\r\n        return /^1[3456789]\\d{9}$/.test(v);\r\n    },\r\n\r\n    tel: function (v, args) {\r\n        if (mini.isNull(v) || v === '') return true;\r\n\r\n        return /^0\\d{2}-\\d{8}$/.test(v) || /^0\\d{3}-\\d{7,8}$/.test(v) || /^\\d{7,8}$/.test(v);\r\n    },\r\n\r\n    phone: function (v, args) {\r\n        if (mini.isNull(v) || v === '') return true;\r\n\r\n        return /^1[3456789]\\d{9}$/.test(v) || /^0\\d{2}-\\d{8}$/.test(v) || /^0\\d{3}-\\d{7,8}$/.test(v) || /^\\d{7,8}$/.test(v);\r\n    },\r\n\r\n    // 更弱的电话号码验证，支持短号码\r\n    phoneWithShortNum: function (v, args) {\r\n        if (mini.isNull(v) || v === '') return true;\r\n\r\n        return /^\\d[\\d-]{2,10}(?!-)$/.test(v);\r\n    },\r\n\r\n    postCode: function (v, args) {\r\n        if (mini.isNull(v) || v === '') return true;\r\n\r\n        return /^\\d{6}$/.test(v);\r\n    },\r\n    orgCode: function (v, args) {\r\n        if (mini.isNull(v) || v === '') {\r\n            return true;\r\n        }\r\n\r\n        // 组织机构代码\r\n        if (/^[A-Z0-9]{8}-[A-Z0-9]$/.test(v)) {\r\n            return true;\r\n        }\r\n\r\n        // 统一社会信用代码\r\n        // var reg = /^([0-9A-Z]{2})([0-9]{6})([0-9A-Z]{10})$/;\r\n        /*\r\n         * 按照电子交易提供的统一社会信用代码规则调整正则表达式\r\n         * 1、长度18位，由数字或大写字母组成（不能出现I,O,Z,S,V）\r\n         * 2、第1位：数字或大写字母（不能出现I,O,Z,S,V）\r\n         * 3、第2位：必须为数字（1，2，3，9）中的一个\r\n         * 4、第3-8位：行政区代码，全数字，大概区间从110000-820000\r\n         * 5、第9-18位：数字或大写字母（不能出现I,O,Z,S,V）\r\n         */\r\n        var reg = /^(?![IOSV])([0-9A-Y])([1239])([0-9]{6})(((?![IOSV])[0-9A-Y]){10})$/;\r\n        if (!reg.test(v)) {\r\n            return false;\r\n        }\r\n\r\n        /*\r\n         * 该段验证逻辑存在问题，对于一些真实的统一社会信用代码验证不通过，先去掉\r\n        //字符集数组\r\n        var fin_array = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'J', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'T', 'U', 'W', 'X', 'Y'];\r\n        //加权数组\r\n        var i_array = [1, 3, 9, 27, 19, 26, 16, 17, 20, 29, 25, 13, 8, 24, 10, 30, 28];\r\n        //结果数组\r\n        var val_array = [];\r\n        //相乘数组\r\n        var ch_array = [];\r\n        //Sigma\r\n        var sigma = 0;\r\n\r\n        for (var i = 0; i < 17; i++) {\r\n            //转换成字符集的值\r\n            val_array[i] = fin_array.indexOf(v.charAt(i));\r\n            //生成加权结果\r\n            ch_array[i] = val_array[i] * i_array[i];\r\n            //求出Sigma\r\n            sigma += ch_array[i];\r\n        }\r\n        //求出校验位\r\n        var vali_index = 31 - sigma % 31;\r\n        var vali = fin_array[vali_index == 31 ? 0 : vali_index];\r\n        //查看校验码是否正确\r\n        if (v.charAt(17) !== vali) {\r\n            return false;\r\n        }\r\n        */\r\n\r\n        return true;\r\n    },\r\n    idCard: function (v, args) {\r\n        if (mini.isNull(v) || v === '') return true;\r\n\r\n        function validateIdCard(idCard) {\r\n            // 15位和18位身份证号码的正则表达式\r\n            var regIdCard = /^(^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$)|(^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])((\\d{4})|\\d{3}[Xx])$)$/;\r\n\r\n            // 如果通过该验证，说明身份证格式正确，但准确性还需计算\r\n            if (regIdCard.test(idCard)) {\r\n                if (idCard.length == 18) {\r\n                    var idCardWi = new Array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2); // 将前17位加权因子保存在数组里\r\n                    var idCardY = new Array(1, 0, 10, 9, 8, 7, 6, 5, 4, 3, 2); // 这是除以11后，可能产生的11位余数、验证码，也保存成数组\r\n                    var idCardWiSum = 0; // 用来保存前17位各自乖以加权因子后的总和\r\n                    for (var i = 0; i < 17; i++) {\r\n                        idCardWiSum += idCard.substring(i, i + 1) * idCardWi[i];\r\n                    }\r\n\r\n                    var idCardMod = idCardWiSum % 11; // 计算出校验码所在数组的位置\r\n                    var idCardLast = idCard.substring(17); // 得到最后一位身份证号码\r\n\r\n                    // 如果等于2，则说明校验码是10，身份证号码最后一位应该是X\r\n                    if (idCardMod == 2) {\r\n                        if (idCardLast == 'X' || idCardLast == 'x') {\r\n                            return true;\r\n                        } else {\r\n                            return false;\r\n                        }\r\n                    } else {\r\n                        // 用计算出的验证码与最后一位身份证号码匹配，如果一致，说明通过，否则是无效的身份证号码\r\n                        if (idCardLast == idCardY[idCardMod]) {\r\n                            return true;\r\n                        } else {\r\n                            return false;\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return validateIdCard(v);\r\n    },\r\n    /* 投资项目统一代码\r\n     * 规则为：\r\n     * 代码长度24位;\r\n     * 代码格式：年份代码-地区（部门）代码-行业代码-项目类型代码-流水号\r\n     * 第1-4位：纯数字，值域1900-2099\r\n     * 第5位：\"-\"\r\n     * 第6-11位：纯数字，大概区间从110000-820000\r\n     * 第12位：\"-\"\r\n     * 第13-14位行业代码：2位数字组成，值域01-99\r\n     * 第15位：\"-\"\r\n     * 第16-17位项目类型代码：2位数字组成，值域01-99\r\n     * 第18位：\"-\"\r\n     * 第19-24位流水号：纯数字，值域000001-999999\r\n     */\r\n    projectCode: function (v, args) {\r\n        if (mini.isNull(v) || v === '') {\r\n            return true;\r\n        }\r\n\r\n        return /^(19|20)\\d{2}-\\d{6}-\\d{2}-\\d{2}-\\d{6}$/.test(v);\r\n    },\r\n    /**\r\n     * 重写 url 验证规则 \r\n     * 支持带一部分协议或无协议\r\n     * 支持 ipv4 和 域名 形式\r\n     * 支持 端口号 验证\r\n     * !不支持 中文域名\r\n     * !不支持 ipv6\r\n     * !不支持 url中带用户名和密码 http://username:password@abc.com/\r\n     * 原来 miniui 中的正则有严重性能问题 输入10位以上的数字基本会直接导致浏览器卡死\r\n     * @param {string} v 待检查字符\r\n     * @author chends\r\n     */\r\n    url: function (v) {\r\n        if (mini.isNull(v) || v === '') return true;\r\n        return isUrl(v);\r\n        function isUrl(url) {\r\n            var u = url.split('?')[0];\r\n\r\n            // 存在协议则去掉\r\n            var protocolReg = /^(http|https|ws|wss|ftp|rtsp|mailto|ed2k|thunder):\\/\\//i;\r\n            var r = protocolReg.exec(u);\r\n            if (r) {\r\n                u = u.substr(r[0].length);\r\n            }\r\n\r\n            // ip or 域名处理\r\n            var v4reg = /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}/;\r\n            // var v6reg = /^x/; // ipv6 规则也很复杂 暂未考虑\r\n            var domainReg = /^(\\w+\\.(?!\\.))+[a-z]{2,}/i;\r\n            var v4, v6, domain;\r\n            v4 = v4reg.exec(u);\r\n            if (v4) {\r\n                u = u.substr(v4[0].length);\r\n            }\r\n            // else if ((v6 = v6reg.exec(u))) {\r\n            //     u = u.substr(v6[0].length);\r\n            // }\r\n            else {\r\n                domain = domainReg.exec(u);\r\n                if (domain) {\r\n                    u = u.substr(domain[0].length);\r\n                }\r\n            }\r\n\r\n            // ip 或 dom 必须满足一个\r\n            if (!v4 && !v6 && !domain) {\r\n                return false;\r\n            }\r\n\r\n            // 端口号 0~65535\r\n            var portReg = /^:\\d{1,5}/;\r\n            r = portReg.exec(u);\r\n            if (r) {\r\n                u = u.substr(r[0].length);\r\n                var port = parseInt(r[0].substr(1), 10);\r\n                if (port > 65535) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if (u.length === 0 || u === '/') {\r\n                return true;\r\n            }\r\n            // pathname\r\n            // 情况太多 / + 直接任意字符\r\n            var pathReg = /^\\/[\\s\\S]+/i;\r\n            return pathReg.test(u);\r\n        }\r\n    }\r\n});\r\n\r\n// 点击弹出框 在滚动位置变化时自动隐藏的实现\r\n// miniui 的源码中实现在popupEdit上 但实际 menu 和 popup 都需要，避免来回重写 单独抽取扩展给menu和popup即可\r\nmini.__mouseWheelHandles = {\r\n    _unDocumentMousewheel: function () {\r\n        mini.un(document, 'mousewheel', this.__OnDocumentMousewheel, this);\r\n        this._mousewheelXY = null;\r\n    },\r\n    _onDocumentMousewheel: function () {\r\n        this._unDocumentMousewheel();\r\n\r\n        // 嵌套的菜单未显示的时候 还没有这个属性\r\n        if (!this.popupEl) return;\r\n\r\n        this._mousewheelXY = mini.getXY(this.popupEl);\r\n        mini.on(document, 'mousewheel', this.__OnDocumentMousewheel, this);\r\n    },\r\n    __OnDocumentMousewheel: function (e) {\r\n        var that = this;\r\n\r\n        function doWheel() {\r\n            if (!that.isPopup) return;\r\n            // 之前的位置\r\n            var box = that._mousewheelXY;\r\n            // 现在的位置 如果不一致 则页面滚动了 隐藏\r\n            var xy = mini.getXY(that.popupEl);\r\n            if (box[0] != xy[0] || box[1] != xy[1]) {\r\n                that.hide();\r\n            } else {\r\n                setTimeout(doWheel, 300);\r\n            }\r\n        }\r\n\r\n        setTimeout(doWheel, 300);\r\n    }\r\n};\r\n\r\nmini._ParseColumns = function (el) {\r\n    var columns = [];\r\n    var cs = mini.getChildNodes(el);\r\n    for (var i = 0, l = cs.length; i < l; i++) {\r\n        var node = cs[i];\r\n        //var jq = jQuery(node);\r\n\r\n        var column = {};\r\n\r\n        var editor = null,\r\n            filter = null;\r\n\r\n        //sub columns\r\n        var subCs = mini.getChildNodes(node);\r\n        if (subCs) {\r\n            for (var ii = 0, li = subCs.length; ii < li; ii++) {\r\n                var subNode = subCs[ii];\r\n                //var property = jQuery(subNode).attr(\"property\");\r\n                var property = mini.getAttr(subNode, 'property');\r\n                if (!property) continue;\r\n                property = property.toLowerCase();\r\n                if (property == 'columns') {\r\n                    column.columns = mini._ParseColumns(subNode);\r\n                    //jQuery(subNode).remove();\r\n                    if (subNode.parentNode) subNode.parentNode.removeChild(subNode);\r\n                }\r\n                if (property == 'editor' || property == 'filter') {\r\n                    var className = subNode.className;\r\n                    var classes = className.split(' ');\r\n                    for (var i3 = 0, l3 = classes.length; i3 < l3; i3++) {\r\n                        var cls = classes[i3];\r\n                        var clazz = mini.getClassByUICls(cls);\r\n                        if (clazz) {\r\n                            var ui = new clazz();\r\n\r\n                            if (property == 'filter') {\r\n                                filter = ui.getAttrs(subNode);\r\n                                filter.type = ui.type;\r\n                            } else {\r\n                                editor = ui.getAttrs(subNode);\r\n                                editor.type = ui.type;\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    //jQuery(subNode).remove();\r\n                    if (subNode.parentNode) subNode.parentNode.removeChild(subNode);\r\n                }\r\n            }\r\n        }\r\n\r\n        column.header = node.innerHTML;\r\n\r\n        // prettier-ignore\r\n        mini._ParseString(node, column,\r\n            // prettier-ignore\r\n            [\"name\", \"header\", \"field\", \"editor\", \"filter\", \"renderer\", \"width\", \"type\", \"renderer\",\r\n                \"headerAlign\", \"align\", \"headerCls\", \"cellCls\", \"headerStyle\", \"cellStyle\", \"displayField\", \"dateFormat\", \"listFormat\", \"mapFormat\", \"numberFormat\",\r\n                'trueValue', \"falseValue\", \"dataType\", 'vtype', \"currencyUnit\",\r\n                \"summaryType\", \"summaryRenderer\", \"groupSummaryType\", \"groupSummaryRenderer\",\r\n                \"defaultValue\", \"defaultText\", \"decimalPlaces\", \"data-options\", \"sortField\", \"sortType\",\r\n                \"emptyText\"\r\n            ]\r\n        );\r\n        // prettier-ignore\r\n        mini._ParseBool(node, column,\r\n            // prettier-ignore\r\n            [\"allowCellWrap\", \"visible\", \"readOnly\", \"allowSort\", \"allowResize\", \"allowMove\", \"allowDrag\", \"autoShowPopup\",\r\n                \"unique\", \"autoEscape\", \"enabled\", \"hideable\", \"showCellTip\", \"valueFromSelect\", \"navUpdown\"\r\n            ]\r\n        );\r\n        mini._ParseInt(node, column, ['minWidth']);\r\n        if (editor) column.editor = editor;\r\n        if (filter) column.filter = filter;\r\n\r\n        if (typeof column.editor == 'string') {\r\n            try {\r\n                column.editor = window['ev' + 'al']('(' + column.editor + ')');\r\n            } catch (e) {}\r\n        }\r\n\r\n        if (column.dataType) column.dataType = column.dataType.toLowerCase();\r\n\r\n        // 系统参数配置的 列 emptyText \r\n        if (mini.getF9FrameSysParams('gridColumnEmptyText') !== undefined) {\r\n            column.emptyText = mini.getF9FrameSysParams('gridColumnEmptyText');\r\n        }\r\n        // 默认占位为 -- // 系统参数可配置是否启用 列 emptyText\r\n        if (!column.emptyText && mini.getF9FrameSysParams('gridEnableColumnEmptyText') !== false) {\r\n            // 未配置数据类型 或类型不是 ['int','float','date','boolean','currency'] 为 --\r\n            if (!column.dataType || jQuery.inArray(column.dataType, ['int', 'float', 'date', 'boolean', 'currency']) === -1) {\r\n                column.emptyText = '--';\r\n            } else if (column.dataType == 'int' || column.dataType == 'float') {\r\n                // 数值类型则默认 0\r\n                column.emptyText = 0;\r\n            }\r\n        }\r\n\r\n        if (column.defaultValue === 'true') column.defaultValue = true;\r\n        if (column.defaultValue === 'false') column.defaultValue = false;\r\n\r\n        columns.push(column);\r\n\r\n        //data-options\r\n        var options = column['data-options'];\r\n        if (options) {\r\n            options = window['ev' + 'al']('(' + options + ')');\r\n            if (options) {\r\n                //attrs[\"data-options\"] = options;\r\n                mini.copyTo(column, options);\r\n            }\r\n        }\r\n    }\r\n\r\n    return columns;\r\n};\r\n\r\nvar _oParseFloat = mini.parseFloat;\r\nmini.parseFloat = function (value, culture, format) {\r\n\r\n    if (!value && value !== 0) {\r\n        return null;\r\n    }\r\n\r\n    if (typeof value === \"number\") {\r\n        return value;\r\n    }\r\n\r\n    value = value.toString();\r\n\r\n    // 添加对小数位数的处理，避免出现科学计数法的情况\r\n    if(format.indexOf('n') === 0) {\r\n        var dl = parseInt(format.substr(1), 10);\r\n        if(dl) {\r\n            value = value.substr(0, value.indexOf('.') + dl);\r\n        }\r\n    }\r\n\r\n    return _oParseFloat(value, culture, format);\r\n};\r\n\r\n// 解决重新给单选多选赋值数据源时导致已选值丢失的问题\r\nmini.ListControl.prototype.setData = function (data) {\r\n    if (typeof data == \"string\") {\r\n        data = window[\"ev\" + \"al\"](data);\r\n    }\r\n    if (!mini.isArray(data)) data = [];\r\n    this.data = data;\r\n    this.doUpdate();\r\n\r\n    if (this.value != \"\") {\r\n        var records = this.findItems(this.value);\r\n        this.deselectAll();\r\n        this.selects(records);\r\n    }\r\n};\r\n\r\n// 先做我们的扩展 再注册 css 减少重写成本\r\n(function ($) {\r\n    var old_regClass = window.mini.regClass || window.mini_regClass;\r\n    // 记录所有扩展\r\n    // {\r\n    //     clssName : '一个方法返回扩展对象 或 扩展对象数组'\r\n    // }\r\n    mini._EpointExt = {};\r\n    /**\r\n     * 添加扩展\r\n     *\r\n     * @param {string} name 控件名称\r\n     * @param {() => extObj | extObj[]} fn 扩展方法 返回扩展对象 扩展对象数组\r\n     */\r\n    window.mini.addEpointExt = function (name, fn) {\r\n        name = name.toLowerCase();\r\n        var exts = mini._EpointExt[name];\r\n        if (!exts) {\r\n            exts = mini._EpointExt[name] = [];\r\n        }\r\n        exts.push(fn);\r\n    };\r\n\r\n    /**\r\n     * 根据名称获取扩展对象\r\n     * @param {string} name 控件名称\r\n     * @returns 扩展对象数组\r\n     */\r\n    window.mini.getEpointExt = function (name) {\r\n        name = name.toLowerCase();\r\n        var extFns = mini._EpointExt[name];\r\n        delete mini._EpointExt[name];\r\n        if ($.isArray(extFns) && extFns.length) {\r\n            var extArr = [];\r\n            $.each(extFns, function (i, extFn) {\r\n                if (extFn && typeof extFn === 'function') {\r\n                    var ext = extFn();\r\n                    if ($.isArray(ext)) {\r\n                        extArr.push.apply(extArr, ext);\r\n                    } else {\r\n                        extArr.push(ext);\r\n                    }\r\n                }\r\n            });\r\n            return extArr;\r\n        }\r\n        return [];\r\n    };\r\n\r\n    window.mini_regClass = window.mini.regClass = function (clazz, className) {\r\n        // do overwrite\r\n        var args = [clazz];\r\n        var exts = mini.getEpointExt(className);\r\n        if ($.isArray(exts) && exts.length) {\r\n            $.each(exts, function (i, ext) {\r\n                args.push(ext);\r\n            });\r\n\r\n            mini.overwrite.apply(mini, args);\r\n        }\r\n\r\n        return old_regClass.apply(this, arguments);\r\n    };\r\n})(jQuery);\nmini.addEpointExt('AutoComplete', function() {\r\n    return {\r\n        isLocalData: false,\r\n\r\n        setIsLocalData: function(isLocalData) {\r\n            this.isLocalData = isLocalData;\r\n\r\n            if(this.isLocalData) {\r\n                this.setRemote(false);\r\n                this.setData(this._getLocalListData());\r\n            }\r\n        },\r\n        _localKey: undefined,\r\n        _getLocalKey: function() {\r\n            if(!this._localKey) {\r\n                this._localKey = this.id + '_local_data';\r\n            }\r\n            return this._localKey;\r\n        },\r\n        _localData: undefined,\r\n        _getLocalData: function() {\r\n            if(!this._localData) {\r\n                this._localData = window.localStorage.getItem(this._getLocalKey()) || '';\r\n            }\r\n\r\n            return this._localData;\r\n        },\r\n        _localListData: undefined,\r\n        _getLocalListData: function() {\r\n            var localDataArr,\r\n                listData = [];\r\n            if(!this._localListData) {\r\n                localDataArr = this._getLocalData().split(';');\r\n                for(var i = 0, l = localDataArr.length; i < l; i++) {\r\n                    listData.push({\r\n                        id: localDataArr[i],\r\n                        text: localDataArr[i]\r\n                    });\r\n                }\r\n                this._localListData = listData;\r\n            }\r\n\r\n            return this._localListData;\r\n        },\r\n\r\n        _updateLocalData: function(val) {\r\n            this._localData = val;\r\n            window.localStorage.setItem(this._getLocalKey(), val);\r\n        },\r\n        _updateLocalListData: function(data) {\r\n            this._localListData = data;\r\n            this.setData(data);\r\n        },\r\n        _addLocalData: function(value) {\r\n            var localData = this._getLocalData(),\r\n                localListData = this._getLocalListData(),\r\n                item = {};\r\n            if(!value || (';' + localData + ';').indexOf(';' + value + ';') > -1) {\r\n                return;\r\n            }\r\n            item[this.textField] = value;\r\n            item[this.valueField] = value;\r\n\r\n            localListData.unshift(item);\r\n            localData = value + (localData ? ';' + localData : '');\r\n\r\n            if(localListData.length > 10) {\r\n                localListData.length = 10;\r\n                localData = localData.substr(0, localData.lastIndexOf(';'));\r\n            }\r\n\r\n            this._updateLocalData(localData);\r\n            this._updateLocalListData(localListData);\r\n        },\r\n\r\n        _OnValueChanged: function() {\r\n            mini.AutoComplete.superclass._OnValueChanged.call(this);\r\n            var value = this.getValue();\r\n            if(value && this.isLocalData) {\r\n                this._addLocalData(value);\r\n            }\r\n        },\r\n        getExtraAttrs: function(el) {\r\n            var attrs = {};\r\n            mini._ParseBool(el, attrs, ['isLocalData']);\r\n\r\n            return attrs;\r\n        }\r\n    };\r\n});\nmini.addEpointExt('button', function() {\r\n    return {\r\n        disableMultiClick: mini.getCtrDefaultBySysParams('buttonDisableMultiClick', true),\r\n        iconPosition: 'left',\r\n\r\n        _iconOnlyCls: 'mini-button-iconOnly',\r\n\r\n        _iconPosCls: {\r\n            left: 'mini-button-iconLeft',\r\n            right: 'mini-button-iconRight',\r\n            top: 'mini-button-iconTop',\r\n            bottom: 'mini-button-iconBottom'\r\n        },\r\n\r\n        // ghost: true,\r\n        ghostCls: 'mini-button-ghost',\r\n\r\n        // 按钮语义化配置\r\n        state: 'default',\r\n        _statePrefix: 'mini-button-state-',\r\n        _stateList: ['default', 'primary', 'info', 'success', 'warning', 'danger'],\r\n        // 兼容老的 class 转换\r\n        _semantic2state: {\r\n            'mini-btn-primary': 'primary',\r\n            'mini-btn-info': 'info',\r\n            'mini-btn-success': 'success',\r\n            'mini-btn-warning': 'warning',\r\n            'mini-btn-danger': 'danger'\r\n        },\r\n\r\n        _loadingSvg: mini.isIE8 || mini.isIE9 ? '' : '<svg class=\"mini-button-loading-icon\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1024 1024\" width=\"128\" height=\"128\" fill=\"currentColor\" ><path d=\"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\"></path></svg>',\r\n\r\n        set: function(kv) {\r\n            if (typeof kv == 'string') {\r\n                return this;\r\n            }\r\n\r\n            this._allowUpdate = !(kv.text || kv.iconStyle || kv.iconCls || kv.iconPosition);\r\n\r\n            // 兼容 老的 class 配置语义化的支持\r\n            this._applyState(kv);\r\n\r\n            // 应用我们独特的 ghost 规则\r\n            this._applyGhost(kv);\r\n\r\n            kv.state = kv.state  || this.state;\r\n\r\n            mini.Button.superclass.set.call(this, kv);\r\n\r\n            if (this._allowUpdate === false) {\r\n                this._allowUpdate = true;\r\n                this.doUpdate();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        _create: function() {\r\n            this.el = document.createElement('a');\r\n\r\n            this.el.className = 'mini-button mini-corner-all';\r\n            this.el.hideFocus = true;\r\n            this.el.href = 'javascript:void(0)';\r\n            this.doUpdate();\r\n        },\r\n\r\n        // left|right|top|bottom\r\n        setIconPosition: function(value) {\r\n            this.iconPosition = value;\r\n            this.doUpdate();\r\n        },\r\n\r\n        setGhost: function(value) {\r\n            this.ghost = !!value;\r\n            if (this.ghost) {\r\n                this.addCls(this.ghostCls);\r\n            } else {\r\n                this.removeCls(this.ghostCls);\r\n            }\r\n        },\r\n        getGhost: function() {\r\n            return this.ghost;\r\n        },\r\n\r\n        // 应用默认的 ghost 规则\r\n        // 未配置时 主要按钮非 ghost 其他按钮全部 ghost\r\n        // 配置时 取配置\r\n        _applyGhost: function(kv) {\r\n            var state = kv.state || this.state;\r\n            if (kv.ghost === undefined) {\r\n                kv.ghost = state === 'primary' ? false : true;\r\n            }\r\n        },\r\n\r\n        // 将老的 mini-btn-语义 转换为配置\r\n        _applyState: function(kv) {\r\n            var classList = kv.cls;\r\n            if (!classList) {\r\n                return;\r\n            }\r\n            classList = classList.split(' ');\r\n            var cls = '';\r\n            for (var i = classList.length - 1; i >= 0; i--) {\r\n                cls = classList[i];\r\n                if (/mini-btn-(?:primary|info|success|warning|danger)/.test(cls)) {\r\n                    kv.state = this._semantic2state[cls] || 'default';\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        setState: function(value) {\r\n            var isValid = jQuery.inArray(value, this._stateList) !== -1;\r\n            if (!isValid) {\r\n                window.console && console.error && console.error(value + '不是有效的state值');\r\n                return this.state;\r\n            }\r\n            // 移除旧的 class 加上新的 class\r\n            this.removeCls(this._statePrefix + this.state);\r\n            this.state = value;\r\n            this.addCls(this._statePrefix + this.state);\r\n            return this.state;\r\n        },\r\n        getState: function() {\r\n            return this.state;\r\n        },\r\n\r\n        // 该方法在button实例set属性时反复调用\r\n        doUpdate: function() {\r\n            if (this._allowUpdate === false) return;\r\n\r\n            var text = this.text;\r\n\r\n            var iconCls = this.iconCls,\r\n                iconStyle = this.iconStyle || '',\r\n                iconPos = this.iconPosition,\r\n                plain = this.plain;\r\n\r\n            var hasIcon = iconCls || iconStyle || this.img;\r\n\r\n            var btnHtml = [];\r\n\r\n            if (text === '') {\r\n                this.addCls(this._iconOnlyCls);\r\n            } else {\r\n                this.removeCls(this._iconOnlyCls);\r\n                // button文本\r\n                btnHtml.push('<span class=\"mini-button-text\">' + text + '</span>');\r\n            }\r\n\r\n            if (plain) {\r\n                this.addCls(this._plainCls);\r\n            } else {\r\n                this.removeCls(this._plainCls);\r\n            }\r\n\r\n            if (hasIcon) {\r\n                // 由于doUpdate的反复调用，每次iconPos的值可能都不一样\r\n                // 移除之前的iconPos样式\r\n                if (!mini.hasClass(this.el, this._iconOnlyCls)) {\r\n                    if (this.__prevIconPos) {\r\n                        this.removeCls(this._iconPosCls[this.__prevIconPos]);\r\n                    }\r\n\r\n                    this.addCls(this._iconPosCls[iconPos]);\r\n\r\n                    this.__prevIconPos = iconPos;\r\n                }\r\n\r\n                // button图标\r\n                var iconPrev = iconPos == 'top' || iconPos == 'left';\r\n                var styleText = '';\r\n                if (this.img) {\r\n                    styleText += 'background: url(' + this.img + ') center no-repeat;';\r\n                }\r\n                if (iconStyle) {\r\n                    styleText += iconStyle;\r\n                }\r\n                var iconHtml = '<i class=\"mini-button-icon ' + iconCls + '\" ' + styleText + '></i>';\r\n\r\n                if (iconPrev) {\r\n                    btnHtml.unshift(iconHtml);\r\n                    btnHtml.unshift(this._loadingSvg);\r\n                } else {\r\n                    btnHtml.push(iconHtml);\r\n                    btnHtml.push(this._loadingSvg);\r\n                }\r\n                this.removeCls('mini-button-textOnly');\r\n            } else {\r\n                this.addCls('mini-button-textOnly');\r\n                btnHtml.unshift(this._loadingSvg);\r\n            }\r\n\r\n            if (this.allowCls) {\r\n                btnHtml.push('<span class=\"mini-button-allow mini-icon ' + this.allowCls + '\"></span>');\r\n            }\r\n\r\n            this.el.innerHTML = btnHtml.join('');\r\n        },\r\n        setIsLoading: (function() {\r\n            if (mini.isIE8 || mini.isIE9) {\r\n                return function setIsLoading(value) {\r\n                    // if (this.disableMultiClick) {\r\n                    //     this.disableMultiClick = false;\r\n                    // }\r\n                    this.isLoading = !!value;\r\n                    this.setEnabled(!this.isLoading);\r\n                };\r\n            }\r\n\r\n            return function setIsLoading(value) {\r\n                if (!this.enabled) return;\r\n                // if (this.disableMultiClick) {\r\n                //     this.disableMultiClick = false;\r\n                // }\r\n                this.isLoading = !!value;\r\n                if (this.isLoading) {\r\n                    this.addCls('mini-btn-loading');\r\n                } else {\r\n                    this.removeCls('mini-btn-loading');\r\n                }\r\n            };\r\n        })(),\r\n        getIsLoading: function() {\r\n            return this.isLoading;\r\n        },\r\n        _enableTimer: undefined,\r\n        _initEvents: function() {\r\n            // 若禁止多次点击 则多绑定一个事件\r\n            // 内部禁用按钮 一秒后再启用\r\n            // 由于在初始化时绑定 可保证在点击时最先触发，一旦点击立即禁用\r\n\r\n\r\n            var self = this;\r\n            mini._BindEvents(function() {\r\n                mini_onOne(this.el, 'mousedown', this.__OnMouseDown, this);\r\n                // mini_onOne(this.el, \"click\", this.__OnClick, this);\r\n\r\n                mini_onOne(\r\n                    this.el,\r\n                    'click',\r\n                    function(e) {\r\n                        if (self.isLoading) {\r\n                            return;\r\n                        }\r\n                        mini._lastClickedBtn = {\r\n                            id: self.id,\r\n                            text: self.text\r\n                        };\r\n                        self.__OnClick(e);\r\n                        mini._lastClickedBtn = undefined;\r\n                        if (self.disableMultiClick && self.enabled) {\r\n                            self.setEnabled(false);\r\n\r\n                           self._enableTimer = setTimeout(function() {\r\n                                self.setEnabled(true);\r\n                            }, 1000);\r\n                        }\r\n                    },\r\n                    this\r\n                );\r\n            }, this);\r\n        },\r\n        setEnabled: function (value) {\r\n            if(this._enableTimer) {\r\n                clearTimeout(this._enableTimer);\r\n            }\r\n\r\n            mini.Button.superclass.setEnabled.call(this, value);\r\n        },\r\n        getExtraAttrs: function(el) {\r\n            var attrs = {};\r\n\r\n            mini._ParseBool(el, attrs, ['disableMultiClick', 'isloading', 'ghost']);\r\n            mini._ParseString(el, attrs, ['state']);\r\n\r\n            return attrs;\r\n        }\r\n    };\r\n});\r\n\r\nmini.addEpointExt('MenuButton', function() {\r\n    // 弹出面板和按钮留出 2px 间隙\r\n    var yOffset = 2;\r\n    var oldSetMenu = mini.MenuButton.prototype.setMenu;\r\n    var setMenu = function setMenu(value) {\r\n        var returnValue = oldSetMenu.call(this, value);\r\n\r\n        this.menu && this.menu.setyOffset && this.menu.setyOffset(this.yOffset);\r\n        return returnValue;\r\n    };\r\n    return {\r\n        yOffset: yOffset,\r\n        setMenu: setMenu,\r\n        disableMultiClick: false\r\n    };\r\n});\r\n// // 弹出面板和按钮留出 2px 间隙\r\n// (function() {\r\n//     var yOffset = 2;\r\n//     var oldSetMenu = mini.MenuButton.prototype.setMenu;\r\n//     var setMenu = function setMenu(value) {\r\n//         var returnValue = oldSetMenu.call(this, value);\r\n\r\n//         this.menu && this.menu.setyOffset && this.menu.setyOffset(this.yOffset);\r\n//         return returnValue;\r\n//     };\r\n\r\n//     mini.overwrite(mini.MenuButton, {\r\n//         yOffset: yOffset,\r\n//         setMenu: setMenu\r\n//     });\r\n//     mini.overwrite(mini.SplitButton, {\r\n//         yOffset: yOffset,\r\n//         setMenu: setMenu\r\n//     });\r\n\r\n//     // tabs menu: ./Tabs.js\r\n//     // textlistbox: ./TextBoxList.js\r\n//     // combobox： './Popup.js'\r\n// })();\r\n\nmini.addEpointExt('ButtonEdit', function() {\r\n    return {\r\n        autoClear: true,\r\n        errorTextEl: null,\r\n        getErrorTextEl: function () {\r\n            if (!this.errorTextEl) {\r\n                this.errorTextEl = mini.append(this.el, '<span class=\"mini-errorText\"></span>');\r\n            }\r\n            return this.errorTextEl;\r\n        },\r\n        _RemoveErrorText: function () {\r\n            if (this.errorTextEl) {\r\n                var el = this.errorTextEl;\r\n                jQuery(el).remove();\r\n            }\r\n            this.errorTextEl = null;\r\n        }\r\n    };\r\n});\r\n\nmini.addEpointExt('Calendar', function () {\r\n    var ext = {\r\n        __OnClick: function (e) {\r\n            var viewDate = this.viewDate;\r\n            if (this.enabled == false) return;\r\n            var t = e.target;\r\n            var titleEl = mini.findParent(e.target, 'mini-calendar-title');\r\n\r\n            // 添加禁用底部按钮的支持\r\n            if (mini.hasClass(t, 'mini-button-disabled')) {\r\n                return;\r\n            }\r\n\r\n            if (mini.findParent(t, 'mini-calendar-monthNext')) {\r\n                viewDate.setDate(1);\r\n                viewDate.setMonth(viewDate.getMonth() + 1);\r\n                this.setViewDate(viewDate);\r\n            } else if (mini.findParent(t, 'mini-calendar-yearNext')) {\r\n                //viewDate.setMonth(0);\r\n                viewDate.setDate(1);\r\n                viewDate.setFullYear(viewDate.getFullYear() + 1);\r\n                this.setViewDate(viewDate);\r\n            } else if (mini.findParent(t, 'mini-calendar-monthPrev')) {\r\n                // 解决 setMonth 方法在当前日期为31，mouth减一后，由于上一个月只有30天，就会自动跳到下一个月的第一天，这种不符合我们预期的行为\r\n                // 需要先把当前日期设置到不会大于上一个月的最大日期\r\n                viewDate.setDate(1);\r\n                viewDate.setMonth(viewDate.getMonth() - 1);\r\n                this.setViewDate(viewDate);\r\n            } else if (mini.findParent(t, 'mini-calendar-yearPrev')) {\r\n                viewDate.setDate(1);\r\n                viewDate.setFullYear(viewDate.getFullYear() - 1);\r\n                this.setViewDate(viewDate);\r\n            } else if (mini.findParent(t, 'mini-calendar-tadayButton')) {\r\n                // var d = mini.clearTime(new Date());\r\n                var isYesterday = !!mini.findParent(t, 'yesterday');\r\n\r\n                var d = new Date();\r\n                if (isYesterday) {\r\n                    d.setDate(d.getDate() - 1);\r\n                }\r\n                this.setViewDate(d);\r\n                this.setSelectedDate(d);\r\n                if (this.currentTime) {\r\n                    var td = new Date();\r\n                    this.setTime(td);\r\n                }\r\n                this._OnDateClick(d, 'today');\r\n            } else if (mini.findParent(t, 'mini-calendar-clearButton')) {\r\n                this.setSelectedDate(null);\r\n                this.setTime(null);\r\n                this._OnDateClick(null, 'clear');\r\n            } else if (mini.findParent(t, 'mini-calendar-okButton')) {\r\n                this._OnDateClick(null, 'ok');\r\n                //            this.setSelectedDate(null);\r\n                //            this.setTime(null);\r\n                //            this._OnDateClick(null, \"clear\");\r\n            } else if (titleEl) {\r\n                this.showMenu();\r\n            }\r\n\r\n            var dateEl = mini.findParent(e.target, 'mini-calendar-date');\r\n\r\n            if (dateEl && !mini.hasClass(dateEl, 'mini-calendar-disabled')) {\r\n                var ids = dateEl.id.split('$');\r\n                var time = parseInt(ids[ids.length - 1]);\r\n                if (time == -1) return;\r\n                var date = new Date(time);\r\n\r\n                this._OnDateClick(date);\r\n            }\r\n\r\n            //this.focus();\r\n        },\r\n        enbaleOkButton: function (enabled) {\r\n            if (this.showOkButton) {\r\n                mini[enabled ? 'removeClass' : 'addClass'](this.okButtonEl, 'mini-button-disabled');\r\n            }\r\n        },\r\n        _OnValueChanged: function () {\r\n            if (this.showOkButton) {\r\n                mini[this.getValue() ? 'removeClass' : 'addClass'](this.okButtonEl, 'mini-button-disabled');\r\n            }\r\n            this.fire('valuechanged');\r\n        },\r\n        getShortWeek: function (week) {\r\n            if (week > 6) {\r\n                week = 7 - week;\r\n            }\r\n            return this.daysShort[week];\r\n        },\r\n        getFirstDayOfWeek: function () {\r\n            return this.firstDayOfWeek;\r\n        },\r\n        setFirstDayOfWeek: function (day) {\r\n            if (typeof day != 'number') {\r\n                day = window.parseInt(day, 10);\r\n            }\r\n            if (day > 6 || day < 0) {\r\n                return;\r\n            }\r\n            this.firstDayOfWeek = day;\r\n            this.doUpdate();\r\n        },\r\n        getExtraAttrs: function (el) {\r\n            var attrs = {};\r\n\r\n            mini._ParseInt(el, attrs, ['firstDayOfWeek']);\r\n\r\n            return attrs;\r\n        }\r\n    };\r\n    if (mini.supportRem) {\r\n        ext.width = '2.20rem';\r\n        ext.height = '1.6rem';\r\n    }\r\n    return ext;\r\n});\r\n\nmini.addEpointExt('CheckBoxList', function() {\r\n    return {\r\n        repeatLayout: 'flow',\r\n        errorTooltipPlacement: 'topright',\r\n        _initEvents: function() {\r\n            mini.CheckBoxList.superclass._initEvents.call(this);\r\n            var el = this._errorIconEl;\r\n            mini.on(el, 'click', function(e){\r\n                var tooltip = mini.getValidErrorToolTip();\r\n\r\n                tooltip.open(el);\r\n\r\n                jQuery('body').on('click.mini_error_tooltip', function(e){\r\n                    if(e.target != el) {\r\n                        tooltip.hide();\r\n\r\n                        jQuery('body').off('click.mini_error_tooltip');\r\n                    }\r\n                    \r\n                })\r\n            });\r\n        },\r\n        getErrorTextEl: function () {\r\n            if (!this.errorTextEl) {\r\n                this.errorTextEl = mini.append(this.cellEl, '<span class=\"mini-errorText\"></span>');\r\n            }\r\n            return this.errorTextEl;\r\n        },\r\n        _RemoveErrorText: function () {\r\n            if (this.errorTextEl) {\r\n                var el = this.errorTextEl;\r\n                jQuery(el).remove();\r\n            }\r\n            this.errorTextEl = null;\r\n        }\r\n    };\r\n});\nmini.addEpointExt('ComboBox', function() {\r\n    return {\r\n        autoLoad: true,\r\n        __input: function(e) {\r\n            if (document.activeElement == this._textEl && e.which) {\r\n                this._tryQuery();\r\n            }\r\n        },\r\n        // 参数autoLoad用于强制加载数据\r\n        setUrl: function(url, autoLoad) {\r\n            this.getPopup();\r\n\r\n            if (!this.autoLoad && !autoLoad) {\r\n                this.url = url;\r\n                this.isLoaded = false;\r\n            } else {\r\n                this._listbox.setUrl(url);\r\n                this.url = this._listbox.url;\r\n                this.data = this._listbox.data;\r\n\r\n                this.doDataChange();\r\n            }\r\n        },\r\n\r\n        load: function(data) {\r\n            if (!data) {\r\n                data = this.url;\r\n            }\r\n\r\n            if (typeof data == 'string') {\r\n                // 强制加载数据\r\n                this.setUrl(data, true);\r\n            } else {\r\n                this.setData(data);\r\n            }\r\n        },\r\n\r\n        setAutoLoad: function(autoLoad) {\r\n            this.autoLoad = !!autoLoad;\r\n        },\r\n        getAutoLoad: function() {\r\n            return this.autoLoad;\r\n        },\r\n        showPopup: function() {\r\n            // 若未加载数据则自动加载数据\r\n            if (this.isLoaded == false) {\r\n                this.load();\r\n            }\r\n\r\n            var ex = { cancel: false };\r\n            this.fire('beforeshowpopup', ex);\r\n            this._firebeforeshowpopup = false;\r\n            if (ex.cancel == true) return;\r\n\r\n            //if (this.id == \"cityCombo\") debugger\r\n            this._listbox.setHeight('auto');\r\n            mini.ComboBox.superclass.showPopup.call(this);\r\n            var h = this.popup.el.style.height;\r\n            if (h == '' || h == 'auto') {\r\n                this._listbox.setHeight('auto');\r\n            } else {\r\n                this._listbox.setHeight('100%');\r\n            }\r\n\r\n            var me = this;\r\n\r\n            if (!me.multiSelect) {\r\n                var jq = jQuery('table .mini-listbox-checkbox', me._listbox.el);\r\n\r\n                var display = jq.css('display');\r\n                jq.css('display', 'table-cell');\r\n                jq.css('display', display);\r\n                //alert(1);\r\n            }\r\n\r\n            this._listbox.setValueInCheckOrder(this.valueInCheckOrder);\r\n\r\n            this._listbox.setValue(this.value);\r\n\r\n            //        var sf = this;\r\n            //        setTimeout(function () {\r\n            //            mini.repaint(sf._listbox.el);\r\n            //        }, 100);\r\n\r\n            if (this.autoFocusItem && (this.value == '' || mini.isNull(this.value))) {\r\n                this._listbox._focusItem(0);\r\n            }\r\n        },\r\n        setValue: function(value) {\r\n            if (mini.isNull(value)) value = '';\r\n            //if (this.value !== value) {\r\n            var vts = this._listbox.getValueAndText(value);\r\n            var v = vts[0],\r\n                text = vts[1];\r\n            if (text === '' || mini.isNull(text)) text = value;\r\n\r\n            if (this.valueFromSelect && (v === '' || mini.isNull(v))) {\r\n                if(!this.isLoaded) {\r\n                    this._temporaryValue = value;\r\n                }\r\n\r\n                value = text = '';\r\n            } else {\r\n                this._temporaryValue = '';\r\n            }\r\n\r\n            this.value = value;\r\n\r\n            this._valueEl.value = this.value;\r\n\r\n            // 改为调用setText方法\r\n            // this.text = this._textEl.value = text;\r\n\r\n            // this._doEmpty();\r\n\r\n            this.setText(text);\r\n        },\r\n        setText: function(value) {\r\n            if (value === null || value === undefined) value = '';\r\n\r\n            // 安全整改要求，服务端返回数据是对html编码的，但是提交时需要还原成正常的html标签\r\n            value = mini.htmlDecode(value);\r\n\r\n            var fire = this.text !== value;\r\n            this.text = value;\r\n            this._textEl.value = value;\r\n\r\n            this._doEmpty();\r\n        },\r\n\r\n        doDataChange: function() {\r\n            var vts = this._listbox.getValueAndText(this.value || this._temporaryValue);\r\n            var value = vts[0],\r\n                text = vts[1];\r\n\r\n            if (value === '' && !this.clearOnLoad) {\r\n                value = this.value;\r\n                text = this.text;\r\n\r\n                this.value = null;\r\n            }\r\n\r\n            this.text = this._textEl.value = text;\r\n            this.setValue(value);\r\n\r\n            this.isLoaded = true;\r\n        },\r\n        getExtraAttrs: function(el) {\r\n            var attrs = {};\r\n\r\n            mini._ParseBool(el, attrs, ['autoLoad']);\r\n\r\n            return attrs;\r\n        }\r\n    };\r\n});\r\n\n// grid 扩展操作列\r\n(function ($) {\r\n    mini.ActionColumn = function (config) {\r\n        return mini.copyTo(\r\n            {\r\n                width: 32 * 4 + 24,\r\n                cellCls: 'mini-actioncolumn mini-actioncolumn-cell',\r\n                headerCls: 'mini-actioncolumn',\r\n                hideable: true,\r\n                allowDrag: true,\r\n                // header: function(column) {\r\n                //     // 列里面写了内容  header 就不会调用了\r\n                // },\r\n                minWidth: 32 * 2 + 24,\r\n                iconWidth: 16,\r\n                textWidth: 54,\r\n                itemGap: 16,\r\n                asText: false,\r\n                plain: false,\r\n                defaultShowItems: 4,\r\n                calcWidth: function (count) {\r\n                    var len = Math.min(count, this.defaultShowItems);\r\n                    var unit = this.asText ? this.textWidth : this.iconWidth;\r\n                    return Math.max(this.minWidth, unit * len + this.itemGap * (len - 1) + 24) + 'px';\r\n                },\r\n                renderer: function (e) {\r\n                    var that = this;\r\n                    var grid = e.sender;\r\n                    var record = e.record;\r\n\r\n                    var column = e.column;\r\n                    var icons = column.__actions;\r\n                    if (!icons || !icons.length) return '';\r\n\r\n                    var iconsHtml = '';\r\n\r\n                    var columnId = column._id;\r\n                    var iconsState = {};\r\n\r\n                    if (!column.__hasIconRender) {\r\n                        // 无控制 直接渲染前四个即可\r\n                        iconsHtml = $.map(icons.slice(0, that.defaultShowItems), function (item) {\r\n                            return renderIcon(item);\r\n                        }).join('');\r\n                    } else {\r\n                        // 调用 图标 renderer\r\n                        $.each(icons, function (i, icon) {\r\n                            if (icon.renderer + '' === icon.renderer) {\r\n                                icon.renderer = that.__getFun(icon.renderer, true);\r\n                            }\r\n                            if (icon && $.type(icon.renderer) === 'function') {\r\n                                var ev = {\r\n                                    sender: grid,\r\n                                    record: record,\r\n                                    row: e.row,\r\n                                    column: column,\r\n                                    icon: {\r\n                                        icon: icon.icon\r\n                                    }\r\n                                };\r\n                                var rtv = icon.renderer.call(grid, ev);\r\n                                if ($.type(rtv) === 'string' && rtv.length) {\r\n                                    window.console &&\r\n                                        console.warn &&\r\n                                        console.warn('图标渲染内容不可自定义，仅可通过e.icon.disabled 和 e.icon.visible 控制图标按钮的禁用和显示状态');\r\n                                }\r\n                                iconsState[icon._id] = {\r\n                                    disabled: ev.icon.disabled === true ? true : false,\r\n                                    visible: ev.icon.visible === false ? false : true\r\n                                };\r\n                            } else {\r\n                                iconsState[icon._id] = {\r\n                                    disabled: false,\r\n                                    visible: true\r\n                                };\r\n                            }\r\n                        });\r\n\r\n                        // 可见的\r\n                        var visibleIcons = $.grep(icons, function (icon) {\r\n                            return iconsState[icon._id].visible;\r\n                        });\r\n                        var isOver = visibleIcons.length > that.defaultShowItems;\r\n                        if (isOver) {\r\n                            // 渲染前三个可见的 + ext\r\n                            iconsHtml = $.map(visibleIcons.slice(0, that.defaultShowItems - 1), function (item) {\r\n                                var isDisabled = iconsState[item._id].disabled;\r\n                                return renderIcon(item, isDisabled);\r\n                            }).join('');\r\n\r\n                            // 其他图标\r\n                            var overIconIds = [],\r\n                                disabledIds = [];\r\n                            $.map(visibleIcons.slice(that.defaultShowItems - 1), function (item) {\r\n                                overIconIds.push(item._id);\r\n                                if (iconsState[item._id].disabled) {\r\n                                    disabledIds.push(item._id);\r\n                                }\r\n                            }).join(',');\r\n\r\n                            iconsHtml += renderIcon(column.__actionsMap.showMore, false, overIconIds.join(','), disabledIds.join(','));\r\n                        } else {\r\n                            iconsHtml = $.map(visibleIcons, function (item) {\r\n                                var isDisabled = iconsState[item._id].disabled;\r\n                                return renderIcon(item, isDisabled);\r\n                            }).join('');\r\n                        }\r\n                    }\r\n\r\n                    return '<div class=\"mini-actioncolumn-wrap\" data-column-id=\"' + columnId + '\" data-record-id=\"' + record._uid + '\">' + iconsHtml + '</div>';\r\n\r\n                    function renderIcon(item, isDisabled, overIds, disabledIds) {\r\n                        var html =\r\n                            '<i class=\"action-icon ' +\r\n                            (that.asText ? '' : item.icon) +\r\n                            (isDisabled ? ' mini-disabled' : '') +\r\n                            '\" title=\"' +\r\n                            item.title +\r\n                            '\" data-column-id=\"' +\r\n                            columnId +\r\n                            '\" data-icon-id=\"' +\r\n                            item._id +\r\n                            '\" data-record-id=\"' +\r\n                            record._uid +\r\n                            '\" ' +\r\n                            (overIds ? 'data-over-ids=\"' + overIds + '\"' : '') +\r\n                            (disabledIds ? ' data-disabled-ids=\"' + disabledIds + '\"' : '') +\r\n                            '></i>';\r\n\r\n                        if (that.asText) {\r\n                            var $icon = $(html);\r\n                            $icon.removeClass('action-icon').addClass('action-text').text($icon.attr('title')).css('width', that.textWidth);\r\n                            if (!that.plain) {\r\n                                $icon.addClass('asBtn');\r\n                            }\r\n                            return $icon[0].outerHTML;\r\n                        }\r\n\r\n                        return html;\r\n                    }\r\n                },\r\n\r\n                __onCellClick: function (e) {\r\n                    // 可能存在多列 只处理自己的点击事件\r\n                    if (e.column._id !== this._id) {\r\n                        return;\r\n                    }\r\n                    var targetEL = e.htmlEvent.target;\r\n                    var iconId = targetEL.getAttribute('data-icon-id');\r\n\r\n                    var icon = e.column.__actionsMap[iconId];\r\n                    if (!icon || !icon.handle || $(targetEL).hasClass('mini-disabled')) return;\r\n\r\n                    this.__callHandle(icon.handle, e.record, e.sender, targetEL);\r\n                },\r\n                /**\r\n                 * 调用处理函数\r\n                 *\r\n                 * @param {any} fn 配置的处理函数\r\n                 * @param {object} record 当前行数据\r\n                 * @param {mini.DataGrid} grid 当前表格对象\r\n                 * @param {HTMLElement | undefined} el 当前图标dom\r\n                 * @returns\r\n                 */\r\n                __callHandle: function (fn, record, grid, el) {\r\n                    var type = $.type(fn);\r\n                    if (type === 'function') {\r\n                        return fn.call(grid, record, el);\r\n                    }\r\n                    if (type === 'string') {\r\n                        var isCall = /\\(.*\\)/.test(fn);\r\n\r\n                        if (isCall) {\r\n                            // 如果本身就是 fnName(xxx) 这种调用则直接执行\r\n                            eval(fn);\r\n                        } else {\r\n                            // 如果没带括号调用 则传参调用\r\n                            eval(fn)(record, el);\r\n                        }\r\n\r\n                        return;\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * 获取 function\r\n                 *\r\n                 * @param {string} fnName 函数名字符串\r\n                 * @param {boolean} forceFn 是否只查找fn\r\n                 * @returns\r\n                 */\r\n                __getFun: function (fnName, forceFn) {\r\n                    if (window[fnName] && $.type(window[fnName]) === 'function') {\r\n                        return window[fnName];\r\n                    }\r\n                    return forceFn ? false : fnName;\r\n                },\r\n\r\n                init: function (grid) {\r\n                    var actioncolumn = this;\r\n                    var $h = $('<div></div>').html(actioncolumn.header);\r\n\r\n                    var noHandleArr = [];\r\n\r\n                    // 是否有图标的 renderer 如果有 需要很多额外工作\r\n                    actioncolumn.__hasIconRender = false;\r\n\r\n                    var iconsMap = {};\r\n                    var icons = $.map($h.find('[type=\"action\"]').remove(), function (el, i) {\r\n                        var icon = {\r\n                            id: el.getAttribute('id') || i + 1,\r\n                            _id: i + 1,\r\n                            icon: el.getAttribute('icon'),\r\n                            title: el.textContent || el.innerText || el.getAttribute('title'),\r\n                            //\r\n                            // handle: getHandle(el.getAttribute('onclick')),\r\n                            // renderer: getHandle(el.getAttribute('renderer'), true)\r\n                            handle: el.getAttribute('onclick'),\r\n                            renderer: el.getAttribute('renderer')\r\n                        };\r\n\r\n                        if (!icon.handle) {\r\n                            noHandleArr.push(icon);\r\n                        }\r\n                        iconsMap[icon._id] = icon;\r\n                        if (icon.renderer) {\r\n                            actioncolumn.__hasIconRender = true;\r\n                        }\r\n                        return icon;\r\n                    });\r\n\r\n                    $h.find('>*').remove();\r\n                    actioncolumn.header = $.trim($h.text()) || '操作';\r\n                    actioncolumn.__actions = icons;\r\n                    actioncolumn.__actionsMap = iconsMap;\r\n                    actioncolumn.width = actioncolumn.calcWidth(icons.length);\r\n\r\n                    // 长度 大于 4 则插入一个\r\n                    if (icons.length > this.defaultShowItems) {\r\n                        var showMoreIcon = {\r\n                            _id: 'showMore',\r\n                            icon: 'icon-omit',\r\n                            title: '更多',\r\n                            handle: __showMoreActions\r\n                        };\r\n                        iconsMap[showMoreIcon._id] = showMoreIcon;\r\n\r\n                        // 无控制 则初始化创建即可 否则需在单元格 renderer 时动态控制\r\n                        if (!actioncolumn.__hasIconRender) {\r\n                            icons.splice(actioncolumn.defaultShowItems - 1, 0, showMoreIcon);\r\n                            this.__createExtMenu(grid);\r\n                            this.__extMenu.setItems(\r\n                                $.map(this.__actions.slice(actioncolumn.defaultShowItems), function (icon) {\r\n                                    return {\r\n                                        id: icon._id,\r\n                                        text: icon.title,\r\n                                        iconCls: icon.icon\r\n                                    };\r\n                                })\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    if (noHandleArr.length) {\r\n                        $.each(noHandleArr, function (i, icon) {\r\n                            console && console.warn && console.warn(actioncolumn.header + '列的【' + icon.icon + '】未配置点击事件！！！');\r\n                        });\r\n                    }\r\n                    noHandleArr = null;\r\n\r\n                    grid.on('cellClick', this.__onCellClick, this);\r\n                    actioncolumn.__inited = true;\r\n\r\n                    function __showMoreActions(record, el) {\r\n                        if (!actioncolumn.__extMenu) {\r\n                            actioncolumn.__createExtMenu(grid);\r\n                        }\r\n\r\n                        // 记录当前行id\r\n                        actioncolumn.__extMenu.__currentRecordId = record._uid;\r\n                        // 如果有图标的 render 需要在此获取状态\r\n                        if (actioncolumn.__hasIconRender) {\r\n                            var overIds = (el.getAttribute('data-over-ids') || '').split(',');\r\n                            var disabledIds = (el.getAttribute('data-disabled-ids') || '').split(',');\r\n                            actioncolumn.__extMenu.setItems(\r\n                                $.map(overIds, function (id) {\r\n                                    var targetIcon = actioncolumn.__actionsMap[id];\r\n                                    return {\r\n                                        id: id,\r\n                                        text: targetIcon.title,\r\n                                        iconCls: targetIcon.icon,\r\n                                        enabled: disabledIds.indexOf(id) !== -1 ? false : true\r\n                                    };\r\n                                })\r\n                            );\r\n                        }\r\n\r\n                        actioncolumn.__extMenu.popupEl = el;\r\n                        actioncolumn.__extMenu.showAtEl(el);\r\n                        $(el).addClass('active');\r\n                    }\r\n                },\r\n                __createExtMenu: function (grid) {\r\n                    var that = this;\r\n                    if (!this.__extMenuInited) {\r\n                        var extMenu = new mini.Menu();\r\n                        extMenu.set({\r\n                            minWidth: 50,\r\n                            yOffset: 4\r\n                        });\r\n\r\n                        extMenu.on('itemclick', function (e) {\r\n                            var id = e.item.id;\r\n                            var icon = that.__actionsMap[id];\r\n                            var rid = extMenu.__currentRecordId;\r\n                            var record = grid.getRowByUID(rid);\r\n                            if (icon && icon.handle) {\r\n                                that.__callHandle(icon.handle, record, grid);\r\n                            }\r\n                        });\r\n                        var oldHide = extMenu.hide;\r\n                        extMenu.hide = function () {\r\n                            oldHide.apply(this, arguments);\r\n                            $('[data-icon-id=\"showMore\"]').removeClass('active');\r\n                            // $(grid._rowsEl).off('scroll', hideMenu);\r\n                            // grid._rowsEl.onscroll = null;\r\n                            grid._rowsEl.removeEventListener && grid._rowsEl.removeEventListener('scroll', hideMenu, true);\r\n                        };\r\n\r\n                        this.__extMenu = extMenu;\r\n                        this.__extMenuInited = true;\r\n\r\n                        function hideMenu() {\r\n                            extMenu.hide();\r\n                        }\r\n                        grid._rowsEl.addEventListener &&\r\n                            extMenu.on('open', function () {\r\n                                //    grid._rowsEl.onscroll = hideMenu;\r\n                                //    $(grid._rowsEl).on('scroll', hideMenu);\r\n                                grid._rowsEl.addEventListener('scroll', hideMenu, true);\r\n                            });\r\n                    }\r\n                    return this.__extMenu;\r\n                }\r\n            },\r\n            config\r\n        );\r\n    };\r\n    mini._Columns['actioncolumn'] = mini.ActionColumn;\r\n})(window.jQuery);\r\n\r\nmini.addEpointExt('DataGrid', function () {\r\n    // 功能扩展\r\n    (function ($) {\r\n        var oldFn = mini.GridView.prototype._createPagers;\r\n        //  设置默认分页为  pagination\r\n        mini.overwrite(mini.DataGrid, {\r\n            pagerType: 'pagination',\r\n\r\n            _createPagers: function () {\r\n                oldFn.apply(this, arguments);\r\n\r\n                if (this.pagerType !== 'pager') {\r\n                    this.setPagerType(this.pagerType);\r\n                }\r\n            }\r\n        });\r\n\r\n        // grid-emptyText 位置计算\r\n        var oldCreateRowsHTML = mini.FrozenGridView.prototype._createRowsHTML;\r\n        mini.FrozenGridView.prototype._createRowsHTML = function () {\r\n            var returnValue = oldCreateRowsHTML.apply(this, arguments);\r\n\r\n            var h = parseInt($(this.el).find('.mini-grid-rows-view').height(), 10);\r\n            if (h && h > 200) {\r\n                h = (h * 0.3) >> 0;\r\n                var $el = $(returnValue);\r\n                $el.find('.mini-grid-emptyText').css({\r\n                    // 16px + 48px + 8px\r\n                    paddingTop: h + 56,\r\n                    backgroundPosition: 'center ' + h + 'px'\r\n                });\r\n                return $el[0].outerHTML;\r\n            }\r\n\r\n            return returnValue;\r\n        };\r\n\r\n        // 新 UI 适配边框\r\n        var oldSetShowVGridLines = mini.DataGrid.prototype.setShowVGridLines;\r\n        var oldSetShowHGridLines = mini.DataGrid.prototype.setShowHGridLines;\r\n        mini.DataGrid.prototype.setShowVGridLines = function (show) {\r\n            var returnValue = oldSetShowVGridLines.apply(this, arguments);\r\n\r\n            if (show) {\r\n                $(this.el).addClass('mini-grid-showVGridLines');\r\n            } else {\r\n                $(this.el).removeClass('mini-grid-showVGridLines');\r\n            }\r\n            return returnValue;\r\n        };\r\n        mini.DataGrid.prototype.setShowHGridLines = function (show) {\r\n            var returnValue = oldSetShowHGridLines.apply(this, arguments);\r\n\r\n            if (show) {\r\n                $(this.el).addClass('mini-grid-showHGridLines');\r\n            } else {\r\n                $(this.el).removeClass('mini-grid-showHGridLines');\r\n            }\r\n            return returnValue;\r\n        };\r\n\r\n        // 表格边框配置 应用后 适配 class 直接作为默认值的情况下 不会走上面重写的set方法\r\n        function adaptDefaultGridLines() {\r\n            if (this.showHGridLines) {\r\n                $(this.el).addClass('mini-grid-showHGridLines');\r\n            } else {\r\n                $(this.el).removeClass('mini-grid-showHGridLines');\r\n            }\r\n            if (this.showVGridLines) {\r\n                $(this.el).addClass('mini-grid-showVGridLines');\r\n            } else {\r\n                $(this.el).removeClass('mini-grid-showVGridLines');\r\n            }\r\n        }\r\n\r\n        // 去掉 datagrid 上低性能的 CellToolTip 插件\r\n        mini._Grid_CellToolTip.prototype.destroy = function () {\r\n            mini.un(this.owner.el, 'mousemove', this.__OnGridMouseMove, this);\r\n        };\r\n\r\n        mini.DataGrid.prototype._afterApply = function () {\r\n            // 表格边框 初始化适配\r\n            adaptDefaultGridLines.apply(this, arguments);\r\n            // 去掉 CellToolTip 插件 使用简单的方式\r\n            if (this._CellToolTip && this._CellToolTip.destroy) {\r\n                this._CellToolTip.destroy();\r\n\r\n                this.on('update', addCellTip, this);\r\n            }\r\n        };\r\n        /**\r\n         * 新的...效果\r\n         *\r\n         */\r\n        function addCellTip() {\r\n            if (this.showCellTip !== true) return;\r\n            // tree treegrid\r\n            if (this.type === 'treegrid' || this.type == 'pagertree') {\r\n                $(this._contentEl)\r\n                    .find('.mini-tree-nodetext')\r\n                    .each(function (i, el) {\r\n                        el.title = $.trim(el.textContent || el.innerText);\r\n                    });\r\n            }\r\n            // datagrid\r\n            $(this._contentEl)\r\n                .find('.mini-grid-cell-inner')\r\n                .add($(this._columnsEl).find('.mini-grid-headerCell-inner'))\r\n                .each(function (i, el) {\r\n                    if ($(el).parent().hasClass('mini-tree-treecell')) {\r\n                        return;\r\n                    }\r\n                    el.title = $.trim(el.textContent || el.innerText);\r\n                });\r\n            // 排序图标\r\n            $(this._columnsEl)\r\n                .find('.mini-grid-sortIcon:not([title]),.mini-grid-allowsort:not([title])')\r\n                .each(function (i, el) {\r\n                    el.title = '点击排序';\r\n                });\r\n        }\r\n\r\n        // miniui grid _errorToolTip\r\n        $(function () {\r\n            mini.grid_error_toolTip = new mini.ToolTip();\r\n            mini.grid_error_toolTip.set({\r\n                selector: '.mini-grid-cell-error',\r\n                placement: 'top',\r\n                trigger: 'hover',\r\n                // cls: 'error-tooltip'\r\n                theme: 'error',\r\n                autoHide: true,\r\n                defaultTheme: 'error',\r\n                onbeforeopen: function (e) {\r\n                    // 获取错误 内容\r\n                    var cellId = e.element.getAttribute('id');\r\n                    var grid = mini.getAndCreate($(e.element).closest('.mini-grid')[0]);\r\n                    if (cellId && grid) {\r\n                        cellId = cellId.replace('$cell$', '$');\r\n                        var error = grid._cellMapErrors && grid._cellMapErrors[cellId];\r\n                        if (error) {\r\n                            e.content = error.errorText;\r\n                            e.cancel = false;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    })(window.jQuery);\r\n\r\n    // 表头过滤\r\n    (function (win, $) {\r\n        /**\r\n         * 表格列筛选\r\n         *\r\n         * @param {object} options 相关配置\r\n         */\r\n        function HeaderFilter(options) {\r\n            if (!options) {\r\n                throw new Error('options is required');\r\n            }\r\n            var grid = options.grid;\r\n            if (grid + '' === grid) {\r\n                grid = mini.get(grid);\r\n            }\r\n            if (grid && mini.isControl(grid)) {\r\n                this.grid = grid;\r\n            } else {\r\n                throw new Error('必须配置表格');\r\n            }\r\n            this._events = {};\r\n            this.options = $.extend({}, HeaderFilter.defaultOptions, options);\r\n            if (!~['server', 'client'].indexOf(this.options.filterMode)) {\r\n                window.console && console.error(this._logPrefix, '[filterMode] must be one of \"server\" or \"client\"');\r\n                this.options.filterMode = 'client';\r\n            }\r\n            this.onFilter = this.options.onFilter;\r\n            delete this.options.onFilter;\r\n            this.init();\r\n        }\r\n        HeaderFilter.defaultOptions = {\r\n            // 翻页 重新加载数据时 是否保留过滤效果\r\n            keepFilter: true,\r\n            // 启用过滤的列\r\n            columns: [],\r\n            // 过滤模式\r\n            filterMode: 'client',\r\n            // 过滤时触发\r\n            onFilter: function () {}\r\n        };\r\n        $.extend(HeaderFilter.prototype, {\r\n            on: mini.Control.prototype.on,\r\n            fire: mini.Control.prototype.fire,\r\n            un: mini.Control.prototype.un,\r\n            findListener: mini.Control.prototype.findListener,\r\n            _logPrefix: '[HeaderFilter]',\r\n            __genderId: (function () {\r\n                var i = 0;\r\n                return function () {\r\n                    return 'HeaderFilter-' + i++;\r\n                };\r\n            })(),\r\n            init: function () {\r\n                this._id = this.__genderId();\r\n                this._columnControls = [];\r\n                this.setColumns(this.options.columns);\r\n\r\n                this.grid.on('headercellclick', this.__handleFilterClick, this);\r\n\r\n                this.grid.on('columnschanged', this.__handleGridColumnChanged, this);\r\n                this.grid.on('update', this.__handleGridUpdate, this);\r\n\r\n                // setData和翻页加载数据均会触发 在此内部进行再次过滤即可\r\n                this.grid._dataSource.on('loaddata', this.__handleNewData, this);\r\n\r\n                this.fire('init');\r\n            },\r\n            destroy: function () {\r\n                this.clearFilter();\r\n                this.__clearOldColumns();\r\n\r\n                $(this.grid.el).find('.mini-datagrid-headerfilter-trigger').remove();\r\n\r\n                this.grid.un('headercellclick', this.__handleFilterClick, this);\r\n\r\n                this.grid.un('columnschanged', this.__handleGridColumnChanged, this);\r\n                this.grid.un('update', this.__restoreFilterStatus, this);\r\n\r\n                // setData和翻页加载数据均会触发 在此内部进行再次过滤即可\r\n                this.grid._dataSource.un('loaddata', this.__handleNewData, this);\r\n            },\r\n            /**\r\n             * 处理新数据\r\n             * 如需要过滤 则对新数据也进行处理\r\n             */\r\n            __handleNewData: function () {\r\n                // console.log('loaddata');\r\n                if (!this.options.keepFilter) {\r\n                    this.clearFilter();\r\n                    return this;\r\n                }\r\n\r\n                var hasFilter = false;\r\n                var that = this;\r\n                $.each(this.filterColumns, function (i, column) {\r\n                    var col = that.filterColumnCfgMap[column.name];\r\n                    if (col.__filterChecked && col.__filterChecked.length) {\r\n                        hasFilter = true;\r\n                        return false;\r\n                    }\r\n                });\r\n\r\n                if (hasFilter) {\r\n                    this.__doFilter();\r\n                }\r\n                return this;\r\n            },\r\n            __handleGridColumnChanged: function () {\r\n                // 列change的时候 dom 还未更新 miniui 源码中 setTimeout 了两次 。。。。\r\n                // 此时更新都是无效的。。。\r\n                // 真是的dom更新最终会导 update 中 此处用变量标记更新是否是由于列改变\r\n                // 由于 setTimeout 的不确定性 可能并不准确\r\n                this.__gridColumnChanged = true;\r\n            },\r\n            __doGridColumnChanged: function () {\r\n                this.clearFilter();\r\n                this.__clearOldColumns();\r\n                // 清理控件 列筛选创建的控件\r\n                $.map(this._columnControls, function (ctr) {\r\n                    ctr.destroy && ctr.destroy(true);\r\n                });\r\n                this._columnControls = [];\r\n\r\n                this.setColumns(this.options.columns);\r\n            },\r\n            __handleGridUpdate: function (e) {\r\n                if (this.__gridColumnChanged === undefined) {\r\n                    this.__restoreFilterStatus(e);\r\n                    // if (this.options.filterMode === 'client' && this.__gridColumnChanged === undefined) {\r\n                    return;\r\n                }\r\n                // 先处理列变更\r\n                if (this.__gridColumnChanged) {\r\n                    this.__doGridColumnChanged(e);\r\n                    this.__gridColumnChanged = undefined;\r\n                }\r\n\r\n                this.__restoreFilterStatus(e);\r\n            },\r\n            __handleFilterClick: function (ev) {\r\n                var e = ev.htmlEvent;\r\n                var $target = $(e.target);\r\n                if ($target.hasClass('mini-datagrid-headerfilter-trigger')) {\r\n                    e.stopPropagation();\r\n                    var column = ev.column;\r\n                    if ($target.hasClass('show')) {\r\n                        $target.removeClass('show');\r\n                        this.hideColumnFilter(column);\r\n                    } else {\r\n                        $target.addClass('show');\r\n                        this.showColumnFilter(column, e.target);\r\n                        // this.showColumnFilter(column, this.__getHeaderElByTrigger(e.target));\r\n                    }\r\n                }\r\n            },\r\n            __getHeaderElByTrigger: function (trigger) {\r\n                return $(trigger).closest('.mini-grid-headerCell')[0];\r\n            },\r\n            setColumns: function (columns) {\r\n                var c = $.isArray(columns) ? columns : [];\r\n\r\n                var filterColumns = [];\r\n                var filterColumnMap = {};\r\n                var filterColumnCfgMap = {};\r\n                var grid = this.grid;\r\n                var that = this;\r\n                var filterMode = this.options.filterMode;\r\n\r\n                $.each(c, function (i, item) {\r\n                    if (!item || !item.name || (filterMode == 'client' && typeof item.filterMethod !== 'function')) {\r\n                        window.console && console.error(that._logPrefix, item, ' is not a valid filter column');\r\n                        return;\r\n                    }\r\n                    var column = grid.getColumn(item.name);\r\n                    if (column) {\r\n                        if (!/mini-datagrid-headerfilter-trigger/.test(column.header)) {\r\n                            column.header += '<span class=\"mini-datagrid-headerfilter-trigger action-icon icon-filter\" title=\"点击过滤\">️</span>';\r\n                        }\r\n                        if (column.inited) {\r\n                            // 初始化过的则需要加元素\r\n                            var headerEl = grid.getHeaderCellEl(column);\r\n                            var $innerEl = $(headerEl).find('.mini-grid-headerCell-inner');\r\n                            var $icon = $('<span class=\"mini-datagrid-headerfilter-trigger action-icon icon-filter\" title=\"点击过滤\">️</span>');\r\n\r\n                            if (!$innerEl.find('> .mini-datagrid-headerfilter-trigger').length) {\r\n                                if ($innerEl.children().length) {\r\n                                    $icon.insertBefore($innerEl.children().eq(0));\r\n                                } else {\r\n                                    $icon.appendTo($innerEl);\r\n                                }\r\n                            }\r\n                        }\r\n                        // 记录当前过滤的已选值\r\n                        item.__filterChecked = [];\r\n                        filterColumns.push(column);\r\n                        filterColumnMap[column.name] = column;\r\n                        filterColumnCfgMap[column.name] = item;\r\n                    } else {\r\n                        window.console && console.error(that._logPrefix, \"can't find column that named \" + item.name);\r\n                    }\r\n                });\r\n\r\n                this.filterColumns = filterColumns;\r\n                this.filterColumnMap = filterColumnMap;\r\n                this.filterColumnCfgMap = filterColumnCfgMap;\r\n\r\n                return this;\r\n            },\r\n            __clearOldColumns: function () {\r\n                // var that = this;\r\n                $.map(this.filterColumnCfgMap, function (col) {\r\n                    col.__filterChecked = [];\r\n                    if (col.popup) {\r\n                        col.popup.destroy && col.popup.destroy();\r\n                        col.popup = null;\r\n                    }\r\n                });\r\n                this.filterColumns = [];\r\n                this.filterColumnMap = {};\r\n                this.filterColumnCfgMap = {};\r\n            },\r\n            showColumnFilter: function (column, el) {\r\n                var filterPopup = this.__renderColumnFilter(column);\r\n                var headerEl = el ? el : this.grid.getHeaderCellEl(column);\r\n                filterPopup.popupEl = headerEl;\r\n                [].some && mini.getChildControls(filterPopup).some(function (ctr) {\r\n                    if (ctr.type == 'panel') {\r\n                        ctr.setMaxHeight(window.innerHeight - 120);\r\n                        return true;\r\n                    }\r\n                });\r\n                filterPopup.showAtEl(headerEl);\r\n            },\r\n            hideColumnFilter: function (column) {\r\n                var columnCfg = this.filterColumnCfgMap[column.name];\r\n                columnCfg.popup && columnCfg.popup.hide();\r\n            },\r\n            /**\r\n             * 还原表头的筛选状态  miniui filter 方法\r\n             */\r\n            __restoreFilterStatus: function () {\r\n                var that = this;\r\n                $.map(this.filterColumns, function (column) {\r\n                    var colCfg = that.filterColumnCfgMap[column.name];\r\n                    var $trigger = $(that.grid.getHeaderCellEl(column)).find('.mini-datagrid-headerfilter-trigger');\r\n                    if (colCfg.__filterChecked && colCfg.__filterChecked.length) {\r\n                        $trigger.addClass('active');\r\n                    } else {\r\n                        $trigger.removeClass('active');\r\n                    }\r\n                });\r\n                return this;\r\n            },\r\n            __renderColumnFilter: function (column) {\r\n                var columnCfg = this.filterColumnCfgMap[column.name];\r\n\r\n                return this.__createPopupPanel(columnCfg, column);\r\n            },\r\n            __createPopupPanel: function (columnCfg, column) {\r\n                var that = this;\r\n                var filterList = !columnCfg.filterMultiple\r\n                    ? [\r\n                          {\r\n                              id: '__reset',\r\n                              text: '全部'\r\n                          }\r\n                      ].concat(columnCfg.filters)\r\n                    : columnCfg.filters;\r\n\r\n                if (columnCfg.popup) {\r\n                    return columnCfg.popup;\r\n                }\r\n\r\n                var maxChatCount = Math.min(\r\n                    12,\r\n                    Math.max.apply(\r\n                        Math,\r\n                        $.map(filterList, function (item) {\r\n                            return (item.text || item.id).length;\r\n                        })\r\n                    )\r\n                );\r\n                // 筛选列表\r\n                var listBox = (columnCfg.listBox = new mini.ListBox());\r\n                this._columnControls.push(listBox);\r\n                listBox.set({\r\n                    showCheckBox: columnCfg.filterMultiple,\r\n                    multiSelect: columnCfg.filterMultiple,\r\n                    data: filterList\r\n                });\r\n                $(listBox._borderEl).css({\r\n                    borderWidth: 0\r\n                });\r\n\r\n                // popup\r\n                var popup = (columnCfg.popup = new mini.Popup());\r\n                // popup.set({ maxHeight: window.innerHeight - 120});\r\n                this._columnControls.push(popup);\r\n                popup.addCls('mini-datagrid-headerfilter-popup');\r\n\r\n                if (columnCfg.filterMultiple) {\r\n                    popup.set({\r\n                        minWidth: 160\r\n                    });\r\n                }\r\n                var panel = new mini.Panel();\r\n                this._columnControls.push(panel);\r\n\r\n                // 取字符和列宽的较大值\r\n                var panelW = Math.max(maxChatCount * 20, column.pxWidth);\r\n                if (columnCfg.filterMultiple && panelW < 160) {\r\n                    panelW = 160;\r\n                }\r\n                panel.set({\r\n                    // width: column.pxWidth && column.pxWidth > 50 ? column.pxWidth : 50,\r\n                    // minWidth: 50,\r\n                    maxWidth: 400,\r\n                    width: panelW,\r\n                    showToolbar: false,\r\n                    showFooter: columnCfg.filterMultiple,\r\n                    showHeader: false,\r\n                    maxHeight: window.innerHeight - 120\r\n                });\r\n                popup.on('Open', function () {\r\n                    var checked = columnCfg.__filterChecked;\r\n                    var value = checked.join(',');\r\n                    listBox.setValue(value);\r\n                });\r\n                popup.on('close', function () {\r\n                    that.clearFilterState(column, 'show');\r\n                });\r\n                columnCfg.popup.render(document.body);\r\n                panel.render(columnCfg.popup.el);\r\n                listBox.render(panel._bodyEl);\r\n\r\n                if (columnCfg.filterMultiple) {\r\n                    // 按钮\r\n                    var okBtn = new mini.Button();\r\n                    var cancelBtn = new mini.Button();\r\n                    this._columnControls.push(okBtn, cancelBtn);\r\n                    okBtn.set({\r\n                        text: '搜索',\r\n                        disableMultiClick: false,\r\n                        onclick: function () {\r\n                            that.doFilter(listBox.getValue(), column);\r\n                            popup.hide();\r\n                        }\r\n                    });\r\n                    okBtn.addCls('mini-btn-primary');\r\n\r\n                    cancelBtn.set({\r\n                        text: '重置',\r\n                        disableMultiClick: false,\r\n                        onclick: function () {\r\n                            listBox.setValue('');\r\n                            that.clearFilter(column);\r\n                            popup.hide();\r\n                        }\r\n                    });\r\n                    okBtn.render(panel._footerEl);\r\n                    cancelBtn.render(panel._footerEl);\r\n                    $(panel._footerEl).css('text-align', 'center');\r\n                } else {\r\n                    // 单选时 就无需确定之类的按钮了直接在点击时进行搜索即可\r\n                    listBox.on('itemclick', function (e) {\r\n                        if (e.item.id === '__reset') {\r\n                            that.clearFilter(column);\r\n                        } else {\r\n                            that.doFilter(listBox.getValue(), column);\r\n                        }\r\n                        popup.hide();\r\n                    });\r\n                }\r\n\r\n                return columnCfg.popup;\r\n            },\r\n            __buildFilterParams: function () {\r\n                var p = {};\r\n                var e = {\r\n                    sender: this,\r\n                    grid: this.grid,\r\n                    condition: p\r\n                };\r\n                for (var name in this.filterColumnCfgMap) {\r\n                    if (Object.prototype.hasOwnProperty.call(this.filterColumnCfgMap, name)) {\r\n                        var columnCfg = this.filterColumnCfgMap[name];\r\n                        if (columnCfg.__filterChecked && columnCfg.__filterChecked.length) {\r\n                            p[name] = columnCfg.__filterChecked.join(',');\r\n                        }\r\n                    }\r\n                }\r\n                return e;\r\n            },\r\n            /**\r\n             * 对某列进行 过滤\r\n             *\r\n             * @param {string|string []} value 过滤已选值（列表）\r\n             * @param {mini.DataGrid.Column} column 表格列\r\n             * @returns\r\n             */\r\n            doFilter: function (value, column) {\r\n                var columnCfg = this.filterColumnCfgMap[column.name];\r\n                columnCfg.__filterChecked = $.isArray(value) ? value : value.split(',');\r\n                var headerCellEl = this.grid.getHeaderCellEl(column);\r\n                var $trigger = $(headerCellEl).find('.mini-datagrid-headerfilter-trigger');\r\n                if (columnCfg.__filterChecked.length) {\r\n                    $trigger.addClass('active');\r\n                } else {\r\n                    $trigger.removeClass('active');\r\n                }\r\n                this.__doFilter();\r\n\r\n                var e = this.__buildFilterParams();\r\n                this.onFilter(e);\r\n                this.fire('filter', e);\r\n                return this;\r\n            },\r\n            __doFilter: function () {\r\n                if (this.options.filterMode !== 'client') {\r\n                    return this;\r\n                }\r\n                var filterColumns = this.filterColumns;\r\n                var me = this;\r\n\r\n                this.grid.filter(function (record) {\r\n                    // 当前行中进行检查 仅当每一列都符合时 此条记录才符合\r\n                    return filterColumns.every(function (column) {\r\n                        // 不可见则直接条件无效 全为true\r\n                        if (!column.visible) return true;\r\n\r\n                        var cfg = me.filterColumnCfgMap[column.name];\r\n                        // 配置的过滤方法\r\n                        var filterFn = cfg.filterMethod;\r\n\r\n                        var checkedArr = cfg.__filterChecked;\r\n                        if (!checkedArr || !checkedArr.length) return true;\r\n\r\n                        var isMatch = false;\r\n                        // 遍历当前列的每个选中 任意一个选中即可\r\n                        for (var i = 0, len = checkedArr.length; i < len; i++) {\r\n                            isMatch = filterFn.apply(me, [checkedArr[i], record, column, me.grid, me]);\r\n                            if (isMatch) break;\r\n                        }\r\n\r\n                        return isMatch;\r\n                    });\r\n                });\r\n            },\r\n            /**\r\n             * 清空（全部/某列）上的 filter 效果 和状态\r\n             *\r\n             * @param {mini.DataGrid.Column} column 表格列\r\n             * @returns\r\n             */\r\n            clearFilter: function (column) {\r\n                this.clearFilterState(column);\r\n                var that = this;\r\n\r\n                if (!column) {\r\n                    $.each(this.filterColumns, function (i, c) {\r\n                        var colCfg = that.filterColumnCfgMap[c.name];\r\n                        colCfg.__filterChecked = [];\r\n                    });\r\n                    this.grid.clearFilter();\r\n\r\n                    var e = this.__buildFilterParams();\r\n                    this.onFilter(e);\r\n                    this.fire('filter', e);\r\n\r\n                    return this;\r\n                }\r\n\r\n                this.doFilter([], column);\r\n                return this;\r\n            },\r\n            /**\r\n             * 清除表格头部的过滤dom状态\r\n             *\r\n             * @param {undefined|mini.DataGrid.Column|mini.DataGrid.Column []} column 指定的表格列\r\n             * @param {undefined|string} cls 要清除的 class\r\n             */\r\n            clearFilterState: function (column, cls) {\r\n                var columns;\r\n                if (!column) {\r\n                    columns = this.filterColumns;\r\n                } else if ($.isArray(column)) {\r\n                    columns = column;\r\n                } else {\r\n                    columns = [column];\r\n                }\r\n                var that = this;\r\n                $.map(columns, function (col) {\r\n                    that.__clearFilterState(col, cls);\r\n                });\r\n\r\n                return this;\r\n            },\r\n            __clearFilterState: function (column, cls) {\r\n                var colCfg = this.filterColumnCfgMap[column.name];\r\n                if (colCfg.popup && colCfg.popup.isPopup) {\r\n                    colCfg.popup.hide();\r\n                }\r\n                var headerCellEl = this.grid.getHeaderCellEl(column);\r\n                $(headerCellEl)\r\n                    .find('.mini-datagrid-headerfilter-trigger')\r\n                    .removeClass(cls ? cls : 'show active');\r\n                return this;\r\n            }\r\n        });\r\n\r\n        mini.DataGrid.HeaderFilter = HeaderFilter;\r\n    })(window, window.jQuery);\r\n\r\n    // 列显隐\r\n    (function (win, $) {\r\n        /**\r\n         *    @type savedColumn = {\r\n         *        visible: boolean;\r\n         *        field?: string;\r\n         *        type?: string;\r\n         *    };\r\n         */\r\n\r\n        /**\r\n         * 表格列显隐插件\r\n         * 1、 获取表格列\r\n         * 2、 取本地存储\r\n         * 3、 有本地的记录 则更新表格显示隐藏\r\n         * 4、 无本地记录则 无需处理\r\n         * @param {\r\n         *  {\r\n         *      grid: string | mini.dataGrd, // 表格id dom 或 对象\r\n         *      trigger: undefined | string | HTMLElement | jQueryObject, // 按钮元素 可为选择器、 dom对象或 jq对象 不配置的情况下，若 autoCreate 开启会自动创建\r\n         *      autoCreate: boolean,\r\n         *      showButton: true,  // 是否显示确定重置按钮\r\n         *      disabledColumns: [] // 禁止用户操作的列\r\n         *  }\r\n         * } options 配置对象\r\n         */\r\n        function GridColumnsHide(options) {\r\n            var opt = $.extend({}, GridColumnsHide.defaultOptions, options);\r\n            this.options = opt;\r\n            var grid = opt.grid;\r\n            if (grid + '' === grid) {\r\n                grid = mini.get(grid);\r\n            }\r\n            if (!grid) {\r\n                throw new Error('必须配置表格！');\r\n            }\r\n            this.grid = grid;\r\n\r\n            var trigger = opt.autoCreate ? this.__autoCreateBtn() : $(opt.trigger)[0];\r\n\r\n            if (!trigger) {\r\n                throw new Error('无法获取触发按钮');\r\n            }\r\n\r\n            this.triggerEl = trigger;\r\n\r\n            this._saveKey = 'GRID_COLUMN_VISIBLE-' + this.grid._id + '-' + location.pathname;\r\n            this._id = this.__genderId();\r\n\r\n            // 插件所创建的控件\r\n            this.__createControls = [];\r\n            // 表格原始的列状态\r\n            this._originColumns = [];\r\n            // 表格所有列\r\n            this._allColumns = [];\r\n            // 插件记录的已选列索引值\r\n            this.checkedIndexArr = [];\r\n            // 插件保存的数据\r\n            this.data = [];\r\n            this.init();\r\n        }\r\n        GridColumnsHide.defaultOptions = {\r\n            // 按钮元素\r\n            trigger: '',\r\n            // 表格id 或表格对象\r\n            grid: '',\r\n            // 自动创建按钮 插入到 fui-toolbar 最后 未配置按钮时生效\r\n            autoCreate: true,\r\n            // 是否显示确定重置按钮\r\n            showButton: true,\r\n            // 禁止用户操作的列\r\n            disabledColumns: [\r\n                {\r\n                    type: 'indexcolumn'\r\n                },\r\n                {\r\n                    type: 'checkcolumn'\r\n                },\r\n                {\r\n                    type: 'checkcolumn'\r\n                }\r\n                // 配置格式 支持如下几个属性 同一个对象内的条件为且 全部符合才会被禁用\r\n                // {\r\n                //     type: '列类型',\r\n                //     index: '列索引',\r\n                //     field: '列字段',\r\n                //     name: '列名称'\r\n                // }\r\n            ]\r\n        };\r\n        $.extend(GridColumnsHide.prototype, {\r\n            __genderId: (function () {\r\n                var i = 0;\r\n                return function () {\r\n                    return 'GridColumnsHide-' + i++;\r\n                };\r\n            })(),\r\n            popupCls: 'mini-button-popup',\r\n            /**\r\n             * 自动创建一个按钮插入在框架布局的toolbar中\r\n             */\r\n            __autoCreateBtn: function () {\r\n                var $toolbar = $('.fui-toolbar').eq(0);\r\n                if (!$toolbar.length) return false;\r\n\r\n                var btn = new mini.Button();\r\n                btn.set({\r\n                    iconCls: 'icon-gear',\r\n                    disableMultiClick: false\r\n                });\r\n                btn.addCls('r');\r\n                btn.render($toolbar[0]);\r\n                var $btn = $(btn.el);\r\n                var $r = $toolbar.find('> .r');\r\n                if ($r.length) {\r\n                    $btn.insertBefore($r);\r\n                } else {\r\n                    $btn.appendTo($toolbar);\r\n                }\r\n                return btn.el;\r\n            },\r\n            init: function () {\r\n                this._allColumns = this.grid.getColumns();\r\n                this.__rememberOrigin();\r\n                this.restoreLocal(undefined, true);\r\n                this.__syncCheckColumns();\r\n\r\n                var that = this;\r\n                var $trigger = $(this.triggerEl);\r\n                $trigger.on('click.' + this._id, function () {\r\n                    if (!$trigger.hasClass(that.popupCls)) {\r\n                        $trigger.addClass(that.popupCls);\r\n                        that.showPanel();\r\n                    } else {\r\n                        that.hidePanel();\r\n                    }\r\n                });\r\n            },\r\n            destroy: function () {\r\n                $(this.triggerEl).off('click.' + this._id);\r\n                $.each(this.__createControls, function (i, ctr) {\r\n                    ctr.destroy && ctr.destroy(true);\r\n                });\r\n            },\r\n            /**\r\n             * 记住表格的初始状态\r\n             */\r\n            __rememberOrigin: function () {\r\n                var originColumns = [];\r\n                $.each(this.grid.getColumns(), function (i, col) {\r\n                    originColumns.push({\r\n                        visible: col.visible\r\n                    });\r\n                });\r\n                this._originColumns = originColumns;\r\n            },\r\n            /**\r\n             * 还原表格的初始状态\r\n             */\r\n            __restoreOrigin: function () {\r\n                var grid = this.grid;\r\n                var originColumns = this._originColumns;\r\n\r\n                $.each(originColumns, function (i, c) {\r\n                    grid.updateColumn(i, c);\r\n                });\r\n                // 更新插件记录\r\n                this.setData([]);\r\n                this.__syncCheckColumns();\r\n            },\r\n\r\n            /**\r\n             * 从表格上同步列的勾选状态\r\n             * 用于下拉列表中显示勾选状态\r\n             */\r\n            __syncCheckColumns: function () {\r\n                var checkedIndexArr = [];\r\n                $.each(this._allColumns, function (i, col) {\r\n                    if (col.visible) {\r\n                        checkedIndexArr.push(i);\r\n                    }\r\n                });\r\n                this.checkedIndexArr = checkedIndexArr;\r\n            },\r\n            getLocalData: function () {\r\n                var s = localStorage.getItem(this._saveKey);\r\n                if (!s) return [];\r\n                var data = JSON.parse(s);\r\n                if ($.isArray(data)) {\r\n                    return data;\r\n                }\r\n                return [];\r\n            },\r\n            getData: function () {\r\n                if (!this._listBox) return [];\r\n\r\n                var checkedIndexArr = this.checkedIndexArr;\r\n                var data = [];\r\n                $.each(this._allColumns, function (i, col) {\r\n                    var visible = $.inArray(i, checkedIndexArr) !== -1;\r\n                    var item = {\r\n                        visible: visible\r\n                    };\r\n                    if (col.field) item.field = col.field;\r\n                    if (col.type) item.type = col.type;\r\n                    data.push(item);\r\n                });\r\n\r\n                return data;\r\n            },\r\n            setData: function (data, formEvent) {\r\n                this.data = $.isArray(data) ? data : [];\r\n\r\n                if (formEvent) {\r\n                    var checkedIndexArr = [];\r\n                    $.each(this.data, function (i, c) {\r\n                        if (c.visible) {\r\n                            checkedIndexArr.push(i);\r\n                        }\r\n                    });\r\n                    this.checkedIndexArr = checkedIndexArr;\r\n                }\r\n\r\n                localStorage.setItem(this._saveKey, JSON.stringify(data));\r\n\r\n                this.restoreLocal(data);\r\n            },\r\n            /**\r\n             * 检查本地存储的列的有效性\r\n             * 表格列除name之外无法唯一缺的，插件以列索引进行纯属\r\n             * 有效性借助 列数目 + 对应列类型 + 对应列字段判断\r\n             *\r\n             * @param {savedColumn []} localData 插件本地存储列\r\n             * @param {mini.DataGrid.Column []} columns 表格列\r\n             * @returns\r\n             */\r\n            __checkColumnsChanged: function (localData, columns) {\r\n                if (!$.isArray(localData) || !$.isArray(columns) || localData.length !== columns.length) {\r\n                    return true;\r\n                }\r\n                var res = false;\r\n                var l, c;\r\n\r\n                for (var i = 0, len = localData.length; i < len; i++) {\r\n                    l = localData[i];\r\n                    c = columns[i];\r\n                    if (l.field != c.field || l.type != c.type) {\r\n                        res = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                return res;\r\n            },\r\n            /**\r\n             * 还原本地的存储\r\n             *\r\n             * @param {savedColumn [] | undefined} data 插件保存的状态数组\r\n             * @param {boolean} isInit  是否是初始化\r\n             * @returns\r\n             */\r\n            restoreLocal: function (data, isInit) {\r\n                var grid = this.grid;\r\n                var localData = (this.data = data || this.getLocalData());\r\n                var gridColumns = this._allColumns;\r\n                if (!localData || !localData.length) {\r\n                    return;\r\n                }\r\n                // 列不一样 则忽略 并清空本地存储 仅需初始化还原时检查\r\n                if (isInit && this.__checkColumnsChanged(localData, gridColumns)) {\r\n                    this.setData([]);\r\n                    return;\r\n                }\r\n\r\n                $.map(localData, function (c, index) {\r\n                    grid.updateColumn(index, {\r\n                        visible: c.visible\r\n                    });\r\n                });\r\n            },\r\n            __handleSave: function () {\r\n                var checkedIndexArr = $.map(this._listBox.getValue().split(','), function (item) {\r\n                    return parseInt(item, 10);\r\n                });\r\n                this.checkedIndexArr = checkedIndexArr;\r\n\r\n                var data = this.getData();\r\n                this.setData(data, true);\r\n            },\r\n            /**\r\n             * 获取表格列的列表\r\n             *\r\n             * @returns {{text:String, id: number, enabled: boolean } []}\r\n             */\r\n            getColumnListFromGrid: function () {\r\n                var that = this;\r\n                return $.map(this._allColumns, function (column, index) {\r\n                    return {\r\n                        text: getHeaderText(column),\r\n                        id: index,\r\n                        // enabled: false\r\n                        enabled: that.__getColumnEnable(column, index)\r\n                    };\r\n                });\r\n            },\r\n            __getColumnEnable: function (column, columnIndex) {\r\n                if (!column || !this.options.disabledColumns || !this.options.disabledColumns.length) return true;\r\n\r\n                // 列的任一条件满足即被禁用\r\n                return !this.options.disabledColumns.some(function (col) {\r\n                    var conditions = obj2arr(col);\r\n                    // 同一个对象内的配置为且 全部满足时才是命中\r\n                    return conditions.every(function (condition) {\r\n                        var k = condition[0];\r\n                        var v = condition[1];\r\n                        if (k == 'index') {\r\n                            return v == columnIndex;\r\n                        }\r\n                        return column[k] == v;\r\n                    });\r\n                });\r\n\r\n                function obj2arr(obj) {\r\n                    var hasOwnProperty = Object.prototype.hasOwnProperty;\r\n                    var arr = [];\r\n                    for (var k in obj) {\r\n                        if (hasOwnProperty.call(obj, k)) {\r\n                            arr.push([k, obj[k]]);\r\n                        }\r\n                    }\r\n                    return arr;\r\n                }\r\n            },\r\n            __createPopup: function () {\r\n                if (this.popup) return this.popup;\r\n\r\n                var that = this;\r\n                var list = this.getColumnListFromGrid();\r\n                var listBox = new mini.ListBox();\r\n                this._listBox = listBox;\r\n                listBox.set({\r\n                    showCheckBox: true,\r\n                    multiSelect: true,\r\n                    data: list,\r\n                    value: this.checkedIndexArr.join(',')\r\n                });\r\n                $(listBox._borderEl).css({\r\n                    borderWidth: 0\r\n                });\r\n                this.__createControls.push(listBox);\r\n\r\n                var popup = new mini.Popup();\r\n                this.__createControls.push(popup);\r\n                popup.set({\r\n                    // outleft left outright right\r\n                    xAlign: 'right'\r\n                });\r\n                popup.on('close', function () {\r\n                    $(that.triggerEl).removeClass(that.popupCls);\r\n                });\r\n\r\n                // 根据列字符数目计算显示宽度\r\n                var maxCharCount = Math.min(\r\n                    6,\r\n                    Math.max.apply(\r\n                        Math,\r\n                        $.map(list, function (item) {\r\n                            return item.text.length;\r\n                        })\r\n                    )\r\n                );\r\n                var panelW = Math.max(this.options.showButton ? 180 : 120, 14 * maxCharCount);\r\n\r\n                var panel = new mini.Panel();\r\n                this.__createControls.push(panel);\r\n                panel.set({\r\n                    showToolbar: false,\r\n                    showFooter: this.options.showButton,\r\n                    showHeader: false,\r\n                    minWidth: 200,\r\n                    maxWidth: 300,\r\n                    width: panelW\r\n                });\r\n                listBox.render(panel._bodyEl);\r\n                panel.render(popup.el);\r\n                // popup.render(document.body);\r\n\r\n                if (this.options.showButton) {\r\n                    var okBtn = new mini.Button();\r\n                    var cancelBtn = new mini.Button();\r\n                    this.__createControls.push(okBtn, cancelBtn);\r\n                    okBtn.set({\r\n                        text: '保存',\r\n                        disableMultiClick: false,\r\n                        onclick: function () {\r\n                            that.__handleSave();\r\n                            popup.hide();\r\n                        }\r\n                    });\r\n                    okBtn.addCls('mini-btn-primary');\r\n\r\n                    cancelBtn.set({\r\n                        text: '重置',\r\n                        disableMultiClick: false,\r\n                        onclick: function () {\r\n                            that.__restoreOrigin();\r\n                            popup.hide();\r\n                        }\r\n                    });\r\n                    okBtn.render(panel._footerEl);\r\n                    cancelBtn.render(panel._footerEl);\r\n                } else {\r\n                    // 不显示按钮的情况下 点击直接操作\r\n                    listBox.on(\r\n                        'itemclick',\r\n                        function () {\r\n                            that.__handleSave();\r\n                            // popup.hide();\r\n                        },\r\n                        this\r\n                    );\r\n                }\r\n\r\n                this.popup = popup;\r\n            },\r\n\r\n            showPanel: function () {\r\n                if (!this.popup) {\r\n                    this.__createPopup();\r\n                    this.popup.popupEl = this.triggerEl;\r\n                }\r\n                this._listBox.setValue(this.checkedIndexArr.join(','));\r\n                this.popup.showAtEl(this.triggerEl);\r\n            },\r\n            hidePanel: function () {\r\n                if (!this.popup) return;\r\n                this.popup.hide();\r\n            }\r\n        });\r\n\r\n        win.mini.DataGrid.ColumnsHide = GridColumnsHide;\r\n\r\n        var headerType2name = {\r\n            indexcolumn: '序',\r\n            checkcolumn: '选择',\r\n            actioncolumn: '操作'\r\n        };\r\n\r\n        function getHeaderText(column) {\r\n            var h = column.header;\r\n            if (h && typeof h == 'string') {\r\n                return $.trim(h);\r\n            }\r\n            if (column.type) {\r\n                return headerType2name[column.type] || '';\r\n            }\r\n            return '';\r\n        }\r\n    })(window, window.jQuery);\r\n\r\n    // 覆写表头排序点击触发源的判断，解决排序图标点击无反应问题\r\n    mini._Grid_Sorter.prototype.__OnGridHeaderCellClick = function (e) {\r\n        var grid = this.owner;\r\n\r\n        var type = e.htmlEvent.type;\r\n        if (type == 'dblclick' && !grid.sortDblClick) return;\r\n        if (type == 'click' && grid.sortDblClick) return;\r\n\r\n        if (/mini-grid-headerCell-inner|mini-grid-sortIcon|mini-grid-allowsort/.test(e.htmlEvent.target.className)) {\r\n            if (grid.allowSortColumn && grid.isEditing() == false) {\r\n                var column = e.column;\r\n                if (!column.columns || column.columns.length == 0) {\r\n                    var sortField = column.sortField || column.field;\r\n\r\n                    if (sortField && column.allowSort !== false) {\r\n                        if (grid.allowCancelSort && grid.getSortOrder() == 'desc') {\r\n                            grid.clearSort();\r\n                        } else {\r\n                            var sortOrder = 'asc';\r\n                            if (grid.getSortField() == sortField) {\r\n                                sortOrder = grid.getSortOrder() == 'asc' ? 'desc' : 'asc';\r\n                            }\r\n\r\n                            grid.sortBy(sortField, sortOrder);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    var beginEditRow = mini.DataGrid.prototype.beginEditRow;\r\n    var cancelEditRow = mini.DataGrid.prototype.cancelEditRow;\r\n    return {\r\n        // 表格斑马纹\r\n        allowAlternating: mini.getCtrDefaultBySysParams('gridAllowAlternating', false),\r\n        // 表格水平线\r\n        showHGridLines: mini.getCtrDefaultBySysParams('gridShowHGridLines', true),\r\n        // 表格垂直线\r\n        showVGridLines: mini.getCtrDefaultBySysParams('gridShowVGridLines', false),\r\n        // 表格允许排序\r\n        showSortIcon: mini.getCtrDefaultBySysParams('gridShowSortIcon', true),\r\n        // 表格调整大小\r\n        allowResize: mini.getCtrDefaultBySysParams('gridAllowResize', false),\r\n        // 表格是否显示空白文案\r\n        showEmptyText: mini.getCtrDefaultBySysParams('gridShowEmptyText', true),\r\n        // 表格空白文案文字\r\n        emptyText: mini.getCtrDefaultBySysParams('gridEmptyText', '暂无数据'),\r\n\r\n        // 重写  beginEditRow 、 cancelEditRow\r\n        // 修复 __OnMouseDown 中 滚动表格导致静态编辑第一次点击表格滚动，从而编辑无效的问题\r\n        // https://fdoc.epoint.com.cn/onlinedoc/kfzknowledge/kfzknowledge/kfzknowledge_detail?rowguid=cf8c8dca-2099-496a-80b7-0dcf32a8aa51&ProcessVersionInstanceGuid=1f58eb88-7b96-42d4-864e-521a48036598\r\n        beginEditRow: function (row) {\r\n            var rv = beginEditRow.apply(this, arguments);\r\n            this._editingCell = [row, this.getColumn(0)];\r\n            return rv;\r\n        },\r\n        cancelEditRow: function () {\r\n            var rv = cancelEditRow.apply(this, arguments);\r\n            this._editingCell = null;\r\n            return rv;\r\n        },\r\n\r\n        getColumnData: function (filedName) {\r\n            var data = [],\r\n                rows = this.getData(),\r\n                i = 0,\r\n                l = rows.length;\r\n\r\n            for (; i < l; i++) {\r\n                data.push(rows[i][filedName]);\r\n            }\r\n\r\n            return data;\r\n        },\r\n        // 安全整改 数据 全部转义 保障显示 需在 input 中正常还原\r\n        _OnCellBeginEdit: function (record, column, editor, initEditor) {\r\n            var value = mini._getMap(column.field, record);\r\n            var e = {\r\n                sender: this,\r\n                rowIndex: this.indexOf(record),\r\n                row: record,\r\n                record: record,\r\n                column: column,\r\n                field: column.field,\r\n                editor: editor,\r\n                value: value,\r\n                cancel: false\r\n            };\r\n\r\n            this.fire('cellbeginedit', e);\r\n\r\n            if (!mini.isNull(column.defaultValue) && (mini.isNull(e.value) || e.value === '')) {\r\n                var defaultValue = column.defaultValue;\r\n                //            try {\r\n                //\r\n                //                defaultValue = eval('('+defaultValue+')');\r\n                //            } catch (ex) { debugger}\r\n                var obj = mini.clone({\r\n                    d: defaultValue\r\n                });\r\n                e.value = obj.d;\r\n            }\r\n\r\n            var editor = e.editor;\r\n            value = e.value;\r\n\r\n            if (e.cancel) {\r\n                return false;\r\n            }\r\n            //if (!editor) return false;\r\n            //column.editor = editor;   //!!!不能加\r\n\r\n            if (!editor && column.editMode != 'inline') return false;\r\n            if (column.readOnly === true) return false;\r\n\r\n            if (initEditor === false) return true;\r\n\r\n            //        if (column.editMode != \"inline\") {\r\n            //                    var canEdit = this.isCellCanEdit(row, column);\r\n\r\n            if (column.editMode != 'inline') {\r\n                //value, text初始化\r\n                if (mini.isNull(value)) value = '';\r\n                if (editor.setValue) {\r\n                    // editor.setValue(value);\r\n                    editor.setValue(mini.htmlUnescape(value));\r\n                }\r\n                editor.ownerRowID = record._uid;\r\n\r\n                if (column.displayField && editor.setText) {\r\n                    //var text = record[column.displayField];\r\n                    var text = mini._getMap(column.displayField, record);\r\n\r\n                    if (!mini.isNull(column.defaultText) && (mini.isNull(text) || text === '')) {\r\n                        var obj = mini.clone({\r\n                            d: column.defaultText\r\n                        });\r\n                        text = obj.d;\r\n                    }\r\n\r\n                    // editor.setText(text);\r\n                    editor.setText(mini.htmlUnescape(text));\r\n                }\r\n\r\n                if (this.allowCellEdit) {\r\n                    this._editingControl = e.editor;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n        // 编辑器提交前 对编辑器中内容进行转义 防止html\r\n        _OnCellCommitEdit: function (record, column, value, editor) {\r\n            var e = {\r\n                sender: this,\r\n                rowIndex: this.indexOf(record),\r\n                record: record,\r\n                row: record,\r\n                column: column,\r\n                field: column.field,\r\n                editor: editor ? editor : this.getCellEditor(column),\r\n                value: mini.isNull(value) ? '' : value,\r\n                text: '',\r\n                cancel: false\r\n            };\r\n\r\n            if (e.editor && e.editor.getValue) {\r\n                try {\r\n                    e.editor.blur();\r\n                } catch (ex) {}\r\n                e.value = e.editor.getValue();\r\n\r\n                //alert(e.value);\r\n            }\r\n            if (e.editor && e.editor.getText) {\r\n                e.text = e.editor.getText();\r\n            }\r\n\r\n            //document.title = e.value + \":\" + e.text + \":\" + new Date().getTime();\r\n\r\n            //        this.updateRow(record, { NodeId: 1, NodeName: \"aaa\" });\r\n            //        return;\r\n\r\n            var oldValue = mini._getMap(column.field, record),\r\n                newValue = e.value;\r\n            e.oldValue = oldValue;\r\n            if (mini.isEquals(oldValue, newValue)) return e;\r\n\r\n            this.fire('cellcommitedit', e);\r\n\r\n            if (e.cancel == false) {\r\n                e.value = mini.htmlEscape(e.value);\r\n                e.text = mini.htmlEscape(e.text);\r\n                if (this.allowCellEdit) {\r\n                    var o = {};\r\n                    o[column.field] = e.value;\r\n                    //mini._setMap(column.field, e.value, o);\r\n                    if (column.displayField) {\r\n                        o[column.displayField] = e.text;\r\n                        //mini._setMap(column.displayField, e.text, o);\r\n                    }\r\n                    this.updateRow(record, o);\r\n                }\r\n            }\r\n            return e;\r\n        },\r\n\r\n\r\n        // 重写解决刷新数据时 pageIndex 大于 totalPage 的情况下序号不对问题\r\n        _initData: function () {\r\n            this.data = this._dataSource.getSource();\r\n            this.pageIndex = this.getPageIndex();\r\n            this.pageSize = this.getPageSize();\r\n            this.totalCount = this.getTotalCount();\r\n            this.totalPage = this.getTotalPage();\r\n            this.sortField = this.getSortField();\r\n            this.sortOrder = this.getSortOrder();\r\n            this.url = this.getUrl();\r\n\r\n            // 当 pageIndex > totalPage 时，说明 pageIndex 不对了，并且生成出来的序号就会超过 totalCount\r\n            // 所以需要把 pageIndex 调整回正确的最大值\r\n            if (this.totalPage > 0 && this.pageIndex > this.totalPage - 1) {\r\n                this.setPageIndex(this.totalPage - 1);\r\n            }\r\n\r\n            this._mergedCellMaps = {};\r\n            this._mergedCells = {};\r\n\r\n            this._cellErrors = [];\r\n            this._cellMapErrors = {};\r\n\r\n            if (this.isGrouping()) {\r\n                this.groupBy(this._groupField, this._groupDir);\r\n\r\n                if (this.collapseGroupOnLoad) {\r\n                    this.collapseGroups();\r\n                }\r\n            }\r\n        },\r\n        // 单元格编辑 wrap 位置调整 使得恰好覆盖单元格\r\n        _setEditorBox: function (editor, cellBox) {\r\n            if (editor.setHeight && editor.type == 'textarea') {\r\n                var height = cellBox.height - 2;\r\n                if (editor.minHeight && height < editor.minHeight) {\r\n                    height = editor.minHeight;\r\n                }\r\n                editor.setHeight(height);\r\n            }\r\n\r\n            if (editor.setWidth) {\r\n                // 占满情况下 左右边距6px\r\n                var width = cellBox.width - 12;\r\n                // 配置了最小 则使用最小 否则占满\r\n                if (editor.minWidth && width < editor.minWidth) {\r\n                    width = editor.minWidth;\r\n                }\r\n                editor.setWidth(width < 20 ? 20 : width);\r\n            }\r\n\r\n            var box = cellBox;\r\n            var y = box.y;\r\n            mini.setXY(this._editWrap, box.x, y + 1);\r\n\r\n            // wrap 恰好铺满单元格\r\n            mini.setWidth(this._editWrap, box.width - 2);\r\n            mini.setHeight(this._editWrap, box.height - 2);\r\n\r\n            var viewWidth = document.body.scrollWidth;\r\n            if (box.x > viewWidth) {\r\n                mini.setX(this._editWrap, -1000);\r\n            }\r\n        },\r\n        // 数据为空时 取配置的占位字符显示\r\n        _OnDrawCell: function (record, column, rowIndex, columnIndex) {\r\n            var e = mini.DataGrid.superclass._OnDrawCell.apply(this, arguments);\r\n\r\n            if (column.emptyText && (e.cellHtml === null || e.cellHtml === undefined || e.cellHtml === '' || e.cellHtml == '&nbsp;')) {\r\n                e.cellHtml = column.emptyText;\r\n            }\r\n\r\n            return e;\r\n        },\r\n        // 重写解决编辑控件buttonedit的输入框宽度超出了右侧按钮问题\r\n        _OnCellShowingEdit: function (record, column) {\r\n            if (!this._editingControl) return false;\r\n\r\n\r\n            var cellBox = this.getCellBox(record, column);\r\n\r\n            if (cellBox) {\r\n                var viewWidth = document.body.scrollWidth; //mini.getViewportBox().width;\r\n                if (cellBox.right > viewWidth) {\r\n\r\n                    cellBox.width = viewWidth - cellBox.left;\r\n                    if (cellBox.width < 10) cellBox.width = 10;\r\n                    cellBox.right = cellBox.left + cellBox.width;\r\n                }\r\n            }\r\n\r\n            var e = {\r\n                sender: this,\r\n                rowIndex: this.indexOf(record),\r\n                record: record,\r\n                row: record,\r\n                column: column,\r\n                field: column.field,\r\n                cellBox: cellBox,\r\n                editor: this._editingControl\r\n            };\r\n\r\n            this.fire(\"cellshowingedit\", e);\r\n\r\n            var editor = e.editor;\r\n            if (editor && editor.setIsValid) {\r\n\r\n                editor.setIsValid(true);\r\n            }\r\n\r\n            if (cellBox) {\r\n                var editWrap = this._getEditWrap(editor);\r\n                this._editWrap.style.zIndex = mini.getMaxZIndex();\r\n\r\n\r\n\r\n\r\n                //        if (editor.setWidth) {\r\n                //            var width = cellBox.width;\r\n                //            if (width < 20) width = 20;\r\n                //            editor.setWidth(width);\r\n                //        }\r\n\r\n                //        if (editor.setHeight && editor.type == \"textarea\") {\r\n                //            var height = cellBox.height - 1;\r\n                //            if (editor.minHeight && height < editor.minHeight) height = editor.minHeight;\r\n                //            editor.setHeight(height);\r\n                //        }\r\n                //        if (editor.setWidth) {\r\n                //            var width = cellBox.width - 1;\r\n                //            if (editor.minWidth && width < editor.minWidth) width = editor.minWidth;\r\n                //            editor.setWidth(width);\r\n                //        }\r\n\r\n                this._setEditorBox(editor, cellBox);\r\n\r\n                mini.on(document, 'mousedown', this.__OnBodyMouseDown, this);\r\n\r\n                if (column.autoShowPopup && editor.showPopup) {\r\n\r\n                    editor.showPopup();\r\n                }\r\n\r\n            }\r\n\r\n\r\n            //navEditMode\r\n            if (editor) {\r\n                if (this.navEditMode) {\r\n                    editor.keyNavEnabled = !(column.navUpdown !== false);\r\n                }\r\n                // 解决编辑控件buttonedit的输入框宽度超出了右侧按钮问题\r\n                editor._doInputLayout && editor._doInputLayout();\r\n                //editor.keyNavEnabled = !this.navEditMode && column.navUpdown === false;\r\n            }\r\n\r\n            //alert(editor.keyNavEnabled);\r\n\r\n        },\r\n        \r\n        _tryUpdateScroll: function () {\r\n            //设置一个布尔值，reload成功后取消\r\n            var doUpdate = this._canVirtualUpdate();\r\n            // 对于固定列的情况，为了左右滚动同步，滚动后必须要更新视图\r\n            if (doUpdate || this.isFrozen()) {\r\n                if (this._scrollPaging) {\r\n                    var me = this;\r\n                    //this._doGetScrollPaging = true;\r\n                    this.reload(null, null, function (e) {\r\n                        //me._doGetScrollPaging = false;\r\n                    });\r\n                } else {\r\n    \r\n                    var sss = new Date();\r\n    \r\n                    var scrollLeft = this._rowsViewEl.scrollLeft;\r\n    \r\n                    this._doRemoveRowContent();\r\n                    this.doUpdateRows();         //30条，55ms     \r\n                    this.deferLayout(50);\r\n    \r\n                    //this.doUpdate();\r\n                    //                alert(new Date() - sss);\r\n                    //document.title = scrollLeft;\r\n                    //this._rowsViewEl.scrollLeft = scrollLeft;\r\n                    this._syncScrollOffset(scrollLeft);\r\n                }\r\n            } else {\r\n                //this._doUpdateTopBottom();\r\n            }\r\n        }\r\n    };\r\n});\r\n\r\nmini.addEpointExt('FrozenGridView', function () {\r\n    return {\r\n        doUpdateRows: function () {\r\n\r\n            var data = this.getVisibleRows();\r\n\r\n\r\n            var columns1 = this.getFrozenColumns();\r\n            var columns2 = this.getUnFrozenColumns();\r\n            var lockHtml,\r\n                html;\r\n\r\n            if (this.isGrouping()) {\r\n                lockHtml = this._createGroupingHTML(columns1, 1);\r\n                html = this._createGroupingHTML(columns2, 2);\r\n\r\n                this._rowsLockContentEl.innerHTML = lockHtml;\r\n                this._rowsViewContentEl.innerHTML = html;\r\n            } else {\r\n                //if (data.length > 1) data.length = 1;\r\n                lockHtml = this._createRowsHTML(columns1, 1, this.isFrozen() ? data : []);\r\n                html = this._createRowsHTML(columns2, 2, data);\r\n\r\n                //            mini.removeChilds(this._rowsLockContentEl);\r\n                //            mini.removeChilds(this._rowsViewContentEl);\r\n\r\n                //            jQuery(this._rowsLockContentEl).empty();\r\n                //            jQuery(this._rowsViewContentEl).empty();\r\n\r\n                this._rowsLockContentEl.innerHTML = lockHtml;\r\n                this._rowsViewContentEl.innerHTML = html;\r\n            }\r\n            var lockTable = this._rowsLockContentEl.firstChild;\r\n            lockTable.style.width = \"0px\";\r\n\r\n            var scrollTop = this.getScrollTop(),\r\n                scrollLeft = this._columnsViewEl.scrollLeft;\r\n            if (this._rowsViewEl.scrollTop !== scrollTop || this._rowsViewEl.scrollLeft !== scrollLeft) {\r\n                //this._rowsViewEl.scrollTop = scrollTop;\r\n\r\n                this._syncScrollOffset(scrollLeft, scrollTop);\r\n            }\r\n\r\n\r\n            //this._syncRowsHeight();\r\n        }\r\n    };\r\n});\n// mini.addEpointExt('DatePicker', function() {\r\n//     // 解决含有时分秒选择情况下，当选择日期为其他月份（即选中灰色的日期）时，通过键盘修改时分秒时按backspace会导致页面回退的问题\r\n//     jQuery(document).on('keydown', '.mini-calendar-timespinner', function(e) {\r\n//         var input = e.target;\r\n//         if (input.nodeName == 'INPUT' || input.nodeName == 'TEXTAREA') {\r\n//             // 强制输入框获取焦点\r\n//             // 以解决选择日期为其他月份时视图自动转到其他月份后焦点不在输入框中，导致页面响应backspace按键\r\n//             input.focus();\r\n//         }\r\n//     });\r\n//     return {\r\n//         defaultTime: '', // 默认时间\r\n//         maxDate: '9999-12-31',\r\n//         minDate: '1753-01-01',\r\n//         firstDayOfWeek: 0,\r\n\r\n//         showPopup: function() {\r\n//             var ex = { cancel: false };\r\n//             this.fire('beforeshowpopup', ex);\r\n//             if (ex.cancel == true) return;\r\n\r\n//             this._calendar = this._getCalendar();\r\n//             this._calendar.beginUpdate();\r\n//             this._calendar._allowLayout = false;\r\n//             if (this._calendar.el.parentNode != this.popup._contentEl) {\r\n//                 this._calendar.render(this.popup._contentEl);\r\n//             }\r\n\r\n//             this._calendar.set({\r\n//                 monthPicker: this._monthPicker,\r\n//                 showTime: this.showTime,\r\n//                 timeFormat: this.timeFormat,\r\n//                 showClearButton: this.showClearButton,\r\n//                 showYesterdayButton: this.showYesterdayButton,\r\n//                 showTodayButton: this.showTodayButton,\r\n//                 showOkButton: this.showOkButton,\r\n//                 showWeekNumber: this.showWeekNumber,\r\n//                 firstDayOfWeek: this.firstDayOfWeek\r\n//             });\r\n\r\n//             this._calendar.setValue(this.value || this.defaultTime);\r\n\r\n//             if (this.value) {\r\n//                 this._calendar.setViewDate(this.value);\r\n//             } else {\r\n//                 this._calendar.setViewDate(this.viewDate);\r\n//             }\r\n//             // 显示时如果没有值就禁用确定按钮\r\n//             this._calendar.enbaleOkButton(!!this.value);\r\n\r\n//             function doUpdate() {\r\n//                 this._calendar.hideMenu();\r\n\r\n//                 if (this._calendar._target) {\r\n//                     var obj = this._calendar._target;\r\n//                     this._calendar.un('timechanged', obj.__OnTimeChanged, obj);\r\n//                     this._calendar.un('dateclick', obj.__OnDateClick, obj);\r\n//                     this._calendar.un('drawdate', obj.__OnDrawDate, obj);\r\n//                 }\r\n//                 this._calendar.on('timechanged', this.__OnTimeChanged, this);\r\n//                 this._calendar.on('dateclick', this.__OnDateClick, this);\r\n//                 this._calendar.on('drawdate', this.__OnDrawDate, this);\r\n\r\n//                 this._calendar.endUpdate();\r\n\r\n//                 this._calendar._allowLayout = true;\r\n//                 this._calendar.doLayout();\r\n\r\n//                 this._calendar.focus();\r\n\r\n//                 this._calendar._target = this;\r\n//             }\r\n\r\n//             var me = this;\r\n//             //setTimeout(function () {\r\n//             doUpdate.call(me);\r\n//             //}, 1);\r\n\r\n//             mini.DatePicker.superclass.showPopup.call(this);\r\n//         },\r\n//         getFirstDayOfWeek: function () {\r\n//             return this.firstDayOfWeek;\r\n//         },\r\n//         setFirstDayOfWeek: function (day) {\r\n//             if (typeof day != 'number') {\r\n//                 day = window.parseInt(day, 10);\r\n//             }\r\n//             if (day > 6 || day < 0) {\r\n//                 return;\r\n//             }\r\n//             this.firstDayOfWeek = day;\r\n//             if (this._calendar) {\r\n//                 this._calendar.setFirstDayOfWeek(day);\r\n//                 if (this.isShowPopup()) {\r\n//                     this._calendar.doUpdate();\r\n//                 }\r\n//             }\r\n//         },\r\n\r\n//         getExtraAttrs: function(el) {\r\n//             var attrs = {};\r\n\r\n//             mini._ParseString(el, attrs, ['defaultTime']);\r\n//             mini._ParseInt(el, attrs, ['firstDayOfWeek']);\r\n\r\n//             return attrs;\r\n//         }\r\n//     };\r\n// });\r\n\nmini.addEpointExt('ListBox', function() {\r\n    // listbox checkbox 美化\r\n    (function($) {\r\n        if (mini.isIE8) return;\r\n\r\n        var markerCls = 'check-beauty';\r\n        var labelCls = 'mini-listbox-checkbox-icon';\r\n\r\n        var doUpdate = mini.ListBox.prototype.doUpdate;\r\n\r\n        mini.ListBox.prototype.doUpdate = function() {\r\n            var returnValue = doUpdate.apply(this, arguments);\r\n\r\n            var $contentTable = $(this._viewEl).find('.mini-listbox-items');\r\n            doAddTitle($contentTable);\r\n\r\n            if (!this.showCheckBox) {\r\n                return returnValue;\r\n            }\r\n            var $headerTable = $(this._headerEl).find('.mini-listbox-headerInner');\r\n\r\n            doAddLabel($contentTable);\r\n            doAddLabel($headerTable);\r\n\r\n            return returnValue;\r\n        };\r\n\r\n        function doAddTitle($table) {\r\n            $table.find('td').each(function (i, td) {\r\n                var $td = $(td);\r\n                if ($td.hasClass('.mini-listbox-checkbox')) {\r\n                    return;\r\n                }\r\n                $td.attr('title', $td.text());\r\n            });\r\n        }\r\n\r\n        function doAddLabel($table) {\r\n            var $checkboxTds = $table.find('.mini-listbox-checkbox');\r\n            if ($table.hasClass(markerCls) || !$checkboxTds.find('input[type=\"checkbox\"]').length) return;\r\n            $.map($checkboxTds, function(td) {\r\n                var checkbox = $(td).find('input[type=\"checkbox\"]')[0];\r\n                if(!checkbox) return;\r\n\r\n                var checkerId = checkbox.id;\r\n                if (!checkerId) return;\r\n                $('<label class=\"' + labelCls + '\" for=\"' + checkerId + '\"></label>').appendTo(td);\r\n            });\r\n            $table.addClass(markerCls);\r\n        }\r\n    })(window.jQuery);\r\n\r\n    return {\r\n        getItemText: function(item) {\r\n            var t = mini._getMap(this.textField, item);\r\n            // 安全整改要求，服务端返回数据是对html编码的，但是提交时需要还原成正常的html标签\r\n            return mini.isNull(t) ? '' : mini.htmlDecode(String(t));\r\n        },\r\n        _OnDrawCell: function(record, index, column) {\r\n            var value = column ? mini._getMap(column.field, record) : this.getItemText(record);\r\n            var e = {\r\n                sender: this,\r\n                index: index,\r\n                rowIndex: index,\r\n                record: record,\r\n                item: record,\r\n                column: column,\r\n                field: column ? column.field : null,\r\n                value: value,\r\n                cellHtml: value,\r\n                rowCls: null,\r\n                cellCls: column ? column.cellCls || '' : '',\r\n                rowStyle: null,\r\n                cellStyle: column ? column.cellStyle || '' : ''\r\n            };\r\n\r\n            var hasColumns = this.columns && this.columns.length > 0;\r\n            if (!hasColumns) {\r\n                if (index == 0 && this.showNullItem) {\r\n                    e.cellHtml = this.nullItemText;\r\n                }\r\n            }\r\n\r\n            // 由于安全整改后，提交数据中是允许有html标签的，而在渲染时不能解析html标签\r\n            // 所以在返回数据时，服务端已对html标签做转义，在提交时再重新还原回来\r\n            // 所以修改了listbox的getItemText方法，把转义的html还原回来\r\n            // 所以此处需要重新将html转义下\r\n            // if (e.autoEscape == true) {\r\n            //     e.cellHtml = mini.htmlEncode(e.cellHtml);\r\n            // }\r\n            e.cellHtml = mini.htmlEncode(e.cellHtml);\r\n\r\n            if (column) {\r\n                if (column.dateFormat) {\r\n                    if (mini.isDate(e.value)) e.cellHtml = mini.formatDate(value, column.dateFormat);\r\n                    else e.cellHtml = value;\r\n                }\r\n                var renderer = column.renderer;\r\n                if (renderer) {\r\n                    var fn = typeof renderer == 'function' ? renderer : window[renderer];\r\n                    if (fn) {\r\n                        e.cellHtml = fn.call(column, e);\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.fire('drawcell', e);\r\n\r\n            if (e.cellHtml === null || e.cellHtml === undefined || e.cellHtml === '') e.cellHtml = '&nbsp;';\r\n\r\n            return e;\r\n        }\r\n    };\r\n});\r\n\nmini.addEpointExt('Menu', function() {\r\n    var oldCreate = mini.Menu.prototype._create;\r\n    return [\r\n        {\r\n            _create: function() {\r\n                var r = oldCreate.apply(this, arguments);\r\n\r\n                // 避免不必要的重写 直接在应用之后加入新事件的绑定即可\r\n                this.on('open', this._onDocumentMousewheel, this);\r\n                this.on('close', this._unDocumentMousewheel, this);\r\n                return r;\r\n            }\r\n        },\r\n        mini.__mouseWheelHandles\r\n    ];\r\n});\r\n\nmini.addEpointExt('Pager', function() {\r\n    return {\r\n        // 参数 total 在 showTotalCount 为 false 时用 Boolean 表示是否已到最后一页\r\n        update: function(index, size, total) {\r\n            if (mini.isNumber(index)) this.pageIndex = parseInt(index);\r\n            if (mini.isNumber(size)) this.pageSize = parseInt(size);\r\n            if (mini.isNumber(total)) this.totalCount = parseInt(total);\r\n\r\n            if (this.showTotalCount) {\r\n                this.totalPage = parseInt(this.totalCount / this.pageSize) + 1;\r\n                if ((this.totalPage - 1) * this.pageSize == this.totalCount) {\r\n                    this.totalPage -= 1;\r\n                }\r\n                if (this.totalCount == 0) this.totalPage = 0;\r\n\r\n                if (this.totalCount >= 0) {\r\n                    if (this.pageIndex > this.totalPage - 1) {\r\n                        this.pageIndex = this.totalPage - 1;\r\n                    }\r\n                }\r\n                if (this.pageIndex <= 0) this.pageIndex = 0;\r\n                if (this.totalPage <= 0) this.totalPage = 0;\r\n            }\r\n\r\n            this.firstButton.enable();\r\n            this.prevButton.enable();\r\n            this.nextButton.enable();\r\n            this.lastButton.enable();\r\n\r\n            if (this.pageIndex == 0) {\r\n                this.firstButton.disable();\r\n                this.prevButton.disable();\r\n            }\r\n            if (this.showTotalCount && this.pageIndex >= this.totalPage - 1) {\r\n                this.nextButton.disable();\r\n                this.lastButton.disable();\r\n            }\r\n\r\n            var pageIndex = this.pageIndex > -1 ? this.pageIndex + 1 : 0;\r\n            if (this.showTotalCount && this.totalCount == 0) pageIndex = 0;\r\n\r\n            this.numInput.value = pageIndex;\r\n            this.pagesLabel.innerHTML = '/ ' + this.totalPage;\r\n\r\n            var sizeList = this.sizeList.clone();\r\n            if (sizeList.indexOf(this.pageSize) == -1) {\r\n                sizeList.push(this.pageSize);\r\n                sizeList = sizeList.sort(function(a, b) {\r\n                    return a - b;\r\n                });\r\n\r\n                this.sizeList = sizeList;\r\n            }\r\n            var sizes = [];\r\n            for (var i = 0, l = sizeList.length; i < l; i++) {\r\n                var num = sizeList[i];\r\n                var option = {};\r\n                option.text = num;\r\n                option.id = num;\r\n                sizes.push(option);\r\n            }\r\n            this.sizeCombo.setData(sizes);\r\n            this.sizeCombo.setValue(this.pageSize);\r\n\r\n            this.sizeTextEl.innerHTML = this.sizeText;\r\n            this.sizeTextEl.style.display = this.sizeText ? '' : 'none';\r\n\r\n            var firstText = this.firstText,\r\n                prevText = this.prevText,\r\n                nextText = this.nextText,\r\n                lastText = this.lastText,\r\n                reloadText = this.reloadText;\r\n            if (this.showButtonText == false) {\r\n                firstText = prevText = nextText = lastText = reloadText = '';\r\n            }\r\n            this.firstButton.setText(firstText);\r\n            this.prevButton.setText(prevText);\r\n            this.nextButton.setText(nextText);\r\n            this.lastButton.setText(lastText);\r\n            this.reloadButton.setText(reloadText);\r\n\r\n            this.firstButton.setIconCls(this.showButtonIcon ? 'mini-pager-first' : '');\r\n            this.prevButton.setIconCls(this.showButtonIcon ? 'mini-pager-prev' : '');\r\n            this.nextButton.setIconCls(this.showButtonIcon ? 'mini-pager-next' : '');\r\n            this.lastButton.setIconCls(this.showButtonIcon ? 'mini-pager-last' : '');\r\n            this.reloadButton.setIconCls(this.showButtonIcon ? 'mini-pager-reload' : '');\r\n            this.reloadButton.setVisible(this.showReloadButton);\r\n\r\n            var s = this.reloadButton.el.previousSibling;\r\n            if (s) {\r\n                s.style.display = this.showReloadButton ? '' : 'none';\r\n            }\r\n\r\n            this._rightEl.innerHTML = String.format(this.pageInfoText, this.pageSize, this.totalCount);\r\n\r\n            this.indexEl.style.display = this.showPageIndex ? '' : 'none';\r\n            this.sizeEl.style.display = this.showPageSize ? '' : 'none';\r\n            this._rightEl.style.display = this.showPageInfo && this.showTotalCount ? '' : 'none';\r\n\r\n            this.pagesLabel.style.display = this.showTotalCount ? '' : 'none';\r\n\r\n            if (this.showTotalCount) {\r\n                //@新增：用于处理 totalPage < 0 的场合\r\n                this.firstButton.setVisible(this.totalCount >= 0);\r\n                this.lastButton.setVisible(this.totalCount >= 0);\r\n\r\n                if (this.totalCount < 0) {\r\n                    this.firstButton.enable();\r\n                    this.nextButton.enable();\r\n                    if (this.pageIndex == 0) {\r\n                        this.firstButton.disable();\r\n                    }\r\n                    //this.indexEl.style.display = \"none\";\r\n                }\r\n            } else {\r\n                this.firstButton.setVisible(false);\r\n                this.lastButton.setVisible(false);\r\n            }\r\n        },\r\n        _OnPageChanged: function(index, size) {\r\n            var e = {\r\n                pageIndex: mini.isNumber(index) ? index : this.pageIndex,\r\n                pageSize: mini.isNumber(size) ? size : this.pageSize,\r\n                cancel: false\r\n            };\r\n\r\n            if (this.showTotalCount && this.totalCount >= 0) {\r\n                if (e.pageIndex > this.totalPage - 1) {\r\n                    e.pageIndex = this.totalPage - 1;\r\n                }\r\n            }\r\n            if (e.pageIndex < 0) e.pageIndex = 0;\r\n\r\n            this.fire('beforepagechanged', e);\r\n            if (e.cancel == true) {\r\n                return;\r\n            }\r\n\r\n            this.fire('pagechanged', e);\r\n            this.update(e.pageIndex, e.pageSize);\r\n        },\r\n        // 重新解决ie下手动输入页码回车加载数据后，点击页面会再次触发加载数据的问题\r\n        _initEvents: function() {\r\n            mini.Pager.superclass._initEvents.call(this);\r\n\r\n            this.firstButton\r\n                .set({\r\n                    disableMultiClick: false\r\n                })\r\n                .on(\r\n                    'click',\r\n                    function(e) {\r\n                        this._OnPageChanged(0);\r\n                    },\r\n                    this\r\n                );\r\n            this.prevButton\r\n                .set({\r\n                    disableMultiClick: false\r\n                })\r\n                .on(\r\n                    'click',\r\n                    function(e) {\r\n                        this._OnPageChanged(this.pageIndex - 1);\r\n                    },\r\n                    this\r\n                );\r\n            this.nextButton\r\n                .set({\r\n                    disableMultiClick: false\r\n                })\r\n                .on(\r\n                    'click',\r\n                    function(e) {\r\n                        this._OnPageChanged(this.pageIndex + 1);\r\n                    },\r\n                    this\r\n                );\r\n            this.lastButton\r\n                .set({\r\n                    disableMultiClick: false\r\n                })\r\n                .on(\r\n                    'click',\r\n                    function(e) {\r\n                        this._OnPageChanged(this.totalPage);\r\n                    },\r\n                    this\r\n                );\r\n            this.reloadButton.on(\r\n                'click',\r\n                function(e) {\r\n                    this._OnPageChanged();\r\n                },\r\n                this\r\n            );\r\n\r\n            function doPage() {\r\n                if (changing) return;\r\n                changing = true;\r\n                var index = parseInt(this.numInput.value);\r\n                if (isNaN(index)) {\r\n                    this.update();\r\n                    // update后，pageindex变成了1\r\n                    oIndex = 1;\r\n                } else {\r\n                    // ie下回车不会触发change事件，导致回车刷新数据后，点击页面任意地方会再次触发change事件。\r\n                    // 为解决该问题需记录下上一个index和当前的比较\r\n                    if (oIndex != index) {\r\n                        this._OnPageChanged(index - 1);\r\n                        oIndex = index;\r\n                    }\r\n                }\r\n                setTimeout(function() {\r\n                    changing = false;\r\n                }, 100);\r\n            }\r\n\r\n            var changing = false;\r\n            var oIndex = parseInt(this.numInput.value);\r\n            mini.on(\r\n                this.numInput,\r\n                'change',\r\n                function(e) {\r\n                    doPage.call(this);\r\n                },\r\n                this\r\n            );\r\n\r\n            mini.on(\r\n                this.numInput,\r\n                'keydown',\r\n                function(e) {\r\n                    if (e.keyCode == 13) {\r\n                        doPage.call(this);\r\n                        e.stopPropagation();\r\n                    }\r\n                },\r\n                this\r\n            );\r\n\r\n            //mini.on(this.pageSelect, \"change\", this.__OnPageSelectChanged, this);\r\n            this.sizeCombo.on('valuechanged', this.__OnPageSelectChanged, this);\r\n        }\r\n    };\r\n});\r\n\nmini.addEpointExt('Panel', function() {\r\n    return {\r\n        _doTitle: function() {\r\n            var title = this.title == '' ? '&nbsp' : this.title;\r\n            this._titleEl.innerHTML = title;\r\n            // 给panel标题添加title，解决由代办打开的dialog标题过长时无法显示全的问题\r\n            this._titleEl.title = mini.htmlUnescape(title);\r\n\r\n            this._iconEl.style.display = this.iconCls || this.iconStyle ? 'inline' : 'none';\r\n            this._iconEl.className = 'mini-panel-icon mini-icon mini-iconfont ' + this.iconCls;\r\n\r\n            mini.setStyle(this._iconEl, this.iconStyle);\r\n        },\r\n        hide: function () {\r\n            var rt = mini.Panel.superclass.hide.apply(this, arguments);\r\n            this.fire('close');\r\n            return rt;\r\n        },\r\n        /**\r\n         * 其他地方的 miniui maxHeight 都是写在实例上 显示前 height 和 maxHeight 比对 使用合适的 height\r\n         * 但 panel 中居然是从 dom 上取 maxHeight 从而配置无效，为避免大改源码，maxHeight写入到dom上\r\n         */\r\n        setMaxHeight: function(v) {\r\n            v = parseInt(v, 10);\r\n            if (v) {\r\n                this.maxHeight = v;\r\n                jQuery(this.el).css('max-height', v);\r\n            }\r\n        }\r\n    };\r\n});\r\n\nmini.addEpointExt('Popup', function() {\r\n    return [\r\n        {\r\n            yOffset: 2,\r\n            _getWindowOffset: function() {\r\n                return [0, 2];\r\n            },\r\n            _create: function() {\r\n                var el = (this.el = document.createElement('div'));\r\n                this.el.className = 'mini-popup';\r\n                this._contentEl = this.el;\r\n\r\n                // 避免不必要的重写 直接在应用之后加入新事件的绑定即可\r\n                this.on('open', this._onDocumentMousewheel, this);\r\n                this.on('close', this._unDocumentMousewheel, this);\r\n            }\r\n        },\r\n        mini.__mouseWheelHandles\r\n    ];\r\n});\r\n\nmini.addEpointExt('PopupEdit', function() {\r\n    return {\r\n        alwaysView: true,\r\n        setText: function(value) {\r\n            if (value === null || value === undefined) value = '';\r\n\r\n            // 安全整改要求，服务端返回数据是对html编码的，但是提交时需要还原成正常的html标签\r\n            value = mini.htmlDecode(value);\r\n\r\n            var fire = this.text !== value;\r\n            this.text = value;\r\n            this._textEl.value = value;\r\n\r\n            this._doEmpty();\r\n        }\r\n    };\r\n});\r\n\nmini.addEpointExt('ProgressBar', function() {\r\n    return {\r\n        _create: function() {\r\n            this.el = document.createElement('div');\r\n            this.el.className = 'mini-progressbar';\r\n\r\n            // prettier-ignore\r\n            var s = '<div class=\"mini-progressbar-border\">' +\r\n                    '<div class=\"mini-progressbar-bar\"><div class=\"mini-progressbar-bar-current\"></div></div>' + \r\n                    '<div class=\"mini-progressbar-text\"></div>' + \r\n                '</div>';\r\n\r\n            this.el.innerHTML = s;\r\n            this._borderEl = this.el.firstChild;\r\n            this._barEl = this._borderEl.firstChild.firstChild;\r\n            this._textEl = this._borderEl.lastChild;\r\n\r\n            //....\r\n        }\r\n    };\r\n});\r\n\nmini.addEpointExt('Spinner', function() {\r\n    return {\r\n        _StartSpin: function (Increment, time, count) {\r\n            this._StopSpin();\r\n    \r\n            var sf = this;\r\n    \r\n            function loop(value) {\r\n                if (Increment > 0) {\r\n                    if (value > sf.maxValue) sf.setValue(sf.minValue);\r\n                } else {\r\n                    if (value < sf.minValue) sf.setValue(sf.maxValue);\r\n                }\r\n            }\r\n    \r\n            var nx = 1000000;\r\n            var n1 = this.value * nx;\r\n            var n2 = Increment * nx;\r\n            var v = (n1 + n2) / nx;\r\n    \r\n            //this.setValue(this.value + Increment);\r\n            this.setValue(v);\r\n    \r\n            if (sf.allowLoopValue) {\r\n                loop(v);\r\n            }\r\n    \r\n            //this._OnValueChanged();\r\n    \r\n    \r\n            var sourceCount = count;\r\n            var now = new Date();\r\n            this._SpinTimer = setInterval(function () {\r\n    \r\n                // 重写解决小数位数问题\r\n                var nx = 1000000;\r\n                var n1 = sf.value * nx;\r\n                var n2 = Increment * nx;\r\n                var v = (n1 + n2) / nx;\r\n                // var v = sf.value + Increment;\r\n                sf.setValue(v);\r\n    \r\n                if (sf.allowLoopValue) {\r\n                    loop(v);\r\n                }\r\n    \r\n                sf._OnValueChanged();\r\n    \r\n                count--;\r\n                if (count == 0 && time > 50) {\r\n                    sf._StartSpin(Increment, time - 100, sourceCount + 3);\r\n    \r\n                }\r\n    \r\n                //防止alert\r\n                var now2 = new Date();\r\n                if (now2 - now > 500) sf._StopSpin();\r\n                now = now2;\r\n            }, time);\r\n            mini.on(document, \"mouseup\", this._OnDocumentMouseUp, this);\r\n            //document.title = time +\":\"+count;\r\n        },\r\n        __OnMousewheel: function (e) {\r\n            if (this.isReadOnly()) return;\r\n            if (this.changeOnMousewheel == false) return;\r\n    \r\n    \r\n            if (this.text != this._textEl.value) {\r\n                this.__OnInputTextChanged();\r\n                //document.title = new Date().getTime();\r\n            }\r\n            var sf = this;\r\n    \r\n            function loop(value) {\r\n                if (increment > 0) {\r\n                    if (value > sf.maxValue) sf.setValue(sf.minValue);\r\n                } else {\r\n                    if (value < sf.minValue) sf.setValue(sf.maxValue);\r\n                }\r\n            }\r\n    \r\n            var wheelDelta = e.wheelDelta || e.originalEvent.wheelDelta;            //ie\r\n            if (mini.isNull(wheelDelta)) wheelDelta = -e.originalEvent.detail * 24; //ff\r\n            var increment = this.increment;\r\n            if (wheelDelta < 0) increment = -increment;\r\n    \r\n    \r\n            var nx = 1000000;\r\n            var n1 = this.value * nx;\r\n            var n2 = increment * nx;\r\n            var v = (n1 + n2) / nx;\r\n            this.setValue(v);\r\n\r\n            if (this.allowLoopValue) {\r\n                loop(v);\r\n            }\r\n            //this.setValue(this.value + increment);\r\n    \r\n            this._OnValueChanged();\r\n    \r\n    \r\n    \r\n            return false;\r\n        }\r\n    };\r\n});\n// ;(function() {\r\n//     var _createHeaderMenu = mini.Tabs.prototype._createHeaderMenu;\r\n//     var yOffset = 2;\r\n//     mini.Tabs.prototype._createHeaderMenu = function() {\r\n//         var r = _createHeaderMenu.apply(this, arguments);\r\n//         var menuBtn = this._headerMenuEl;\r\n//         this._headerMenu && this._headerMenu.setyOffset && this._headerMenu.setyOffset(yOffset);\r\n//         if (this._headerMenu && menuBtn) {\r\n//             this._headerMenu.on('open', function() {\r\n//                 $(menuBtn).addClass('popup');\r\n//             });\r\n//             this._headerMenu.on('close', function() {\r\n//                 $(menuBtn).removeClass('popup');\r\n//             });\r\n//         }\r\n//         return r;\r\n//     };\r\n// })();\r\nmini.addEpointExt('Tabs', function() {\r\n    var _createHeaderMenu = mini.Tabs.prototype._createHeaderMenu;\r\n    var yOffset = 2;\r\n\r\n    return {\r\n        _createHeaderMenu: function() {\r\n            var r = _createHeaderMenu.apply(this, arguments);\r\n            var menuBtn = this._headerMenuEl;\r\n            this._headerMenu && this._headerMenu.setyOffset && this._headerMenu.setyOffset(yOffset);\r\n            if (this._headerMenu && menuBtn) {\r\n                this._headerMenu.on('open', function() {\r\n                    $(menuBtn).addClass('popup');\r\n                });\r\n                this._headerMenu.on('close', function() {\r\n                    $(menuBtn).removeClass('popup');\r\n                });\r\n            }\r\n            return r;\r\n        }\r\n    };\r\n});\r\n\nmini.addEpointExt('TextBox', function() {\r\n    return {\r\n        setVtype: function(value) {\r\n            // 数字类型的输入框提供默认的范围验证,并默认居右\r\n            if (value.indexOf('int') > -1 || value.indexOf('float') > -1 || value.indexOf('decimalLength') > -1) {\r\n                // if(value.indexOf('range') == -1) {\r\n                //     value += ';range:0,999999999';\r\n                // }\r\n                if (!this.inputStyle) {\r\n                    this.setInputStyle('text-align: right;');\r\n                }\r\n            }\r\n            this.vtype = value;\r\n        },\r\n        showClose: false,\r\n        _closeCls: 'mini-textbox-close',\r\n        setShowClose: function (value) {\r\n            this.showClose = value;\r\n            this._closeEl || (this._closeEl = mini.after(this._valueEl,'<span class=\"mini-textbox-close mini-icon\"></span>'));\r\n            this._closeEl.style.display = this.showClose ? \"inline-block\" : \"none\";\r\n            this._doInputLayout();\r\n        },\r\n        getShowClose: function () {\r\n            return this.showClose;\r\n        },\r\n        _doInputLayout: function(){\r\n            var pl = 0;\r\n\r\n            if(this.showClose) {\r\n                pl += mini.getWidth(this._closeEl);\r\n            }\r\n            if(pl > 0) {\r\n                mini.setStyle(this._textEl, 'width:calc(100% - ' + (pl/100) + 'rem);');\r\n            }\r\n            \r\n        },\r\n        __OnMouseDown: function(e) {\r\n            var sf = this;\r\n            if (mini.findParent(e.target, this._closeCls)) {\r\n                if (this.value !== '') {\r\n                    this._oldValue = this.value;\r\n                    this.setValue('');\r\n                    this.setText('');\r\n                    this._OnValueChanged();\r\n                }\r\n            }\r\n            // 解决ie下有时点击后光标没有在输入框中的bug\r\n            sf._textEl.focus();\r\n\r\n            //加这行代码\r\n            // if (this._InputType == 'textarea') return;\r\n\r\n            //this.fire(\"click\", {htmlEvent: e});\r\n\r\n            if (!mini.isAncestor(this._textEl, e.target)) {\r\n                setTimeout(function() {\r\n                    sf.focus();\r\n                    mini.selectRange(sf._textEl, 10000, 10000);\r\n                }, 1);\r\n            }\r\n        },\r\n        __OnBlur: function(e) {\r\n\r\n            this._focused = false;\r\n            var sf = this;\r\n            setTimeout(function() {\r\n                if (sf._focused == false) {\r\n                    sf.removeCls(sf._focusCls);\r\n                }\r\n            }, 2);\r\n\r\n            //        if (this.emptyText && this._textEl.value == \"\") {\r\n            //            this._textEl.value = this.emptyText;\r\n            //            mini.addClass(this.el, this._emptyCls);\r\n            //        }\r\n\r\n            //        if (!this._inputChangedTime || new Date() - this._inputChangedTime < 50) {\r\n            //            this.__OnInputTextChanged();\r\n            //        }\r\n            //        this._inputChangedTime = null;\r\n\r\n            // 解决ie下通过鼠标把输入框的内容拖拽出去后值不变的bug\r\n            if (mini.isIE) {\r\n                this.__OnInputTextChanged();\r\n            }\r\n\r\n            this.fire('blur', { htmlEvent: e });\r\n\r\n            if (this.validateOnLeave && this.isEditable()) {\r\n                this._tryValidate();\r\n            }\r\n        },\r\n        errorTextEl: null,\r\n        getErrorTextEl: function () {\r\n            if (!this.errorTextEl) {\r\n                this.errorTextEl = mini.append(this.el, '<span class=\"mini-errorText\"></span>');\r\n            }\r\n            return this.errorTextEl;\r\n        },\r\n        _RemoveErrorText: function () {\r\n            if (this.errorTextEl) {\r\n                var el = this.errorTextEl;\r\n                jQuery(el).remove();\r\n            }\r\n            this.errorTextEl = null;\r\n        },\r\n\r\n        getExtraAttrs: function(el) {\r\n            var attrs = {};\r\n            mini._ParseString(el, attrs, ['mobileErrorText', 'telErrorText', 'phoneErrorText', 'postCodeErrorText', 'orgCodeErrorText', 'idCardErrorText', 'validateErrorText', 'decimalLengthErroeText']);\r\n            mini._ParseBool(el, attrs, ['showClose']);\r\n            return attrs;\r\n        }\r\n    };\r\n});\r\n\r\nmini.addEpointExt('TextArea', function() {\r\n    return {\r\n        minHeight: 62,\r\n        // __OnMouseDown: function(e) {\r\n        //     var sf = this;\r\n        //     // 解决ie下有时点击后光标没有在输入框中的bug\r\n        //     sf._textEl.focus();\r\n\r\n        //     //this.fire(\"click\", {htmlEvent: e});\r\n\r\n        //     if (!mini.isAncestor(this._textEl, e.target)) {\r\n        //         setTimeout(function() {\r\n        //             sf.focus();\r\n        //             mini.selectRange(sf._textEl, 1000, 1000);\r\n        //         }, 1);\r\n        //     }\r\n        // },\r\n        setHeight: function (value) {\r\n            if (parseInt(value) == value) value += \"px\";\r\n            this.height = value;\r\n            if (this._InputType == \"textarea\") {\r\n                // this.el.style.height = value;\r\n                this.doLayout();\r\n            }\r\n        },\r\n        doLayout: function () {\r\n            if (!this.canLayout()) return;\r\n            mini.TextArea.superclass.doLayout.call(this);\r\n    \r\n            var h = this.height;\r\n            if (h + '' === h) {\r\n                if(h.indexOf('%') > -1) {\r\n                    this.el.style.height = h;\r\n                    h = mini.getHeight(this.el);\r\n                    this.el.style.height = h + 'px';\r\n                }\r\n                h = parseInt(h, 10) || 0;\r\n            }\r\n            if (this.minHeight && h < this.minHeight) {\r\n                h = this.minHeight;\r\n            }\r\n            if (this.maxHeight && h > this.maxHeight) {\r\n                h = this.maxHeight;\r\n            }\r\n            h -= 2;\r\n            if (h < 0) h = 0;\r\n            this._textEl.style.height = h + 'px';\r\n        }\r\n    };\r\n});\r\n\n// 为弹出的 listBox 新增 Y 方向间隙\r\nmini.addEpointExt('TextBoxList', function() {\r\n    return {\r\n        popupYOffset: 2,\r\n        showPopup: function(action) {\r\n            if (this.isDisplay() == false) return;\r\n            this.isShowPopup = true;\r\n\r\n            var popup = this._createPopup();\r\n\r\n            popup.el.style.zIndex = mini.getMaxZIndex();\r\n            var control = this._listbox;\r\n            control.emptyText = this.popupEmptyText;\r\n\r\n            //action = \"loading\";\r\n            if (action == 'loading') {\r\n                control.emptyText = this.popupLoadingText;\r\n                this._listbox.setData([]);\r\n            } else if (action == 'error') {\r\n                control.emptyText = this.popupLoadingText;\r\n                this._listbox.setData([]);\r\n            }\r\n            this._listbox.doUpdate();\r\n\r\n            var box = this.getBox();\r\n            var x = box.x,\r\n                y = box.y + box.height;\r\n\r\n            this.popup.el.style.display = 'block';\r\n            mini.setXY(popup.el, -1000, -1000);\r\n            this.popup.setWidth(box.width);\r\n\r\n            this.popup.setHeight(this.popupHeight);\r\n\r\n            var h = this.popup.getHeight();\r\n\r\n            if (h > this.popupMaxHeight) {\r\n                this.popup.setHeight(this.popupMaxHeight);\r\n            }\r\n            if (h < this.popupMinHeight) {\r\n                this.popup.setHeight(this.popupMinHeight);\r\n            }\r\n            mini.setXY(popup.el, x, y + this.popupYOffset);\r\n        },\r\n        errorTextEl: null,\r\n        getErrorTextEl: function () {\r\n            if (!this.errorTextEl) {\r\n                this.errorTextEl = mini.append(this.el, '<span class=\"mini-errorText\"></span>');\r\n            }\r\n            return this.errorTextEl;\r\n        },\r\n        _RemoveErrorText: function () {\r\n            if (this.errorTextEl) {\r\n                var el = this.errorTextEl;\r\n                jQuery(el).remove();\r\n            }\r\n            this.errorTextEl = null;\r\n        }\r\n    };\r\n});\r\n\nmini.addEpointExt('ToolTip', function() {\r\n    return {\r\n        autoHide: true,\r\n        theme: 'dark',\r\n        defaultTheme: 'dark',\r\n        setTheme: function(theme) {\r\n            if (!theme) return;\r\n            this.theme = theme;\r\n            // mini-tooltip-theme-*\r\n            var themePrefix = 'mini-tooltip-theme-';\r\n\r\n            var oldThemeCls = jQuery\r\n                .grep(this.el.className.split(' '), function(cls) {\r\n                    return cls.indexOf(themePrefix) != -1 ? true : false;\r\n                })\r\n                .join(' ');\r\n\r\n            jQuery(this.el)\r\n                .removeClass(oldThemeCls)\r\n                .addClass(themePrefix + theme);\r\n        },\r\n        getTheme: function() {\r\n            return this.theme;\r\n        },\r\n        applyTheme: function() {\r\n            if (!this._target) return;\r\n            var theme = jQuery(this._target).attr('data-theme');\r\n\r\n            this.setTheme(theme || this.defaultTheme);\r\n        },\r\n        setContent: function(value) {\r\n            this.$element.children('.mini-tooltip-inner').html(value || '&nbsp;');\r\n            this.applyPlacement();\r\n            this.applyTheme();\r\n        },\r\n        // 增加对autoHide的判断\r\n        _bindTooltip: function() {\r\n            var jq = jQuery(this.scope || document),\r\n                selector = this.selector,\r\n                type = 'tooltip-' + this.uid;\r\n            this.setTheme(this.theme);\r\n\r\n            jq.unbind('.' + type);\r\n\r\n            var triggers = this.trigger.split(' ');\r\n\r\n            for (var i = triggers.length; i--; ) {\r\n                var trigger = triggers[i];\r\n\r\n                if (trigger == 'click') {\r\n                    jq.on('click.' + type, selector, jQuery.proxy(this._toggle, this));\r\n                } else if (trigger != 'manual') {\r\n                    var eventIn = trigger == 'hover' ? 'mouseenter' : 'focus';\r\n                    var eventOut = trigger == 'hover' ? 'mouseleave' : 'blur';\r\n\r\n                    jq.on(eventIn + '.' + type, selector, jQuery.proxy(this._enter, this));\r\n\r\n                    // for 招投标\r\n                    // 如果autoHide不为true，则不添加eventOut时的自动隐藏，而通过close方法来隐藏。\r\n                    if (this.autoHide) {\r\n                        jq.on(eventOut + '.' + type, selector, jQuery.proxy(this._leave, this));\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        // 源码中有问题，_getTip、enter、leave这三个方法都没有\r\n        // 这里重新实现\r\n        _toggle: function(e) {\r\n            // if (this._getTip().css(\"display\") == 'none') {\r\n            //     this.enter(e);\r\n            // } else {\r\n            //     this.leave(e);\r\n            // }\r\n\r\n            if (this.$element.css('display') == 'none') {\r\n                this._enter(e);\r\n            } else {\r\n                this._leave(e);\r\n            }\r\n        },\r\n        // 源码中边界处理不完善，这里补充所有上下边界的情况\r\n        applyPlacement: function() {\r\n            if (!this._target) return;\r\n            if (this.$element.css('display') == 'none') return;\r\n            var target = this._target,\r\n                jq = jQuery(target),\r\n                placement = jq.attr('data-placement') || this.placement,\r\n                tip = this.$element;\r\n\r\n            if (!target || !tip[0]) return;\r\n\r\n            tip.show().css({\r\n                left: '-2000px',\r\n                top: '-2000px'\r\n            });\r\n\r\n            function applyCls(placement) {\r\n                tip.removeClass('mini-tooltip-left mini-tooltip-top mini-tooltip-right mini-tooltip-bottom mini-tooltip-bottomleft mini-tooltip-topleft mini-tooltip-bottomright mini-tooltip-topright').addClass('mini-tooltip-' + placement);\r\n            }\r\n\r\n            function applyPos(pos) {\r\n                tip.offset(pos);\r\n            }\r\n\r\n            //\r\n            var box = mini.getBox(target);\r\n            var vbox = mini.getViewportBox();\r\n            var topspace = box.top - vbox.top,\r\n                bottomspace = vbox.bottom - box.bottom,\r\n                leftspace = box.left - vbox.left,\r\n                rightspace = vbox.right - box.right;\r\n\r\n            applyCls(placement);\r\n\r\n            var tipbox = mini.getBox(tip[0]);\r\n            var pos = mini.getCalculatedOffset(placement, box, tipbox.width, tipbox.height);\r\n\r\n            //边界处理\r\n            // if (placement == \"left\") {\r\n            // } else if (placement == \"right\") {\r\n            // } else if (placement == \"top\") {\r\n            // } else if (placement == \"bottom\") {\r\n\r\n            // } else if (placement == \"bottomleft\" && topspace > bottomspace) {\r\n\r\n            //     if (pos.top + tipbox.height > vbox.bottom) {\r\n            //         placement = \"topleft\";\r\n            //     }\r\n            // } else if (placement == \"topleft\") {\r\n\r\n            // }\r\n\r\n            if (placement.indexOf('bottom') === 0) {\r\n                if (topspace > bottomspace && pos.top + tipbox.height > vbox.bottom) {\r\n                    placement = placement.replace('bottom', 'top');\r\n                }\r\n            } else if (placement.indexOf('top') === 0) {\r\n                if (topspace < bottomspace && pos.top < vbox.top) {\r\n                    placement = placement.replace('top', 'bottom');\r\n                }\r\n            }\r\n\r\n            if (placement.indexOf('left') !== -1) {\r\n                // 左边空白多 且显示不下 则让箭头由左边变成右边，让内容出现在左边。\r\n                if (leftspace > rightspace && tipbox.width + pos.left > vbox.width) {\r\n                    placement = placement.replace('left', 'right');\r\n                }\r\n            } else if (placement.indexOf('right') !== -1) {\r\n                // 右边空白多 且 （ 位置不可见 或 左边显示下 ） 则箭头变左边，内容出现在右边\r\n                if (leftspace < rightspace && (pos.left < 0 || box.left + box.width < tipbox.wihth)) {\r\n                    placement = placement.replace('right', 'left');\r\n                }\r\n            }\r\n\r\n            // 只指定上下，还需考虑左右是否显示得下\r\n            if (placement === 'bottom' || placement === 'top') {\r\n                // 左边空白多 且显示不下 则让箭头由左边变成右边，让内容出现在左边。\r\n                if (leftspace > rightspace && tipbox.width + pos.left > vbox.width) {\r\n                    placement += 'right';\r\n                } else if (leftspace < rightspace && (pos.left < 0 || box.left + box.width < tipbox.wihth)) {\r\n                    placement += 'left';\r\n                }\r\n            }\r\n\r\n            applyCls(placement);\r\n            pos = mini.getCalculatedOffset(placement, box, tipbox.width, tipbox.height);\r\n\r\n            if (placement == 'right' || placement == 'left') {\r\n                var arrow = $(tip).children('.mini-tooltip-arrow');\r\n                arrow.css('top', '');\r\n\r\n                function centerArrow() {\r\n                    var top = box.top + box.height / 2 - arrow.height() / 2;\r\n\r\n                    var y = top - pos.top;\r\n                    arrow.css('top', y);\r\n                }\r\n\r\n                vbox = mini.getViewportBox();\r\n                if (pos.top < vbox.y) {\r\n                    pos.top = vbox.y;\r\n                    centerArrow();\r\n                } else if (pos.top + tipbox.height > vbox.bottom) {\r\n                    pos.top = vbox.bottom - tipbox.height;\r\n                    centerArrow();\r\n                }\r\n            }\r\n\r\n            applyPos(pos);\r\n        },\r\n        setAutoHide: function(value) {\r\n            if (this.autoHide != value) {\r\n                this.autoHide = value;\r\n                this._bindTooltip();\r\n            }\r\n        },\r\n        getAutoHide: function() {\r\n            return this.autoHide;\r\n        },\r\n        getExtraAttrs: function(el) {\r\n            var attrs = {};\r\n\r\n            mini._ParseString(el, attrs, ['theme']);\r\n            mini._ParseBool(el, attrs, ['autoHide']);\r\n\r\n            return attrs;\r\n        }\r\n    };\r\n});\r\n\nmini.addEpointExt('TreeGrid', function() {\r\n    (function($) {\r\n        /**\r\n         * TreeGrid 新增奇偶行展示 和 展开行高亮的扩展\r\n         */\r\n        var originFn = mini.TreeGrid.prototype._initEvents;\r\n        mini.TreeGrid.prototype._initEvents = function() {\r\n            originFn.call(this);\r\n            var tree = this;\r\n\r\n            this.on('layout', function() {\r\n                // 未 开启斑马纹则不处理\r\n                if (!tree.allowAlternating) {\r\n                    $(tree.el)\r\n                        .find('.mini-grid-row-alt')\r\n                        .removeClass('mini-grid-row-alt');\r\n                    return;\r\n                }\r\n                var $tbody = $(tree._contentEl).find('.mini-grid-rows-content > .mini-grid-table > tbody');\r\n                // 增加奇偶行标识\r\n                $tbody.find('> .mini-grid-row').each(function(i, item) {\r\n                    if (i % 2 == 1) {\r\n                        $(item).addClass('mini-grid-row-alt');\r\n                    }\r\n                });\r\n                // 添加展开行的cls\r\n                $tbody.find('> .mini-tree-nodes-tr').each(function(i, tr) {\r\n                    $(tr)\r\n                        .prev()\r\n                        .addClass('mini-treegrid-expandRow');\r\n                });\r\n            });\r\n        };\r\n    })(jQuery);\r\n\r\n    return {\r\n        showHGridLines: true,\r\n        showVGridLines: false,\r\n        showSortIcon: true,\r\n        _setEditorBox: function(editor, cellBox) {\r\n            mini.DataGrid.prototype._setEditorBox.call(this, editor, cellBox);\r\n        }\r\n    };\r\n});\r\n\r\n// tree\r\n\r\nmini.addEpointExt('DataTree', function() {\r\n    return {\r\n        loadNode: function(node, expand) {\r\n            this._loadingNode = node;\r\n            var e = { \r\n                node: node,\r\n                cancel: false\r\n            };\r\n            this.fire('beforeloadnode', e);\r\n            //\r\n            // 添加外部可以自己实现展开节点请求数据的逻辑\r\n            if(e.cancel === true) {\r\n                return;\r\n            }\r\n            var time = new Date();\r\n\r\n            var me = this;\r\n            me._doLoadAjax(\r\n                me.loadParams,\r\n                null,\r\n                null,\r\n                null,\r\n                function(e) {\r\n                    var t = new Date() - time;\r\n                    if (t < 60) t = 60 - t;\r\n\r\n                    setTimeout(function() {\r\n                        //success\r\n                        e.node = node;\r\n                        me._OnPreLoad(e);\r\n\r\n                        //e.node = me._loadingNode;\r\n                        me._loadingNode = null;\r\n                        if (me.loadParams) delete me.loadParams[me.idField];\r\n\r\n                        var oldNodes = node[me.nodesField];\r\n                        me.removeNodes(oldNodes);\r\n\r\n                        var nodes = e.data;\r\n                        if (nodes && nodes.length > 0) {\r\n                            me.collapse(node); //addNodes之前    优化！！！\r\n\r\n                            me.addNodes(nodes, node);\r\n\r\n                            //清楚新增痕迹\r\n                            var all = me.getAllChildNodes(node);\r\n                            for (var i = 0, l = all.length; i < l; i++) {\r\n                                var treeNode = all[i];\r\n                                //me.acceptRecord(treeNode);\r\n                                delete treeNode._state; //优化！！！\r\n                            }\r\n\r\n                            if (expand !== false) {\r\n                                me.expand(node, true);\r\n                            } else {\r\n                                me.collapse(node, true);\r\n                            }\r\n                        } else {\r\n                            delete node[me.leafField];\r\n                            me.expand(node, true);\r\n                        }\r\n\r\n                        me.fire('loadnode', e);\r\n                        me.fire('load', e);\r\n                        // }, t);\r\n                        // 上面的t不知miniui的用意，但是会造成如果ajax请求时间比较长的话，t会很大，造成延迟执行的时间也很长\r\n                    }, 10);\r\n                },\r\n                true\r\n            );\r\n        }\r\n    };\r\n});\r\n\r\nmini.addEpointExt('Tree', function() {\r\n    // 树的 loading 实现优化\r\n    (function(win, $) {\r\n        // svg 动画 IE 89 不支持 不用优化\r\n        if (mini.isIE8 || mini.isIE9) {\r\n            return;\r\n        }\r\n        // 展开loading\r\n        var loadingSvg = '<svg class=\"mini-tree-loading-icon\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1024 1024\" width=\"128\" height=\"128\" fill=\"currentColor\" ><path d=\"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\"></path></svg>';\r\n        var oldCreateTreeColumn = mini.TreeGrid.prototype._createTreeColumn;\r\n        // miniui 源码中 tree 和 treeGrid 在一个文件中 因此都需要修改\r\n        mini.Tree.prototype._createTreeColumn = mini.TreeGrid.prototype._createTreeColumn = function(e) {\r\n            var returnValue = oldCreateTreeColumn.apply(this, arguments);\r\n            // 注入loading\r\n            var $cell = $(e.cellHtml);\r\n            if ($cell.hasClass('mini-tree-parentNode')) {\r\n                $cell.find('>.mini-tree-node-ecicon').append(loadingSvg);\r\n                e.cellHtml = $cell[0].outerHTML;\r\n            }\r\n            // title实现\r\n            if(this.showCellTip === true) {\r\n                var $text = $cell.find('.mini-tree-nodetext');\r\n                $text.attr('title', jQuery.trim($text.text()));\r\n                e.cellHtml = $cell[0].outerHTML;\r\n            }\r\n            return returnValue;\r\n        };\r\n\r\n        mini.Tree.prototype.__OnBeforeLoadNode = mini.TreeGrid.prototype.__OnBeforeLoadNode = function(e) {\r\n            this.__showLoading = this.showLoading;\r\n            this.showLoading = false;\r\n            // 加载速度很快就不用出现loading了\r\n            clearTimeout(this.__loadingTimer);\r\n            var that = this;\r\n            this.__loadingTimer = setTimeout(function() {\r\n                that.addNodeCls(e.node, 'mini-tree-loading');\r\n            }, 100);\r\n            // this.addNodeCls(e.node, \"mini-tree-loading\");\r\n            this.fire('beforeloadnode', e);\r\n        };\r\n        mini.Tree.prototype.__OnLoadNode = mini.TreeGrid.prototype.__OnLoadNode = function(e) {\r\n            clearTimeout(this.__loadingTimer);\r\n            this.showLoading = this.__showLoading;\r\n            this.removeNodeCls(e.node, 'mini-tree-loading');\r\n            this.fire('loadnode', e);\r\n        };\r\n    })(window, window.jQuery);\r\n\r\n    return {\r\n        showTreeLines: false,\r\n        showFullPath: false,\r\n        includeRootNode: false,\r\n        allowAlternating: false,\r\n        // _afterApply: function() {\r\n        //     this.on(\r\n        //         'update',\r\n        //         function() {\r\n        //             // 为树节点上加入 title\r\n        //             if (this.showCellTip !== true) return;\r\n        //             jQuery(this._contentEl)\r\n        //                 .find('.mini-tree-nodetext')\r\n        //                 .each(function(i, el) {\r\n        //                     if (el.title) return;\r\n        //                     el.title = jQuery.trim(el.textContent || el.innerText);\r\n        //                 });\r\n        //         },\r\n        //         this\r\n        //     );\r\n        // },\r\n        replaceNodes: function(nodes, node) {\r\n            var oldNodes = node[this.nodesField];\r\n            this.removeNodes(oldNodes);\r\n\r\n            this.addNodes(nodes, node);\r\n        },\r\n        _OnDrawCell: function(record, column, rowIndex, columnIndex) {\r\n            var e = mini.TreeGrid.superclass._OnDrawCell.call(this, record, column, rowIndex, columnIndex);\r\n\r\n            if (this._treeColumn && this._treeColumn == column.name) {\r\n                var node = e.node;\r\n\r\n                if (node.ckr === false) {\r\n                    e.showCheckBox = false;\r\n                    e.showRadioButton = false;\r\n                }\r\n                this.fire('drawnode', e);\r\n                if (e.nodeStyle) {\r\n                    e.cellStyle = e.nodeStyle;\r\n                }\r\n                if (e.nodeCls) {\r\n                    e.cellCls = e.nodeCls;\r\n                }\r\n                if (e.nodeHtml) {\r\n                    e.cellHtml = e.nodeHtml;\r\n                } else if (node.textCls) {\r\n                    e.cellHtml = '<span class=\"' + node.textCls + '\">' + e.cellHtml + '</span>';\r\n                }\r\n\r\n                this._createTreeColumn(e);\r\n            }\r\n            return e;\r\n        },\r\n\r\n        getValueAndText: function(records, delimiter) {\r\n            if (mini.isNull(records)) records = [];\r\n            delimiter = delimiter || this.delimiter;\r\n\r\n            if (typeof records == 'string' || typeof records == 'number') {\r\n                records = this._dataSource.getsByIds(records);\r\n            } else if (!mini.isArray(records)) {\r\n                records = [records];\r\n            }\r\n            var values = [];\r\n            var texts = [];\r\n            for (var i = 0, l = records.length; i < l; i++) {\r\n                var record = records[i];\r\n                if (record) {\r\n                    values.push(this.getItemValue(record));\r\n                    texts.push(this.getItemText(record));\r\n                }\r\n            }\r\n\r\n            return [values.join(delimiter), texts.join(delimiter)];\r\n        },\r\n\r\n        getItemValue: function(item) {\r\n            if (!item) return '';\r\n            var t = mini._getMap(this.idField, item);\r\n            return mini.isNull(t) ? '' : String(t);\r\n        },\r\n\r\n        getItemText: function(item) {\r\n            if (!item) return '';\r\n            var t = '';\r\n            //var t = item[this.textField];\r\n            if (this.showFullPath) {\r\n                t = this.getFullPath(item);\r\n            } else {\r\n                t = mini._getMap(this.textField, item);\r\n            }\r\n\r\n            return mini.isNull(t) ? '' : String(t).replace(/<\\/?.+?>/g, '');\r\n        },\r\n        getFullPath: function(item) {\r\n            if (item.fullPath) {\r\n                return item.fullPath;\r\n            }\r\n\r\n            var parents = this.getAncestors(item),\r\n                fullPath = '';\r\n\r\n            for (var i = 0, l = parents.length; i < l; i++) {\r\n                // 不包含根节点的跳过根节点\r\n                if (i == 0 && !this.includeRootNode) {\r\n                    continue;\r\n                }\r\n\r\n                fullPath += mini._getMap(this.textField, parents[i]) + '-';\r\n            }\r\n\r\n            item.fullPath = fullPath = fullPath + mini._getMap(this.textField, item);\r\n\r\n            return fullPath;\r\n        },\r\n        getText: function() {\r\n            var nodes = [];\r\n            if (this.showCheckBox) {\r\n                nodes = this.getCheckedNodes();\r\n            } else {\r\n                var node = this.getSelectedNode();\r\n                if (node) nodes.push(node);\r\n            }\r\n\r\n            var sb = [],\r\n                textField = this.getTextField();\r\n            for (var i = 0, l = nodes.length; i < l; i++) {\r\n                var node = nodes[i];\r\n                // 去除可能存在的搜索高亮的html标签\r\n                sb.push(node[textField].replace(/<\\/?.+?>/g, ''));\r\n            }\r\n\r\n            return sb.join(',');\r\n        }\r\n    };\r\n});\r\n\nmini.addEpointExt('Window', function() {\r\n    var ext = {\r\n        showRefreshButton: false,\r\n        maskOnLoad: false,\r\n        lockScroll: true,\r\n\r\n        _initButtons: function() {\r\n            this.buttons = [];\r\n\r\n            var collapse = this.createButton({\r\n                name: 'collapse',\r\n                cls: 'mini-tools-collapse',\r\n                visible: this.showCollapseButton\r\n            });\r\n            this.buttons.push(collapse);\r\n\r\n            var min = this.createButton({\r\n                name: 'min',\r\n                cls: 'mini-tools-min',\r\n                visible: this.showMinButton\r\n            });\r\n            this.buttons.push(min);\r\n\r\n            var max = this.createButton({\r\n                name: 'max',\r\n                cls: 'mini-tools-max',\r\n                visible: this.showMaxButton\r\n            });\r\n            this.buttons.push(max);\r\n            // 添加刷新按钮\r\n            var refresh = this.createButton({\r\n                name: 'refresh',\r\n                cls: 'mini-tools-refresh',\r\n                visible: this.showRefreshButton\r\n            });\r\n            this.buttons.push(refresh);\r\n            var close = this.createButton({\r\n                name: 'close',\r\n                cls: 'mini-tools-close',\r\n                visible: this.showCloseButton\r\n            });\r\n            this.buttons.push(close);\r\n        },\r\n        _OnButtonClick: function(button, htmlEvent) {\r\n            var e = mini.Window.superclass._OnButtonClick.call(this, button, htmlEvent);\r\n            if (e.cancel == true) {\r\n                return e;\r\n            }\r\n\r\n            if (e.name == 'max') {\r\n                if (this.state == 'max') {\r\n                    this.restore();\r\n                } else {\r\n                    this.max();\r\n                }\r\n            } else if (e.name == 'refresh') {\r\n                this.refresh();\r\n            } \r\n            // else if (e.name == 'close') {\r\n            //     this.fire('close');\r\n            // }\r\n            return e;\r\n        },\r\n        hide: function () {\r\n            this.fire('close');\r\n            this.setVisible(false);\r\n            this._doModal();\r\n        },\r\n        refresh: function() {\r\n            this.reload();\r\n            return this;\r\n        },\r\n        restore: function() {\r\n            this.state = 'restore';\r\n            this.show(this.x, this.y);\r\n\r\n            var button = this.getButton('max');\r\n            if (button) {\r\n                button.cls = 'mini-tools-max';\r\n                this._doTools();\r\n            }\r\n\r\n            this.fire('restore');\r\n        },\r\n        /**\r\n         *\r\n         * function setShowRefreshButton(showRefreshButton)\r\n         * @member mini.Window\r\n         * @param {Boolean} showRefreshButton\r\n         *\r\n         */\r\n        setShowRefreshButton: function(showRefreshButton) {\r\n            this.showRefreshButton = showRefreshButton;\r\n            var btn = this.getButton('refresh');\r\n            if (!btn) {\r\n                return;\r\n            }\r\n            btn.visible = showRefreshButton;\r\n            this._doTools();\r\n        },\r\n        /**\r\n         *\r\n         * function getShowRefreshButton()\r\n         * @member mini.Window\r\n         * @returns {Boolean}\r\n         *\r\n         */\r\n        getShowRefreshButton: function() {\r\n            return this.showRefreshButton;\r\n        },\r\n\r\n        doLayout: function() {\r\n            if (!this.canLayout()) return;\r\n            //        if (this.state == \"max\") {\r\n            //            this._doShow();\r\n            //        }\r\n\r\n            if (this.state == 'max') {\r\n                var vbox = this.getParentBox();\r\n                this.el.style.left = '10px';\r\n                this.el.style.top = '10px';\r\n                mini.setSize(this.el, vbox.width - 20, vbox.height - 20);\r\n            }\r\n\r\n            mini.Window.superclass.doLayout.call(this);\r\n            //this._doShadow();\r\n\r\n            if (this.allowDrag) {\r\n                mini.addClass(this.el, this._dragCls);\r\n            }\r\n            if (this.state == 'max') {\r\n                this._resizeGridEl.style.display = 'none';\r\n                mini.removeClass(this.el, this._dragCls);\r\n            }\r\n\r\n            //modal\r\n            this._doModal();\r\n        },\r\n        _doShow: function (x, y) {\r\n            var vbox = this.getParentBox();\r\n            var box;\r\n    \r\n            if (this.state == 'max') {\r\n    \r\n                if (!this._width) {\r\n                    box = this.getBox();\r\n    \r\n                    this._width = box.width;\r\n    \r\n                    if (this.expanded) {\r\n                        this._height = box.height;\r\n                    }\r\n                    this.x = box.x;\r\n                    this.y = box.y;\r\n    \r\n    \r\n                }\r\n    \r\n                this.el.style.left = '-10000px';\r\n                this.el.style.top = '-10000px';\r\n            } else {\r\n                if (mini.isNull(x)) x = 'center';\r\n                if (mini.isNull(y)) y = 'middle';\r\n    \r\n                this.el.style.position = 'absolute';\r\n                this.el.style.left = '-2000px';\r\n                this.el.style.top = '-2000px';\r\n                this.el.style.display = '';\r\n    \r\n                if (this._width) {\r\n                    this.setWidth(this._width);\r\n                    this.setHeight(this._height);\r\n                    delete this._width;\r\n                    delete this._height;\r\n                } else {\r\n                    //mini.setSize(this.el, this.width, this.height);\r\n                }\r\n                this._measureSize();\r\n    \r\n                box = this.getBox();\r\n    \r\n                //x, y的获取        \r\n                if (x == 'left') x = 0;\r\n                if (x == 'center') x = vbox.width / 2 - box.width / 2;\r\n                if (x == 'right') x = vbox.width - box.width;\r\n    \r\n                // 修改@2020-09-09 通过offset设置位置，不需要加上滚动偏移了\r\n                if (y == 'top') y = 0;\r\n                if (y == 'middle') y = vbox.height / 2 - box.height / 2;\r\n                if (y == 'bottom') y = vbox.height - box.height;\r\n    \r\n                if (x + box.width > vbox.right) x = vbox.right - box.width;\r\n                if (y + box.height > vbox.bottom) y = vbox.bottom - box.height;\r\n                if (x < 0) x = 0;\r\n                if (y < 0) y = 0;\r\n    \r\n                this.el.style.display = '';\r\n                //document.title = x+\":\"+y;\r\n                // mini.setX(this.el, x);\r\n    \r\n                // mini.setY(this.el, y);\r\n                // body 已设置成fixed，并且偏移也是基于可视窗口的，不能用offset来设置了\r\n                this.el.style.left = x + 'px';\r\n                this.el.style.top = y + 'px';\r\n    \r\n                //jQuery(this.el).fadeOut();\r\n                //jQuery(this.el).slideUp();\r\n                //jQuery(this.el).slideDown();\r\n    \r\n    \r\n                //alert(x);\r\n            }\r\n            this.doLayout();\r\n        },\r\n\r\n        getExtraAttrs: function(el) {\r\n            var attrs = {};\r\n\r\n            mini._ParseString(el, attrs, ['onrestore', 'onclose']);\r\n            mini._ParseBool(el, attrs, ['showRefreshButton', 'lockScroll']);\r\n        }\r\n    };\r\n\r\n    // if (mini.supportRem) {\r\n    //     // 重写set方法 实现 message的 set rem 大小\r\n    //     ext.setWidth = function(value) {\r\n    //         if (parseInt(value, 10) == value) {\r\n    //             value = parseFloat(value / 100 / mini.getFontSizeRatio()) + 'rem';\r\n    //         }\r\n    //         this.width = value;\r\n    //         this.el.style.width = value;\r\n    //         this._sizeChanged();\r\n    //     };\r\n    //     ext.setHeight = function(value) {\r\n    //         if (parseInt(value, 10) == value) {\r\n    //             value = parseFloat(value / 100 / mini.getFontSizeRatio()) + 'rem';\r\n    //         }\r\n    //         this.height = value;\r\n    //         this.el.style.height = value;\r\n    //         this._sizeChanged();\r\n    //     };\r\n    // }\r\n\r\n    var setVisible = mini.Window.prototype.setVisible;\r\n    ext.setVisible = function (visible) {\r\n        if (this.lockScroll) {\r\n            if (visible) {\r\n                $('html,body').addClass('mini-window-lock-scroll');\r\n            } else {\r\n                $('html,body').removeClass('mini-window-lock-scroll');\r\n            }\r\n        }\r\n        setVisible.apply(this, arguments);\r\n    };\r\n    var destroy = mini.Window.prototype.destroy;\r\n    ext.destroy = function () {\r\n        $('html,body').removeClass('mini-window-lock-scroll');\r\n        destroy.apply(this, arguments);\r\n    };\r\n\r\n    return ext;\r\n});\r\n\n\r\nmini.Hidden = function () {\r\n    mini.Hidden.superclass.constructor.apply(this, arguments);\r\n\r\n}\r\nmini.extend(mini.Hidden, mini.Control, {\r\n    _clearBorder: false,\r\n    formField: true,\r\n    value: \"\",\r\n\r\n    uiCls: \"mini-hidden\",\r\n    _create: function () {\r\n        this.el = document.createElement(\"input\");\r\n        this.el.type = \"hidden\";\r\n        this.el.className = \"mini-hidden\";\r\n    },\r\n    setName: function (value) {\r\n\r\n        this.name = value;\r\n        this.el.name = value;\r\n    },\r\n    setValue: function (value) {\r\n        if (value === null || value === undefined) value = \"\";\r\n        this.value = value;\r\n        if (mini.isDate(value)) {\r\n            var y = value.getFullYear();\r\n            var m = value.getMonth() + 1;\r\n            var d = value.getDate();\r\n            m = m < 10 ? \"0\" + m : m;\r\n            d = d < 10 ? \"0\" + d : d;\r\n            this.el.value = y + \"-\" + m + \"-\" + d;\r\n        } else {\r\n            this.el.value = value;\r\n        }\r\n    },\r\n    getValue: function () {\r\n        return this.value;\r\n    },\r\n    getFormValue: function () {\r\n        return this.el.value;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.Hidden, \"hidden\");\n\r\nmini.Popup = function () {\r\n    mini.Popup.superclass.constructor.apply(this, arguments);\r\n\r\n    this.setVisible(false);\r\n    this.setAllowDrag(this.allowDrag);\r\n    this.setAllowResize(this.allowResize);\r\n}\r\nmini.extend(mini.Popup, mini.Container, {\r\n    alwaysView: true,\r\n    _clearBorder: false,\r\n\r\n    uiCls: \"mini-popup\",\r\n    _create: function () {\r\n        var el = this.el = document.createElement(\"div\");\r\n        this.el.className = \"mini-popup\";\r\n        this._contentEl = this.el;\r\n    },\r\n\r\n    _initEvents: function () {\r\n        mini._BindEvents(function () {\r\n            mini_onOne(this.el, \"mouseover\", this.__OnMouseOver, this);\r\n\r\n            //mini.on(this.el, \"mouseover\", this.__OnMouseOver, this);\r\n\r\n        }, this);\r\n\r\n    },\r\n    doLayout: function () {\r\n        if (!this.canLayout()) return;\r\n        mini.Popup.superclass.doLayout.call(this);\r\n        this._doShadow();\r\n\r\n        //mini.layout(this.el);\r\n        var cs = this.el.childNodes;\r\n        if (cs) {\r\n            for (var i = 0, l = cs.length; i < l; i++) {\r\n                var cel = cs[i];\r\n                mini.layout(cel);\r\n            }\r\n        }\r\n    },\r\n//    destroy: function (removeEl) {\r\n//        if (this.el) {\r\n//            this.el.onmouseover = null;\r\n//        }\r\n//        //mini.removeChilds(this._contentEl);\r\n//        mini.un(document, \"mousedown\", this.__OnBodyMouseDown, this);\r\n//        mini.un(window, \"resize\", this.__OnWindowResize, this);\r\n//        if (this._modalEl) {\r\n//            jQuery(this._modalEl).remove();\r\n//            this._modalEl = null;\r\n//        }\r\n//        if (this.shadowEl) {\r\n//            jQuery(this.shadowEl).remove();\r\n//            this.shadowEl = null;\r\n//        }\r\n//        if (this._shimEl) {\r\n//            jQuery(this._shimEl).remove();\r\n//            this._shimEl = null;\r\n//        }\r\n//        mini.Popup.superclass.destroy.call(this, removeEl);\r\n//    },\r\n    destroy: function (removeEl) {\r\n        if (this.el) {\r\n            this.el.onmouseover = null;\r\n        }\r\n        //mini.removeChilds(this._contentEl);\r\n\r\n        if (!mini._destroying) {\r\n            mini.un(document, \"mousedown\", this.__OnBodyMouseDown, this);\r\n            mini.un(window, \"resize\", this.__OnWindowResize, this);\r\n        }\r\n\r\n        if (removeEl !== false) {\r\n            if (this._modalEl) {\r\n                jQuery(this._modalEl).remove();\r\n            }\r\n            if (this.shadowEl) {\r\n                jQuery(this.shadowEl).remove();\r\n\r\n            }\r\n            if (this._shimEl) {\r\n                jQuery(this._shimEl).remove();\r\n\r\n            }\r\n        }\r\n        this._modalEl = null;\r\n        this.shadowEl = null;\r\n        this._shimEl = null;\r\n        mini.Popup.superclass.destroy.call(this, removeEl);\r\n    },\r\n\r\n    setWidth: function (value) {\r\n        if (parseInt(value) == value) value += \"px\";\r\n        this.width = value;\r\n\r\n        if (value.indexOf(\"px\") != -1) {\r\n            mini.setWidth(this.el, value);\r\n        } else {\r\n            this.el.style.width = value;\r\n        }\r\n        this._sizeChanged();\r\n    },\r\n    setHeight: function (value) {\r\n        if (parseInt(value) == value) value += \"px\";\r\n        this.height = value;\r\n        if (value.indexOf(\"px\") != -1) {\r\n            mini.setHeight(this.el, value);\r\n        } else {\r\n            this.el.style.height = value;\r\n        }\r\n        this._sizeChanged();\r\n    },\r\n    setBody: function (value) {\r\n        if (!value) return;\r\n        if (!mini.isArray(value)) value = [value];\r\n        for (var i = 0, l = value.length; i < l; i++) {\r\n            mini.append(this._contentEl, value[i]);\r\n        }\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Popup.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"popupEl\", \"popupCls\", \"showAction\", \"hideAction\", \"xAlign\", \"yAlign\", \"modalStyle\",\r\n            \"onbeforeopen\", \"open\", \"onbeforeclose\", \"onclose\"\r\n                ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"showModal\", \"showShadow\", \"allowDrag\", \"allowResize\"\r\n                ]\r\n        );\r\n        mini._ParseInt(el, attrs,\r\n            [\"showDelay\", \"hideDelay\", \"xOffset\", \"yOffset\",\r\n            \"minWidth\", \"minHeight\", \"maxWidth\", \"maxHeight\"\r\n                ]\r\n        );\r\n        var cs = mini.getChildNodes(el, true);\r\n        attrs.body = cs;\r\n        return attrs;\r\n    }\r\n\r\n});\r\nmini.regClass(mini.Popup, \"popup\");\r\n\r\n///////////////////////////////////////////\r\nmini.Popup_prototype = {\r\n    //_displayStyle: \"block\",\r\n    isPopup: false, //是否弹出显示\r\n\r\n    popupEl: null,\r\n    popupCls: \"\",\r\n\r\n    showAction: \"mouseover\", //none, leftclick, rightclick, mouseover\r\n    hideAction: \"outerclick\", //none, outerclick, mouseout\r\n    showDelay: 300,     //针对mouseover\r\n    hideDelay: 500,     //针对mouseout\r\n\r\n    xAlign: \"left\", //none,outleft,left,center,right,outright\r\n    yAlign: \"below\", //none,above, top, middle, bottom, below\r\n    xOffset: 0,\r\n    yOffset: 0,\r\n\r\n    minWidth: 50,\r\n    minHeight: 25,\r\n    maxWidth: 2000,\r\n    maxHeight: 2000,\r\n\r\n    showModal: false,\r\n    showShadow: true,\r\n\r\n    modalStyle: \"opacity:0.2\",\r\n\r\n    _dragCls: \"mini-popup-drag\",\r\n    _resizeCls: \"mini-popup-resize\",\r\n    allowDrag: false,\r\n    allowResize: false,\r\n\r\n    _unbindPopupEl: function () {\r\n        if (!this.popupEl) return;\r\n        mini.un(this.popupEl, \"click\", this.__OnLeftClick, this);\r\n        mini.un(this.popupEl, \"contextmenu\", this.__OnRightClick, this);\r\n        mini.un(this.popupEl, \"mouseover\", this.__OnMouseOver, this);\r\n\r\n    },\r\n    _bindPopupEl: function () {\r\n        if (!this.popupEl) return;\r\n        mini.on(this.popupEl, \"click\", this.__OnLeftClick, this);\r\n        mini.on(this.popupEl, \"contextmenu\", this.__OnRightClick, this);\r\n        mini.on(this.popupEl, \"mouseover\", this.__OnMouseOver, this);\r\n    },\r\n    doShow: function (e) {\r\n        var ev = {\r\n            popupEl: this.popupEl,\r\n            htmlEvent: e,\r\n            cancel: false\r\n        };\r\n\r\n        this.fire(\"BeforeOpen\", ev);\r\n        if (ev.cancel == true) return;\r\n\r\n        this.fire(\"opening\", ev);\r\n        if (ev.cancel == true) return;\r\n\r\n        if (!this.popupEl) {\r\n            this.show();\r\n        } else {\r\n            var options = {};\r\n            if (e) options.xy = [e.pageX, e.pageY];\r\n            this.showAtEl(this.popupEl, options);\r\n        }\r\n    },\r\n    doHide: function (e) {\r\n        var ev = {\r\n            popupEl: this.popupEl,\r\n            htmlEvent: e,\r\n            cancel: false\r\n        };\r\n        this.fire(\"BeforeClose\", ev);\r\n        if (ev.cancel == true) return;\r\n        this.close();\r\n    },\r\n\r\n    show: function (left, top) {\r\n\r\n        this.showAtPos(left, top);\r\n    },\r\n    showAtPos: function (x, y) {\r\n        //this._popupEl = null;\r\n\r\n        //if (!this.isRender()) {\r\n        this.render(document.body);\r\n        //}\r\n        if (!x && x !== 0) x = \"center\";\r\n        if (!y && y !== 0) y = \"middle\";\r\n\r\n        this.el.style.position = \"absolute\";\r\n        this.el.style.left = \"-2000px\";\r\n        this.el.style.top = \"-2000px\";\r\n        this.el.style.display = \"\";\r\n\r\n        this._measureSize();\r\n\r\n        var vbox = mini.getViewportBox();\r\n        var box = mini.getBox(this.el);\r\n\r\n\r\n        //x, y的获取        \r\n        if (x == \"left\") x = 0;\r\n        if (x == 'center') x = vbox.width / 2 - box.width / 2;\r\n        if (x == \"right\") x = vbox.width - box.width;\r\n\r\n        if (y == \"top\") y = 0;\r\n        if (y == \"middle\") y = vbox.y + vbox.height / 2 - box.height / 2;\r\n        if (y == \"bottom\") y = vbox.height - box.height;\r\n\r\n        if (x + box.width > vbox.right) x = vbox.right - box.width;\r\n        if (y + box.height > vbox.bottom) y = vbox.bottom - box.height - 2;\r\n\r\n        this._Show(x, y);\r\n    },\r\n\r\n    _doModal: function () {\r\n        jQuery(this._modalEl).remove();\r\n        if (!this.showModal) return;\r\n        if (this.visible == false) return;\r\n\r\n        var dd = document.documentElement;\r\n        var scrollWidth = parseInt(Math.max(document.body.scrollWidth, dd ? dd.scrollWidth : 0));\r\n        var scrollHeight = parseInt(Math.max(document.body.scrollHeight, dd ? dd.scrollHeight : 0));\r\n\r\n        var vbox = mini.getViewportBox();\r\n        var height = vbox.height;\r\n        if (height < scrollHeight) height = scrollHeight;\r\n\r\n        var width = vbox.width;\r\n        if (width < scrollWidth) width = scrollWidth;\r\n\r\n        this._modalEl = mini.append(document.body, '<div class=\"mini-modal\"></div>');\r\n        this._modalEl.style.height = height + \"px\";\r\n        this._modalEl.style.width = width + \"px\";\r\n        this._modalEl.style.zIndex = mini.getStyle(this.el, 'zIndex') - 1;\r\n        mini.setStyle(this._modalEl, this.modalStyle);\r\n    },\r\n    _doShim: function () {\r\n        //if (!mini.isIE || !mini_useShims) return;\r\n        if (!mini_useShims) return;\r\n        if (!this._shimEl) {\r\n            var iframe = \"<iframe frameborder='0' style='position: absolute; z-index: -1; width: 0; height: 0; top: 0;left:0;scrolling:no;'></iframe>\";\r\n            this._shimEl = mini.append(document.body, iframe);\r\n        }\r\n        function doShim() {\r\n            this._shimEl.style.display = \"\";\r\n            var box = mini.getBox(this.el);\r\n            var s = this._shimEl.style;\r\n            s.width = box.width + \"px\";\r\n            s.height = box.height + \"px\";\r\n            s.left = box.x + \"px\";\r\n            s.top = box.y + \"px\";\r\n\r\n            var zindex = mini.getStyle(this.el, 'zIndex');\r\n            if (!isNaN(zindex)) {\r\n                this._shimEl.style.zIndex = zindex - 3;\r\n            }\r\n        }\r\n        this._shimEl.style.display = \"none\";\r\n        if (this._doShimTimer) {\r\n            clearTimeout(this._doShimTimer);\r\n            this._doShimTimer = null;\r\n        }\r\n        var me = this;\r\n        this._doShimTimer = setTimeout(function () {\r\n            me._doShimTimer = null;\r\n            doShim.call(me);\r\n        }, 20);\r\n    },\r\n    _doShadow: function () {\r\n        if (!this.shadowEl) {\r\n            this.shadowEl = mini.append(document.body, '<div class=\"mini-shadow\"></div>');\r\n        }\r\n\r\n        this.shadowEl.style.display = this.showShadow ? \"\" : \"none\";\r\n        this.shadowEl.style.display = \"none\";\r\n        //        if (this.showShadow) {\r\n        //            function doShadow() {\r\n        //                this.shadowEl.style.display = \"\";\r\n        //                var box = mini.getBox(this.el);\r\n        //                var s = this.shadowEl.style;\r\n        //                s.width = box.width + \"px\";\r\n        //                s.height = box.height + \"px\";\r\n        //                s.left = box.x + \"px\";\r\n        //                s.top = box.y + \"px\";\r\n\r\n        //                var zindex = mini.getStyle(this.el, 'zIndex');\r\n        //                if (!isNaN(zindex)) {\r\n        //                    this.shadowEl.style.zIndex = zindex - 2;\r\n        //                }\r\n        //            }\r\n        //            this.shadowEl.style.display = \"none\";\r\n        //            if (this._doShadowTimer) {\r\n        //                clearTimeout(this._doShadowTimer);\r\n        //                this._doShadowTimer = null;\r\n        //            }\r\n        //            var me = this;\r\n        //            //doShadow.call(me);\r\n        //            this._doShadowTimer = setTimeout(function () {\r\n        //                me._doShadowTimer = null;\r\n        //                doShadow.call(me);\r\n        //            }, 20);\r\n        //        }\r\n    },\r\n    _measureSize: function () {\r\n        this.el.style.display = \"\";\r\n        var box = mini.getBox(this.el);\r\n        //min, max\r\n        if (box.width > this.maxWidth) {\r\n            mini.setWidth(this.el, this.maxWidth);\r\n            box = mini.getBox(this.el);\r\n        }\r\n        if (box.height > this.maxHeight) {\r\n            mini.setHeight(this.el, this.maxHeight);\r\n            box = mini.getBox(this.el);\r\n        }\r\n        if (box.width < this.minWidth) {\r\n            mini.setWidth(this.el, this.minWidth);\r\n            box = mini.getBox(this.el);\r\n        }\r\n        if (box.height < this.minHeight) {\r\n            mini.setHeight(this.el, this.minHeight);\r\n            box = mini.getBox(this.el);\r\n        }\r\n    },\r\n    _getWindowOffset: function (options) {\r\n        return [0, 0];\r\n    },\r\n    showAtEl: function (el, options) {\r\n        \r\n        el = mini.byId(el);\r\n        if (!el) return;\r\n        if (!this.isRender() || this.el.parentNode != document.body) {\r\n            this.render(document.body);\r\n        }\r\n\r\n        var c = {\r\n            atEl: el,\r\n            popupEl: this.el,\r\n            xAlign: this.xAlign,\r\n            yAlign: this.yAlign,\r\n            xOffset: this.xOffset,\r\n            yOffset: this.yOffset,\r\n            popupCls: this.popupCls,\r\n            alwaysView: this.alwaysView\r\n            //outXAlign\r\n            //outYAlign\r\n        };\r\n        mini.copyTo(c, options);\r\n\r\n        mini.addClass(el, c.popupCls);\r\n        el.popupCls = c.popupCls;\r\n        this._popupEl = el;\r\n        \r\n        this.el.style.position = \"absolute\";\r\n        this.el.style.left = \"-2000px\";\r\n        this.el.style.top = \"-2000px\";\r\n        this.el.style.display = \"\";\r\n\r\n        this.doLayout();\r\n        this._measureSize();\r\n\r\n        var vbox = mini.getViewportBox();\r\n        var box = mini.getBox(this.el);\r\n        var pbox = mini.getBox(el);\r\n        var xy = c.xy;\r\n        var h = c.xAlign, v = c.yAlign;\r\n\r\n        var x = vbox.width / 2 - box.width / 2, y = 0;\r\n        if (xy) {\r\n            x = xy[0];\r\n            y = xy[1];\r\n        }\r\n\r\n        switch (c.xAlign) {\r\n            case \"outleft\":\r\n                x = pbox.x - box.width;\r\n                break;\r\n            case \"left\":\r\n                x = pbox.x;\r\n                break;\r\n            case \"center\":\r\n                x = pbox.x + pbox.width / 2 - box.width / 2;\r\n                break;\r\n            case \"right\":\r\n                x = pbox.right - box.width;\r\n                break;\r\n            case \"outright\":\r\n                x = pbox.right;\r\n                break;\r\n            default:\r\n\r\n                break;\r\n        }\r\n\r\n        switch (c.yAlign) {\r\n            case \"above\":\r\n                y = pbox.y - box.height;\r\n                break;\r\n            case \"top\":\r\n                y = pbox.y;\r\n                break;\r\n            case \"middle\":\r\n                y = pbox.y + pbox.height / 2 - box.height / 2;\r\n                break;\r\n            case \"bottom\":\r\n                y = pbox.bottom - box.height;\r\n                break;\r\n            case \"below\":\r\n                y = pbox.bottom;\r\n                break;\r\n            default:\r\n\r\n                break;\r\n        }\r\n        x = parseInt(x);\r\n        y = parseInt(y);\r\n\r\n        var winOffset = this._getWindowOffset(options);\r\n\r\n        if (c.outYAlign || c.outXAlign) {\r\n            if (c.outYAlign == \"above\") {\r\n                if (y + box.height > vbox.bottom) {\r\n                    var top = pbox.y - vbox.y;\r\n                    var bottom = vbox.bottom - pbox.bottom;\r\n                    if (top > bottom) {\r\n                        y = pbox.y - box.height;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (c.outYAlign == \"below\") {\r\n                if (y + box.height > vbox.bottom) {\r\n                    var top = pbox.y - vbox.y;\r\n                    var bottom = vbox.bottom - pbox.bottom;\r\n                    if (top > bottom) {\r\n\r\n                        //y = pbox.y + pbox.height - box.height;        //old\r\n                        y = pbox.y - box.height;                       //fkq fixed!\r\n                    }\r\n                }\r\n\r\n            }\r\n            if (c.outXAlign == \"outleft\") {\r\n                if (x + box.width > vbox.right) {\r\n                    var left = pbox.x - vbox.x;\r\n                    var right = vbox.right - pbox.right;\r\n                    if (left > right) {\r\n                        x = pbox.x - box.width;\r\n                    }\r\n                }\r\n            }\r\n            if (c.outXAlign == \"right\") {\r\n                if (x + box.width > vbox.right) {\r\n                    x = pbox.right - box.width;\r\n                    //                    var right = vbox.right - pbox.right;\r\n                    //                    if (left > right) {\r\n                    //                        x = pbox.x - box.width;\r\n                    //                    }\r\n                }\r\n            }\r\n\r\n            if (c.alwaysView) {\r\n\r\n                if (y < 0) y = 0;\r\n\r\n                if (y + box.height > vbox.bottom) y = vbox.bottom - box.height;\r\n\r\n                if (x < 0) x = 0;\r\n\r\n                if (x + box.width > vbox.right) x = vbox.right - box.width;\r\n            }\r\n\r\n            this._Show(x + winOffset[0], y + winOffset[1]);\r\n        } else {\r\n            this.showAtPos(x + c.xOffset + winOffset[0], y + c.yOffset + winOffset[1]);\r\n        }\r\n    },\r\n    _Show: function (x, y) {\r\n        this.el.style.display = \"\";\r\n        this.el.style.zIndex = mini.getMaxZIndex();\r\n        mini.setX(this.el, x);\r\n        mini.setY(this.el, y);\r\n\r\n        this.setVisible(true);\r\n\r\n        if (this.hideAction == \"mouseout\") {\r\n            mini.on(document, \"mousemove\", this.__OnBodyMouseMove, this);\r\n        }\r\n        var sf = this;\r\n        this._doShadow();\r\n\r\n        this._doModal();\r\n\r\n        //_shim\r\n        this._doShim();\r\n\r\n        mini.layoutIFrames(this.el);\r\n        //mini.repaint(this.el);\r\n        this.isPopup = true;\r\n\r\n        //mini.on(document, \"topmousedown\", this.__OnBodyMouseDown, this);\r\n\r\n        mini.on(document, \"mousedown\", this.__OnBodyMouseDown, this);\r\n        //mini.on(document, \"mousewheel\", this.__OnBodyMouseWheel, this);\r\n        mini.on(window, \"resize\", this.__OnWindowResize, this);\r\n\r\n        this.fire(\"Open\");\r\n    },\r\n    open: function () {\r\n        this.show();\r\n    },\r\n    close: function () {\r\n        this.hide();\r\n    },\r\n    hide: function () {\r\n\r\n        if (!this.el) return;\r\n        if (this.popupEl) mini.removeClass(this.popupEl, this.popupEl.popupCls);\r\n        if (this._popupEl) mini.removeClass(this._popupEl, this._popupEl.popupCls);\r\n        this._popupEl = null;\r\n        jQuery(this._modalEl).remove();\r\n        //jQuery(this.shadowEl).remove();\r\n        if (this.shadowEl) this.shadowEl.style.display = \"none\";\r\n        if (this._shimEl) this._shimEl.style.display = \"none\";\r\n        mini.un(document, \"mousemove\", this.__OnBodyMouseMove, this);\r\n        mini.un(document, \"mousedown\", this.__OnBodyMouseDown, this);\r\n        //mini.un(document, \"topmousedown\", this.__OnBodyMouseDown, this);\r\n        mini.un(window, \"resize\", this.__OnWindowResize, this);\r\n\r\n        this.setVisible(false);\r\n\r\n        this.isPopup = false;\r\n\r\n\r\n        this.fire(\"Close\");\r\n    },\r\n\r\n    setPopupEl: function (el) {\r\n        el = mini.byId(el);\r\n        if (!el) return;\r\n        this._unbindPopupEl();\r\n        this.popupEl = el;\r\n        this._bindPopupEl();\r\n    },\r\n\r\n    setPopupCls: function (value) {\r\n        this.popupCls = value;\r\n    },\r\n    setShowAction: function (value) {\r\n        this.showAction = value;\r\n    },\r\n    setHideAction: function (value) {\r\n        this.hideAction = value;\r\n    },\r\n    setShowDelay: function (value) {\r\n        this.showDelay = value;\r\n    },\r\n    setHideDelay: function (value) {\r\n        this.hideDelay = value;\r\n    },\r\n\r\n    setXAlign: function (value) {\r\n        this.xAlign = value;\r\n    },\r\n    setYAlign: function (value) {\r\n        this.yAlign = value;\r\n    },\r\n    setxOffset: function (value) {\r\n        value = parseInt(value);\r\n        if (isNaN(value)) value = 0;\r\n        this.xOffset = value;\r\n    },\r\n    setyOffset: function (value) {\r\n        value = parseInt(value);\r\n        if (isNaN(value)) value = 0;\r\n        this.yOffset = value;\r\n    },\r\n\r\n    setShowModal: function (value) {\r\n        this.showModal = value;\r\n    },\r\n    setShowShadow: function (value) {\r\n\r\n        this.showShadow = value;\r\n    },\r\n\r\n    setMinWidth: function (value) {\r\n        if (isNaN(value)) return;\r\n        this.minWidth = value;\r\n    },\r\n    setMinHeight: function (value) {\r\n        if (isNaN(value)) return;\r\n        this.minHeight = value;\r\n    },\r\n    setMaxWidth: function (value) {\r\n        if (isNaN(value)) return;\r\n        this.maxWidth = value;\r\n    },\r\n    setMaxHeight: function (value) {\r\n        if (isNaN(value)) return;\r\n        this.maxHeight = value;\r\n    },\r\n\r\n    setAllowDrag: function (value) {\r\n        this.allowDrag = value;\r\n        mini.removeClass(this.el, this._dragCls);\r\n        if (value) {\r\n            mini.addClass(this.el, this._dragCls);\r\n        }\r\n    },\r\n    setAllowResize: function (value) {\r\n        this.allowResize = value;\r\n        mini.removeClass(this.el, this._resizeCls);\r\n        if (value) {\r\n            mini.addClass(this.el, this._resizeCls);\r\n        }\r\n    },\r\n    /////////////////////////////////\r\n\r\n    __OnLeftClick: function (e) {\r\n        if (this._inAniming) return;\r\n        if (this.showAction != \"leftclick\") return;\r\n        var allowPopup = jQuery(this.popupEl).attr(\"allowPopup\");\r\n        if (String(allowPopup) == \"false\") return;\r\n        this.doShow(e);\r\n    },\r\n    __OnRightClick: function (e) {\r\n        if (this._inAniming) return;\r\n        if (this.showAction != \"rightclick\") return;\r\n        var allowPopup = jQuery(this.popupEl).attr(\"allowPopup\");\r\n        if (String(allowPopup) == \"false\") return;\r\n\r\n        e.preventDefault();\r\n        this.doShow(e);\r\n\r\n    },\r\n    __OnMouseOver: function (e) {\r\n        if (this._inAniming) return;\r\n        if (this.showAction != \"mouseover\") return;\r\n        var allowPopup = jQuery(this.popupEl).attr(\"allowPopup\");\r\n        if (String(allowPopup) == \"false\") return;\r\n\r\n        clearTimeout(this._hideTimer);\r\n        this._hideTimer = null;\r\n\r\n\r\n        if (this.isPopup) return;\r\n\r\n\r\n        var sf = this;\r\n        this._showTimer = setTimeout(function () {\r\n            sf.doShow(e);\r\n        }, this.showDelay);\r\n    },\r\n    __OnBodyMouseMove: function (e) {\r\n        if (this.hideAction != \"mouseout\") return;\r\n        this._tryHide(e);\r\n    },\r\n\r\n    __OnBodyMouseDown: function (e) {\r\n        if (this.hideAction != \"outerclick\") return;\r\n        if (!this.isPopup) return;\r\n\r\n        //return;\r\n        if (jQuery(e.target).closest('.mini-popup')[0]) return;\r\n\r\n        if (this.within(e)\r\n        //if (mini.isAncestor(this.el, e.target)\r\n            || (this.popupEl && mini.isAncestor(this.popupEl, e.target))\r\n        ) {\r\n        } else {\r\n            this.doHide(e);\r\n        }\r\n    },\r\n    _tryHide: function (e) {\r\n        if (mini.isAncestor(this.el, e.target)\r\n            || (this.popupEl && mini.isAncestor(this.popupEl, e.target))\r\n        ) {\r\n        } else {\r\n            clearTimeout(this._showTimer);\r\n            this._showTimer = null;\r\n            if (this._hideTimer) return;\r\n\r\n            var sf = this;\r\n            this._hideTimer = setTimeout(function () {\r\n                sf.doHide(e);\r\n            }, this.hideDelay);\r\n\r\n        }\r\n    },\r\n    __OnWindowResize: function (e) {\r\n        if (this.isDisplay() && !mini.isIE6) {\r\n            this._doModal();\r\n        }\r\n    },\r\n    within: function (e) {\r\n        if (mini.isAncestor(this.el, e.target)) return true;\r\n        var controls = mini.getChildControls(this);\r\n\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var c = controls[i];\r\n            //if (mini.isAncestor(c.el, e.target)) return true;\r\n            if (c.within(e)) return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n};\r\n\r\nmini.copyTo(mini.Popup.prototype, mini.Popup_prototype);\r\n\r\n\r\n/////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n//function hideAllPopup() {\r\n//    var jq = $(\".mini-popup, .mini-menu\");\r\n//    jq.each(function () {\r\n//    \r\n//        var popup = mini.get(this);\r\n//        if (popup && popup.visible) popup.hide();\r\n//    });\r\n//}\r\n\r\n//if (hasOn) {\r\n//    var topWin = mini.getTopWindow();\r\n//    if (topWin) {\r\n//        jQuery(topWin.document).on(\"topmousedown\", function (event, doc) {\r\n\r\n//            ///if(location.href.indexOf(\"menubar.html\") != -1) alert(123)\r\n\r\n//            //if(location.href.indexOf(\"menubar\") != -1) debugger\r\n//            //hideAllPopup();\r\n\r\n//            if (doc == document) {\r\n//                //if (location.href.indexOf(\"menubar.html\") != -1) alert(123)\r\n//            } else {\r\n//                //if (location.href.indexOf(\"menubar.html\") != -1) alert(222)\r\n//                jQuery(document).trigger(\"mousedown\");\r\n//            }\r\n//        });\r\n//        jQuery(document).on(\"mousedown\", function (event) {\r\n//            //try{\r\n//            var $ = topWin.jQuery;\r\n//            if ($) {\r\n//                $(topWin.document).trigger(\"topmousedown\", [document]);\r\n//            }\r\n//        });\r\n//    }\r\n\r\n//}\r\n\r\n(function () {\r\nif (hasOn) {\r\n    var topWin = mini.getTopWindow();\r\n    if (topWin) {\r\n        function _topmousedown(event, doc) {\r\n            if (doc == document) {\r\n            } else {\r\n                jQuery(document).trigger(\"mousedown\");\r\n            }\r\n        }\r\n        jQuery(topWin.document).on(\"topmousedown\", _topmousedown);\r\n\r\n        function _mousedown(event) {\r\n            var $ = topWin.jQuery;\r\n            if ($) {\r\n                $(topWin.document).trigger(\"topmousedown\", [document]);\r\n            }\r\n        }\r\n        jQuery(document).on(\"mousedown\", _mousedown);\r\n\r\n\r\n        jQuery(window).on(\"unload\", function () {\r\n            jQuery(topWin.document).off(\"topmousedown\", _topmousedown);\r\n            jQuery(document).off(\"mousedown\", _mousedown);\r\n        });\r\n    }\r\n}\r\n\r\n})();\r\n\n\r\n//mini.Button = mini.Control.extend({\r\n//    type: 'button',\r\n//    tag: '',\r\n//    init: function () {\r\n//        \r\n//    }\r\n//});\r\n\r\nmini.Button = function () {\r\n    \r\n    mini.Button.superclass.constructor.apply(this, arguments);\r\n\r\n}\r\n\r\nmini.extend(mini.Button, mini.Control, {\r\n    //_tagName: \"a\",\r\n\r\n    text: \"\",\r\n    iconCls: \"\",\r\n    iconStyle: \"\",\r\n    plain: false,\r\n\r\n    checkOnClick: false,\r\n    checked: false,\r\n    groupName: \"\",\r\n\r\n    img: \"\",\r\n\r\n    _plainCls: \"mini-button-plain\",\r\n    _hoverCls: \"mini-button-hover\",\r\n    _pressedCls: \"mini-button-pressed\",\r\n    _checkedCls: \"mini-button-checked\",\r\n    _disabledCls: \"mini-button-disabled\",\r\n\r\n    allowCls: \"\",\r\n\r\n    _clearBorder: false,\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        this._allowUpdate = kv.text || kv.iconStyle || kv.iconCls || kv.iconPosition;\r\n\r\n        mini.Button.superclass.set.call(this, kv);\r\n\r\n        if (this._allowUpdate === false) {\r\n            this._allowUpdate = true;\r\n            this.doUpdate();\r\n        }\r\n\r\n        return this;\r\n    },\r\n    uiCls: \"mini-button\",\r\n    _create: function () {\r\n        this.el = document.createElement(\"a\");\r\n\r\n        this.el.className = \"mini-button mini-state-default mini-corner-all\";\r\n        this.el.hideFocus = true;\r\n        this.el.href = \"javascript:void(0)\";\r\n        //this.el.onclick = function () { return false; };\r\n\r\n        this.doUpdate();\r\n    },\r\n    _initEvents: function () {\r\n        mini._BindEvents(function () {\r\n            mini_onOne(this.el, \"mousedown\", this.__OnMouseDown, this);\r\n            mini_onOne(this.el, \"click\", this.__OnClick, this);\r\n\r\n            //            mini.on(this.el, \"mousedown\", this.__OnMouseDown, this);\r\n            //            mini.on(this.el, \"click\", this.__OnClick, this);\r\n\r\n            //            var jq = jQuery(this.el);\r\n            //            jq.hover(function () {\r\n            //                jq.addClass(\"mini-state-hover\");\r\n            //            },\r\n            //            function () {\r\n            //                jq.addClass(\"mini-state-hover\");\r\n            //            });\r\n        }, this);\r\n    },\r\n\r\n    //    init: function () {\r\n    //        var me = this;\r\n    //        if (me.plain) me.setPlain(true);\r\n    //    },\r\n\r\n    destroy: function (removeEl) {\r\n        if (this.el) {\r\n            this.el.onclick = null;\r\n            this.el.onmousedown = null;\r\n        }\r\n        if (this.menu) this.menu.owner = null;\r\n        this.menu = null;\r\n\r\n        //$(this.el).off();\r\n        //$(this.el).remove();\r\n        //this.el = null;\r\n        //        this.destroyed = true;\r\n\r\n        mini.Button.superclass.destroy.call(this, removeEl);\r\n    },\r\n\r\n    doUpdate: function () {\r\n        if (this._allowUpdate === false) return;\r\n        //var jq = jQuery(this.el);\r\n\r\n        var cls = \"\", text = this.text;\r\n        var hasIcon = this.iconStyle || this.iconCls || this.img;\r\n\r\n        if (hasIcon && text) {\r\n            cls = \" mini-button-icon-text \";\r\n        } else if (hasIcon && text === \"\") {\r\n            cls = \" mini-button-icon-only \";\r\n            text = \"&nbsp;\";\r\n        } else {\r\n            if (text == \"\") text = \"&nbsp;\";\r\n        }\r\n\r\n        var iconStyle = this.iconStyle || \"\";\r\n        if (!iconStyle && this.img) iconStyle = 'background-image:url(' + this.img + ')';\r\n\r\n        //icon作为独立span加入到mini-button-text内\r\n        var iconHtml = '';\r\n        if (hasIcon) {\r\n            iconHtml = '<span class=\"mini-button-icon mini-icon mini-iconfont ' + this.iconCls + '\" style=\"' + iconStyle + '\"></span>';\r\n        }\r\n\r\n        //iconHtml = \"\";\r\n\r\n        text = '<span class=\"mini-button-text\">' + text + '</span>';\r\n        var s = '<span class=\"mini-button-inner ' + cls + '\">' + iconHtml + text + '</span>';\r\n        //var s = '<span class=\"mini-button-text ' + cls + '\">' + text + '</span>' + iconHtml;\r\n\r\n        if (this.allowCls) {\r\n            s = s + '<span class=\"mini-button-allow mini-icon ' + this.allowCls + '\"></span>';\r\n        }\r\n        //this.el.innerHTML = '<i></i>' + s;\r\n        this.el.innerHTML = s;\r\n\r\n    },\r\n    href: \"\",\r\n    setHref: function (value) {\r\n        this.href = value;\r\n        this.el.href = value;\r\n        var el = this.el;\r\n        setTimeout(function () {\r\n            el.onclick = null;\r\n        }, 100);\r\n    },\r\n    getHref: function () {\r\n        return this.href;\r\n    },\r\n    target: \"\",\r\n    setTarget: function (value) {\r\n        this.target = value;\r\n        this.el.target = value;\r\n    },\r\n    getTarget: function () {\r\n        return this.target;\r\n    },\r\n    setText: function (value) {\r\n        if (this.text != value) {\r\n            this.text = value;\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    getText: function () {\r\n        return this.text;\r\n    },\r\n    setIconCls: function (value) {\r\n        this.iconCls = value;\r\n        this.doUpdate();\r\n    },\r\n    getIconCls: function () {\r\n        return this.iconCls;\r\n    },\r\n    setIconStyle: function (value) {\r\n        this.iconStyle = value;\r\n        this.doUpdate();\r\n    },\r\n    getIconStyle: function () {\r\n        return this.iconStyle;\r\n    },\r\n\r\n    setImg: function (value) {\r\n        this.img = value;\r\n        this.doUpdate();\r\n    },\r\n    getImg: function () {\r\n        return this.img;\r\n    },\r\n    setIconPosition: function (value) {\r\n        this.iconPosition = \"left\";\r\n        this.doUpdate();\r\n    },\r\n    getIconPosition: function () {\r\n        return this.iconPosition;\r\n    },\r\n\r\n    setPlain: function (value) {\r\n        this.plain = value;\r\n        if (value) this.addCls(this._plainCls);\r\n        else this.removeCls(this._plainCls);\r\n    },\r\n    getPlain: function () {\r\n        return this.plain;\r\n    },\r\n    setGroupName: function (value) {\r\n        this.groupName = value;\r\n    },\r\n    getGroupName: function () {\r\n        return this.groupName;\r\n    },\r\n    setCheckOnClick: function (value) {\r\n        this.checkOnClick = value;\r\n    },\r\n    getCheckOnClick: function () {\r\n        return this.checkOnClick;\r\n    },\r\n    setChecked: function (value) {\r\n\r\n        var fire = this.checked != value;\r\n        this.checked = value;\r\n        if (value) this.addCls(this._checkedCls);\r\n        else this.removeCls(this._checkedCls);\r\n        if (fire) {\r\n            this.fire(\"CheckedChanged\");\r\n        }\r\n    },\r\n    getChecked: function () {\r\n        return this.checked;\r\n    },\r\n    doClick: function () {\r\n        this.__OnClick(null);\r\n    },\r\n    /////////////////////////\r\n    __OnClick: function (e) {\r\n        if (!this.href && e) {\r\n            e.preventDefault();\r\n        }\r\n        if (this.readOnly || this.enabled == false) return;\r\n        this.focus();\r\n        if (this.checkOnClick) {\r\n            if (this.groupName) {\r\n                var groupName = this.groupName;\r\n                var buttons = mini.findControls(function (control) {\r\n                    if (control.type == \"button\" && control.groupName == groupName) return true;\r\n                });\r\n                if (buttons.length > 0) {\r\n                    for (var i = 0, l = buttons.length; i < l; i++) {\r\n                        var button = buttons[i];\r\n                        if (button != this) button.setChecked(false);\r\n                    }\r\n                    this.setChecked(true);\r\n                } else {\r\n                    this.setChecked(!this.checked);\r\n                }\r\n            } else {\r\n                this.setChecked(!this.checked);\r\n            }\r\n        }\r\n\r\n        this.fire(\"click\", {\r\n            htmlEvent: e\r\n        });\r\n        //return false;\r\n    },\r\n    __OnMouseDown: function (e) {\r\n        if (this.isReadOnly()) return;\r\n\r\n        this.addCls(this._pressedCls);\r\n        mini.on(document, \"mouseup\", this.__OnDocMouseUp, this);\r\n    },\r\n    __OnDocMouseUp: function (e) {\r\n        this.removeCls(this._pressedCls);\r\n        mini.un(document, \"mouseup\", this.__OnDocMouseUp, this);\r\n    },\r\n    onClick: function (fn, scope) {\r\n        this.on(\"click\", fn, scope);\r\n    },\r\n    ////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Button.superclass.getAttrs.call(this, el);\r\n        //return attrs;\r\n        attrs.text = el.innerHTML;\r\n        mini._ParseString(el, attrs,\r\n            [\"text\", \"href\", \"iconCls\", \"iconStyle\", \"iconPosition\", \"groupName\", \"menu\",\r\n                \"onclick\", \"oncheckedchanged\", \"target\", \"img\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"plain\", \"checkOnClick\", \"checked\"\r\n             ]\r\n        );\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.Button, \"button\");\r\n\r\n/* MenuButton \r\n-----------------------------------------------------------------------------*/\r\n\r\nmini.MenuButton = function () {\r\n\r\n    mini.MenuButton.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.MenuButton, mini.Button, {\r\n    uiCls: \"mini-menubutton\",\r\n    allowCls: \"mini-button-menu\",\r\n    setMenu: function (value) {\r\n\r\n        if (mini.isArray(value)) {\r\n            value = {\r\n                type: \"menu\",\r\n                items: value\r\n            };\r\n        }\r\n        if (typeof value == \"string\") {\r\n            var el = mini.byId(value);\r\n            if (!el) return;\r\n\r\n            mini.parse(value);\r\n            value = mini.get(value);\r\n        }\r\n\r\n        if (this.menu !== value) {\r\n            this.menu = mini.getAndCreate(value);\r\n            this.menu.setPopupEl(this.el);\r\n            this.menu.setPopupCls(\"mini-button-popup\");\r\n            this.menu.setShowAction(\"leftclick\");\r\n            this.menu.setHideAction(\"outerclick\");\r\n            this.menu.setXAlign(\"left\");\r\n            this.menu.setYAlign(\"below\");\r\n\r\n            this.menu.hide();\r\n            this.menu.owner = this;\r\n\r\n            this.menu.addCls(\"mini-menu-open\");\r\n\r\n            var me = this;\r\n            this.menu.on(\"BeforeOpen\", function (e) {     \r\n                       \r\n                if (me.split && !jQuery(e.htmlEvent.target).closest('.mini-button-split')[0]) {\r\n                    e.cancel = true;\r\n                }\r\n            });\r\n        }\r\n    },\r\n    setEnabled: function (value) {\r\n        this.enabled = value;\r\n        if (value) {\r\n            this.removeCls(this._disabledCls);\r\n        } else {\r\n            this.addCls(this._disabledCls);\r\n        }\r\n        //this.el.allowPopup = !!value;\r\n        jQuery(this.el).attr(\"allowPopup\", !!value)\r\n    }\r\n});\r\nmini.regClass(mini.MenuButton, \"menubutton\");\r\n\r\n/* SplitButton \r\n-----------------------------------------------------------------------------*/\r\n\r\nmini.SplitButton = function () {\r\n    mini.SplitButton.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.SplitButton, mini.MenuButton, {\r\n    split: true,\r\n    uiCls: \"mini-splitbutton\",\r\n    allowCls: \"mini-button-split\",\r\n\r\n    __OnClick: function (e) {\r\n        var me = this;\r\n        if (me.split && jQuery(e.target).closest('.mini-button-split')[0]) {\r\n            return;\r\n        }\r\n        mini.SplitButton.superclass.__OnClick.call(this, e);\r\n    }\r\n});\r\nmini.regClass(mini.SplitButton, \"splitbutton\");\n\r\nmini.CheckBox = function () {\r\n    mini.CheckBox.superclass.constructor.apply(this, arguments);\r\n\r\n}\r\nmini.extend(mini.CheckBox, mini.Control, {\r\n    formField: true,\r\n    _clearText: false, //form.reset/clear的时候，是否自动清除文本\r\n\r\n    text: \"\",\r\n    checked: false,\r\n    defaultValue: false,\r\n\r\n    trueValue: true,\r\n    falseValue: false,\r\n\r\n    checkedCls: \"mini-checkbox-checked\",\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n        var me = this;\r\n\r\n        if (!mini.isNull(kv.trueValue)) {\r\n            me.setTrueValue(kv.trueValue);\r\n            delete kv.trueValue;\r\n        }\r\n        if (!mini.isNull(kv.falseValue)) {\r\n            me.setFalseValue(kv.falseValue);\r\n            delete kv.falseValue;\r\n        }\r\n\r\n        mini.CheckBox.superclass.set.call(this, kv);\r\n\r\n\r\n        return this;\r\n    },\r\n\r\n    uiCls: \"mini-checkbox\",\r\n    _create: function () {\r\n        var ckid = this.uid + \"$check\";\r\n        this.el = document.createElement(\"span\");\r\n        //this.el.tabIndex = 0;\r\n        this.el.className = \"mini-checkbox\";\r\n        this.el.innerHTML = '<input id=\"' + ckid + '\" name=\"' + this.id + '\" type=\"checkbox\" class=\"mini-checkbox-check\"><span class=\"mini-checkbox-icon mini-icon\" tabIndex=\"0\"></span><label for=\"' + ckid + '\" onclick=\"return false;\">' + this.text + '</label>';\r\n\r\n        this._checkEl = this.el.firstChild;\r\n        this._labelEl = this.el.lastChild;\r\n        //this._iconEl = this.el.childNodes[1];\r\n    },\r\n    destroy: function (removeEl) {\r\n        if (this._checkEl) {\r\n            this._checkEl.onmouseup = null;\r\n            this._checkEl.onclick = null;\r\n            this._checkEl = null;\r\n        }\r\n        mini.CheckBox.superclass.destroy.call(this, removeEl);\r\n    },\r\n    _initEvents: function () {\r\n        mini._BindEvents(function () {\r\n            mini.on(this.el, \"click\", this.__onClick, this);\r\n\r\n            var me = this;\r\n            mini.on(this.el, \"keyup\", function (event) {\r\n                if (event.keyCode == 32) {\r\n                    jQuery(event.target).click();\r\n                }\r\n            });\r\n\r\n            this._checkEl.onmouseup = function () { return false; }\r\n            var sf = this;\r\n            this._checkEl.onclick = function () { if (sf.isReadOnly()) return false }\r\n\r\n            this._checkEl.checked = this.checked;\r\n\r\n        }, this);\r\n\r\n    },\r\n    setName: function (value) {\r\n        this.name = value;\r\n        mini.setAttr(this._checkEl, \"name\", this.name);\r\n    },\r\n    setText: function (value) {\r\n        if (this.text !== value) {\r\n            this.text = value;\r\n\r\n            this._labelEl.innerHTML = value;\r\n        }\r\n    },\r\n    getText: function () {\r\n        return this.text;\r\n    },\r\n    setChecked: function (value) {\r\n        if (value === true) value = true;\r\n        //else if (value === this.trueValue) value = true;\r\n        else if (String(value) == String(this.trueValue)) value = true;\r\n        else if (value == \"true\") value = true;\r\n        else if (value == \"True\") value = true;\r\n        else if (String(value) === \"1\") value = true;\r\n        else if (value == \"Y\") value = true;\r\n        else value = false;\r\n\r\n        if (this.checked !== value) {\r\n            this.checked = !!value;\r\n            this._checkEl.checked = this.checked;\r\n\r\n            this.value = this.getValue();\r\n        }\r\n\r\n        var el = jQuery(this.el);\r\n        if (this.checked) {\r\n            el.addClass(this.checkedCls);\r\n        } else {\r\n            el.removeClass(this.checkedCls);\r\n        }\r\n\r\n    },\r\n    getChecked: function () {\r\n        return this.checked;\r\n    },\r\n    setValue: function (value) {\r\n\r\n        if (this.checked !== value) {\r\n            this.setChecked(value);\r\n            this.value = this.getValue();\r\n        }\r\n    },\r\n    getValue: function () {\r\n        return String(this.checked == true ? this.trueValue : this.falseValue);\r\n    },\r\n    getFormValue: function () {\r\n        return this.getValue();\r\n    },\r\n    setTrueValue: function (value) {\r\n        this._checkEl.value = value;\r\n        this.trueValue = value;\r\n    },\r\n    getTrueValue: function () {\r\n        return this.trueValue;\r\n    },\r\n    setFalseValue: function (value) {\r\n        this.falseValue = value;\r\n    },\r\n    getFalseValue: function () {\r\n        return this.falseValue;\r\n    },\r\n    /////////////////////////////\r\n    __onClick: function (e) {\r\n\r\n        if (this.isReadOnly()) return;\r\n\r\n        this.setChecked(!this.checked);\r\n\r\n        this.fire(\"checkedchanged\", { checked: this.checked });\r\n        this.fire(\"valuechanged\", { value: this.getValue() });\r\n\r\n        this.fire(\"click\", e, this);\r\n\r\n    },\r\n    ////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.CheckBox.superclass.getAttrs.call(this, el);\r\n        var jq = jQuery(el);\r\n\r\n        attrs.text = el.innerHTML;\r\n        mini._ParseString(el, attrs,\r\n            [\"text\", \"oncheckedchanged\", \"onclick\", \"onvaluechanged\"\r\n             ]\r\n        );\r\n\r\n        mini._ParseBool(el, attrs,\r\n            [\"enabled\"\r\n             ]\r\n        );\r\n\r\n        var checked = mini.getAttr(el, \"checked\");\r\n\r\n        if (checked) {\r\n            attrs.checked = (checked == \"true\" || checked == \"checked\") ? true : false;\r\n        }\r\n\r\n        var trueValue = jq.attr(\"trueValue\");\r\n        if (trueValue) {\r\n            attrs.trueValue = trueValue;\r\n            trueValue = parseInt(trueValue);\r\n            if (!isNaN(trueValue)) {\r\n                attrs.trueValue = trueValue;\r\n            }\r\n        }\r\n        var falseValue = jq.attr(\"falseValue\");\r\n        if (falseValue) {\r\n            attrs.falseValue = falseValue;\r\n            falseValue = parseInt(falseValue);\r\n            if (!isNaN(falseValue)) {\r\n                attrs.falseValue = falseValue;\r\n            }\r\n        }\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.CheckBox, \"checkbox\");\n\r\n//fix： 360 用户名、密码打开页面时重置BUG\r\njQuery(function () {\r\n    setTimeout(function () {\r\n        var comps = mini.getComponents();\r\n        for (var i = 0, l = comps.length; i < l; i++) {\r\n            var comp = comps[i];\r\n            if (comp instanceof mini.TextBox) {\r\n                var val = comp.getTextEl().value;\r\n                if (comp.value !== val) {\r\n                    comp.value = val;\r\n                }\r\n            }\r\n        }\r\n    }, 300);\r\n});\r\n\r\nmini.TextBox = function () {\r\n    mini.TextBox.superclass.constructor.apply(this, arguments);\r\n\r\n    //this._textEl.maxLenght = this.maxLength;\r\n}\r\nmini.extend(mini.TextBox, mini.ValidatorBase, {\r\n    name: \"\",\r\n    formField: true,\r\n\r\n    selectOnFocus: false,\r\n\r\n    allowInput: true,\r\n\r\n    minWidth: 10,\r\n    minHeight: 15,\r\n\r\n    maxLength: 5000,\r\n\r\n    emptyText: \"\",\r\n\r\n    text: \"\",\r\n    value: \"\",\r\n    defaultValue: \"\",\r\n\r\n    //width: 125,\r\n    height: 21,\r\n\r\n    _emptyCls: \"mini-textbox-empty\",\r\n    _focusCls: \"mini-textbox-focus\",\r\n    _disabledCls: \"mini-textbox-disabled\",\r\n\r\n    uiCls: \"mini-textbox\",\r\n    _InputType: \"text\",\r\n    _create: function () {\r\n        var html = '<input  type=\"' + this._InputType + '\" class=\"mini-textbox-input\" autocomplete=\"off\"/>';\r\n        if (this._InputType == \"textarea\") {\r\n            html = '<textarea  class=\"mini-textbox-input\" autocomplete=\"off\"/></textarea>';\r\n        }\r\n        html = '<span class=\"mini-textbox-border mini-corner-all\">' + html + '</span>';\r\n        html += '<input type=\"hidden\"/>';\r\n\r\n        this.el = document.createElement(\"span\");\r\n        this.el.className = \"mini-textbox\";\r\n        this.el.innerHTML = html;\r\n\r\n\r\n        this._borderEl = this.el.firstChild;\r\n        this._textEl = this._borderEl.firstChild;\r\n        this._valueEl = this._borderEl.lastChild;\r\n\r\n        //        var me = this;\r\n        //        //alert(me._textEl.value);\r\n        //        setTimeout(function () {\r\n        //            alert(me._textEl.value);\r\n        //        }, 1);\r\n\r\n        //        me._textEl.value = \"\";\r\n        this._doEmpty();\r\n\r\n        //        $(this.el).on(\"click\", function () {\r\n        //            this.fire(\"aaa\");\r\n        //        });\r\n\r\n        //        $(this.el).find(\".mini-textbox-input\").on(\"blur\", function (event) {\r\n        //            this.value = this.value.replace(/[0-9]+/g, '');\r\n        //        });\r\n    },\r\n    _initEvents: function () {\r\n\r\n        mini._BindEvents(function () {\r\n\r\n            mini_onOne(this._textEl, \"drop\", this.__OnDropText, this);\r\n            mini_onOne(this._textEl, \"change\", this.__OnInputTextChanged, this);\r\n            mini_onOne(this._textEl, \"focus\", this.__OnFocus, this);\r\n            mini_onOne(this.el, \"mousedown\", this.__OnMouseDown, this);\r\n\r\n            //                        mini.on(this._textEl, \"drop\", this.__OnDropText, this);\r\n            //                        mini.on(this._textEl, \"change\", this.__OnInputTextChanged, this);\r\n            //                        mini.on(this._textEl, \"focus\", this.__OnFocus, this);\r\n            //                        mini.on(this.el, \"mousedown\", this.__OnMouseDown, this);\r\n\r\n            var v = this.value;\r\n            this.value = null;\r\n            if (this.el) {\r\n                this.setValue(v);\r\n            }\r\n\r\n\r\n        }, this);\r\n        this.on(\"validation\", this.__OnValidation, this); //一定要放这里\r\n    },\r\n    _inputEventsInited: false,\r\n    _initInputEvents: function () {\r\n        if (this._inputEventsInited) return;\r\n        this._inputEventsInited = true;\r\n\r\n        //出于优化考虑：将blur, change, keydown, keyup, keypress等时间，在focus的时候，才进行绑定\r\n        //在_initEvents的时候，只绑定focus就可以了\r\n        mini.on(this._textEl, \"blur\", this.__OnBlur, this);\r\n        mini.on(this._textEl, \"keydown\", this.__OnInputKeyDown, this);\r\n        mini.on(this._textEl, \"keyup\", this.__OnInputKeyUp, this);\r\n        mini.on(this._textEl, \"keypress\", this.__OnInputKeyPress, this);\r\n\r\n        mini_onOne(this.el, \"click\", this.__OnClick, this);\r\n    },\r\n    destroy: function (removeEl) {\r\n        if (this.el) {\r\n\r\n            this.el.onmousedown = null;\r\n        }\r\n        if (this._textEl) {\r\n            var textEl = this._textEl;\r\n\r\n            if (textEl._placeholder_label) {\r\n                textEl._placeholder_label.onmousedown = null;\r\n                textEl._placeholder_label = null;\r\n            }\r\n\r\n            textEl.onpropertychange = textEl.ondrop = textEl.onchange = textEl.onfocus = null;\r\n            mini.clearEvent(textEl);\r\n            this._textEl = null;\r\n        }\r\n        if (this._valueEl) {\r\n            mini.clearEvent(this._valueEl);\r\n            this._valueEl = null;\r\n        }\r\n        mini.TextBox.superclass.destroy.call(this, removeEl);\r\n    },\r\n\r\n    doLayout: function () {\r\n        if (this._doLabelLayout) {\r\n            this._labelLayout();\r\n        }\r\n    },\r\n\r\n    setHeight: function (value) {\r\n        if (parseInt(value) == value) value += \"px\";\r\n        this.height = value;\r\n        if (this._InputType == \"textarea\") {\r\n            this.el.style.height = value;\r\n            this.doLayout();\r\n        }\r\n    },\r\n\r\n    setName: function (value) {\r\n        if (this.name != value) {\r\n            this.name = value;\r\n            //this._valueEl.name = value;\r\n            if (this._valueEl) mini.setAttr(this._valueEl, \"name\", this.name);\r\n        }\r\n    },\r\n    setValue: function (value) {\r\n        if (value === null || value === undefined) value = \"\";\r\n        value = String(value);\r\n        if (value.length > this.maxLength) {\r\n            value = value.substring(0, this.maxLength);\r\n        }\r\n        //if (this.value !== value) {\r\n        this.value = value;\r\n        this._valueEl.value = this._textEl.value = value;\r\n        this._doEmpty();\r\n        //}\r\n        //        else {\r\n        //            this._textEl.value = value;\r\n        //        }\r\n    },\r\n    getValue: function () {\r\n        //return this._textEl.value;\r\n        return this.value;\r\n    },\r\n    setText: function (val) {\r\n        if (mini.isNull(val)) val = \"\";\r\n        this._textEl.value = val;\r\n    },\r\n    getText: function () {\r\n        return this._textEl.value;\r\n    },\r\n    getFormValue: function () {\r\n        var value = this.value;\r\n        if (value === null || value === undefined) value = \"\";\r\n        return String(value);\r\n    },\r\n    setAllowInput: function (value) {\r\n        if (this.allowInput != value) {\r\n            this.allowInput = value;\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    getAllowInput: function () {\r\n        return this.allowInput;\r\n    },\r\n    _placeholdered: false,\r\n    _doEmpty: function () {\r\n        this._textEl.placeholder = this.emptyText;\r\n        if (this.emptyText) {\r\n            mini._placeholder(this._textEl);\r\n        }\r\n\r\n        //        if (this._focused) return;\r\n        //        if (this.value == \"\" && this.emptyText) {\r\n        //            this._textEl.value = this.emptyText;\r\n        //            mini.addClass(this.el, this._emptyCls);\r\n        //        } else {\r\n        //            mini.removeClass(this.el, this._emptyCls);\r\n        //        }\r\n    },\r\n    setEmptyText: function (value) {\r\n        if (this.emptyText != value) {\r\n            this.emptyText = value;\r\n            this._doEmpty();\r\n        }\r\n    },\r\n    getEmptyText: function () {\r\n        return this.emptyText;\r\n    },\r\n    setMaxLength: function (value) {\r\n\r\n        this.maxLength = value;\r\n        //\r\n        mini.setAttr(this._textEl, \"maxLength\", value);\r\n\r\n        if (this._InputType == \"textarea\" && mini.isIE) {\r\n            mini.on(this._textEl, \"keyup\", this.__OnMaxLengthKeyUp, this);\r\n            mini.on(this._textEl, \"keypress\", this.__OnMaxLengthKeyUp, this);\r\n            mini.on(this._textEl, \"paste\", this.__OnPaste, this);\r\n        }\r\n    },\r\n    __OnPaste: function (e) {\r\n        var sf = this;\r\n\r\n        setTimeout(function () {\r\n\r\n            var value = sf._textEl.value;\r\n            if (value.length > sf.maxLength) {\r\n                sf._textEl.value = value.substring(0, sf.maxLength);\r\n\r\n            }\r\n            //sf._OnValueChanged();\r\n\r\n            sf.__OnInputTextChanged();\r\n\r\n        }, 0)\r\n    },\r\n    __OnMaxLengthKeyUp: function (e) {\r\n\r\n        if (this._textEl.value.length >= this.maxLength) {\r\n\r\n            this.__OnPaste(e);\r\n            e.preventDefault();\r\n\r\n        }\r\n    },\r\n    getMaxLength: function () {\r\n        return this.maxLength;\r\n    },\r\n    setReadOnly: function (value) {\r\n        if (this.readOnly != value) {\r\n            this.readOnly = value;\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    setEnabled: function (value) {\r\n        if (this.enabled != value) {\r\n            this.enabled = value;\r\n            this.doUpdate();\r\n            //this._tryValidate();\r\n        }\r\n    },\r\n    doUpdate: function () {\r\n        if (this.enabled) {\r\n            this.removeCls(this._disabledCls);\r\n        } else {\r\n            this.addCls(this._disabledCls);\r\n        }\r\n        if (this.isReadOnly() || this.allowInput == false) {\r\n            this._textEl.readOnly = true;\r\n            mini.addClass(this.el, \"mini-textbox-readOnly\");\r\n        } else {\r\n\r\n            this._textEl.readOnly = false;\r\n            mini.removeClass(this.el, \"mini-textbox-readOnly\");\r\n        }\r\n        if (this.required) {\r\n            this.addCls(this._requiredCls);\r\n        } else {\r\n            this.removeCls(this._requiredCls);\r\n        }\r\n\r\n        if (this.enabled) {\r\n            this._textEl.disabled = false;\r\n        } else {\r\n            this._textEl.disabled = true;\r\n        }\r\n    },\r\n    focus: function () {\r\n\r\n        var that = this;\r\n        setTimeout(function () {\r\n            try {\r\n                that._textEl.focus();\r\n\r\n                if (mini.isIE) {\r\n                    var o = that._textEl.createTextRange();\r\n                    o.collapse(false);\r\n                    o.select();\r\n                }\r\n            } catch (e) {\r\n            }\r\n        }, 10);\r\n    },\r\n    blur: function () {\r\n        try {\r\n            this._textEl.blur();\r\n        } catch (e) {\r\n        }\r\n    },\r\n    selectText: function () {\r\n\r\n        var me = this;\r\n        function doSelect() {\r\n            try {\r\n                me._textEl.select();\r\n            } catch (ex) { }\r\n        }\r\n        doSelect();\r\n        //        setTimeout(function () {\r\n        //            doSelect();\r\n        //        }, 30);\r\n    },\r\n    getTextEl: function () {\r\n        return this._textEl;\r\n    },\r\n    getInputText: function () {\r\n        return this._textEl.value;\r\n    },\r\n    setSelectOnFocus: function (value) {\r\n        this.selectOnFocus = value;\r\n    },\r\n    getSelectOnFocus: function (value) {\r\n        return this.selectOnFocus;\r\n    },\r\n    ///////////////////////////////////////////////\r\n    _errorIconEl: null,\r\n    getErrorIconEl: function () {\r\n        if (!this._errorIconEl) {\r\n            this._errorIconEl = mini.append(this.el, '<span class=\"mini-errorIcon\"></span>');\r\n        }\r\n        return this._errorIconEl;\r\n    },\r\n    _RemoveErrorIcon: function () {\r\n        if (this._errorIconEl) {\r\n            var el = this._errorIconEl;\r\n            jQuery(el).remove();\r\n        }\r\n        this._errorIconEl = null;\r\n    },\r\n    ///////////////////////////////////////////////\r\n    __OnClick: function (e) {\r\n        if (!this.enabled) return;\r\n        this.fire(\"click\", { htmlEvent: e });\r\n    },\r\n    __OnMouseDown: function (e) {\r\n\r\n        var sf = this;\r\n\r\n        //加这行代码\r\n        if (this._InputType == \"textarea\") return;\r\n\r\n        if (!mini.isAncestor(this._textEl, e.target)) {\r\n            setTimeout(function () {\r\n                sf.focus();\r\n                mini.selectRange(sf._textEl, 10000, 10000);\r\n            }, 1);\r\n        } else {\r\n            setTimeout(function () {\r\n                try {\r\n                    sf._textEl.focus();\r\n                } catch (ex) { }\r\n            }, 1);\r\n        }\r\n    },\r\n    __OnInputTextChanged: function (e, valid) {\r\n        //this._inputChangedTime = new Date();\r\n\r\n        var value = this.value;\r\n        this._oldValue = value;\r\n        this.setValue(this._textEl.value);\r\n\r\n        if (value !== this.getValue() || valid === true) {\r\n            this._OnValueChanged();\r\n        }\r\n    },\r\n    __OnDropText: function (e) {\r\n        var me = this;\r\n        setTimeout(function () {\r\n            me.__OnInputTextChanged(e);\r\n        }, 0);\r\n    },\r\n    __OnInputKeyDown: function (e) {\r\n        var ex = { htmlEvent: e };\r\n        this.fire(\"keydown\", ex);\r\n\r\n        if (e.keyCode == 8 && (this.isReadOnly() || this.allowInput == false)) {\r\n            return false;\r\n        }\r\n        if (e.keyCode == 27 || e.keyCode == 13 || e.keyCode == 9) {\r\n            //if (e.keyCode == 13 || e.keyCode == 9) {\r\n            if (this._InputType == \"textarea\" && e.keyCode == 13) {    //不影响textarea换行\r\n            }\r\n            else {\r\n                //this.__OnInputTextChanged(null, true);\r\n                this.__OnInputTextChanged(null);\r\n\r\n                this._textEl.blur();\r\n                this._textEl.focus();\r\n\r\n                if (e.keyCode == 13) {\r\n                    //e.preventDefault();\r\n\r\n                    var me = this;\r\n                    //setTimeout(function () {\r\n                    me.fire(\"enter\", ex);\r\n                    //}, 10);\r\n                }\r\n            }\r\n\r\n        }\r\n        if (e.keyCode == 27) {\r\n            e.preventDefault();\r\n        }\r\n        //        if (e.keyCode == 13 && this._InputType == \"textarea\") {\r\n        //            if (e.ctrlKey == false) {\r\n        //                e.stopPropagation();\r\n        //            } else {\r\n        //                this.__OnInputTextChanged();\r\n        //            }\r\n        //        }\r\n    },\r\n    __OnInputKeyUp: function (e) {\r\n\r\n        this.fire(\"keyup\", { htmlEvent: e });\r\n    },\r\n    __OnInputKeyPress: function (e) {\r\n        this.fire(\"keypress\", { htmlEvent: e });\r\n    },\r\n    __OnFocus: function (e) {\r\n        //e.preventDefault();\r\n        this.doUpdate();\r\n        //if (this.isReadOnly() || this.allowInput == false) return;        \r\n        if (this.isReadOnly()) {\r\n            return;\r\n        }\r\n        this._focused = true;\r\n        this.addCls(this._focusCls);\r\n        this._initInputEvents();\r\n\r\n        //        mini.removeClass(this.el, this._emptyCls);\r\n        //        if (this.emptyText && this._textEl.value == this.emptyText) {\r\n        //            this._textEl.value = \"\";\r\n        //            this._textEl.select();\r\n        //        }\r\n\r\n        if (this.selectOnFocus) {\r\n            var me = this;\r\n            setTimeout(function () {\r\n                me.selectText();\r\n            }, 1);\r\n        }\r\n\r\n        this.fire(\"focus\", { htmlEvent: e });\r\n    },\r\n    __OnBlur: function (e) {\r\n        this._focused = false;\r\n        var sf = this;\r\n        setTimeout(function () {\r\n            if (sf._focused == false) {\r\n                sf.removeCls(sf._focusCls);\r\n            }\r\n        }, 2);\r\n\r\n        //        if (this.emptyText && this._textEl.value == \"\") {\r\n        //            this._textEl.value = this.emptyText;\r\n        //            mini.addClass(this.el, this._emptyCls);\r\n        //        }\r\n\r\n        //        if (!this._inputChangedTime || new Date() - this._inputChangedTime < 50) {\r\n        //            this.__OnInputTextChanged();\r\n        //        }\r\n        //        this._inputChangedTime = null;\r\n\r\n        this.fire(\"blur\", { htmlEvent: e });\r\n\r\n\r\n        if (this.validateOnLeave && this.isEditable()) {\r\n            this._tryValidate();\r\n        }\r\n    },\r\n    inputStyle: \"\",\r\n    setInputStyle: function (value) {\r\n        this.inputStyle = value;\r\n        mini.setStyle(this._textEl, value);\r\n    },\r\n    ///////////////////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.TextBox.superclass.getAttrs.call(this, el);\r\n        var jq = jQuery(el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"value\", \"text\", \"emptyText\", \"inputStyle\",\r\n            \"onenter\", \"onkeydown\", \"onkeyup\", \"onkeypress\", \"onclick\",\r\n            \"maxLengthErrorText\", \"minLengthErrorText\", \"onfocus\", \"onblur\",\r\n\r\n            \"vtype\",\r\n            \"emailErrorText\", \"urlErrorText\", \"floatErrorText\", \"intErrorText\", \"dateErrorText\",\r\n            \"minErrorText\", \"maxErrorText\", \"rangeLengthErrorText\", \"rangeErrorText\", \"rangeCharErrorText\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"allowInput\", \"selectOnFocus\"\r\n             ]\r\n        );\r\n        mini._ParseInt(el, attrs,\r\n            [\"maxLength\", \"minLength\", \"minHeight\", \"minWidth\"\r\n             ]\r\n        );\r\n\r\n        //alert(attrs.maxLength);\r\n\r\n\r\n\r\n        return attrs;\r\n    },\r\n    ///////////////////////////////////////\r\n    vtype: \"\",  //email;url;float;int;date:yyyy-MM-dd;max:20,min:10,maxLength:100,minLength:5;rangeLength:0,5;range:0,5\r\n    setVtype: function (value) {\r\n        this.vtype = value;\r\n    },\r\n    getVtype: function () {\r\n        return this.vtype;\r\n    },\r\n    __OnValidation: function (e) {\r\n\r\n        if (e.isValid == false) return;\r\n\r\n        mini._ValidateVType(this.vtype, e.value, e, this);\r\n        //        var vtypes = this.vtype.split(\";\");\r\n        //        for (var i = 0, l = vtypes.length; i < l; i++) {\r\n        //            var vtype = vtypes[i].trim();\r\n        //            var vv = vtype.split(\":\");\r\n        //            var vt = vv[0];\r\n        //            var args = vv[1];\r\n        //            if (args) args = args.split(\",\");\r\n        //            else args = [];\r\n\r\n        //            var fn = mini.VTypes[vt]; //this[\"__\" + vt];\r\n        //            if (fn) {\r\n        //                var isValid = fn(e.value, args);\r\n        //                if (isValid !== true) {\r\n        //                    e.isValid = false;\r\n        //                    var vtext = vv[0] + \"ErrorText\";\r\n        //                    e.errorText = this[vtext] || mini.VTypes[vtext] || \"\";\r\n        //                    e.errorText = String.format(e.errorText, args[0], args[1], args[2], args[3], args[4]);\r\n        //                    break;\r\n        //                }\r\n        //            }\r\n        //        }\r\n    },\r\n    setEmailErrorText: function (value) {\r\n        this.emailErrorText = value;\r\n    },\r\n    getEmailErrorText: function () {\r\n        return this.emailErrorText;\r\n    },\r\n    setUrlErrorText: function (value) {\r\n        this.urlErrorText = value;\r\n    },\r\n    getUrlErrorText: function () {\r\n        return this.urlErrorText;\r\n    },\r\n    setFloatErrorText: function (value) {\r\n        this.floatErrorText = value;\r\n    },\r\n    getFloatErrorText: function () {\r\n        return this.floatErrorText;\r\n    },\r\n    setIntErrorText: function (value) {\r\n        this.intErrorText = value;\r\n    },\r\n    getIntErrorText: function () {\r\n        return this.intErrorText;\r\n    },\r\n    setDateErrorText: function (value) {\r\n        this.dateErrorText = value;\r\n    },\r\n    getDateErrorText: function () {\r\n        return this.dateErrorText;\r\n    },\r\n    setMaxLengthErrorText: function (value) {\r\n        this.maxLengthErrorText = value;\r\n    },\r\n    getMaxLengthErrorText: function () {\r\n        return this.maxLengthErrorText;\r\n    },\r\n    setMinLengthErrorText: function (value) {\r\n        this.minLengthErrorText = value;\r\n    },\r\n    getMinLengthErrorText: function () {\r\n        return this.minLengthErrorText;\r\n    },\r\n    setMaxErrorText: function (value) {\r\n        this.maxErrorText = value;\r\n    },\r\n    getMaxErrorText: function () {\r\n        return this.maxErrorText;\r\n    },\r\n    setMinErrorText: function (value) {\r\n        this.minErrorText = value;\r\n    },\r\n    getMinErrorText: function () {\r\n        return this.minErrorText;\r\n    },\r\n    setRangeLengthErrorText: function (value) {\r\n        this.rangeLengthErrorText = value;\r\n    },\r\n    getRangeLengthErrorText: function () {\r\n        return this.rangeLengthErrorText;\r\n    },\r\n    setRangeCharErrorText: function (value) {\r\n        this.rangeCharErrorText = value;\r\n    },\r\n    getRangeCharErrorText: function () {\r\n        return this.rangeCharErrorText;\r\n    },\r\n    setRangeErrorText: function (value) {\r\n        this.rangeErrorText = value;\r\n    },\r\n    getRangeErrorText: function () {\r\n        return this.rangeErrorText;\r\n    }\r\n\r\n});\r\n\r\nmini.regClass(mini.TextBox, 'textbox');\r\n\r\n\r\nmini.Password = function () {\r\n    mini.Password.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.Password, mini.TextBox, {\r\n    uiCls: \"mini-password\",\r\n    _InputType: \"password\",\r\n//    setEmptyText: function (value) {\r\n//        this.emptyText = \"\";\r\n//    },\r\n    getValue: function () {\r\n        return this._textEl.value;\r\n    }\r\n});\r\nmini.regClass(mini.Password, 'password');\r\n\r\n\r\nmini.TextArea = function () {\r\n    mini.TextArea.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.TextArea, mini.TextBox, {\r\n    maxLength: 10000000,\r\n\r\n    //width: 180,\r\n    //height: 50,\r\n    height: '',\r\n    minHeight: 50,\r\n    _InputType: \"textarea\",\r\n    uiCls: \"mini-textarea\",\r\n    doLayout: function () {\r\n        if (!this.canLayout()) return;\r\n        mini.TextArea.superclass.doLayout.call(this);\r\n\r\n        var h = mini.getHeight(this.el);\r\n\r\n        //if (mini.isIE6 || mini.isIE) {\r\n        if (mini.isIE6) {\r\n            mini.setHeight(this._borderEl, h);\r\n        }\r\n        h -= 2;\r\n        if (h < 0) h = 0;\r\n        this._textEl.style.height = h + \"px\";\r\n    }\r\n});\r\nmini.regClass(mini.TextArea, 'textarea');\r\n\r\n\n\r\nmini.ButtonEdit = function () {\r\n    \r\n    mini.ButtonEdit.superclass.constructor.apply(this, arguments);\r\n    //this.addCls(\"mini-buttonedit\");\r\n\r\n    var isReadOnly = this.isReadOnly();\r\n    if (isReadOnly || this.allowInput == false) {\r\n        this._textEl.readOnly = true;\r\n    }\r\n    if (this.enabled == false) {\r\n        this.addCls(this._disabledCls);\r\n    }\r\n    if (isReadOnly) {\r\n        this.addCls(this._readOnlyCls);\r\n    }\r\n    if (this.required) {\r\n        this.addCls(this._requiredCls);\r\n    }\r\n}\r\nmini.extend(mini.ButtonEdit, mini.ValidatorBase, {\r\n    name: \"\",\r\n    formField: true,\r\n\r\n    selectOnFocus: false,\r\n\r\n    showButton: true,\r\n\r\n    buttonToolTip: \"\",\r\n    closeToolTip: \"\",\r\n\r\n    showClose: false,\r\n\r\n    emptyText: \"\",\r\n\r\n    defaultValue: \"\",\r\n    defaultText: \"\",\r\n    value: \"\",\r\n    text: \"\",\r\n\r\n    maxLength: 1000,\r\n    minLength: 0,\r\n\r\n    //width: 125,\r\n    height: 21,\r\n\r\n    inputAsValue: true,    //输入内容作为value\r\n\r\n    allowInput: true,   //区别于readOnly\r\n    _noInputCls: \"mini-buttonedit-noInput\",\r\n    _readOnlyCls: \"mini-buttonedit-readOnly\",\r\n    _disabledCls: \"mini-buttonedit-disabled\",\r\n\r\n    _emptyCls: \"mini-buttonedit-empty\",\r\n    _focusCls: \"mini-buttonedit-focus\",\r\n\r\n    //_buttonDisabledCls: \"mini-buttonedit-button-disabled\",\r\n    _buttonCls: \"mini-buttonedit-button\",\r\n    _buttonHoverCls: \"mini-buttonedit-button-hover\",\r\n    _buttonPressedCls: \"mini-buttonedit-button-pressed\",\r\n\r\n    _closeCls: \"mini-buttonedit-close\",\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var value = kv.value;\r\n        delete kv.value;\r\n        var text = kv.text;\r\n        delete kv.text;\r\n\r\n        this._allowUpdate = !(kv.enabled == false || kv.allowInput == false || kv.readOnly);\r\n\r\n        mini.ButtonEdit.superclass.set.call(this, kv);\r\n\r\n        if (this._allowUpdate === false) {\r\n            this._allowUpdate = true;\r\n            this.doUpdate();\r\n        }\r\n\r\n        if (!mini.isNull(text)) {\r\n            this.setText(text);\r\n        }\r\n        if (!mini.isNull(value)) {\r\n            this.setValue(value);\r\n        }\r\n        return this;\r\n    },\r\n    uiCls: \"mini-buttonedit\",\r\n\r\n    //    addButton: function (button) {\r\n    //        \r\n    //    },\r\n\r\n    //    removeButton: function (button) {\r\n    //        \r\n    //    },\r\n\r\n    setButtons: function (val) {\r\n        var me = this;\r\n\r\n        jQuery(\".mini-buttonedit-button:not(.mini-buttonedit-trigger)\", this.el).remove();\r\n\r\n        me.buttons = val || [];\r\n\r\n        var html = '';\r\n\r\n        function createButton(button) {\r\n            html += me._createButtonHtml(button.name, button.iconCls, button.tooltip);\r\n        }\r\n\r\n        for (var i = 0, l = me.buttons.length; i < l; i++) {\r\n            var button = me.buttons[i];\r\n            if (!button.name) button.name = \"button\" + i;\r\n            createButton(button);\r\n        }\r\n\r\n        mini.append(me._buttonsEl, html);\r\n\r\n        me._doInputLayout(false);\r\n\r\n    },\r\n\r\n    getButtons: function () {\r\n        return this.buttons || [];\r\n    },\r\n\r\n    getButtonByName: function (name) {\r\n        var buttons = this.getButtons();\r\n        for (var i = 0, l = buttons.length; i < l; i++) {\r\n            var o = buttons[i];\r\n            if (o.name && o.name == name) return o;\r\n        }\r\n        return null;\r\n    },\r\n\r\n    _createButtonHtml: function (name, iconCls, tooltip) {\r\n        name = name || \"\";\r\n        iconCls = iconCls || \"\";\r\n        tooltip = tooltip || '';\r\n        var hover = 'onmouseover=\"mini.addClass(this, \\'' + this._buttonHoverCls + '\\');\" '\r\n                        + 'onmouseout=\"mini.removeClass(this, \\'' + this._buttonHoverCls + '\\');\"';\r\n        return '<span title=\"' + tooltip + '\" name=\"' + name + '\" class=\"mini-buttonedit-button mini-buttonedit-' + name + '\" ' + hover + '><span class=\"mini-buttonedit-icon mini-icon mini-iconfont ' + iconCls + '\"></span></span>';\r\n    },\r\n\r\n    _getButtonsHTML: function () {\r\n\r\n        var s = '<span class=\"mini-buttonedit-close mini-icon\" name=\"close\"></span>' + this._getButtonHtml('trigger', '', this.buttonToolTip);\r\n        return '<span class=\"mini-buttonedit-buttons\">' + s + '</span>';\r\n    },\r\n\r\n    _getButtonHtml: function (name, iconCls, tooltip) {\r\n        return this._createButtonHtml(name, iconCls, tooltip);\r\n    },\r\n\r\n    _create: function () {\r\n        this.el = document.createElement(\"span\");\r\n        this.el.className = \"mini-buttonedit\";\r\n\r\n        var s = this._getButtonsHTML();\r\n        this.el.innerHTML = '<span class=\"mini-buttonedit-border mini-corner-all\"><input type=\"text\" class=\"mini-buttonedit-input\" autocomplete=\"off\"/>'\r\n                            + s + '</span><input name=\"' + this.name + '\" type=\"hidden\"/>'\r\n\r\n        this._borderEl = this.el.firstChild;\r\n        this._textEl = this._borderEl.firstChild;\r\n        this._valueEl = this.el.lastChild;\r\n\r\n        this._buttonsEl = this._borderEl.lastChild;\r\n        this._buttonEl = this._buttonsEl.lastChild;\r\n        this._closeEl = this._buttonEl.previousSibling;\r\n\r\n        this._doEmpty();\r\n    },\r\n    destroy: function (removeEl) {\r\n\r\n        if (this._textEl) {\r\n            this._textEl.onchange = this._textEl.onfocus = null;\r\n            mini.clearEvent(this._textEl);\r\n            //jQuery(this._textEl).remove();\r\n            this._textEl = null;\r\n        }\r\n\r\n        this._borderEl = this._buttonsEl = this._buttonEl = this._closeEl = this._valueEl = null;\r\n\r\n        mini.ButtonEdit.superclass.destroy.call(this, removeEl);\r\n    },\r\n    _deferSetText: true,\r\n    _initEvents: function () {\r\n        mini._BindEvents(function () {\r\n            mini_onOne(this.el, \"mousedown\", this.__OnMouseDown, this);\r\n            mini_onOne(this._textEl, \"focus\", this.__OnFocus, this);\r\n            mini_onOne(this._textEl, \"change\", this.__OnInputTextChanged, this);\r\n\r\n\r\n            //            mini.on(this.el, \"mousedown\", this.__OnMouseDown, this);\r\n            //            mini.on(this._textEl, \"focus\", this.__OnFocus, this);\r\n            //            mini.on(this._textEl, \"change\", this.__OnInputTextChanged, this);\r\n\r\n            var v = this.text;\r\n            this.text = null;\r\n            if (this.el) {\r\n                if (this._deferSetText) {\r\n                    this.setText(v);\r\n                }\r\n            }\r\n\r\n\r\n            if (mini.isIE) {\r\n\r\n                mini.on(this._textEl, \"input\", this.__input, this);\r\n            }\r\n\r\n\r\n        }, this);\r\n\r\n    },\r\n    __input: function () { },\r\n\r\n\r\n    _inputEventsInited: false,\r\n    _initInputEvents: function () {\r\n        if (this._inputEventsInited) return;\r\n        this._inputEventsInited = true;\r\n\r\n        mini.on(this.el, \"click\", this.__OnClick, this);\r\n        mini.on(this._textEl, \"blur\", this.__OnBlur, this);\r\n        mini.on(this._textEl, \"keydown\", this.__OnInputKeyDown, this);\r\n        mini.on(this._textEl, \"keyup\", this.__OnInputKeyUp, this);\r\n        mini.on(this._textEl, \"keypress\", this.__OnInputKeyPress, this);\r\n    },\r\n    _buttonWidth: 20,\r\n    _closeWidth: 20,\r\n    _doInputLayout: function (doLayout) {\r\n\r\n        this._buttonEl.style.display = this.showButton ? \"inline-block\" : \"none\";\r\n        this._buttonEl.title = this.buttonToolTip;\r\n\r\n        if (this._closeEl) {\r\n            this._closeEl.style.display = this.showClose ? \"inline-block\" : \"none\";\r\n            this._closeEl.title = this.closeToolTip;\r\n        }\r\n\r\n        if (mini.isNull(mini.ButtonEdit._paddingOffset)) {\r\n            var padding = mini.getPaddings(this._borderEl);\r\n            mini.ButtonEdit._paddingOffset = padding.left;\r\n            //alert(mini.ButtonEdit._paddingOffset)\r\n        }\r\n\r\n        var buttonsWidth = this._buttonsEl.offsetWidth;\r\n\r\n        var w = buttonsWidth + (buttonsWidth > 0 ? 0 : mini.ButtonEdit._paddingOffset);\r\n        if (w == 2) {\r\n            this._noLayout = true;\r\n        } else {\r\n            this._noLayout = false;\r\n        }\r\n        this._borderEl.style[\"paddingRight\"] = w + \"px\";\r\n        if (doLayout !== false) {\r\n            this.doLayout();\r\n        }\r\n    },\r\n    doLayout: function () {\r\n        //        if (this.id == \"xxx\") {\r\n        //            //alert(1);\r\n        //            debugger\r\n        //        }\r\n\r\n        if (this._noLayout) {\r\n            this._doInputLayout(false);\r\n        }\r\n        if (this._doLabelLayout) {\r\n            this._labelLayout();\r\n        }\r\n\r\n    },\r\n    setHeight: function (value) {\r\n        if (parseInt(value) == value) value += \"px\";\r\n        this.height = value;\r\n\r\n    },\r\n    focus: function () {\r\n        try {\r\n            this._textEl.focus();\r\n            var sf = this;\r\n            setTimeout(function () {\r\n                if (sf._focused) {\r\n                    sf._textEl.focus();\r\n                }\r\n                //sf._doEmpty();\r\n            }, 10);\r\n        } catch (e) {\r\n        }\r\n    },\r\n    blur: function () {\r\n        try {\r\n            this._textEl.blur();\r\n            //sf._doEmpty();\r\n        } catch (e) {\r\n        }\r\n    },\r\n    selectText: function () {\r\n        this._textEl.select();\r\n    },\r\n\r\n    getTextEl: function () {\r\n        return this._textEl;\r\n    },\r\n    setName: function (value) {\r\n        this.name = value;\r\n        //this._valueEl.name = value;\r\n        if (this._valueEl) mini.setAttr(this._valueEl, \"name\", this.name);\r\n    },\r\n    setText: function (value) {\r\n\r\n        if (value === null || value === undefined) value = \"\";\r\n        var fire = this.text !== value;\r\n        this.text = value;\r\n        this._textEl.value = value;\r\n\r\n        this._doEmpty();\r\n    },\r\n    getText: function () {\r\n        var text = this._textEl.value;\r\n        return text;\r\n        //return text != this.emptyText ? text : \"\";\r\n    },\r\n    //value是类型值，formattedValue是字符串\r\n    setValue: function (value) {\r\n        if (value === null || value === undefined) value = \"\";\r\n        var fire = this.value !== value;\r\n        this.value = value;\r\n        this._valueEl.value = this.getFormValue();\r\n        //this._doEmpty();\r\n    },\r\n    getValue: function () {\r\n        return this.value;\r\n    },\r\n    getFormValue: function () {\r\n        var value = this.value;\r\n        if (value === null || value === undefined) value = \"\";\r\n        return String(value);\r\n    },\r\n\r\n    _doEmpty: function () {\r\n        this._textEl.placeholder = this.emptyText;\r\n        if (this.emptyText) {\r\n            mini._placeholder(this._textEl);\r\n        }\r\n        //        mini.removeClass(this.el, this._emptyCls);\r\n        //        if (this._focused) {\r\n        //            if (this._textEl.value == this.emptyText) {\r\n        //                this._textEl.value = \"\";\r\n        //            }\r\n        //        } else {\r\n        //            if (this._textEl.value == \"\") {\r\n        //                this._textEl.value = this.emptyText;\r\n        //                mini.addClass(this.el, this._emptyCls);\r\n        //            }\r\n        //        }\r\n    },\r\n    setEmptyText: function (value) {\r\n        if (this.emptyText != value) {\r\n            this.emptyText = value;\r\n            this._doEmpty();\r\n        }\r\n    },\r\n    getEmptyText: function () {\r\n        return this.emptyText;\r\n    },\r\n\r\n    setMaxLength: function (value) {\r\n        value = parseInt(value);\r\n        if (isNaN(value)) return;\r\n        this.maxLength = value;\r\n        this._textEl.maxLength = value;\r\n    },\r\n    getMaxLength: function () {\r\n        return this.maxLength;\r\n    },\r\n    setMinLength: function (value) {\r\n        value = parseInt(value);\r\n        if (isNaN(value)) return;\r\n        this.minLength = value;\r\n    },\r\n    getMinLength: function () {\r\n        return this.minLength;\r\n    },\r\n    setEnabled: function (value) {\r\n        mini.ButtonEdit.superclass.setEnabled.call(this, value);\r\n\r\n        //this._tryValidate();\r\n    },\r\n    _doReadOnly: function () {\r\n        var readOnly = this.isReadOnly();\r\n        if (readOnly || this.allowInput == false) {\r\n            this._textEl.readOnly = true;\r\n        } else {\r\n            this._textEl.readOnly = false;\r\n        }\r\n        if (readOnly) {\r\n            this.addCls(this._readOnlyCls);\r\n        } else {\r\n            this.removeCls(this._readOnlyCls);\r\n        }\r\n        if (this.allowInput) {\r\n            this.removeCls(this._noInputCls);\r\n        } else {\r\n            this.addCls(this._noInputCls);\r\n        }\r\n\r\n        if (this.enabled) {\r\n            this._textEl.disabled = false;\r\n        } else {\r\n            this._textEl.disabled = true;\r\n        }\r\n    },\r\n    setAllowInput: function (value) {\r\n        this.allowInput = value;\r\n        this._doReadOnly();\r\n    },\r\n    getAllowInput: function () {\r\n        return this.allowInput;\r\n    },\r\n    setInputAsValue: function (value) {\r\n        this.inputAsValue = value;\r\n    },\r\n    getInputAsValue: function () {\r\n        return this.inputAsValue;\r\n    },\r\n\r\n    autoClear: false,\r\n    setAutoClear: function (value) {\r\n        this.autoClear = value;\r\n    },\r\n    getAutoClear: function () {\r\n        return this.autoClear;\r\n    },\r\n\r\n    setButtonToolTip: function (value) {\r\n        this.buttonToolTip = value;\r\n    },\r\n    getButtonToolTip: function () {\r\n        return this.buttonToolTip;\r\n    },\r\n\r\n    ////////////////////////////////////   \r\n    //    _errorCls: \"mini-buttonedit-error\",\r\n    //    _invalidCls: \"mini-buttonedit-invalid\", //当none时，加上_errorCls，比如红色边框，黄色背景\r\n    _errorIconEl: null,\r\n    getErrorIconEl: function () {\r\n        if (!this._errorIconEl) {\r\n            this._errorIconEl = mini.append(this.el, '<span class=\"mini-errorIcon\"></span>');\r\n        }\r\n        return this._errorIconEl;\r\n    },\r\n    _RemoveErrorIcon: function () {\r\n        if (this._errorIconEl) {\r\n            var el = this._errorIconEl;\r\n            jQuery(el).remove();\r\n        }\r\n        this._errorIconEl = null;\r\n    },\r\n    ///////////////////////////////////////////\r\n    __OnClick: function (e) {\r\n\r\n        if (this.enabled == false) return;\r\n        this.fire(\"click\", { htmlEvent: e });\r\n\r\n        if (this.isReadOnly()) return;\r\n\r\n        if (!mini.isAncestor(this._borderEl, e.target)) return;\r\n\r\n        var t = new Date();\r\n\r\n        if (mini.isAncestor(this._buttonEl, e.target)) {\r\n            this._OnButtonClick(e);\r\n        }\r\n\r\n\r\n        if (mini.findParent(e.target, this._closeCls)) {\r\n\r\n\r\n            if (this.autoClear) {\r\n\r\n                if ((this.value && this.value !== 0) || this.text !== \"\") {\r\n                    this._oldValue = this.value;\r\n                    this.setValue(\"\");\r\n                    this.setText(\"\");\r\n                    this._OnValueChanged();\r\n                    //this.focus();\r\n                }\r\n            }\r\n\r\n            this.fire(\"closeclick\", { htmlEvent: e });\r\n        }\r\n\r\n        //        t = new Date() - t;\r\n        //        if (t > 500) {\r\n        //            var me = this;\r\n        //            me.blur();\r\n        //            setTimeout(function () {\r\n        //                me.blur();\r\n        //            }, 10);\r\n        //        }\r\n        //this._doEmpty();\r\n\r\n        //处理新增的buttons\r\n        this._handlerButtonElClick(e);\r\n\r\n    },\r\n\r\n    _handlerButtonElClick: function (e) {\r\n        var btnEl = mini.findParent(e.target, \"mini-buttonedit-button\")\r\n        if (btnEl && btnEl != this._buttonEl && btnEl != this._closeEl) {\r\n            var name = jQuery(btnEl).attr(\"name\");\r\n            var button = this.getButtonByName(name);\r\n            //alert(button.name);\r\n\r\n            var event = { sender: this, button: button, htmlEvent: e };\r\n            if (button.handler) button.handler(event);\r\n            //if (button.handler) button.handler.call(this, event);            \r\n        }\r\n    },\r\n\r\n    __OnMouseDown: function (e) {\r\n        //this._doEmpty();\r\n        if (this.isReadOnly() || this.enabled == false) return;\r\n\r\n        if (!mini.isAncestor(this._borderEl, e.target)) return;\r\n\r\n        if (!mini.isAncestor(this._textEl, e.target)) {\r\n            this._clickTarget = e.target;\r\n            var sf = this;\r\n            setTimeout(function () {\r\n                sf.focus();\r\n                mini.selectRange(sf._textEl, 1000, 1000);\r\n            }, 1);\r\n            if (mini.isAncestor(this._buttonEl, e.target)) {\r\n                var up = mini.findParent(e.target, \"mini-buttonedit-up\");\r\n                var down = mini.findParent(e.target, \"mini-buttonedit-down\");\r\n                if (up) {\r\n                    mini.addClass(up, this._buttonPressedCls);\r\n                    this._OnButtonMouseDown(e, \"up\");\r\n                }\r\n                else if (down) {\r\n                    mini.addClass(down, this._buttonPressedCls);\r\n                    this._OnButtonMouseDown(e, \"down\");\r\n                } else {\r\n                    mini.addClass(this._buttonEl, this._buttonPressedCls);\r\n                    this._OnButtonMouseDown(e);\r\n                }\r\n            }\r\n            mini.on(document, \"mouseup\", this.__OnDocMouseUp, this);\r\n\r\n            var btnEl = mini.findParent(e.target, \"mini-buttonedit-button\")\r\n            if (btnEl) {\r\n                mini.addClass(btnEl, this._buttonPressedCls);\r\n            }\r\n\r\n        }\r\n    },\r\n    __OnDocMouseUp: function (e) {\r\n\r\n        this._clickTarget = null;\r\n        //        var tds = this._innerEl.firstChild.rows[0].cells;\r\n        //        var sf = this;\r\n        //        setTimeout(function () {\r\n        //            for (var i = 0, l = tds.length; i < l; i++) {\r\n        //                var td = tds[i];\r\n        //                mini.removeClass(td, sf._buttonPressedCls);\r\n        //                var button = sf.getButton(parseInt(td.id));\r\n        //                if (button && button.type == \"spin\") {\r\n        //                    mini.removeClass(td.firstChild.firstChild, sf._buttonPressedCls);\r\n        //                    mini.removeClass(td.firstChild.lastChild, sf._buttonPressedCls);\r\n        //                }\r\n        //            }\r\n        //            mini.removeClass(sf.el, sf._pressedCls);\r\n        //        }, 80);\r\n        var me = this;\r\n        setTimeout(function () {\r\n            var doms = me._buttonEl.getElementsByTagName(\"*\");\r\n            for (var i = 0, l = doms.length; i < l; i++) {\r\n                mini.removeClass(doms[i], me._buttonPressedCls);\r\n            }\r\n            mini.removeClass(me._buttonEl, me._buttonPressedCls);\r\n            mini.removeClass(me.el, me._pressedCls);\r\n\r\n            jQuery(\".mini-buttonedit-button\", me._buttonsEl).removeClass(me._buttonPressedCls);\r\n\r\n        }, 80);\r\n        mini.un(document, \"mouseup\", this.__OnDocMouseUp, this);\r\n    },\r\n    __OnFocus: function (e) {\r\n\r\n        this.doUpdate();\r\n        this._initInputEvents();\r\n        if (this.isReadOnly()) return;\r\n        //if (this.isReadOnly() || this.allowInput == false) return;\r\n        this._focused = true;\r\n        this.addCls(this._focusCls);\r\n\r\n        //this._doEmpty();\r\n\r\n        if (this.selectOnFocus) {\r\n            this.selectText();\r\n        }\r\n        this.fire(\"focus\", { htmlEvent: e });\r\n    },\r\n    __doFocusCls: function () {\r\n        if (this._focused == false) {\r\n            this.removeCls(this._focusCls);\r\n        }\r\n    },\r\n    __fireBlur: function (e) {\r\n\r\n        //if (this._clickTarget) return;\r\n\r\n        var sf = this;\r\n\r\n        function f() {\r\n            if (sf._focused == false) {\r\n                sf.removeCls(sf._focusCls);\r\n\r\n                if (sf.validateOnLeave && sf.isEditable()) {\r\n                    //if (sf.validateOnLeave) {\r\n                    sf._tryValidate();\r\n                }\r\n\r\n                this.fire(\"blur\", { htmlEvent: e });\r\n            }\r\n            //this._doEmpty();\r\n        }\r\n        setTimeout(function () {\r\n            f.call(sf);\r\n        }, 2);\r\n\r\n    },\r\n    __OnBlur: function (e) {\r\n\r\n        var me = this;\r\n\r\n        me._focused = false;\r\n        setTimeout(function () {\r\n            me.__fireBlur(e);\r\n\r\n        }, 10);\r\n\r\n\r\n    },\r\n    __OnInputKeyDown: function (e) {\r\n        var ex = { htmlEvent: e };\r\n        this.fire(\"keydown\", ex);\r\n        if (e.keyCode == 8 && (this.isReadOnly() || this.allowInput == false)) {\r\n            return false;\r\n        }\r\n        //if (e.keyCode == 13 || e.keyCode == 9) {\r\n        if (e.keyCode == 27 || e.keyCode == 13 || e.keyCode == 9) {\r\n            var sf = this;\r\n            sf.__OnInputTextChanged(null);\r\n            if (e.keyCode == 13) {\r\n                var me = this;\r\n                //setTimeout(function () {\r\n                me.fire(\"enter\", ex);\r\n                //}, 10);\r\n            }\r\n        }\r\n        if (e.keyCode == 27) {\r\n            e.preventDefault();\r\n        }\r\n    },\r\n    __OnInputTextChanged: function () {\r\n\r\n        var v = this._textEl.value;\r\n        if (v == this.text) return;\r\n        var value = this.getValue();\r\n        //if (this.inputAsValue) {\r\n        \r\n        this._oldValue = value;\r\n\r\n        this.setText(v);\r\n        if (this.inputAsValue) {\r\n            this.setValue(v);\r\n            if (value !== this.getFormValue()) {\r\n                this._OnValueChanged();\r\n            }\r\n        }\r\n        //}\r\n    },\r\n    __OnInputKeyUp: function (e) {\r\n        this.fire(\"keyup\", { htmlEvent: e });\r\n    },\r\n    __OnInputKeyPress: function (e) {\r\n        this.fire(\"keypress\", { htmlEvent: e });\r\n    },\r\n    ////////////////////////////////////////////     \r\n    _OnButtonClick: function (htmlEvent) {\r\n        var e = {\r\n            htmlEvent: htmlEvent,\r\n            cancel: false\r\n        };\r\n        this.fire(\"beforebuttonclick\", e);\r\n        if (e.cancel == true) return;\r\n\r\n        this.fire(\"buttonclick\", e);\r\n    },\r\n    _OnButtonMouseDown: function (htmlEvent, spinType) {\r\n        this.focus();\r\n        this.addCls(this._focusCls);\r\n\r\n        this.fire(\"buttonmousedown\", {\r\n            htmlEvent: htmlEvent,\r\n            spinType: spinType\r\n        });\r\n    },\r\n\r\n    onButtonClick: function (fn, scope) {\r\n        this.on(\"buttonclick\", fn, scope);\r\n    },\r\n    onButtonMouseDown: function (fn, scope) {\r\n        this.on(\"buttonmousedown\", fn, scope);\r\n    },\r\n    onTextChanged: function (fn, scope) {\r\n        this.on(\"textchanged\", fn, scope);\r\n    },\r\n\r\n    textName: \"\",\r\n    setTextName: function (value) {\r\n        this.textName = value;\r\n        if (this._textEl) mini.setAttr(this._textEl, \"name\", this.textName);\r\n    },\r\n    getTextName: function () {\r\n        return this.textName;\r\n    },\r\n\r\n    setSelectOnFocus: function (value) {\r\n        this.selectOnFocus = value;\r\n    },\r\n    getSelectOnFocus: function (value) {\r\n        return this.selectOnFocus;\r\n    },\r\n    setShowClose: function (value) {\r\n        this.showClose = value;\r\n        this._doInputLayout();\r\n    },\r\n    getShowClose: function (value) {\r\n        return this.showClose;\r\n    },\r\n\r\n    setShowButton: function (value) {\r\n        this.showButton = value;\r\n        this._doInputLayout();\r\n    },\r\n    getShowButton: function () {\r\n        return this.showButton;\r\n    },\r\n\r\n    inputStyle: \"\",\r\n    setInputStyle: function (value) {\r\n        this.inputStyle = value;\r\n        mini.setStyle(this._textEl, value);\r\n    },\r\n\r\n    getAttrs: function (el) {\r\n        var attrs = mini.ButtonEdit.superclass.getAttrs.call(this, el);\r\n        var jq = jQuery(el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"value\", \"text\", \"textName\", \"emptyText\", \"inputStyle\", \"defaultText\",\r\n            \"onenter\", \"onkeydown\", \"onkeyup\", \"onkeypress\",\r\n            \"onbuttonclick\", \"onbuttonmousedown\", \"ontextchanged\", \"onfocus\", \"onblur\",\r\n            \"oncloseclick\", \"onclick\", \"buttons\", \"buttonToolTip\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"allowInput\", \"inputAsValue\", \"selectOnFocus\", \"showClose\", \"showButton\", \"autoClear\"\r\n             ]\r\n        );\r\n        mini._ParseInt(el, attrs,\r\n            [\"maxLength\", \"minLength\"\r\n             ]\r\n        );\r\n\r\n\r\n        //buttons\r\n        var buttons = attrs[\"buttons\"];\r\n        if (buttons) {\r\n            buttons = window[\"ev\" + \"al\"](\"(\" + buttons + \")\");\r\n            attrs.buttons = buttons || null;\r\n            //attrs.buttons = null;\r\n        }\r\n\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.ButtonEdit, 'buttonedit');\r\n\r\n\r\n\r\n\r\n\n\r\nmini.PopupEdit = function () {\r\n    mini.PopupEdit.superclass.constructor.apply(this, arguments);\r\n    this._createPopup();\r\n\r\n    this.el.className += ' mini-popupedit';\r\n}\r\nmini.extend(mini.PopupEdit, mini.ButtonEdit, {\r\n    uiCls: \"mini-popupedit\",\r\n    popup: null,\r\n\r\n    popupCls: \"mini-buttonedit-popup\",\r\n\r\n    _hoverCls: \"mini-buttonedit-hover\",\r\n    _pressedCls: \"mini-buttonedit-pressed\",\r\n\r\n    _destroyPopup: true,\r\n    destroy: function (removeEl) {\r\n        if (this.isShowPopup()) {\r\n            this.hidePopup();\r\n        }\r\n        if (this.popup) {\r\n            if (this._destroyPopup) {\r\n\r\n                this.popup.destroy();\r\n            }\r\n            this.popup = null;\r\n        }\r\n        if (this._popupInner) {\r\n            this._popupInner.owner = null;\r\n            this._popupInner = null;\r\n        }\r\n\r\n        if (this.el) {\r\n            this.el.onmouseover = this.el.onmouseout = null;\r\n        }\r\n\r\n        this._listbox = this.tree = null;\r\n\r\n        mini.PopupEdit.superclass.destroy.call(this, removeEl);\r\n    },\r\n    _initEvents: function () {\r\n        mini.PopupEdit.superclass._initEvents.call(this);\r\n\r\n        mini._BindEvents(function () {\r\n            mini_onOne(this.el, \"mouseover\", this.__OnMouseOver, this);\r\n            mini_onOne(this.el, \"mouseout\", this.__OnMouseOut, this);\r\n\r\n            //            mini.on(this.el, \"mouseover\", this.__OnMouseOver, this);\r\n            //            mini.on(this.el, \"mouseout\", this.__OnMouseOut, this);\r\n        }, this);\r\n    },\r\n    //    _initButtons: function () {\r\n    //        this.buttons = [];\r\n\r\n    //        var button = this.createButton({ cls: \"mini-buttonedit-popup\", iconCls: \"mini-buttonedit-icons-popup\", name: \"popup\" });\r\n    //        this.buttons.push(button);\r\n    //    },\r\n    __OnBlur: function (e) {\r\n        //debugger\r\n        this._focused = false;\r\n        if (this._clickTarget && mini.isAncestor(this.el, this._clickTarget)) return;\r\n        if (this.isShowPopup()) return;\r\n        mini.PopupEdit.superclass.__OnBlur.call(this, e);\r\n    },\r\n    __OnMouseOver: function (e) {\r\n        if (this.isReadOnly() || this.allowInput) return;\r\n        if (mini.findParent(e.target, \"mini-buttonedit-border\")) {\r\n\r\n            var btnEl = mini.findParent(e.target, \"mini-buttonedit-button\");\r\n            if (btnEl && btnEl != this._buttonEl) {\r\n            } else {\r\n\r\n                this.addCls(this._hoverCls);\r\n\r\n            }\r\n        }\r\n    },\r\n    __OnMouseOut: function (e) {\r\n        if (this.isReadOnly() || this.allowInput) return;\r\n        this.removeCls(this._hoverCls);\r\n    },\r\n    __OnMouseDown: function (e) {\r\n        if (this.isReadOnly()) return;\r\n        mini.PopupEdit.superclass.__OnMouseDown.call(this, e);\r\n        if (this.allowInput == false && mini.findParent(e.target, \"mini-buttonedit-border\")) {\r\n            mini.addClass(this.el, this._pressedCls);\r\n\r\n            mini.on(document, \"mouseup\", this.__OnDocMouseUp, this);\r\n        }\r\n    },\r\n    __OnInputKeyDown: function (e) {\r\n        this.fire(\"keydown\", { htmlEvent: e });\r\n        if (e.keyCode == 8 && (this.isReadOnly() || this.allowInput == false)) {\r\n            return false;\r\n        }\r\n        if (e.keyCode == 9) {\r\n            this.hidePopup();\r\n            return;\r\n        }\r\n        if (e.keyCode == 27) {\r\n            this.hidePopup();\r\n            return;\r\n        }\r\n        if (e.keyCode == 13) {\r\n            this.fire(\"enter\");\r\n        }\r\n\r\n        if (this.isShowPopup()) {\r\n\r\n            if (e.keyCode == 13 || e.keyCode == 27) {\r\n                e.stopPropagation();\r\n            }\r\n        }\r\n    },\r\n\r\n    __OnInputTextChanged: function (e) {\r\n        if (this.isShowPopup()) {\r\n            this._textChanged = true;\r\n        } else {\r\n            this._textChanged = false;\r\n            mini.PopupEdit.superclass.__OnInputTextChanged.call(this, e);\r\n        }\r\n    },\r\n\r\n    ///////////////////////////////////////////////////\r\n    within: function (e) {\r\n        if (mini.isAncestor(this.el, e.target)) return true;\r\n        if (this.popup.within(e)) return true;\r\n        return false;\r\n    },\r\n\r\n    popupWidth: \"100%\", //\"\",\"100%\", 200\r\n    popupMinWidth: 50,\r\n    popupMaxWidth: 2000,\r\n\r\n    popupHeight: \"\",   // \"\", 30\r\n    popupMinHeight: 30,\r\n    popupMaxHeight: 2000,\r\n\r\n    showPopupOnClick: false,     //不管是否可编辑，true的时候点击就showPopup\r\n\r\n    setPopup: function (value) {\r\n        if (typeof value == \"string\") {\r\n            mini.parse(value);\r\n            value = mini.get(value);\r\n        }\r\n        var p = mini.getAndCreate(value);\r\n        if (!p) return;\r\n        p.setVisible(false);\r\n        //p.render(this.popup._contentEl);\r\n        this._popupInner = p;\r\n\r\n        p.owner = this;\r\n\r\n        p.on(\"beforebuttonclick\", this.__OnPopupButtonClick, this);\r\n    },\r\n\r\n    getPopup: function () {\r\n        if (!this.popup) {\r\n            this._createPopup();\r\n        }\r\n        return this.popup;\r\n    },\r\n\r\n    _createPopup: function () {\r\n        this.popup = new mini.Popup();\r\n        this.popup.setShowAction(\"none\");\r\n        this.popup.setHideAction(\"outerclick\");\r\n        this.popup.setPopupEl(this.el);\r\n\r\n        this.popup.on(\"BeforeClose\", this.__OnPopupBeforeClose, this);\r\n        this.popup.on(\"close\", this.__OnPopupClose, this);\r\n        mini.on(this.popup.el, \"keydown\", this.__OnPopupKeyDown, this);\r\n    },\r\n\r\n    __OnPopupClose: function (e) {\r\n\r\n    },\r\n\r\n    __OnPopupBeforeClose: function (e) {\r\n        if (this.within(e.htmlEvent)) e.cancel = true;\r\n        else {\r\n            this._unDocumentMousewheel();\r\n        }\r\n    },\r\n\r\n    __OnPopupKeyDown: function (e) {\r\n    },\r\n\r\n    showPopup: function () {\r\n        \r\n        var ex = { cancel: false };\r\n        if (this._firebeforeshowpopup !== false) {\r\n            this.fire(\"beforeshowpopup\", ex);\r\n            if (ex.cancel == true) return false;\r\n        }\r\n\r\n        var popup = this.getPopup();\r\n\r\n        //if (this.id == \"cityCombo\") debugger\r\n        this._syncShowPopup();\r\n\r\n        popup.on(\"Close\", this.__OnPopupHide, this);\r\n\r\n        this._onDocumentMousewheel();\r\n\r\n        this.fire(\"showpopup\");\r\n    },\r\n    _unDocumentMousewheel: function () {\r\n        mini.un(document, \"mousewheel\", this.__OnDocumentMousewheel, this);\r\n        this._mousewheelXY = null;\r\n\r\n    },\r\n    _onDocumentMousewheel: function () {\r\n        this._unDocumentMousewheel();\r\n\r\n        this._mousewheelXY = mini.getXY(this.el);\r\n        mini.on(document, \"mousewheel\", this.__OnDocumentMousewheel, this);\r\n\r\n    },\r\n    __OnDocumentMousewheel: function (e) {\r\n        var that = this;\r\n\r\n\r\n        function doWheel() {\r\n            if (!that.isShowPopup()) return;\r\n            var box = that._mousewheelXY;\r\n            var xy = mini.getXY(that.el);\r\n            if (box[0] != xy[0] || box[1] != xy[1]) {\r\n                that.hidePopup();\r\n            } else {\r\n                setTimeout(doWheel, 300);\r\n            }\r\n            //document.title = new Date().getTime();\r\n        }\r\n\r\n        setTimeout(doWheel, 300);\r\n    },\r\n\r\n    //    doLayout: function () {\r\n    //        //if(this.id == 'lookup2') debugger\r\n    //        mini.PopupEdit.superclass.doLayout.call(this);\r\n    //        if (this.isShowPopup()) {\r\n    //            //this._syncShowPopup();\r\n    //        }\r\n    //    },\r\n\r\n    _syncShowPopup: function () {\r\n        var popup = this.getPopup();\r\n\r\n        if (this._popupInner && this._popupInner.el.parentNode != this.popup._contentEl) {\r\n            this.popup._contentEl.appendChild(this._popupInner.el);\r\n            this._popupInner.setVisible(true);\r\n        }\r\n\r\n        var box = mini.getBox(this._borderEl); //this.getBox();\r\n\r\n        var w = this.popupWidth;\r\n        if (this.popupWidth == \"100%\") w = box.width;\r\n\r\n        //        popup.el.style.left = \"-1000px\";\r\n        //        popup.el.style.top = \"-1000px\";\r\n\r\n        popup.show(-1000, -1000);\r\n\r\n        popup.setWidth(w);\r\n\r\n        var h = parseInt(this.popupHeight);\r\n        if (!isNaN(h)) {\r\n            popup.setHeight(h);\r\n        } else {\r\n            popup.setHeight(\"auto\");\r\n        }\r\n\r\n\r\n        popup.setMinWidth(this.popupMinWidth);\r\n        popup.setMinHeight(this.popupMinHeight);\r\n        popup.setMaxWidth(this.popupMaxWidth);\r\n        popup.setMaxHeight(this.popupMaxHeight);\r\n\r\n        var options = {\r\n            xAlign: \"left\",\r\n            yAlign: \"below\",\r\n            outYAlign: \"above\",\r\n            outXAlign: \"right\",\r\n            popupCls: this.popupCls,\r\n            alwaysView: this.alwaysView\r\n        };\r\n\r\n        this._doShowAtEl(this._borderEl, options);\r\n    },\r\n    _doShowAtEl: function (el, options) {\r\n        var popup = this.getPopup();\r\n        popup.showAtEl(el, options);\r\n    },\r\n    __OnPopupHide: function (e) {\r\n        \r\n        if (this._textChanged) {\r\n            this._textChanged = false;\r\n\r\n            this.__OnInputTextChanged();\r\n        }\r\n        this.__doFocusCls();\r\n        this.fire(\"hidepopup\");\r\n    },\r\n    hidePopup: function () {\r\n        \r\n        if (this.isShowPopup()) {\r\n            var popup = this.getPopup();\r\n\r\n            popup.close();\r\n\r\n            if (this._autoBlur !== false) {\r\n                this.blur();\r\n            }\r\n\r\n\r\n            //this.fire(\"hidepopup\");\r\n        }\r\n    },\r\n    isShowPopup: function () {\r\n        if (this.popup && this.popup.isDisplay()) return true;\r\n        else return false;\r\n    },\r\n\r\n    alwaysView: false,\r\n    setAlwaysView: function (value) {\r\n        this.alwaysView = value;\r\n    },\r\n    getAlwaysView: function () {\r\n        return this.alwaysView;\r\n    },\r\n\r\n    setPopupWidth: function (value) {\r\n        this.popupWidth = value;\r\n    },\r\n    setPopupMaxWidth: function (value) {\r\n        this.popupMaxWidth = value;\r\n    },\r\n    setPopupMinWidth: function (value) {\r\n        this.popupMinWidth = value;\r\n    },\r\n    getPopupWidth: function (value) {\r\n        return this.popupWidth;\r\n    },\r\n    getPopupMaxWidth: function (value) {\r\n        return this.popupMaxWidth;\r\n    },\r\n    getPopupMinWidth: function (value) {\r\n        return this.popupMinWidth;\r\n    },\r\n    setPopupHeight: function (value) {\r\n        this.popupHeight = value;\r\n    },\r\n    setPopupMaxHeight: function (value) {\r\n        this.popupMaxHeight = value;\r\n    },\r\n    setPopupMinHeight: function (value) {\r\n        this.popupMinHeight = value;\r\n    },\r\n    getPopupHeight: function (value) {\r\n        return this.popupHeight;\r\n    },\r\n    getPopupMaxHeight: function (value) {\r\n        return this.popupMaxHeight;\r\n    },\r\n    getPopupMinHeight: function (value) {\r\n        return this.popupMinHeight;\r\n    },\r\n    setShowPopupOnClick: function (value) {\r\n\r\n        this.showPopupOnClick = value;\r\n    },\r\n    getShowPopupOnClick: function (value) {\r\n        return this.showPopupOnClick;\r\n    },\r\n\r\n    __OnClick: function (e) {\r\n\r\n        if (this.enabled == false) return;\r\n        this.fire(\"click\", { htmlEvent: e });\r\n\r\n        if (this.isReadOnly()) return;\r\n\r\n        if (mini.isAncestor(this._buttonEl, e.target)) {\r\n            this._OnButtonClick(e);\r\n        }\r\n        if (mini.findParent(e.target, this._closeCls)) {\r\n\r\n            if (this.isShowPopup()) {\r\n                this.hidePopup();\r\n            }\r\n\r\n            //            if (this.autoClear) {\r\n            //                this.setValue(\"\");\r\n            //                this.setText(\"\");\r\n            //                //this.focus();\r\n            //            }\r\n\r\n            if (this.autoClear) {\r\n\r\n                if ((this.value && this.value !== 0) || this.text !== \"\") {\r\n                    this.setValue(\"\");\r\n                    this.setText(\"\");\r\n                    this._OnValueChanged();\r\n                    //this.focus();\r\n                }\r\n            }\r\n\r\n            this.fire(\"closeclick\", { htmlEvent: e });\r\n            return;\r\n        }\r\n\r\n\r\n        if (this.allowInput == false || mini.isAncestor(this._buttonEl, e.target) || this.showPopupOnClick) {\r\n\r\n            var btnEl = mini.findParent(e.target, \"mini-buttonedit-button\");\r\n            if (btnEl && btnEl != this._buttonEl) {\r\n                //如果点击buttons里面的按钮，则不showPopup\r\n\r\n            } else {\r\n\r\n                if (this.isShowPopup()) {\r\n                    this.hidePopup();\r\n                    this.focus();\r\n                } else {\r\n                    var sf = this;\r\n                    setTimeout(function () {\r\n\r\n                        sf.showPopup();\r\n                    }, 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        //处理新增的buttons\r\n        this._handlerButtonElClick(e);\r\n\r\n    },\r\n    __OnPopupButtonClick: function (e) {\r\n        if (e.name == \"close\") {\r\n            this.hidePopup();\r\n        }\r\n        e.cancel = true;\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.PopupEdit.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"popupWidth\", \"popupHeight\", \"popup\", \"onshowpopup\", \"onhidepopup\", \"onbeforeshowpopup\"\r\n             ]\r\n        );\r\n        mini._ParseInt(el, attrs,\r\n            [\"popupMinWidth\", \"popupMaxWidth\", \"popupMinHeight\", \"popupMaxHeight\"\r\n             ]\r\n        );\r\n\r\n        mini._ParseBool(el, attrs,\r\n            [\"showPopupOnClick\", \"alwaysView\"\r\n             ]\r\n        );\r\n\r\n\r\n        return attrs;\r\n    }\r\n\r\n});\r\nmini.regClass(mini.PopupEdit, 'popupedit');\n\r\nmini.ComboBox = function () {\r\n    this.data = [];\r\n    this.columns = [];\r\n    mini.ComboBox.superclass.constructor.apply(this, arguments);\r\n\r\n    this._initInput();\r\n}\r\nmini.extend(mini.ComboBox, mini.PopupEdit, {\r\n    _initInput: function () {\r\n        var me = this;\r\n        if (isFirefox) {\r\n            this._textEl.oninput = function () {\r\n                me._tryQuery();\r\n            }\r\n        }\r\n    },\r\n\r\n    __input: function () {\r\n\r\n        if (document.activeElement == this._textEl) {\r\n\r\n            this._tryQuery();\r\n        }\r\n    },\r\n\r\n    text: '',\r\n    value: '',\r\n\r\n    valueField: \"id\",\r\n    textField: \"text\",\r\n    dataField: \"\",\r\n\r\n    delimiter: ',',\r\n\r\n    multiSelect: false,\r\n    data: [],\r\n    url: \"\",\r\n\r\n    valueInCheckOrder: true,\r\n\r\n    columns: [],\r\n\r\n    allowInput: false,\r\n\r\n    valueFromSelect: false, //值是否只能来自下拉数据\r\n\r\n    popupMaxHeight: 200,\r\n\r\n    setDelimiter: function (value) {\r\n        this.delimiter = value;\r\n        if (this._listbox) this._listbox.delimiter = value;\r\n    },\r\n    getDelimiter: function () {\r\n        return this.delimiter;\r\n    },\r\n\r\n    autoFocusItem: false,\r\n    setAutoFocusItem: function (value) {\r\n        this.autoFocusItem = value;\r\n    },\r\n    getAutoFocusItem: function () {\r\n        return this.autoFocusItem;\r\n    },\r\n\r\n    //    config: {\r\n    //        autoFocusItem: false\r\n    //    },\r\n\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var text = kv.text;\r\n        delete kv.text;\r\n        var value = kv.value;\r\n        delete kv.value;\r\n        var url = kv.url;\r\n        delete kv.url;\r\n        var data = kv.data;\r\n        delete kv.data;\r\n\r\n        mini.ComboBox.superclass.set.call(this, kv);\r\n\r\n        if (!mini.isNull(data)) {\r\n            this.setData(data);\r\n\r\n            kv.data = data;\r\n        }\r\n        if (!mini.isNull(url)) {\r\n            this.setUrl(url);\r\n\r\n            kv.url = url;\r\n        }\r\n        if (!mini.isNull(value)) {\r\n            this.setValue(value);\r\n\r\n            kv.value = value;\r\n        }\r\n\r\n        if (!mini.isNull(text)) {\r\n            this.setText(text);\r\n        }\r\n\r\n\r\n        return this;\r\n    },\r\n\r\n\r\n    uiCls: \"mini-combobox\",\r\n\r\n\r\n    _createPopup: function () {\r\n        mini.ComboBox.superclass._createPopup.call(this);\r\n\r\n        this._listbox = new mini.ListBox();\r\n\r\n        this.listbox = this._listbox;\r\n\r\n        this._listbox.delimiter = this.delimiter;\r\n        this._listbox.setBorderStyle(\"border:0;\");\r\n        this._listbox.setStyle(\"width:100%;height:auto;\");\r\n        this._listbox.render(this.popup._contentEl);\r\n\r\n        this._listbox.on(\"beforeitemclick\", this.__OnBeforeItemClick, this);\r\n        this._listbox.on(\"itemclick\", this.__OnItemClick, this);\r\n        this._listbox.on(\"drawcell\", this.__OnItemDrawCell, this);\r\n\r\n        var me = this;\r\n        this._listbox.on(\"beforeload\", function (e) {\r\n            me.fire(\"beforeload\", e);\r\n        }, this);\r\n        this._listbox.on(\"preload\", function (e) {\r\n            me.fire(\"preload\", e);\r\n        }, this);\r\n        this._listbox.on(\"load\", function (e) {\r\n            me.data = e.data;\r\n            me.fire(\"load\", e);\r\n        }, this);\r\n        this._listbox.on(\"loaderror\", function (e) {\r\n            me.fire(\"loaderror\", e);\r\n        }, this);\r\n    },\r\n    showPopup: function () {\r\n        var ex = { cancel: false };\r\n        this.fire(\"beforeshowpopup\", ex);\r\n        this._firebeforeshowpopup = false;\r\n        if (ex.cancel == true) return;\r\n\r\n\r\n\r\n        //if (this.id == \"cityCombo\") debugger\r\n        this._listbox.setHeight(\"auto\");\r\n        mini.ComboBox.superclass.showPopup.call(this);\r\n        var h = this.popup.el.style.height;\r\n        if (h == \"\" || h == \"auto\") {\r\n            this._listbox.setHeight(\"auto\");\r\n        } else {\r\n            this._listbox.setHeight(\"100%\");\r\n        }\r\n\r\n        var me = this;\r\n\r\n        if (!me.multiSelect) {\r\n            var jq = jQuery(\"table .mini-listbox-checkbox\", me._listbox.el);\r\n\r\n            var display = jq.css(\"display\");\r\n            jq.css(\"display\", \"table-cell\");\r\n            jq.css(\"display\", display);\r\n            //alert(1);\r\n        }\r\n\r\n\r\n        this._listbox.setValueInCheckOrder(this.valueInCheckOrder);\r\n\r\n        this._listbox.setValue(this.value);\r\n\r\n        //        var sf = this;\r\n        //        setTimeout(function () {\r\n        //            mini.repaint(sf._listbox.el);\r\n        //        }, 100);\r\n\r\n        if (this.autoFocusItem && (this.value == \"\" || mini.isNull(this.value))) {\r\n            this._listbox._focusItem(0);\r\n        }\r\n    },\r\n\r\n    changeOnSelectMethod: false,\r\n\r\n    isSelected: function (record) {\r\n        return this._listbox.isSelected(record);\r\n    },\r\n\r\n    _syncValueText: function () {\r\n        var items = this._listbox.getSelecteds();\r\n        var vts = this._listbox.getValueAndText(items);\r\n        this.setValue(vts[0]);\r\n        this.setText(vts[1]);\r\n    },\r\n\r\n    selectAll: function () {\r\n        this._listbox.selectAll();\r\n        this._syncValueText();\r\n    },\r\n\r\n    deselectAll: function () {\r\n        this._listbox.deselectAll();\r\n        this._syncValueText();\r\n    },\r\n\r\n    deselect: function (item) {\r\n        this._listbox.deselect(item);\r\n        this._syncValueText();\r\n        //        var items = this._listbox.getSelecteds();\r\n        //        var vts = this._listbox.getValueAndText(items);\r\n        //        this.setValue(vts[0]);\r\n        //        this.setText(vts[1]);\r\n    },\r\n\r\n    select: function (item) {\r\n        this._listbox.deselectAll();\r\n        item = this.getItem(item);\r\n        if (item) {\r\n\r\n            this._oldValue = this.getValue();\r\n\r\n            this._listbox.select(item);\r\n            this.__OnItemClick({ item: item }, false);\r\n\r\n            if (this.changeOnSelectMethod) {\r\n                this._OnValueChanged();\r\n            }\r\n        }\r\n    },\r\n    selects: function (items) {\r\n        if (!items) return;\r\n        var vts = this._listbox.getValueAndText(items);\r\n        this.setValue(vts[0]);\r\n\r\n        this._listbox.setValue(this.value);\r\n    },\r\n    getItem: function (item) {\r\n        return typeof item == \"object\" ? item : this.data[item];\r\n    },\r\n    indexOf: function (item) {\r\n        return this.data.indexOf(item);\r\n    },\r\n    getAt: function (index) {\r\n        return this.data[index];\r\n    },\r\n    load: function (data) {\r\n\r\n        if (typeof data == \"string\") {\r\n            this.setUrl(data);\r\n        } else {\r\n            this.setData(data);\r\n        }\r\n    },\r\n    _eval: function (_) {\r\n        return window[\"ev\" + \"al\"]('(' + _ + ')');\r\n    },\r\n    setData: function (data) {\r\n\r\n        if (typeof data == \"string\") {\r\n            data = this._eval(data);\r\n            //data = eval('(' + data + ')');\r\n            //data = mini._getMap(data, window);\r\n\r\n        }\r\n        if (!mini.isArray(data)) data = [];\r\n        this._listbox.setData(data);\r\n        this.data = this._listbox.data;\r\n        //        var v = this._listbox.getValue();\r\n        //        this.setValue(v);\r\n\r\n        this.doDataChange();\r\n        //        var vts = this._listbox.getValueAndText(this.value);\r\n        //        this.text = this._textEl.value = vts[1];\r\n        //        this.setValue(vts[0]);\r\n    },\r\n    getData: function () {\r\n        return this.data;\r\n    },\r\n\r\n    clearOnLoad: true,      //当加载时，如果value跟新数据不匹配，则清空\r\n\r\n    setClearOnLoad: function (value) {\r\n        this.clearOnLoad = value;\r\n    },\r\n    getClearOnLoad: function () {\r\n        return this.clearOnLoad\r\n    },\r\n\r\n    doDataChange: function () {\r\n        var vts = this._listbox.getValueAndText(this.value);\r\n        var value = vts[0],\r\n            text = vts[1];\r\n\r\n        if (value === \"\" && !this.clearOnLoad) {\r\n            value = this.value;\r\n            text = this.text;\r\n\r\n            this.value = null;\r\n        }\r\n\r\n        this.text = this._textEl.value = text;\r\n        this.setValue(value);\r\n    },\r\n\r\n    setUrl: function (url) {\r\n        this.getPopup();\r\n\r\n        this._listbox.setUrl(url);\r\n        this.url = this._listbox.url;\r\n        this.data = this._listbox.data;\r\n\r\n        this.doDataChange();\r\n    },\r\n    getUrl: function () {\r\n        return this.url;\r\n    },\r\n    setValueField: function (valueField) {\r\n        this.valueField = valueField;\r\n        if (this._listbox) {\r\n            this._listbox.setValueField(valueField);\r\n        }\r\n    },\r\n    getValueField: function () {\r\n        return this.valueField;\r\n    },\r\n    setTextField: function (value) {\r\n        if (this._listbox) this._listbox.setTextField(value);\r\n        this.textField = value;\r\n    },\r\n    getTextField: function () {\r\n        return this.textField;\r\n    },\r\n\r\n    pinyinField: \"tag\",\r\n    setPinyinField: function (value) {\r\n        //if (this._listbox) this._listbox.setPhoneticField(value);\r\n        this.pinyinField = value;\r\n    },\r\n    getPinyinField: function () {\r\n        return this.pinyinField;\r\n    },\r\n\r\n    setDisplayField: function (value) {\r\n        this.setTextField(value);\r\n    },\r\n    setDataField: function (value) {\r\n        if (this._listbox) this._listbox.setDataField(value);\r\n        this.dataField = value;\r\n    },\r\n    getDataField: function () {\r\n        return this.dataField;\r\n    },\r\n\r\n    setValueInCheckOrder: function (value) {\r\n        this.valueInCheckOrder = value;\r\n        this._listbox.valueInCheckOrder = value;\r\n    },\r\n    getValueInCheckOrder: function () {\r\n        return this.valueInCheckOrder;\r\n    },\r\n\r\n    //////////////////////////\r\n\r\n    //valueFromSelect默认是false，当setValue(\"aaa\")不存在数据中时，value=\"aaa\", text=\"aaa\"\r\n    //valueFromSelect设置为true时，以上情况 value = \"\", text = \"\"\r\n\r\n    setValue: function (value) {\r\n        if (mini.isNull(value)) value = \"\";\r\n        //if (this.value !== value) {\r\n        var vts = this._listbox.getValueAndText(value);\r\n        var v = vts[0], text = vts[1];\r\n        if (text === \"\" || mini.isNull(text)) text = value;\r\n\r\n        if (this.valueFromSelect && (v === \"\" || mini.isNull(v))) {\r\n            value = text = \"\";\r\n        }\r\n\r\n        //\t\tif (!this.valueFromSelect && v == \"\") {\r\n        //\t\t\tvalue = text = \"\";\r\n        //\t\t}\r\n\r\n        this.value = value;\r\n\r\n        this._valueEl.value = this.value;\r\n        this.text = this._textEl.value = text;\r\n\r\n        this._doEmpty();\r\n\r\n\r\n        //        } else {\r\n        //            var vts = this._listbox.getValueAndText(value);\r\n        //            this.text = this._textEl.value = vts[1];\r\n        //        }\r\n    },\r\n    setMultiSelect: function (value) {\r\n        if (this.multiSelect != value) {\r\n            this.multiSelect = value;\r\n            if (this._listbox) {\r\n                this._listbox.setMultiSelect(value);\r\n                this._listbox.setShowCheckBox(value);\r\n            }\r\n        }\r\n    },\r\n    getMultiSelect: function () {\r\n        return this.multiSelect;\r\n    },\r\n    setColumns: function (value) {\r\n        if (!mini.isArray(value)) value = [];\r\n        this.columns = value;\r\n        this._listbox.setColumns(value);\r\n    },\r\n    getColumns: function () {\r\n        return this.columns;\r\n    },\r\n    showNullItem: false,\r\n    setShowNullItem: function (value) {\r\n        if (this.showNullItem != value) {\r\n            this.showNullItem = value;\r\n            this._listbox.setShowNullItem(value);\r\n        }\r\n    },\r\n    getShowNullItem: function () {\r\n        return this.showNullItem;\r\n    },\r\n    setNullItemText: function (value) {\r\n        if (this.nullItemText != value) {\r\n            this.nullItemText = value;\r\n            this._listbox.setNullItemText(value);\r\n        }\r\n    },\r\n    getNullItemText: function () {\r\n        return this.nullItemText;\r\n    },\r\n    setValueFromSelect: function (value) {\r\n        this.valueFromSelect = value;\r\n    },\r\n    getValueFromSelect: function () {\r\n        return this.valueFromSelect;\r\n    },\r\n\r\n    _OnValueChanged: function () {\r\n        if (this.validateOnChanged) {\r\n            this._tryValidate();\r\n        }\r\n        var sf = this;\r\n\r\n        function changed() {\r\n            var value = sf.getValue();\r\n            var selecteds = sf.getSelecteds();\r\n            var selected = selecteds[0];\r\n            sf.fire(\"valuechanged\", { value: value, selecteds: selecteds, selected: selected, oldValue: sf._oldValue });\r\n        }\r\n        setTimeout(function () {\r\n            changed();\r\n        }, 50);\r\n\r\n    },\r\n    getSelecteds: function () {\r\n        return this._listbox.findItems(this.value);\r\n    },\r\n    getSelected: function () {\r\n        return this.getSelecteds()[0];\r\n    },\r\n    __OnItemDrawCell: function (e) {\r\n\r\n        this.fire(\"drawcell\", e);\r\n    },\r\n\r\n    __OnBeforeItemClick: function (e) {\r\n        var ev = { item: e.item, cancel: false };\r\n        this.fire(\"beforeitemclick\", ev);\r\n        if (ev.cancel) e.cancel = true;\r\n    },\r\n\r\n    __OnItemClick: function (e, fire) {\r\n\r\n        var ev = { item: e.item, cancel: false };\r\n\r\n        if (fire !== false) {\r\n            this.fire(\"beforeitemclick\", ev);\r\n            if (ev.cancel) return;\r\n        }\r\n        //        var v = this._listbox.getValue();\r\n        //        var vts = this._listbox.getValueAndText(v);\r\n        //return;\r\n        var items = this._listbox.getSelecteds();\r\n\r\n        var vts = this._listbox.getValueAndText(items);\r\n\r\n\r\n        //this._stopTextChanged = true;//\r\n        var value = this.getValue();\r\n        this.setValue(vts[0]);\r\n        this.setText(vts[1]);\r\n\r\n        this._oldValue = value;\r\n\r\n        //        if (mini.isFirefox) {   //FF下修改textEl.value，会激发changed...\r\n        //            this.blur();\r\n        //            this.focus();\r\n        //        }\r\n\r\n        if (e) {\r\n            if (fire !== false) {\r\n                if (value != this.getValue()) {\r\n                    var sf = this;\r\n                    setTimeout(function () {\r\n                        sf._OnValueChanged();\r\n                    }, 1);\r\n                }\r\n\r\n                if (!this.multiSelect) {\r\n                    this.hidePopup();\r\n                }\r\n                if (!isMobile) {\r\n                    this.focus();\r\n                }\r\n\r\n\r\n                this.fire(\"itemclick\", { item: e.item });\r\n            }\r\n        }\r\n    },\r\n    __OnInputKeyDown: function (e, userOldText) {\r\n        var ex = { htmlEvent: e };\r\n        this.fire(\"keydown\", ex);\r\n\r\n\r\n        if (e.keyCode == 8 && (this.isReadOnly() || this.allowInput == false)) {\r\n            return false;\r\n        }\r\n\r\n        if (e.keyCode == 9) {   //tab\r\n            if (this.isShowPopup()) {\r\n                this._autoBlur = false;\r\n                this.hidePopup();\r\n                delete this._autoBlur\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this.isReadOnly()) return;\r\n\r\n\r\n        switch (e.keyCode) {\r\n            case 27:        //esc\r\n                e.preventDefault();\r\n                if (this.isShowPopup()) {\r\n                    e.stopPropagation();\r\n                }\r\n\r\n                this.hidePopup();\r\n                this.focus();\r\n                break;\r\n            case 13:     //enter                \r\n                if (this.isShowPopup()) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n\r\n                    var index = this._listbox.getFocusedIndex();\r\n                    var item = this._listbox.getAt(index);\r\n                    if (item && item.enabled !== false) {\r\n                        if (index != -1) {\r\n                            var ev = { item: item, cancel: false };\r\n                            this.fire(\"beforeitemclick\", ev);\r\n                            if (ev.cancel == false) {\r\n\r\n                                this._oldValue = this.getValue();\r\n\r\n                                if (this.multiSelect) {\r\n                                    //this._listbox.select(item);\r\n                                } else {\r\n                                    this._listbox.deselectAll();\r\n                                    this._listbox.select(item);\r\n                                }\r\n                                var items = this._listbox.getSelecteds();\r\n                                var vts = this._listbox.getValueAndText(items);\r\n                                this.setValue(vts[0]);\r\n                                this.setText(vts[1]);\r\n                                this._OnValueChanged();\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    this.hidePopup();\r\n                    this.focus();\r\n                } else {\r\n                    this.fire(\"enter\", ex);\r\n                }\r\n                break;\r\n            case 37:    //left\r\n                break;\r\n            case 38:    //top      \r\n                e.preventDefault();\r\n                var index = this._listbox.getFocusedIndex();\r\n                if (index == -1) {\r\n                    index = 0;\r\n                    if (!this.multiSelect) {\r\n                        var item = this._listbox.findItems(this.value)[0];\r\n                        if (item) {\r\n                            index = this._listbox.indexOf(item);\r\n                        }\r\n                    }\r\n                }\r\n                if (this.isShowPopup()) {\r\n                    if (!this.multiSelect) {\r\n                        index -= 1;\r\n                        if (index < 0) index = 0;\r\n                        this._listbox._focusItem(index, true);\r\n                    }\r\n                }\r\n                break;\r\n            case 39:    //right\r\n                break;\r\n            case 40:    //bottom               \r\n                e.preventDefault();\r\n\r\n                var index = this._listbox.getFocusedIndex();\r\n                if (index == -1) {\r\n                    index = -1;\r\n                    if (!this.multiSelect) {\r\n                        var item = this._listbox.findItems(this.value)[0];\r\n                        if (item) {\r\n                            index = this._listbox.indexOf(item);\r\n                        }\r\n                    }\r\n                }\r\n                if (this.isShowPopup()) {\r\n                    if (!this.multiSelect) {\r\n                        index += 1;\r\n                        if (index > this._listbox.getCount() - 1) index = this._listbox.getCount() - 1;\r\n                        this._listbox._focusItem(index, true);\r\n                    }\r\n                } else {\r\n                    if (this.keyNavEnabled) {\r\n                        this.showPopup();\r\n                        if (!this.multiSelect) {\r\n                            this._listbox._focusItem(index, true);\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            default:\r\n                if (this.allowInput == false) {\r\n                } else {\r\n                    this._tryQuery(this._textEl.value);\r\n                }\r\n                break;\r\n        }\r\n    },\r\n    __OnInputKeyUp: function (e) {\r\n        this.fire(\"keyup\", { htmlEvent: e });\r\n\r\n        //this.__OnInputKeyDown(e, false);\r\n    },\r\n    __OnInputKeyPress: function (e) {\r\n        this.fire(\"keypress\", { htmlEvent: e });\r\n    },\r\n    _tryQuery: function (oldText) {\r\n\r\n        var sf = this;\r\n        setTimeout(function () {\r\n            var text = sf._textEl.value;\r\n            if (text != oldText) {\r\n                sf._doQuery(text);\r\n                //document.title = new Date();\r\n            }\r\n        }, 10);\r\n    },\r\n    _doQuery: function (key) {\r\n        if (!this.autoFilter) return;\r\n        if (this.multiSelect == true) return;\r\n        var view = [];\r\n        //        for (var i = 0, l = this.data.length; i < l; i++) {\r\n        //            var o = this.data[i];\r\n        //            var text = mini._getMap(this.textField, o);\r\n        //            if (typeof text == \"string\") {\r\n        //                text = text.toUpperCase();\r\n        //                key = key.toUpperCase();\r\n        //                if (text.indexOf(key) != -1) {\r\n        //                    view.push(o);\r\n        //                }\r\n        //            }\r\n        //        }\r\n        key = key.toUpperCase();\r\n        for (var i = 0, l = this.data.length; i < l; i++) {\r\n            var o = this.data[i];\r\n            var text = mini._getMap(this.textField, o);\r\n            var pinyin = mini._getMap(this.pinyinField, o);\r\n\r\n            text = text ? String(text).toUpperCase() : \"\";\r\n            pinyin = pinyin ? String(pinyin).toUpperCase() : \"\";\r\n            if (text.indexOf(key) != -1 || pinyin.indexOf(key) != -1) {\r\n                view.push(o);\r\n            }\r\n        }\r\n        this._listbox.setData(view);\r\n        this._filtered = true;\r\n        if (key !== \"\" || this.isShowPopup()) {\r\n            this.showPopup();\r\n\r\n            //获取第一条，并focus\r\n            //index = this._listbox.getCount() - 1;\r\n            var index = 0;\r\n            //if(this.getText() == \"美\") debugger\r\n            if (this._listbox.getShowNullItem()) index = 1;\r\n            var me = this;\r\n            //setTimeout(function () {\r\n            me._listbox._focusItem(index, true);\r\n            //}, 10);\r\n        }\r\n    },\r\n    __OnPopupHide: function (e) {\r\n        //alert(this.focused);\r\n\r\n        //this.__OnInputTextChanged();          //谨慎\r\n\r\n        //document.title = this._focused + \":\" + new Date().getTime();\r\n\r\n        if (this.valueFromSelect || this._textChanged) {         //@@\r\n\r\n            this._textChanged = false;\r\n            this.__OnInputTextChanged();\r\n        }\r\n\r\n        //if (this._textEl.value == \"\") this._listbox._focusedItem = null;    //隐藏下拉框时，如果没有值，则清空掉焦点项\r\n        if (this._textEl.value == \"\") this._listbox._blurItem();\r\n\r\n        if (this._filtered) {\r\n            this._filtered = false;\r\n            if (this._listbox.el) {\r\n                this._listbox.setData(this.data);\r\n            }\r\n        }\r\n        this.__doFocusCls();\r\n        this.fire(\"hidepopup\");\r\n    },\r\n    //    hidePopup: function () {\r\n    //        var popup = this.getPopup();\r\n    //        popup.close();\r\n\r\n    //    },\r\n    findItems: function (value) {\r\n        return this._listbox.findItems(value);\r\n    },\r\n    __OnInputTextChanged: function (e) {\r\n\r\n        if (this.isShowPopup()) {\r\n            this._textChanged = true;\r\n            return;\r\n        }\r\n\r\n        this._textChanged = false;\r\n\r\n        this._oldValue = this.getValue();\r\n\r\n        if (this.multiSelect == false) {\r\n\r\n            var text = this._textEl.value;\r\n            //valueFromSelect\r\n\r\n            //根据text找，必须全部匹配，自动选择\r\n            var data = this.getData();\r\n            var selected = null;\r\n            for (var i = 0, l = data.length; i < l; i++) {\r\n                var item = data[i];\r\n                var itemText = item[this.textField];\r\n                var itemValue = item[this.valueField];\r\n                if (itemText == text) {\r\n                    if (mini.isNull(this.value) || this.value === \"\" || this.value == itemValue) {\r\n                        selected = item;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            if (selected) {\r\n                this._listbox.setValue(selected ? selected[this.valueField] : \"\");\r\n\r\n                var v = this._listbox.getValue();\r\n                var vts = this._listbox.getValueAndText(v);\r\n\r\n                var value = this.getValue();\r\n\r\n                this.setValue(v);\r\n                this.setText(vts[1]);\r\n            } else {\r\n                if (this.valueFromSelect) {\r\n                    this.setValue(\"\");\r\n                    this.setText(\"\");\r\n                } else {\r\n                    this.setValue(text);\r\n                    this.setText(text);\r\n                }\r\n            }\r\n            if (value != this.getValue()) {\r\n                var sf = this;\r\n                //setTimeout(function () {\r\n                sf._OnValueChanged();\r\n                //}, 1);\r\n            }\r\n\r\n\r\n        }\r\n        //}\r\n\r\n        //        if (this.multiSelect) {\r\n        //        } else {\r\n        //            if (this._textEl.value == \"\" && !this.value) {\r\n        //                this.setValue(\"\");\r\n        //                this._OnValueChanged();\r\n        //            }\r\n        //            //            var _value = this.value;\r\n        //            //            var vts = this._listbox.getValueAndText(this.value);\r\n        //            //            if (this._textEl.value != vts[1]) {\r\n        //            //                this.setValue(\"\");\r\n        //            //            }\r\n        //            //            if (_value != this.value) {\r\n        //            //                this._OnValueChanged();\r\n        //            //            }\r\n        //        }\r\n    },\r\n    setAjaxData: function (value) {\r\n        this.ajaxData = value;\r\n        this._listbox.setAjaxData(value);\r\n    },\r\n    setAjaxType: function (value) {\r\n        this.ajaxType = value;\r\n        this._listbox.setAjaxType(value);\r\n    },\r\n    setAjaxOptions: function (value) {\r\n        this.ajaxOptions = value;\r\n        this._listbox.setAjaxOptions(value);\r\n    },\r\n\r\n    autoFilter: true,\r\n    setAutoFilter: function (value) {\r\n        this.autoFilter = value;\r\n    },\r\n    getAutoFilter: function () {\r\n        return this.autoFilter;\r\n    },\r\n\r\n    ////////////////////////////////////\r\n    getAttrs: function (el) {\r\n\r\n        var attrs = mini.ComboBox.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"url\", \"data\", \"textField\", \"valueField\", \"displayField\", \"nullItemText\", \"pinyinField\", \"delimiter\",\r\n            \"ondrawcell\", \"onbeforeload\", \"onpreload\", \"onload\", \"onloaderror\", \"onitemclick\", \"onbeforeitemclick\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"multiSelect\", \"showNullItem\", \"valueFromSelect\", \"valueInCheckOrder\", \"clearOnLoad\", \"autoFilter\", \"autoFocusItem\"\r\n             ]\r\n        );\r\n\r\n        if (attrs.displayField) attrs.textField = attrs.displayField;\r\n\r\n        var valueField = attrs.valueField || this.valueField;\r\n        var textField = attrs.textField || this.textField;\r\n        if (el.nodeName.toLowerCase() == \"select\") {\r\n\r\n            var data = [];\r\n            for (var i = 0, l = el.length; i < l; i++) {\r\n                var op = el.options[i];\r\n                var o = {};\r\n                o[textField] = op.text;\r\n                o[valueField] = op.value;\r\n\r\n                data.push(o);\r\n            }\r\n            if (data.length > 0) {\r\n                attrs.data = data;\r\n            }\r\n        } else {\r\n            var cs = mini.getChildNodes(el);\r\n            for (var i = 0, l = cs.length; i < l; i++) {\r\n                var node = cs[i];\r\n                var property = jQuery(node).attr(\"property\");\r\n                if (!property) continue;\r\n                property = property.toLowerCase();\r\n                if (property == \"columns\") {\r\n                    attrs.columns = mini._ParseColumns(node);\r\n                } else if (property == \"data\") {\r\n                    attrs.data = node.innerHTML;\r\n                }\r\n            }\r\n        }\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.ComboBox, 'combobox');\n\r\nmini.Calendar = function () {\r\n    this.viewDate = new Date();\r\n    this._selectedDates = [];\r\n    mini.Calendar.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.Calendar, mini.Control, {\r\n    width: 220,\r\n    height: 160,\r\n\r\n    monthPicker: false,\r\n\r\n    _clearBorder: false,\r\n\r\n    viewDate: null,\r\n    _selectedDate: \"\",\r\n    _selectedDates: [],              //先放置，后续完善\r\n    multiSelect: false,\r\n\r\n    firstDayOfWeek: 0,\r\n    yesterdayText: \"Yesterday\",\r\n    todayText: \"Today\",\r\n    clearText: \"Clear\",\r\n    okText: \"OK\",\r\n    cancelText: \"Cancel\",\r\n    daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\r\n    format: \"MMM, yyyy\",\r\n\r\n    timeFormat: 'H:mm',\r\n\r\n    showTime: false,\r\n    currentTime: true,    //点击\"今天\"按钮时，是否将Time设置为当前小时\r\n\r\n    rows: 1,\r\n    columns: 1,\r\n\r\n    headerCls: \"\",\r\n    bodyCls: \"\",\r\n    footerCls: \"\",\r\n\r\n    _todayCls: \"mini-calendar-today\",\r\n    _weekendCls: \"mini-calendar-weekend\",\r\n    _otherMonthCls: \"mini-calendar-othermonth\",\r\n    _selectedDateCls: \"mini-calendar-selected\",\r\n\r\n    showHeader: true,\r\n    showFooter: true,\r\n    showWeekNumber: false,\r\n    showDaysHeader: true,\r\n    showMonthButtons: true,\r\n    showYearButtons: true,\r\n    showTodayButton: true,\r\n    showClearButton: true,\r\n    showOkButton: false,\r\n\r\n    showYesterdayButton: false,\r\n\r\n    isWeekend: function (date) {\r\n        var day = date.getDay();\r\n        return day == 0 || day == 6;\r\n    },\r\n    getFirstDateOfMonth: function (date) {\r\n        //first day of month\r\n        var date = new Date(date.getFullYear(), date.getMonth(), 1);\r\n        //获得当前周的第一天 \r\n        return mini.getWeekStartDate(date, this.firstDayOfWeek);\r\n    },\r\n    getShortWeek: function (week) {\r\n        return this.daysShort[week];\r\n    },\r\n\r\n    uiCls: \"mini-calendar\",\r\n    _create: function () {\r\n        var s = '<tr style=\"width:100%;\"><td style=\"width:100%;\"></td></tr>';\r\n        s += '<tr ><td><div class=\"mini-calendar-footer\">'\r\n                    + '<span style=\"display:inline-block;\"><input name=\"time\" class=\"mini-timespinner mini-calendar-timespinner\" format=\"' + this.timeFormat + '\"/>'\r\n                    + '<span class=\"mini-calendar-footerSpace\"></span></span>'\r\n                    + '<span class=\"mini-calendar-tadayButton mini-calendar-button mini-corner-all\">' + this.todayText + '</span>'\r\n\r\n                    + '<span class=\"mini-calendar-footerSpace\"></span>'\r\n                    + '<span class=\"mini-calendar-clearButton mini-calendar-button mini-corner-all\">' + this.clearText + '</span>'\r\n                    + '<span class=\"mini-calendar-okButton mini-calendar-button mini-corner-all\">' + this.okText + '</span>'\r\n                    + '<a href=\"#\" class=\"mini-calendar-focus\" style=\"position:absolute;left:-10px;top:-10px;width:0px;height:0px;outline:none\" hideFocus></a>'\r\n                    + '</div></td></tr>';\r\n\r\n        var html = '<table class=\"mini-calendar\" cellpadding=\"0\" cellspacing=\"0\">' + s + '</table>';\r\n\r\n        var d = document.createElement(\"div\");\r\n        d.innerHTML = html;\r\n        this.el = d.firstChild;\r\n\r\n        var trs = this.el.getElementsByTagName(\"tr\");\r\n        var tds = this.el.getElementsByTagName(\"td\");\r\n\r\n        this._innerEl = tds[0];\r\n        this._footerEl = mini.byClass(\"mini-calendar-footer\", this.el);\r\n\r\n        this.timeWrapEl = this._footerEl.childNodes[0];\r\n        this.todayButtonEl = this._footerEl.childNodes[1];\r\n        this.footerSpaceEl = this._footerEl.childNodes[2];\r\n        this.closeButtonEl = this._footerEl.childNodes[3];\r\n        this.okButtonEl = this._footerEl.childNodes[4];\r\n        this._focusEl = this._footerEl.lastChild;\r\n\r\n        //\r\n        //debugger\r\n        this.yesterdayButtonEl = mini.after(this.todayButtonEl, '<span class=\"mini-calendar-tadayButton yesterday mini-calendar-button mini-corner-all\">' + this.yesterdayText + '</span>');\r\n\r\n\r\n        mini.parse(this._footerEl);\r\n        this.timeSpinner = mini.getbyName('time', this.el);\r\n        this.doUpdate();\r\n    },\r\n    focus: function () {\r\n        try {\r\n            this._focusEl.focus();\r\n        } catch (e) { }\r\n    },\r\n    destroy: function (removeEl) {\r\n\r\n        if (this.timeSpinner) {\r\n            this.timeSpinner.destroy();\r\n            this.timeSpinner = null;\r\n        }\r\n\r\n        this._innerEl = this._footerEl = this.timeWrapEl = this.todayButtonEl = this.footerSpaceEl = this.closeButtonEl = null;\r\n\r\n        this._focusEl = this.okButtonEl = this.yesterdayButtonEl = null;\r\n\r\n        this.timeSpinner = null;\r\n\r\n        mini.Calendar.superclass.destroy.call(this, removeEl);\r\n    },\r\n    _initEvents: function () {\r\n        if (this.timeSpinner) this.timeSpinner.on(\"valuechanged\", this.__OnTimeChanged, this);\r\n        mini._BindEvents(function () {\r\n            //            mini_onOne(this.el, \"click\", this.__OnClick, this);\r\n            //            mini_onOne(this.el, \"mousedown\", this.__OnMouseDown, this);\r\n            //            mini_onOne(this.el, \"keydown\", this.__OnKeyDown, this);\r\n\r\n\r\n            mini.on(this.el, \"click\", this.__OnClick, this);\r\n            mini.on(this.el, \"mousedown\", this.__OnMouseDown, this);\r\n            mini.on(this.el, \"keydown\", this.__OnKeyDown, this);\r\n\r\n        }, this);\r\n\r\n\r\n        //        var self = this;\r\n        //        setInterval(function () {\r\n        //            if (self.menuEl) {\r\n        //                if (!self.isDisplay()) {\r\n        //                    self.hideMenu();\r\n        //                }\r\n        //            }\r\n        //        }, 50);\r\n    },\r\n    getDateEl: function (date) {\r\n        if (!date) return null;\r\n        var id = this.uid + \"$\" + mini.clearTime(date).getTime();\r\n        return document.getElementById(id);\r\n    },\r\n    within: function (e) {\r\n        if (mini.isAncestor(this.el, e.target)) return true;\r\n        if (this.menuEl && mini.isAncestor(this.menuEl, e.target)) return true;\r\n        return false;\r\n    },\r\n    //    setHeaderCls: function (value) {\r\n    //        this.headerCls = value;\r\n    //        this.doUpdate();\r\n    //    },\r\n    //    getHeaderCls: function () {\r\n    //        return this.headerCls;\r\n    //    },\r\n    //    setBodyCls: function (value) {\r\n    //        this.bodyCls = value;\r\n    //        this.doUpdate();\r\n    //    },\r\n    //    getBodyCls: function () {\r\n    //        return this.bodyCls;\r\n    //    },\r\n    //    setFooterCls: function (value) {\r\n    //        this.footerCls = value;\r\n    //        this.doUpdate();\r\n    //    },\r\n    //    getFooterCls: function () {\r\n    //        return this.footerCls;\r\n    //    },\r\n    //    set_todayCls: function (value) {\r\n    //        this._todayCls = value;\r\n    //        this.doUpdate();\r\n    //    },\r\n    //    get_todayCls: function () {\r\n    //        return this._todayCls;\r\n    //    },\r\n    //    set_otherMonthCls: function (value) {\r\n    //        this._otherMonthCls = value;\r\n    //        this.doUpdate();\r\n    //    },\r\n    //    get_otherMonthCls: function () {\r\n    //        return this._otherMonthCls;\r\n    //    },\r\n    //    set_weekendCls: function (value) {\r\n    //        this._weekendCls = value;\r\n    //        this.doUpdate();\r\n    //    },\r\n    //    get_weekendCls: function () {\r\n    //        return this._weekendCls;\r\n    //    },\r\n    //    setShowClearButton: function (value) {\r\n    //        this.showClearButton = value;\r\n    //        debugger\r\n    //        var button = this.getButton(\"clear\");\r\n    //        if (button) {\r\n    //            this.doUpdate();\r\n    //        }\r\n    //    },\r\n    //    getShowClearButton: function () {\r\n    //        return this.showClearButton;\r\n    //    },\r\n    setShowHeader: function (value) {\r\n        this.showHeader = value;\r\n        this.doUpdate();\r\n    },\r\n    getShowHeader: function () {\r\n        return this.showHeader;\r\n    },\r\n    setShowFooter: function (value) {\r\n        this.showFooter = value;\r\n        this.doUpdate();\r\n    },\r\n    getShowFooter: function () {\r\n        return this.showFooter;\r\n    },\r\n    setShowWeekNumber: function (value) {\r\n        this.showWeekNumber = value;\r\n        this.doUpdate();\r\n    },\r\n    getShowWeekNumber: function () {\r\n        return this.showWeekNumber;\r\n    },\r\n    setShowDaysHeader: function (value) {\r\n        this.showDaysHeader = value;\r\n        this.doUpdate();\r\n    },\r\n    getShowDaysHeader: function () {\r\n        return this.showDaysHeader;\r\n    },\r\n    setShowMonthButtons: function (value) {\r\n        this.showMonthButtons = value;\r\n        this.doUpdate();\r\n    },\r\n    getShowMonthButtons: function () {\r\n        return this.showMonthButtons;\r\n    },\r\n    setShowYearButtons: function (value) {\r\n        this.showYearButtons = value;\r\n        this.doUpdate();\r\n    },\r\n    getShowYearButtons: function () {\r\n        return this.showYearButtons;\r\n    },\r\n    setShowTodayButton: function (value) {\r\n        this.showTodayButton = value;\r\n        this.todayButtonEl.style.display = this.showTodayButton ? \"\" : \"none\";\r\n        this.doUpdate();\r\n    },\r\n    getShowTodayButton: function () {\r\n        return this.showTodayButton;\r\n    },\r\n    setShowYesterdayButton: function (value) {\r\n        this.showYesterdayButton = value;\r\n        this.yesterdayButtonEl.style.display = this.showYesterdayButton ? \"\" : \"none\";\r\n        this.doUpdate();\r\n    },\r\n    getShowYesterdayButton: function () {\r\n        return this.showYesterdayButton;\r\n    },\r\n    setShowClearButton: function (value) {\r\n        this.showClearButton = value;\r\n        this.closeButtonEl.style.display = this.showClearButton ? \"\" : \"none\";\r\n        this.doUpdate();\r\n    },\r\n    getShowClearButton: function () {\r\n        return this.showClearButton;\r\n    },\r\n    setShowOkButton: function (value) {\r\n        this.showOkButton = value;\r\n        this.okButtonEl.style.display = this.showOkButton ? \"\" : \"none\";\r\n        this.doUpdate();\r\n    },\r\n    getShowOkButton: function () {\r\n        return this.showOkButton;\r\n    },\r\n\r\n    setViewDate: function (value) {\r\n        value = mini.parseDate(value);\r\n        if (!value) value = new Date();\r\n        if (mini.isDate(value)) value = new Date(value.getTime());\r\n        this.viewDate = value;\r\n        this.doUpdate();\r\n    },\r\n    getViewDate: function () {\r\n        return this.viewDate;\r\n    },\r\n    setSelectedDate: function (value) {\r\n        value = mini.parseDate(value);\r\n        if (!mini.isDate(value)) value = \"\";\r\n        else value = new Date(value.getTime());\r\n\r\n        var dateEl = this.getDateEl(this._selectedDate);\r\n        if (dateEl) mini.removeClass(dateEl, this._selectedDateCls);\r\n\r\n\r\n        this._selectedDate = value;\r\n        if (this._selectedDate) this._selectedDate = mini.cloneDate(this._selectedDate);\r\n\r\n        var dateEl = this.getDateEl(this._selectedDate);\r\n        if (dateEl) mini.addClass(dateEl, this._selectedDateCls);\r\n\r\n        this.fire(\"datechanged\");\r\n\r\n    },\r\n    setSelectedDates: function (value) {\r\n        if (!mini.isArray(value)) value = [];\r\n        this._selectedDates = value;\r\n        this.doUpdate();\r\n    },\r\n    getSelectedDate: function () {\r\n        return this._selectedDate ? this._selectedDate : \"\";\r\n    },\r\n    setTime: function (time) {\r\n        this.timeSpinner.setValue(time);\r\n    },\r\n    getTime: function () {\r\n        return this.timeSpinner.getFormValue();\r\n    },\r\n    setValue: function (value) {\r\n        this.setSelectedDate(value);\r\n        if (!value) {\r\n            value = new Date();\r\n        }\r\n        this.setTime(value);\r\n    },\r\n    getValue: function () {\r\n        var d = this._selectedDate;\r\n        if (d) {\r\n            d = mini.clearTime(d);\r\n            if (this.showTime) {\r\n\r\n                var d2 = this.timeSpinner.getValue();\r\n\r\n                if (d2) {\r\n                    d.setHours(d2.getHours());\r\n                    d.setMinutes(d2.getMinutes());\r\n                    d.setSeconds(d2.getSeconds());\r\n                }\r\n            }\r\n        }\r\n        return d ? d : \"\";\r\n    },\r\n    getFormValue: function () {\r\n        var d = this.getValue();\r\n        if (d) return mini.formatDate(d, 'yyyy-MM-dd HH:mm:ss');\r\n        return \"\";\r\n    },\r\n    isSelectedDate: function (date) {\r\n        if (!date || !this._selectedDate) return false;\r\n        return mini.clearTime(date).getTime()\r\n                == mini.clearTime(this._selectedDate).getTime();\r\n    },\r\n    setMultiSelect: function (value) {\r\n        this.multiSelect = value;\r\n        this.doUpdate();\r\n    },\r\n    getMultiSelect: function () {\r\n        return this.multiSelect;\r\n    },\r\n    setRows: function (value) {\r\n        if (isNaN(value)) return;\r\n        if (value < 1) value = 1;\r\n        this.rows = value;\r\n        this.doUpdate();\r\n    },\r\n    getRows: function () {\r\n        return this.rows;\r\n    },\r\n    setColumns: function (value) {\r\n        if (isNaN(value)) return;\r\n        if (value < 1) value = 1;\r\n        this.columns = value;\r\n        this.doUpdate();\r\n    },\r\n    getColumns: function () {\r\n        return this.columns;\r\n    },\r\n    setShowTime: function (value) {\r\n        if (this.showTime != value) {\r\n            this.showTime = value;\r\n            this.timeWrapEl.style.display = this.showTime ? '' : \"none\";\r\n\r\n            jQuery(this._footerEl).toggleClass(\"mini-calendar-hastime\", this.showTime);\r\n            this.doLayout();\r\n        }\r\n    },\r\n    getShowTime: function () {\r\n        return this.showTime;\r\n    },\r\n    setTimeFormat: function (value) {\r\n        if (this.timeFormat != value) {\r\n\r\n            this.timeSpinner.setFormat(value);\r\n            this.timeFormat = this.timeSpinner.format;\r\n        }\r\n    },\r\n    getTimeFormat: function () {\r\n        return this.timeFormat;\r\n    },\r\n    doLayout: function () {\r\n\r\n        if (!this.canLayout()) return;\r\n\r\n        this.timeWrapEl.style.display = this.showTime ? '' : \"none\";\r\n        this.todayButtonEl.style.display = this.showTodayButton ? \"\" : \"none\";\r\n        this.closeButtonEl.style.display = this.showClearButton ? \"\" : \"none\";\r\n\r\n\r\n        this.yesterdayButtonEl.style.display = this.showYesterdayButton ? \"\" : \"none\";\r\n\r\n\r\n        this.okButtonEl.style.display = this.showOkButton ? \"\" : \"none\";\r\n        this.footerSpaceEl.style.display = (this.showClearButton && this.showTodayButton) ? \"\" : \"none\";\r\n\r\n        this._footerEl.style.display = this.showFooter ? \"\" : \"none\";\r\n\r\n        var views = this._innerEl.firstChild;\r\n\r\n        var autoHeight = this.isAutoHeight();\r\n        if (!autoHeight) {\r\n\r\n            views.parentNode.style.height = \"100px\";\r\n            h = jQuery(this.el).height();\r\n            //views.style.display = \"\";\r\n\r\n            h -= jQuery(this._footerEl).outerHeight()\r\n\r\n            views.parentNode.style.height = h + \"px\";\r\n        } else {\r\n            views.parentNode.style.height = \"\";\r\n        }\r\n\r\n        mini.layout(this._footerEl);\r\n\r\n\r\n        if (this.monthPicker) this._tryShowMenu();\r\n    },\r\n    doUpdate: function () {\r\n        if (!this._allowUpdate) return;\r\n\r\n        var viewDate = new Date(this.viewDate.getTime());\r\n        var isOne = this.rows == 1 && this.columns == 1;\r\n        var h = 100 / this.rows;\r\n        var s = '<table class=\"mini-calendar-views\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">';\r\n        for (var i = 0, l = this.rows; i < l; i++) {\r\n            s += '<tr >';\r\n            for (var j = 0, k = this.columns; j < k; j++) {\r\n                s += '<td style=\"height:' + h + '%\">';\r\n\r\n                s += this._CreateView(viewDate, i, j);\r\n\r\n                s += '</td>';\r\n\r\n                viewDate = new Date(viewDate.getFullYear(), viewDate.getMonth() + 1, 1);\r\n            }\r\n            s += '</tr>';\r\n        }\r\n\r\n        s += '</table>';\r\n        this._innerEl.innerHTML = s;\r\n\r\n        var el = this.el;\r\n        setTimeout(function () {\r\n            mini.repaint(el);\r\n        }, 100);\r\n\r\n        this.doLayout();\r\n    },\r\n    _CreateView: function (viewDate, row, column) {\r\n        var month = viewDate.getMonth();\r\n        var date = this.getFirstDateOfMonth(viewDate);\r\n        var firstDateOfWeek = new Date(date.getTime());\r\n        var todayTime = mini.clearTime(new Date()).getTime();\r\n        var selectedTime = this.value ? mini.clearTime(this.value).getTime() : -1;\r\n\r\n        var multiView = this.rows > 1 || this.columns > 1;\r\n\r\n        var s = '';\r\n        s += '<table class=\"mini-calendar-view\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">';\r\n        //header\r\n        if (this.showHeader) {\r\n            s += '<tr ><td colSpan=\"10\" class=\"mini-calendar-header\"><div class=\"mini-calendar-headerInner\">';\r\n            if (row == 0 && column == 0) {\r\n                s += '<div class=\"mini-calendar-prev mini-icon\">';\r\n                if (this.showYearButtons) s += '<span class=\"mini-calendar-yearPrev mini-icon\"></span>';\r\n                if (this.showMonthButtons) s += '<span class=\"mini-calendar-monthPrev mini-icon\"></span>';\r\n                s += '</div>';\r\n            }\r\n            if (row == 0 && column == this.columns - 1) {\r\n                s += '<div class=\"mini-calendar-next mini-icon\">';\r\n                if (this.showMonthButtons) s += '<span class=\"mini-calendar-monthNext mini-icon\"></span>';\r\n                if (this.showYearButtons) s += '<span class=\"mini-calendar-yearNext mini-icon\"></span>';\r\n                s += '</div>';\r\n            }\r\n            s += '<span class=\"mini-calendar-title\">' + mini.formatDate(viewDate, this.format); +'</span>';\r\n            s += '</div></td></tr>';\r\n        }\r\n\r\n        //daysHeader\r\n        if (this.showDaysHeader) {\r\n            s += '<tr class=\"mini-calendar-daysheader\"><td class=\"mini-calendar-space\"></td>';\r\n            if (this.showWeekNumber) {\r\n                s += '<td sclass=\"mini-calendar-weeknumber\"></td>';\r\n            }\r\n\r\n            for (var j = this.firstDayOfWeek, k = j + 7; j < k; j++) {\r\n                var name = this.getShortWeek(j);\r\n                s += '<td yAlign=\"middle\">';\r\n                s += name;\r\n                s += '</td>';\r\n                date = new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1);\r\n            }\r\n            s += '<td class=\"mini-calendar-space\"></td></tr>';\r\n        }\r\n\r\n        //days\r\n        date = firstDateOfWeek;\r\n        for (var i = 0; i <= 5; i++) {\r\n            s += '<tr class=\"mini-calendar-days\"><td class=\"mini-calendar-space\"></td>';\r\n            if (this.showWeekNumber) {\r\n                var num = mini.getWeek(date.getFullYear(), date.getMonth() + 1, date.getDate());\r\n                if (String(num).length == 1) num = \"0\" + num;\r\n                s += '<td class=\"mini-calendar-weeknumber\" yAlign=\"middle\">' + num + '</td>';\r\n            }\r\n            for (var j = this.firstDayOfWeek, k = j + 7; j < k; j++) {\r\n                var weekend = this.isWeekend(date);\r\n                var clearTime = mini.clearTime(date).getTime();\r\n                var isToday = clearTime == todayTime;\r\n                var isSelected = this.isSelectedDate(date);\r\n\r\n                if (month != date.getMonth() && multiView) {\r\n                    clearTime = -1;\r\n                }\r\n\r\n                var e = this._OnDrawDate(date);\r\n\r\n                s += '<td yAlign=\"middle\" id=\"';\r\n                s += this.uid + \"$\" + clearTime;\r\n                s += '\" class=\"mini-calendar-date ';\r\n                if (weekend) {\r\n                    s += ' mini-calendar-weekend '\r\n                }\r\n                if (e.allowSelect == false) {\r\n                    s += ' mini-calendar-disabled '\r\n                }\r\n\r\n                if (month != date.getMonth() && multiView) {\r\n                } else {\r\n                    if (isSelected) {\r\n                        s += ' ' + this._selectedDateCls + ' ';\r\n                    }\r\n                    if (isToday) {\r\n                        s += ' mini-calendar-today '\r\n                    }\r\n                }\r\n                if (month != date.getMonth()) {\r\n                    s += ' mini-calendar-othermonth ';\r\n                }\r\n\r\n                if (e.dateCls) s += ' ' + e.dateCls;\r\n\r\n                s += '\" style=\"';\r\n                if (e.dateStyle) s += e.dateStyle;\r\n                s += '\">';\r\n\r\n                if (month != date.getMonth() && multiView) {\r\n                } else {\r\n\r\n                    s += e.dateHtml;\r\n                }\r\n                s += '</td>';\r\n\r\n                date = new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1);\r\n            }\r\n            s += '<td class=\"mini-calendar-space\"></td></tr>';\r\n        }\r\n        s += '<tr class=\"mini-calendar-bottom\" colSpan=\"10\"><td ></td></tr>';\r\n\r\n        s += '</table>';\r\n        return s;\r\n    },\r\n    _OnDrawDate: function (date) {\r\n        var e = {\r\n            date: date,\r\n            dateCls: \"\",\r\n            dateStyle: \"\",\r\n            dateHtml: date.getDate(),\r\n            allowSelect: true\r\n\r\n        };\r\n        this.fire(\"drawdate\", e);\r\n        return e;\r\n    },\r\n    _OnDateClick: function (date, action) {\r\n\r\n\r\n        var e = { date: date, action: action };\r\n        this.fire(\"dateclick\", e);\r\n\r\n        this._OnValueChanged();\r\n\r\n        this.hideMenu();\r\n    },\r\n    /////////////////////////////////////////////\r\n    menuEl: null,\r\n    menuYear: null,\r\n    menuSelectMonth: null,\r\n    menuSelectYear: null,\r\n    _tryShowMenu: function () {\r\n        if (!this.menuEl) {\r\n            var that = this;\r\n\r\n            setTimeout(function () {\r\n                that.showMenu();\r\n            }, 1);\r\n        }\r\n    },\r\n    showMenu: function () {\r\n\r\n        this.hideMenu();\r\n\r\n        this.menuYear = parseInt(this.viewDate.getFullYear() / 10) * 10;\r\n        this._menuselectMonth = this.viewDate.getMonth();\r\n        this._menuselectYear = this.viewDate.getFullYear();\r\n\r\n        var s = '<div class=\"mini-calendar-menu\"></div>';\r\n        this.menuEl = mini.append(document.body, s);\r\n        this.updateMenu(this.viewDate);\r\n\r\n        var box = this.getBox();\r\n        //        box.x += 1;\r\n        //        box.y += 1;\r\n        //        box.width -= 2;\r\n        //        box.height -= 2;\r\n\r\n        //        var border = mini.getBorders(this.el);\r\n        //        debugger\r\n        if (this.el.style.borderWidth == \"0px\") {\r\n            this.menuEl.style.border = \"0\";\r\n        }\r\n        mini.setBox(this.menuEl, box);\r\n\r\n        //        var elBox = mini.getBox(el);\r\n        //        var x = elBox.x, y = elBox.y;\r\n\r\n        //        mini.setX(this.menuEl, x);\r\n        //        mini.setY(this.menuEl, y);\r\n\r\n        mini.on(this.menuEl, \"click\", this.__OnMenuClick, this);\r\n        mini.on(this.menuEl, \"dblclick\", this.__OnMenuDblClick, this);\r\n        mini.on(document, \"mousedown\", this.__OnBodyMenuMouseDown, this);\r\n    },\r\n    //        hide: function () {debugger\r\n    //            mini.Calendar.superclass.hide.call(this);\r\n    //            this.hideMenu();\r\n    //        },\r\n    hideMenu: function () {\r\n\r\n        if (this.menuEl) {\r\n            mini.un(this.menuEl, \"click\", this.__OnMenuClick, this);\r\n            mini.un(document, \"mousedown\", this.__OnBodyMenuMouseDown, this);\r\n            jQuery(this.menuEl).remove();\r\n            this.menuEl = null;\r\n        }\r\n    },\r\n    updateMenu: function () {\r\n        if (!this.menuEl) return;\r\n        var s = '<div class=\"mini-calendar-menu-months\">';\r\n        for (var i = 0, l = 12; i < l; i++) {\r\n            var text = mini.getShortMonth(i);\r\n            var cls = \"\";\r\n            if (this._menuselectMonth == i) cls = \"mini-calendar-menu-selected\";\r\n            s += '<a id=\"' + i + '\" class=\"mini-calendar-menu-month ' + cls + '\" href=\"javascript:void(0);\" hideFocus onclick=\"return false\">' + text + '</a>';\r\n        }\r\n        s += '<div style=\"clear:both;\"></div></div>';\r\n\r\n        s += '<div class=\"mini-calendar-menu-years\">';\r\n        for (var i = this.menuYear, l = this.menuYear + 10; i < l; i++) {\r\n            var text = i;\r\n            var cls = \"\";\r\n            if (this._menuselectYear == i) cls = \"mini-calendar-menu-selected\";\r\n            s += '<a id=\"' + i + '\" class=\"mini-calendar-menu-year ' + cls + '\" href=\"javascript:void(0);\" hideFocus onclick=\"return false\">' + text + '</a>';\r\n        }\r\n        s += '<div class=\"mini-calendar-menu-prevYear mini-icon\"></div><div class=\"mini-calendar-menu-nextYear mini-icon\"></div><div style=\"clear:both;\"></div></div>';\r\n\r\n        s += '<div class=\"mini-calendar-footer\">'\r\n            + '<span class=\"mini-calendar-okButton mini-calendar-button mini-corner-all\">' + this.okText + '</span>'\r\n            + '<span class=\"mini-calendar-footerSpace\"></span>'\r\n            + '<span class=\"mini-calendar-cancelButton mini-calendar-button mini-corner-all\">' + this.cancelText + '</span>'\r\n            + '</div><div style=\"clear:both;\"></div>';\r\n\r\n        this.menuEl.innerHTML = s;\r\n    },\r\n    __OnMenuClick: function (e) {\r\n\r\n        var me = this,\r\n            t = e.target,\r\n            monthCls = \"mini-calendar-menu-month\",\r\n            yearCls = \"mini-calendar-menu-year\",\r\n            selCls = \"mini-calendar-menu-selected\";\r\n\r\n\r\n        function updateMenu() {\r\n            setTimeout(function () {\r\n                me.updateMenu();\r\n            }, 30);\r\n        }\r\n\r\n        var monthEl = mini.findParent(t, monthCls);\r\n        var yearEl = mini.findParent(t, yearCls);\r\n\r\n        if (monthEl) {\r\n            this._menuselectMonth = parseInt(monthEl.id);\r\n            //updateMenu();\r\n\r\n            jQuery(\".\" + monthCls, me.menuEl).removeClass(selCls);\r\n            jQuery(t).parent().find(\"#\" + this._menuselectMonth).addClass(selCls);\r\n\r\n        }\r\n        else if (yearEl) {\r\n            this._menuselectYear = parseInt(yearEl.id);\r\n            //updateMenu();\r\n\r\n            jQuery(\".\" + yearCls, me.menuEl).removeClass(selCls);\r\n            jQuery(t).parent().find(\"#\" + this._menuselectYear).addClass(selCls);\r\n        }\r\n        else if (mini.findParent(t, \"mini-calendar-menu-prevYear\")) {\r\n            this.menuYear = this.menuYear - 1;\r\n            this.menuYear = parseInt(this.menuYear / 10) * 10;\r\n            updateMenu();\r\n        }\r\n        else if (mini.findParent(t, \"mini-calendar-menu-nextYear\")) {\r\n            this.menuYear = this.menuYear + 11;\r\n            this.menuYear = parseInt(this.menuYear / 10) * 10;\r\n            updateMenu();\r\n        }\r\n        else if (mini.findParent(t, \"mini-calendar-okButton\")) {\r\n            this.__getMonthYear();\r\n        }\r\n        else if (mini.findParent(t, \"mini-calendar-cancelButton\")) {\r\n            if (this.monthPicker) {\r\n\r\n                this._OnDateClick(null, \"cancel\");\r\n            } else {\r\n                this.hideMenu();\r\n            }\r\n        }\r\n    },\r\n    __OnMenuDblClick: function (e) {\r\n\r\n        var yearEl = mini.findParent(e.target, \"mini-calendar-menu-year\");\r\n        var monthEl = mini.findParent(e.target, \"mini-calendar-menu-month\");\r\n        var dateEl = mini.findParent(e.target, \"mini-calendar-date \");\r\n\r\n        if (!yearEl && !monthEl && !dateEl) return;\r\n\r\n        if (this.monthPicker) {\r\n\r\n            if (!monthEl && !yearEl) return;\r\n        }\r\n\r\n        this.__getMonthYear();\r\n\r\n    },\r\n    __getMonthYear: function () {\r\n        var date = new Date(this._menuselectYear, this._menuselectMonth, 1);\r\n        if (this.monthPicker) {\r\n            this.setViewDate(date);\r\n            this.setSelectedDate(date);\r\n            this._OnDateClick(date);\r\n        } else {\r\n            this.setViewDate(date);\r\n            this.hideMenu();\r\n        }\r\n    },\r\n    __OnBodyMenuMouseDown: function (e) {\r\n        if (!mini.findParent(e.target, \"mini-calendar-menu\")) {\r\n            if (!mini.findParent(e.target, \"mini-monthpicker\")) {\r\n                //if (!this.monthPicker) {\r\n                this.hideMenu();\r\n                //}\r\n\r\n            }\r\n        }\r\n    },\r\n    ///////////////////////////////////////////////\r\n    __OnClick: function (e) {\r\n        var viewDate = this.viewDate;\r\n        if (this.enabled == false) return;\r\n        var t = e.target;\r\n        var titleEl = mini.findParent(e.target, \"mini-calendar-title\");\r\n\r\n        if (mini.findParent(t, \"mini-calendar-monthNext\")) {\r\n            viewDate.setDate(1);\r\n            viewDate.setMonth(viewDate.getMonth() + 1);\r\n            this.setViewDate(viewDate);\r\n        }\r\n        else if (mini.findParent(t, \"mini-calendar-yearNext\")) {\r\n            //viewDate.setMonth(0);\r\n            viewDate.setDate(1);\r\n            viewDate.setFullYear(viewDate.getFullYear() + 1);\r\n            this.setViewDate(viewDate);\r\n        }\r\n        else if (mini.findParent(t, \"mini-calendar-monthPrev\")) {\r\n            viewDate.setMonth(viewDate.getMonth() - 1);\r\n            this.setViewDate(viewDate);\r\n        }\r\n        else if (mini.findParent(t, \"mini-calendar-yearPrev\")) {\r\n            viewDate.setFullYear(viewDate.getFullYear() - 1);\r\n            this.setViewDate(viewDate);\r\n        }\r\n        else if (mini.findParent(t, \"mini-calendar-tadayButton\")) {\r\n\r\n            // var d = mini.clearTime(new Date());\r\n            var isYesterday = !!mini.findParent(t, \"yesterday\");\r\n\r\n            var d = new Date();\r\n            if (isYesterday) {\r\n                d.setDate(d.getDate() - 1);\r\n            }\r\n            this.setViewDate(d);\r\n            this.setSelectedDate(d);\r\n            if (this.currentTime) {\r\n                var td = new Date();\r\n                this.setTime(td);\r\n            }\r\n            this._OnDateClick(d, \"today\");\r\n        }\r\n        else if (mini.findParent(t, \"mini-calendar-clearButton\")) {\r\n            this.setSelectedDate(null);\r\n            this.setTime(null);\r\n            this._OnDateClick(null, \"clear\");\r\n        } else if (mini.findParent(t, \"mini-calendar-okButton\")) {\r\n            this._OnDateClick(null, \"ok\");\r\n            //            this.setSelectedDate(null);\r\n            //            this.setTime(null);\r\n            //            this._OnDateClick(null, \"clear\");\r\n        } else if (titleEl) {\r\n            this.showMenu();\r\n        }\r\n\r\n        var dateEl = mini.findParent(e.target, \"mini-calendar-date\");\r\n\r\n        if (dateEl && !mini.hasClass(dateEl, \"mini-calendar-disabled\")) {\r\n            var ids = dateEl.id.split(\"$\");\r\n            var time = parseInt(ids[ids.length - 1]);\r\n            if (time == -1) return;\r\n            var date = new Date(time);\r\n\r\n            this._OnDateClick(date);\r\n        }\r\n\r\n        //this.focus();\r\n    },\r\n    __OnMouseDown: function (e) {\r\n        if (this.enabled == false) return;\r\n        var dateEl = mini.findParent(e.target, \"mini-calendar-date\");\r\n        if (dateEl && !mini.hasClass(dateEl, \"mini-calendar-disabled\")) {\r\n            var ids = dateEl.id.split(\"$\");\r\n            var time = parseInt(ids[ids.length - 1]);\r\n            if (time == -1) return;\r\n            var date = new Date(time);\r\n            this.setSelectedDate(date);\r\n        }\r\n    },\r\n    __OnTimeChanged: function (e) {\r\n        this.fire(\"timechanged\");\r\n        this._OnValueChanged();\r\n    },\r\n\r\n    __OnKeyDown: function (e) {\r\n        if (this.enabled == false) return;\r\n        //\r\n        //alert(1);\r\n        var date = this.getSelectedDate();\r\n        if (!date) date = new Date(this.viewDate.getTime());\r\n        switch (e.keyCode) {\r\n            case 27:        //esc\r\n\r\n                break;\r\n            case 13:     //enter\r\n                if (date) {\r\n                    //e.stopPropagation();\r\n                    this._OnDateClick(date);\r\n                }\r\n                return;\r\n                break;\r\n            case 37:    //left\r\n                date = mini.addDate(date, -1, 'D');\r\n                break;\r\n            case 38:    //top      \r\n                date = mini.addDate(date, -7, 'D');\r\n                break;\r\n            case 39:    //right\r\n                date = mini.addDate(date, 1, 'D');\r\n                break;\r\n            case 40:    //bottom                   \r\n                date = mini.addDate(date, 7, 'D');\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        var me = this;\r\n\r\n\r\n        if (date.getMonth() != me.viewDate.getMonth()) {\r\n            me.setViewDate(mini.cloneDate(date));\r\n            me.focus();\r\n        }\r\n\r\n        var dateEl = this.getDateEl(date);\r\n        if (dateEl && mini.hasClass(dateEl, \"mini-calendar-disabled\")) {\r\n            return;\r\n        }\r\n\r\n        me.setSelectedDate(date);\r\n\r\n        if (e.keyCode == 37 || e.keyCode == 38 || e.keyCode == 39 || e.keyCode == 40) {\r\n            e.preventDefault();\r\n        }\r\n\r\n    },\r\n\r\n    _OnValueChanged: function () {\r\n        this.fire(\"valuechanged\");\r\n    },\r\n    ////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Calendar.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"viewDate\", \"rows\", \"columns\",\r\n                \"ondateclick\", \"ondrawdate\", \"ondatechanged\", \"timeFormat\", \"ontimechanged\", \"onvaluechanged\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"multiSelect\", \"showHeader\", \"showFooter\", \"showWeekNumber\", \"showDaysHeader\",\r\n            \"showMonthButtons\", \"showYearButtons\", \"showTodayButton\", \"showClearButton\", \"showYesterdayButton\",\r\n            \"showTime\", \"showOkButton\"\r\n             ]\r\n        );\r\n\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.Calendar, \"calendar\");\r\n\r\n\r\n/*\r\n    setSelectedDate     只设置Date\r\n    setTime             只设置Time\r\n    setValue            同时设置Date和Time\r\n                        getValue同理\r\n\r\n    1.点击日期格子，只修改Date\r\n    2.clearButton       清除Date和Time\r\n    3.todayButton       1）不修改Time；2）将Time设置为当前日期currentTime=true\r\n                        这个不需要。\r\n                        实现方式：监听DateClick事件，让用户来设置小时\r\n\r\n    事件：\r\n        valuechanged\r\n        datechanged\r\n        timechanged\r\n\r\n*/\n\r\nmini.ListBox = function () {\r\n    mini.ListBox.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.ListBox, mini.ListControl, {\r\n    formField: true,\r\n\r\n    //width: 200,\r\n    columns: null,\r\n    columnWidth: 80,\r\n\r\n    showNullItem: false,\r\n    nullItemText: \"\",\r\n\r\n    showEmpty: false,\r\n    emptyText: \"\",\r\n\r\n    showCheckBox: false,\r\n    showAllCheckBox: true,\r\n    multiSelect: false,\r\n\r\n\r\n    _itemCls: \"mini-listbox-item\",\r\n    _itemHoverCls: \"mini-listbox-item-hover\",\r\n    _itemSelectedCls: \"mini-listbox-item-selected\",\r\n\r\n    uiCls: \"mini-listbox\",\r\n    _create: function () {\r\n        var el = this.el = document.createElement(\"div\");\r\n        this.el.className = \"mini-listbox\";\r\n\r\n        this.el.innerHTML = '<div class=\"mini-listbox-border\"><div class=\"mini-listbox-header\"></div><div class=\"mini-listbox-view\"></div><input type=\"hidden\"/></div><div class=\"mini-errorIcon\"></div>';\r\n\r\n        this._borderEl = this.el.firstChild;\r\n        this._headerEl = this._borderEl.firstChild;\r\n        this._viewEl = this._borderEl.childNodes[1];\r\n        this._valueEl = this._borderEl.childNodes[2];\r\n\r\n        this._errorIconEl = this.el.lastChild;\r\n\r\n        this._scrollViewEl = this._viewEl;\r\n\r\n\r\n        this._viewEl.innerHTML = '<div class=\"mini-grid-rows-content\"></div>';\r\n\r\n        this._contentEl = this._viewEl.firstChild;\r\n    },\r\n    _initEvents: function () {\r\n        mini.ListBox.superclass._initEvents.call(this);\r\n        mini._BindEvents(function () {\r\n            mini_onOne(this._viewEl, \"scroll\", this.__OnScroll, this);\r\n\r\n            //mini.on(this._viewEl, \"scroll\", this.__OnScroll, this);\r\n        }, this);\r\n\r\n    },\r\n    destroy: function (removeEl) {\r\n        if (this._viewEl) {\r\n            this._viewEl.onscroll = null;\r\n            mini.clearEvent(this._viewEl);\r\n            this._viewEl = null;\r\n        }\r\n        this._borderEl = this._headerEl = this._viewEl = this._valueEl = this._errorIconEl = this._scrollViewEl = this._contentEl = null;\r\n        mini.ListBox.superclass.destroy.call(this, removeEl);\r\n    },\r\n    setColumns: function (value) {\r\n        //{name, visible, header, field，width, headerAlign, align, headerCls, cellCls, headerStyle, cellStyle}\r\n        if (!mini.isArray(value)) value = [];\r\n        this.columns = value;\r\n\r\n        for (var i = 0, l = this.columns.length; i < l; i++) {\r\n            var column = this.columns[i];\r\n\r\n            if (column.type) {\r\n                if (!mini.isNull(column.header) && typeof column.header !== \"function\") {\r\n                    if (column.header.trim() == \"\") {\r\n                        delete column.header;\r\n                    }\r\n                }\r\n                var col = mini._getColumn(column.type);\r\n                if (col) {\r\n                    var _column = mini.copyTo({}, column);\r\n                    mini.copyTo(column, col);\r\n                    mini.copyTo(column, _column);\r\n                }\r\n            }\r\n\r\n            var width = parseInt(column.width);\r\n            if (mini.isNumber(width) && String(width) == column.width) column.width = width + \"px\";\r\n            if (mini.isNull(column.width)) column.width = this.columnWidth + \"px\";\r\n        }\r\n\r\n        this.doUpdate();\r\n    },\r\n\r\n    isVisibleColumn: function (column) {\r\n        column = this.getColumn(column);\r\n        if (column.visible == false) return false;\r\n        return true;\r\n    },\r\n    getColumn: function (index) {\r\n        var t = typeof index;\r\n        if (t == \"number\") return this.columns[index];\r\n        else if (t == \"object\") return index;\r\n        else {\r\n            for (var i = 0, l = this.columns.length; i < l; i++) {\r\n                var col = this.columns[i];\r\n                if (col.name == index) {\r\n                    return col;\r\n                }\r\n            }\r\n            return null;\r\n            //return this._nameColumns[index];\r\n        }\r\n    },\r\n    hideColumn: function (column) {\r\n        column = this.getColumn(column);\r\n        if (!column) return;\r\n\r\n        column.visible = false;\r\n\r\n        //        for (var i = 0, l = this.columns.length; i < l; i++) {\r\n        //            var col = this.columns[i];\r\n        //            if (col.name == column.name) {\r\n        //                col.visible = false;\r\n        //            }\r\n        //        }\r\n        //this.setColumns(this.columns);\r\n\r\n        this.doUpdate();\r\n    },\r\n    showColumn: function (column) {\r\n\r\n        column = this.getColumn(column);\r\n        if (!column) return;\r\n        column.visible = true;\r\n        //        for (var i = 0, l = this.columns.length; i < l; i++) {\r\n        //            var col = this.columns[i];\r\n        //            if (col.name == column.name) {\r\n        //                col.visible = true;\r\n        //            }\r\n        //        }\r\n        //this.setColumns(this.columns);\r\n\r\n        this.doUpdate();\r\n    },\r\n\r\n\r\n    getColumns: function () {\r\n        return this.columns;\r\n    },\r\n    doUpdate: function () {\r\n        if (this._allowUpdate === false) return;\r\n        var hasColumns = this.columns && this.columns.length > 0;\r\n\r\n        if (hasColumns) {\r\n            mini.addClass(this.el, \"mini-listbox-showColumns\");\r\n        } else {\r\n            mini.removeClass(this.el, \"mini-listbox-showColumns\");\r\n        }\r\n        this._headerEl.style.display = hasColumns ? \"\" : \"none\";\r\n\r\n        var sb = [];\r\n        if (hasColumns) {\r\n            sb[sb.length] = '<table class=\"mini-listbox-headerInner\" cellspacing=\"0\" cellpadding=\"0\"><tr>';\r\n            var ckAllId = this.uid + \"$ck$all\";\r\n            if (this.showCheckBox) {\r\n                sb[sb.length] = '<td class=\"mini-listbox-checkbox\"><input type=\"checkbox\" id=\"' + ckAllId + '\"></td>';\r\n            }\r\n            for (var j = 0, k = this.columns.length; j < k; j++) {\r\n                var column = this.columns[j];\r\n\r\n                if (column.visible === false) {\r\n                    continue;\r\n                }\r\n\r\n                var header = column.header;\r\n                if (mini.isNull(header)) header = '&nbsp;';\r\n\r\n                var w = column.width;\r\n                if (mini.isNumber(w)) w = w + \"px\";\r\n\r\n                sb[sb.length] = '<td class=\"';\r\n                if (column.headerCls) sb[sb.length] = column.headerCls;\r\n                sb[sb.length] = '\" style=\"';\r\n                if (column.headerStyle) sb[sb.length] = column.headerStyle + \";\";\r\n                if (w) {\r\n                    sb[sb.length] = 'width:' + w + ';';\r\n                }\r\n                if (column.headerAlign) {\r\n                    sb[sb.length] = 'text-align:' + column.headerAlign + ';';\r\n                }\r\n\r\n\r\n                sb[sb.length] = '\">';\r\n                sb[sb.length] = header;\r\n                sb[sb.length] = '</td>';\r\n            }\r\n            sb[sb.length] = '</tr></table>';\r\n        }\r\n        this._headerEl.innerHTML = sb.join('');\r\n\r\n        var sb = [];\r\n        var data = this.data;\r\n\r\n        sb[sb.length] = '<table class=\"mini-listbox-items\" cellspacing=\"0\" cellpadding=\"0\">';\r\n\r\n        if (this.showEmpty && data.length == 0) {\r\n\r\n            sb[sb.length] = '<tr><td colspan=\"20\">' + this.emptyText + '</td></tr>';\r\n        } else {\r\n            this._doNullItem();\r\n\r\n            for (var i = 0, l = data.length; i < l; i++) {\r\n                var item = data[i];\r\n\r\n                var rowClsIndex = -1;\r\n                var rowCls = \" \";\r\n                var rowStyleIndex = -1;\r\n                var rowStyle = \" \";\r\n\r\n                sb[sb.length] = '<tr id=\"';\r\n                sb[sb.length] = this._createItemId(i);\r\n                sb[sb.length] = '\" index=\"';\r\n                sb[sb.length] = i;\r\n                sb[sb.length] = '\" class=\"mini-listbox-item ';\r\n\r\n                if (item.enabled === false) {\r\n                    sb[sb.length] = ' mini-disabled ';\r\n                }\r\n\r\n                rowClsIndex = sb.length;\r\n                sb[sb.length] = rowCls;\r\n                sb[sb.length] = '\" style=\"';\r\n                rowStyleIndex = sb.length;\r\n                sb[sb.length] = rowStyle;\r\n                sb[sb.length] = '\">';\r\n\r\n                var ckid = this._createCheckId(i);\r\n                var ckName = this.name;\r\n                var ckValue = this.getItemValue(item);\r\n\r\n                var disable = '';\r\n                if (item.enabled === false) {\r\n                    disable = 'disabled';\r\n                }\r\n\r\n                if (this.showCheckBox) {\r\n                    if (item.__NullItem === true) {\r\n                        sb[sb.length] = '<td class=\"mini-listbox-checkbox\"></td>';\r\n                    } else {\r\n                        sb[sb.length] = '<td class=\"mini-listbox-checkbox\"><input ' + disable + ' id=\"' + ckid + '\" type=\"checkbox\" ></td>';\r\n                    }\r\n                }\r\n\r\n                //sb[sb.length] = '<td class=\"mini-listbox-checkbox\"><input ' + disable + ' id=\"' + ckid + '\" type=\"checkbox\" ></td>';\r\n\r\n                if (hasColumns) {\r\n                    for (var j = 0, k = this.columns.length; j < k; j++) {\r\n                        var column = this.columns[j];\r\n\r\n                        if (column.visible === false) {\r\n                            continue;\r\n                        }\r\n\r\n                        var e = this._OnDrawCell(item, i, column);\r\n\r\n                        var w = column.width;\r\n                        if (typeof w == \"number\") w = w + \"px\";\r\n\r\n                        sb[sb.length] = '<td class=\"';\r\n                        if (e.cellCls) sb[sb.length] = e.cellCls;\r\n                        sb[sb.length] = '\" style=\"';\r\n                        if (e.cellStyle) sb[sb.length] = e.cellStyle + \";\";\r\n                        if (w) {\r\n                            sb[sb.length] = 'width:' + w + ';';\r\n                        }\r\n                        if (column.align) {\r\n                            sb[sb.length] = 'text-align:' + column.align + ';';\r\n                        }\r\n                        sb[sb.length] = '\">';\r\n                        sb[sb.length] = e.cellHtml;\r\n                        sb[sb.length] = '</td>';\r\n\r\n                        if (e.rowCls) rowCls = e.rowCls;\r\n                        if (e.rowStyle) rowStyle = e.rowStyle;\r\n                    }\r\n                } else {\r\n                    var e = this._OnDrawCell(item, i, null);\r\n                    sb[sb.length] = '<td class=\"';\r\n                    if (e.cellCls) sb[sb.length] = e.cellCls;\r\n                    sb[sb.length] = '\" style=\"';\r\n                    if (e.cellStyle) sb[sb.length] = e.cellStyle;\r\n                    sb[sb.length] = '\">';\r\n                    sb[sb.length] = e.cellHtml;\r\n                    sb[sb.length] = '</td>';\r\n\r\n                    if (e.rowCls) rowCls = e.rowCls;\r\n                    if (e.rowStyle) rowStyle = e.rowStyle;\r\n                }\r\n\r\n                sb[rowClsIndex] = rowCls;\r\n                sb[rowStyleIndex] = rowStyle;\r\n\r\n                sb[sb.length] = '</tr>';\r\n            }\r\n        }\r\n        sb[sb.length] = '</table>';\r\n\r\n\r\n        var innerHTML = sb.join(\"\");\r\n\r\n        this._viewEl.firstChild.innerHTML = innerHTML;\r\n\r\n        this._doSelects();\r\n\r\n        this.doLayout();\r\n    },\r\n    doLayout: function (isValid) {\r\n\r\n        //if (!this.canLayout()) return;\r\n        if (this.columns && this.columns.length > 0) {\r\n            // if (this.columns && this.columns.length > 0) {\r\n            mini.addClass(this.el, \"mini-listbox-showcolumns\");\r\n        } else {\r\n            mini.removeClass(this.el, \"mini-listbox-showcolumns\");\r\n        }\r\n        if (this.showCheckBox) {\r\n            mini.removeClass(this.el, \"mini-listbox-hideCheckBox\");\r\n        } else {\r\n            mini.addClass(this.el, \"mini-listbox-hideCheckBox\");\r\n        }\r\n\r\n        var ckAllId = this.uid + \"$ck$all\";\r\n        var ck = document.getElementById(ckAllId);\r\n        if (ck) ck.style.display = this.showAllCheckBox ? \"\" : \"none\";\r\n\r\n        var viewEl = this._viewEl;\r\n        var autoHeight = this.isAutoHeight();\r\n\r\n        if (autoHeight) viewEl.style.height = \"auto\";\r\n\r\n        var h = this.getHeight(true);\r\n        //w = this.getWidth(true);\r\n        var w = mini.getWidth(this._borderEl, true);\r\n        var elWidth = w;\r\n\r\n\r\n\r\n        //不处理宽度\r\n        if (!mini.isIE6) viewEl.style.width = w + \"px\";\r\n\r\n\r\n        ///////////////////////////////////////新处理\r\n\r\n\r\n        var h2 = mini.getHeight(this._headerEl);\r\n        h = h - h2;\r\n        if (h < 0) h = 0;\r\n        viewEl.style.height = h + \"px\";     //setHeight();\r\n\r\n\r\n        ////////////////////////////////////\r\n\r\n        //某些ie9下高度有问题，用以上代码替换\r\n        //        if (!autoHeight) {\r\n\r\n\r\n        //            //            if (jQuery.boxModel) {\r\n        //            //                var padding = mini.getPaddings(this._bodyEl);\r\n        //            //                var border = mini.getBorders(this._bodyEl);\r\n        //            //            }\r\n        //            //            var margin = mini.getMargins(this._bodyEl);\r\n        //            var h2 = mini.getHeight(this._headerEl);\r\n        //            h = h - h2;\r\n        //            viewEl.style.height = h + \"px\";\r\n        //        } else {\r\n        //            viewEl.style.height = \"auto\";\r\n        //        }\r\n\r\n\r\n\r\n        if (isIE) {\r\n\r\n            var table1 = this._headerEl.firstChild, table2 = this._viewEl.firstChild.firstChild;\r\n            if (this._viewEl.offsetHeight >= this._viewEl.scrollHeight) {\r\n                if (table2) table2.style.width = \"100%\";\r\n                if (table1) table1.style.width = \"100%\";\r\n            } else {\r\n                //var w = parseInt(table2.parentNode.offsetWidth - 17) + 'px'\r\n                var w = parseInt(table2.parentNode.offsetWidth) + 'px'\r\n                //table2.style.width = w;\r\n                if (table1) table1.style.width = w;\r\n            }\r\n        }\r\n        if (this._viewEl.offsetHeight < this._viewEl.scrollHeight) {\r\n\r\n            //this._headerEl.style.width = (elWidth - 17) + \"px\";\r\n\r\n            //fix: 某浏览器下滚动条宽度可以设置变化\r\n\r\n            var scrollBarWidth = jQuery(this._viewEl).width() - jQuery(this._contentEl).width();\r\n\r\n            var w = elWidth - scrollBarWidth;\r\n            if (w < 0) w = 0;\r\n            this._headerEl.style.width = w + \"px\";\r\n\r\n        } else {\r\n            this._headerEl.style.width = \"100%\";\r\n        }\r\n        //mini.repaint(this._viewEl);\r\n\r\n        //                this._innerEl.firstChild.style.width = w + \"px\";     \r\n\r\n        //this._headerEl.firstChild.style.width = jQuery(this._viewEl.firstChild).outerHeight() + \"px\";        \r\n    },\r\n    setShowCheckBox: function (value) {\r\n        this.showCheckBox = value;\r\n        this.doUpdate();\r\n        //this.doLayout();\r\n    },\r\n    getShowCheckBox: function () {\r\n        return this.showCheckBox;\r\n    },\r\n    setShowAllCheckBox: function (value) {\r\n        this.showAllCheckBox = value;\r\n        this.doLayout();\r\n    },\r\n    getShowAllCheckBox: function () {\r\n        return this.showAllCheckBox;\r\n    },\r\n    setShowNullItem: function (value) {\r\n        if (this.showNullItem != value) {\r\n            this.showNullItem = value;\r\n\r\n            this._doNullItem();\r\n\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    getShowNullItem: function () {\r\n        return this.showNullItem;\r\n    },\r\n    setNullItemText: function (value) {\r\n\r\n        if (this.nullItemText != value) {\r\n            this.nullItemText = value;\r\n\r\n            this._doNullItem();\r\n\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    getNullItemText: function () {\r\n        return this.nullItemText;\r\n    },\r\n\r\n    _doNullItem: function () {\r\n        for (var i = 0, l = this.data.length; i < l; i++) {\r\n            var item = this.data[i];\r\n            if (item.__NullItem) {\r\n                this.data.removeAt(i);\r\n                break;\r\n            }\r\n        }\r\n        if (this.showNullItem) {\r\n            var item = { __NullItem: true };\r\n            item[this.textField] = \"\"; // this.nullItemText;\r\n            item[this.valueField] = \"\";\r\n            this.data.insert(0, item);\r\n        }\r\n    },\r\n    ///////////////////////////////////////////////////\r\n\r\n    //    moveItems: function (items, index) {\r\n    //        if (!mini.isArray(items) || !mini.isNumber(index)) return;\r\n    //        var target = this.data[index];\r\n\r\n    //        this._allowUpdate = false;\r\n    //        for (var i = 0, l = items.length; i < l; i++) {\r\n    //            var item = items[i];\r\n    //            this.moveItem(index);\r\n    //        }\r\n    //        this._allowUpdate = true;\r\n    //        this.doUpdate();\r\n    //    },\r\n    ///////////////////////////////////////////////////\r\n    _OnDrawCell: function (record, index, column) {\r\n        var value = column ? mini._getMap(column.field, record) : this.getItemText(record);\r\n        var e = {\r\n            sender: this,\r\n            index: index,\r\n            rowIndex: index,\r\n            record: record,\r\n            item: record,\r\n            column: column,\r\n            field: column ? column.field : null,\r\n            value: value,\r\n            cellHtml: value,\r\n            rowCls: null,\r\n            cellCls: column ? (column.cellCls || '') : \"\",\r\n            rowStyle: null,\r\n            cellStyle: column ? (column.cellStyle || '') : \"\"\r\n        };\r\n\r\n        var hasColumns = this.columns && this.columns.length > 0;\r\n        if (!hasColumns) {\r\n            if (index == 0 && this.showNullItem) {\r\n                e.cellHtml = this.nullItemText;\r\n            }\r\n        }\r\n        if (e.autoEscape == true) {\r\n            e.cellHtml = mini.htmlEncode(e.cellHtml);\r\n        }\r\n\r\n        if (column) {\r\n            if (column.dateFormat) {\r\n                if (mini.isDate(e.value)) e.cellHtml = mini.formatDate(value, column.dateFormat);\r\n                else e.cellHtml = value;\r\n            }\r\n            var renderer = column.renderer;\r\n            if (renderer) {\r\n                fn = typeof renderer == \"function\" ? renderer : window[renderer];\r\n                if (fn) {\r\n                    e.cellHtml = fn.call(column, e);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.fire(\"drawcell\", e);\r\n\r\n        if (e.cellHtml === null || e.cellHtml === undefined || e.cellHtml === \"\") e.cellHtml = \"&nbsp;\";\r\n\r\n        return e;\r\n    },\r\n    __OnScroll: function (e) {\r\n        this._headerEl.scrollLeft = this._viewEl.scrollLeft;\r\n    },\r\n    __OnClick: function (e) {\r\n\r\n        var ckAllId = this.uid + \"$ck$all\";\r\n        if (e.target.id == ckAllId) {\r\n            var ck = document.getElementById(ckAllId);\r\n            if (ck) {\r\n                var checked = ck.checked;\r\n\r\n                var value = this.getValue();\r\n                this._oldValue = value;\r\n\r\n                if (checked) {\r\n                    this.selectAll();\r\n                } else {\r\n                    this.deselectAll();\r\n                }\r\n                this._OnSelectionChanged();\r\n\r\n                if (value != this.getValue()) {\r\n                    this._OnValueChanged();\r\n\r\n                    this.fire(\"itemclick\", { htmlEvent: e });\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n        this._fireEvent(e, 'Click');\r\n    },\r\n\r\n    setValue: function (value) {\r\n        mini.ListBox.superclass.setValue.call(this, value);\r\n\r\n        this._doCheckState();\r\n    },\r\n\r\n    _doCheckState: function () {\r\n        //alert(1);\r\n        var ckAllId = this.uid + \"$ck$all\";\r\n        var ck = jQuery(document.getElementById(ckAllId));\r\n        if (this._isSelectedAll() && this.getSelecteds().length != 0) {\r\n            //ck.attr(\"checked\", true)\r\n            if (ck.prop) {\r\n                ck.prop(\"checked\", true);\r\n            } else {\r\n                ck.attr(\"checked\", true)\r\n            }\r\n\r\n        } else {\r\n            //ck.attr(\"checked\", false)            \r\n            if (ck.prop) {\r\n                ck.prop(\"checked\", false);\r\n            } else {\r\n                ck.attr(\"checked\", false)\r\n            }\r\n        }\r\n    },\r\n\r\n    _OnValueChanged: function (e) {\r\n        mini.ListBox.superclass._OnValueChanged.call(this);\r\n\r\n        this._doCheckState();\r\n    },\r\n    ////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.ListBox.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"nullItemText\", \"ondrawcell\"//, \"onclick\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"showCheckBox\", \"showAllCheckBox\", \"showNullItem\"\r\n             ]\r\n        );\r\n\r\n        if (el.nodeName.toLowerCase() != \"select\") {\r\n            var cs = mini.getChildNodes(el);\r\n            for (var i = 0, l = cs.length; i < l; i++) {\r\n                var node = cs[i];\r\n                var property = jQuery(node).attr(\"property\");\r\n                if (!property) continue;\r\n                property = property.toLowerCase();\r\n                if (property == \"columns\") {\r\n                    attrs.columns = mini._ParseColumns(node);\r\n                } else if (property == \"data\") {\r\n                    attrs.data = node.innerHTML;\r\n                }\r\n            }\r\n        }\r\n\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.ListBox, \"listbox\");\n\r\nmini.CheckBoxList = function () {\r\n    mini.CheckBoxList.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.CheckBoxList, mini.ListControl, {\r\n    formField: true,\r\n    _labelFieldCls: 'mini-labelfield-checkboxlist',\r\n\r\n    multiSelect: true,\r\n    repeatItems: 0,\r\n    repeatLayout: \"none\", //none, flow, table\r\n    repeatDirection: \"horizontal\",  //vertical, horizontal\r\n\r\n    _itemCls: \"mini-checkboxlist-item\",\r\n    _itemHoverCls: \"mini-checkboxlist-item-hover\",\r\n    _itemSelectedCls: \"mini-checkboxlist-item-selected\",\r\n\r\n    _tableCls: \"mini-checkboxlist-table\",\r\n    _tdCls: \"mini-checkboxlist-td\",\r\n    _checkType: \"checkbox\",\r\n\r\n    uiCls: \"mini-checkboxlist\",\r\n    _create: function () {\r\n        var el = this.el = document.createElement(\"div\");\r\n        this.el.className = this.uiCls;\r\n\r\n        this.el.innerHTML = '<table cellpadding=\"0\" border=\"0\" cellspacing=\"0\" style=\"display:table;\"><tr><td><div class=\"mini-list-inner\"></div><div class=\"mini-errorIcon\"></div><input type=\"hidden\" /></td></tr></table>';\r\n        //this.cellEl = this.el.firstChild.rows[0].cells[0];\r\n        this.cellEl = el.getElementsByTagName(\"td\")[0]; // this.el.firstChild.rows[0].cells[0];\r\n        this._innerEl = this.cellEl.firstChild;\r\n        this._valueEl = this.cellEl.lastChild;\r\n        this._errorIconEl = this.cellEl.childNodes[1];\r\n\r\n        this._borderEl = this.el.firstChild;\r\n\r\n        var me = this;\r\n        mini.on(this.el, \"keyup\", function (event) {\r\n            if (event.keyCode == 32) {\r\n                $(event.target).click();\r\n            }\r\n        });\r\n    },\r\n    //    _initEvents: function () {\r\n    //        mini.CheckBoxList.superclass._initEvents.call(this);\r\n    //        mini.on(this._viewEl, \"scroll\", this.__OnScroll, this);\r\n    //    },\r\n    _getRepeatTable: function () {\r\n        var table = [];\r\n        if (this.repeatItems > 0) {\r\n            if (this.repeatDirection == \"horizontal\") {\r\n                var row = [];\r\n                for (var i = 0, l = this.data.length; i < l; i++) {\r\n                    var item = this.data[i];\r\n                    if (row.length == this.repeatItems) {\r\n                        table.push(row);\r\n                        row = [];\r\n                    }\r\n                    row.push(item);\r\n                }\r\n                table.push(row);\r\n            } else {\r\n                var len = this.repeatItems > this.data.length ? this.data.length : this.repeatItems;\r\n                for (var i = 0, l = len; i < l; i++) {\r\n                    table.push([]);\r\n                }\r\n                for (var i = 0, l = this.data.length; i < l; i++) {\r\n                    var item = this.data[i];\r\n                    var index = i % this.repeatItems;\r\n                    table[index].push(item);\r\n                }\r\n            }\r\n        } else {\r\n            table = [this.data.clone()];\r\n        }\r\n        return table;\r\n    },\r\n    doUpdate: function () {\r\n        var data = this.data;\r\n        var s = \"\";\r\n\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var item = data[i];\r\n            item._i = i;\r\n        }\r\n\r\n        if (this.repeatLayout == \"flow\") {\r\n\r\n            var table = this._getRepeatTable();\r\n            for (var i = 0, l = table.length; i < l; i++) {\r\n                var row = table[i];\r\n                for (var j = 0, k = row.length; j < k; j++) {\r\n                    var item = row[j];\r\n                    s += this._createItemHtml(item, item._i);\r\n                }\r\n                if (i != l - 1) {\r\n                    s += '<br/>';\r\n                }\r\n            }\r\n\r\n\r\n        } else if (this.repeatLayout == \"table\") {\r\n            var table = this._getRepeatTable();\r\n            s += '<table class=\"' + this._tableCls + '\" cellpadding=\"0\" cellspacing=\"1\">';\r\n            for (var i = 0, l = table.length; i < l; i++) {\r\n                var row = table[i];\r\n                s += '<tr>';\r\n                for (var j = 0, k = row.length; j < k; j++) {\r\n                    var item = row[j];\r\n                    s += '<td class=\"' + this._tdCls + '\">';\r\n                    s += this._createItemHtml(item, item._i);\r\n                    s += '</td>';\r\n                }\r\n                s += '</tr>';\r\n            }\r\n            s += '</table>';\r\n        } else {\r\n            for (var i = 0, l = data.length; i < l; i++) {\r\n                var item = data[i];\r\n                s += this._createItemHtml(item, i);\r\n            }\r\n        }\r\n        this._innerEl.innerHTML = s;\r\n\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var item = data[i];\r\n            delete item._i;\r\n        }\r\n    },\r\n    _createItemHtml: function (item, index) {\r\n        var e = this._OnDrawItem(item, index);\r\n        var id = this._createItemId(index);\r\n        var ckId = this._createCheckId(index);\r\n        var ckValue = this.getItemValue(item);\r\n\r\n        var disable = '';\r\n\r\n        var s = '<div id=\"' + id + '\" index=\"' + index + '\" class=\"' + this._itemCls + ' ';\r\n        if (item.enabled === false) {\r\n            s += ' mini-disabled ';\r\n            disable = 'disabled';\r\n        }\r\n\r\n        var onclick = 'onclick=\"return false\"';\r\n        //if (isChrome) {\r\n        onclick = 'onmousedown=\"this._checked = this.checked;\" onclick=\"this.checked = this._checked\"';\r\n        //}\r\n\r\n        s += e.itemCls + '\" style=\"' + e.itemStyle + '\"><span tabIndex=\"0\" class=\"mini-list-icon mini-icon\"></span><input style=\"display:none;\" ' + onclick + ' ' + disable + ' value=\"' + ckValue + '\" id=\"' + ckId + '\" type=\"' + this._checkType + '\" /><label for=\"' + ckId + '\" onclick=\"return false;\">';\r\n        s += e.itemHtml + '</label></div>';\r\n        return s;\r\n    },\r\n    _OnDrawItem: function (item, index) {\r\n        var value = this.getItemText(item);\r\n        var e = {\r\n            index: index,\r\n            item: item,\r\n            itemHtml: value,\r\n            itemCls: \"\",\r\n            itemStyle: \"\"\r\n        };\r\n        this.fire(\"drawitem\", e);\r\n\r\n        if (e.itemHtml === null || e.itemHtml === undefined) e.itemHtml = \"\";\r\n\r\n        return e;\r\n    },\r\n\r\n    setRepeatItems: function (value) {\r\n        value = parseInt(value);\r\n        if (isNaN(value)) value = 0;\r\n        if (this.repeatItems != value) {\r\n            this.repeatItems = value;\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    getRepeatItems: function () {\r\n        return this.repeatItems;\r\n    },\r\n    setRepeatLayout: function (value) {\r\n        if (value != \"flow\" && value != \"table\") value = \"none\";\r\n        if (this.repeatLayout != value) {\r\n            this.repeatLayout = value;\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    getRepeatLayout: function () {\r\n        return this.repeatLayout;\r\n    },\r\n    setRepeatDirection: function (value) {\r\n        if (value != \"vertical\") value = \"horizontal\";\r\n        if (this.repeatDirection != value) {\r\n            this.repeatDirection = value;\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    getRepeatDirection: function () {\r\n        return this.repeatDirection;\r\n    },\r\n    ///////////////////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.CheckBoxList.superclass.getAttrs.call(this, el);\r\n        var jq = jQuery(el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\r\n                \"ondrawitem\"\r\n             ]\r\n        );\r\n\r\n        var repeatItems = parseInt(jq.attr(\"repeatItems\"));\r\n        if (!isNaN(repeatItems)) {\r\n            attrs.repeatItems = repeatItems;\r\n        }\r\n        var repeatLayout = jq.attr(\"repeatLayout\");\r\n        if (repeatLayout) {\r\n            attrs.repeatLayout = repeatLayout;\r\n        }\r\n        var repeatDirection = jq.attr(\"repeatDirection\");\r\n        if (repeatDirection) {\r\n            attrs.repeatDirection = repeatDirection;\r\n        }\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.CheckBoxList, \"checkboxlist\");\n\r\nmini.RadioButtonList = function () {\r\n    mini.RadioButtonList.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.RadioButtonList, mini.CheckBoxList, {\r\n    multiSelect: false,\r\n\r\n    _itemCls: \"mini-radiobuttonlist-item\",\r\n    _itemHoverCls: \"mini-radiobuttonlist-item-hover\",\r\n    _itemSelectedCls: \"mini-radiobuttonlist-item-selected\",\r\n\r\n    _tableCls: \"mini-radiobuttonlist-table\",\r\n    _tdCls: \"mini-radiobuttonlist-td\",\r\n    _checkType: \"radio\",\r\n\r\n    uiCls: \"mini-radiobuttonlist\"\r\n});\r\nmini.regClass(mini.RadioButtonList, \"radiobuttonlist\");\n\r\n//Number.prototype.toFixed = function (s) {\r\n//    var changenum = (parseInt(this * Math.pow(10, s) + 0.5) / Math.pow(10, s)).toString();\r\n//    var index = changenum.indexOf(\".\");\r\n//    if (index < 0 && s > 0) {\r\n//        changenum = changenum + \".\";\r\n//        for (i = 0; i < s; i++) {\r\n//            changenum = changenum + \"0\";\r\n//        }\r\n//    } else {\r\n//        index = changenum.length - index;\r\n//        for (i = 0; i < (s - index) + 1; i++) {\r\n//            changenum = changenum + \"0\";\r\n//        }\r\n//    }\r\n//    return changenum;\r\n//}\r\n\r\nmini.Spinner = function () {\r\n    mini.Spinner.superclass.constructor.apply(this, arguments);\r\n    this.setValue(this.minValue);\r\n}\r\nmini.extend(mini.Spinner, mini.ButtonEdit, {\r\n    value: 0,\r\n    minValue: 0,\r\n    maxValue: 100,\r\n    increment: 1,\r\n    decimalPlaces: -1,   //保留的小数点位数\r\n    changeOnMousewheel: true,\r\n    allowLimitValue: true,\r\n\r\n    allowLoopValue: false,\r\n\r\n    allowNull: false,\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var value = kv.value;\r\n        delete kv.value;\r\n\r\n        mini.Spinner.superclass.set.call(this, kv);\r\n\r\n        if (!mini.isNull(value)) {\r\n            this.setValue(value);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    uiCls: \"mini-spinner\",\r\n    _getButtonHtml: function () {\r\n        var hover = 'onmouseover=\"mini.addClass(this, \\'' + this._buttonHoverCls + '\\');\" '\r\n                        + 'onmouseout=\"mini.removeClass(this, \\'' + this._buttonHoverCls + '\\');\"';\r\n        return '<span name=\"trigger\" class=\"mini-buttonedit-button mini-buttonedit-trigger\" ' + hover + '><span class=\"mini-buttonedit-up\"><span class=\"mini-icon\"></span></span><span class=\"mini-buttonedit-down\"><span class=\"mini-icon\"></span></span></span>';\r\n    },\r\n\r\n    _initEvents: function () {\r\n        mini.Spinner.superclass._initEvents.call(this);\r\n\r\n        mini._BindEvents(function () {\r\n            //            this.on(\"buttonmousedown\", this.__OnButtonMouseDown, this);\r\n            //            mini_onOne(this.el, \"mousewheel\", this.__OnMousewheel, this);\r\n\r\n\r\n            this.on(\"buttonmousedown\", this.__OnButtonMouseDown, this);\r\n            mini.on(this.el, \"mousewheel\", this.__OnMousewheel, this);\r\n        }, this);\r\n\r\n    },\r\n\r\n    _ValueLimit: function () {\r\n        if (this.allowLimitValue == false) return;\r\n        if (mini.isNull(this.value) && this.allowNull) return;\r\n        if (this.minValue > this.maxValue) {\r\n            this.maxValue = this.minValue + 100;\r\n        }\r\n        if (this.value < this.minValue) {\r\n            this.setValue(this.minValue);\r\n        }\r\n        if (this.value > this.maxValue) {\r\n            this.setValue(this.maxValue);\r\n        }\r\n    },\r\n    getFormValue: function () {\r\n        var v = this.value;\r\n        v = parseFloat(v);\r\n        if (this.allowNull && isNaN(v)) return \"\";\r\n        if (isNaN(v)) v = 0;\r\n        var s = String(v).split(\".\");\r\n        var s1 = s[0], s2 = s[1];\r\n        if (!s2) s2 = \"\";\r\n        if (this.decimalPlaces > 0) {\r\n            for (var i = s2.length, l = this.decimalPlaces; i < l; i++) {\r\n                s2 += \"0\";\r\n            }\r\n            s2 = \".\" + s2;\r\n        } else {\r\n            if (s2) s2 = \".\" + s2;\r\n        }\r\n        return s1 + s2;\r\n    },\r\n\r\n    setValue: function (value) {\r\n        //alert(this.allowNull);\r\n\r\n        //value = parseFloat(value);\r\n        //if (isNaN(value)) value = this.defaultValue;\r\n\r\n        value = mini.parseFloat(value, this.culture, this.format);\r\n        value = parseFloat(value);\r\n\r\n\r\n        if (isNaN(value) && !this.allowNull) value = this.minValue;\r\n        if (isNaN(value) && this.allowNull) value = null;\r\n        if (value && this.decimalPlaces >= 0) value = parseFloat(value.toFixed(this.decimalPlaces));\r\n        if (this.value != value) {\r\n            this.value = value; //this._getFormattedString(value);            \r\n            this._ValueLimit();\r\n            this._valueEl.value = this.value;\r\n\r\n            this.text = this._textEl.value = this.getFormatValue();\r\n        } else {\r\n            this.text = this._textEl.value = this.getFormatValue();\r\n        }\r\n    },\r\n    setMaxValue: function (value) {\r\n        value = parseFloat(value);\r\n        if (isNaN(value)) return;\r\n        value = parseFloat(value);\r\n        if (this.maxValue != value) {\r\n            this.maxValue = value;\r\n            this._ValueLimit();\r\n        }\r\n    },\r\n    getMaxValue: function (value) {\r\n        return this.maxValue;\r\n    },\r\n    setMinValue: function (value) {\r\n        value = parseFloat(value);\r\n        if (isNaN(value)) return;\r\n        value = parseFloat(value);\r\n        if (this.minValue != value) {\r\n            this.minValue = value;\r\n            this._ValueLimit();\r\n        }\r\n    },\r\n    getMinValue: function (value) {\r\n        return this.minValue;\r\n    },\r\n    setIncrement: function (value) {\r\n        value = parseFloat(value);\r\n        if (isNaN(value)) return;\r\n        if (this.increment != value) {\r\n            this.increment = value;\r\n        }\r\n    },\r\n    getIncrement: function (value) {\r\n        return this.increment;\r\n    },\r\n    setDecimalPlaces: function (value) {\r\n        value = parseInt(value);\r\n        if (isNaN(value) || value < 0) return;\r\n        this.decimalPlaces = value;\r\n    },\r\n    getDecimalPlaces: function (value) {\r\n        return this.decimalPlaces;\r\n    },\r\n    setChangeOnMousewheel: function (value) {\r\n        this.changeOnMousewheel = value;\r\n    },\r\n    getChangeOnMousewheel: function (value) {\r\n        return this.changeOnMousewheel;\r\n    },\r\n    setAllowLimitValue: function (value) {\r\n        this.allowLimitValue = value;\r\n    },\r\n    getAllowLimitValue: function (value) {\r\n        return this.allowLimitValue;\r\n    },\r\n    setAllowNull: function (value) {\r\n        this.allowNull = value;\r\n    },\r\n    getAllowNull: function (value) {\r\n        return this.allowNull;\r\n    },\r\n    format: \"\",\r\n    setFormat: function (value) {\r\n        if (typeof value != \"string\") return;\r\n        if (this.format != value) {\r\n            this.format = value;\r\n\r\n            this.setText(this.getFormatValue())\r\n        }\r\n    },\r\n    getFormat: function () {\r\n        return this.format;\r\n    },\r\n    getFormatValue: function () {\r\n        if (mini.isNull(this.value)) return \"\";\r\n        if (this.format && mini.isNumber(this.value)) return mini.formatNumber(this.value, this.format, this.culture);\r\n        return this.value;\r\n    },\r\n    setAllowLoopValue: function (value) {\r\n        this.allowLoopValue = value;\r\n    },\r\n    getAllowLoopValue: function () {\r\n        return this.allowLoopValue;\r\n    },\r\n\r\n    ////////////////////////////////////////////////\r\n    _SpinTimer: null,\r\n    _StartSpin: function (Increment, time, count) {\r\n        this._StopSpin();\r\n\r\n        var sf = this;\r\n\r\n        function loop(value) {\r\n            if (Increment > 0) {\r\n                if (value > sf.maxValue) sf.setValue(sf.minValue);\r\n            } else {\r\n                if (value < sf.minValue) sf.setValue(sf.maxValue);\r\n            }\r\n        }\r\n\r\n        var nx = 1000000;\r\n        var n1 = this.value * nx;\r\n        var n2 = Increment * nx;\r\n        var v = (n1 + n2) / nx;\r\n\r\n        //this.setValue(this.value + Increment);\r\n        this.setValue(v);\r\n\r\n        if (sf.allowLoopValue) {\r\n            loop(v);\r\n        }\r\n\r\n        //this._OnValueChanged();\r\n\r\n\r\n        var sourceCount = count;\r\n        var now = new Date();\r\n        this._SpinTimer = setInterval(function () {\r\n\r\n            var v = sf.value + Increment;\r\n            sf.setValue(v);\r\n\r\n            if (sf.allowLoopValue) {\r\n                loop(v);\r\n            }\r\n\r\n            sf._OnValueChanged();\r\n\r\n            count--;\r\n            if (count == 0 && time > 50) {\r\n                sf._StartSpin(Increment, time - 100, sourceCount + 3);\r\n\r\n            }\r\n\r\n            //防止alert\r\n            var now2 = new Date();\r\n            if (now2 - now > 500) sf._StopSpin();\r\n            now = now2;\r\n        }, time);\r\n        mini.on(document, \"mouseup\", this._OnDocumentMouseUp, this);\r\n        //document.title = time +\":\"+count;\r\n    },\r\n    _StopSpin: function () {\r\n        clearInterval(this._SpinTimer);\r\n        this._SpinTimer = null;\r\n    },\r\n    __OnButtonMouseDown: function (e) {\r\n        this._DownValue = this.getValue();\r\n\r\n        this.__OnInputTextChanged();\r\n\r\n        if (e.spinType == \"up\") {\r\n\r\n            this._StartSpin(this.increment, 230, 2);\r\n        } else {\r\n            this._StartSpin(-this.increment, 230, 2);\r\n        }\r\n    },\r\n    __OnInputKeyDown: function (e) {\r\n        mini.Spinner.superclass.__OnInputKeyDown.call(this, e);\r\n\r\n        var KEY = mini.Keyboard;\r\n\r\n        if (this.isReadOnly()) return;\r\n\r\n        switch (e.keyCode) {\r\n            case KEY.Top:\r\n                if (this.keyNavEnabled) {\r\n                    this.setValue(this.value + this.increment);\r\n                    this._OnValueChanged();\r\n                }\r\n                break;\r\n            case KEY.Bottom:\r\n                if (this.keyNavEnabled) {\r\n                    this.setValue(this.value - this.increment);\r\n                    this._OnValueChanged();\r\n                }\r\n                break;\r\n        }\r\n    },\r\n\r\n    __OnMousewheel: function (e) {\r\n        if (this.isReadOnly()) return;\r\n        if (this.changeOnMousewheel == false) return;\r\n\r\n\r\n        if (this.text != this._textEl.value) {\r\n            this.__OnInputTextChanged();\r\n            //document.title = new Date().getTime();\r\n        }\r\n\r\n\r\n        var wheelDelta = e.wheelDelta || e.originalEvent.wheelDelta;            //ie\r\n        if (mini.isNull(wheelDelta)) wheelDelta = -e.originalEvent.detail * 24; //ff\r\n        var increment = this.increment;\r\n        if (wheelDelta < 0) increment = -increment;\r\n\r\n\r\n        var nx = 1000000;\r\n        var n1 = this.value * nx;\r\n        var n2 = increment * nx;\r\n        var v = (n1 + n2) / nx;\r\n        this.setValue(v);\r\n\r\n        //this.setValue(this.value + increment);\r\n\r\n        this._OnValueChanged();\r\n\r\n\r\n\r\n        return false;\r\n    },\r\n    _OnDocumentMouseUp: function (e) {\r\n        this._StopSpin();\r\n        mini.un(document, \"mouseup\", this._OnDocumentMouseUp, this);\r\n\r\n        if (this._DownValue != this.getValue()) {\r\n            this._OnValueChanged();\r\n        }\r\n    },\r\n    __OnInputTextChanged: function (e) {\r\n        var _value = this.getValue();\r\n\r\n\r\n        var value = mini.parseFloat(this._textEl.value, this.culture, this.format);\r\n        this.setValue(value);\r\n        //        if (isNaN(value)) {\r\n        //            if (this.required) {\r\n        //                this._textEl.value = this.getFormValue();\r\n        //            } else {\r\n        //                this.setValue(this.minValue);\r\n        //            }\r\n        //        } else {\r\n        //            this.setValue(value);\r\n        //        }\r\n\r\n        if (_value != this.getValue()) {\r\n            this._OnValueChanged();\r\n        }\r\n    },\r\n\r\n    ////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Spinner.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"minValue\", \"maxValue\", \"increment\", \"decimalPlaces\", \"format\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"allowLimitValue\", \"allowNull\", \"changeOnMousewheel\", \"allowLoopValue\"\r\n             ]\r\n        );\r\n\r\n\r\n        return attrs;\r\n    }\r\n\r\n});\r\nmini.regClass(mini.Spinner, 'spinner');\r\n\r\n\n\r\nmini.TimeSpinner = function () {\r\n    mini.TimeSpinner.superclass.constructor.apply(this, arguments);\r\n    \r\n    this.setValue(\"00:00:00\");\r\n}\r\nmini.extend(mini.TimeSpinner, mini.ButtonEdit, {\r\n\r\n    value: null,\r\n    format: 'H:mm:ss', //(当前只处理一个格式，以后处理更多格式，先满足国内习惯，后满足国际习惯，如h:mm:ss tt）\r\n\r\n    uiCls: \"mini-timespinner\",\r\n    _getButtonHtml: function () {\r\n        var hover = 'onmouseover=\"mini.addClass(this, \\'' + this._buttonHoverCls + '\\');\" '\r\n                        + 'onmouseout=\"mini.removeClass(this, \\'' + this._buttonHoverCls + '\\');\"';\r\n        return '<span class=\"mini-buttonedit-button\" ' + hover + '><span class=\"mini-buttonedit-up\"><span class=\"mini-icon\"></span></span><span class=\"mini-buttonedit-down\"><span class=\"mini-icon\"></span></span></span>';\r\n    },\r\n    _initEvents: function () {\r\n        mini.TimeSpinner.superclass._initEvents.call(this);\r\n\r\n        mini._BindEvents(function () {\r\n            this.on(\"buttonmousedown\", this.__OnButtonMouseDown, this);\r\n            mini.on(this.el, \"mousewheel\", this.__OnMousewheel, this);\r\n            mini.on(this._textEl, \"keydown\", this.__OnKeyDown, this);\r\n        }, this);\r\n\r\n    },\r\n    setFormat: function (value) {\r\n        if (typeof value != \"string\") return;\r\n        var formats = ['H:mm:ss', 'HH:mm:ss', 'H:mm', 'HH:mm', 'H', 'HH', 'mm:ss'];\r\n        //if (formats.indexOf(value) == -1) return;\r\n\r\n        if (this.format != value) {\r\n            this.format = value;\r\n            this.text = this._textEl.value = this.getFormattedValue();\r\n        }\r\n    },\r\n    getFormat: function () {\r\n        return this.format;\r\n    },\r\n    setValue: function (value) {\r\n\r\n        \r\n        value = mini.parseTime(value, this.format);\r\n        if (!value) value = null; //mini.parseTime(\"00:00:00\", this.format);\r\n\r\n        if (mini.isDate(value)) value = new Date(value.getTime());\r\n\r\n        //if (mini.formatDate(this.value, \"H:mm:ss\") != mini.formatDate(value, \"H:mm:ss\")) {\r\n        this.value = value;\r\n        this.text = this._textEl.value = this.getFormattedValue();\r\n        this._valueEl.value = this.getFormValue();\r\n        //}\r\n    },\r\n    getValue: function () {\r\n        return this.value == null ? null : new Date(this.value.getTime());\r\n    },\r\n    getFormValue: function () {\r\n        if (!this.value) return \"\";\r\n        return mini.formatDate(this.value, this.format);\r\n    },\r\n    getFormattedValue: function () {\r\n        if (!this.value) return \"\";\r\n        return mini.formatDate(this.value, this.format);\r\n    },\r\n    _ChangeValue: function (Increment, timeType) {\r\n        var value = this.getValue();\r\n        if (value) {\r\n            switch (timeType) {\r\n                case \"hours\":\r\n                    var hours = value.getHours() + Increment;\r\n                    if (hours > 23) hours = 23;\r\n                    if (hours < 0) hours = 0;\r\n                    value.setHours(hours);\r\n                    break;\r\n                case \"minutes\":\r\n                    var minutes = value.getMinutes() + Increment;\r\n                    if (minutes > 59) minutes = 59;\r\n                    if (minutes < 0) minutes = 0;\r\n                    value.setMinutes(minutes);\r\n                    break;\r\n                case \"seconds\":\r\n                    var seconds = value.getSeconds() + Increment;\r\n                    if (seconds > 59) seconds = 59;\r\n                    if (seconds < 0) seconds = 0;\r\n                    value.setSeconds(seconds);\r\n                    break;\r\n            }\r\n        } else {\r\n            value = \"00:00:00\";\r\n        }\r\n\r\n        this.setValue(value);\r\n        //this._OnValueChanged();\r\n    },\r\n    ////////////////////////////////////////////////    \r\n    _SpinTimer: null,\r\n    _StartSpin: function (Increment, time, count) {\r\n        this._StopSpin();\r\n\r\n        this._ChangeValue(Increment, this._timeType);\r\n        //        this.setValue(this.value + Increment);\r\n        //        this._OnValueChanged();\r\n\r\n        var sf = this;\r\n        var sourceCount = count;\r\n        var now = new Date();\r\n        this._SpinTimer = setInterval(function () {\r\n\r\n            sf._ChangeValue(Increment, sf._timeType);\r\n\r\n            count--;\r\n            if (count == 0 && time > 50) {\r\n                sf._StartSpin(Increment, time - 100, sourceCount + 3);\r\n\r\n            }\r\n\r\n            //防止alert\r\n            var now2 = new Date();\r\n            if (now2 - now > 500) sf._StopSpin();\r\n            now = now2;\r\n        }, time);\r\n        mini.on(document, \"mouseup\", this._OnDocumentMouseUp, this);\r\n        //document.title = time +\":\"+count;\r\n    },\r\n    _StopSpin: function () {\r\n        clearInterval(this._SpinTimer);\r\n        this._SpinTimer = null;\r\n        //this._timeType = null;\r\n    },\r\n    __OnButtonMouseDown: function (e) {\r\n        this._DownValue = this.getFormValue();\r\n        this._timeType = \"hours\";\r\n        if (e.spinType == \"up\") {\r\n            this._StartSpin(1, 230, 2);\r\n        } else {\r\n            this._StartSpin(-1, 230, 2);\r\n        }\r\n    },\r\n    //    __OnKeyDown: function (e) {\r\n    //        var KEY = mini.Keyboard;\r\n    //        switch (e.keyCode) {\r\n    //            case KEY.Top:\r\n    //                this.setValue(this.value + 1);\r\n    //                this._OnValueChanged();\r\n    //                break;\r\n    //            case KEY.Bottom:\r\n    //                this.setValue(this.value - 1);\r\n    //                this._OnValueChanged();\r\n    //                break;\r\n    //        }\r\n    //    },\r\n    //    __OnMousewheel: function (e) {\r\n    //        var wheelDelta = e.wheelDelta;\r\n    //        if (mini.isNull(wheelDelta)) wheelDelta = -e.detail * 24;\r\n    //        var increment = this.increment;\r\n    //        if (wheelDelta < 0) increment = -increment;\r\n    //        this.setValue(this.value + increment);\r\n    //        this._OnValueChanged();\r\n    //        return false;\r\n    //    },\r\n    _OnDocumentMouseUp: function (e) {\r\n        this._StopSpin();\r\n        mini.un(document, \"mouseup\", this._OnDocumentMouseUp, this);\r\n\r\n        if (this._DownValue != this.getFormValue()) {\r\n            this._OnValueChanged();\r\n        }\r\n    },\r\n    __OnInputTextChanged: function (e) {\r\n        \r\n        var _value = this.getFormValue();\r\n\r\n        this.setValue(this._textEl.value);\r\n\r\n        if (_value != this.getFormValue()) {\r\n            this._OnValueChanged();\r\n        }\r\n    },\r\n    ////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.TimeSpinner.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"format\"\r\n                ]\r\n        );\r\n\r\n        return attrs;\r\n    }\r\n\r\n});\r\nmini.regClass(mini.TimeSpinner, 'timespinner');\n\r\nmini.Lookup = function () {\r\n    this.data = [];\r\n    mini.Lookup.superclass.constructor.apply(this, arguments);\r\n\r\n    mini.on(this._textEl, \"mouseup\", this.__OnMouseUp, this);\r\n\r\n    this.on(\"showpopup\", this.__OnShowPopup, this);\r\n    \r\n}\r\nmini.extend(mini.Lookup, mini.PopupEdit, {\r\n    allowInput: true,\r\n\r\n    valueField: \"id\",\r\n    textField: \"text\",\r\n    delimiter: ',',\r\n    setDelimiter: function (del) {\r\n        this.delimiter = del;\r\n    },\r\n    getDelimiter: function () {\r\n        return this.delimiter;\r\n    },\r\n\r\n    multiSelect: false,\r\n\r\n    data: [],\r\n\r\n    grid: null,\r\n    _destroyPopup: false,\r\n\r\n\r\n\r\n\r\n    uiCls: \"mini-lookup\",\r\n    destroy: function (removeEl) {\r\n\r\n        if (this.grid) {\r\n            //this.grid.el.parentNode.removeChild(this.grid.el);\r\n\r\n            this.grid.un(\"rowclick\", this.__OnGridRowClickChanged, this);\r\n            this.grid.un(\"load\", this.__OnGridLoad, this);\r\n            this.grid.un(\"checkall\", this.__OnGridRowClickChanged, this);\r\n            this.grid = null;\r\n\r\n\r\n        }\r\n        mini.Lookup.superclass.destroy.call(this, removeEl);\r\n    },\r\n    setMultiSelect: function (value) {\r\n        this.multiSelect = value;\r\n\r\n        if (this.grid) this.grid.setMultiSelect(value);\r\n    },\r\n    setGrid: function (value) {\r\n\r\n        if (typeof value == \"string\") {\r\n            mini.parse(value);\r\n            value = mini.get(value);\r\n        }\r\n        this.grid = mini.getAndCreate(value);\r\n        if (this.grid) {\r\n            this.grid.setMultiSelect(this.multiSelect);\r\n            this.grid.setCheckSelectOnLoad(false);\r\n            this.grid.on(\"rowclick\", this.__OnGridRowClickChanged, this);\r\n            this.grid.on(\"load\", this.__OnGridLoad, this);\r\n            this.grid.on(\"checkall\", this.__OnGridRowClickChanged, this);\r\n\r\n        }\r\n    },\r\n    getGrid: function () {\r\n        return this.grid;\r\n    },\r\n    setValueField: function (valueField) {\r\n        this.valueField = valueField;\r\n        //        if (this._listbox) {\r\n        //            this._listbox.setValueField(valueField);\r\n        //        }\r\n    },\r\n    getValueField: function () {\r\n        return this.valueField;\r\n    },\r\n    setTextField: function (value) {\r\n        //if (this._listbox) this._listbox.setTextField(value);\r\n        this.textField = value;\r\n    },\r\n    getTextField: function () {\r\n        return this.textField;\r\n    },\r\n    deselectAll: function () {\r\n        this.data = [];\r\n        this.setValue(\"\");\r\n        this.setText(\"\");\r\n        if (this.grid) this.grid.deselectAll();\r\n    },\r\n    ///////////////////////////////////////////////////\r\n    getItemValue: function (item) {\r\n        return String(item[this.valueField]);\r\n    },\r\n    getItemText: function (item) {\r\n        var t = item[this.textField];\r\n        return mini.isNull(t) ? '' : String(t);\r\n    },\r\n    getValueAndText: function (records) {\r\n        if (mini.isNull(records)) records = [];\r\n\r\n        var values = [];\r\n        var texts = [];\r\n        for (var i = 0, l = records.length; i < l; i++) {\r\n            var record = records[i];\r\n            if (record) {\r\n                values.push(this.getItemValue(record));\r\n                texts.push(this.getItemText(record));\r\n            }\r\n        }\r\n        return [values.join(this.delimiter), texts.join(this.delimiter)];\r\n    },\r\n    _createData: function () {\r\n        this.value = mini.isNull(this.value) ? \"\" : String(this.value);\r\n        this.text = mini.isNull(this.text) ? \"\" : String(this.text);\r\n        //        if (typeof this.value != \"string\") this.value = \"\";\r\n        //        if (typeof this.text != \"string\") this.text = \"\";\r\n\r\n        var data = [];\r\n        var values = this.value.split(this.delimiter);\r\n        var texts = this.text.split(this.delimiter);\r\n        var len = values.length;\r\n        //if (len < values.length) len = values.length;\r\n        if (this.value) {\r\n            for (var i = 0, l = len; i < l; i++) {\r\n                var row = {};\r\n                var id = values[i];\r\n                var text = texts[i];\r\n                row[this.valueField] = id ? id : \"\";\r\n                row[this.textField] = text ? text : \"\";\r\n                data.push(row);\r\n            }\r\n        }\r\n        this.data = data;\r\n\r\n    },\r\n    _getValueMaps: function (rows) {\r\n\r\n        var vs = {};\r\n        for (var i = 0, l = rows.length; i < l; i++) {\r\n            var row = rows[i];\r\n            var id = row[this.valueField];\r\n            vs[id] = row;\r\n        }\r\n        return vs;\r\n    },\r\n    setValue: function (value) {\r\n\r\n        mini.Lookup.superclass.setValue.call(this, value);\r\n        this._createData();\r\n    },\r\n    setText: function (value) {\r\n        mini.Lookup.superclass.setText.call(this, value);\r\n        this._createData();\r\n    },\r\n    __OnGridRowClickChanged: function (e) {\r\n        var me = this,\r\n            grid = me.grid;\r\n\r\n        //var rows = this._getValueMaps(this.grid.getData());         //当前页行\r\n        var rows = this._getValueMaps(grid.getList());         //当前页行\r\n        var sels = this._getValueMaps(grid.getSelecteds());    //当前页选中\r\n        var vs = this._getValueMaps(this.data);                     //所有选中\r\n\r\n        if (this.multiSelect == false) {\r\n            vs = {};\r\n            this.data = [];\r\n        }\r\n\r\n        //处理删除\r\n        var removes = {};\r\n        for (var id in vs) {\r\n            var o = vs[id];\r\n            if (rows[id]) {         //如果在当前页\r\n                if (sels[id]) {     //如果被选中\r\n\r\n                } else {            //否则去除掉\r\n                    removes[id] = o;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (var i = this.data.length - 1; i >= 0; i--) {\r\n            var o = this.data[i];\r\n            var id = o[this.valueField];\r\n            if (removes[id]) this.data.removeAt(i);\r\n        }\r\n\r\n\r\n        //        //处理增加\r\n        //        for (var id in sels) {\r\n        //            var o = sels[id];\r\n        //            if (!vs[id]) this.data.push(o);\r\n        //        }\r\n\r\n\r\n        //处理增加\r\n        var adds = [];\r\n        for (var id in sels) {\r\n            var o = sels[id];\r\n            if (!vs[id]) adds.push(o);\r\n        }\r\n\r\n        adds.sort(function (a, b) {\r\n            var index1 = grid.indexOf(a),\r\n                index2 = grid.indexOf(b);\r\n            if (index1 < index2) return -1;\r\n            if (index1 == index2) return 0;\r\n            return 1;\r\n        });\r\n\r\n        this.data.addRange(adds);\r\n\r\n        /////////////////////////////////////////\r\n\r\n\r\n\r\n\r\n        var vts = this.getValueAndText(this.data);\r\n\r\n        this.setValue(vts[0]);\r\n        this.setText(vts[1]);\r\n\r\n        this._OnValueChanged();\r\n    },\r\n    __OnGridLoad: function (e) {\r\n        this.__OnShowPopup(e);\r\n    },\r\n    __OnShowPopup: function (e) {\r\n\r\n        var vsb = String(this.value).split(this.delimiter);\r\n        var vs = {};\r\n        for (var i = 0, l = vsb.length; i < l; i++) {\r\n            var v = vsb[i];\r\n            vs[v] = 1;\r\n        }\r\n\r\n        var rows = this.grid.getData();\r\n        //var vs = this._getValueMaps(this.data);                     //所有选中\r\n\r\n        var sels = [];\r\n        for (var i = 0, l = rows.length; i < l; i++) {\r\n            var row = rows[i];\r\n            var id = row[this.valueField];\r\n            if (vs[id]) sels.push(row);\r\n        }\r\n\r\n        this.grid.selects(sels);\r\n    },\r\n    //////////////////////////////////////////////\r\n\r\n    //禁止输入，光标可操作\r\n    doUpdate: function () {\r\n        mini.Lookup.superclass.doUpdate.call(this);\r\n        this._textEl.readOnly = true;\r\n        this.el.style.cursor = \"default\";\r\n        //this.addCls(this._readOnlyCls);\r\n    },\r\n    __OnInputKeyDown: function (e) {\r\n        mini.Lookup.superclass.__OnInputKeyDown.call(this, e);\r\n        //e.preventDefault();\r\n        switch (e.keyCode) {\r\n            case 46:    //del\r\n            case 8:    //backspace\r\n\r\n                break;\r\n            case 37:    //left\r\n\r\n                break;\r\n            case 39:    //right\r\n\r\n                break;\r\n        }\r\n        //        this.fire(\"keydown\", { htmlEvent: e });\r\n        //        if (e.keyCode == 8 && (this.isReadOnly() || this.allowInput == false)) {\r\n        //            return false;\r\n        //        }\r\n        //        if (e.keyCode == 13) {\r\n        //            this.fire(\"enter\");\r\n        //        }\r\n    },\r\n    __OnMouseUp: function (e) {\r\n        if (this.isReadOnly()) return;\r\n        //mini.Lookup.superclass.__OnMouseUp.call(this, e);\r\n\r\n        var rg = mini.getSelectRange(this._textEl);\r\n        var start = rg[0], end = rg[1];\r\n\r\n        //alert(rg[0] + \":\" + rg[1]);\r\n        var index = this._findTextIndex(start);\r\n        //document.title = index;\r\n        //暂时不做。。。\r\n    },\r\n    _findTextIndex: function (rgIndex) {\r\n        var index = -1;\r\n        if (this.text == \"\") return index;\r\n\r\n        var texts = String(this.text).split(this.delimiter);\r\n        var len = 0;\r\n        for (var i = 0, l = texts.length; i < l; i++) {\r\n            var text = texts[i];\r\n            if (len < rgIndex && rgIndex <= len + text.length) {\r\n                index = i;\r\n                break;\r\n            }\r\n            len = len + text.length + 1;\r\n        }\r\n        return index;\r\n    },\r\n\r\n    /////////////////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Lookup.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"grid\", \"valueField\", \"textField\", \"delimiter\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"multiSelect\"\r\n             ]\r\n        );\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.Lookup, 'lookup');\r\n\r\n/*\r\n    目的：多选/单选数据，标准使用。复杂使用，可以做一个弹出表格选择面板示例。\r\n        本地\r\n        远程数据\r\n\r\n    另外，弹出面板的表格数据选择，做成一个独立示例。\r\n*/\n\r\n/*\r\n1.当setValue,setText的时候，自动生成data，然后刷新refresh\r\n2.界面操作：\r\n删除\r\n增加\r\n都从DOM级别修改\r\n3.导航\r\n4.输入下拉        \r\n*/\r\n\r\nmini.TextBoxList = function (el) {\r\n    mini.TextBoxList.superclass.constructor.call(this, null);\r\n\r\n    this.data = [];\r\n    this.selecteds = []; //selecteds\r\n    this.doUpdate();    \r\n\r\n    //this._createPopup();\r\n    if (el) mini.applyTo.call(this, el);\r\n}\r\nmini.extend(mini.TextBoxList, mini.ValidatorBase, {\r\n    formField: true,\r\n\r\n    remote: true,       //url, data\r\n\r\n    value: \"\",\r\n    text: \"\",\r\n    valueField: \"id\",\r\n    textField: \"text\",\r\n    selecteds: null,\r\n\r\n    data: null,\r\n\r\n    url: \"\",\r\n    delay: 150,\r\n\r\n    allowInput: true,\r\n\r\n    editIndex: 0,\r\n\r\n    _focusCls: \"mini-textboxlist-focus\",\r\n    _itemHoverClass: \"mini-textboxlist-item-hover\",\r\n    _itemSelectedClass: \"mini-textboxlist-item-selected\",\r\n    _closeHoverClass: \"mini-textboxlist-close-hover\",\r\n\r\n    textName: \"\",\r\n    setTextName: function (value) {\r\n        this.textName = value;\r\n        //if (this._textEl) mini.setAttr(this._textEl, \"name\", this.textName);\r\n    },\r\n    getTextName: function () {\r\n        return this.textName;\r\n    },\r\n\r\n    getData: function () {\r\n        return this.data;\r\n    },\r\n\r\n    setData: function (data) {\r\n        this.data = data;\r\n    },\r\n\r\n    getRemote: function () {\r\n        return this.remote;\r\n    },\r\n\r\n    setRemote: function (remote) {\r\n        this.remote = remote;\r\n    },\r\n\r\n    ////////////////////////////////////////////\r\n    uiCls: \"mini-textboxlist\",\r\n    _create: function () {\r\n\r\n        var html = '<table class=\"mini-textboxlist mini-corner-all\" cellpadding=\"0\" cellspacing=\"0\"><tr ><td class=\"mini-textboxlist-border mini-corner-all\"><ul></ul><a href=\"#\"></a><input type=\"hidden\"/></td></tr></table>';\r\n        var d = document.createElement(\"div\");\r\n        d.innerHTML = html;\r\n        this.el = d.firstChild;\r\n\r\n        var td = this.el.getElementsByTagName(\"td\")[0];\r\n        this.ulEl = td.firstChild;\r\n        this._valueEl = td.lastChild;\r\n        this.focusEl = td.childNodes[1];\r\n    },\r\n    destroy: function (removeEl) {\r\n        if (this.isShowPopup) {\r\n            this.hidePopup();\r\n        }\r\n        if (this._inputEl) {\r\n            mini.clearEvent(this._inputEl);\r\n            this._inputEl.onkeyup = null;\r\n            this._inputEl.onfocus = null;\r\n            this._inputEl.onblur = null;\r\n        }\r\n        mini.un(document, \"mousedown\", this.__OnDocMouseDown, this);\r\n        mini.TextBoxList.superclass.destroy.call(this, removeEl);\r\n    },\r\n    _initEvents: function () {\r\n        mini.TextBoxList.superclass._initEvents.call(this);\r\n\r\n        mini.on(this.el, \"mousemove\", this.__OnMouseMove, this);\r\n        mini.on(this.el, \"mouseout\", this.__OnMouseOut, this);\r\n        mini.on(this.el, \"mousedown\", this.__OnMouseDown, this);\r\n        mini.on(this.el, \"click\", this.__OnClick, this);\r\n        mini.on(this.el, \"keydown\", this.__OnKeyDown, this);\r\n\r\n        mini.on(document, \"mousedown\", this.__OnDocMouseDown, this);\r\n    },\r\n    __OnDocMouseDown: function (e) {\r\n\r\n        if (this.isReadOnly()) return;\r\n        if (this.isShowPopup) {\r\n            if (!mini.isAncestor(this.popup.el, e.target)) {\r\n                this.hidePopup();\r\n            }\r\n        }\r\n        var sf = this;\r\n        if (this._focused) {\r\n            if (this.within(e) == false) {\r\n\r\n\r\n                clearInterval(this._ValueChangeTimer);\r\n\r\n                this.select(null, false);\r\n                //this.showInput(false);\r\n                setTimeout(function () {\r\n                    sf.showInput(false);\r\n                }, 100);\r\n\r\n                this.removeCls(this._focusCls);\r\n                this._focused = false;\r\n\r\n                //alert(this._inputEl.onblur);\r\n            }\r\n\r\n        }\r\n    },\r\n    ///////////////////////////////////////////////\r\n    errorIconEl: null,\r\n    getErrorIconEl: function () {\r\n        if (!this._errorIconEl) {\r\n            var tr = this.el.rows[0];\r\n            var td = tr.insertCell(1);\r\n            td.style.cssText = 'width:18px;vertical-align:top;';\r\n            td.innerHTML = '<div class=\"mini-errorIcon\"></div>';\r\n            this._errorIconEl = td.firstChild;\r\n        }\r\n        return this._errorIconEl;\r\n    },\r\n    _RemoveErrorIcon: function () {\r\n        if (this._errorIconEl) {\r\n            jQuery(this._errorIconEl.parentNode).remove();\r\n        }\r\n        this._errorIconEl = null;\r\n    },\r\n    ///////////////////////////////////////////////\r\n    doLayout: function () {\r\n        if (this.canLayout() == false) return;\r\n        mini.TextBoxList.superclass.doLayout.call(this);\r\n\r\n        this.doReadOnly();\r\n    },\r\n\r\n    doReadOnly: function () {\r\n        if (this.isReadOnly() || this.allowInput == false) {\r\n            this._inputEl.readOnly = true;\r\n        } else {\r\n            this._inputEl.readOnly = false;\r\n        }\r\n    },\r\n\r\n    doUpdate: function () {\r\n        if (this._ValueChangeTimer) clearInterval(this._ValueChangeTimer);\r\n        if (this._inputEl) mini.un(this._inputEl, \"keydown\", this.__OnInputKeyDown, this);\r\n\r\n        var sb = [];\r\n        var id = this.uid;\r\n        for (var i = 0, l = this.selecteds.length; i < l; i++) {\r\n            var o = this.selecteds[i];   //selecteds\r\n            var li_id = id + \"$text$\" + i;\r\n            var text = mini._getMap(this.textField, o); //o[this.textField];\r\n            if (mini.isNull(text)) text = \"\";\r\n            sb[sb.length] = '<li id=\"' + li_id + '\" class=\"mini-textboxlist-item\">';\r\n            sb[sb.length] = text;\r\n            sb[sb.length] = '<span class=\"mini-textboxlist-close\"></span></li>';\r\n        }\r\n        var inputid = id + \"$input\";\r\n        sb[sb.length] = '<li id=\"' + inputid + '\" class=\"mini-textboxlist-inputLi\"><input class=\"mini-textboxlist-input\" type=\"text\" autocomplete=\"off\"></li>';\r\n\r\n        this.ulEl.innerHTML = sb.join(\"\");\r\n\r\n        this.editIndex = this.selecteds.length;\r\n        if (this.editIndex < 0) this.editIndex = 0;\r\n\r\n        this.inputLi = this.ulEl.lastChild;\r\n        this._inputEl = this.inputLi.firstChild;\r\n\r\n        this._inputEl.placeholder = this.placeholder;\r\n\r\n        mini.on(this._inputEl, \"keydown\", this.__OnInputKeyDown, this);\r\n\r\n        var sf = this;\r\n        this._inputEl.onkeyup = function () {\r\n            sf._syncInputSize();\r\n        }\r\n\r\n        sf._ValueChangeTimer = null;\r\n        sf._LastInputText = sf._inputEl.value;\r\n        this._inputEl.onfocus = function () {\r\n            sf._LastInputText = sf._inputEl.value;\r\n            sf._ValueChangeTimer = setInterval(function () {\r\n                //document.title = new Date().getTime();\r\n                if (!sf._focused) {\r\n                    clearInterval(sf._ValueChangeTimer);\r\n                    sf._ValueChangeTimer = null;\r\n                    return;\r\n                }\r\n                if (sf._LastInputText != sf._inputEl.value) {\r\n                    sf._startQuery();\r\n                    sf._LastInputText = sf._inputEl.value;\r\n                }\r\n            }, 10);\r\n\r\n            sf.addCls(sf._focusCls);\r\n            sf._focused = true;\r\n\r\n            sf.fire(\"focus\");\r\n        }\r\n\r\n        this._inputEl.onblur = function () {\r\n            clearInterval(sf._ValueChangeTimer);\r\n            sf._ValueChangeTimer = null;\r\n\r\n            sf.fire(\"blur\");\r\n            //alert(1);\r\n\r\n            if (sf.validateOnLeave && sf.isEditable()) {\r\n                sf._tryValidate();\r\n            }\r\n        }\r\n\r\n        this.doReadOnly();\r\n\r\n        //        var inputEvent = \"input\";\r\n        //        if (isIE) inputEvent = \"propertychange\";\r\n        //        mini.on(this._inputEl, inputEvent, this.__OnInputTextChange, this);\r\n\r\n        //this.select(this._selected);\r\n    },\r\n    getItemByEvent: function (event) {\r\n        var domItem = mini.findParent(event.target, \"mini-textboxlist-item\");\r\n        if (domItem) {\r\n            var ids = domItem.id.split(\"$\");\r\n            var id = ids[ids.length - 1];\r\n            return this.selecteds[id];\r\n        }\r\n    },\r\n    getItem: function (id) {\r\n        if (typeof id == \"number\") return this.selecteds[id];\r\n        if (typeof id == \"object\") return id;\r\n        //        for (var i = 0, l = this.selecteds.length; i < l; i++) {\r\n        //            var o = this.selecteds[i];\r\n        //            if (o._id == id) return o;\r\n        //        }\r\n    },\r\n    getItemEl: function (o) {\r\n        var index = this.selecteds.indexOf(o);\r\n        var li_id = this.uid + \"$text$\" + index;\r\n        return document.getElementById(li_id);\r\n    },\r\n    hoverItem: function (item, e) {\r\n        if (this.isReadOnly() || this.enabled == false) return;\r\n        this.blurItem();\r\n        var li = this.getItemEl(item);\r\n        mini.addClass(li, this._itemHoverClass);\r\n\r\n        if (e && mini.hasClass(e.target, \"mini-textboxlist-close\")) {\r\n            mini.addClass(e.target, this._closeHoverClass);\r\n        }\r\n    },\r\n    blurItem: function () {\r\n        var len = this.selecteds.length;\r\n        for (var i = 0, l = len; i < l; i++) {\r\n            var o = this.selecteds[i];\r\n\r\n            var li = this.getItemEl(o);\r\n            if (li) {\r\n                mini.removeClass(li, this._itemHoverClass);\r\n\r\n                mini.removeClass(li.lastChild, this._closeHoverClass);\r\n            }\r\n        }\r\n    },\r\n    showInput: function (index) {\r\n        this.select(null);\r\n\r\n        if (mini.isNumber(index)) {\r\n            this.editIndex = index;\r\n        } else {\r\n            this.editIndex = this.selecteds.length;\r\n        }\r\n        if (this.editIndex < 0) this.editIndex = 0;\r\n        if (this.editIndex > this.selecteds.length) this.editIndex = this.selecteds.length;\r\n\r\n        var inputLi = this.inputLi;\r\n        inputLi.style.display = \"block\";\r\n\r\n        if (mini.isNumber(index) && index < this.selecteds.length) {\r\n            var item = this.selecteds[index];\r\n            var itemEl = this.getItemEl(item);\r\n            jQuery(itemEl).before(inputLi);\r\n        } else {\r\n            this.ulEl.appendChild(inputLi);\r\n        }\r\n        if (index !== false) {\r\n            setTimeout(function () {\r\n                try {\r\n\r\n                    inputLi.firstChild.focus();\r\n                    mini.selectRange(inputLi.firstChild, 100);\r\n                } catch (e) {\r\n                }\r\n            }, 10);\r\n        } else {\r\n            this.lastInputText = \"\";\r\n            this._inputEl.value = \"\";\r\n        }\r\n        return inputLi;\r\n    },\r\n    select: function (item) {\r\n        item = this.getItem(item);\r\n        if (this._selected) {\r\n            var itemEl = this.getItemEl(this._selected);\r\n            mini.removeClass(itemEl, this._itemSelectedClass);\r\n        }\r\n        this._selected = item;\r\n\r\n        if (this._selected) {\r\n            var itemEl = this.getItemEl(this._selected);\r\n            mini.addClass(itemEl, this._itemSelectedClass);\r\n        }\r\n\r\n        var sf = this;\r\n\r\n        if (this._selected) {\r\n            this.focusEl.focus();\r\n            var me = this;\r\n            setTimeout(function () {\r\n                try {\r\n                    me.focusEl.focus();\r\n                } catch (ex) { }\r\n            }, 50);\r\n        }\r\n\r\n        if (this._selected) {\r\n            sf.addCls(sf._focusCls);\r\n            sf._focused = true;\r\n        }\r\n    },\r\n    ////////////////////////////////////////\r\n    _doInsertInputValue: function () {\r\n\r\n        var text = this.getInputText();\r\n        var item = {};\r\n        item[this.textField] = text;\r\n        item[this.valueField] = text;\r\n        var index = this.editIndex;\r\n\r\n        this.insertItem(index, item);\r\n\r\n    },\r\n    _doInsertSelectValue: function () {\r\n\r\n        if (this._listbox.getData().length == 0) return;\r\n\r\n        var item = this._listbox.getSelected();\r\n        var index = this.editIndex;\r\n\r\n        if (item) {\r\n\r\n            item = mini.clone(item);\r\n\r\n            this.insertItem(index, item);\r\n        }\r\n    },\r\n    insertItem: function (index, item) {\r\n        this.selecteds.insert(index, item);\r\n        var text = this.getText();\r\n        var value = this.getValue();\r\n\r\n        this.setValue(value, false);\r\n        this.setText(text, false);\r\n\r\n        this._createSelecteds();\r\n\r\n        this.doUpdate();\r\n\r\n        this.showInput(index + 1);\r\n\r\n        this._OnValueChanged();\r\n    },\r\n    removeItem: function (item) {\r\n        if (!item) return;\r\n        var itemEl = this.getItemEl(item);\r\n        mini.removeNode(itemEl);\r\n\r\n        this.selecteds.remove(item);\r\n\r\n        var text = this.getText();\r\n        var value = this.getValue();\r\n\r\n\r\n        this.setValue(value, false);\r\n        this.setText(text, false);\r\n\r\n        this._OnValueChanged();\r\n    },\r\n    _createSelecteds: function () {\r\n        var texts = (this.text ? this.text : \"\").split(\",\");\r\n        var values = (this.value ? this.value : \"\").split(\",\");\r\n\r\n        if (values[0] == \"\") values = [];\r\n        var len = values.length;\r\n        this.selecteds.length = len;\r\n\r\n        for (var i = 0, l = len; i < l; i++) {\r\n            var o = this.selecteds[i];\r\n            if (!o) {\r\n                o = {};\r\n                this.selecteds[i] = o;\r\n            }\r\n\r\n            //if (!o._id) o._id = this.itemID++;\r\n\r\n            var text = !mini.isNull(texts[i]) ? texts[i] : \"\";\r\n            var value = !mini.isNull(values[i]) ? values[i] : \"\";\r\n\r\n            mini._setMap(this.textField, text, o);\r\n            mini._setMap(this.valueField, value, o);\r\n        }\r\n\r\n        this.value = this.getValue();\r\n        this.text = this.getText();\r\n    },\r\n    getInputText: function () {\r\n        return this._inputEl ? this._inputEl.value : \"\";\r\n    },\r\n    getText: function () {\r\n        var sb = [];\r\n        for (var i = 0, l = this.selecteds.length; i < l; i++) {\r\n            var o = this.selecteds[i];\r\n            var name = mini._getMap(this.textField, o);\r\n            if (mini.isNull(name)) name = \"\";\r\n            name = name.replace(\",\", \"，\");\r\n            sb.push(name);\r\n        }\r\n        return sb.join(\",\");\r\n    },\r\n    getValue: function () {\r\n        var sb = [];\r\n        for (var i = 0, l = this.selecteds.length; i < l; i++) {\r\n            var o = this.selecteds[i];\r\n            var v = mini._getMap(this.valueField, o);\r\n            sb.push(v);\r\n        }\r\n        return sb.join(\",\")\r\n    },\r\n\r\n    getFormValue: function () {\r\n        var value = this.value;\r\n        if (value === null || value === undefined) value = \"\";\r\n        return String(value);\r\n    },\r\n\r\n    ///////////////////////////////\r\n    setName: function (value) {\r\n        if (this.name != value) {\r\n            this.name = value;\r\n            this._valueEl.name = value;\r\n        }\r\n    },\r\n    setValue: function (value) {\r\n\r\n        if (mini.isNull(value)) value = \"\";\r\n\r\n        if (this.value != value) {\r\n            this.value = value;\r\n            this._valueEl.value = value;\r\n            this._createSelecteds();\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    setText: function (value) {\r\n        if (mini.isNull(value)) value = \"\";\r\n        if (this.text !== value) {\r\n            this.text = value;\r\n            this._createSelecteds();\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    setValueField: function (value) {\r\n        this.valueField = value;\r\n        this._createSelecteds();\r\n    },\r\n    getValueField: function () {\r\n        return this.valueField;\r\n    },\r\n    setTextField: function (value) {\r\n        this.textField = value;\r\n        this._createSelecteds();\r\n    },\r\n    getTextField: function () {\r\n        return this.textField;\r\n    },\r\n    setAllowInput: function (value) {\r\n        this.allowInput = value;\r\n        this.doLayout();\r\n    },\r\n    getAllowInput: function () {\r\n        return this.allowInput;\r\n    },\r\n    setUrl: function (value) {\r\n        this.url = value;\r\n    },\r\n    getUrl: function () {\r\n        return this.url;\r\n    },\r\n    setPopupHeight: function (value) {\r\n        this.popupHeight = value;\r\n    },\r\n    getPopupHeight: function () {\r\n        return this.popupHeight;\r\n    },\r\n    setPopupMinHeight: function (value) {\r\n        this.popupMinHeight = value;\r\n    },\r\n    getPopupMinHeight: function () {\r\n        return this.popupMinHeight;\r\n    },\r\n    setPopupMaxHeight: function (value) {\r\n        this.popupMaxHeight = value;\r\n    },\r\n    getPopupMaxHeight: function () {\r\n        return this.popupMaxHeight;\r\n    },\r\n\r\n\r\n    valueFromSelect: true,\r\n    setValueFromSelect: function (value) {\r\n        this.valueFromSelect = value;\r\n    },\r\n    getValueFromSelect: function () {\r\n        return this.valueFromSelect;\r\n    },\r\n    ////////////////////////////////////////////////    \r\n    doQuery: function () {\r\n        this._startQuery(true);\r\n    },\r\n    //文本框宽度调整\r\n    _syncInputSize: function () {\r\n        if (this.isDisplay() == false) return;\r\n        var text = this.getInputText();\r\n        var size = mini.measureText(this._inputEl, text);\r\n        var width = size.width > 20 ? size.width + 4 : 20;\r\n        var elWidth = mini.getWidth(this.el, true);\r\n        if (width > elWidth - 15) width = elWidth - 15;\r\n        this._inputEl.style.width = width + \"px\";\r\n    },\r\n\r\n    inputMode: false,\r\n    setIputMode: function (value) {\r\n        this.inputMode = value;\r\n    },\r\n    getIputMode: function () {\r\n        return this.inputMode;\r\n    },\r\n\r\n\r\n    _startQuery: function (oldText) {\r\n        var sf = this;\r\n\r\n        if (this.inputMode) return;\r\n\r\n        setTimeout(function () {\r\n            sf._syncInputSize();\r\n        }, 1);\r\n\r\n        this.showPopup(\"loading\");\r\n\r\n        this._stopQuery();\r\n\r\n        this._loading = true;\r\n\r\n        this.delayTimer = setTimeout(function () {\r\n            var text = sf._inputEl.value;\r\n\r\n            //if (oldText === true || text != oldText) {\r\n            sf._doQuery();\r\n            //}\r\n        }, this.delay);\r\n    },\r\n    ajaxDataType: \"text\",\r\n    ajaxContentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\r\n\r\n    _getSelectedMap: function () {\r\n        var map = {};\r\n        for (var i = 0, l = this.selecteds.length; i < l; i++) {\r\n            var o = this.selecteds[i];\r\n            map[o[this.valueField]] = o[this.textField];\r\n\r\n        }\r\n        return map;\r\n    },\r\n\r\n    _getFilterLocalData: function (key) {\r\n        var sf = this,\r\n            data = [],\r\n            map = this._getSelectedMap();\r\n\r\n        key = (key || \"\").toLowerCase();\r\n\r\n        for (var i = 0, l = sf.data.length; i < l; i++) {\r\n            var o = sf.data[i];\r\n            var id = o[this.valueField];\r\n            if (!map[id]) {\r\n                var text = o[this.textField];\r\n                if (!key || String(text).toLowerCase().indexOf(key) != -1) {\r\n                    data.push(o);\r\n                }\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    _doQuery: function () {\r\n        if (this.isDisplay() == false) return;\r\n        var text = this.getInputText();\r\n\r\n        var sf = this;\r\n\r\n        //local\r\n\r\n        if (!sf.remote) {\r\n            var data = this._getFilterLocalData(text);\r\n\r\n            sf._listbox.setData(data);\r\n            sf.showPopup();\r\n            sf._listbox._focusItem(0, true);\r\n\r\n            sf._loading = false;\r\n\r\n            return;\r\n        }\r\n\r\n\r\n        //remote\r\n        var dataSource = this._listbox.getData();\r\n        var params = {\r\n            //key: text,\r\n            value: this.getValue(),\r\n            text: this.getText()\r\n        };\r\n        params[this.searchField] = text;\r\n\r\n        var url = this.url;\r\n        var fn = typeof url == \"function\" ? url : window[url];\r\n        if (typeof fn == \"function\") {\r\n            url = fn(this);\r\n        }\r\n        if (!url) return;\r\n\r\n        var ajaxMethod = \"post\";\r\n        if (url) {\r\n            if (url.indexOf(\".txt\") != -1 || url.indexOf(\".json\") != -1) {\r\n                ajaxMethod = \"get\";\r\n            }\r\n        }\r\n\r\n        var e = {\r\n            url: url,\r\n            async: true,\r\n            params: params,\r\n            data: params,\r\n            type: this.ajaxType ? this.ajaxType : ajaxMethod,\r\n            cache: false,\r\n            cancel: false\r\n        };\r\n\r\n        jQuery.extend(true, e, this.ajaxOptions);\r\n\r\n        this.fire(\"beforeload\", e);\r\n        if (e.cancel) return;\r\n\r\n        var me = this;\r\n        mini.copyTo(e, {\r\n            success: function (text, textStatus, xhr) {\r\n                delete e.params;\r\n                var obj = { text: text, result: null, sender: me, options: e, xhr: xhr };\r\n                var result = null;\r\n                try {\r\n                    mini_doload(obj);\r\n                    result = obj.result;\r\n                    if (!result) {\r\n                        result = mini.decode(text);\r\n                    }\r\n                } catch (ex) {\r\n                    if (mini_debugger == true) {\r\n                        throw new Error(\"textboxlist json is error\");\r\n                    }\r\n                }\r\n                if (mini.isArray(result)) result = { data: result };\r\n\r\n                //var data = mini.decode(text);\r\n\r\n                //                if (mini.isNumber(data.error) && data.error != 0) {\r\n                //                    var ex = {};\r\n                //                    ex.stackTrace = data.stackTrace;\r\n                //                    ex.errorMsg = data.errorMsg;\r\n                //                    if (mini_debugger == true) {\r\n                //                        alert(url + \"\\n\" + ex.textStatus + \"\\n\" + ex.stackTrace);\r\n                //                    }\r\n                //                    return;\r\n                //                }\r\n\r\n                if (me.dataField) {\r\n                    result.data = mini._getMap(me.dataField, result);\r\n                }\r\n                if (!result.data) result.data = [];\r\n\r\n                sf._listbox.setData(result.data);\r\n                sf.showPopup();\r\n                sf._listbox._focusItem(0, true);\r\n                sf.fire(\"load\", { data: result.data, result: result });\r\n                sf._loading = false;\r\n\r\n                if (sf._selectOnLoad) {\r\n                    sf.__doSelectValue();\r\n                    sf._selectOnLoad = null;\r\n                }\r\n            },\r\n            error: function (jqXHR, textStatus, errorThrown) {\r\n                sf.showPopup(\"error\");\r\n            }\r\n        });\r\n\r\n        sf._ajaxer = mini.ajax(e);\r\n    },\r\n    _stopQuery: function () {\r\n        if (this.delayTimer) {\r\n            clearTimeout(this.delayTimer);\r\n            this.delayTimer = null;\r\n        }\r\n        if (this._ajaxer) {\r\n            this._ajaxer.abort();\r\n        }\r\n        this._loading = false;\r\n    },\r\n\r\n    ////////////////////////////////////////////////\r\n    within: function (e) {\r\n        if (mini.isAncestor(this.el, e.target)) return true;\r\n        if (this.showPopup && this.popup && this.popup.within(e)) return true;\r\n        return false;\r\n    },\r\n\r\n    ////////////////////////////////\r\n\r\n    placeholder: \"\",\r\n    setPlaceholder: function (value) {\r\n\r\n        this.placeholder = value;\r\n    },\r\n    getPlaceholder: function (value) {\r\n        return this.placeholder;\r\n    },\r\n\r\n    emptyText: \"No Result\",     //emptyDatText\r\n    setEmptyText: function (value) {\r\n        this.popupEmptyText = \"<span class='mini-textboxlist-popup-noresult'>\" + value + \"</span>\";\r\n        this.emptyText = value;\r\n    },\r\n    getEmptyText: function (value) {\r\n        return this.emptyText;\r\n    },\r\n    loadingText: \"Loading...\",\r\n    setLoadingText: function (value) {\r\n        this.popupLoadingText = \"<span class='mini-textboxlist-popup-noresult'>\" + value + \"</span>\";\r\n        this.loadingText = value;\r\n    },\r\n    getLoadingText: function (value) {\r\n        return this.loadingText;\r\n    },\r\n    errorText: \"Error\",\r\n    setErrorText: function (value) {\r\n        this.popupEmptyText = \"<span class='mini-textboxlist-popup-noresult'>\" + value + \"</span>\";\r\n        this.errorText = value;\r\n    },\r\n    getErrorText: function (value) {\r\n        return this.errorText;\r\n    },\r\n    ////////////////////////////////\r\n\r\n    popupLoadingText: \"<span class='mini-textboxlist-popup-loading'>Loading...</span>\",\r\n    popupErrorText: \"<span class='mini-textboxlist-popup-error'>Error</span>\",\r\n    popupEmptyText: \"<span class='mini-textboxlist-popup-noresult'>No Result</span>\",\r\n\r\n    isShowPopup: false,\r\n    popupHeight: \"\",\r\n    popupMinHeight: 30,\r\n    popupMaxHeight: 150,\r\n    _createPopup: function () {\r\n        if (!this.popup) {\r\n            this.popup = new mini.ListBox();\r\n            this.popup.addCls(\"mini-textboxlist-popup\");\r\n            this.popup.setStyle(\"position:absolute;left:0;top:0;\");\r\n            this.popup.showEmpty = true;\r\n            this.popup.setValueField(this.valueField);\r\n            this.popup.setTextField(this.textField);\r\n            this.popup.render(document.body);\r\n\r\n            this.popup.on(\"itemclick\", function (e) {\r\n                this.hidePopup();\r\n\r\n                this._doInsertSelectValue();\r\n            }, this);\r\n        }\r\n        this._listbox = this.popup;\r\n        return this.popup;\r\n    },\r\n    showPopup: function (action) {\r\n        if (this.isDisplay() == false) return;\r\n        this.isShowPopup = true;\r\n\r\n        var popup = this._createPopup();\r\n\r\n        popup.el.style.zIndex = mini.getMaxZIndex();\r\n        var control = this._listbox;\r\n        control.emptyText = this.popupEmptyText;\r\n\r\n        //action = \"loading\";\r\n        if (action == \"loading\") {\r\n            control.emptyText = this.popupLoadingText;\r\n            this._listbox.setData([]);\r\n        } else if (action == \"error\") {\r\n            control.emptyText = this.popupLoadingText;\r\n            this._listbox.setData([]);\r\n        }\r\n        this._listbox.doUpdate();\r\n\r\n        var box = this.getBox();\r\n        var x = box.x, y = box.y + box.height;\r\n\r\n        this.popup.el.style.display = \"block\";\r\n        mini.setXY(popup.el, -1000, -1000);\r\n        this.popup.setWidth(box.width);\r\n\r\n        this.popup.setHeight(this.popupHeight);\r\n\r\n        if (this.popup.getHeight() < this.popupMinHeight) {\r\n            this.popup.setHeight(this.popupMinHeight);\r\n        }\r\n        if (this.popup.getHeight() > this.popupMaxHeight) {\r\n            this.popup.setHeight(this.popupMaxHeight);\r\n        }\r\n        mini.setXY(popup.el, x, y);\r\n\r\n    },\r\n    hidePopup: function () {\r\n        this.isShowPopup = false;\r\n        if (this.popup) this.popup.el.style.display = \"none\";\r\n    },\r\n    ////////////////////////////////////////////////\r\n    __OnMouseMove: function (e) {\r\n        if (this.enabled == false) return;\r\n        var item = this.getItemByEvent(e);\r\n        if (!item) {\r\n            this.blurItem();\r\n            return;\r\n        }\r\n        this.hoverItem(item, e);\r\n    },\r\n    __OnMouseOut: function (e) {\r\n        this.blurItem();\r\n    },\r\n    __OnClick: function (e) {\r\n        if (this.isReadOnly() || this.enabled == false) return;\r\n        if (this.enabled == false) return;\r\n        //if (this.isReadOnly()) return;\r\n\r\n        var item = this.getItemByEvent(e);\r\n        if (!item) {\r\n            if (mini.findParent(e.target, \"mini-textboxlist-input\")) {\r\n\r\n            } else {\r\n                this.showInput();\r\n            }\r\n            return;\r\n        }\r\n        this.focusEl.focus();\r\n        this.select(item);\r\n\r\n        if (e && mini.hasClass(e.target, \"mini-textboxlist-close\")) {\r\n            this.removeItem(item);\r\n\r\n            this.fire(\"removeitem\", { item: item });\r\n        }\r\n    },\r\n    __OnKeyDown: function (e) {\r\n\r\n\r\n        if (this.isReadOnly() || this.allowInput == false) return false;\r\n\r\n        var index = this.selecteds.indexOf(this._selected);\r\n\r\n        var sf = this;\r\n        function remove() {\r\n            var item = sf.selecteds[index];\r\n            sf.removeItem(item);\r\n\r\n            item = sf.selecteds[index];\r\n            if (!item) item = sf.selecteds[index - 1];\r\n            sf.select(item);\r\n            if (!item) {\r\n                sf.showInput();\r\n            }\r\n        }\r\n\r\n        switch (e.keyCode) {\r\n            case 8:     //backspace\r\n                e.preventDefault();\r\n                remove();\r\n                break;\r\n            case 37:    //left\r\n            case 38:    //top      \r\n                this.select(null);\r\n                this.showInput(index);\r\n                break;\r\n            case 39:    //right\r\n            case 40:    //bottom\r\n                index += 1;\r\n                this.select(null);\r\n                this.showInput(index);\r\n                break;\r\n            case 46:    //del\r\n                remove();\r\n                break;\r\n        }\r\n    },\r\n    __doSelectValue: function () {\r\n        var item = this._listbox.getFocusedItem();\r\n        if (item) {\r\n            this._listbox.setSelected(item);\r\n\r\n\r\n            this.lastInputText = this.text;\r\n            this.hidePopup();\r\n\r\n            this._doInsertSelectValue();\r\n\r\n        } else if (!this.valueFromSelect) {\r\n            var text = this.getInputText().trim();\r\n            if (text) {\r\n                this._doInsertInputValue();\r\n            }\r\n            //            var item = this._listbox.getFocusedItem();\r\n            //            if (!item && !this.valueFromSelect) {\r\n            //                var value = this._inputEl.value.trim()\r\n            //                if (value != \"\") {\r\n            //                    //this.selecteds.push({ value: value, text: value })\r\n            //                    this.doUpdate();\r\n            //                    this.showInput()\r\n\r\n            //                }\r\n\r\n            //            }\r\n\r\n        }\r\n\r\n        //this._doSetValue();\r\n        //                    var text = this._getValueAndText(this.value)[1];\r\n        //                    this.setText(text, true);\r\n\r\n\r\n    },\r\n    __OnInputKeyDown: function (e) {\r\n\r\n        this._selectOnLoad = null;\r\n\r\n        if (this.isReadOnly() || this.allowInput == false) return false;\r\n        \r\n        if (e.keyCode == 13 && !this.isShowPopup) {\r\n            return ;\r\n        }\r\n\r\n        e.stopPropagation();\r\n\r\n        if (this.isReadOnly() || this.allowInput == false) return;\r\n\r\n        var range = mini.getSelectRange(this._inputEl);\r\n        var start = range[0], end = range[1], textLen = this._inputEl.value.length;\r\n        var isFirst = start == end && start == 0;\r\n        var isLast = start == end && end == textLen;\r\n\r\n\r\n        if (this.isReadOnly() || this.allowInput == false) { //bacjsoace\r\n            e.preventDefault();\r\n        }\r\n        if (e.keyCode == 9) {   //tab            \r\n            this.hidePopup();\r\n            return;\r\n        }\r\n        if (e.keyCode == 16 || e.keyCode == 17 || e.keyCode == 18) return;\r\n\r\n        switch (e.keyCode) {\r\n\r\n            //            case 13:    //enter                                            \r\n\r\n            //                if (this.isShowPopup) {                                            \r\n            //                    e.preventDefault();                                            \r\n\r\n            //                    //是否交互中？                                                                \r\n            //                    if (this._loading) {                                            \r\n            //                        this._selectOnLoad = true;                                            \r\n            //                        return;                                            \r\n            //                    }                                            \r\n\r\n            //                    //选中                                            \r\n            //                    this.__doSelectValue();                                            \r\n\r\n            //                }                                            \r\n\r\n            //                break;                                             \r\n\r\n            case 13:    //enter\r\n\r\n                if (this.inputMode) {\r\n                    var text = this.getInputText().trim();\r\n                    if (text) {\r\n                        this._doInsertInputValue();\r\n                    }\r\n                    return;\r\n                }\r\n\r\n\r\n                if (this.isShowPopup) {\r\n                    e.preventDefault();\r\n\r\n                    //是否交互中？                    \r\n                    if (this._loading) {\r\n                        this._selectOnLoad = true;\r\n                        return;\r\n                    }\r\n\r\n                    var item = this._listbox.getFocusedItem();\r\n                    if (item && item.enabled === false) return;\r\n\r\n                    //选中\r\n                    this.__doSelectValue();\r\n\r\n                    //                    var item = this._listbox.getFocusedItem();\r\n                    //                    if (!item && !this.valueFromSelect) {\r\n                    //                        var value = this._inputEl.value.trim()\r\n                    //                        if (value != \"\") {\r\n                    //                            //this.selecteds.push({ value: value, text: value })\r\n                    //                            this.doUpdate();\r\n                    //                            this.showInput()\r\n                    //                        }\r\n                    //                    }\r\n                }\r\n                break;\r\n\r\n            case 27:    //esc\r\n                e.preventDefault();\r\n                this.hidePopup();\r\n                break;\r\n            case 8:    //backspace\r\n\r\n                if (isFirst) {\r\n                    e.preventDefault();\r\n                }\r\n            case 37:    //left\r\n                if (isFirst) {\r\n                    if (this.isShowPopup) {\r\n                        this.hidePopup();\r\n                    } else {\r\n                        if (this.editIndex > 0) {\r\n                            var index = this.editIndex - 1;\r\n                            if (index < 0) index = 0;\r\n                            if (index >= this.selecteds.length) index = this.selecteds.length - 1;\r\n\r\n                            this.showInput(false);\r\n                            this.select(index);\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 39:    //right\r\n                if (isLast) {\r\n                    if (this.isShowPopup) {\r\n                        this.hidePopup();\r\n                    } else {\r\n                        if (this.editIndex <= this.selecteds.length - 1) {\r\n\r\n                            var index = this.editIndex;\r\n                            //                        if (index < 0) index = 0;\r\n                            //                        if (index >= this.selecteds.length) index = this.selecteds.length - 1;\r\n                            this.showInput(false);\r\n                            this.select(index);\r\n\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 38: //top\r\n                e.preventDefault();\r\n                if (this.isShowPopup) {\r\n                    var index = -1;\r\n                    var item = this._listbox.getFocusedItem();\r\n                    if (item) index = this._listbox.indexOf(item);\r\n                    index--;\r\n                    if (index < 0) index = 0;\r\n                    this._listbox._focusItem(index, true);\r\n\r\n                    //his._doSetValue();\r\n                }\r\n                break;\r\n            case 40: //bottom\r\n\r\n                e.preventDefault();\r\n                if (this.isShowPopup) {\r\n                    var index = -1;\r\n                    var item = this._listbox.getFocusedItem();\r\n                    if (item) index = this._listbox.indexOf(item);\r\n                    index++\r\n                    if (index < 0) index = 0;\r\n                    if (index >= this._listbox.getCount()) index = this._listbox.getCount() - 1;\r\n                    this._listbox._focusItem(index, true);\r\n\r\n                    //this._doSetValue();\r\n                } else {\r\n                    this._startQuery(true);\r\n                }\r\n                break;\r\n            default:\r\n                //this._startQuery(this._inputEl.value);\r\n                break;\r\n        }\r\n    },\r\n    ////////////////////////////////////////////////\r\n    focus: function () {\r\n\r\n        try {\r\n            this._inputEl.focus();\r\n        } catch (e) {\r\n        }\r\n    },\r\n    blur: function () {\r\n        try {\r\n            this._inputEl.blur();\r\n        } catch (e) {\r\n        }\r\n    },\r\n    searchField: \"key\",\r\n    setSearchField: function (value) {\r\n        this.searchField = value;\r\n    },\r\n    getSearchField: function () {\r\n        return this.searchField;\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.TextBox.superclass.getAttrs.call(this, el);\r\n        var jq = jQuery(el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"value\", \"text\", \"valueField\", \"textField\", \"url\", \"popupHeight\",\r\n            \"textName\", \"onfocus\", \"onbeforeload\", \"onload\", \"searchField\",\r\n            \"emptyText\", \"loadingText\", \"errorText\", \"onblur\", \"onremoveitem\", \"placeholder\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"allowInput\", \"valueFromSelect\", \"remote\", \"inputMode\"\r\n             ]\r\n        );\r\n\r\n        mini._ParseInt(el, attrs,\r\n            [\"popupMinHeight\", \"popupMaxHeight\"\r\n             ]\r\n        );\r\n        return attrs;\r\n    }\r\n\r\n});\r\n\r\nmini.regClass(mini.TextBoxList, \"textboxlist\");\n\r\nmini.AutoComplete = function () {\r\n    mini.AutoComplete.superclass.constructor.apply(this, arguments);\r\n\r\n    //this._updateButton(\"popup\", { visible: false });\r\n\r\n    var sf = this;\r\n    sf._ValueChangeTimer = null;\r\n\r\n    this._textEl.onfocus = function () {\r\n        //sf._NowText = sf._textEl.value;\r\n        sf._LastInputText = sf._textEl.value;\r\n        sf._ValueChangeTimer = setInterval(function () {\r\n            //document.title = new Date().getTime();\r\n\r\n            if (sf._LastInputText != sf._textEl.value) {\r\n                //if( sf.minChars\r\n\r\n                sf._tryQuery();\r\n                sf._LastInputText = sf._textEl.value;\r\n\r\n                if (sf._textEl.value == \"\" && sf.value != \"\") {\r\n                    sf.setValue(\"\");\r\n                    sf._OnValueChanged();\r\n                }\r\n            }\r\n        }, 10);\r\n\r\n        //sf.addCls(sf._focusCls);\r\n        //sf._focused = true;\r\n    }\r\n    this._textEl.onblur = function () {\r\n        clearInterval(sf._ValueChangeTimer);\r\n        if (!sf.isShowPopup()) {\r\n            if (sf._LastInputText != sf._textEl.value) {\r\n                //alert(1);\r\n                if (sf._textEl.value == \"\" && sf.value != \"\") {\r\n                    sf.setValue(\"\");\r\n                    sf._OnValueChanged();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    this._buttonEl.style.display = \"none\";\r\n\r\n    this._doInputLayout();\r\n}\r\nmini.extend(mini.AutoComplete, mini.ComboBox, {\r\n    remote: true,   //false\r\n\r\n    url: \"\",\r\n    allowInput: true,\r\n    delay: 150,\r\n\r\n    showButton: false,\r\n\r\n    searchField: \"key\",\r\n\r\n    minChars: 0,\r\n\r\n    _buttonWidth: 0,\r\n\r\n    uiCls: \"mini-autocomplete\",\r\n\r\n    _initInput: function () {\r\n        var me = this;\r\n\r\n        if (isFirefox) {\r\n            this._textEl.oninput = function () {\r\n                if (!me.enterQuery) {\r\n\r\n                    me._tryQuery();\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    getRemote: function () {\r\n        return this.remote;\r\n    },\r\n\r\n    setRemote: function (remote) {\r\n        this.remote = remote;\r\n    },\r\n\r\n    setUrl: function (value) {\r\n        this.url = value;\r\n        if (!this.remote) {\r\n            mini.AutoComplete.superclass.setUrl.call(this, value);\r\n        }\r\n    },\r\n    setValue: function (value) {\r\n        //if (value == \"德国\") alert(value);\r\n        if (mini.isNull(value)) value = \"\";\r\n        if (this.value != value) {\r\n            this.value = value;\r\n            this._valueEl.value = this.value;\r\n        }\r\n        this.__oldText = '';\r\n    },\r\n    setText: function (value) {\r\n        if (mini.isNull(value)) value = \"\";\r\n        if (this.text != value) {\r\n            this.text = value;\r\n            this._LastInputText = value;\r\n        }\r\n        //fix ff\r\n        //        var _canFire = this._canFire;\r\n        //        this._canFire = false;\r\n        //this._stopTextChanged = true;   //fix ff\r\n        this._textEl.value = this.text;\r\n        //delete this._stopTextChanged;\r\n        //this._canFire = _canFire;\r\n    },\r\n\r\n    setMinChars: function (value) {\r\n        this.minChars = value;\r\n    },\r\n    getMinChars: function () {\r\n        return this.minChars;\r\n    },\r\n    setSearchField: function (value) {\r\n        this.searchField = value;\r\n    },\r\n    getSearchField: function () {\r\n        return this.searchField;\r\n    },\r\n\r\n\r\n    ////////////////////////////////\r\n    popupEmptyText: \"No Result\",\r\n    setPopupEmptyText: function (value) {\r\n        this.popupEmptyText = value;\r\n    },\r\n    getPopupEmptyText: function (value) {\r\n        return this.popupEmptyText;\r\n    },\r\n    loadingText: \"Loading...\",\r\n    setLoadingText: function (value) {\r\n        this.loadingText = value;\r\n    },\r\n    getLoadingText: function (value) {\r\n        return this.loadingText;\r\n    },\r\n    errorText: \"Error\",\r\n    setErrorText: function (value) {\r\n        this.errorText = value;\r\n    },\r\n    getErrorText: function (value) {\r\n        return this.errorText;\r\n    },\r\n    ////////////////////////////////\r\n\r\n    //    popupLoadingText: \"<span class='mini-textboxlist-popup-loading'>Loading...</span>\",\r\n    //    popupErrorText: \"<span class='mini-textboxlist-popup-error'>Error</span>\",\r\n    //    popupEmptyText: \"<span class='mini-textboxlist-popup-noresult'>No Result</span>\",\r\n\r\n    getPopupEmptyHtml: function () {\r\n        return \"<span class='mini-textboxlist-popup-noresult'>\" + this.popupEmptyText + \"</span>\";\r\n    },\r\n    getPopupLoadingHtml: function () {\r\n        return \"<span class='mini-textboxlist-popup-loading'>\" + this.loadingText + \"</span>\"\r\n    },\r\n    getPopupErrorHtml: function () {\r\n        return \"<span class='mini-textboxlist-popup-error'>\" + this.errorText + \"</span>\";\r\n    },\r\n\r\n    showPopup: function (action) {\r\n\r\n        var popup = this.getPopup();\r\n        var control = this._listbox;\r\n        control.showEmpty = true;\r\n        control.emptyText = this.getPopupEmptyHtml();\r\n        if (action == \"loading\") {\r\n            control.emptyText = this.getPopupLoadingHtml();\r\n            this._listbox.setData([]);\r\n        } else if (action == \"error\") {\r\n            control.emptyText = this.getPopupErrorHtml();\r\n            this._listbox.setData([]);\r\n        }\r\n        this._listbox.doUpdate();\r\n\r\n        mini.AutoComplete.superclass.showPopup.call(this);\r\n\r\n\r\n    },\r\n    ///////////////////////////////\r\n    //    __OnInputKeyUp: function (e) {\r\n    //        this.__OnInputKeyDown(e);\r\n    //    },\r\n    __OnInputKeyDown: function (e) {\r\n        var me = this;\r\n        var ex = { htmlEvent: e };\r\n        this.fire(\"keydown\", ex);\r\n        if (e.keyCode == 8 && (this.isReadOnly() || this.allowInput == false)) {\r\n            return false;\r\n        }\r\n        if (e.keyCode == 9) {   //tab\r\n            this.hidePopup();\r\n            return;\r\n        }\r\n        if (e.keyCode == 16 || e.keyCode == 17 || e.keyCode == 18) {\r\n            return;\r\n        }\r\n\r\n        if (this.isReadOnly()) return;\r\n\r\n        switch (e.keyCode) {\r\n            case 27:        //esc\r\n                if (this.isShowPopup()) {\r\n                    e.stopPropagation();\r\n                }\r\n\r\n                this.hidePopup();\r\n                break;\r\n            case 13:     //enter      \r\n\r\n                var doSelect = true;\r\n\r\n                if (!this.isShowPopup() || this._listbox.getData().length == 0) {\r\n\r\n                    //                    if (this.enterQuery) {\r\n                    //                        doSelect = false;\r\n                    //                        this._tryQuery(this._textEl.value);\r\n                    //                    }\r\n\r\n                    if (this.enterQuery) {\r\n                        doSelect = false;\r\n                        var searchText = this._textEl.value;\r\n                        if (this._enterSearchText != searchText || !me.loading) {\r\n                            this._enterSearchText = searchText;\r\n                            this._tryQuery(searchText);\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n                if (this.isShowPopup()) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n\r\n                    if (me._requestSearch !== true) {\r\n                        var index = this._listbox.getFocusedIndex();\r\n\r\n                        if (index != -1) {\r\n                            var item = this._listbox.getAt(index);\r\n                            var vts = this._listbox.getValueAndText([item]);\r\n                            var value = vts[0];\r\n\r\n                            this.setText(vts[1]);\r\n                            //                        if (mini.isFirefox) {   //FF下修改textEl.value，会激发changed...\r\n                            //                            this.blur();\r\n                            //                            this.focus();\r\n                            //                        }\r\n\r\n                            this.setValue(value);\r\n\r\n                            this._OnValueChanged();\r\n\r\n\r\n                            //alert(this.getValue());\r\n                        }\r\n                    }\r\n                } else {\r\n\r\n                    this.fire(\"enter\", ex);\r\n                }\r\n\r\n                if (doSelect) {\r\n                    this.hidePopup();\r\n                    this.focus();\r\n                }\r\n\r\n                break;\r\n            case 37:    //left\r\n                break;\r\n            case 38:    //top      \r\n                var index = this._listbox.getFocusedIndex();\r\n                if (index == -1) {\r\n                    index = 0;\r\n                    if (!this.multiSelect) {\r\n                        var item = this._listbox.findItems(this.value)[0];\r\n                        if (item) {\r\n                            index = this._listbox.indexOf(item);\r\n                        }\r\n                    }\r\n                }\r\n                if (this.isShowPopup()) {\r\n                    if (!this.multiSelect) {\r\n                        index -= 1;\r\n                        if (index < 0) index = 0;\r\n                        this._listbox._focusItem(index, true);\r\n                    }\r\n                }\r\n                break;\r\n            case 39:    //right\r\n                break;\r\n            case 40:    //bottom\r\n\r\n                var index = this._listbox.getFocusedIndex();\r\n                if (this.isShowPopup()) {\r\n                    if (!this.multiSelect) {\r\n                        index += 1;\r\n                        if (index > this._listbox.getCount() - 1) index = this._listbox.getCount() - 1;\r\n                        this._listbox._focusItem(index, true);\r\n                    }\r\n                } else {\r\n                    this._tryQuery(this._textEl.value);\r\n                }\r\n                break;\r\n            default:\r\n                if (this.enterQuery == true) {\r\n                    this.hidePopup();\r\n                    this.focus();\r\n                } else {\r\n\r\n                    this._keydownQuery();\r\n\r\n\r\n                }\r\n\r\n                break;\r\n        }\r\n    },\r\n\r\n    delay: 200,\r\n\r\n    _keydownQuery: function () {\r\n        var me = this;\r\n\r\n        me._requestSearch = true;       //发起请求\r\n\r\n        if (!me.remote) me._requestSearch = false;\r\n\r\n        //        var text = me._textEl.value;\r\n        //        me._tryQuery(text);\r\n\r\n        //        return;\r\n\r\n        if (me._keydownTimer) {\r\n            clearTimeout(me._keydownTimer);\r\n            me._keydownTimer = null;\r\n        }\r\n\r\n        me._keydownTimer = setTimeout(function () {\r\n\r\n            var text = me._textEl.value;\r\n            if (text != me.__oldText) {\r\n                me._tryQuery(text);\r\n\r\n\r\n                me.__oldText = text;\r\n            }\r\n\r\n        }, me.delay);\r\n\r\n    },\r\n\r\n    enterQuery: false,\r\n    doQuery: function () {\r\n\r\n        this._tryQuery();\r\n    },\r\n    _tryQuery: function (oldText) {\r\n        var sf = this;\r\n\r\n\r\n        if (this._queryTimer) {\r\n            clearTimeout(this._queryTimer);\r\n            this._queryTimer = null;\r\n        }\r\n        this._queryTimer = setTimeout(function () {\r\n            var text = sf._textEl.value;\r\n            //if (text != oldText) {\r\n\r\n            sf._doQuery(text);\r\n\r\n            //document.title = text + \":\" + new Date().getTime();\r\n\r\n            //document.title = new Date();\r\n            //}\r\n        }, this.delay);\r\n        if (sf._tryHide() !== false) {\r\n            this.showPopup(\"loading\");\r\n        }\r\n    },\r\n\r\n    _tryHide: function () {\r\n        var me = this;\r\n        if (mini.getActiveElement() != me._textEl && mini.hasClass(me.el, 'mini-buttonedit-focus')) {\r\n            me.hidePopup();\r\n            return false;\r\n        }\r\n    },\r\n\r\n    blur: function () {\r\n        var me = this;\r\n        mini.AutoComplete.superclass.blur.apply(this);\r\n\r\n        if (me._ajaxer) {\r\n            me._ajaxer.abort();\r\n            me._ajaxer = null;\r\n        }\r\n        if (me._doloadTimer) {\r\n            clearTimeout(me._doloadTimer);\r\n            me._doloadTimer = null;\r\n        }\r\n        if (me._queryTimer) {\r\n            clearTimeout(me._queryTimer);\r\n            me._queryTimer = null;\r\n        }\r\n        if (me._keydownTimer) {\r\n            clearTimeout(me._keydownTimer);\r\n            me._keydownTimer = null;\r\n        }\r\n        if (me.isShowPopup()) {\r\n            me.hidePopup();\r\n        }\r\n        //alert(111);\r\n    },\r\n\r\n    _doQuery: function (key) {\r\n        var me = this;\r\n        //if ($(document.activeElement).closest(me.el).length) {\r\n        //        if ($(document.activeElement).closest(me.el).length) {\r\n        //            document.title = new Date().getTime();\r\n        //            me.hidePopup();\r\n        //        }\r\n        if (mini.getActiveElement() != me._textEl) {\r\n            me.hidePopup();\r\n            return;\r\n        }\r\n\r\n        if (!this.remote) {\r\n            mini.AutoComplete.superclass._doQuery.apply(this, arguments);\r\n            return;\r\n        }\r\n\r\n        //if (!this.url) return;\r\n        if (this._ajaxer) {\r\n            this._ajaxer.abort();\r\n        }\r\n\r\n        var url = this.url;\r\n        var ajaxMethod = \"post\";\r\n        if (url) {\r\n            if (url.indexOf(\".txt\") != -1 || url.indexOf(\".json\") != -1) {\r\n                ajaxMethod = \"get\";\r\n            }\r\n        }\r\n\r\n        var params = {};\r\n        params[this.searchField] = key;\r\n\r\n        var e = {\r\n            url: url,\r\n            async: true,\r\n            params: params,\r\n            data: params,\r\n            type: this.ajaxType ? this.ajaxType : ajaxMethod,\r\n            cache: false,\r\n            cancel: false\r\n        };\r\n\r\n        jQuery.extend(true, e, this.ajaxOptions);\r\n\r\n        this.fire(\"beforeload\", e);\r\n\r\n        var me = this;\r\n        function doload(data, result) {\r\n            if (!me._focused) return;\r\n\r\n            if (me._tryHide() === false) return;\r\n            if (me._doloadTimer) {\r\n                clearTimeout(me._doloadTimer);\r\n                me._doloadTimer = null;\r\n            }\r\n            me._doloadTimer = setTimeout(function () {\r\n                me._doloadTimer = null;\r\n                me._tryHide();\r\n            }, 100);\r\n\r\n            me._listbox.setData(data);\r\n            me.showPopup();\r\n            me._listbox._focusItem(0, true);\r\n            me.data = data;\r\n            me.fire(\"load\", { data: data, result: result });\r\n        }\r\n\r\n        if (e.cancel) {\r\n            var data = e.result || [];\r\n            doload(data, data);\r\n            return;\r\n        }\r\n\r\n        //alert(this.dataField);\r\n\r\n        me.loading = true;\r\n\r\n        mini.copyTo(e, {\r\n            success: function (text, textStatus, xhr) {\r\n                delete e.params;\r\n                var obj = { text: text, result: null, sender: me, options: e, xhr: xhr };\r\n                var result = null;\r\n                try {\r\n                    mini_doload(obj);\r\n                    result = obj.result;\r\n                    if (!result) {\r\n                        result = mini.decode(text);\r\n                    }\r\n                } catch (ex) {\r\n                    if (mini_debugger == true) {\r\n                        throw new Error(\"autocomplete json is error\");\r\n                    }\r\n                }\r\n                if (mini.isArray(result)) result = { data: result };\r\n\r\n                //                if (mini.isNumber(result.error) && result.error != 0) {\r\n                //                    var ex = {};\r\n                //                    ex.stackTrace = result.stackTrace;\r\n                //                    ex.errorMsg = result.errorMsg;\r\n                //                    if (mini_debugger == true) {\r\n                //                        alert(url + \"\\n\" + ex.textStatus + \"\\n\" + ex.stackTrace);\r\n                //                    }\r\n                //                    return;\r\n                //                }\r\n\r\n                if (me.dataField) {\r\n                    result.data = mini._getMap(me.dataField, result);\r\n                }\r\n                if (!result.data) result.data = [];\r\n\r\n                doload(result.data, result);\r\n\r\n                //                if (me._doloadTimer) {\r\n                //                    clearTimeout(me._doloadTimer);\r\n                //                    me._doloadTimer = null;\r\n                //                }\r\n                //                me._doloadTimer = setTimeout(function () {\r\n                //                    doload(result.data, result);\r\n                //                }, 50);\r\n\r\n                //                me._listbox.setData(result.data);\r\n                //                me.showPopup();\r\n                //                me._listbox._focusItem(0, true);\r\n                //                me.data = result.data;\r\n                //                me.fire(\"load\", { data: result.data, result: result });\r\n\r\n            },\r\n            error: function (jqXHR, textStatus, errorThrown) {\r\n                //                if (textStatus != \"abort\") {\r\n                //                    me.showPopup(\"error\");\r\n                //                }\r\n            },\r\n            complete: function () {\r\n                me.loading = false;\r\n                me._requestSearch = false;\r\n                me._ajaxer = null;\r\n            }\r\n        });\r\n\r\n        this._ajaxer = mini.ajax(e);\r\n    },\r\n    setEnterQuery: function (value) {\r\n        this.enterQuery = value;\r\n    },\r\n    getEnterQuery: function () {\r\n        return this.enterQuery;\r\n    },\r\n    ////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.AutoComplete.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"searchField\", \"popupEmptyText\", \"loadingText\", \"errorText\"]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"enterQuery\", \"remote\"]\r\n        );\r\n\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.AutoComplete, \"autocomplete\");\n\r\nmini.ToolTip = function () {\r\n    mini.ToolTip.superclass.constructor.apply(this, arguments);\r\n\r\n    \r\n}\r\nmini.extend(mini.ToolTip, mini.Control, {\r\n\r\n    selector: '[title]',\r\n    placement: 'bottom',    //bottomleft, topleft, bottomright, topright\r\n    trigger: 'hover focus',\r\n    delay: 200,\r\n\r\n    uiCls: \"mini-tooltip\",\r\n\r\n    _create: function () {\r\n        this.el = jQuery('<div class=\"mini-tooltip\"><div class=\"mini-tooltip-arrow\"></div><div class=\"mini-tooltip-inner mini-corner-all\"></div></div>')[0];\r\n        this.$element = jQuery(this.el);\r\n        this.$element.appendTo(document.body);\r\n    },\r\n    _initEvents: function () {\r\n\r\n    },\r\n    _bindTooltip: function () {\r\n        var jq = jQuery(document),\r\n            selector = this.selector,\r\n            type = 'tooltip';\r\n\r\n        jq.unbind('.' + type, this);\r\n\r\n        var triggers = this.trigger.split(' ');\r\n\r\n        for (var i = triggers.length; i--; ) {\r\n            var trigger = triggers[i]\r\n\r\n            if (trigger == 'click') {\r\n                jq.on('click.' + type, selector, jQuery.proxy(this._toggle, this))\r\n            } else if (trigger != 'manual') {\r\n                var eventIn = trigger == 'hover' ? 'mouseenter' : 'focus'\r\n                var eventOut = trigger == 'hover' ? 'mouseleave' : 'blur'\r\n\r\n                jq.on(eventIn + '.' + type, selector, jQuery.proxy(this._enter, this))\r\n                jq.on(eventOut + '.' + type, selector, jQuery.proxy(this._leave, this))\r\n            }\r\n        }\r\n    },\r\n\r\n    setSelector: function (value) {\r\n        this.selector = value;\r\n        this._bindTooltip();\r\n    },\r\n    getSelector: function () {\r\n        return this.selector;\r\n    },\r\n    setPlacement: function (value) {\r\n        this.placement = value;\r\n    },\r\n    getPlacement: function () {\r\n        return this.placement;\r\n    },\r\n    setTrigger: function (value) {\r\n        this.trigger = value;\r\n        this._bindTooltip();\r\n    },\r\n    getTrigger: function () {\r\n        return this.trigger;\r\n    },\r\n    //////////////////////////////////////////////////\r\n\r\n    openTimer: null,\r\n    _enter: function (e) {\r\n\r\n\r\n        var self = this;\r\n\r\n        var target = e.currentTarget;\r\n        this.getContent(target);\r\n\r\n        clearTimeout(this.openTimer);\r\n        this.openTimer = setTimeout(function () {\r\n            self.openTimer = null;\r\n            self.open(target);\r\n        }, self.delay);\r\n    },\r\n    _leave: function (e) {\r\n\r\n        clearTimeout(this.openTimer);\r\n\r\n        this.close();\r\n    },\r\n    _toggle: function (e) {\r\n        if (this._getTip().css(\"display\") == 'none') {\r\n            this.enter(e);\r\n        } else {\r\n            this.leave(e);\r\n        }\r\n    },\r\n    /////////////////////////////////////////////////\r\n    open: function (target) {\r\n        var target = jQuery(target)[0] || this.target,\r\n                jq = jQuery(target),\r\n                content = this.getContent(target);\r\n\r\n        var e = { element: target, content: content, cancel: !content };\r\n        this.fire(\"beforeopen\", e);\r\n        if (e.cancel) return;\r\n\r\n        this.$element.show();\r\n\r\n        this._target = target;\r\n\r\n        try {\r\n            this.setContent(e.content);\r\n        } catch (ex) { }\r\n\r\n        this.fire(\"open\", { element: target });\r\n\r\n    },\r\n    close: function () {\r\n        this._target = null;\r\n        this.$element.hide();\r\n    },\r\n    showLoading: function () {\r\n        this.setContent('<div class=\"mini-tooltip-loading\"></div>');\r\n    },\r\n    setContent: function (value) {\r\n        this.$element.children(\".mini-tooltip-inner\").html(value || '&nbsp;');\r\n        this.applyPlacement();\r\n    },\r\n    getContent: function (element) {\r\n        var content = element.title;\r\n        if (content) {\r\n            jQuery(element).attr(\"data-tooltip\", content).attr(\"title\", \"\");\r\n        }\r\n        if (!content) {\r\n            content = jQuery(element).attr(\"data-tooltip\");\r\n        }\r\n        return content;\r\n    },\r\n    applyPlacement: function () {\r\n        if (!this._target) return;\r\n        if (this.$element.css(\"display\") == \"none\") return;\r\n        var target = this._target,\r\n            jq = jQuery(target),\r\n            placement = jq.attr(\"data-placement\") || this.placement,\r\n            tip = this.$element;\r\n\r\n        if (!target || !tip[0]) return;\r\n\r\n        tip.show().css({ left: \"-2000px\", top: \"-2000px\" });\r\n\r\n        function applyCls(placement) {\r\n\r\n            tip.removeClass(\"mini-tooltip-left mini-tooltip-top mini-tooltip-right mini-tooltip-bottom mini-tooltip-bottomleft mini-tooltip-topleft mini-tooltip-bottomright mini-tooltip-topright\")\r\n                .addClass('mini-tooltip-' + placement);\r\n        }\r\n        function applyPos(pos) {\r\n            tip.offset(pos);\r\n        }\r\n\r\n        //\r\n        var box = mini.getBox(target);\r\n        var vbox = mini.getViewportBox();\r\n        var topspace = box.top - vbox.top, bottomspace = vbox.bottom - box.bottom;\r\n\r\n        applyCls(placement);\r\n\r\n        var tipbox = mini.getBox(tip[0]);\r\n        var pos = mini.getCalculatedOffset(placement, box, tipbox.width, tipbox.height);\r\n\r\n\r\n        //边界处理\r\n        if (placement == \"left\") {\r\n        } else if (placement == \"right\") {\r\n        } else if (placement == \"top\") {\r\n        } else if (placement == \"bottom\") {\r\n\r\n        } else if (placement == \"bottomleft\" && topspace > bottomspace) {\r\n\r\n            if (pos.top + tipbox.height > vbox.bottom) {\r\n                placement = \"topleft\";\r\n            }\r\n        } else if (placement == \"topleft\") {\r\n\r\n        }\r\n\r\n        applyCls(placement);\r\n        pos = mini.getCalculatedOffset(placement, box, tipbox.width, tipbox.height);\r\n\r\n\r\n\r\n        if (placement == \"right\" || placement == \"left\") {\r\n\r\n            var arrow = jQuery(tip).children(\".mini-tooltip-arrow\");\r\n            arrow.css(\"top\", \"\");\r\n\r\n            function centerArrow() {\r\n                var top = box.top + box.height / 2 - arrow.height() / 2;\r\n\r\n                var y = top - pos.top;\r\n                arrow.css(\"top\", y);\r\n\r\n            }\r\n\r\n\r\n            var vbox = mini.getViewportBox();\r\n            if (pos.top < vbox.y) {\r\n                pos.top = vbox.y;\r\n                centerArrow();\r\n            } else if (pos.top + tipbox.height > vbox.bottom) {\r\n                pos.top = vbox.bottom - tipbox.height;\r\n                centerArrow();\r\n            }\r\n        }\r\n\r\n        applyPos(pos);\r\n    },\r\n\r\n    ///////////////////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.ToolTip.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs,\r\n            ['selector', 'placement', \"onbeforeopen\", \"onopen\", \"onclose\"\r\n             ]\r\n        );\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.ToolTip, \"tooltip\");\r\n\r\nmini.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {\r\n    if(placement == 'bottom') return { top: pos.top + pos.height, left: pos.left + pos.width / 2 - actualWidth / 2}; \r\n    if(placement == 'top') return  { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2};\r\n    if(placement == 'left') return { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth} ;\r\n    //if(placement == 'right') return {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width };\r\n    if (placement == 'bottomleft') return { top: pos.top + pos.height, left: pos.left };\r\n    if (placement == 'bottomright') return { top: pos.top + pos.height, left: pos.left + pos.width - actualWidth };\r\n    if (placement == 'topleft') return { top: pos.top - actualHeight, left: pos.left };\r\n    if (placement == 'topright') return { top: pos.top - actualHeight, left: pos.left + pos.width - actualWidth };\r\n\r\n    return { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width };\r\n}\r\n\r\n\nmini.ProgressBar = function () {\r\n    mini.ProgressBar.superclass.constructor.apply(this, arguments);\r\n    //mini.Button.superclass.constructor.apply(this, arguments);\r\n}\r\n\r\nmini.extend(mini.ProgressBar, mini.Control, {\r\n    formField: true,\r\n    uiCls: \"mini-progressbar\",\r\n\r\n    showText: false,\r\n    textAlign: \"center\",\r\n    text: \"\",\r\n    format: \"{0}%\",         //\"百分之{0}\"\r\n    value: 0,               //0~100\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var value = kv.value;\r\n        delete kv.value;\r\n\r\n        mini.ProgressBar.superclass.set.call(this, kv);\r\n\r\n        if (!mini.isNull(value)) {\r\n            this.setValue(value);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    _create: function () {\r\n\r\n        this.el = document.createElement(\"div\");\r\n        this.el.className = \"mini-progressbar\";\r\n\r\n        var s = '<div class=\"mini-progressbar-border\">'\r\n                    + '<div class=\"mini-progressbar-bar\"></div>'\r\n                    + '<div class=\"mini-progressbar-text\"></div>'\r\n                + '</div>';\r\n\r\n\r\n        this.el.innerHTML = s;\r\n        this._borderEl = this.el.firstChild;\r\n        this._barEl = this._borderEl.firstChild;\r\n        this._textEl = this._borderEl.lastChild;\r\n\r\n        //....\r\n    },\r\n\r\n    setText: function (value) {\r\n        this.text = value;\r\n        this._textEl.innerHTML = value;\r\n    },\r\n\r\n    setShowText: function (value) {\r\n        this.showText = value;\r\n        this._textEl.style.display = value ? \"\" : \"none\";\r\n    },\r\n\r\n    getShowText: function () {\r\n        return this.showText;\r\n    },\r\n\r\n    setTextAlign: function (value) {\r\n\r\n        this.textAlign = value\r\n        this._textEl.style.textAlign = value;\r\n    },\r\n\r\n    getTextAlign: function () {\r\n        return this.textAlign;\r\n    },\r\n\r\n    setValue: function (value) {\r\n        value = parseFloat(value);\r\n        if (isNaN(value)) value = 0;\r\n\r\n        if (value < 0) value = 0;\r\n        if (value > 100) value = 100;\r\n\r\n        this.value = value;\r\n\r\n        this._barEl.style.width = value + \"%\";\r\n\r\n        var text = String.format(this.format, value);\r\n        this.setText(text);\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.value;\r\n    },\r\n\r\n    getAttrs: function (el) {\r\n        var attrs = mini.ProgressBar.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"text\", \"format\", \"textAlign\"\r\n                ]\r\n        );\r\n\r\n        mini._ParseBool(el, attrs,\r\n            [\"showText\"]\r\n        );\r\n\r\n        return attrs;\r\n    }\r\n})\r\n\r\nmini.regClass(mini.ProgressBar, \"progressbar\");\r\n\n\r\nmini.Form = function (el) {\r\n    this.el = mini.byId(el);\r\n    if (!this.el) throw new Error(\"form element not null\");\r\n    \r\n    mini.Form.superclass.constructor.apply(this, arguments);\r\n\r\n}\r\nmini.extend(mini.Form, mini.Component, {\r\n    //_FORM: true,\r\n    el: null,\r\n\r\n    getFields: function () {\r\n        if (!this.el) return [];\r\n        var controls = mini.findControls(function (control) {\r\n            if (!control.el || control.formField != true) return false;\r\n            if (mini.isAncestor(this.el, control.el)) return true;\r\n            return false;\r\n        }, this);\r\n        return controls;\r\n    },\r\n    getFieldsMap: function () {\r\n        var fields = this.getFields();\r\n        var map = {};\r\n        for (var i = 0, l = fields.length; i < l; i++) {\r\n            var field = fields[i];\r\n            if (field.name) map[field.name] = field;\r\n        }\r\n        return map;\r\n    },\r\n    getField: function (name) {\r\n        if (!this.el) return null;\r\n        return mini.getbyName(name, this.el);\r\n    },\r\n\r\n    getData: function (formatted, deep) {\r\n        if (mini.isNull(deep)) deep = true;\r\n        var valueFn = formatted ? \"getFormValue\" : \"getValue\";\r\n        var controls = this.getFields();\r\n        var data = {};\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n            var fn = control[valueFn];\r\n            if (!fn) continue;\r\n            if (control.name) {\r\n                if (deep == true) {\r\n                    mini._setMap(control.name, fn.call(control), data);\r\n                } else {\r\n                    data[control.name] = fn.call(control);\r\n                }\r\n            }\r\n            if (control.textName && control.getText) {\r\n                if (deep == true) {\r\n                    mini._setMap(control.textName, control.getText(), data);\r\n                } else {\r\n                    data[control.textName] = control.getText();\r\n                }\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n    setData: function (options, all, deep) {\r\n        if (mini.isNull(deep)) deep = true;\r\n        if (typeof options != \"object\") options = {};\r\n        var map = this.getFieldsMap();\r\n        for (var name in map) {\r\n            var control = map[name];\r\n            if (!control) continue;\r\n            if (control.setValue) {\r\n                var v = options[name];\r\n                if (deep == true) {\r\n                    v = mini._getMap(name, options);\r\n                }\r\n                if (v === undefined && all === false) continue;\r\n                if (v === null) v = \"\";\r\n                control.setValue(v);\r\n            }\r\n            if (control.setText && control.textName) {\r\n                var text = options[control.textName];\r\n                if (deep == true) {\r\n                    text = mini._getMap(control.textName, options);\r\n                }\r\n                if (mini.isNull(text)) text = \"\";\r\n                control.setText(text);\r\n            }\r\n        }\r\n        //mini.repaint(document.body);\r\n    },\r\n    reset: function () {\r\n        var controls = this.getFields();\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n            if (!control.setValue) continue;\r\n            if (control.setText && control._clearText !== false) {\r\n                var text = control.defaultText;\r\n                if (mini.isNull(text)) text = \"\";\r\n                control.setText(text);\r\n            }\r\n            control.setValue(control.defaultValue);\r\n            if (control.clear) control.clear();\r\n        }\r\n        this.setIsValid(true);\r\n    },\r\n    clear: function () {\r\n        var controls = this.getFields();\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n            if (!control.setValue) continue;\r\n            if (control.setText && control._clearText !== false) {\r\n                control.setText(\"\");\r\n            }\r\n            control.setValue(\"\");\r\n            if (control.clear) control.clear();\r\n        }\r\n        this.setIsValid(true);\r\n    },\r\n    getValidateFields: function (disableValid) {\r\n        function isDisplay(control) {\r\n            return control.isDisplay(function (p) {\r\n                if (mini.hasClass(p, 'mini-tabs-body')) return true;\r\n            });\r\n        }\r\n\r\n        var fields = [];\r\n        var controls = this.getFields();\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n            if (!control.validate || !control.isDisplay) continue;\r\n            if (isDisplay(control) || control.forceValidate) { //\r\n\r\n                if (control.enabled || disableValid || control.forceValidate) {\r\n\r\n                    fields.push(control);\r\n                }\r\n            }\r\n        }\r\n        return fields;\r\n    },\r\n    validate: function (all, disableValid) {\r\n        var controls = this.getValidateFields(disableValid);\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n            var succ = control.validate();\r\n            if (succ == false && all === false) {\r\n                break;\r\n            }\r\n        }\r\n        return this.isValid();\r\n    },\r\n    isValid: function () {\r\n        var controls = this.getValidateFields();\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n            if (control.isValid() == false) return false;\r\n        }\r\n        return true;\r\n    },\r\n    setIsValid: function (isValid) {\r\n        var controls = this.getFields();\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n            if (!control.setIsValid) continue;\r\n            control.setIsValid(isValid);\r\n        }\r\n    },\r\n\r\n    getErrorTexts: function () {\r\n        var errorTexts = [];\r\n        var errors = this.getErrors();\r\n        for (var i = 0, l = errors.length; i < l; i++) {\r\n            var control = errors[i];\r\n            errorTexts.push(control.errorText);\r\n        }\r\n        return errorTexts;\r\n    },\r\n    getErrors: function () {\r\n        var errors = [];\r\n        var controls = this.getFields();\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n            if (!control.isValid) continue;\r\n            if (control.isValid() == false) {\r\n                errors.push(control);\r\n            }\r\n        }\r\n        return errors;\r\n    },\r\n    ///////////////////////////////////////////////////////////\r\n    mask: function (options) {\r\n        if (typeof options == \"string\") options = { html: options };\r\n        options = options || {};\r\n        options.el = this.el;\r\n        if (!options.cls) options.cls = this._maskCls;\r\n        mini.mask(options);\r\n    },\r\n    unmask: function () {\r\n        mini.unmask(this.el);\r\n    },\r\n    _maskCls: \"mini-mask-loading\",\r\n    loadingMsg: \"数据加载中，请稍后...\",\r\n    loading: function (msg) {\r\n        this.mask(msg || this.loadingMsg);\r\n    },\r\n    /////////////////////////////////////////////////////////\r\n    __OnValueChanged: function (e) {\r\n\r\n        this._changed = true;\r\n    },\r\n    _changed: false,\r\n    setChanged: function (value) {\r\n        this._changed = value;\r\n\r\n        var controls = this.getFields();\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n\r\n            control.on(\"valuechanged\", this.__OnValueChanged, this);\r\n        }\r\n    },\r\n    isChanged: function () {\r\n        return this._changed;\r\n    },\r\n    //////////////////////////////\r\n    setEnabled: function (value) {\r\n        var controls = this.getFields();\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n            control.setEnabled(value);\r\n        }\r\n    }\r\n\r\n});\r\n\n\r\nmini.Fit = function () {\r\n    mini.Fit.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.Fit, mini.Container, {\r\n\r\n    style: \"\",\r\n    _clearBorder: false,\r\n\r\n    uiCls: \"mini-fit\",\r\n    _create: function () {\r\n        this.el = document.createElement(\"div\");\r\n        this.el.className = \"mini-fit\";\r\n        this._bodyEl = this.el;\r\n    },\r\n    _initEvents: function () {\r\n\r\n    },\r\n    isFixedSize: function () {\r\n        return false;\r\n    },\r\n    doLayout: function () {\r\n        if (!this.canLayout()) return;\r\n\r\n        var parentNode = this.el.parentNode;\r\n        var childNodes = mini.getChildNodes(parentNode);\r\n        if (parentNode == document.body) {\r\n            this.el.style.height = \"0px\";\r\n        }\r\n        //        this.el.style.height = \"100px\";\r\n        //        this.el.style.overFlow = \"hidden\";\r\n        var height = mini.getHeight(parentNode, true);\r\n        //        var border = mini.getBorders(parentNode);\r\n        //        if (jQuery.boxModel) {\r\n        //            height = height - border.top - border.bottom;\r\n        //        }\r\n\r\n        //alert(height + \":\" + document.body.clientHeight);\r\n        \r\n        for (var i = 0, l = childNodes.length; i < l; i++) {\r\n            var node = childNodes[i];\r\n            var tagName = node.tagName ? node.tagName.toLowerCase() : \"\";\r\n            if (node == this.el || (tagName == \"style\" || tagName == \"script\" || node.type == \"hidden\")) continue;\r\n            var pos = mini.getStyle(node, \"position\");\r\n            if (pos == \"absolute\" || pos == \"fixed\") continue;\r\n\r\n            var h = mini.getHeight(node);\r\n\r\n            var margin = mini.getMargins(node);\r\n            height = height - h - margin.top - margin.bottom;\r\n        }\r\n\r\n        var border = mini.getBorders(this.el);\r\n        var padding = mini.getPaddings(this.el);\r\n        var margin = mini.getMargins(this.el);\r\n\r\n        height = height - margin.top - margin.bottom;\r\n        if (jQuery.boxModel) {\r\n            height = height - padding.top - padding.bottom - border.top - border.bottom;\r\n        }\r\n        if (height < 0) height = 0;\r\n\r\n        this.el.style.height = height + \"px\";\r\n\r\n        //layout children\r\n        try {\r\n            childNodes = mini.getChildNodes(this.el);\r\n            for (var i = 0, l = childNodes.length; i < l; i++) {\r\n                var node = childNodes[i];\r\n                mini.layout(node);\r\n            }\r\n        } catch (e) { }\r\n\r\n    },\r\n    set_bodyParent: function (value) {\r\n\r\n        if (!value) return;\r\n        //bodyParent\r\n        var el = this._bodyEl;\r\n\r\n        var p = value;\r\n        while (p.firstChild) {\r\n            try {\r\n                el.appendChild(p.firstChild);\r\n            } catch (e) { }\r\n        }\r\n        this.doLayout();\r\n    },\r\n\r\n    ///////////////////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Fit.superclass.getAttrs.call(this, el);\r\n\r\n        attrs._bodyParent = el;\r\n\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.Fit, \"fit\");\n\r\nmini.Panel = function () {\r\n    this._initButtons();\r\n    mini.Panel.superclass.constructor.apply(this, arguments);\r\n\r\n    if (this.url) this.setUrl(this.url);\r\n\r\n    this._contentEl = this._bodyEl;\r\n\r\n    this._doVisibleEls();\r\n\r\n    this._Resizer = new mini._Resizer(this);\r\n\r\n    this._doTools();\r\n}\r\nmini.extend(mini.Panel, mini.Container, {\r\n    width: 250,\r\n    title: \"\",\r\n    iconCls: \"\",\r\n    iconStyle: \"\",\r\n\r\n    allowResize: false,\r\n\r\n    url: \"\",\r\n\r\n    refreshOnExpand: false,\r\n    maskOnLoad: true,\r\n\r\n    collapseOnTitleClick: false,\r\n\r\n    showCollapseButton: false,\r\n    showCloseButton: false,\r\n    closeAction: \"display\", //\"destroy\"\r\n    showHeader: true,\r\n    showToolbar: false,\r\n    showFooter: false,\r\n\r\n    headerCls: \"\",\r\n    headerStyle: \"\",\r\n    bodyCls: \"\",\r\n    bodyStyle: \"\",\r\n    footerCls: \"\",\r\n    footerStyle: \"\",\r\n    toolbarCls: \"\",\r\n    toolbarStyle: \"\",\r\n\r\n    minWidth: 180,\r\n    minHeight: 100,\r\n    maxWidth: 5000,\r\n    maxHeight: 3000,\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var _allowLayout = this._allowLayout;\r\n        this._allowLayout = false;\r\n\r\n        var toolbar = kv.toolbar;\r\n        delete kv.toolbar;\r\n        var footer = kv.footer;\r\n        delete kv.footer;\r\n        var url = kv.url;\r\n        delete kv.url;\r\n\r\n        var buttons = kv.buttons;\r\n        delete kv.buttons;\r\n\r\n        mini.Panel.superclass.set.call(this, kv);\r\n\r\n        if (buttons) {\r\n            this.setButtons(buttons);\r\n        }\r\n        if (toolbar) {\r\n            this.setToolbar(toolbar);\r\n        }\r\n        if (footer) {\r\n            this.setFooter(footer);\r\n        }\r\n        if (url) {\r\n            this.setUrl(url);\r\n        }\r\n\r\n        this._allowLayout = _allowLayout;\r\n        this.doLayout();\r\n\r\n        return this;\r\n    },\r\n\r\n    uiCls: \"mini-panel\",\r\n    _create: function () {\r\n        this.el = document.createElement(\"div\");\r\n        this.el.className = \"mini-panel\";\r\n        this.el.tabIndex = 0;\r\n\r\n        var s = '<div class=\"mini-panel-border\">'\r\n            + '<div class=\"mini-panel-header\" ><div class=\"mini-panel-header-inner\" ><span class=\"mini-panel-icon mini-icon mini-iconfont\"></span><div class=\"mini-panel-title\" ></div><div class=\"mini-tools\" ></div></div></div>'\r\n            + '<div class=\"mini-panel-viewport\">'\r\n                + '<div class=\"mini-panel-toolbar\"></div>'\r\n                + '<div class=\"mini-panel-body\" ></div>'\r\n                + '<div class=\"mini-panel-footer\"></div>'\r\n                + '<div class=\"mini-resizer-trigger\"></div>'\r\n            + '</div>'\r\n            + '</div>';\r\n        this.el.innerHTML = s;\r\n        this.el.hideFocus = true;\r\n\r\n        this._borderEl = this.el.firstChild;\r\n        this._headerEl = this._borderEl.firstChild;\r\n        this._viewportEl = this._borderEl.lastChild;\r\n\r\n        this._toolbarEl = mini.byClass('mini-panel-toolbar', this.el);\r\n        this._bodyEl = mini.byClass('mini-panel-body', this.el);\r\n        this._footerEl = mini.byClass('mini-panel-footer', this.el);\r\n        this._resizeGridEl = mini.byClass('mini-resizer-trigger', this.el);\r\n\r\n        var hi = mini.byClass('mini-panel-header-inner', this.el);\r\n        this._iconEl = mini.byClass('mini-panel-icon', this.el);\r\n        this._titleEl = mini.byClass('mini-panel-title', this.el);\r\n        this._toolsEl = mini.byClass('mini-tools', this.el);\r\n\r\n        mini.setStyle(this._bodyEl, this.bodyStyle);\r\n\r\n\r\n        this._doTitle();\r\n    },\r\n    destroy: function (removeEl) {\r\n\r\n        this._doRemoveIFrame();\r\n        this._iframeEl = null;\r\n\r\n        //        mini.removeChilds(this._toolbarEl);\r\n        //        mini.removeChilds(this._bodyEl);\r\n        //        mini.removeChilds(this._footerEl); \r\n        this._viewportEl = this._borderEl = this._bodyEl = this._footerEl = this._toolbarEl = null;\r\n        this._toolsEl = this._titleEl = this._iconEl = this._resizeGridEl = null;\r\n        mini.Panel.superclass.destroy.call(this, removeEl);\r\n    },\r\n    _initEvents: function () {\r\n        mini._BindEvents(function () {\r\n            mini.on(this.el, \"click\", this.__OnClick, this);\r\n        }, this);\r\n    },\r\n\r\n    _doVisibleEls: function () {\r\n        this._headerEl.style.display = this.showHeader ? \"\" : \"none\";\r\n        this._toolbarEl.style.display = this.showToolbar ? \"\" : \"none\";\r\n        this._footerEl.style.display = this.showFooter ? \"\" : \"none\";\r\n    },\r\n    _setBodyWidth: true,\r\n    doLayout: function () {\r\n        if (!this.canLayout()) return;\r\n\r\n        var autoHeight = this.isAutoHeight();\r\n        var autoWidth = this.isAutoWidth();\r\n\r\n        var maxHeight = parseInt(jQuery(this.el).css(\"max-height\"));\r\n        //alert(maxHeight);\r\n\r\n        if (autoHeight && maxHeight) {\r\n\r\n            this._viewportEl.style.height = \"auto\";\r\n            this._bodyEl.style.height = \"auto\";\r\n            var height = this.el.firstChild.offsetHeight;\r\n            if (height > maxHeight) {\r\n                autoHeight = false;\r\n            }\r\n        }\r\n\r\n        this._autoHeight = autoHeight;\r\n\r\n        //debugger\r\n\r\n        //alert(mini_getStyle(this.el, 'min-height'));\r\n        //alert(mini.getAttr(this.el, 'min-height'));\r\n\r\n        //var w = mini.getWidth(this._viewportEl, true);\r\n\r\n        var w = this.getWidth(true);\r\n        var elWidth = w;\r\n        if (mini.isIE6) {\r\n            //mini.setWidth(this._bodyEl, w - 2);\r\n            mini.setWidth(this._bodyEl, w);\r\n        }\r\n        if (!autoHeight) {\r\n\r\n            var vh = this.getViewportHeight();\r\n\r\n            mini.setHeight(this._viewportEl, vh);\r\n\r\n            var bh = this.getBodyHeight(true);\r\n\r\n            mini.setHeight(this._bodyEl, bh);\r\n        } else {\r\n            this._viewportEl.style.height = \"auto\";\r\n            this._bodyEl.style.height = \"auto\";\r\n        }\r\n\r\n        mini.layout(this._borderEl);\r\n\r\n        if (this._resizeGridEl) {\r\n            mini.repaint(this._resizeGridEl);\r\n            //            var that = this;\r\n            //            var rd = this._resizeGridEl.style.display;\r\n            //            this._resizeGridEl.style.display = \"none\";\r\n            //            setTimeout(function(){\r\n            //            that._resizeGridEl.style.display = rd;\r\n            //            },1);\r\n        }\r\n\r\n        this._resizeGridEl.style.display = this.allowResize ? \"\" : \"none\";\r\n\r\n        this.fire(\"layout\");\r\n    },\r\n    deferLayout: function (time) {\r\n        if (!time) time = 10;\r\n        if (this._layoutTimer) return;\r\n        var me = this;\r\n        this._layoutTimer = setTimeout(function () {\r\n            me._layoutTimer = null;\r\n            me.doLayout();\r\n        }, time);\r\n    },\r\n    _stopLayout: function () {\r\n        clearTimeout(this._layoutTimer);\r\n        this._layoutTimer = null;\r\n    },\r\n    getViewportWidth: function (content) {\r\n        //return mini.getWidth(this._viewportEl, content);\r\n        return this.getWidth(true);\r\n    },\r\n    getViewportHeight: function (content) {\r\n        var h = this.getHeight(true) - this.getHeaderHeight();\r\n        \r\n        if (content) {\r\n            var padding2 = mini.getPaddings(this._viewportEl);\r\n            var border2 = mini.getBorders(this._viewportEl);\r\n            var margin2 = mini.getMargins(this._viewportEl);\r\n            if (jQuery.boxModel) {\r\n                h = h - padding2.top - padding2.bottom - border2.top - border2.bottom;\r\n            }\r\n            h = h - margin2.top - margin2.bottom;\r\n        }\r\n        return h;\r\n    },\r\n    getBodyHeight: function (content) {\r\n        var h = this.getViewportHeight(true);\r\n        h = h - this.getToolbarHeight() - this.getFooterHeight();\r\n        if (content) {\r\n            var padding = mini.getPaddings(this._bodyEl);\r\n            var border = mini.getBorders(this._bodyEl);\r\n            var margin = mini.getMargins(this._bodyEl);\r\n            if (jQuery.boxModel) {\r\n                h = h - padding.top - padding.bottom - border.top - border.bottom;\r\n            }\r\n            h = h - margin.top - margin.bottom;\r\n        }\r\n        //if (isIE9) h -= 1;\r\n        if (h < 0) h = 0;\r\n        return h;\r\n    },\r\n    getHeaderHeight: function () {\r\n        var h = this.showHeader ? jQuery(this._headerEl).outerHeight() : 0;\r\n        return h;\r\n    },\r\n    getToolbarHeight: function () {\r\n        var h = this.showToolbar ? jQuery(this._toolbarEl).outerHeight() : 0;\r\n        return h;\r\n    },\r\n    getFooterHeight: function () {\r\n        var h = this.showFooter ? jQuery(this._footerEl).outerHeight() : 0;\r\n        return h;\r\n    },\r\n\r\n    setHeaderStyle: function (value) {\r\n        this.headerStyle = value;\r\n        mini.setStyle(this._headerEl, value);\r\n        this.doLayout();\r\n    },\r\n    getHeaderStyle: function () {\r\n        return this.headerStyle;\r\n    },\r\n    setBodyStyle: function (value) {\r\n        this.bodyStyle = value;\r\n        mini.setStyle(this._bodyEl, value);\r\n        this.doLayout();\r\n    },\r\n    getBodyStyle: function () {\r\n        return this.bodyStyle;\r\n    },\r\n    setToolbarStyle: function (value) {\r\n        this.toolbarStyle = value;\r\n        mini.setStyle(this._toolbarEl, value);\r\n        this.doLayout();\r\n    },\r\n    getToolbarStyle: function () {\r\n        return this.toolbarStyle;\r\n    },\r\n    setFooterStyle: function (value) {\r\n        this.footerStyle = value;\r\n        mini.setStyle(this._footerEl, value);\r\n        this.doLayout();\r\n    },\r\n    getFooterStyle: function () {\r\n        return this.footerStyle;\r\n    },\r\n    setHeaderCls: function (cls) {\r\n        jQuery(this._headerEl).removeClass(this.headerCls);\r\n        jQuery(this._headerEl).addClass(cls);\r\n        this.headerCls = cls;\r\n        this.doLayout();\r\n    },\r\n    getHeaderCls: function () {\r\n        return this.headerCls;\r\n    },\r\n    setBodyCls: function (cls) {\r\n        jQuery(this._bodyEl).removeClass(this.bodyCls);\r\n        jQuery(this._bodyEl).addClass(cls);\r\n        this.bodyCls = cls;\r\n        this.doLayout();\r\n    },\r\n    getBodyCls: function () {\r\n        return this.bodyCls;\r\n    },\r\n    setToolbarCls: function (cls) {\r\n        jQuery(this._toolbarEl).removeClass(this.toolbarCls);\r\n        jQuery(this._toolbarEl).addClass(cls);\r\n        this.toolbarCls = cls;\r\n        this.doLayout();\r\n    },\r\n    getToolbarCls: function () {\r\n        return this.toolbarCls;\r\n    },\r\n    setFooterCls: function (cls) {\r\n        jQuery(this._footerEl).removeClass(this.footerCls);\r\n        jQuery(this._footerEl).addClass(cls);\r\n        this.footerCls = cls;\r\n        this.doLayout();\r\n    },\r\n    getFooterCls: function () {\r\n        return this.footerCls;\r\n    },\r\n\r\n    _doTitle: function () {\r\n        var title = this.title == \"\" ? \"&nbsp\" : this.title;\r\n        this._titleEl.innerHTML = title;\r\n\r\n        this._iconEl.style.display = (this.iconCls || this.iconStyle) ? \"inline\" : \"none\";\r\n        this._iconEl.className = \"mini-panel-icon mini-icon mini-iconfont \" + this.iconCls;\r\n\r\n        mini.setStyle(this._iconEl, this.iconStyle);\r\n\r\n    },\r\n    setTitle: function (value) {\r\n        this.title = value;\r\n        this._doTitle();\r\n    },\r\n    getTitle: function () {\r\n        return this.title;\r\n    },\r\n    setIconCls: function (value) {\r\n        this.iconCls = value;\r\n        this._doTitle();\r\n    },\r\n    getIconCls: function () {\r\n        return this.iconCls;\r\n    },\r\n    setIconStyle: function (value) {\r\n        this.iconStyle = value;\r\n        this._doTitle();\r\n    },\r\n    getIconStyle: function () {\r\n        return this.iconStyle;\r\n    },\r\n\r\n    //maxButtonCls: \"\",\r\n\r\n    _doTools: function () {\r\n        var s = \"\";\r\n        for (var i = 0, l = this.buttons.length; i < l; i++) {\r\n            var button = this.buttons[i];\r\n            if (button.html) {\r\n                s += button.html;\r\n            } else {\r\n                s += '<span id=\"' + i + '\" class=\"mini-icon mini-iconfont fa ' + button.cls + ' '\r\n                + (button.enabled ? \"\" : \"mini-disabled\") + '\" style=\"'\r\n                + button.style + ';' + (button.visible ? \"\" : \"display:none;\") + '\"></span>';\r\n            }\r\n        }\r\n        this._toolsEl.innerHTML = s;\r\n    },\r\n    setShowCloseButton: function (value) {\r\n        this.showCloseButton = value;\r\n        var button = this.getButton(\"close\");\r\n        if (!button) return;\r\n        button.visible = value;\r\n        this._doTools();\r\n    },\r\n    getShowCloseButton: function () {\r\n        return this.showCloseButton;\r\n    },\r\n    setCloseAction: function (value) {\r\n        this.closeAction = value;\r\n    },\r\n    getCloseAction: function () {\r\n        return this.closeAction;\r\n    },\r\n    setShowCollapseButton: function (value) {\r\n        this.showCollapseButton = value;\r\n        var button = this.getButton(\"collapse\");\r\n        if (!button) return;\r\n        button.visible = value;\r\n        this._doTools();\r\n    },\r\n    getShowCollapseButton: function () {\r\n        return this.showCollapseButton;\r\n    },\r\n    setShowHeader: function (value) {\r\n        this.showHeader = value;\r\n        this._doVisibleEls();\r\n        this.deferLayout();\r\n    },\r\n    getShowHeader: function () {\r\n        return this.showHeader;\r\n    },\r\n    setShowToolbar: function (value) {\r\n        this.showToolbar = value;\r\n        this._doVisibleEls();\r\n        this.deferLayout();\r\n    },\r\n    getShowToolbar: function () {\r\n        return this.showToolbar;\r\n    },\r\n    setShowFooter: function (value) {\r\n        this.showFooter = value;\r\n        this._doVisibleEls();\r\n        this.deferLayout();\r\n    },\r\n    getShowFooter: function () {\r\n        return this.showFooter;\r\n    },\r\n    ////////////////////////////////////////\r\n    __OnClick: function (e) {\r\n\r\n        if (mini.isAncestor(this._headerEl, e.target)) {\r\n            var toolsEl = mini.findParent(e.target, 'mini-tools');\r\n            if (toolsEl) {\r\n                var button = this.getButton(parseInt(e.target.id));\r\n                if (button) {\r\n                    this._OnButtonClick(button, e);\r\n                }\r\n            } else {\r\n                if (this.collapseOnTitleClick) {\r\n                    this.toggle();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _OnButtonClick: function (button, htmlEvent) {\r\n        var e = {\r\n            button: button,\r\n            index: this.buttons.indexOf(button),\r\n            name: button.name.toLowerCase(),\r\n            htmlEvent: htmlEvent,\r\n            cancel: false\r\n        };\r\n        this.fire(\"beforebuttonclick\", e);\r\n\r\n        var ret = true;\r\n        try {\r\n            if (e.name == \"close\" && this.closeAction == \"destroy\" && this._iframeEl && this._iframeEl.contentWindow) {\r\n\r\n                if (this._iframeEl.contentWindow.CloseWindow) {\r\n                    ret = this._iframeEl.contentWindow.CloseWindow(\"close\");\r\n                } else if (this._iframeEl.contentWindow.CloseOwnerWindow) {\r\n                    ret = this._iframeEl.contentWindow.CloseOwnerWindow(\"close\");\r\n                } else {\r\n                    //如果以上两行无法进入,说明弹出页面是跨域,自己调用\r\n                    ret = this._CloseOwnerWindow(\"close\");\r\n                }\r\n\r\n            }\r\n        } catch (ex) {\r\n            //如果有报错，也是跨域\r\n            ret = this._CloseOwnerWindow(\"close\");\r\n\r\n        }\r\n        if (ret === false) {\r\n            e.cancel = true;\r\n        }\r\n\r\n        if (e.cancel == true) return e;\r\n\r\n        this.fire(\"buttonclick\", e);\r\n\r\n        if (e.name == \"close\") {\r\n            if (this.closeAction == \"destroy\") {\r\n                this.__HideAction = \"close\";\r\n                this.destroy();\r\n            } else {\r\n                this.hide();\r\n            }\r\n        }\r\n        if (e.name == \"collapse\") {\r\n            this.toggle();\r\n            if (this.refreshOnExpand && this.expanded && this.url) {\r\n                this.reload();\r\n            }\r\n        }\r\n        return e;\r\n    },\r\n    onButtonClick: function (fn, scope) {\r\n        this.on(\"buttonclick\", fn, scope);\r\n    },\r\n\r\n    /*\r\n    buttons: close, max, min, restore, collapse, expand\r\n    */\r\n    _initButtons: function () {\r\n        this.buttons = [];\r\n\r\n        var collapse = this.createButton({ name: \"collapse\", cls: \"mini-tools-collapse\", visible: this.showCollapseButton });\r\n        this.buttons.push(collapse);\r\n\r\n        var close = this.createButton({ name: \"close\", cls: \"mini-tools-close\", visible: this.showCloseButton });\r\n        this.buttons.push(close);\r\n    },\r\n    createButton: function (options) {\r\n        var button = mini.copyTo({\r\n            name: \"\",\r\n            cls: \"\",\r\n            style: \"\",\r\n            visible: true,\r\n            enabled: true,\r\n            html: \"\"\r\n        }, options);\r\n        return button;\r\n    },\r\n    setButtons: function (value) {\r\n        if (typeof value == \"string\") {\r\n            value = value.split(\" \");\r\n        }\r\n        if (!mini.isArray(value)) value = [];\r\n        var btns = [];\r\n        for (var i = 0, l = value.length; i < l; i++) {\r\n            var btn = value[i];\r\n            if (typeof btn == \"string\") {\r\n                btn = btn.trim();\r\n                if (!btn) continue;\r\n                btn = { name: btn, cls: 'mini-tools-' + btn, html: '' };\r\n            }\r\n            btn = this.createButton(btn);\r\n            btns.push(btn);\r\n        }\r\n        this.buttons = btns;\r\n        this._doTools();\r\n    },\r\n    getButtons: function () {\r\n        return this.buttons;\r\n    },\r\n    addButton: function (button, index) {\r\n        if (typeof button == \"string\") {\r\n            button = { iconCls: button };\r\n        }\r\n        button = this.createButton(button);\r\n        if (typeof index != \"number\") index = this.buttons.length;\r\n        this.buttons.insert(index, button);\r\n        this._doTools();\r\n    },\r\n    updateButton: function (index, options) {\r\n        var button = this.getButton(index);\r\n        if (!button) return;\r\n        mini.copyTo(button, options);\r\n        this._doTools();\r\n    },\r\n    removeButton: function (index) {\r\n        var button = this.getButton(index);\r\n        if (!button) return;\r\n        this.buttons.remove(button);\r\n        this._doTools();\r\n    },\r\n    getButton: function (index) {\r\n        if (typeof index == \"number\") {\r\n            return this.buttons[index];\r\n        } else {\r\n            for (var i = 0, l = this.buttons.length; i < l; i++) {\r\n                var button = this.buttons[i];\r\n                if (button.name == index) return button;\r\n            }\r\n        }\r\n    },\r\n    setBody: function (value) {\r\n        __mini_setControls(value, this._bodyEl, this);\r\n    },\r\n    set_bodyParent: function (value) {\r\n\r\n    },\r\n    setToolbar: function (value) {\r\n        __mini_setControls(value, this._toolbarEl, this);\r\n    },\r\n    setFooter: function (value) {\r\n        __mini_setControls(value, this._footerEl, this);\r\n    },\r\n    getHeaderEl: function () {\r\n        return this._headerEl;\r\n    },\r\n    getToolbarEl: function () {\r\n        return this._toolbarEl;\r\n    },\r\n    getBodyEl: function () {\r\n        return this._bodyEl;\r\n    },\r\n    getFooterEl: function () {\r\n        return this._footerEl;\r\n    },\r\n    getIFrameEl: function (index) {\r\n        return this._iframeEl;\r\n    },\r\n\r\n    clearTimeStamp: false,\r\n    setClearTimeStamp: function (value) {\r\n        this.clearTimeStamp = value;\r\n    },\r\n    getClearTimeStamp: function () {\r\n        return this.clearTimeStamp;\r\n    },\r\n\r\n    ///////////////////////////////////////////////\r\n    _getMaskWrapEl: function () {\r\n        return this._bodyEl;\r\n    },\r\n    _doRemoveIFrame: function (removeAll) {\r\n\r\n        if (this._iframeEl) {\r\n            var iframe = this._iframeEl;\r\n            //setTimeout(function () {\r\n\r\n            if (iframe._ondestroy) iframe._ondestroy();\r\n\r\n            iframe.onload = function () { };\r\n            jQuery(iframe).unbind(\"load\");\r\n            iframe.src = \"\";\r\n\r\n            if (mini.isIE) {\r\n                try {\r\n                    iframe.contentWindow.document.write(\"\");\r\n                    iframe.contentWindow.document.close();\r\n                } catch (ex) { }\r\n            }\r\n\r\n            //}, 1);\r\n            try {\r\n                this._iframeEl.parentNode.removeChild(this._iframeEl);\r\n                this._iframeEl.removeNode(true);\r\n            } catch (ex) { }\r\n        }\r\n        this._iframeEl = null;\r\n        //        try {\r\n        //            CollectGarbage();\r\n        //        } catch (e) { }\r\n\r\n        //删除bodyEl内所有元素\r\n        if (removeAll === true) {\r\n            mini.removeChilds(this._bodyEl);\r\n        }\r\n    },\r\n    _deferLoadingTime: 80,\r\n    _doLoad: function () {\r\n\r\n        if (!this.url) return;\r\n        //if (this.isDisplay() == false) return;\r\n        this._doRemoveIFrame(true);\r\n\r\n        var st = new Date();\r\n        var sf = this;\r\n        this.loadedUrl = this.url;\r\n        if (this.maskOnLoad) this.loading();\r\n\r\n        jQuery(this._bodyEl).css(\"overflow\", \"hidden\");\r\n\r\n        function CloseOwnerWindow(action) {\r\n\r\n            sf.__HideAction = action;\r\n\r\n            //__onDestroy\r\n            var ret = true;\r\n            try {\r\n                if (sf.__onDestroy) ret = sf.__onDestroy(action);\r\n            } catch (ex) { \r\n                // eslint-disable-next-line\r\n                console.error(ex);\r\n            }\r\n            if (ret === false) {\r\n                return false;\r\n            }\r\n\r\n            var e = {\r\n                iframe: sf._iframeEl,\r\n                action: action\r\n            };\r\n\r\n            sf.fire(\"unload\", e);\r\n\r\n            setTimeout(function () {\r\n                sf.destroy();\r\n            }, 10);\r\n\r\n        }\r\n        sf._CloseOwnerWindow = CloseOwnerWindow;\r\n\r\n        var iframe = mini.createIFrame(this.url,\r\n            function (_iframe, firstLoad) {\r\n                if (sf.destroyed) return;\r\n\r\n                var t = (st - new Date()) + sf._deferLoadingTime;\r\n\r\n                if (t < 0) t = 0;\r\n                setTimeout(function () {\r\n                    sf.unmask();\r\n                }, t);\r\n\r\n                //window.close\r\n                try {\r\n\r\n\r\n                    sf._iframeEl.contentWindow.Owner = sf.Owner;\r\n                    sf._iframeEl.contentWindow.CloseOwnerWindow = CloseOwnerWindow;\r\n                } catch (e) { }\r\n\r\n                //firstLoad\r\n                //alert(1);\r\n                if (firstLoad || sf.loadOnRefresh) {\r\n                    if (sf.__onLoad) sf.__onLoad();\r\n\r\n                    var e = {\r\n                        iframe: sf._iframeEl\r\n                    };\r\n\r\n                    //mini.repaint(sf.el);\r\n                    sf.fire(\"load\", e);\r\n                }\r\n            },\r\n            this.clearTimeStamp\r\n        );\r\n        this._bodyEl.appendChild(iframe);\r\n        this._iframeEl = iframe;\r\n\r\n    },\r\n\r\n    load: function (url, onload, ondestroy) {\r\n        this.setUrl(url, onload, ondestroy);\r\n    },\r\n    reload: function () {\r\n        this.setUrl(this.url);\r\n    },\r\n    setUrl: function (value, onload, ondestroy) {\r\n        this.url = value;\r\n        this.__onLoad = onload;\r\n        this.__onDestroy = ondestroy;\r\n        if (this.expanded && value) {\r\n            this._doLoad();\r\n        }\r\n    },\r\n    getUrl: function () {\r\n        return this.url;\r\n    },\r\n    setRefreshOnExpand: function (value) {\r\n        this.refreshOnExpand = value;\r\n    },\r\n    getRefreshOnExpand: function () {\r\n        return this.refreshOnExpand;\r\n    },\r\n    setMaskOnLoad: function (value) {\r\n        this.maskOnLoad = value;\r\n    },\r\n    getMaskOnLoad: function (value) {\r\n        return this.maskOnLoad;\r\n    },\r\n    setAllowResize: function (value) {\r\n        if (this.allowResize != value) {\r\n            this.allowResize = value;\r\n            this.doLayout();\r\n        }\r\n    },\r\n    getAllowResize: function () {\r\n        return this.allowResize;\r\n    },\r\n    setLoadOnRefresh: function (value) {\r\n        this.loadOnRefresh = value;\r\n    },\r\n    getLoadOnRefresh: function (value) {\r\n        return this.loadOnRefresh;\r\n    },\r\n\r\n    /////////////////////////////////////////\r\n    expanded: true,\r\n    setExpanded: function (value) {\r\n        if (this.expanded != value) {\r\n            this.expanded = value;\r\n            if (this.expanded) {\r\n                this.expand();\r\n            } else {\r\n                this.collapse();\r\n            }\r\n        }\r\n    },\r\n    getExpanded: function () {\r\n        return this.expanded;\r\n    },\r\n    toggle: function () {\r\n        if (this.expanded) {\r\n            this.collapse();\r\n        } else {\r\n            this.expand();\r\n        }\r\n    },\r\n    collapse: function () {\r\n        this.expanded = false;\r\n\r\n        if (this.state != \"max\") {\r\n\r\n            this._height = this.el.style.height;\r\n        }\r\n        this.el.style.height = \"auto\";\r\n        this._viewportEl.style.display = \"none\";\r\n\r\n        mini.addClass(this.el, \"mini-panel-collapse\");\r\n        this.doLayout();\r\n    },\r\n\r\n    expand: function () {\r\n        this.expanded = true;\r\n\r\n        if (this._height) {\r\n            this.el.style.height = this._height;\r\n        }\r\n        this._viewportEl.style.display = \"block\";\r\n\r\n        if (this.state != \"max\") {\r\n            delete this._height;\r\n        }\r\n\r\n        mini.removeClass(this.el, \"mini-panel-collapse\");\r\n\r\n        //\r\n        this._expandLoad();\r\n\r\n        this.doLayout();\r\n    },\r\n\r\n    _expandLoad: function () {\r\n        if (this.url && this.url != this.loadedUrl) {\r\n            this._doLoad();\r\n        }\r\n    },\r\n\r\n    //    setVisible: function (value) {\r\n    //        mini.Panel.superclass.setVisible.call(this, value);\r\n    //        if (value) {\r\n    //            if (this.url && this.url != this.loadedUrl) {\r\n    //                this._doLoad();\r\n    //            }\r\n    //        }\r\n    //    },\r\n    setCollapseOnTitleClick: function (value) {\r\n        this.collapseOnTitleClick = value;\r\n        mini.removeClass(this.el, 'mini-panel-titleclick');\r\n        if (value) mini.addClass(this.el, 'mini-panel-titleclick');\r\n    },\r\n    getCollapseOnTitleClick: function () {\r\n        return this.collapseOnTitleClick;\r\n    },\r\n    ///////////////////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Panel.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"title\", \"iconCls\", \"iconStyle\", \"headerCls\", \"headerStyle\", \"bodyCls\", \"bodyStyle\",\r\n            \"footerCls\", \"footerStyle\", \"toolbarCls\", \"toolbarStyle\", \"footer\", \"toolbar\",\r\n            \"url\", \"closeAction\", \"loadingMsg\",\r\n            \"onbeforebuttonclick\", \"onbuttonclick\", \"onload\", \"buttons\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"allowResize\", \"showCloseButton\", \"showHeader\", \"showToolbar\", \"showFooter\", \"loadOnRefresh\",\r\n            \"showCollapseButton\", \"refreshOnExpand\", \"maskOnLoad\", \"expanded\", \"collapseOnTitleClick\", \"clearTimeStamp\"\r\n             ]\r\n        );\r\n\r\n        var cs = mini.getChildNodes(el, true);\r\n        for (var i = cs.length - 1; i >= 0; i--) {\r\n            var node = cs[i];\r\n            //var property = jQuery(node).attr(\"property\");\r\n            var property = mini.getAttr(node, \"property\");\r\n            if (!property) continue;\r\n            property = property.toLowerCase();\r\n            if (property == \"toolbar\") {\r\n                attrs.toolbar = node;\r\n            } else if (property == \"footer\") {\r\n                attrs.footer = node;\r\n            }\r\n        }\r\n        attrs.body = cs;\r\n\r\n        return attrs;\r\n    }\r\n\r\n\r\n});\r\nmini.regClass(mini.Panel, \"panel\");\r\n\r\n\r\n//mini._PanelResizer = function (panel) {\r\n//    this.owner = panel;\r\n//    mini.on(panel.el, \"mousedown\", this.__OnMouseDown, this);\r\n//}\r\n//mini._PanelResizer.prototype = {\r\n//    __OnMouseDown: function (e) {\r\n//        var panel = this.owner;\r\n//        \r\n//        if (mini.isAncestor(panel._resizeGridEl, e.target) && panel.allowResize) {\r\n//            var drag = this._getResizeDrag();\r\n//            drag.start(e);\r\n//        }\r\n//    },\r\n//    _getResizeDrag: function () {\r\n//        if (!this._resizeDragger) {\r\n//            this._resizeDragger = new mini.Drag({\r\n//                capture: true,\r\n//                onStart: mini.createDelegate(this._OnDragStart, this),\r\n//                onMove: mini.createDelegate(this._OnDragMove, this),\r\n//                onStop: mini.createDelegate(this._OnDragStop, this)\r\n//            });\r\n//        }\r\n//        return this._resizeDragger;\r\n//    },\r\n//    _OnDragStart: function (drag) {\r\n\r\n//        this.proxy = mini.append(document.body, '<div class=\"mini-resizer-proxy\"></div>');\r\n//        this.proxy.style.cursor = \"se-resize\";\r\n\r\n//        this.elBox = mini.getBox(this.el);\r\n//        mini.setBox(this.proxy, this.elBox);\r\n//    },\r\n//    _OnDragMove: function (drag) {\r\n//        var xOffset = drag.now[0] - drag.init[0];\r\n//        var yOffset = drag.now[1] - drag.init[1];\r\n\r\n//        var w = this.elBox.width + xOffset;\r\n//        var h = this.elBox.height + yOffset;\r\n//        if (w < this.minWidth) w = this.minWidth;\r\n//        if (h < this.minHeight) h = this.minHeight;\r\n//        if (w > this.maxWidth) w = this.maxWidth;\r\n//        if (h > this.maxHeight) h = this.maxHeight;\r\n\r\n//        mini.setSize(this.proxy, w, h);\r\n//    },\r\n//    _OnDragStop: function (drag) {\r\n//        var box = mini.getBox(this.proxy);\r\n\r\n//        jQuery(this.proxy).remove();\r\n//        this.proxy = null;\r\n//        this.elBox = null;\r\n\r\n//        this.setWidth(box.width);\r\n//        this.setHeight(box.height);\r\n\r\n//        delete this._width;\r\n//        delete this._height;\r\n\r\n//        //mini.repaint(this.el);\r\n//    }\r\n//}\n\r\nmini.Window = function () {\r\n    \r\n    mini.Window.superclass.constructor.apply(this, arguments);\r\n\r\n    this.addCls(\"mini-window\");\r\n    \r\n    this.setVisible(false);\r\n    this.setAllowDrag(this.allowDrag);\r\n    this.setAllowResize(this.allowResize);\r\n}\r\n\r\nmini.extend(mini.Window, mini.Panel, {\r\n    x: 0,\r\n    y: 0,\r\n    state: \"restore\", //restore, max\r\n\r\n    _dragCls: \"mini-window-drag\",\r\n    _resizeCls: \"mini-window-resize\",\r\n    allowDrag: true,\r\n    //allowResize: false,\r\n    showCloseButton: true,\r\n    showMaxButton: false,\r\n    showMinButton: false,\r\n    showCollapseButton: false,\r\n\r\n    showModal: true,\r\n\r\n    minWidth: 150,\r\n    minHeight: 80,\r\n    maxWidth: 2000,\r\n    maxHeight: 2000,\r\n\r\n    uiCls: \"mini-window\",\r\n\r\n    _create: function () {\r\n        mini.Window.superclass._create.call(this);\r\n\r\n        this.el.className += ' mini-corner-all';\r\n        this.el.firstChild.className += ' mini-corner-all';\r\n\r\n        if (mini.isIE && mini_useShims) {\r\n            var iframe = \"<iframe frameborder='0' style='position: absolute; z-index: -1; width: 100%; height: 100%; top: 0;left:0;scrolling:no;'></iframe>\";\r\n            mini.append(this.el, iframe);\r\n        }\r\n    },\r\n    _initButtons: function () {\r\n        this.buttons = [];\r\n\r\n\r\n        var collapse = this.createButton({ name: \"collapse\", cls: \"mini-tools-collapse\", visible: this.showCollapseButton });\r\n        this.buttons.push(collapse);\r\n\r\n        var min = this.createButton({ name: \"min\", cls: \"mini-tools-min\", visible: this.showMinButton });\r\n        this.buttons.push(min);\r\n\r\n        var max = this.createButton({ name: \"max\", cls: \"mini-tools-max\", visible: this.showMaxButton });\r\n        this.buttons.push(max);\r\n\r\n        var close = this.createButton({ name: \"close\", cls: \"mini-tools-close\", visible: this.showCloseButton });\r\n        this.buttons.push(close);\r\n\r\n    },\r\n    _initEvents: function () {\r\n        mini.Window.superclass._initEvents.call(this);\r\n\r\n        mini._BindEvents(function () {\r\n            //mini.on(document, \"mousedown\", this.__OnBodyMouseDown, this);\r\n            mini.on(this.el, \"mouseover\", this.__OnMouseOver, this);\r\n            mini.on(window, \"resize\", this.__OnWindowResize, this);\r\n\r\n            mini.on(this.el, \"mousedown\", this.__OnWindowMouseDown, this);\r\n        }, this);\r\n\r\n\r\n    },\r\n    doLayout: function () {\r\n        if (!this.canLayout()) return;\r\n        //        if (this.state == \"max\") {\r\n        //            this._doShow();\r\n        //        }\r\n\r\n        if (this.state == \"max\") {\r\n            var vbox = this.getParentBox();\r\n            this.el.style.left = \"0px\";\r\n            this.el.style.top = \"0px\";\r\n            mini.setSize(this.el, vbox.width, vbox.height);\r\n        }\r\n\r\n        mini.Window.superclass.doLayout.call(this);\r\n        //this._doShadow();\r\n\r\n        if (this.allowDrag) {\r\n            mini.addClass(this.el, this._dragCls);\r\n        }\r\n        if (this.state == \"max\") {\r\n            this._resizeGridEl.style.display = \"none\";\r\n            mini.removeClass(this.el, this._dragCls);\r\n        }\r\n\r\n        //modal\r\n        this._doModal();\r\n    },\r\n    _doModal: function () {\r\n\r\n        if (!this.el) {\r\n\r\n            if (this._modalEl) mini.removeNode(this._modalEl);\r\n            return;\r\n        }\r\n        var show = this.showModal && this.isDisplay() && this.visible;\r\n        if (!this._modalEl && this.showModal == false) {\r\n\r\n            if (this._modalEl) mini.removeNode(this._modalEl);\r\n            return;\r\n        }\r\n        //if (this.showModal && this.visible) show = true;\r\n        //this.el.style.display = \"none\";\r\n        if (!this._modalEl) {\r\n            var id = '__modal' + this._id;\r\n\r\n            var iframe = mini_useShims ? \"<iframe frameborder='0' style='position: absolute; z-index: -1; width: 100%; height: 100%; top: 0;left:0;scrolling:no;'></iframe>\" : \"\";\r\n            this._modalEl = mini.append(document.body, '<div id=\"' + id + '\" class=\"mini-modal mini-widget-content\" style=\"display:none\">' + iframe + '</div>');\r\n        }\r\n        //this._modalEl.style.display = \"none\";\r\n        //        this._modalEl.style.width = \"100px\";\r\n        //        this._modalEl.style.height = \"100px\";\r\n        //        function resizeModal() {\r\n        //            //mini.repaint(document.body);\r\n        //            var dd = document.documentElement;\r\n        //            var scrollWidth = parseInt(Math.max(document.body.scrollWidth, dd ? dd.scrollWidth : 0));\r\n        //            var scrollHeight = parseInt(Math.max(document.body.scrollHeight, dd ? dd.scrollHeight : 0));\r\n\r\n        //            var vbox = mini.getViewportBox();\r\n        //            var height = vbox.height;\r\n        //            if (height < scrollHeight) height = scrollHeight;\r\n\r\n        //            var width = vbox.width;\r\n        //            if (width < scrollWidth) width = scrollWidth;\r\n\r\n        //            this._modalEl.style.display = show ? \"block\" : \"none\";\r\n\r\n        //            this._modalEl.style.height = height + \"px\";\r\n        //            this._modalEl.style.width = width + \"px\"; //\"100%\";\r\n        //            this._modalEl.style.zIndex = mini.getStyle(this.el, 'zIndex') - 1;\r\n        //        }\r\n        if (show) {\r\n            this._modalEl.style.display = \"block\";\r\n            this._modalEl.style.zIndex = mini.getStyle(this.el, 'zIndex') - 1;\r\n            //            var me = this;\r\n\r\n            //            setTimeout(function () {\r\n            //                if (me._modalEl) {\r\n            //                    me._modalEl.style.display = \"none\";\r\n            //                    resizeModal.call(me);\r\n            //                }\r\n            //            }, 1);\r\n        } else {\r\n            this._modalEl.style.display = \"none\";\r\n        }\r\n    },\r\n    getParentBox: function () {\r\n        var vbox = mini.getViewportBox();\r\n        var containerEl = this._containerEl || document.body;\r\n        if (containerEl != document.body) {\r\n            vbox = mini.getBox(containerEl);\r\n        }\r\n        return vbox;\r\n    },\r\n    ////////////////////////////////////////////////////////\r\n    setShowModal: function (value) {\r\n\r\n        this.showModal = value;\r\n    },\r\n    getShowModal: function () {\r\n        return this.showModal;\r\n    },\r\n    setMinWidth: function (value) {\r\n        if (isNaN(value)) return;\r\n        this.minWidth = value;\r\n    },\r\n    getMinWidth: function () {\r\n        return this.minWidth;\r\n    },\r\n    setMinHeight: function (value) {\r\n        if (isNaN(value)) return;\r\n        this.minHeight = value;\r\n    },\r\n    getMinHeight: function () {\r\n        return this.minHeight;\r\n    },\r\n    setMaxWidth: function (value) {\r\n        if (isNaN(value)) return;\r\n        this.maxWidth = value;\r\n    },\r\n    getMaxWidth: function () {\r\n        return this.maxWidth;\r\n    },\r\n    setMaxHeight: function (value) {\r\n        if (isNaN(value)) return;\r\n        this.maxHeight = value;\r\n    },\r\n    getMaxHeight: function () {\r\n        return this.maxHeight;\r\n    },\r\n    setAllowDrag: function (value) {\r\n        this.allowDrag = value;\r\n        mini.removeClass(this.el, this._dragCls);\r\n        if (value) {\r\n            mini.addClass(this.el, this._dragCls);\r\n        }\r\n    },\r\n    getAllowDrag: function () {\r\n        return this.allowDrag;\r\n    },\r\n    //    setAllowResize: function (value) {\r\n    //        if (this.allowResize != value) {\r\n    //            this.allowResize = value;\r\n    //            this.doLayout();\r\n    //        }\r\n    //    },\r\n    //    getAllowResize: function () {\r\n    //        return this.allowResize;\r\n    //    },\r\n    setShowMaxButton: function (value) {\r\n        this.showMaxButton = value;\r\n        var button = this.getButton(\"max\");\r\n        if (!button) return;\r\n        button.visible = value;\r\n        this._doTools();\r\n    },\r\n    getShowMaxButton: function () {\r\n        return this.showMaxButton;\r\n    },\r\n    setShowMinButton: function (value) {\r\n        this.showMinButton = value;\r\n        var button = this.getButton(\"min\");\r\n        if (!button) return;\r\n        button.visible = value;\r\n        this._doTools();\r\n    },\r\n    getShowMinButton: function () {\r\n        return this.showMinButton;\r\n    },\r\n    ///////////////////////////////////////////////////\r\n    max: function () {\r\n        this.state = \"max\";\r\n\r\n        //        this.el.style.left = \"-10000px\";\r\n        //        this.el.style.top = \"-10000px\";\r\n\r\n        this.addCls(\"mini-window-max\");\r\n\r\n        this.show();\r\n\r\n        var button = this.getButton(\"max\");\r\n        if (button) {\r\n            button.cls = \"mini-tools-restore\";\r\n            this._doTools();\r\n        }\r\n    },\r\n    restore: function () {\r\n\r\n        this.removeCls(\"mini-window-max\");\r\n\r\n        this.state = \"restore\";\r\n        this.show(this.x, this.y);\r\n\r\n        var button = this.getButton(\"max\");\r\n        if (button) {\r\n            button.cls = \"mini-tools-max\";\r\n            this._doTools();\r\n        }\r\n\r\n    },\r\n    showInBody: true,\r\n    setShowInBody: function (value) {\r\n        this.showInBody = value;\r\n    },\r\n    getShowInBody: function () {\r\n        return this.showInBody;\r\n    },\r\n    containerEl: null,\r\n    showAtPos: function (x, y, options) {\r\n        this.show(x, y, options);\r\n    },\r\n    show: function (x, y, options) {\r\n        this._allowLayout = false;\r\n\r\n        var containerEl = this._containerEl || document.body;\r\n        if (!this.isRender() || (this.el.parentNode != containerEl && this.showInBody)) {\r\n            this.render(containerEl);\r\n        }\r\n\r\n        this.el.style.zIndex = mini.getMaxZIndex();\r\n\r\n        this._doShow(x, y);\r\n\r\n        this._allowLayout = true;\r\n        this.setVisible(true);\r\n\r\n        if (this.state != \"max\") {\r\n            var box = this.getBox();\r\n            this.x = box.x;\r\n            this.y = box.y;\r\n        }\r\n\r\n\r\n        //mini.repaint(this.el);\r\n\r\n        //this.focus();\r\n        try {\r\n            //this.el.focus();\r\n            document.body.focus();\r\n        } catch (e) { }\r\n    },\r\n    //    focus: function () {\r\n    //        debugger\r\n    //    },\r\n    hide: function () {\r\n        this.setVisible(false);\r\n        this._doModal();\r\n    },\r\n    getWidth: function (content) {\r\n        this._headerEl.style.width = \"50px\";\r\n        var width = mini.getWidth(this.el);\r\n        this._headerEl.style.width = \"auto\";\r\n\r\n        if (content && this._borderEl) {\r\n            var b2 = mini.getBorders(this._borderEl);\r\n            width = width - b2.left - b2.right;\r\n        }\r\n\r\n        return width;\r\n    },\r\n    getBox: function () {\r\n        this._headerEl.style.width = \"50px\";\r\n        this.el.style.display = \"\";\r\n        var width = mini.getWidth(this.el);\r\n        this._headerEl.style.width = \"auto\";\r\n        var box = mini.getBox(this.el);\r\n        box.width = width;\r\n        box.right = box.x + width;\r\n        return box;\r\n    },\r\n    _measureSize: function () {\r\n        this.el.style.display = \"\";\r\n        var box = this.getBox();\r\n        //min, max\r\n        if (box.width > this.maxWidth) {\r\n            mini.setWidth(this.el, this.maxWidth);\r\n            box = this.getBox();\r\n        }\r\n        if (this.expanded) {\r\n            if (box.height > this.maxHeight) {\r\n                mini.setHeight(this.el, this.maxHeight);\r\n                box = this.getBox();\r\n            }\r\n        }\r\n        if (box.width < this.minWidth) {\r\n            mini.setWidth(this.el, this.minWidth);\r\n            box = this.getBox();\r\n        }\r\n\r\n        if (this.expanded) {\r\n            if (box.height < this.minHeight) {\r\n                mini.setHeight(this.el, this.minHeight);\r\n                box = this.getBox();\r\n            }\r\n        }\r\n    },\r\n    _doShow: function (x, y) {\r\n        var vbox = this.getParentBox();\r\n\r\n        if (this.state == \"max\") {\r\n\r\n            if (!this._width) {\r\n                var box = this.getBox();\r\n\r\n                this._width = box.width;\r\n\r\n                if (this.expanded) {\r\n                    this._height = box.height;\r\n                }\r\n                this.x = box.x;\r\n                this.y = box.y;\r\n\r\n\r\n            }\r\n\r\n            this.el.style.left = \"-10000px\";\r\n            this.el.style.top = \"-10000px\";\r\n        } else {\r\n            if (mini.isNull(x)) x = \"center\";\r\n            if (mini.isNull(y)) y = \"middle\";\r\n\r\n            this.el.style.position = \"absolute\";\r\n            this.el.style.left = \"-2000px\";\r\n            this.el.style.top = \"-2000px\";\r\n            this.el.style.display = \"\";\r\n\r\n            if (this._width) {\r\n                this.setWidth(this._width);\r\n                this.setHeight(this._height);\r\n                delete this._width;\r\n                delete this._height;\r\n            } else {\r\n                //mini.setSize(this.el, this.width, this.height);\r\n            }\r\n            this._measureSize();\r\n\r\n            var box = this.getBox();\r\n\r\n            //x, y的获取        \r\n            if (x == \"left\") x = 0;\r\n            if (x == 'center') x = vbox.width / 2 - box.width / 2;\r\n            if (x == \"right\") x = vbox.width - box.width;\r\n\r\n            if (y == \"top\") y = 0;\r\n            if (y == \"middle\") y = vbox.y + vbox.height / 2 - box.height / 2;\r\n            if (y == \"bottom\") y = vbox.height - box.height;\r\n\r\n            if (x + box.width > vbox.right) x = vbox.right - box.width;\r\n            if (y + box.height > vbox.bottom) y = vbox.bottom - box.height;\r\n            if (x < 0) x = 0;\r\n            if (y < 0) y = 0;\r\n\r\n            this.el.style.display = \"\";\r\n            //document.title = x+\":\"+y;\r\n            mini.setX(this.el, x);\r\n\r\n            mini.setY(this.el, y);\r\n\r\n            //            this.el.style.left = x + \"px\";\r\n            //            this.el.style.top = y + \"px\";\r\n\r\n            //jQuery(this.el).fadeOut();\r\n            //jQuery(this.el).slideUp();\r\n            //jQuery(this.el).slideDown();\r\n\r\n\r\n\r\n            //alert(x);\r\n        }\r\n        this.doLayout();\r\n    },\r\n    ///////////////////////////////////////////////////\r\n    //    __OnClick: function (e) {\r\n    //        mini.Window.superclass.__OnClick.call(this, e);\r\n    //        if(this.el) this.el.style.zIndex = mini.getMaxZIndex();\r\n    //    },\r\n    _OnButtonClick: function (button, htmlEvent) {\r\n        var e = mini.Window.superclass._OnButtonClick.call(this, button, htmlEvent);\r\n        if (e.cancel == true) return e;\r\n\r\n        if (e.name == \"max\") {\r\n            if (this.state == \"max\") {\r\n                this.restore();\r\n            } else {\r\n                this.max();\r\n            }\r\n        }\r\n        return e;\r\n    },\r\n    __OnWindowResize: function (e) {\r\n        if (this.state == \"max\") {\r\n            this.doLayout();\r\n\r\n\r\n        }\r\n        if (!mini.isIE6) {\r\n            this._doModal();\r\n        }\r\n    },\r\n    enableDragProxy: true,\r\n    setEnableDragProxy: function (value) {\r\n        this.enableDragProxy = value;\r\n    },\r\n    getEnableDragProxy: function (value) {\r\n        return this.enableDragProxy;\r\n    },\r\n\r\n    allowCrossBottom: true,\r\n    setAllowCrossBottom: function (value) {\r\n        this.allowCrossBottom = value\r\n    },\r\n    getAllowCrossBottom: function () {\r\n        return this.allowCrossBottom;\r\n    },\r\n\r\n\r\n    xxx: 0,\r\n    __OnWindowMouseDown: function (e) {\r\n\r\n        var sf = this;\r\n\r\n        //drag\r\n        //if (e.button != mini.MouseButton.Left) return;\r\n\r\n        if (this.state != \"max\" && this.allowDrag && mini.isAncestor(this._headerEl, e.target) && !mini.findParent(e.target, \"mini-tools\")) {\r\n            var sf = this;\r\n            //this.focus();\r\n            if (this.el) {\r\n                this.el.style.zIndex = mini.getMaxZIndex();\r\n            }\r\n            var box = this.getBox();\r\n            var drag = new mini.Drag({\r\n                capture: false,\r\n                onStart: function () {\r\n                    sf._maskProxy = mini.append(document.body, '<div class=\"mini-resizer-mask\" style=\"\"></div>');\r\n\r\n                    if (sf.enableDragProxy) {\r\n                        sf._dragProxy = mini.append(document.body, '<div class=\"mini-drag-proxy\"></div>');\r\n                        //sf.el.style.display = \"none\";\r\n\r\n                        sf.el.style.left = \"-2000px\";\r\n                        sf.el.style.top = \"-2000px\";\r\n\r\n                        //                        var iframe = \"<iframe frameborder='0' style='position: absolute; z-index: -1; width: 0; height: 0; top: 0;left:0;scrolling:no;'></iframe>\";\r\n                        //                        mini.append(sf._dragProxy, iframe);\r\n\r\n                    } else {\r\n                        sf._dragProxy = sf.el;\r\n                    }\r\n                    //sf.el.style.cursor = \"move\";\r\n\r\n                    var mask = mini.append(document.body, '<div class=\"mini-resizer-mask\"></div>');\r\n                    setTimeout(function () {\r\n                        mini.removeNode(mask);\r\n                    }, 300);\r\n\r\n                },\r\n                onMove: function (drag) {\r\n                    //document.title = \"move\" + new Date().getTime();\r\n                    var x = drag.now[0] - drag.init[0], y = drag.now[1] - drag.init[1];\r\n\r\n                    x = box.x + x;\r\n                    y = box.y + y;\r\n                    //限制在浏览器范围内\r\n                    var vbox = sf.getParentBox();\r\n\r\n                    var right = x + box.width;\r\n                    var bottom = y + box.height;\r\n                    if (right > vbox.width) x = vbox.width - box.width;\r\n                    //if (bottom > vbox.bottom) y = vbox.bottom - box.height;\r\n\r\n                    if (!sf.allowCrossBottom) {\r\n                        if (bottom > vbox.height) y = vbox.height - box.height;\r\n                    }\r\n\r\n\r\n                    if (x < 0) x = 0;\r\n                    if (y < 0) y = 0;\r\n\r\n                    //mini.setXY(sf.el, x, y);\r\n                    //                    if (sf.shadowEl) {\r\n                    //                        mini.setXY(sf.shadowEl, x, y);\r\n                    //                    }\r\n                    sf.x = x;\r\n                    sf.y = y;\r\n\r\n                    //_dragProxy\r\n                    var dbox = { x: x, y: y, width: box.width, height: box.height };\r\n\r\n                    mini.setBox(sf._dragProxy, dbox);\r\n\r\n                    this.moved = true;\r\n                },\r\n                onStop: function () {\r\n\r\n                    //document.title = sf.xxx++;\r\n                    if (sf.el) {\r\n                        sf.el.style.display = \"block\";\r\n                        //if (!sf._dragProxy) return;\r\n                        if (this.moved) {\r\n                            var box = mini.getBox(sf._dragProxy);\r\n                            //if(box.width < 10) debugger\r\n                            //debugger\r\n                            mini.setBox(sf.el, box);\r\n                        }\r\n                    }\r\n\r\n                    jQuery(sf._maskProxy).remove();\r\n                    sf._maskProxy = null;\r\n\r\n                    if (sf.enableDragProxy) {\r\n                        jQuery(sf._dragProxy).remove();\r\n                    }\r\n                    sf._dragProxy = null;\r\n\r\n                    sf.fire(\"moveend\");\r\n                }\r\n            });\r\n            drag.start(e);\r\n\r\n\r\n        }\r\n    },\r\n    destroy: function (removeEl) {\r\n        //this._doModal();\r\n        //mini.un(document, \"mousedown\", this.__OnBodyMouseDown, this);\r\n        mini.un(window, \"resize\", this.__OnWindowResize, this);\r\n\r\n\r\n        if (this._modalEl) {\r\n            jQuery(this._modalEl).remove();\r\n            this._modalEl = null;\r\n        }\r\n        if (this.shadowEl) {\r\n            jQuery(this.shadowEl).remove();\r\n            this.shadowEl = null;\r\n        }\r\n\r\n        var id = '__modal' + this._id;\r\n        jQuery(\"[id='\" + id + \"']\").remove();\r\n\r\n        mini.Window.superclass.destroy.call(this, removeEl);\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Window.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"modalStyle\", \"onmoveend\"\r\n                ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"showModal\", \"showShadow\", \"allowDrag\", \"allowResize\",\r\n            \"showMaxButton\", \"showMinButton\", \"showInBody\", \"enableDragProxy\", \"allowCrossBottom\"\r\n                ]\r\n        );\r\n        mini._ParseInt(el, attrs,\r\n            [\"minWidth\", \"minHeight\", \"maxWidth\", \"maxHeight\"\r\n                ]\r\n        );\r\n\r\n        return attrs;\r\n    },\r\n    ////////////////////////////////////////////\r\n    showAtEl: function (atEl, options) {\r\n        atEl = mini.byId(atEl);\r\n        if (!atEl) return;\r\n        if (!this.isRender() || this.el.parentNode != document.body) {\r\n            this.render(document.body);\r\n        }\r\n\r\n        var c = {\r\n            xAlign: this.xAlign,\r\n            yAlign: this.yAlign,\r\n            xOffset: 0,\r\n            yOffset: 0,\r\n            popupCls: this.popupCls\r\n        };\r\n        mini.copyTo(c, options);\r\n\r\n        //        mini.addClass(atEl, c.popupCls);\r\n        //        atEl.popupCls = c.popupCls;\r\n        this._popupEl = atEl;\r\n\r\n        this.el.style.position = \"absolute\";\r\n        this.el.style.left = \"-2000px\";\r\n        this.el.style.top = \"-2000px\";\r\n        this.el.style.display = \"\";\r\n\r\n        this.doLayout();\r\n        this._measureSize();\r\n\r\n        var vbox = mini.getViewportBox();\r\n        var box = this.getBox();\r\n        var pbox = mini.getBox(atEl);\r\n        var xy = c.xy;\r\n        var h = c.xAlign, v = c.yAlign;\r\n\r\n        var x = vbox.width / 2 - box.width / 2, y = 0;\r\n        if (xy) {\r\n            x = xy[0];\r\n            y = xy[1];\r\n        }\r\n\r\n        switch (c.xAlign) {\r\n            case \"outleft\":\r\n                x = pbox.x - box.width;\r\n                break;\r\n            case \"left\":\r\n                x = pbox.x;\r\n                break;\r\n            case \"center\":\r\n                x = pbox.x + pbox.width / 2 - box.width / 2;\r\n                break;\r\n            case \"right\":\r\n                x = pbox.right - box.width;\r\n                break;\r\n            case \"outright\":\r\n                x = pbox.right;\r\n                break;\r\n            default:\r\n\r\n                break;\r\n        }\r\n\r\n        switch (c.yAlign) {\r\n            case \"above\":\r\n                y = pbox.y - box.height;\r\n                break;\r\n            case \"top\":\r\n                y = pbox.y;\r\n                break;\r\n            case \"middle\":\r\n                y = pbox.y + pbox.height / 2 - box.height / 2;\r\n                break;\r\n            case \"bottom\":\r\n                y = pbox.bottom - box.height;\r\n                break;\r\n            case \"below\":\r\n                y = pbox.bottom;\r\n                break;\r\n            default:\r\n\r\n                break;\r\n        }\r\n        x = parseInt(x);\r\n        y = parseInt(y);\r\n\r\n\r\n        if (c.outYAlign || c.outXAlign) {\r\n            if (c.outYAlign == \"above\") {\r\n                if (y + box.height > vbox.bottom) {\r\n                    var top = pbox.y - vbox.y;\r\n                    var bottom = vbox.bottom - pbox.bottom;\r\n                    if (top > bottom) {\r\n                        y = pbox.y - box.height;\r\n                    }\r\n                }\r\n\r\n            }\r\n            if (c.outXAlign == \"outleft\") {\r\n                if (x + box.width > vbox.right) {\r\n                    var left = pbox.x - vbox.x;\r\n                    var right = vbox.right - pbox.right;\r\n                    if (left > right) {\r\n                        x = pbox.x - box.width;\r\n                    }\r\n                }\r\n            }\r\n            if (c.outXAlign == \"right\") {\r\n                if (x + box.width > vbox.right) {\r\n                    x = pbox.right - box.width;\r\n                    //                    var right = vbox.right - pbox.right;\r\n                    //                    if (left > right) {\r\n                    //                        x = pbox.x - box.width;\r\n                    //                    }\r\n                }\r\n            }\r\n            this._Show(x, y);\r\n        } else {\r\n            this.showAtPos(x + c.xOffset, y + c.yOffset);\r\n        }\r\n    }\r\n});\r\n\r\nmini.regClass(mini.Window, \"window\");\r\n\r\n\r\n/* MessageBox\r\n-----------------------------------------------------------------------------*/\r\n\r\n//mini.on(document, \"keydown\", function (e) {\r\n//    // debugger\r\n//    if (e.keyCode == 27) {\r\n//        alert(\"enter\");\r\n//        //        if (callback) callback(\"close\");\r\n//        //        e.cancel = true;\r\n\r\n//        //        if (control && control._Buttons) {\r\n//        //            mini.MessageBox.hide(control);\r\n//        //        }\r\n//    }\r\n//});\r\n\r\nmini.MessageBox = {\r\n    //    INFO: 'mini-messagebox-info',\r\n    //    WARNING: 'mini-messagebox-warning',\r\n    //    QUESTION: 'mini-messagebox-question',\r\n    //    ERROR: 'mini-messagebox-error',\r\n    //    WAITING: 'mini-messagebox-waiting',\r\n\r\n    alertTitle: \"提醒\",\r\n    confirmTitle: \"确认\",\r\n    prompTitle: \"输入\",\r\n    prompMessage: \"请输入内容：\",\r\n    buttonText: {\r\n        ok: \"确定\", //\"OK\",\r\n        cancel: \"取消\", //\"Cancel\",\r\n        yes: \"是\", //\"Yes\",\r\n        no: \"否\"//\"No\"\r\n    },\r\n\r\n    autoFocus: true,\r\n\r\n    show: function (options) {\r\n\r\n        options = mini.copyTo({\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            showModal: true,\r\n\r\n            timeout: 0,\r\n\r\n            minWidth: 150,\r\n            maxWidth: 800,\r\n            minHeight: 50,\r\n            maxHeight: 350,\r\n\r\n            showHeader: true,\r\n            title: \"\",\r\n            titleIcon: \"\",\r\n            iconCls: \"\",\r\n            iconStyle: \"\",\r\n            message: \"\",\r\n            html: \"\",\r\n\r\n            spaceStyle: \"margin-right:15px\",\r\n\r\n            showCloseButton: true,\r\n            buttons: null,\r\n            buttonWidth: 58,\r\n            callback: null\r\n        }, options);\r\n\r\n        options.message = String(options.message);\r\n\r\n        var callback = options.callback;\r\n\r\n        var control = new mini.Window();\r\n\r\n        control.addCls(\"mini-messagebox\");\r\n\r\n        control.setBodyStyle(\"overflow:hidden\");\r\n        control.setShowModal(options.showModal);\r\n        control.setTitle(options.title || \"\");\r\n        control.setIconCls(options.titleIcon);\r\n        control.setShowHeader(options.showHeader);\r\n\r\n        control.setShowCloseButton(options.showCloseButton);\r\n\r\n        var id1 = control.uid + \"$table\", id2 = control.uid + \"$content\";\r\n\r\n        var icon = '<div class=\"' + options.iconCls + '\" style=\"' + options.iconStyle + '\"></div>';\r\n        var s = '<table class=\"mini-messagebox-table\" id=\"' + id1 + '\" style=\"\" cellspacing=\"0\" cellpadding=\"0\"><tr><td>'\r\n                + icon + '</td><td id=\"' + id2 + '\" class=\"mini-messagebox-content-text\">'\r\n                + (options.message || \"\") + '</td></tr></table>';\r\n\r\n        //var s = \"\";\r\n        //control.setShowHeader(false);\r\n\r\n        var ws = '<div class=\"mini-messagebox-content\"></div>'\r\n             + '<div class=\"mini-messagebox-buttons\"></div>';\r\n        control._bodyEl.innerHTML = ws;\r\n        var contentEl = control._bodyEl.firstChild;\r\n        if (options.html) {\r\n            if (typeof options.html == \"string\") {\r\n                contentEl.innerHTML = options.html;\r\n            } else if (mini.isElement(options.html)) {\r\n                contentEl.appendChild(options.html);\r\n            }\r\n        } else {\r\n            contentEl.innerHTML = s;\r\n        }\r\n\r\n        control._Buttons = [];\r\n\r\n        var buttonsEl = control._bodyEl.lastChild;\r\n        if (options.buttons && options.buttons.length > 0) {\r\n            for (var i = 0, l = options.buttons.length; i < l; i++) {\r\n                var button = options.buttons[i];\r\n                var text = mini.MessageBox.buttonText[button];\r\n                if (!text) text = button;\r\n\r\n                var btn = new mini.Button();\r\n                btn.setText(text);\r\n                btn.setWidth(options.buttonWidth);\r\n                btn.render(buttonsEl);\r\n                btn.action = button;\r\n                btn.on(\"click\", function (e) {\r\n                    var button = e.sender;\r\n                    if (callback) if (callback(button.action) === false) return;\r\n                    mini.MessageBox.hide(control);\r\n                });\r\n\r\n                if (i != l - 1) {\r\n                    btn.setStyle(options.spaceStyle);\r\n                }\r\n\r\n                control._Buttons.push(btn);\r\n            }\r\n        } else {\r\n            buttonsEl.style.display = \"none\";\r\n        }\r\n\r\n        control.setMinWidth(options.minWidth);\r\n        control.setMinHeight(options.minHeight);\r\n        control.setMaxWidth(options.maxWidth);\r\n        control.setMaxHeight(options.maxHeight);\r\n        control.setWidth(options.width);\r\n        control.setHeight(options.height);\r\n        control.show(options.x, options.y, { animType: options.animType });\r\n\r\n\r\n\r\n\r\n        var width = control.getWidth();\r\n        control.setWidth(width);\r\n        var height = control.getHeight();\r\n        control.setHeight(height);\r\n\r\n        var tb = document.getElementById(id1);\r\n        if (tb) {\r\n            tb.style.width = \"100%\";\r\n        }\r\n        var td = document.getElementById(id2);\r\n        if (td) {\r\n            td.style.width = \"100%\";\r\n        }\r\n        //}\r\n\r\n        if (mini.MessageBox.autoFocus) {\r\n            var firstButton = control._Buttons[0];\r\n            if (firstButton) {\r\n                //alert(1);\r\n                firstButton.focus();\r\n            } else {\r\n                //alert(2);\r\n                control.focus();\r\n            }\r\n        }\r\n\r\n        control.on(\"beforebuttonclick\", function (e) {\r\n            if (callback) callback(\"close\");\r\n            e.cancel = true;\r\n            mini.MessageBox.hide(control);\r\n        });\r\n\r\n        mini.on(control.el, \"keydown\", function (e) {\r\n            if (e.keyCode == 27) {\r\n                if (callback) callback(\"close\");\r\n                mini.MessageBox.hide(control);\r\n            }\r\n        });\r\n\r\n        //\r\n\r\n        if (options.timeout) {\r\n            setTimeout(function () {\r\n                mini.MessageBox.hide(control.uid);\r\n            }, options.timeout);\r\n        }\r\n\r\n        return control.uid;\r\n    },\r\n    hide: function (id) {\r\n        if (!id) return;\r\n        var control = typeof id == \"object\" ? id : mini.getbyUID(id);\r\n        if (!control) return;\r\n\r\n        //destroy buttons\r\n        for (var i = 0, l = control._Buttons.length; i < l; i++) {\r\n            var button = control._Buttons[i];\r\n            button.destroy();\r\n        }\r\n        control._Buttons = null;\r\n\r\n        control.destroy();\r\n    },\r\n    alert: function (message, title, callback) {\r\n        return mini.MessageBox.show({\r\n            minWidth: 250,\r\n            title: title || mini.MessageBox.alertTitle,\r\n            buttons: [\"ok\"],\r\n            message: message,\r\n            iconCls: \"mini-messagebox-warning\",\r\n            callback: callback\r\n        });\r\n    },\r\n    confirm: function (message, title, callback) {\r\n        return mini.MessageBox.show({\r\n            minWidth: 250,\r\n            title: title || mini.MessageBox.confirmTitle,\r\n            buttons: [\"ok\", \"cancel\"],\r\n            message: message,\r\n            iconCls: \"mini-messagebox-question\",\r\n            callback: callback\r\n        });\r\n    },\r\n    prompt: function (message, title, callback, multi, value) {\r\n        var id = \"prompt$\" + new Date().getTime();\r\n        var s = message || mini.MessageBox.promptMessage;\r\n\r\n\r\n\r\n        if (multi) {\r\n            s = s + '<br/><textarea id=\"' + id + '\" style=\"width:200px;height:60px;margin-top:3px;\"></textarea>';\r\n        } else {\r\n            s = s + '<br/><input id=\"' + id + '\" type=\"text\" style=\"width:200px;margin-top:3px;\"/>';\r\n        }\r\n        var uid = mini.MessageBox.show({\r\n            title: title || mini.MessageBox.promptTitle,\r\n            buttons: [\"ok\", \"cancel\"],\r\n            width: 250,\r\n            html: '<div style=\"padding:5px;padding-left:10px;\">' + s + '</div>',\r\n            callback: function (action) {\r\n                var input = document.getElementById(id);\r\n                if (callback) return callback(action, input.value);\r\n            }\r\n        });\r\n        var input = document.getElementById(id);\r\n        input.focus();\r\n\r\n        if (value == null) value = \"\";\r\n        input.value = value;\r\n\r\n        return uid;\r\n    },\r\n    loading: function (message, title) {\r\n        return mini.MessageBox.show({\r\n            minHeight: 50,\r\n            title: title,\r\n            showCloseButton: false,\r\n            message: message,\r\n            iconCls: \"mini-messagebox-waiting\"\r\n        });\r\n    },\r\n    showTips: function (options) {\r\n        var $ = jQuery;\r\n\r\n        options = jQuery.extend({\r\n            content: '',\r\n            state: '',\r\n            x: 'center',\r\n            y: 'top',\r\n            offset: [10, 10],\r\n            fixed: true,\r\n            timeout: 2000\r\n        }, options);\r\n\r\n        var cls = 'mini-tips-' + options.state;\r\n        var html = '<div class=\"mini-tips ' + cls + '\">' + options.content + '</div>';\r\n        var jq = jQuery(html).appendTo(document.body);\r\n\r\n        options.el = jq[0];\r\n        options.timeoutHandler = function () {\r\n            jq.slideUp();\r\n            setTimeout(function () {\r\n                jq.remove();\r\n            }, 2000);\r\n        }\r\n\r\n        mini.showAt(options);\r\n        jq.hide().slideDown();\r\n\r\n    }\r\n};\r\nmini.alert = mini.MessageBox.alert;\r\nmini.confirm = mini.MessageBox.confirm;\r\nmini.prompt = mini.MessageBox.prompt;\r\nmini.loading = mini.MessageBox.loading;\r\nmini.showMessageBox = mini.MessageBox.show;\r\nmini.hideMessageBox = mini.MessageBox.hide;\r\nmini.showTips = mini.MessageBox.showTips;\r\n\n\r\nmini.Tabs = function () {    \r\n    this._initTabs();\r\n    mini.Tabs.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.Tabs, mini.Control, {\r\n    activeIndex: -1,\r\n    tabAlign: \"left\",   //left/center/right/fit\r\n    tabPosition: \"top\", //top/right/bottom/left\r\n    showBody: true,\r\n    showHeader: true,\r\n\r\n    nameField: \"name\",\r\n    titleField: \"title\",\r\n    urlField: \"url\",\r\n\r\n    url: \"\",\r\n    maskOnLoad: true,\r\n\r\n    //showCloseOnHover: true,\r\n\r\n    plain: true,\r\n    //    tabHeaderCls: \"\",\r\n    //    tabHeaderStyle: \"\",\r\n    //    tabBodyCls: \"\",\r\n    //    tabBodyStyle: \"\",\r\n\r\n    bodyStyle: \"\",\r\n\r\n    _tabHoverCls: \"mini-tab-hover\",\r\n    _tabActiveCls: \"mini-tab-active\",\r\n\r\n    set: function (obj) {\r\n        if (typeof obj == 'string') {\r\n            return this;\r\n        }\r\n\r\n\r\n\r\n        var _allowLayout = this._allowLayout;\r\n        this._allowLayout = false;\r\n\r\n        var activeIndex = obj.activeIndex;\r\n        delete obj.activeIndex;\r\n\r\n        var url = obj.url;\r\n        delete obj.url;\r\n\r\n        mini.Tabs.superclass.set.call(this, obj);\r\n\r\n        if (url) {\r\n            this.setUrl(url);\r\n        }\r\n        if (mini.isNumber(activeIndex)) {\r\n            this.setActiveIndex(activeIndex);\r\n        }\r\n\r\n        this._allowLayout = _allowLayout;\r\n        this.doLayout();\r\n\r\n        return this;\r\n    },\r\n\r\n    uiCls: \"mini-tabs\",\r\n    _create: function () {\r\n        this.el = document.createElement(\"div\");\r\n        this.el.className = \"mini-tabs\";\r\n\r\n        var s = '<table class=\"mini-tabs-table\" cellspacing=\"0\" cellpadding=\"0\"><tr style=\"width:100%;\">'\r\n                    + '<td></td>'\r\n                    + '<td style=\"text-align:left;vertical-align:top;width:100%;\"><div class=\"mini-tabs-bodys\"></div></td>'\r\n                    + '<td></td>'\r\n                + '</tr></table>';\r\n        this.el.innerHTML = s;\r\n        this._tableEl = this.el.firstChild;\r\n\r\n        var tds = this.el.getElementsByTagName(\"td\");\r\n        this._td1El = tds[0];\r\n        this._td2El = tds[1];\r\n        this._td3El = tds[2];\r\n\r\n        this._bodyEl = this._td2El.firstChild;\r\n        this._borderEl = this._bodyEl;\r\n        this.doUpdate();\r\n    },\r\n    destroy: function (removeEl) {\r\n\r\n        if (this.tabs) {\r\n            for (var i = 0, l = this.tabs.length; i < l; i++) {\r\n                var tab = this.tabs[i];\r\n                //this._doRemoveIFrame(tab, true);\r\n                tab._iframeEl = null;\r\n            }\r\n        }\r\n\r\n        this._tableEl = this._td1El = this._td2El = this._td3El = null;\r\n        this._bodyEl = this._borderEl = this.headerEl = null;\r\n        this.tabs = null;\r\n        mini.Tabs.superclass.destroy.call(this, removeEl);\r\n    },\r\n    //    destroy: function (removeEl) {\r\n    //        if (this.tabs) {\r\n    //            for (var i = 0, l = this.tabs.length; i < l; i++) {\r\n    //                var tab = this.tabs[i];\r\n    //                this._doRemoveIFrame(tab, true);\r\n    //            }\r\n    //        }\r\n    //        this.tabs = null;\r\n    //        mini.Tabs.superclass.destroy.call(this, removeEl);\r\n    //    },\r\n    _doClearElement: function () {\r\n        mini.removeClass(this._td1El, \"mini-tabs-header\");\r\n        mini.removeClass(this._td3El, \"mini-tabs-header\");\r\n        this._td1El.innerHTML = '';\r\n        this._td3El.innerHTML = '';\r\n\r\n        mini.removeChilds(this._td2El, this._bodyEl);\r\n    },\r\n    _initEvents: function () {\r\n        mini._BindEvents(function () {\r\n            mini.on(this.el, \"mousedown\", this.__OnMouseDown, this);\r\n            mini.on(this.el, \"click\", this.__OnClick, this);\r\n            mini.on(this.el, \"mouseover\", this.__OnMouseOver, this);\r\n            mini.on(this.el, \"mouseout\", this.__OnMouseOut, this);\r\n            mini.on(this.el, \"dblclick\", this.__OnDblClick, this);\r\n        }, this);\r\n\r\n    },\r\n\r\n    _initTabs: function () {\r\n        this.tabs = [];\r\n    },\r\n    _TabID: 1,\r\n\r\n    createTab: function (options) {\r\n        var tab = mini.copyTo({\r\n            _id: this._TabID++,\r\n            name: \"\",\r\n            title: \"\",\r\n\r\n            newLine: false,\r\n\r\n            tooltip: \"\",\r\n\r\n            iconCls: \"\",\r\n            iconStyle: \"\",\r\n            headerCls: \"\",\r\n            headerStyle: \"\",\r\n            bodyCls: \"\",\r\n            bodyStyle: \"\",\r\n\r\n            visible: true,\r\n            enabled: true,\r\n            showCloseButton: false,\r\n            active: false,\r\n\r\n            url: \"\",\r\n            loaded: false,\r\n            refreshOnClick: false\r\n\r\n        }, options);\r\n        if (options) {\r\n            options = mini.copyTo(options, tab);\r\n            tab = options;\r\n        }\r\n        return tab;\r\n    },\r\n    /////////////////////////////////\r\n    _doLoad: function () {\r\n\r\n        var tabs = mini._getResult(this.url, null, null, null, null, this.dataField);\r\n\r\n        if (this.dataField && !mini.isArray(tabs)) {\r\n            tabs = mini._getMap(this.dataField, tabs);\r\n        }\r\n        if (!tabs) tabs = [];\r\n\r\n\r\n        this.setTabs(tabs);\r\n        this.fire(\"load\");\r\n    },\r\n\r\n    load: function (url) {\r\n        if (typeof url == \"string\") {\r\n            this.setUrl(url);\r\n        } else {\r\n            this.setTabs(url);\r\n        }\r\n    },\r\n    //    setShowCloseOnHover: function (value) {\r\n    //        this.showCloseOnHover = value;\r\n\r\n    //        if (this.showCloseOnHover) mini.addClass(this.el, \"mini-tabs-hoverclose\");\r\n    //        else mini.removeClass(this.el, \"mini-tabs-hoverclose\");\r\n\r\n    //    },\r\n    //    getShowCloseOnHover: function (value) {\r\n    //        return this.showCloseOnHover;\r\n    //    },\r\n    setUrl: function (value) {\r\n        this.url = value;\r\n\r\n        this._doLoad();\r\n    },\r\n    getUrl: function () {\r\n        return this.url;\r\n    },\r\n\r\n    setNameField: function (value) {\r\n        this.nameField = value;\r\n    },\r\n    getNameField: function () {\r\n        return this.nameField;\r\n    },\r\n    setTitleField: function (value) {\r\n        this.titleField = value;\r\n    },\r\n    getTitleField: function () {\r\n        return this.titleField;\r\n    },\r\n    setUrlField: function (value) {\r\n        this.urlField = value;\r\n    },\r\n    getUrlField: function () {\r\n        return this.urlField;\r\n    },\r\n\r\n    buttonsAlign: \"right\",\r\n    setButtonsAlign: function (value) {\r\n        this.buttonsAlign = value;\r\n    },\r\n    getButtonsAlign: function () {\r\n        return this.buttonsAlign;\r\n    },\r\n\r\n    setButtons: function (value) {\r\n        this._buttons = mini.byId(value);\r\n        if (this._buttons) {\r\n            var el = mini.byClass('mini-tabs-buttons', this.el);\r\n            if (el) {\r\n\r\n                el.appendChild(this._buttons);\r\n                mini.parse(el);\r\n                this.doLayout();\r\n            }\r\n        }\r\n    },\r\n    setTabControls: function (tab, value) {\r\n        var tab = this.getTab(tab);\r\n        if (!tab) return;\r\n        var el = this.getTabBodyEl(tab);\r\n        __mini_setControls(value, el, this);\r\n    },\r\n    setTabs: function (tabs) {\r\n        if (!mini.isArray(tabs)) return;\r\n        this.beginUpdate();\r\n\r\n        this.removeAll();\r\n\r\n        //转换\r\n        for (var i = 0, l = tabs.length; i < l; i++) {\r\n            var tab = tabs[i];\r\n            tab.title = mini._getMap(this.titleField, tab); //tab[this.titleField];\r\n            tab.url = mini._getMap(this.urlField, tab);     //tab[this.urlField];\r\n            tab.name = mini._getMap(this.nameField, tab);   //tab[this.nameField];\r\n        }\r\n\r\n        for (var i = 0, l = tabs.length; i < l; i++) {\r\n            this.addTab(tabs[i]);\r\n        }\r\n        this.setActiveIndex(0);\r\n        this.endUpdate();\r\n    },\r\n    getTabs: function () {\r\n        return this.tabs;\r\n    },\r\n    removeAll: function (butTabs) {\r\n        var activeTab = this.getActiveTab();\r\n        if (mini.isNull(butTabs)) butTabs = [];\r\n        if (!mini.isArray(butTabs)) {\r\n            butTabs = [butTabs];\r\n        }\r\n        for (var i = butTabs.length - 1; i >= 0; i--) {\r\n            var t = this.getTab(butTabs[i]);\r\n            if (!t) butTabs.removeAt(i);\r\n            else butTabs[i] = t;\r\n        }\r\n\r\n        var olds = this.tabs;\r\n        for (var i = olds.length - 1; i >= 0; i--) {\r\n            var tab = olds[i];\r\n            if (butTabs.indexOf(tab) == -1) {\r\n                this.removeTab(tab);\r\n            }\r\n        }\r\n        var butTab = butTabs[0];\r\n        if (activeTab != this.getActiveTab()) {\r\n            if (butTab) this.activeTab(butTab);\r\n        }\r\n    },\r\n    addTab: function (tab, index) {\r\n        if (typeof tab == \"string\") {\r\n            tab = { title: tab };\r\n        }\r\n        tab = this.createTab(tab);\r\n        if (!tab.name) tab.name = \"\";\r\n\r\n        //保持activeIndex序号正确\r\n        var activeTab = this.getActiveTab();\r\n\r\n        if (typeof index != \"number\") index = this.tabs.length;\r\n        this.tabs.insert(index, tab);\r\n\r\n        //保持activeIndex序号正确\r\n        if (activeTab) this.activeIndex = this.tabs.indexOf(activeTab);\r\n\r\n        //body\r\n        var bodyId = this._createTabBodyId(tab);\r\n        var s = '<div id=\"' + bodyId + '\" class=\"mini-tabs-body ' + tab.bodyCls + '\" style=\"' + tab.bodyStyle + ';display:none;\"></div>';\r\n        mini.append(this._bodyEl, s);\r\n\r\n        var el = this.getTabBodyEl(tab);\r\n\r\n        //body\r\n        var cs = tab.body;\r\n        delete tab.body;\r\n        if (cs) {\r\n\r\n            if (!mini.isArray(cs)) cs = [cs];\r\n            for (var i = 0, l = cs.length; i < l; i++) {\r\n                mini.append(el, cs[i]);\r\n            }\r\n        }\r\n\r\n        //bodyParent\r\n        if (tab.bodyParent) {\r\n            var p = tab.bodyParent;\r\n\r\n            while (p.firstChild) {\r\n                if (p.firstChild.nodeType == 8) {\r\n                    p.removeChild(p.firstChild);\r\n                } else {\r\n                    el.appendChild(p.firstChild);\r\n                }\r\n            }\r\n        }\r\n        delete tab.bodyParent;\r\n\r\n        //controls\r\n        if (tab.controls) {\r\n            this.setTabControls(tab, tab.controls);\r\n            delete tab.controls;\r\n        }\r\n\r\n        this.doUpdate();\r\n        return tab;\r\n    },\r\n    removeTab: function (tab) {\r\n\r\n        tab = this.getTab(tab);\r\n        if (!tab || this.tabs.indexOf(tab) == -1) return;\r\n        //alert(1);\r\n\r\n        var acTab = this.getActiveTab();\r\n\r\n        var isActive = tab == acTab;\r\n\r\n        var autoActive = this._OnTabDestroy(tab);\r\n\r\n        this.tabs.remove(tab);\r\n\r\n        //iframe\r\n        this._doRemoveIFrame(tab);\r\n\r\n        var el = this.getTabBodyEl(tab);\r\n        if (el) this._bodyEl.removeChild(el);\r\n        //mini.removeNode(el);\r\n\r\n        if (autoActive && isActive) {\r\n            for (var i = this.activeIndex; i >= 0; i--) {\r\n                var tab = this.getTab(i);\r\n                if (tab && tab.enabled && tab.visible) {\r\n                    this.activeIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n            this.doUpdate();\r\n            this.setActiveIndex(this.activeIndex);\r\n            this.fire(\"activechanged\");\r\n        } else {\r\n            this.activeIndex = this.tabs.indexOf(acTab);\r\n            this.doUpdate();\r\n        }\r\n        return tab;\r\n    },\r\n    moveTab: function (tab, index) {\r\n        tab = this.getTab(tab);\r\n        if (!tab) return;\r\n\r\n        var t = this.tabs[index];\r\n        if (t == tab) return;\r\n\r\n        this.tabs.remove(tab);\r\n        var index = this.tabs.indexOf(t);\r\n        if (index == -1) {\r\n            this.tabs.add(tab);\r\n        } else {\r\n            this.tabs.insert(index, tab);\r\n        }\r\n        this.doUpdate();\r\n    },\r\n    updateTab: function (tab, options) {\r\n        tab = this.getTab(tab);\r\n        if (!tab) return;\r\n        mini.copyTo(tab, options);\r\n\r\n        if (!tab.visible && this.tabs.indexOf(tab) == this.activeIndex) {\r\n            var activeIndex = -1;\r\n            for (var i = this.activeIndex + 1, l = this.tabs.length; i < l; i++) {\r\n                var item = this.tabs[i];\r\n                if (item.visible) {\r\n                    activeIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n            this.setActiveIndex(activeIndex)\r\n        }\r\n\r\n        this.doUpdate();\r\n    },\r\n    ////////////////////////////////////////////\r\n    _getMaskWrapEl: function () {\r\n        return this._bodyEl;\r\n    },\r\n    _doRemoveIFrame: function (tab, removeAll) {\r\n\r\n        //return;\r\n\r\n        if (tab._iframeEl && tab._iframeEl.parentNode) {\r\n            var iframe = tab._iframeEl;\r\n\r\n            iframe.onload = function () { };\r\n            jQuery(iframe).unbind(\"load\");\r\n\r\n            iframe.src = \"\";\r\n            if (mini.isIE) {\r\n                try {\r\n                    iframe.contentWindow.document.write(\"\");\r\n                    iframe.contentWindow.document.close();\r\n                } catch (ex) { }\r\n            }\r\n            if (tab._iframeEl._ondestroy) tab._iframeEl._ondestroy();\r\n\r\n            try {\r\n                iframe.parentNode.removeChild(iframe);\r\n                iframe.removeNode(true);\r\n            } catch (ex) { }\r\n        }\r\n\r\n        tab._iframeEl = null;\r\n        tab.loadedUrl = null;\r\n\r\n        //删除bodyEl内所有元素\r\n        if (removeAll === true) {\r\n            var bodyEl = this.getTabBodyEl(tab);\r\n            if (bodyEl) {\r\n                var cs = mini.getChildNodes(bodyEl, true);\r\n                for (var i = 0, l = cs.length; i < l; i++) {\r\n                    var d = cs[i];\r\n                    if (d && d.parentNode) d.parentNode.removeChild(d);\r\n                    //mini.removeNode(d);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _deferLoadingTime: 180,\r\n    _cancelLoadTabs: function (tab) {\r\n        //取消所有正在加载中的tab\r\n        var tabs = this.tabs;\r\n        for (var i = 0, l = tabs.length; i < l; i++) {\r\n            var t = tabs[i];\r\n            if (t != tab) {\r\n                if (t._loading && t._iframeEl) {\r\n                    t._loading = false;\r\n                    this._doRemoveIFrame(t, true);\r\n                }\r\n            }\r\n        }\r\n        if (tab && tab == this.getActiveTab() && tab._loading) {\r\n        } else {\r\n            this._loading = false;\r\n            this.unmask();\r\n        }\r\n    },\r\n    _doLoadTab: function (tab) {\r\n        if (!tab || tab != this.getActiveTab()) return;\r\n        var bodyEl = this.getTabBodyEl(tab);\r\n        if (!bodyEl) return;\r\n\r\n        this._cancelLoadTabs();\r\n\r\n        this._doRemoveIFrame(tab, true);\r\n\r\n        this._loading = true;\r\n        tab._loading = true;\r\n\r\n\r\n        this.unmask();\r\n        if (this.maskOnLoad) this.loading();\r\n        var st = new Date();\r\n\r\n        var sf = this;\r\n\r\n        //如果页面onload后，给300毫秒初始化时间，防止快速切换导致问题\r\n        sf.isLoading = true;\r\n        //        setTimeout(function () {\r\n        //            sf.isLoading = false;\r\n        //        }, 300);\r\n\r\n        var iframe = mini.createIFrame(tab.url,\r\n            function (_iframe, firstLoad) {\r\n                //window.close\r\n                try {\r\n                    tab._iframeEl.contentWindow.Owner = window;\r\n                    tab._iframeEl.contentWindow.CloseOwnerWindow = function (action) {\r\n\r\n                        tab.removeAction = action;\r\n                        //tab.ondestroy\r\n                        var ret = true;\r\n                        if (tab.ondestroy) {\r\n                            if (typeof tab.ondestroy == \"string\") {\r\n                                tab.ondestroy = window[tab.ondestroy];\r\n                            }\r\n                            if (tab.ondestroy) {\r\n                                var e = sf._getTabEvent(tab);\r\n                                e.action = action;\r\n                                ret = tab.ondestroy.call(sf, e);\r\n                            }\r\n                        }\r\n\r\n                        if (ret === false) {\r\n                            return false;\r\n                        }\r\n\r\n                        setTimeout(function () {\r\n                            sf.removeTab(tab);\r\n                        }, 10);\r\n                    }\r\n                } catch (e) { }\r\n\r\n                if (tab._loading != true) return;\r\n                var t = (st - new Date()) + sf._deferLoadingTime;\r\n\r\n                tab._loading = false;\r\n                tab.loadedUrl = tab.url;\r\n\r\n                if (t < 0) t = 0;\r\n                setTimeout(function () {\r\n                    sf.unmask();\r\n                    sf.doLayout();\r\n                    sf.isLoading = false;\r\n                }, t);\r\n\r\n                //firstLoad\r\n                if (firstLoad) {\r\n                    var e = {\r\n                        sender: sf,\r\n                        tab: tab,\r\n                        index: sf.tabs.indexOf(tab),\r\n                        name: tab.name,\r\n                        iframe: tab._iframeEl\r\n                    };\r\n                    if (tab.onload) {\r\n                        if (typeof tab.onload == \"string\") {\r\n                            tab.onload = window[tab.onload];\r\n                        }\r\n                        if (tab.onload) {\r\n                            tab.onload.call(sf, e);\r\n                        }\r\n                    }\r\n                }\r\n                if (sf.getActiveTab() == tab) {\r\n                    sf.fire(\"tabload\", e);\r\n                }\r\n            },\r\n            this.clearTimeStamp, tab.method, tab.params\r\n        );\r\n        setTimeout(function () {\r\n            if (tab._iframeEl == iframe) {\r\n                bodyEl.appendChild(iframe);\r\n            }\r\n            //iframe.src = tab.url;\r\n        }, 1);\r\n        tab._iframeEl = iframe;\r\n    },\r\n    _getTabEvent: function (tab) {\r\n        var e = {\r\n            sender: this,\r\n            tab: tab,\r\n            index: this.tabs.indexOf(tab),\r\n            name: tab.name,\r\n            iframe: tab._iframeEl,\r\n            autoActive: true\r\n        };\r\n        return e;\r\n    },\r\n    _OnTabDestroy: function (tab) {\r\n        //        var e = {\r\n        //            sender: this,\r\n        //            tab: tab,\r\n        //            index: this.tabs.indexOf(tab),\r\n        //            name: tab.name,\r\n        //            iframe: tab._iframeEl,\r\n        //            autoActive: true\r\n        //        };\r\n        var e = this._getTabEvent(tab);\r\n        this.fire(\"tabdestroy\", e);\r\n        return e.autoActive;\r\n    },\r\n    //loadTab({...});\r\n    loadTab: function (url, tab, onload, ondestroy) {\r\n        if (!url) return;\r\n        tab = this.getTab(tab);\r\n        if (!tab) tab = this.getActiveTab();\r\n        if (!tab) return;\r\n\r\n        var el = this.getTabBodyEl(tab);\r\n        if (el) {\r\n            mini.addClass(el, 'mini-tabs-hideOverflow');\r\n        }\r\n\r\n        tab.url = url;\r\n        delete tab.loadedUrl;\r\n\r\n        if (onload) tab.onload = onload;\r\n        if (ondestroy) tab.ondestroy = ondestroy;\r\n\r\n        var me = this;\r\n        clearTimeout(this._loadTabTimer);\r\n        this._loadTabTimer = null;\r\n        this._loadTabTimer = setTimeout(function () {\r\n            me._doLoadTab(tab);\r\n        }, 1);\r\n    },\r\n    reloadTab: function (tab) {\r\n        tab = this.getTab(tab);\r\n        if (!tab) tab = this.getActiveTab();\r\n        if (!tab) return;\r\n        this.loadTab(tab.url, tab);\r\n    },\r\n    ///////////////////////////////////////////\r\n    getTabRows: function () {\r\n        var rows = [];\r\n        var row = [];\r\n        for (var i = 0, l = this.tabs.length; i < l; i++) {\r\n            var tab = this.tabs[i];\r\n            if (i != 0 && tab.newLine) {\r\n                rows.push(row);\r\n                row = [];\r\n            }\r\n            row.push(tab);\r\n        }\r\n        rows.push(row);\r\n        return rows;\r\n    },\r\n    doUpdate: function () {\r\n\r\n        if (this._allowUpdate === false) return;\r\n\r\n        if (this._buttons && this._buttons.parentNode) {\r\n            this._buttons.parentNode.removeChild(this._buttons);\r\n        }\r\n\r\n\r\n\r\n        mini.removeClass(this.el, \"mini-tabs-position-left\");\r\n        mini.removeClass(this.el, \"mini-tabs-position-top\");\r\n        mini.removeClass(this.el, \"mini-tabs-position-right\");\r\n        mini.removeClass(this.el, \"mini-tabs-position-bottom\");\r\n\r\n        if (this.tabPosition == \"bottom\") {\r\n            mini.addClass(this.el, \"mini-tabs-position-bottom\");\r\n            this._doUpdateBottom();\r\n        } else if (this.tabPosition == \"right\") {\r\n            mini.addClass(this.el, \"mini-tabs-position-right\");\r\n            this._doUpdateRight();\r\n        } else if (this.tabPosition == \"left\") {\r\n            mini.addClass(this.el, \"mini-tabs-position-left\");\r\n            this._doUpdateLeft();\r\n        } else {\r\n            mini.addClass(this.el, \"mini-tabs-position-top\");\r\n            this._doUpdateTop();\r\n        }\r\n\r\n        //header\r\n        var el = this._headerEl, cls = \"mini-tabs-header-\";\r\n        mini.removeClass(el, cls + \"left\");\r\n        mini.removeClass(el, cls + \"top\");\r\n        mini.removeClass(el, cls + \"right\");\r\n        mini.removeClass(el, cls + \"bottom\");\r\n        mini.addClass(el, cls + this.tabPosition);\r\n\r\n        //body\r\n\r\n        var el = this._bodyEl, cls = \"mini-tabs-body-\";\r\n        mini.removeClass(el, cls + \"left\");\r\n        mini.removeClass(el, cls + \"top\");\r\n        mini.removeClass(el, cls + \"right\");\r\n        mini.removeClass(el, cls + \"bottom\");\r\n        mini.addClass(el, cls + this.tabPosition);\r\n\r\n        //buttons\r\n        if (this._buttons) {\r\n            var el = mini.byClass('mini-tabs-buttons', this.el);\r\n            if (el) {\r\n                el.appendChild(this._buttons);\r\n                mini.parse(el);\r\n            }\r\n        }\r\n\r\n        this.doLayout();\r\n\r\n        this.setActiveIndex(this.activeIndex, false);\r\n    },\r\n    _handleIFrameOverflow: function () {\r\n\r\n        var bodyEl = this.getTabBodyEl(this.activeIndex);\r\n        if (bodyEl) {\r\n            mini.removeClass(bodyEl, 'mini-tabs-hideOverflow');\r\n            var dom = mini.getChildNodes(bodyEl)[0];\r\n\r\n            if (dom && dom.tagName && dom.tagName.toUpperCase() == \"IFRAME\") {\r\n                mini.addClass(bodyEl, 'mini-tabs-hideOverflow');\r\n            }\r\n\r\n        }\r\n    },\r\n    doLayout: function () {\r\n\r\n        var me = this,\r\n            headerEl = me._headerEl,\r\n            bodyEl = me._bodyEl,\r\n            tabPosition = me.tabPosition;\r\n\r\n\r\n        if (!this.canLayout()) return;\r\n\r\n        headerEl.style.display = this.showHeader ? \"\" : \"none\";\r\n\r\n        this._handleIFrameOverflow();\r\n\r\n\r\n        var autoHeight = this.isAutoHeight();\r\n\r\n        //headerEl.style.display = \"none\";\r\n\r\n        h = this.getHeight(true);\r\n        w = this.getWidth();\r\n        var elHeight = h;\r\n        var elWidth = w;\r\n        //        headerEl.style.display = \"\";\r\n        if (this.showBody) {\r\n            bodyEl.style.display = \"\";\r\n        } else {\r\n            bodyEl.style.display = \"none\";\r\n        }\r\n\r\n        var plainEl = this.el.firstChild;\r\n        if (this.plain) {\r\n            mini.addClass(plainEl, \"mini-tabs-plain\");\r\n        } else {\r\n            mini.removeClass(plainEl, \"mini-tabs-plain\");\r\n        }\r\n\r\n\r\n        if (!autoHeight && this.showBody) {\r\n\r\n            var headerHeight = jQuery(headerEl).outerHeight();\r\n            var headerWidth = jQuery(headerEl).outerWidth();\r\n            if (tabPosition == \"top\" || tabPosition == \"bottom\") {\r\n                headerHeight = jQuery(headerEl.parentNode).outerHeight();\r\n                //alert(headerHeight);\r\n\r\n                headerHeight -= 1;\r\n            }\r\n\r\n            if (tabPosition == \"left\" || tabPosition == \"right\") {\r\n                w = w - headerWidth;\r\n            } else {\r\n                h = h - headerHeight;\r\n            }\r\n\r\n            //alert(jQuery.boxModel);\r\n            if (jQuery.boxModel) {\r\n                var padding = mini.getPaddings(bodyEl);\r\n                var border = mini.getBorders(bodyEl);\r\n\r\n                h = h - padding.top - padding.bottom - border.top - border.bottom;\r\n                w = w - padding.left - padding.right - border.left - border.right;\r\n            }\r\n            margin = mini.getMargins(bodyEl);\r\n\r\n            h = h - margin.top - margin.bottom;\r\n            w = w - margin.left - margin.right;\r\n\r\n\r\n\r\n            if (h < 0) h = 0;\r\n            if (w < 0) w = 0;\r\n\r\n            bodyEl.style.width = w + \"px\";\r\n            bodyEl.style.height = h + \"px\";\r\n\r\n            //调整header\r\n            if (tabPosition == \"left\" || tabPosition == \"right\") {\r\n\r\n                //                var tds = headerEl.firstChild.rows[0].cells;\r\n                //                var trs = tds[0].firstChild.rows;\r\n\r\n                var tr = headerEl.getElementsByTagName(\"tr\")[0];\r\n                var tds = tr.childNodes;\r\n                var trs = tds[0].getElementsByTagName(\"tr\");\r\n\r\n                var first = last = all = 0;\r\n                for (var i = 0, l = trs.length; i < l; i++) {\r\n                    var tr = trs[i];\r\n                    var trH = jQuery(tr).outerHeight();\r\n                    all += trH;\r\n                    if (i == 0) first = trH;\r\n                    if (i == l - 1) last = trH;\r\n                }\r\n\r\n                switch (this.tabAlign) {\r\n                    case \"center\":\r\n                        var halfH = parseInt((elHeight - (all - first - last)) / 2);\r\n                        for (var i = 0, l = tds.length; i < l; i++) {\r\n                            tds[i].firstChild.style.height = elHeight + \"px\";\r\n                            var tb = tds[i].firstChild;\r\n                            var trs = tb.getElementsByTagName(\"tr\");\r\n                            var tr1 = trs[0], tr2 = trs[trs.length - 1];\r\n                            tr1.style.height = halfH + \"px\";\r\n                            tr2.style.height = halfH + \"px\";\r\n                        }\r\n                        break;\r\n                    case \"right\":\r\n                        for (var i = 0, l = tds.length; i < l; i++) {\r\n                            var tb = tds[i].firstChild;\r\n                            var trs = tb.getElementsByTagName(\"tr\");\r\n                            var tr = trs[0];\r\n\r\n                            var size = elHeight - (all - first);\r\n                            if (size >= 0) {\r\n                                tr.style.height = size + \"px\";\r\n                            }\r\n                        }\r\n                        break;\r\n                    case \"fit\":\r\n                        for (var i = 0, l = tds.length; i < l; i++) {\r\n                            tds[i].firstChild.style.height = elHeight + \"px\"; ;\r\n                        }\r\n                        break;\r\n                    default:\r\n                        for (var i = 0, l = tds.length; i < l; i++) {\r\n                            var tb = tds[i].firstChild;\r\n                            var trs = tb.getElementsByTagName(\"tr\");\r\n                            var tr = trs[trs.length - 1];\r\n                            var size = elHeight - (all - last);\r\n                            if (size >= 0) {\r\n                                tr.style.height = size + \"px\";\r\n                            }\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n        } else {\r\n            bodyEl.style.width = \"auto\";\r\n            bodyEl.style.height = \"auto\";\r\n        }\r\n\r\n        //active tab\r\n        var tabBodyEl = this.getTabBodyEl(this.activeIndex);\r\n        if (tabBodyEl) {\r\n            if (!autoHeight && this.showBody) {\r\n                var h = mini.getHeight(bodyEl, true);\r\n                if (jQuery.boxModel) {\r\n                    var padding = mini.getPaddings(tabBodyEl);\r\n                    var border = mini.getBorders(tabBodyEl);\r\n                    h = h - padding.top - padding.bottom - border.top - border.bottom;\r\n                }\r\n                tabBodyEl.style.height = h + \"px\";\r\n            } else {\r\n                tabBodyEl.style.height = \"auto\";\r\n            }\r\n        }\r\n\r\n        switch (tabPosition) {\r\n            case \"bottom\":\r\n                var hds = headerEl.childNodes;\r\n                for (var i = 0, l = hds.length; i < l; i++) {\r\n                    var tb = hds[i];\r\n                    mini.removeClass(tb, \"mini-tabs-header2\");\r\n                    if (l > 1 && i != 0) {\r\n\r\n                        mini.addClass(tb, \"mini-tabs-header2\");\r\n                    }\r\n                }\r\n                break;\r\n            case \"left\":\r\n\r\n                //                var trs = headerEl.firstChild.getElementsByTagName(\"tr\");\r\n                //                var tds = trs[0].getElementsByTagName(\"td\");\r\n                var tds = headerEl.firstChild.rows[0].cells;\r\n                for (var i = 0, l = tds.length; i < l; i++) {\r\n                    var td = tds[i];\r\n                    mini.removeClass(td, \"mini-tabs-header2\");\r\n                    if (l > 1 && i == 0) {\r\n                        mini.addClass(td, \"mini-tabs-header2\");\r\n                    }\r\n                }\r\n                break;\r\n            case \"right\":\r\n                //                var trs = headerEl.firstChild.getElementsByTagName(\"tr\");\r\n                //                var tds = trs[0].getElementsByTagName(\"td\");\r\n\r\n                var tds = headerEl.firstChild.rows[0].cells;\r\n                for (var i = 0, l = tds.length; i < l; i++) {\r\n                    var td = tds[i];\r\n                    mini.removeClass(td, \"mini-tabs-header2\");\r\n                    if (l > 1 && i != 0) {\r\n                        mini.addClass(td, \"mini-tabs-header2\");\r\n                    }\r\n                }\r\n                break;\r\n            default:\r\n                var hds = headerEl.childNodes;\r\n                for (var i = 0, l = hds.length; i < l; i++) {\r\n                    var tb = hds[i];\r\n                    mini.removeClass(tb, \"mini-tabs-header2\");\r\n                    if (l > 1 && i == 0) {\r\n                        mini.addClass(tb, \"mini-tabs-header2\");\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n\r\n\r\n        //scroll \r\n        mini.removeClass(this.el, 'mini-tabs-scroll');\r\n        var td = mini.byClass('mini-tabs-lastSpace', this.el);\r\n        var buttons = mini.byClass('mini-tabs-buttons', this.el);\r\n        var ct = headerEl.parentNode;\r\n        ct.style[\"paddingRight\"] = '0px';\r\n        if (this._navEl) this._navEl.style.display = 'none';\r\n        if (this._leftNavEl) this._leftNavEl.style.display = 'none';\r\n        if (buttons) buttons.style.display = 'none';\r\n\r\n        var isRightButton = this.buttonsAlign == \"right\";\r\n        if (!isRightButton) {\r\n            buttons.style.right = 'auto';\r\n            buttons.style.left = '0';\r\n        }\r\n\r\n        mini.setWidth(ct, elWidth);\r\n\r\n        if ((tabPosition == \"top\" || tabPosition == \"bottom\") && (this.tabAlign == \"left\" || this.tabAlign == \"right\")) {\r\n            headerEl.style.width = 'auto';\r\n            buttons.style.display = 'block';\r\n\r\n\r\n            var width = elWidth;\r\n\r\n            var tabsWidth = headerEl.firstChild.offsetWidth - td.offsetWidth;\r\n            var buttonsWidth = buttons.firstChild ? buttons.offsetWidth : 0;\r\n\r\n            //            this._navEl.style.display = 'none';\r\n            //            this._navEl.style.display = 'none';\r\n\r\n            if (tabsWidth + buttonsWidth > width) {\r\n                this._navEl.style.display = 'block';\r\n                var navWidth = this._navEl.offsetWidth;\r\n                //_headerMenuEl\r\n                var headerMenuWidth = 0;\r\n\r\n                if (this.showNavMenu) {\r\n                    this._headerMenuEl.style.display = 'inline-block';\r\n                    headerMenuWidth = this._headerMenuEl.offsetWidth;\r\n                    this._headerMenuEl.style.right = buttonsWidth + \"px\";\r\n\r\n                    if (!this._headerMenu) {\r\n                        this._createHeaderMenu();\r\n                    }\r\n                }\r\n                var leftNavWidth = 0;\r\n                if (this.arrowPosition == \"side\") {\r\n                    this._leftNavEl.style.display = \"block\";\r\n                    leftNavWidth = this._leftNavEl.offsetWidth;\r\n                    headerEl.style.left = leftNavWidth + \"px\";\r\n                }\r\n                this._navEl.style.right = (isRightButton ? buttonsWidth : 0) + headerMenuWidth + 'px';\r\n                var w = width - buttonsWidth - navWidth - leftNavWidth - headerMenuWidth;\r\n                mini.setWidth(headerEl, w);\r\n                //alert(1);\r\n\r\n                //ct.style[\"paddingRight\"] = (buttonsWidth - navWidth) + \"px\";\r\n\r\n                //mini.addClass(this.el, 'mini-tabs-scroll');\r\n            } else {\r\n                headerEl.style.left = 0 + \"px\";\r\n            }\r\n\r\n            headerEl.style.marginLeft = (isRightButton ? 0 : buttonsWidth) + \"px\";\r\n        }\r\n\r\n\r\n\r\n        this._scrollToTab(this.activeIndex);\r\n        this._doScrollButton();\r\n\r\n        //        if (autoHeight) {\r\n        //        } else {\r\n        //        }\r\n\r\n        //alert(\"layout tab\");\r\n        mini.layout(bodyEl);\r\n\r\n        var that = this;\r\n        var tab = this.getActiveTab();\r\n        if (tab && tab.repaint && tabBodyEl) {\r\n            var w = tabBodyEl.style.width;\r\n            tabBodyEl.style.width = '0px';\r\n            setTimeout(function () {\r\n\r\n                tabBodyEl.style.width = w;\r\n            }, 1);\r\n        }\r\n\r\n        this.fire(\"layout\");\r\n\r\n    },\r\n\r\n    _getTabBy_Id: function (id) {\r\n        for (var i = 0, l = this.tabs.length; i < l; i++) {\r\n            var tab = this.tabs[i];\r\n            if (tab._id == id) return tab;\r\n        }\r\n    },\r\n    _createHeaderMenu: function () {\r\n\r\n\r\n        this._headerMenu = new mini.Menu();\r\n        this._headerMenu.setIdField(\"_id\");\r\n        this._headerMenu.setTextField(\"title\");\r\n        this._headerMenu.setPopupEl(this._headerMenuEl);\r\n        this._headerMenu.setShowAction(\"leftclick\");\r\n        this._headerMenu.setHideAction(\"outerclick\");\r\n        this._headerMenu.setXAlign(\"left\");\r\n        this._headerMenu.setYAlign(\"below\");\r\n        //jQuery(this._headerMenu.el).addClass(\"mini-shadow\");\r\n        //alert(1);\r\n        mini.addClass(this._headerMenu.el, \"mini-menu-open\");\r\n        this._headerMenu.on(\"itemclick\", this._doMenuSelectTab, this)\r\n\r\n        this._headerMenu.hide();\r\n        this._headerMenu.owner = this._headerMenuEl;\r\n\r\n    },\r\n    _setHeaderMenuItems: function () {\r\n        var tabs = this.getTabs();\r\n        var items = [];\r\n        for (var i = 0, l = tabs.length; i < l; i++) {\r\n            var o = tabs[i];\r\n            items.push({\r\n                //id: o[this.nameField],\r\n                id: o._id,\r\n                text: o[this.titleField]\r\n            });\r\n        }\r\n\r\n        this._headerMenu.setItems(items);\r\n    },\r\n    _doMenuSelectTab: function (e) {\r\n        var item = e.item;\r\n\r\n        var tab = this._getTabBy_Id(item.id);\r\n        this.activeTab(tab);\r\n    },\r\n    setTabAlign: function (value) {\r\n        this.tabAlign = value;\r\n        this.doUpdate();\r\n    },\r\n    setTabPosition: function (value) {\r\n        this.tabPosition = value;\r\n        this.doUpdate();\r\n    },\r\n\r\n    allowClickWrap: true,\r\n\r\n    setAllowClickWrap: function (value) {\r\n        this.allowClickWrap = value;\r\n    },\r\n    getAllowClickWrap: function () {\r\n        return this.allowClickWrap;\r\n    },\r\n\r\n    getTab: function (index) {\r\n        if (typeof index == \"object\") return index;\r\n        if (typeof index == \"number\") {\r\n            return this.tabs[index];\r\n        } else {\r\n            for (var i = 0, l = this.tabs.length; i < l; i++) {\r\n                var tab = this.tabs[i];\r\n                if (tab.name == index) return tab;\r\n            }\r\n        }\r\n    },\r\n    getHeaderEl: function () {\r\n        return this._headerEl;\r\n    },\r\n    getBodyEl: function () {\r\n        return this._bodyEl;\r\n    },\r\n    getTabEl: function (index) {\r\n        var tab = this.getTab(index);\r\n        if (!tab) return null;\r\n        var id = this._createTabId(tab);\r\n        var cs = this.el.getElementsByTagName(\"*\");\r\n        for (var i = 0, l = cs.length; i < l; i++) {\r\n            var el = cs[i];\r\n            if (el.id == id) return el;\r\n        }\r\n        return null;\r\n    },\r\n    getTabBodyEl: function (index) {\r\n        var tab = this.getTab(index);\r\n        if (!tab) return null;\r\n        var id = this._createTabBodyId(tab);\r\n        var cs = this._bodyEl.childNodes;\r\n        for (var i = 0, l = cs.length; i < l; i++) {\r\n            var el = cs[i];\r\n            if (el.id == id) return el;\r\n        }\r\n        return null;\r\n    },\r\n    getTabIFrameEl: function (index) {\r\n        var tab = this.getTab(index);\r\n        if (!tab) return null;\r\n        return tab._iframeEl;\r\n    },\r\n    _createTabId: function (tab) {\r\n        return this.uid + \"$\" + tab._id;\r\n    },\r\n    _createTabBodyId: function (tab) {\r\n        return this.uid + \"$body$\" + tab._id;\r\n    },\r\n    _doScrollButton: function () {\r\n        if (this.tabPosition == \"top\" || this.tabPosition == \"bottom\") {\r\n            mini.removeClass(this._leftButtonEl, \"mini-disabled\");\r\n            mini.removeClass(this._rightButtonEl, \"mini-disabled\");\r\n            if (this._headerEl.scrollLeft == 0) {\r\n                mini.addClass(this._leftButtonEl, \"mini-disabled\");\r\n            }\r\n            var tabEl = this.getTabEl(this.tabs.length - 1);\r\n            if (tabEl) {\r\n                var tabBox = mini.getBox(tabEl);\r\n                var scrollBox = mini.getBox(this._headerEl);\r\n                if (tabBox.right <= scrollBox.right) {\r\n                    mini.addClass(this._rightButtonEl, \"mini-disabled\");\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    setActiveIndex: function (value, load) {\r\n\r\n        var tab = this.getTab(value);\r\n\r\n        var acTab = this.getTab(this.activeIndex);\r\n\r\n        //\r\n\r\n        var fire = tab != acTab;\r\n\r\n        var el = this.getTabBodyEl(this.activeIndex);\r\n        if (el) el.style.display = \"none\";\r\n        if (tab) {\r\n            this.activeIndex = this.tabs.indexOf(tab);\r\n        } else {\r\n            this.activeIndex = -1;\r\n        }\r\n        var el = this.getTabBodyEl(this.activeIndex);\r\n        if (el) el.style.display = \"\";\r\n\r\n        var el = this.getTabEl(acTab);\r\n        if (el) mini.removeClass(el, this._tabActiveCls);\r\n\r\n        var el = this.getTabEl(tab);\r\n        if (el) mini.addClass(el, this._tabActiveCls);\r\n\r\n        if (el && fire) {\r\n            if (this.tabPosition == \"bottom\") {\r\n                var tb = mini.findParent(el, \"mini-tabs-header\");\r\n                if (tb) {\r\n                    jQuery(this._headerEl).prepend(tb);\r\n                }\r\n            } else if (this.tabPosition == \"left\") {\r\n                var td = mini.findParent(el, \"mini-tabs-header\").parentNode;\r\n                if (td) {\r\n                    td.parentNode.appendChild(td);\r\n                }\r\n            } else if (this.tabPosition == \"right\") {\r\n                var td = mini.findParent(el, \"mini-tabs-header\").parentNode;\r\n                if (td) {\r\n                    jQuery(td.parentNode).prepend(td);\r\n                }\r\n            } else {\r\n\r\n                //                var tb = mini.findParent(el, \"mini-tabs-header\");\r\n                //                if (tb) {\r\n                //                    this._headerEl.appendChild(tb);\r\n                //                }\r\n\r\n                var tb = mini.findParent(el, \"mini-tabs-header\");\r\n                if (tb && this.allowClickWrap) {\r\n                    this._headerEl.appendChild(tb);\r\n                }\r\n            }\r\n            var scrollLeft = this._headerEl.scrollLeft;\r\n\r\n\r\n\r\n            var acTab = this.getTab(this.activeIndex);\r\n            var canLayout = acTab ? !acTab._layouted : false;\r\n            var autoHeight = this.isAutoHeight();\r\n\r\n            //alert(1);\r\n\r\n            if (autoHeight || canLayout) {\r\n                if (acTab) acTab._layouted = true;\r\n                this.doLayout();\r\n                if (acTab) acTab._layouted = false;\r\n            }\r\n\r\n            //alert(2);\r\n\r\n            var rows = this.getTabRows();\r\n            if (rows.length > 1) {\r\n\r\n            } else {\r\n                this._scrollToTab(this.activeIndex);\r\n                //                if (this.tabPosition == \"top\") {\r\n                //                    this._headerEl.scrollLeft = scrollLeft;\r\n                //                    var tabEl = this.getTabEl(this.activeIndex);\r\n                //                    if (tabEl) {\r\n                //                        var sf = this;\r\n                //                        var tabBox = mini.getBox(tabEl);\r\n                //                        var scrollBox = mini.getBox(sf._headerEl);\r\n\r\n                //                        if (tabBox.x < scrollBox.x) {\r\n                //                            sf._headerEl.scrollLeft -= (scrollBox.x - tabBox.x);\r\n                //                        } else if (tabBox.right > scrollBox.right) {\r\n                //                            sf._headerEl.scrollLeft += (tabBox.right - scrollBox.right);\r\n                //                        }\r\n                //                    }\r\n                //                }\r\n                this._doScrollButton();\r\n            }\r\n\r\n            for (var i = 0, l = this.tabs.length; i < l; i++) {\r\n                var tabEl = this.getTabEl(this.tabs[i]);\r\n                if (tabEl) {\r\n                    mini.removeClass(tabEl, this._tabHoverCls);\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n        var me = this;\r\n        if (fire) {\r\n            var e = {\r\n                tab: tab,\r\n                index: this.tabs.indexOf(tab),\r\n                name: tab ? tab.name : \"\"\r\n            };\r\n\r\n            setTimeout(function () {    //延迟激发，这样确保UI都被继续创建后\r\n\r\n\r\n\r\n                me.fire(\"ActiveChanged\", e);\r\n\r\n            }, 1);\r\n        }\r\n\r\n        //iframe load\r\n        this._cancelLoadTabs(tab);\r\n        if (load !== false) {\r\n            if (tab && tab.url && !tab.loadedUrl) {\r\n                var me = this;\r\n\r\n                //setTimeout(function () {\r\n                me.loadTab(tab.url, tab);\r\n                //}, 1);\r\n            }\r\n        } else {\r\n            //if (this.maskOnLoad) this.loading();\r\n        }\r\n\r\n        if (tab) {\r\n            if (mini.isChrome) {\r\n                var iframe = this.getTabIFrameEl(tab);\r\n                if (iframe) {\r\n                    //mini.repaint(iframe);\r\n\r\n                    iframe.style.position = 'relative';     //fix chrome iframe scroll \r\n                    iframe.style.left = '1px'\r\n\r\n                    iframe.offsetWidth;\r\n\r\n                    iframe.style.left = '0px'\r\n\r\n                    //alert('repaint');\r\n                }\r\n            }\r\n        }\r\n\r\n        if (me.canLayout()) {\r\n            try {\r\n                mini.layoutIFrames(me.el);\r\n            } catch (e) {\r\n            }\r\n        }\r\n    },\r\n    _scrollToTab: function (tab) {\r\n        var scrollLeft = this._headerEl.scrollLeft;\r\n\r\n        if (this.tabPosition == \"top\" || this.tabPosition == \"bottom\") {\r\n            this._headerEl.scrollLeft = scrollLeft;\r\n            var tabEl = this.getTabEl(tab);\r\n            if (tabEl) {\r\n                var sf = this;\r\n                var tabBox = mini.getBox(tabEl);\r\n                var scrollBox = mini.getBox(sf._headerEl);\r\n\r\n                if (tabBox.x < scrollBox.x) {\r\n                    sf._headerEl.scrollLeft -= (scrollBox.x - tabBox.x);\r\n                } else if (tabBox.right > scrollBox.right) {\r\n                    sf._headerEl.scrollLeft += (tabBox.right - scrollBox.right);\r\n                }\r\n\r\n                //alert(sf._headerEl.scrollLeft);\r\n            }\r\n        }\r\n    },\r\n    getActiveIndex: function () {\r\n        return this.activeIndex;\r\n    },\r\n    activeTab: function (tab) {\r\n        this.setActiveIndex(tab);\r\n    },\r\n    getActiveTab: function () {\r\n        return this.getTab(this.activeIndex);\r\n    },\r\n    getActiveIndex: function () {\r\n        return this.activeIndex;\r\n    },\r\n    _tryActiveTab: function (tab) {\r\n        tab = this.getTab(tab);\r\n        if (!tab) return;\r\n        var index = this.tabs.indexOf(tab);\r\n        if (this.activeIndex == index) return;\r\n        var e = {\r\n            tab: tab,\r\n            index: index,\r\n            name: tab.name,\r\n            cancel: false\r\n        };\r\n        this.fire(\"BeforeActiveChanged\", e);\r\n        if (e.cancel == false) {\r\n            this.activeTab(tab);\r\n        }\r\n    },\r\n\r\n    setShowHeader: function (value) {\r\n        if (this.showHeader != value) {\r\n            this.showHeader = value;\r\n            this.doLayout();\r\n        }\r\n    },\r\n    getShowHeader: function () {\r\n        return this.showHeader;\r\n    },\r\n    setShowBody: function (value) {\r\n        if (this.showBody != value) {\r\n            this.showBody = value;\r\n            this.doLayout();\r\n        }\r\n    },\r\n    getShowBody: function () {\r\n        return this.showBody;\r\n    },\r\n    setBodyStyle: function (value) {\r\n        this.bodyStyle = value;\r\n        mini.setStyle(this._bodyEl, value);\r\n        this.doLayout();\r\n    },\r\n    getBodyStyle: function () {\r\n        return this.bodyStyle;\r\n    },\r\n    setMaskOnLoad: function (value) {\r\n        this.maskOnLoad = value;\r\n    },\r\n    getMaskOnLoad: function () {\r\n        return this.maskOnLoad;\r\n    },\r\n    setPlain: function (value) {\r\n        this.plain = value;\r\n        this.doLayout();\r\n    },\r\n    getPlain: function () {\r\n        return this.plain;\r\n    },\r\n\r\n    arrowPosition: \"right\",         //right, side\r\n    setArrowPosition: function (value) {\r\n        this.arrowPosition = value;\r\n    },\r\n    getArrowPosition: function () {\r\n        return this.arrowPosition;\r\n    },\r\n    showNavMenu: false,\r\n    setShowNavMenu: function (value) {\r\n        this.showNavMenu = value\r\n    },\r\n    getShowNavMenu: function () {\r\n        return this.showNavMenu;\r\n    },\r\n\r\n\r\n    clearTimeStamp: false,\r\n    setClearTimeStamp: function (value) {\r\n        this.clearTimeStamp = value;\r\n    },\r\n    getClearTimeStamp: function () {\r\n        return this.clearTimeStamp;\r\n    },\r\n    ////////////////////////////////////////\r\n    getTabByEvent: function (e) {\r\n        return this._getTabByEvent(e);\r\n    },\r\n    _getTabByEvent: function (e) {\r\n        var el = mini.findParent(e.target, 'mini-tab');\r\n        if (!el) return null;\r\n        var ids = el.id.split(\"$\");\r\n        if (ids[0] != this.uid) return null;\r\n        var index = parseInt(jQuery(el).attr(\"index\"));\r\n        return this.getTab(index);\r\n    },\r\n    __OnDblClick: function (e) {\r\n        var tab = this._getTabByEvent(e);\r\n        if (!tab) return;\r\n        var e = {\r\n            tab: tab\r\n        }\r\n        this.fire(\"tabdblclick\", e)\r\n    },\r\n    __OnClick: function (e) {\r\n        //if (this.isLoading) return;\r\n        var tab = this._getTabByEvent(e);\r\n        if (!tab) return;\r\n\r\n        var close = !!mini.findParent(e.target, \"mini-tab-close\");\r\n        if (!close && tab == this.getActiveTab() && !tab.refreshOnClick) return;\r\n\r\n        if (tab.enabled) {\r\n            var me = this;\r\n            setTimeout(function () {\r\n\r\n                if (close) {\r\n                    me._OnCloseButtonClick(tab, e);\r\n                } else {\r\n                    var loadedUrl = tab.loadedUrl;\r\n                    me._tryActiveTab(tab);\r\n                    if (tab.refreshOnClick && tab.url == loadedUrl) {\r\n                        me.reloadTab(tab);\r\n                    }\r\n                }\r\n            }, 10);\r\n        }\r\n    },\r\n    hoverTab: null,\r\n    __OnMouseOver: function (e) {\r\n\r\n        var tab = this._getTabByEvent(e);\r\n        if (tab && tab.enabled) {\r\n            var tabEl = this.getTabEl(tab);\r\n            mini.addClass(tabEl, this._tabHoverCls);\r\n            this.hoverTab = tab;\r\n        }\r\n    },\r\n    __OnMouseOut: function (e) {\r\n        if (this.hoverTab) {\r\n            var tabEl = this.getTabEl(this.hoverTab);\r\n            mini.removeClass(tabEl, this._tabHoverCls);\r\n        }\r\n        this.hoverTab = null;\r\n\r\n    },\r\n    __OnMouseDown: function (e) {\r\n        clearInterval(this._scrollTimer);\r\n        if (this.tabPosition == \"top\" || this.tabPosition == \"bottom\") {\r\n            var sf = this;\r\n            var count = 0, num = 10;\r\n            if (e.target == this._leftButtonEl) {\r\n                this._scrollTimer = setInterval(function () {\r\n                    sf._headerEl.scrollLeft -= num;\r\n                    count++;\r\n                    if (count > 5) num = 18;\r\n                    if (count > 10) num = 25;\r\n                    sf._doScrollButton();\r\n                }, 25);\r\n            } else if (e.target == this._rightButtonEl) {\r\n                this._scrollTimer = setInterval(function () {\r\n                    sf._headerEl.scrollLeft += num;\r\n                    count++;\r\n                    if (count > 5) num = 18;\r\n                    if (count > 10) num = 25;\r\n                    sf._doScrollButton();\r\n                }, 25);\r\n            } else if (e.target == this._headerMenuEl) {\r\n                this._setHeaderMenuItems();\r\n            }\r\n            mini.on(document, \"mouseup\", this.__OnDocMouseUp, this);\r\n        }\r\n    },\r\n    __OnDocMouseUp: function (e) {\r\n        clearInterval(this._scrollTimer);\r\n        this._scrollTimer = null;\r\n        mini.un(document, \"mouseup\", this.__OnDocMouseUp, this);\r\n    },\r\n\r\n    /////////////////////////////////////\r\n    _doUpdateTop: function () {\r\n\r\n        //\r\n        var isTop = this.tabPosition == \"top\";\r\n\r\n        var s = '';\r\n        //if (isTop) {\r\n        s += '<div class=\"mini-tabs-scrollCt\">';\r\n        if (this.arrowPosition == \"side\") {\r\n            s += '<div class=\"mini-tabs-leftnav\"><a class=\"mini-tabs-leftButton mini-icon\" href=\"javascript:void(0)\" hideFocus onclick=\"return false\"></a></div>';\r\n            s += '<div class=\"mini-tabs-nav\"><a class=\"mini-tabs-rightButton mini-icon\" href=\"javascript:void(0)\" hideFocus onclick=\"return false\"></a></div>';\r\n        } else {\r\n            s += '<div class=\"mini-tabs-nav\"><a class=\"mini-tabs-leftButton mini-icon\" href=\"javascript:void(0)\" hideFocus onclick=\"return false\"></a><a class=\"mini-tabs-rightButton mini-icon\" href=\"javascript:void(0)\" hideFocus onclick=\"return false\"></a></div>';\r\n        }\r\n        if (this.showNavMenu) {\r\n            s += '<a class=\"mini-tabs-tabmenu mini-icon\" href=\"javascript:void(0)\" hideFocus onclick=\"return false\"></a>'\r\n        }\r\n\r\n        s += '<div class=\"mini-tabs-buttons\" a=1 style=\"' + (this.buttonsAlign == \"right\" ? \"\" : \"right:auto;left:0;\") + '\"></div>';\r\n        //}\r\n        s += '<div class=\"mini-tabs-headers\">';\r\n        var rows = this.getTabRows();\r\n        for (var j = 0, k = rows.length; j < k; j++) {\r\n            var tabs = rows[j];\r\n            var cls = \"\";\r\n            s += '<table class=\"mini-tabs-header\" cellspacing=\"0\" cellpadding=\"0\"><tr><td class=\"mini-tabs-space mini-tabs-firstSpace\"><div></div></td>';\r\n            for (var i = 0, l = tabs.length; i < l; i++) {\r\n                var tab = tabs[i];\r\n                var id = this._createTabId(tab);\r\n                if (!tab.visible) continue;\r\n                var index = this.tabs.indexOf(tab);\r\n                var cls = tab.headerCls || \"\";\r\n                if (tab.enabled == false) {\r\n                    cls += ' mini-disabled';\r\n                }\r\n                s += '<td title=\"' + tab.tooltip + '\" id=\"' + id + '\" index=\"' + index + '\"  class=\"mini-tab mini-corner-all ' + cls + '\" style=\"' + tab.headerStyle + '\">';\r\n                if (tab.iconCls || tab.iconStyle) {\r\n                    s += '<span class=\"mini-tab-icon mini-iconfont ' + tab.iconCls + '\" style=\"' + tab.iconStyle + '\"></span>';\r\n                }\r\n                s += '<span class=\"mini-tab-text\">' + tab.title + '</span>';\r\n                if (tab.showCloseButton) {\r\n                    var ms = \"\";\r\n                    if (tab.enabled) {\r\n                        ms = 'onmouseover=\"mini.addClass(this, \\'mini-tab-close-hover\\')\" onmouseout=\"mini.removeClass(this, \\'mini-tab-close-hover\\')\"'\r\n                    }\r\n                    s += '<span class=\"mini-tab-close mini-icon\" ' + ms + ' ></span>';\r\n                }\r\n                s += '</td>';\r\n                if (i != l - 1) {\r\n                    s += '<td class=\"mini-tabs-space2\"><div></div></td>';\r\n                }\r\n\r\n            }\r\n            s += '<td class=\"mini-tabs-space mini-tabs-lastSpace\" ><div></div></td></tr></table>';\r\n        }\r\n        //if (isTop) {\r\n        s += '</div>';\r\n        //}\r\n        s += '</div>';\r\n\r\n        this._doClearElement();\r\n\r\n        mini.prepend(this._td2El, s);\r\n\r\n        var td = this._td2El;\r\n\r\n        this._headerEl = td.firstChild.lastChild;\r\n\r\n        //alert(this._headerEl.outerHTML);\r\n\r\n        //if (isTop) {\r\n        if (this.arrowPosition == \"side\") {\r\n            this._leftNavEl = td.firstChild.firstChild;\r\n            this._navEl = this._headerEl.parentNode.children[1];\r\n            this._leftButtonEl = this._leftNavEl.firstChild;\r\n            this._rightButtonEl = this._navEl.firstChild;\r\n\r\n            if (this.showNavMenu) {\r\n                this._headerMenuEl = this._headerEl.parentNode.children[2];\r\n            }\r\n        } else {\r\n            this._navEl = this._headerEl.parentNode.firstChild;\r\n            this._leftButtonEl = this._navEl.firstChild;\r\n            this._rightButtonEl = this._navEl.childNodes[1];\r\n\r\n            if (this.showNavMenu) {\r\n                this._headerMenuEl = this._headerEl.parentNode.children[1];\r\n            }\r\n        }\r\n\r\n        if (this.showNavMenu && this._headerMenu) {\r\n            this._headerMenu.setPopupEl(this._headerMenuEl);\r\n        }\r\n\r\n        //}\r\n        switch (this.tabAlign) {\r\n            case \"center\":\r\n                var hds = this._headerEl.childNodes;\r\n                for (var i = 0, l = hds.length; i < l; i++) {\r\n                    var tb = hds[i];\r\n                    var tds = tb.getElementsByTagName(\"td\");\r\n                    tds[0].style.width = \"50%\";\r\n                    tds[tds.length - 1].style.width = \"50%\";\r\n                }\r\n                break;\r\n            case \"right\":\r\n                var hds = this._headerEl.childNodes;\r\n                for (var i = 0, l = hds.length; i < l; i++) {\r\n                    var tb = hds[i];\r\n                    var tds = tb.getElementsByTagName(\"td\");\r\n                    tds[0].style.width = \"100%\";\r\n                }\r\n                break;\r\n            case \"fit\":\r\n                break;\r\n            default:\r\n                var hds = this._headerEl.childNodes;\r\n                for (var i = 0, l = hds.length; i < l; i++) {\r\n                    var tb = hds[i];\r\n                    var tds = tb.getElementsByTagName(\"td\");\r\n                    tds[tds.length - 1].style.width = \"100%\";\r\n                }\r\n                break;\r\n        }\r\n\r\n\r\n\r\n    },\r\n    _doUpdateBottom: function () {\r\n        this._doUpdateTop();\r\n        var td = this._td2El;\r\n\r\n        mini.append(td, td.firstChild);\r\n\r\n        //this._headerEl = td.lastChild;\r\n\r\n        this._headerEl = td.lastChild.lastChild;\r\n\r\n        //alert(this._headerEl.outerHTML);\r\n    },\r\n    _doUpdateLeft: function () {\r\n        var s = '<table cellspacing=\"0\" cellpadding=\"0\"><tr>';\r\n        var rows = this.getTabRows();\r\n        for (var j = 0, k = rows.length; j < k; j++) {\r\n            var tabs = rows[j];\r\n\r\n            var cls = \"\";\r\n            if (k > 1 && j != k - 1) {\r\n                cls = \"mini-tabs-header2\";\r\n            }\r\n            s += '<td class=\"' + cls + '\"><table class=\"mini-tabs-header\" cellspacing=\"0\" cellpadding=\"0\">';\r\n            s += '<tr ><td class=\"mini-tabs-space mini-tabs-firstSpace\" ><div></div></td></tr>';\r\n\r\n            for (var i = 0, l = tabs.length; i < l; i++) {\r\n                var tab = tabs[i];\r\n                var id = this._createTabId(tab);\r\n                if (!tab.visible) continue;\r\n\r\n                var index = this.tabs.indexOf(tab);\r\n\r\n                var cls = tab.headerCls || \"\";\r\n                if (tab.enabled == false) {\r\n                    cls += ' mini-disabled';\r\n                }\r\n                s += '<tr><td id=\"' + id + '\" index=\"' + index + '\"  class=\"mini-tab ' + cls + '\" style=\"' + tab.headerStyle + '\">';\r\n                if (tab.iconCls || tab.iconStyle) {\r\n                    s += '<span class=\"mini-tab-icon mini-iconfont ' + tab.iconCls + '\" style=\"' + tab.iconStyle + '\"></span>';\r\n                }\r\n                s += '<span class=\"mini-tab-text\">' + tab.title + '</span>';\r\n                if (tab.showCloseButton) {\r\n                    var ms = \"\";\r\n                    if (tab.enabled) {\r\n                        ms = 'onmouseover=\"mini.addClass(this, \\'mini-tab-close-hover\\')\" onmouseout=\"mini.removeClass(this, \\'mini-tab-close-hover\\')\"'\r\n                    }\r\n                    s += '<span class=\"mini-tab-close mini-icon\" ' + ms + '></span>';\r\n                }\r\n                s += '</td></tr>';\r\n\r\n                if (i != l - 1) {\r\n                    s += '<tr><td class=\"mini-tabs-space2\"><div></div></td></tr>';\r\n                }\r\n\r\n            }\r\n\r\n            s += '<tr ><td class=\"mini-tabs-space mini-tabs-lastSpace\" ><div></div></td></tr>';\r\n            s += '</table></td>';\r\n        }\r\n\r\n        s += '</tr ></table>';\r\n\r\n        this._doClearElement();\r\n        mini.addClass(this._td1El, \"mini-tabs-header\");\r\n        mini.append(this._td1El, s);\r\n        this._headerEl = this._td1El;\r\n\r\n    },\r\n    _doUpdateRight: function () {\r\n        this._doUpdateLeft();\r\n\r\n        mini.removeClass(this._td1El, \"mini-tabs-header\");\r\n        mini.removeClass(this._td3El, \"mini-tabs-header\");\r\n        mini.append(this._td3El, this._td1El.firstChild);\r\n        this._headerEl = this._td3El;\r\n\r\n    },\r\n    ///////////////////////////////////\r\n    _OnCloseButtonClick: function (tab, htmlEvent) {\r\n        var e = {\r\n            tab: tab,\r\n            index: this.tabs.indexOf(tab),\r\n            name: tab.name.toLowerCase(),\r\n            htmlEvent: htmlEvent,\r\n            cancel: false\r\n        };\r\n\r\n        this.fire(\"beforecloseclick\", e);\r\n\r\n        if (e.cancel == true) return;\r\n\r\n        try {\r\n            if (tab._iframeEl && tab._iframeEl.contentWindow) {\r\n                var ret = true;\r\n                if (tab._iframeEl.contentWindow.CloseWindow) {\r\n                    ret = tab._iframeEl.contentWindow.CloseWindow(\"close\");\r\n                } else if (tab._iframeEl.contentWindow.CloseOwnerWindow) {\r\n                    ret = tab._iframeEl.contentWindow.CloseOwnerWindow(\"close\");\r\n                }\r\n                if (ret === false) {\r\n                    e.cancel = true;\r\n                }\r\n            }\r\n        } catch (ex) { }\r\n\r\n        if (e.cancel == true) return;\r\n\r\n        tab.removeAction = \"close\";\r\n        this.removeTab(tab);\r\n        this.fire(\"closeclick\", e);\r\n    },\r\n    onBeforeCloseClick: function (fn, scope) {\r\n        this.on(\"beforecloseclick\", fn, scope);\r\n    },\r\n    onCloseClick: function (fn, scope) {\r\n        this.on(\"closeclick\", fn, scope);\r\n    },\r\n    onActiveChanged: function (fn, scope) {\r\n        this.on(\"activechanged\", fn, scope);\r\n    },\r\n    ///////////////////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Tabs.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"tabAlign\", \"tabPosition\", \"bodyStyle\", \"onactivechanged\", \"onbeforeactivechanged\", \"url\",\r\n                \"ontabload\", \"ontabdestroy\", \"onbeforecloseclick\", \"oncloseclick\", \"ontabdblclick\",\r\n                \"titleField\", \"urlField\", \"nameField\", \"loadingMsg\", \"buttons\", \"arrowPosition\", \"buttonsAlign\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"allowAnim\", \"showBody\", \"showHeader\", \"maskOnLoad\", \"plain\", \"allowClickWrap\", \"showNavMenu\", \"clearTimeStamp\"\r\n             ]\r\n        );\r\n        mini._ParseInt(el, attrs,\r\n            [\"activeIndex\"\r\n             ]\r\n        );\r\n\r\n        var tabs = [];\r\n        var nodes = mini.getChildNodes(el);\r\n        for (var i = 0, l = nodes.length; i < l; i++) {\r\n            var node = nodes[i];\r\n\r\n            var o = {};\r\n            tabs.push(o);\r\n\r\n            o.style = node.style.cssText;\r\n            mini._ParseString(node, o,\r\n                [\"name\", \"title\", \"url\", \"cls\", \"iconCls\", \"iconStyle\", \"headerCls\", \"headerStyle\", \"bodyCls\", \"bodyStyle\",\r\n                    \"onload\", \"ondestroy\", \"data-options\", \"tooltip\"\r\n                 ]\r\n            );\r\n            mini._ParseBool(node, o,\r\n                [\"newLine\", \"visible\", \"enabled\", \"showCloseButton\", \"refreshOnClick\"\r\n                 ]\r\n            );\r\n\r\n            //            var cs = mini.getChildNodes(node, true);\r\n            //            o.body = cs;\r\n            o.bodyParent = node;\r\n\r\n            //data-options\r\n            var options = o[\"data-options\"];\r\n            if (options) {\r\n\r\n                options = window[\"ev\" + \"al\"](\"(\" + options + \")\");\r\n                if (options) {\r\n                    //attrs[\"data-options\"] = options;\r\n                    mini.copyTo(o, options);\r\n                }\r\n            }\r\n        }\r\n        attrs.tabs = tabs;\r\n\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.Tabs, \"tabs\");\n\r\nmini.Menu = function () {\r\n    this.items = [];\r\n    mini.Menu.superclass.constructor.apply(this, arguments);\r\n\r\n    //this.el.style.background = \"none\";\r\n}\r\nmini.extend(mini.Menu, mini.Control);\r\nmini.copyTo(mini.Menu.prototype, mini.Popup_prototype);\r\nvar mini_Popup_prototype_hide = mini.Popup_prototype.hide;\r\n\r\nmini.copyTo(mini.Menu.prototype, {\r\n    height: \"auto\",\r\n    width: \"auto\",\r\n    minWidth: 140,\r\n    vertical: true,\r\n    allowSelectItem: false,\r\n    _selectedItem: null,\r\n    _itemSelectedCls: \"mini-menuitem-selected\",\r\n\r\n    textField: \"text\",\r\n    resultAsTree: false,\r\n    idField: \"id\",\r\n    parentField: \"pid\",\r\n    itemsField: \"children\",\r\n    iconClsField: \"iconCls\",\r\n\r\n    showNavArrow: true,\r\n\r\n    imgPath: '',\r\n\r\n    overflow: false,\r\n\r\n    //autoShowArrow: \r\n\r\n    _clearBorder: false,\r\n\r\n    showAction: \"none\", //none, leftclick, rightclick, mouseover\r\n    hideAction: \"outerclick\", //none, outerclick, mouseout\r\n\r\n    menuAlign: \"\",      //left, right\r\n    setMenuAlign: function (value) {\r\n        this.menuAlign = value;\r\n        //this.doLayout();\r\n    },\r\n    getMenuAlign: function () {\r\n        return this.menuAlign;\r\n    },\r\n\r\n    getbyName: function (name) {\r\n\r\n        for (var i = 0, l = this.items.length; i < l; i++) {\r\n            var item = this.items[i];\r\n            if (item.name == name) {\r\n                return item;\r\n            }\r\n            if (item.menu) {\r\n                var control = item.menu.getbyName(name);\r\n                if (control) return control;\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n    set: function (obj) {\r\n        if (typeof obj == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var url = obj.url;\r\n        delete obj.url;\r\n\r\n        if (obj.imgPath) this.setImgPath(obj.imgPath);\r\n        delete obj.imgPath;\r\n\r\n        this.ownerItem = obj.ownerItem;\r\n        delete obj.ownerItem;\r\n\r\n        mini.Menu.superclass.set.call(this, obj);\r\n\r\n        if (url) {\r\n            this.setUrl(url);\r\n        }\r\n\r\n        return this;\r\n    },\r\n    ////////////////////////\r\n    uiCls: \"mini-menu\",\r\n    _create: function () {\r\n        this.el = document.createElement(\"div\");\r\n        this.el.className = \"mini-menu\";\r\n        this.el.innerHTML = '<div class=\"mini-menu-border\"><a class=\"mini-menu-topArrow mini-icon\" href=\"#\" onclick=\"return false\"></a><div class=\"mini-menu-inner\"></div><a class=\"mini-menu-bottomArrow mini-icon\" href=\"#\" onclick=\"return false\"></a></div>';\r\n        this._borderEl = this.el.firstChild;\r\n\r\n        this._topArrowEl = this._borderEl.childNodes[0];\r\n        this._bottomArrowEl = this._borderEl.childNodes[2];\r\n\r\n        this._innerEl = this._borderEl.childNodes[1];\r\n        this._innerEl.innerHTML = '<div class=\"mini-menu-float\"></div><div class=\"mini-menu-toolbar\"></div><div style=\"clear:both;max-height: 1px;\"></div>';\r\n        this._contentEl = this._innerEl.firstChild;\r\n        this._toolbarEl = this._innerEl.childNodes[1];\r\n\r\n\r\n        //this._topArrowEl.style.display = this._bottomArrowEl.style.display = \"none\";\r\n\r\n        if (this.isVertical() == false) mini.addClass(this.el, 'mini-menu-horizontal');\r\n\r\n    },\r\n    destroy: function (removeEl) {\r\n\r\n        if (this.items) {\r\n            for (var i = 0, l = this.items.length; i < l; i++) {\r\n                this.items[i].destroy();\r\n            }\r\n        }\r\n\r\n        if (this._topArrowEl) {\r\n            this._topArrowEl.onmousedown = this._bottomArrowEl.onmousedown = null;\r\n        }\r\n\r\n        this._popupEl = this.popupEl = this._borderEl = this._innerEl = this._contentEl = this._toolbarEl = null;\r\n        this._topArrowEl = this._bottomArrowEl = null;\r\n        this.owner = null;\r\n        this.window = null;\r\n        mini.un(document, \"mousedown\", this.__OnBodyMouseDown, this);\r\n        mini.un(window, \"resize\", this.__OnWindowResize, this);\r\n\r\n        mini.Menu.superclass.destroy.call(this, removeEl);\r\n\r\n    },\r\n    _disableContextMenu: false,\r\n    _initEvents: function () {\r\n        mini._BindEvents(function () {\r\n            mini.on(document, \"mousedown\", this.__OnBodyMouseDown, this);\r\n            mini_onOne(this.el, \"mouseover\", this.__OnMouseOver, this);\r\n            mini.on(window, \"resize\", this.__OnWindowResize, this);\r\n            if (this._disableContextMenu) {\r\n                mini_onOne(this.el, \"contextmenu\", function (e) {\r\n                    e.preventDefault();\r\n                    //e.stopPropagation();\r\n                }, this);\r\n            }\r\n\r\n            mini_onOne(this._topArrowEl, \"mousedown\", this.__OnTopMouseDown, this);\r\n            mini_onOne(this._bottomArrowEl, \"mousedown\", this.__OnBottomMouseDown, this);\r\n\r\n        }, this);\r\n\r\n    },\r\n    within: function (e) {\r\n        if (mini.isAncestor(this.el, e.target)) return true;\r\n        for (var i = 0, l = this.items.length; i < l; i++) {\r\n            var item = this.items[i];\r\n            if (item.within(e)) return true;\r\n        }\r\n        return false;\r\n    },\r\n    //    _getClearEl: function () {\r\n    //        if (!this._clearEl) {\r\n    //            this._clearEl = mini.append(this._contentEl, '<div style=\"clear:both;\"></div>');\r\n    //        }\r\n    //        return this._clearEl;\r\n    //    },\r\n    setVertical: function (value) {\r\n        this.vertical = value;\r\n        if (!value) {\r\n            mini.addClass(this.el, 'mini-menu-horizontal');\r\n        } else {\r\n            mini.removeClass(this.el, 'mini-menu-horizontal');\r\n        }\r\n        //mini.append(this._contentEl, this._getClearEl());\r\n    },\r\n    getVertical: function () {\r\n        return this.vertical;\r\n    },\r\n    isVertical: function () {\r\n        return this.vertical;\r\n    },\r\n\r\n    show: function () {\r\n        this.setVisible(true);\r\n    },\r\n    hide: function () {\r\n        this.hideItems();\r\n        mini_Popup_prototype_hide.call(this);\r\n    },\r\n    hideItems: function () {\r\n        for (var i = 0, l = this.items.length; i < l; i++) {\r\n            var menuitem = this.items[i];\r\n            menuitem.hideMenu();\r\n        }\r\n    },\r\n\r\n    showItemMenu: function (item) {\r\n        for (var i = 0, l = this.items.length; i < l; i++) {\r\n            var menuitem = this.items[i];\r\n            if (menuitem == item) {\r\n                menuitem.showMenu();\r\n            } else {\r\n                menuitem.hideMenu();\r\n            }\r\n        }\r\n    },\r\n    hasShowItemMenu: function () {\r\n        for (var i = 0, l = this.items.length; i < l; i++) {\r\n            var menuitem = this.items[i];\r\n            if (menuitem && menuitem.menu && menuitem.menu.isPopup) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    setData: function (value) {\r\n        if (!mini.isArray(value)) value = [];\r\n        this.setItems(value);\r\n    },\r\n    getData: function () {\r\n        return this.getItems();\r\n    },\r\n    setItems: function (items) {\r\n        if (!mini.isArray(items)) items = [];\r\n\r\n        this.removeAll();\r\n        var sss = new Date();\r\n\r\n        for (var i = 0, l = items.length; i < l; i++) {\r\n            this.addItem(items[i]);\r\n        }\r\n        //alert(new Date() - sss);\r\n    },\r\n    getItems: function () {\r\n        return this.items;\r\n    },\r\n    _itemType: \"menuitem\",\r\n    addItem: function (item) {\r\n        if (item == \"-\" || item == \"|\" || item.type == \"separator\") {\r\n            //            mini.append(this._contentEl, '<span id=\"' + item.id + '\" name=\"' + (item.name || \"\") + '\" class=\"mini-separator\"></span>');\r\n            //            return;\r\n\r\n            var s = item.id ? ('id=\"' + item.id + '\"') : \"\";\r\n            mini.append(this._contentEl, '<span ' + s + ' name=\"' + (item.name || \"\") + '\" class=\"mini-separator\"></span>');\r\n            return;\r\n\r\n        }\r\n\r\n        if (!mini.isControl(item) && !mini.getClass(item.type)) {\r\n            item.type = this._itemType;\r\n        }\r\n\r\n        item.ownerMenu = this;\r\n\r\n        item = mini.getAndCreate(item);\r\n\r\n        this.items.push(item);\r\n        //if (this.vertical) {\r\n        this._contentEl.appendChild(item.el);\r\n        //}\r\n        item.ownerMenu = this;\r\n\r\n        //mini.append(this._contentEl, this._getClearEl());\r\n\r\n        this.fire(\"itemschanged\");\r\n    },\r\n    removeItem: function (item) {\r\n        item = mini.get(item);\r\n        if (!item) return;\r\n        this.items.remove(item);\r\n        //if (this.vertical) {\r\n        this._contentEl.removeChild(item.el);\r\n        //}\r\n        this.fire(\"itemschanged\");\r\n    },\r\n    removeItemAt: function (index) {\r\n        var item = this.items[index];\r\n        this.removeItem(item);\r\n    },\r\n    removeAll: function () {\r\n        var items = this.items.clone();\r\n        for (var i = items.length - 1; i >= 0; i--) {\r\n            this.removeItem(items[i]);\r\n        }\r\n        this._contentEl.innerHTML = \"\";\r\n    },\r\n    getGroupItems: function (name) {\r\n        if (!name) return [];\r\n        var items = [];\r\n        for (var i = 0, l = this.items.length; i < l; i++) {\r\n            var item = this.items[i];\r\n            if (item.groupName == name) items.push(item);\r\n        }\r\n        return items;\r\n    },\r\n    getItem: function (item) {\r\n        if (typeof item == \"number\") return this.items[item];\r\n        if (typeof item == \"string\") {\r\n            for (var i = 0, l = this.items.length; i < l; i++) {\r\n                var it = this.items[i];\r\n                if (it.id == item) return it;\r\n            }\r\n            return null;\r\n        }\r\n        if (item && this.items.indexOf(item) != -1) return item;\r\n        return null;\r\n    },\r\n\r\n    setAllowSelectItem: function (value) {\r\n        this.allowSelectItem = value;\r\n    },\r\n    getAllowSelectItem: function () {\r\n        return this.allowSelectItem;\r\n    },\r\n    setSelectedItem: function (item) {\r\n        item = this.getItem(item);\r\n        this._OnItemSelect(item);\r\n    },\r\n    getSelectedItem: function (item) {\r\n        return this._selectedItem;\r\n    },\r\n\r\n    setShowNavArrow: function (value) {\r\n        this.showNavArrow = value;\r\n    },\r\n    getShowNavArrow: function () {\r\n        return this.showNavArrow;\r\n    },\r\n    setTextField: function (value) {\r\n        this.textField = value;\r\n    },\r\n    getTextField: function () {\r\n        return this.textField;\r\n    },\r\n    setResultAsTree: function (value) {\r\n        this.resultAsTree = value;\r\n    },\r\n    getResultAsTree: function () {\r\n        return this.resultAsTree;\r\n    },\r\n    setIdField: function (value) {\r\n        this.idField = value;\r\n    },\r\n    getIdField: function () {\r\n        return this.idField;\r\n    },\r\n    setParentField: function (value) {\r\n        this.parentField = value;\r\n    },\r\n    getParentField: function () {\r\n        return this.parentField;\r\n    },\r\n    setIconClsField: function (value) {\r\n        this.iconClsField = value;\r\n    },\r\n    getIconClsField: function () {\r\n        return this.iconClsField;\r\n    },\r\n\r\n    setOverflow: function (value) {\r\n        this.overflow = value;\r\n\r\n        if (value) {\r\n            mini.addClass(this.el, 'mini-menu-overflow');\r\n        } else {\r\n            mini.removeClass(this.el, 'mini-menu-overflow');\r\n        }\r\n    },\r\n    getOverflow: function () {\r\n        return this.overflow;\r\n    },\r\n\r\n    ////////////////////////////////////////\r\n    doLayout: function () {\r\n\r\n        if (!this.canLayout()) return;\r\n\r\n        var innerEl = this._innerEl,\r\n            topEl = this._topArrowEl,\r\n            bottomEl = this._bottomArrowEl;\r\n\r\n        if (!this.isAutoHeight()) {\r\n            //var height = this.getHeight(true);\r\n            var height = mini.getHeight(this.el, true);\r\n\r\n            mini.setHeight(this._borderEl, height);\r\n            topEl.style.display = bottomEl.style.display = \"none\";\r\n            //topEl.style.width = \"auto\";\r\n            this._contentEl.style.height = \"auto\";\r\n\r\n            //alert(this._borderEl.scrollHeight + \",\" + this._borderEl.clientHeight);\r\n            if (this.showNavArrow && this._borderEl.scrollHeight > this._borderEl.clientHeight + 2) {\r\n\r\n                topEl.style.display = bottomEl.style.display = \"block\";\r\n                height = mini.getHeight(this._borderEl, true);\r\n                var th = mini.getHeight(topEl);\r\n                var bh = mini.getHeight(bottomEl);\r\n                var h = height - th - bh;\r\n                if (h < 0) h = 0;\r\n                mini.setHeight(this._contentEl, h);\r\n\r\n                //fix ie7\r\n                var width = mini.getWidth(this._borderEl, true);\r\n                mini.setWidth(topEl, width);\r\n                mini.setWidth(bottomEl, width);\r\n\r\n            } else {\r\n                this._contentEl.style.height = \"auto\";\r\n            }\r\n        } else {\r\n            this._borderEl.style.height = \"auto\";\r\n            this._contentEl.style.height = \"auto\";\r\n        }\r\n\r\n        if (this.overflow) {\r\n            topEl.style.display = bottomEl.style.display = \"none\";\r\n            innerEl.style.marginLeft = innerEl.style.marginRight = \"0px\";\r\n\r\n            if (this._getScrollWidth() > this._innerEl.offsetWidth) {\r\n                topEl.style.display = bottomEl.style.display = \"block\";\r\n                innerEl.style.marginLeft = innerEl.style.marginRight = \"15px\";\r\n            } else {\r\n                innerEl.scrollLeft = 0;\r\n            }\r\n\r\n        }\r\n    },\r\n    _measureSize: function () {\r\n        if (this.height == \"auto\") {\r\n            this.el.style.height = \"auto\";\r\n            this._borderEl.style.height = \"auto\";\r\n            this._contentEl.style.height = \"auto\";\r\n            this._topArrowEl.style.display = this._bottomArrowEl.style.display = \"none\";\r\n\r\n            var vbox = mini.getViewportBox();\r\n            var box = mini.getBox(this.el);\r\n            this.maxHeight = vbox.height - 2;\r\n\r\n            //@ 以下代码删除。\r\n            //            if (this.ownerItem) {\r\n            //                var box = mini.getBox(this.ownerItem.el);\r\n            //                var topH = box.top;\r\n            //                var bottomH = vbox.height - box.bottom;\r\n            //                var maxHeight = topH > bottomH ? topH : bottomH;\r\n            //                maxHeight -= 10;\r\n            //                this.maxHeight = maxHeight;\r\n            //            }\r\n\r\n            //@ 2018年代码\r\n            if (this.ownerItem) {\r\n                this.maxHeight = vbox.height - 2;\r\n            }\r\n        }\r\n        //this.maxHeight = 200;\r\n        this.el.style.display = \"\";\r\n        var box = mini.getBox(this.el);\r\n        //min, max\r\n        if (box.width > this.maxWidth) {\r\n            mini.setWidth(this.el, this.maxWidth);\r\n            box = mini.getBox(this.el);\r\n        }\r\n        if (box.height > this.maxHeight) {\r\n            mini.setHeight(this.el, this.maxHeight);\r\n            box = mini.getBox(this.el);\r\n        }\r\n        if (box.width < this.minWidth) {\r\n            mini.setWidth(this.el, this.minWidth);\r\n            box = mini.getBox(this.el);\r\n        }\r\n        if (box.height < this.minHeight) {\r\n            mini.setHeight(this.el, this.minHeight);\r\n            box = mini.getBox(this.el);\r\n        }\r\n    },\r\n    ////////////////////////////////////////\r\n    url: \"\",\r\n    _doLoad: function () {\r\n\r\n        var items = mini._getResult(this.url, null, null, null, null, this.dataField);\r\n        //var items = mini.getData(this.url);\r\n\r\n        if (this.dataField && !mini.isArray(items)) {\r\n            items = mini._getMap(this.dataField, items);\r\n        }\r\n        if (!items) items = [];\r\n\r\n        if (this.resultAsTree == false) {\r\n            items = mini.arrayToTree(items, this.itemsField, this.idField, this.parentField)\r\n        }\r\n\r\n        var list = mini.treeToArray(items, this.itemsField, this.idField, this.parentField)\r\n        for (var i = 0, l = list.length; i < l; i++) {\r\n            var o = list[i];\r\n            o.text = mini._getMap(this.textField, o);\r\n            o.iconCls = mini._getMap(this.iconClsField, o);\r\n            if (mini.isNull(o.text)) o.text = \"\";\r\n        }\r\n        var sss = new Date();\r\n        this.setItems(items);\r\n        //alert(new Date() - sss);\r\n        this.fire(\"load\");\r\n    },\r\n    loadList: function (list, idField, parentField) {\r\n        if (!list) return;\r\n\r\n        idField = idField || this.idField;\r\n        parentField = parentField || this.parentField;\r\n\r\n        for (var i = 0, l = list.length; i < l; i++) {\r\n            var o = list[i];\r\n            o.text = mini._getMap(this.textField, o);\r\n            o.iconCls = mini._getMap(this.iconClsField, o);\r\n            if (mini.isNull(o.text)) o.text = \"\";\r\n        }\r\n\r\n        var tree = mini.arrayToTree(list, this.itemsField, idField, parentField);\r\n\r\n        this.load(tree);\r\n    },\r\n    load: function (url) {\r\n        if (typeof url == \"string\") {\r\n            this.setUrl(url);\r\n        } else {\r\n            this.setItems(url);\r\n        }\r\n    },\r\n    setUrl: function (value) {\r\n        this.url = value;\r\n\r\n        this._doLoad();\r\n    },\r\n    getUrl: function () {\r\n        return this.url;\r\n    },\r\n    hideOnClick: true,\r\n    setHideOnClick: function (value) {\r\n        this.hideOnClick = value;\r\n    },\r\n    getHideOnClick: function () {\r\n        return this.hideOnClick;\r\n    },\r\n\r\n\r\n    hideOnClick: true,\r\n    setImgPath: function (value) {\r\n        this.imgPath = value;\r\n    },\r\n    getImgPath: function () {\r\n        return this.imgPath;\r\n    },\r\n    ////////////////////////////////////////\r\n    _OnItemClick: function (item, htmlEvent) {\r\n        var e = {\r\n            item: item,\r\n            isLeaf: !item.menu,\r\n            htmlEvent: htmlEvent\r\n        };\r\n        if (this.hideOnClick) {\r\n            if (this.isPopup) {\r\n                this.hide();\r\n            } else {\r\n                if (e.isLeaf) {\r\n                    this.hideItems();\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.allowSelectItem && this._selectedItem != item) {\r\n            this.setSelectedItem(item);\r\n        }\r\n\r\n        this.fire(\"itemclick\", e);\r\n        if (this.ownerItem) {\r\n\r\n        }\r\n    },\r\n    _OnItemSelect: function (item) {\r\n        if (this._selectedItem) {\r\n            this._selectedItem.removeCls(this._itemSelectedCls);\r\n        }\r\n        this._selectedItem = item;\r\n\r\n        if (this._selectedItem) {\r\n            this._selectedItem.addCls(this._itemSelectedCls);\r\n        }\r\n\r\n        var e = {\r\n            item: this._selectedItem,\r\n            isLeaf: this._selectedItem ? !this._selectedItem.menu : false\r\n        };\r\n        this.fire(\"itemselect\", e);\r\n    },\r\n    onItemClick: function (fn, scope) {\r\n        this.on(\"itemclick\", fn, scope);\r\n    },\r\n    onItemSelect: function (fn, scope) {\r\n        this.on(\"itemselect\", fn, scope);\r\n    },\r\n    /////////////////////////////////////\r\n    __OnTopMouseDown: function (e) {\r\n        this._startScrollMove(-20);\r\n    },\r\n    __OnBottomMouseDown: function (e) {\r\n        this._startScrollMove(20);\r\n    },\r\n\r\n    _getScrollWidth: function () {\r\n        var self = this;\r\n        var width = 0;\r\n\r\n        var first = jQuery(\".mini-menuitem\", self.el).first()[0];\r\n        var last = jQuery(\".mini-menuitem\", self.el).last()[0];\r\n        if (first && last) {\r\n            var box1 = mini.getBox(first);\r\n            var box2 = mini.getBox(last);\r\n            width = box2.right - box1.left;\r\n        }\r\n\r\n        return width;\r\n    },\r\n\r\n    _getMaxScrollLeft: function () {\r\n        return parseInt(this._getScrollWidth() - this._innerEl.offsetWidth + 6);\r\n    },\r\n\r\n    _startScrollMove: function (value) {\r\n        clearInterval(this._scrollTimer);\r\n        var fn = function () {\r\n            clearInterval(me._scrollTimer);\r\n            mini.un(document, \"mouseup\", fn);\r\n        };\r\n        mini.on(document, \"mouseup\", fn);\r\n\r\n        var scrollWidth = this._getMaxScrollLeft();\r\n\r\n        var me = this;\r\n        this._scrollTimer = setInterval(function () {\r\n            if (me.isVertical() == false) {\r\n\r\n                var left = me._innerEl.scrollLeft;\r\n                left += value;\r\n                if (left > scrollWidth) left = scrollWidth;\r\n                //me._contentEl.scrollLeft += value;\r\n\r\n                me._innerEl.scrollLeft = left;\r\n\r\n            } else {\r\n                me._contentEl.scrollTop += value;\r\n            }\r\n            //me._contentEl.scrollTop += value;\r\n            //document.title = new Date().getTime();\r\n        }, 50);\r\n    },\r\n    setToolbar: function (value) {\r\n        __mini_setControls(value, this._toolbarEl, this);\r\n        this._toolbarEl.style.display = \"block\";\r\n    },\r\n    ////////////////////////////////////\r\n    parseItems: function (nodes) {\r\n\r\n        var data = [];\r\n        for (var i = 0, l = nodes.length; i < l; i++) {\r\n            var node = nodes[i];\r\n\r\n            if (node.className == \"separator\") {\r\n                var o = { type: 'separator', id: node.id, name: node.name };\r\n                data.add(o);\r\n                continue;\r\n            }\r\n\r\n            var cnodes = mini.getChildNodes(node);\r\n\r\n            var nodeItem = cnodes[0];\r\n            var nodeChild = cnodes[1];\r\n\r\n            var o = new mini.MenuItem();\r\n\r\n            if (!nodeChild) {\r\n                //o.applyTo(node);\r\n                mini.applyTo.call(o, node);\r\n                data.add(o);\r\n                continue;\r\n            }\r\n            //o.applyTo(nodeItem);\r\n            mini.applyTo.call(o, nodeItem);\r\n            o.render(document.body);\r\n\r\n\r\n            var menu = new mini.Menu();\r\n            //menu.applyTo(nodeChild);\r\n            mini.applyTo.call(menu, nodeChild);\r\n\r\n            o.setMenu(menu);\r\n\r\n            menu.render(document.body);\r\n            //jQuery(node).remove();\r\n\r\n            data.add(o);\r\n        }\r\n        return data.clone();\r\n    },\r\n    getAttrs: function (el) {\r\n\r\n        var attrs = mini.Menu.superclass.getAttrs.call(this, el);\r\n        var jq = jQuery(el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"popupEl\", \"popupCls\", \"showAction\", \"hideAction\", \"xAlign\", \"yAlign\", \"modalStyle\",\r\n            \"onbeforeopen\", \"open\", \"onbeforeclose\", \"onclose\", \"url\", \"onitemclick\", \"onitemselect\",\r\n            \"textField\", \"idField\", \"parentField\", \"toolbar\", \"imgPath\", \"iconClsField\", \"menuAlign\"\r\n                ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"resultAsTree\", \"hideOnClick\", \"showNavArrow\", \"showShadow\", \"overflow\"\r\n                ]\r\n        );\r\n        //alert(this.el.outerHTML);\r\n\r\n        //var toolbar = jQuery(\"div[property=toolbar]\", this.el)[0];\r\n        //alert(toolbar);\r\n\r\n        //toobar\r\n        var nodes = mini.getChildNodes(el);\r\n        for (var i = nodes.length - 1; i >= 0; i--) {\r\n            var node = nodes[i];\r\n            var property = jQuery(node).attr(\"property\");\r\n            if (!property) continue;\r\n            property = property.toLowerCase();\r\n            if (property == \"toolbar\") {\r\n                attrs.toolbar = node;\r\n                node.parentNode.removeChild(node);\r\n            }\r\n        }\r\n\r\n        var nodes = mini.getChildNodes(el);\r\n\r\n        var items = this.parseItems(nodes);\r\n        if (items.length > 0) {\r\n            attrs.items = items;\r\n        }\r\n\r\n        var vertical = jq.attr(\"vertical\");\r\n        if (vertical) {\r\n\r\n            attrs.vertical = vertical == \"true\" ? true : false;\r\n        }\r\n        var allowSelectItem = jq.attr(\"allowSelectItem\");\r\n        if (allowSelectItem) {\r\n            attrs.allowSelectItem = allowSelectItem == \"true\" ? true : false;\r\n        }\r\n\r\n        return attrs;\r\n    }\r\n\r\n});\r\nmini.regClass(mini.Menu, 'menu');\r\n\r\n/* MenuBar */\r\nmini.MenuBar = function () {\r\n    mini.MenuBar.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.MenuBar, mini.Menu, {\r\n    uiCls: \"mini-menubar\",\r\n    vertical: false,\r\n    setVertical: function (value) {\r\n        this.vertical = false;\r\n    }\r\n});\r\nmini.regClass(mini.MenuBar, 'menubar');\r\n\r\n/* ContextMenu */\r\nmini.ContextMenu = function () {\r\n    mini.ContextMenu.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.ContextMenu, mini.Menu, {\r\n    uiCls: \"mini-contextmenu\",\r\n    vertical: true,\r\n    visible: false,\r\n    _disableContextMenu: true,\r\n    setVertical: function (value) {\r\n        this.vertical = true;\r\n    }\r\n});\r\nmini.regClass(mini.ContextMenu, 'contextmenu');\r\n\r\n/* MenuItem */\r\nmini.MenuItem = function () {\r\n    mini.MenuItem.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.MenuItem, mini.Control, {\r\n    text: \"\",\r\n    iconCls: \"\",\r\n    iconStyle: \"\",\r\n    iconPosition: \"left\", //left/top\r\n\r\n    img: '',\r\n\r\n    showIcon: true,\r\n    showAllow: true,\r\n\r\n    checked: false,\r\n    checkOnClick: false,\r\n    groupName: \"\",\r\n\r\n    _hoverCls: \"mini-menuitem-hover\",\r\n    _pressedCls: \"mini-menuitem-pressed\",\r\n    _checkedCls: \"mini-menuitem-checked\",\r\n\r\n    _clearBorder: false,\r\n\r\n    menu: null,\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        this.ownerMenu = kv.ownerMenu;\r\n        delete kv.ownerMenu;\r\n\r\n        //        var checked = kv.checked;\r\n        //        delete kv.checked;\r\n\r\n        //        if (checked) this.setChecked(checked);\r\n\r\n        //this.ownerMenu = kv.ownerMenu;\r\n        //delete kv.ownerMenu;\r\n\r\n        mini.MenuItem.superclass.set.call(this, kv);\r\n\r\n\r\n        return this;\r\n    },\r\n\r\n    uiCls: \"mini-menuitem\",\r\n    _create: function () {\r\n        var el = this.el = document.createElement(\"div\");\r\n        this.el.className = \"mini-menuitem\";\r\n\r\n        this.el.innerHTML = '<div class=\"mini-menuitem-inner\"><div class=\"mini-menuitem-icon mini-icon mini-iconfont\"></div><div class=\"mini-menuitem-text\"></div><div class=\"mini-menuitem-allow mini-icon\"></div></div>';\r\n        this._innerEl = this.el.firstChild;\r\n        this._iconEl = this._innerEl.firstChild;\r\n        this._textEl = this._innerEl.childNodes[1];\r\n        this.allowEl = this._innerEl.lastChild;\r\n    },\r\n    _initEvents: function () {\r\n        mini._BindEvents(function () {\r\n            mini_onOne(this.el, \"mouseover\", this.__OnMouseOver, this);\r\n        }, this);\r\n\r\n    },\r\n    _inputEventsInited: false,\r\n    _initInputEvents: function () {\r\n        if (this._inputEventsInited) return;\r\n        this._inputEventsInited = true;\r\n\r\n        mini_onOne(this.el, \"click\", this.__OnClick, this);\r\n        mini_onOne(this.el, \"mouseup\", this.__OnMouseUp, this);\r\n\r\n        mini_onOne(this.el, \"mouseout\", this.__OnMouseOut, this);\r\n\r\n\r\n    },\r\n    destroy: function (removeEl) {\r\n        //        if (this.el) {\r\n        //            this.el.onmouseover = null\r\n        //        }\r\n\r\n        if (this.menu) this.menu.destroy();\r\n        this.menu = this._innerEl = this._iconEl = this._textEl = this.allowEl = null;\r\n        mini.MenuItem.superclass.destroy.call(this, removeEl);\r\n    },\r\n    within: function (e) {\r\n        if (mini.isAncestor(this.el, e.target)) return true;\r\n        if (this.menu && this.menu.within(e)) return true;\r\n        return false;\r\n    },\r\n    _getIconImg: function () {\r\n        //return this.img; //暂时不实现\r\n        //if (this.img == 'download.gif') debugger;\r\n        return this.img && this.getTopMenu() ? this.getTopMenu().imgPath + this.img : this.img;\r\n    },\r\n    _doUpdateIcon: function () {\r\n\r\n\r\n        var img = this._getIconImg();\r\n        var hasIcon = !!(this.iconStyle || this.iconCls || this.checkOnClick || img);\r\n        if (this._iconEl) {\r\n            mini.setStyle(this._iconEl, this.iconStyle);\r\n            mini.addClass(this._iconEl, this.iconCls);\r\n\r\n            //if(this.checked) debugger\r\n            //img\r\n            if (img && !this.checked) {\r\n                var style = 'background-image:url(' + img + ')';\r\n                mini.setStyle(this._iconEl, style);\r\n            }\r\n\r\n            if (this.checked) jQuery(this._iconEl).css({ \"background-image\": \"\" });\r\n\r\n            this._iconEl.style.display = hasIcon ? \"block\" : \"none\";\r\n        }\r\n        if (this.iconPosition == \"top\") {\r\n            mini.addClass(this.el, \"mini-menuitem-icontop\");\r\n        } else {\r\n            mini.removeClass(this.el, \"mini-menuitem-icontop\");\r\n        }\r\n    },\r\n    _hasChildMenu: function () {\r\n        return this.menu && this.menu.items.length > 0;\r\n    },\r\n    doUpdate: function () {\r\n        if (this._textEl) this._textEl.innerHTML = this.text;\r\n        this._doUpdateIcon();\r\n\r\n\r\n        if (this.checked) {\r\n            mini.addClass(this.el, this._checkedCls);\r\n\r\n            //mini.setStyle(this._iconEl, \"background-image:''\");\r\n            jQuery(this._iconEl).css({ \"background-image\": \"\" });\r\n        } else {\r\n            mini.removeClass(this.el, this._checkedCls);\r\n        }\r\n        if (this.allowEl) {\r\n\r\n            if (this._hasChildMenu()) {\r\n\r\n                this.allowEl.style.display = \"block\";\r\n            } else {\r\n                this.allowEl.style.display = \"none\";\r\n            }\r\n        }\r\n    },\r\n    setText: function (value) {\r\n        this.text = value;\r\n        //this.doUpdate();\r\n        if (this._textEl) this._textEl.innerHTML = this.text;\r\n    },\r\n    getText: function () {\r\n        return this.text;\r\n    },\r\n    setIconCls: function (value) {\r\n        mini.removeClass(this._iconEl, this.iconCls);\r\n        this.iconCls = value;\r\n        //this.doUpdate();\r\n        this._doUpdateIcon();\r\n    },\r\n    getIconCls: function () {\r\n        return this.iconCls;\r\n    },\r\n    setImg: function (value) {\r\n        this.img = value;\r\n        //this.doUpdate();\r\n        this._doUpdateIcon();\r\n    },\r\n    getImg: function () {\r\n        return this.img;\r\n    },\r\n    setIconStyle: function (value) {\r\n        this.iconStyle = value;\r\n        //this.doUpdate();\r\n        this._doUpdateIcon();\r\n    },\r\n    getIconStyle: function () {\r\n        return this.iconStyle;\r\n    },\r\n    setIconPosition: function (value) {\r\n        this.iconPosition = value;\r\n        //this.doUpdate();\r\n        this._doUpdateIcon();\r\n    },\r\n    getIconPosition: function () {\r\n        return this.iconPosition;\r\n    },\r\n    setCheckOnClick: function (value) {\r\n        this.checkOnClick = value;\r\n        if (value) {\r\n            mini.addClass(this.el, \"mini-menuitem-showcheck\");\r\n        } else {\r\n            mini.removeClass(this.el, \"mini-menuitem-showcheck\");\r\n        }\r\n        this.doUpdate();\r\n    },\r\n    getCheckOnClick: function () {\r\n        return this.checkOnClick;\r\n    },\r\n    setChecked: function (value) {\r\n        if (this.checked != value) {\r\n            this.checked = value;\r\n            this.doUpdate();\r\n            this.fire(\"checkedchanged\");\r\n        }\r\n    },\r\n    getChecked: function () {\r\n        return this.checked;\r\n    },\r\n    setGroupName: function (value) {\r\n        if (this.groupName != value) {\r\n            this.groupName = value;\r\n        }\r\n    },\r\n    getGroupName: function () {\r\n        return this.groupName;\r\n    },\r\n    setChildren: function (value) {\r\n        this.setMenu(value);\r\n    },\r\n    setMenu: function (value) {\r\n        if (mini.isArray(value)) {\r\n            value = {\r\n                type: \"menu\",\r\n                items: value\r\n            };\r\n        }\r\n        if (this.menu !== value) {\r\n            value.ownerItem = this;\r\n            this.menu = mini.getAndCreate(value);\r\n            this.menu.hide();\r\n            this.menu.ownerItem = this;\r\n            this.doUpdate();\r\n            this.menu.on(\"itemschanged\", this.__OnItemsChanged, this);\r\n\r\n        }\r\n    },\r\n    getMenu: function () {\r\n        return this.menu;\r\n    },\r\n\r\n\r\n\r\n    showMenu: function () {\r\n        if (this.menu && this.menu.isDisplay() == false) {\r\n            this.menu.setHideAction(\"outerclick\");\r\n\r\n            var options = {\r\n                xAlign: \"outright\",\r\n                yAlign: \"top\",\r\n//                outXAlign: \"outleft\",\r\n//                outYAlign: 'below',\r\n                //xOffset: -1,\r\n                popupCls: \"mini-menu-popup\"\r\n            };\r\n\r\n            options.alwaysView = true;\r\n\r\n            if (this.ownerMenu && this.ownerMenu.vertical == false) {\r\n\r\n                options.xAlign = this.ownerMenu.menuAlign || \"left\";\r\n                options.yAlign = \"below\";\r\n                //options.outXAlign = null;\r\n                options.outXAlign = \"right\";\r\n            }\r\n            \r\n            this.menu.showAtEl(this.el, options);\r\n\r\n            this.menu.addCls(\"mini-menu-open\");\r\n\r\n        }\r\n    },\r\n    hideMenu: function () {\r\n        if (this.menu) {\r\n            this.menu.hide();\r\n        }\r\n    },\r\n    hide: function () {\r\n        this.hideMenu();\r\n        this.setVisible(false);\r\n    },\r\n\r\n    __OnItemsChanged: function (e) {\r\n        this.doUpdate();\r\n    },\r\n    getTopMenu: function () {\r\n        if (this.ownerMenu) {\r\n            if (this.ownerMenu.ownerItem) return this.ownerMenu.ownerItem.getTopMenu();\r\n            else return this.ownerMenu;\r\n        }\r\n        return null;\r\n    },\r\n    ///////////////////////////\r\n    __OnClick: function (e) {\r\n\r\n        if (this.isReadOnly()) return;\r\n\r\n        if (this.checkOnClick) {\r\n            if (this.ownerMenu && this.groupName) {\r\n                var groups = this.ownerMenu.getGroupItems(this.groupName);\r\n                if (groups.length > 0) {\r\n                    if (this.checked == false) {\r\n                        for (var i = 0, l = groups.length; i < l; i++) {\r\n                            var item = groups[i];\r\n                            if (item != this) {\r\n\r\n                                item.setChecked(false);\r\n                            }\r\n                        }\r\n                        this.setChecked(true);\r\n                    }\r\n                } else {\r\n                    this.setChecked(!this.checked);\r\n                }\r\n            } else {\r\n                this.setChecked(!this.checked);\r\n            }\r\n        }\r\n\r\n        this.fire(\"click\");\r\n\r\n        var topMenu = this.getTopMenu();\r\n        if (topMenu) {\r\n            topMenu._OnItemClick(this, e);\r\n        }\r\n    },\r\n    __OnMouseUp: function (e) {\r\n        if (this.isReadOnly()) return;\r\n\r\n        if (this.ownerMenu) {\r\n            var me = this;\r\n            setTimeout(function () {\r\n                if (me.isDisplay()) {\r\n                    me.ownerMenu.showItemMenu(me);\r\n\r\n                }\r\n            }, 1);\r\n        }\r\n    },\r\n    __OnMouseOver: function (e) {\r\n        //if(this.text == \"Ajax\") debugger\r\n        if (this.isReadOnly()) return;\r\n        this._initInputEvents();\r\n        mini.addClass(this.el, this._hoverCls);\r\n\r\n        this.el.title = this.text;\r\n\r\n        if (this._textEl.scrollWidth > this._textEl.clientWidth) {\r\n            this.el.title = this.text;\r\n        } else {\r\n            this.el.title = \"\";\r\n        }\r\n\r\n        if (this.ownerMenu) {\r\n            if (this.ownerMenu.isVertical() == true) {\r\n                this.ownerMenu.showItemMenu(this);\r\n            } else if (this.ownerMenu.hasShowItemMenu()) {\r\n                this.ownerMenu.showItemMenu(this);\r\n            }\r\n        }\r\n    },\r\n\r\n    __OnMouseOut: function (e) {\r\n        mini.removeClass(this.el, this._hoverCls);\r\n    },\r\n    onClick: function (fn, scope) {\r\n        this.on(\"click\", fn, scope);\r\n    },\r\n    onCheckedChanged: function (fn, scope) {\r\n        this.on(\"checkedchanged\", fn, scope);\r\n    },\r\n    ////////////////////////////////\r\n    getAttrs: function (el) {\r\n        var attrs = mini.MenuItem.superclass.getAttrs.call(this, el);\r\n        var jq = jQuery(el);\r\n\r\n        attrs.text = el.innerHTML;\r\n        mini._ParseString(el, attrs,\r\n            [\"text\", \"iconCls\", \"iconStyle\", \"iconPosition\", \"groupName\", \"onclick\", \"oncheckedchanged\"\r\n             ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"checkOnClick\", \"checked\"\r\n             ]\r\n        );\r\n\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.MenuItem, 'menuitem');\r\n\r\n\r\n///////////////////////////////////////////\r\nmini.Separator = function () {\r\n    mini.Separator.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.Separator, mini.Control, {\r\n    _clearBorder: false,\r\n    uiCls: \"mini-separator\",\r\n    _create: function () {\r\n        this.el = document.createElement(\"span\");\r\n        this.el.className = \"mini-separator\";\r\n    }\r\n});\r\nmini.regClass(mini.Separator, 'separator');\r\n\r\n\n\r\nmini.Pager = function () {\r\n    mini.Pager.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.Pager, mini.Control, {\r\n    pageIndex: 0,\r\n    pageSize: 10,\r\n    totalCount: 0,\r\n    totalPage: 0,\r\n\r\n    showPageIndex: true,\r\n    showPageSize: true,\r\n    showTotalCount: true,\r\n\r\n    showPageInfo: true,\r\n    showReloadButton: true,\r\n\r\n    _clearBorder: false,\r\n\r\n    showButtonText: false,\r\n    showButtonIcon: true,\r\n\r\n\r\n    sizeText: \"\",\r\n    firstText: \"首页\",\r\n    prevText: \"上一页\",\r\n    nextText: \"下一页\",\r\n    lastText: \"尾页\",\r\n    reloadText: \"刷新\",\r\n\r\n    pageInfoText: \"每页 {0} 条, 共 {1} 条\",\r\n    sizeList: [10, 20, 50, 100],\r\n\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var pageIndex = kv.pageIndex;\r\n        delete kv.pageIndex;\r\n\r\n        mini.Pager.superclass.set.call(this, kv);\r\n\r\n        if (!mini.isNull(pageIndex)) {\r\n            this.setPageIndex(pageIndex);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    uiCls: \"mini-pager\",\r\n    _create: function () {\r\n        this.el = document.createElement(\"div\");\r\n        this.el.className = \"mini-pager\";\r\n\r\n\r\n        var s = '<div class=\"mini-pager-left\"><table cellspacing=\"0\" cellpadding=\"0\" border=\"0\"><tr><td></td><td></td></tr></table></div><div class=\"mini-pager-right\"></div>';\r\n\r\n        if (isIE6 || isIE7) {\r\n            s += '<div class=\"mini-clearfix\"></div>';\r\n            mini.addClass(this.el, \"mini-clearfix\");\r\n        }\r\n\r\n        this.el.innerHTML = s;\r\n\r\n        this._leftEl = this.el.childNodes[0];\r\n        this._rightEl = this.el.childNodes[1];\r\n\r\n        //        this._barEl = this._leftEl.firstChild.rows[0].cells[0];\r\n        //        this._barEl2 = this._leftEl.firstChild.rows[0].cells[1];\r\n\r\n        var tds = this._leftEl.getElementsByTagName(\"td\");\r\n        this._barEl = tds[0];\r\n        this._barEl2 = tds[1];\r\n\r\n\r\n        this.sizeEl = mini.append(this._barEl, '<span class=\"mini-pager-size\"></span>');\r\n\r\n        this.sizeTextEl = mini.before(this.sizeEl, '<span class=\"mini-pager-sizetext\"></span>');\r\n\r\n\r\n        this.sizeCombo = new mini.ComboBox();\r\n        //this.sizeCombo.setName(\"pagesize\");       //name还挺难用的。\r\n        if (this.pageSizeWidth) this.sizeCombo.setWidth(this.pageSizeWidth);\r\n        this.sizeCombo.render(this.sizeEl);\r\n        mini.append(this.sizeEl, '<span class=\"separator\"></span>');\r\n\r\n        this.firstButton = new mini.Button();\r\n        this.firstButton.addCls(\"mini-pager-firstbutton\");\r\n        this.firstButton.render(this._barEl);\r\n\r\n        this.prevButton = new mini.Button();\r\n        this.prevButton.addCls(\"mini-pager-prevbutton\");\r\n        this.prevButton.render(this._barEl);\r\n\r\n        this.indexEl = document.createElement(\"span\");\r\n        this.indexEl.className = 'mini-pager-index';\r\n        this.indexEl.innerHTML = '<input type=\"text\" class=\"mini-pager-num\"/><span class=\"mini-pager-pages\">/ 0</span>';\r\n        this._barEl.appendChild(this.indexEl);\r\n\r\n        this.numInput = this.indexEl.firstChild;\r\n        this.pagesLabel = this.indexEl.lastChild;\r\n\r\n        this.nextButton = new mini.Button();\r\n        this.nextButton.addCls(\"mini-pager-nextbutton\");\r\n        this.nextButton.render(this._barEl);\r\n\r\n        this.lastButton = new mini.Button();\r\n        this.lastButton.addCls(\"mini-pager-lastbutton\");\r\n        this.lastButton.render(this._barEl);\r\n\r\n        mini.append(this._barEl, '<span class=\"separator\"></span>');\r\n\r\n        this.reloadButton = new mini.Button();\r\n        this.reloadButton.render(this._barEl);\r\n\r\n        this.firstButton.setPlain(true);\r\n        this.prevButton.setPlain(true);\r\n        this.nextButton.setPlain(true);\r\n        this.lastButton.setPlain(true);\r\n        this.reloadButton.setPlain(true);\r\n\r\n\r\n        this.buttonsEl = mini.append(this._barEl2, '<div class=\"mini-page-buttons\"></div>');\r\n\r\n\r\n        this.update();\r\n    },\r\n\r\n    destroy: function (removeEl) {\r\n        if (this.pageSelect) {\r\n            mini.clearEvent(this.pageSelect);\r\n            this.pageSelect = null;\r\n        }\r\n        if (this.numInput) {\r\n            mini.clearEvent(this.numInput);\r\n            this.numInput = null;\r\n        }\r\n        this.sizeEl = this.sizeTextEl = this._barEl = this._barEl2 = this._leftEl = this._rightEl = this.indexEl = this.buttonsEl = null;\r\n\r\n        mini.Pager.superclass.destroy.call(this, removeEl);\r\n    },\r\n\r\n    setButtons: function (value) {\r\n        __mini_setControls(value, this.buttonsEl, this);\r\n    },\r\n    getButtonsEl: function () {\r\n        return this.buttonsEl;\r\n    },\r\n\r\n    _initEvents: function () {\r\n\r\n        mini.Pager.superclass._initEvents.call(this);\r\n\r\n        this.firstButton.on(\"click\", function (e) {\r\n            this._OnPageChanged(0);\r\n        }, this);\r\n        this.prevButton.on(\"click\", function (e) {\r\n            this._OnPageChanged(this.pageIndex - 1);\r\n        }, this);\r\n        this.nextButton.on(\"click\", function (e) {\r\n\r\n            this._OnPageChanged(this.pageIndex + 1);\r\n        }, this);\r\n        this.lastButton.on(\"click\", function (e) {\r\n            this._OnPageChanged(this.totalPage);\r\n        }, this);\r\n        this.reloadButton.on(\"click\", function (e) {\r\n            this._OnPageChanged();\r\n        }, this);\r\n\r\n\r\n        function doPage() {\r\n            if (changing) return;\r\n            changing = true;\r\n            var index = parseInt(this.numInput.value);\r\n            if (isNaN(index)) {\r\n                this.update();\r\n            } else {\r\n                this._OnPageChanged(index - 1);\r\n            }\r\n            setTimeout(function () {\r\n                changing = false;\r\n            }, 100);\r\n        }\r\n\r\n        var changing = false;\r\n        mini.on(this.numInput, \"change\", function (e) {\r\n            doPage.call(this);\r\n        }, this);\r\n\r\n        mini.on(this.numInput, \"keydown\", function (e) {\r\n            if (e.keyCode == 13) {\r\n                doPage.call(this);\r\n                e.stopPropagation();\r\n            }\r\n        }, this);\r\n\r\n        //mini.on(this.pageSelect, \"change\", this.__OnPageSelectChanged, this);\r\n        this.sizeCombo.on(\"valuechanged\", this.__OnPageSelectChanged, this);\r\n    },\r\n    doLayout: function () {\r\n        if (!this.canLayout()) return;\r\n        mini.layout(this._leftEl);\r\n        mini.layout(this._rightEl);\r\n    },\r\n    setPageIndex: function (value) {\r\n        if (isNaN(value)) return;\r\n        this.pageIndex = value;\r\n        this.update();\r\n    },\r\n    getPageIndex: function () {\r\n        return this.pageIndex;\r\n    },\r\n    setPageSize: function (value) {\r\n        if (isNaN(value)) return;\r\n        this.pageSize = value;\r\n        this.update();\r\n    },\r\n    getPageSize: function () {\r\n        return this.pageSize;\r\n    },\r\n    setTotalCount: function (value) {\r\n        value = parseInt(value);\r\n        if (isNaN(value)) return;\r\n        this.totalCount = value;\r\n        this.update();\r\n    },\r\n    getTotalCount: function () {\r\n        return this.totalCount;\r\n    },\r\n    setSizeList: function (value) {\r\n        if (!mini.isArray(value)) return;\r\n        this.sizeList = value;\r\n        this.update();\r\n    },\r\n    getSizeList: function () {\r\n        return this.sizeList;\r\n    },\r\n\r\n    pageSizeWidth: null,\r\n    setPageSizeWidth: function (value) {\r\n        value = parseInt(value);\r\n        if (isNaN(value)) return;\r\n        if (this.pageSizeWidth != value) {\r\n            this.pageSizeWidth = value;\r\n            this.sizeCombo.setWidth(value);\r\n        }\r\n    },\r\n    getPageSizeWidth: function () {\r\n        return this.pageSizeWidth;\r\n    },\r\n\r\n\r\n    setShowPageSize: function (value) {\r\n        this.showPageSize = value;\r\n        this.update();\r\n    },\r\n    getShowPageSize: function () {\r\n        return this.showPageSize;\r\n    },\r\n    setShowPageIndex: function (value) {\r\n        this.showPageIndex = value;\r\n        this.update();\r\n    },\r\n    getShowPageIndex: function () {\r\n        return this.showPageIndex;\r\n    },\r\n    setShowTotalCount: function (value) {\r\n        this.showTotalCount = value;\r\n        this.update();\r\n    },\r\n    getShowTotalCount: function () {\r\n        return this.showTotalCount;\r\n    },\r\n    setShowPageInfo: function (value) {\r\n        this.showPageInfo = value;\r\n        this.update();\r\n    },\r\n    getShowPageInfo: function () {\r\n        return this.showPageInfo;\r\n    },\r\n    setShowReloadButton: function (value) {\r\n        this.showReloadButton = value;\r\n        this.update();\r\n    },\r\n    getShowReloadButton: function () {\r\n        return this.showReloadButton;\r\n    },\r\n\r\n\r\n    setShowButtonText: function (value) {\r\n        this.showButtonText = value;\r\n        this.update();\r\n    },\r\n    getShowButtonText: function () {\r\n        return this.showButtonText;\r\n    },\r\n    setShowButtonIcon: function (value) {\r\n\r\n        this.showButtonIcon = value;\r\n        this.update();\r\n    },\r\n    getShowButtonIcon: function () {\r\n        return this.showButtonIcon;\r\n    },\r\n\r\n\r\n\r\n    getTotalPage: function () {\r\n        return this.totalPage;\r\n    },\r\n    update: function (index, size, total) {\r\n\r\n        if (mini.isNumber(index)) this.pageIndex = parseInt(index);\r\n        if (mini.isNumber(size)) this.pageSize = parseInt(size);\r\n        if (mini.isNumber(total)) this.totalCount = parseInt(total);\r\n\r\n        this.totalPage = parseInt(this.totalCount / this.pageSize) + 1;\r\n        if ((this.totalPage - 1) * this.pageSize == this.totalCount) {\r\n            this.totalPage -= 1;\r\n        }\r\n        if (this.totalCount == 0) this.totalPage = 0;\r\n\r\n        if (this.totalCount >= 0) {\r\n            if (this.pageIndex > this.totalPage - 1) {\r\n                this.pageIndex = this.totalPage - 1;\r\n            }\r\n        }\r\n        if (this.pageIndex <= 0) this.pageIndex = 0;\r\n        if (this.totalPage <= 0) this.totalPage = 0;\r\n\r\n        this.firstButton.enable();\r\n        this.prevButton.enable();\r\n        this.nextButton.enable();\r\n        this.lastButton.enable();\r\n\r\n        if (this.pageIndex == 0) {\r\n            this.firstButton.disable();\r\n            this.prevButton.disable();\r\n        }\r\n        if (this.pageIndex >= this.totalPage - 1) {\r\n            this.nextButton.disable();\r\n            this.lastButton.disable();\r\n        }\r\n\r\n        var pageIndex = this.pageIndex > -1 ? this.pageIndex + 1 : 0;\r\n        if (this.totalCount == 0) pageIndex = 0;\r\n\r\n        this.numInput.value = pageIndex;\r\n        this.pagesLabel.innerHTML = \"/ \" + this.totalPage;\r\n\r\n        var sizeList = this.sizeList.clone();\r\n        if (sizeList.indexOf(this.pageSize) == -1) {\r\n            sizeList.push(this.pageSize);\r\n            sizeList = sizeList.sort(function (a, b) {\r\n                return a > b;\r\n            });\r\n        }\r\n        var sizes = [];\r\n        for (var i = 0, l = sizeList.length; i < l; i++) {\r\n            var num = sizeList[i];\r\n            var option = {};\r\n            option.text = num;\r\n            option.id = num;\r\n            sizes.push(option);\r\n        }\r\n        this.sizeCombo.setData(sizes);\r\n        this.sizeCombo.setValue(this.pageSize);\r\n\r\n\r\n        this.sizeTextEl.innerHTML = this.sizeText;\r\n        this.sizeTextEl.style.display = this.sizeText ? \"\" : \"none\";\r\n\r\n        var firstText = this.firstText, prevText = this.prevText, nextText = this.nextText, lastText = this.lastText, reloadText = this.reloadText;\r\n        if (this.showButtonText == false) {\r\n            firstText = prevText = nextText = lastText = reloadText = \"\";\r\n        }\r\n        this.firstButton.setText(firstText);\r\n        this.prevButton.setText(prevText);\r\n        this.nextButton.setText(nextText);\r\n        this.lastButton.setText(lastText);\r\n        this.reloadButton.setText(reloadText);\r\n\r\n        var firstText = this.firstText, prevText = this.prevText, nextText = this.nextText, lastText = this.lastText;\r\n        if (this.showButtonText) {\r\n            this.firstButton.setTooltip(firstText);\r\n            this.prevButton.setTooltip(prevText);\r\n            this.nextButton.setTooltip(nextText);\r\n            this.lastButton.setTooltip(lastText);\r\n            this.reloadButton.setTooltip(reloadText);\r\n        }\r\n\r\n        this.firstButton.setIconCls(this.showButtonIcon ? \"mini-pager-first\" : \"\");\r\n        this.prevButton.setIconCls(this.showButtonIcon ? \"mini-pager-prev\" : \"\");\r\n        this.nextButton.setIconCls(this.showButtonIcon ? \"mini-pager-next\" : \"\");\r\n        this.lastButton.setIconCls(this.showButtonIcon ? \"mini-pager-last\" : \"\");\r\n        this.reloadButton.setIconCls(this.showButtonIcon ? \"mini-pager-reload\" : \"\");\r\n        this.reloadButton.setVisible(this.showReloadButton);\r\n\r\n        var s = this.reloadButton.el.previousSibling;\r\n        if (s) {\r\n            s.style.display = this.showReloadButton ? \"\" : \"none\";\r\n        }\r\n\r\n\r\n        this._rightEl.innerHTML = String.format(this.pageInfoText, this.pageSize, this.totalCount);\r\n\r\n        this.indexEl.style.display = this.showPageIndex ? \"\" : \"none\";\r\n        this.sizeEl.style.display = this.showPageSize ? \"\" : \"none\";\r\n        this._rightEl.style.display = this.showPageInfo ? \"\" : \"none\";\r\n\r\n\r\n        //@新增：用于处理 totalPage < 0 的场合\r\n        this.firstButton.setVisible(this.totalCount >= 0);\r\n        this.lastButton.setVisible(this.totalCount >= 0);\r\n\r\n        if (this.totalCount < 0) {\r\n            this.firstButton.enable();\r\n            this.nextButton.enable();\r\n            if (this.pageIndex == 0) {\r\n                this.firstButton.disable();\r\n            }\r\n            //this.indexEl.style.display = \"none\";\r\n        }\r\n    },\r\n    __OnPageSelectChanged: function (e) {\r\n        var size = parseInt(this.sizeCombo.getValue());\r\n        this._OnPageChanged(0, size);\r\n    },\r\n    _OnPageChanged: function (index, size) {\r\n\r\n        var e = {\r\n            pageIndex: mini.isNumber(index) ? index : this.pageIndex,\r\n            pageSize: mini.isNumber(size) ? size : this.pageSize,\r\n            cancel: false\r\n        };\r\n\r\n        if (this.totalCount >= 0) {\r\n            if (e.pageIndex > this.totalPage - 1) {\r\n                e.pageIndex = this.totalPage - 1;\r\n            }\r\n        }\r\n        if (e.pageIndex < 0) e.pageIndex = 0;\r\n\r\n        this.fire(\"beforepagechanged\", e);\r\n        if (e.cancel == true) {\r\n            return;\r\n        }\r\n\r\n        this.fire(\"pagechanged\", e);\r\n        this.update(e.pageIndex, e.pageSize);\r\n\r\n    },\r\n    onPageChanged: function (fn, scope) {\r\n        this.on(\"pagechanged\", fn, scope);\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Pager.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"onpagechanged\", \"sizeList\", \"onbeforepagechanged\", \"buttons\", \"sizeText\"\r\n                ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"showPageIndex\", \"showPageSize\", \"showTotalCount\", \"showPageInfo\", \"showReloadButton\", \"showButtonText\", \"showButtonIcon\"\r\n                ]\r\n        );\r\n        mini._ParseInt(el, attrs,\r\n            [\"pageIndex\", \"pageSize\", \"totalCount\", \"pageSizeWidth\"\r\n                ]\r\n        );\r\n        //        var cs = mini.getChildNodes(el, true);\r\n        //        attrs.body = cs;\r\n\r\n        if (typeof attrs.sizeList == \"string\") {\r\n            attrs.sizeList = window[\"ev\" + \"al\"](attrs.sizeList);\r\n        }\r\n        if (attrs.buttons) {\r\n            attrs.buttons = mini.byId(attrs.buttons);\r\n\r\n        }\r\n\r\n\r\n\r\n        return attrs;\r\n    }\r\n\r\n});\r\nmini.regClass(mini.Pager, \"pager\");\n\r\nmini.DataBinding = function () {\r\n    this._bindFields = [];\r\n    this._bindForms = [];\r\n    mini.DataBinding.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.DataBinding, mini.Component, {\r\n    bindField: function (control, source, field, mode, convert) {\r\n        control = mini.get(control);\r\n        source = mini.get(source);\r\n        if (!control || !source || !field) return;\r\n        var bind = { control: control, source: source, field: field, convert: convert, mode: mode };\r\n        this._bindFields.push(bind);\r\n\r\n        source.on(\"currentchanged\", this.__OnCurrentChanged, this);\r\n        control.on(\"valuechanged\", this.__OnValueChanged, this);\r\n    },\r\n    bindForm: function (form, source, mode, convert) {\r\n        form = mini.byId(form);\r\n        source = mini.get(source);\r\n        if (!form || !source) return;\r\n\r\n        var form = new mini.Form(form);\r\n        var controls = form.getFields();\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n            this.bindField(control, source, control.getName(), mode, convert);\r\n        }\r\n    },\r\n    //////////////////////////////////////////////////\r\n    __OnCurrentChanged: function (e) {\r\n        if (this._doSetting) return;\r\n        this._doSetting = true;\r\n\r\n        this._currentRecord = e.record;\r\n\r\n        var source = e.sender;\r\n        var record = e.record;\r\n\r\n        //field\r\n        for (var i = 0, l = this._bindFields.length; i < l; i++) {\r\n            var bind = this._bindFields[i];\r\n            if (bind.source != source) continue;\r\n\r\n            var control = bind.control;\r\n            var field = bind.field;\r\n            if (control.setValue) {\r\n                if (record) {\r\n                    //var value = record[field];\r\n                    var value = mini._getMap(field, record);\r\n                    control.setValue(value);\r\n                } else {\r\n                    control.setValue(\"\");\r\n                }\r\n            }\r\n\r\n            if (control.setText && control.textName) {\r\n                if (record) {\r\n                    control.setText(record[control.textName]);\r\n                } else {\r\n                    control.setText(\"\");\r\n                }\r\n            }\r\n        }\r\n\r\n        var me = this;\r\n        setTimeout(function () {\r\n            me._doSetting = false;\r\n        }, 10);\r\n    },\r\n    __OnValueChanged: function (e) {\r\n\r\n        if (this._doSetting) return;\r\n        this._doSetting = true;\r\n\r\n        var control = e.sender;\r\n        var value = control.getValue();\r\n\r\n\r\n        //field\r\n        for (var i = 0, l = this._bindFields.length; i < l; i++) {\r\n            var bind = this._bindFields[i];\r\n\r\n            if (bind.control != control || bind.mode === false) continue;\r\n            var source = bind.source;\r\n            var current = this._currentRecord; //source.getCurrent();\r\n            if (!current) continue;\r\n\r\n            var obj = {};\r\n            obj[bind.field] = value;\r\n\r\n            if (control.getText && control.textName) {\r\n                obj[control.textName] = control.getText();\r\n            }\r\n\r\n            source.updateRow(current, obj);\r\n\r\n        }\r\n\r\n        var me = this;\r\n        setTimeout(function () {\r\n            me._doSetting = false;\r\n        }, 10);\r\n    }\r\n});\r\nmini.regClass(mini.DataBinding, \"databinding\");\n\r\nmini.DataSet = function () {\r\n    this._sources = {};\r\n    this._data = {};\r\n    this._links = [];\r\n\r\n    this._originals = {};\r\n\r\n    mini.DataSet.superclass.constructor.apply(this, arguments);\r\n}\r\nmini.extend(mini.DataSet, mini.Component, {\r\n    add: function (name, listControl) {\r\n        if (!name || !listControl) return;\r\n        this._sources[name] = listControl;\r\n\r\n        this._data[name] = [];\r\n\r\n        //自动创建新行id\r\n        listControl._set_autoCreateNewID(true);\r\n        listControl._set_originalIdField(listControl.getIdField());\r\n        listControl._set_clearOriginals(false);\r\n\r\n        listControl.on(\"addrow\", this.__OnRowChanged, this);\r\n        listControl.on(\"updaterow\", this.__OnRowChanged, this);\r\n        listControl.on(\"deleterow\", this.__OnRowChanged, this);\r\n        listControl.on(\"removerow\", this.__OnRowChanged, this);\r\n        listControl.on(\"preload\", this.__OnDataPreLoad, this);\r\n\r\n        listControl.on(\"selectionchanged\", this.__OnDataSelectionChanged, this);\r\n    },\r\n    addLink: function (name, childName, parentField) {\r\n        if (!name || !childName || !parentField) return;\r\n        if (!this._sources[name] || !this._sources[childName]) return;\r\n\r\n        var link = {\r\n            parentName: name,\r\n            childName: childName,\r\n            parentField: parentField\r\n        };\r\n        this._links.push(link);\r\n    },\r\n    clearData: function () {\r\n        this._data = {};\r\n        this._originals = {};\r\n        for (var name in this._sources) {\r\n            this._data = [];\r\n        }\r\n    },\r\n    getData: function () {\r\n        return this._data;\r\n    },\r\n    _getNameByListControl: function (listControl) {\r\n        for (var name in this._sources) {\r\n            var c = this._sources[name];\r\n            if (c == listControl) return name;\r\n        }\r\n    },\r\n    _getRecord: function (name, record, idField) {\r\n        var rows = this._data[name];\r\n        if (!rows) return false;\r\n        for (var i = 0, l = rows.length; i < l; i++) {\r\n            var row = rows[i];\r\n            if (row[idField] == record[idField]) return row;\r\n        }\r\n        return null;\r\n    },\r\n    /////////////////////////////////////\r\n    __OnRowChanged: function (e) {\r\n        var type = e.type;\r\n        var record = e.record;\r\n        var name = this._getNameByListControl(e.sender);\r\n\r\n        var oldRow = this._getRecord(name, record, e.sender.getIdField());\r\n\r\n        var rows = this._data[name];\r\n        if (oldRow) {\r\n            var rows = this._data[name];\r\n            rows.remove(oldRow);\r\n        }\r\n        //\r\n\r\n        //原来的\r\n        //        if (type == \"removerow\" && record._state == \"added\") {\r\n        //        } else {\r\n        //            rows.push(record);\r\n        //        }\r\n        \r\n        if (type == \"removerow\" && record._state == \"added\") {\r\n        } else {\r\n\r\n            if (type == \"beforeremove\" && record._state == \"added\") {       //@ 2017-7-12 \r\n            } else {\r\n                rows.push(record);\r\n            }\r\n        }\r\n\r\n        //        if (record._state == \"added\") {\r\n        //            if (!oldRow) {\r\n        //                rows.push(record);\r\n        //            }\r\n        //        }\r\n        //        if (record._state == \"modified\") {\r\n        //            rows.push(record);\r\n        //        }\r\n        //        if (record._state == \"removed\") {\r\n        //            rows.push(record);\r\n        //        }\r\n        //        if (record._state == \"deleted\") {\r\n        //            rows.push(record);\r\n        //        }\r\n\r\n        //this._originals[name] = e.sender._originals;\r\n        this._originals[name] = e.sender._get_originals();\r\n\r\n        //处理_parent\r\n        if (record._state == \"added\") {\r\n            var parentSource = this._getParentSource(e.sender);\r\n            if (parentSource) {\r\n                var current = parentSource.getSelected();\r\n                if (current) {\r\n                    record._parentId = current[parentSource.getIdField()];\r\n                } else {\r\n                    rows.remove(record);    //如果有父source，必须有current才能加入\r\n                }\r\n            }\r\n        }\r\n    },\r\n    __OnDataPreLoad: function (e) {\r\n        var source = e.sender;\r\n        var name = this._getNameByListControl(source);\r\n        var idField = e.sender.getIdField();\r\n\r\n        var rows = this._data[name];\r\n        var maps = {};\r\n        for (var i = 0, l = rows.length; i < l; i++) {\r\n            var row = rows[i];\r\n            maps[row[idField]] = row;\r\n        }\r\n\r\n        //修改的记录：对应ID为idField！\r\n        var ors = this._originals[name]\r\n\r\n        if (ors) {\r\n\r\n            //source._originals = ors;\r\n            source._set_originals(ors);\r\n        }\r\n\r\n        //数据更新: modified, delete, \r\n        var nowData = e.data || [];\r\n        for (var i = 0, l = nowData.length; i < l; i++) {\r\n            var row = nowData[i];\r\n            var old = maps[row[idField]];\r\n            if (old) {\r\n                delete old._uid;\r\n                mini.copyTo(row, old);\r\n            }\r\n        }\r\n\r\n        //added\r\n        var parentSource = this._getParentSource(source);\r\n\r\n        if (source.getPageIndex && source.getPageIndex() == 0) {\r\n            var adds = [];\r\n            for (var i = 0, l = rows.length; i < l; i++) {\r\n                var row = rows[i];\r\n                if (row._state == \"added\") {\r\n                    if (parentSource) {\r\n                        var current = parentSource.getSelected();\r\n                        if (current && current[parentSource.getIdField()] == row._parentId) {\r\n                            adds.push(row);\r\n                        }\r\n                    } else {\r\n                        adds.push(row);\r\n                    }\r\n                }\r\n            }\r\n            adds.reverse();\r\n            nowData.insertRange(0, adds);\r\n        }\r\n\r\n        //removed\r\n        var removes = [];\r\n        for (var i = nowData.length - 1; i >= 0; i--) {\r\n            var row = nowData[i];\r\n            var old = maps[row[idField]];\r\n            if (old && old._state == \"removed\") {\r\n                nowData.removeAt(i);\r\n                removes.push(old);\r\n            }\r\n        }\r\n\r\n\r\n        //如果source有前置source，则需要根据id来对应记录。。。\r\n\r\n    },\r\n    /////////////////////////////////////////\r\n    _getParentSource: function (source) {\r\n        var childName = this._getNameByListControl(source);\r\n        for (var i = 0, l = this._links.length; i < l; i++) {\r\n            var link = this._links[i];\r\n            if (link.childName == childName) {\r\n                return this._sources[link.parentName];\r\n            }\r\n        }\r\n    },\r\n    _getLinks: function (source) {\r\n        var name = this._getNameByListControl(source);\r\n        var links = [];\r\n        for (var i = 0, l = this._links.length; i < l; i++) {\r\n            var link = this._links[i];\r\n            if (link.parentName == name) {\r\n                links.push(link);\r\n            }\r\n        }\r\n        return links;\r\n    },\r\n    __OnDataSelectionChanged: function (e) {\r\n        var grid1 = e.sender;\r\n        var record = grid1.getSelected();\r\n\r\n        var links = this._getLinks(grid1);\r\n        for (var i = 0, l = links.length; i < l; i++) {\r\n            var link = links[i];\r\n            var grid2 = this._sources[link.childName];\r\n\r\n            if (record) {\r\n                var args = {};\r\n                args[link.parentField] = record[grid1.getIdField()];\r\n                grid2.load(args);\r\n            } else {\r\n                grid2.loadData([]);\r\n            }\r\n        }\r\n    }\r\n});\r\nmini.regClass(mini.DataSet, \"dataset\");\n/*\r\n\r\n1.getSource()           原始数据。数据结构：数组、树形。\r\n2.getList()             原始数据。数据结构：数组。（树形转为数组）\r\n3.getDataView()         数据视图。客户端排序、过滤后。数据结构：数组。\r\n4.getVisibleRows()      可视数据视图。在DataView基础上，增加了树折叠处理。\r\n\r\n*/\r\n\r\nif (typeof mini_doload == \"undefined\") {\r\n    mini_doload = function (e) {\r\n        \r\n        //e.result = mini.decode(e.text);\r\n\r\n    }\r\n}\r\n\r\nmini.DataSource = function () {\r\n    mini.DataSource.superclass.constructor.apply(this, arguments);\r\n    this._init();\r\n};\r\nmini.extend(mini.DataSource, mini.Component, {\r\n    idField: \"id\",\r\n    textField: \"text\",\r\n\r\n    loaded: false,\r\n\r\n    destroy: function () {\r\n        this.source = [];\r\n        this.dataview = [];\r\n        this.visibleRows = null;\r\n        this.list = null;\r\n\r\n        this._ids = {};\r\n        this._removeds = [];\r\n        if (this._clearOriginals) {\r\n            this._originals = {};\r\n        }\r\n        this._errors = {};\r\n\r\n        this._selected = null;\r\n        this._selecteds = [];\r\n        this._idSelecteds = {};\r\n\r\n        this._filterInfo = null;\r\n        this._sortInfo = null;\r\n\r\n        this.root = { _id: -1, _level: -1 };\r\n        this.viewNodes = null;\r\n        this.dataview = null;\r\n        this.visibleRows = null;\r\n        this.list = null;\r\n\r\n        mini.DataSource.superclass.destroy.call(this);\r\n    },\r\n\r\n    _originalIdField: \"_id\",\r\n    _clearOriginals: true,\r\n    _autoCreateNewID: false,\r\n    _init: function () {\r\n        this.source = [];\r\n        this.dataview = [];\r\n        this.visibleRows = null;\r\n        this.list = null;\r\n\r\n        this._ids = {};\r\n        this._removeds = [];\r\n        if (this._clearOriginals) {\r\n            this._originals = {};\r\n        }\r\n        this._errors = {};\r\n\r\n        this._selected = null;\r\n        this._selecteds = [];\r\n        this._idSelecteds = {};\r\n\r\n        this.__changeCount = 0;\r\n    },\r\n    getSource: function () {\r\n        return this.source;\r\n    },\r\n    getList: function () {\r\n        return this.source.clone();\r\n        //return this.source;\r\n    },\r\n    getDataView: function () {\r\n        return this.dataview.clone();\r\n        //return this.dataview;\r\n    },\r\n    getVisibleRows: function () {\r\n        //可以根据row的_visible，显示或隐藏\r\n        if (!this.visibleRows) {\r\n\r\n            this.visibleRows = this.getDataView().clone();\r\n        }\r\n        return this.visibleRows;\r\n    },\r\n    setData: function (data) {\r\n        this.loadData(data);\r\n    },\r\n    loadData: function (data) {\r\n        if (!mini.isArray(data)) data = [];\r\n        //        var e = {\r\n        //            data: data,\r\n        //            cancel: false\r\n        //        };\r\n        //        this.fire(\"beforeloaddata\", e);\r\n        //        if (e.cancel == true) return false;\r\n\r\n        this._init();\r\n        this._doLoadData(data);\r\n\r\n        this._dataChanged(\"loaddata\");\r\n        this.fire(\"loaddata\");\r\n        return true;\r\n    },\r\n    _doLoadData: function (data) {\r\n        this.source = data;\r\n        this.dataview = data;\r\n\r\n        var ds = this.source, ids = this._ids;\r\n        for (var i = 0, l = ds.length; i < l; i++) {\r\n            var record = ds[i];\r\n            //if (!record._id) record._id = mini.DataSource.RecordId++;\r\n            record._id = mini.DataSource.RecordId++;\r\n            ids[record._id] = record;\r\n\r\n            //历史问题\r\n            record._uid = record._id;\r\n        }\r\n    },\r\n    clearData: function () {\r\n        this._init();\r\n        this._dataChanged();\r\n        this.fire(\"cleardata\");\r\n    },\r\n    clear: function () {\r\n        this.clearData();\r\n    },\r\n    //updateRecord(record, field, value);\r\n    //updateRecord(record, keyValues);\r\n    updateRecord: function (record, field, value) {\r\n        if (mini.isNull(record)) return;\r\n        var getMap = mini._getMap, setMap = mini._setMap;\r\n\r\n        this.fire(\"beforeupdate\", { record: record });\r\n\r\n        if (typeof field == 'string') {\r\n            //var oldValue = record[field];\r\n            var oldValue = getMap(field, record); //record[p];\r\n            if (mini.isEquals(oldValue, value)) {\r\n                //this.endChange(false);\r\n                return false;\r\n            }\r\n            this.beginChange();\r\n            //record[field] = value;\r\n            setMap(field, value, record);\r\n            this._setModified(record, field, oldValue);\r\n            this.endChange();\r\n            //this._dataChanged();\r\n            //this.ValidateCell(record, field);\r\n        } else {\r\n            this.beginChange();\r\n            for (var p in field) {\r\n                var oldValue = getMap(p, record); //record[p];\r\n                var value = field[p];\r\n                if (mini.isEquals(oldValue, value)) continue;\r\n                //record[p] = value;\r\n                setMap(p, value, record);\r\n                this._setModified(record, p, oldValue);\r\n            }\r\n            this.endChange(\"update\");\r\n            //this.ValidateRecord(record);\r\n        }\r\n\r\n        this.fire(\"update\", { record: record });\r\n    },\r\n    deleteRecord: function (record) {\r\n        this._setDeleted(record);\r\n\r\n        this._dataChanged();\r\n        this.fire(\"delete\", { record: record });\r\n    },\r\n    getby_id: function (id) {\r\n        id = typeof id == \"object\" ? id._id : id;\r\n        return this._ids[id];\r\n    },\r\n    getbyId: function (id) {\r\n        var t = typeof id;\r\n        if (t == \"number\") return this.getAt(id);\r\n        if (typeof id == \"object\") {\r\n            if (this.getby_id(id)) return id;\r\n            id = id[this.idField];\r\n        }\r\n        //!!!\r\n        id = String(id);\r\n\r\n        var idMap = this.ids;\r\n        if (!idMap) {\r\n            idMap = this.ids = {};\r\n            var data = this.getList();\r\n            for (var i = 0, l = data.length; i < l; i++) {\r\n                var o = data[i];\r\n                var oid = o[this.idField];\r\n                if (!mini.isNull(oid)) idMap[oid] = o;\r\n            }\r\n        }\r\n        return idMap[id];\r\n    },\r\n\r\n    //    getbyId: function (id) {\r\n    //        var t = typeof id;\r\n    //        if (t == \"number\") return this.getAt(id);\r\n    //        if (typeof id == \"object\") {\r\n    //            if (this.getby_id(id)) return id;\r\n    //            id = id[this.idField];\r\n    //        }\r\n    //        var data = this.getList();\r\n    //        id = String(id);\r\n    //        for (var i = 0, l = data.length; i < l; i++) {\r\n    //            var o = data[i];\r\n    //            var _id = !mini.isNull(o[this.idField]) ? String(o[this.idField]) : null;\r\n    //            if (_id == id) return o;\r\n    //        }\r\n    //        return null;\r\n    //    },\r\n    getsByIds: function (value) {\r\n        if (mini.isNull(value)) value = \"\";\r\n        value = String(value);\r\n        var nodes = [];\r\n        var ids = String(value).split(\",\");\r\n        for (var i = 0, l = ids.length; i < l; i++) {\r\n            var node = this.getbyId(ids[i]);\r\n            if (node) nodes.push(node);\r\n        }\r\n        return nodes;\r\n    },\r\n    getRecord: function (id) {\r\n        if (typeof id == 'object') return id;\r\n        return this.getRow(id);\r\n    },\r\n    getRow: function (index) {\r\n        var t = typeof index;\r\n        if (t == \"string\") return this.getbyId(index);\r\n        else if (t == \"number\") return this.getAt(index);\r\n        else if (t == \"object\") return index;\r\n    },\r\n    delimiter: \",\",\r\n    getValueAndText: function (records, delimiter) {\r\n        if (mini.isNull(records)) records = [];\r\n        delimiter = delimiter || this.delimiter;\r\n\r\n        if (typeof records == \"string\" || typeof records == \"number\") {\r\n            records = this.getsByIds(records);\r\n        } else if (!mini.isArray(records)) {\r\n            records = [records];\r\n        }\r\n        var values = [];\r\n        var texts = [];\r\n        for (var i = 0, l = records.length; i < l; i++) {\r\n            var record = records[i];\r\n            if (record) {\r\n                values.push(this.getItemValue(record));\r\n                texts.push(this.getItemText(record));\r\n            }\r\n        }\r\n\r\n        return [values.join(delimiter), texts.join(delimiter)];\r\n    },\r\n    getItemValue: function (item) {\r\n        if (!item) return \"\";\r\n        var t = mini._getMap(this.idField, item);\r\n        return mini.isNull(t) ? '' : String(t);\r\n    },\r\n    getItemText: function (item) {\r\n        if (!item) return \"\";\r\n        //var t = item[this.textField];\r\n        var t = mini._getMap(this.textField, item);\r\n        return mini.isNull(t) ? '' : String(t);\r\n    },\r\n    ////////////////////////////\r\n    //getOriginalValue: function(record, field)\r\n    isModified: function (reocrd, field) {\r\n        var or = this._originals[reocrd[this._originalIdField]];\r\n        if (!or) return false;\r\n        if (mini.isNull(field)) return false;\r\n        return or.hasOwnProperty(field);\r\n    },\r\n    hasRecord: function (record) {\r\n        return !!this.getby_id(record);\r\n    },\r\n    findRecords: function (property, value) {\r\n        var ifFn = typeof property == \"function\";\r\n        var fn = property;\r\n        var scope = value || this;\r\n        var data = this.source;\r\n        var records = [];\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var o = data[i];\r\n            if (ifFn) {\r\n                var ret = fn.call(scope, o);\r\n                if (ret == true) {\r\n                    records[records.length] = o;\r\n                }\r\n                if (ret === 1) break;\r\n            } else {\r\n                if (o[property] == value) {\r\n                    records[records.length] = o;\r\n                }\r\n\r\n\r\n            }\r\n        }\r\n        return records;\r\n    },\r\n    findRecord: function (property, value) {\r\n        var records = this.findRecords(property, value);\r\n        return records[0];\r\n    },\r\n    each: function (fn, scope) {\r\n        var data = this.getDataView().clone();\r\n        scope = scope || this;\r\n        mini.forEach(data, fn, scope);\r\n    },\r\n    getCount: function () {\r\n        return this.getDataView().length;\r\n        //return this.dataview.length;\r\n    },\r\n    setIdField: function (value) {\r\n        this.idField = value;\r\n    },\r\n    setTextField: function (value) {\r\n        this.textField = value;\r\n    },\r\n    /////////////////////////////////////////////////////\r\n    __changeCount: 0,\r\n    beginChange: function () {\r\n        this.__changeCount++;\r\n    },\r\n    endChange: function (action, raise) {\r\n        this.__changeCount--;\r\n        if (this.__changeCount < 0) this.__changeCount = 0;\r\n        if ((raise !== false && this.__changeCount == 0) || raise == true) {\r\n            this.__changeCount = 0;\r\n            this._dataChanged(action);\r\n        }\r\n    },\r\n    _dataChanged: function (action) {\r\n        this.ids = null;                //!!!\r\n        this.visibleRows = null;\r\n        this.list = null;\r\n        if (this.__changeCount == 0) {\r\n            this.fire(\"datachanged\");\r\n        }\r\n    },\r\n    /////////////////////////////////////////////////////\r\n    //记录状态修改\r\n    _setAdded: function (record) {\r\n        record._id = mini.DataSource.RecordId++;\r\n\r\n        //自动创建idField\r\n        if (this._autoCreateNewID && !record[this.idField]) {\r\n            record[this.idField] = UUID();\r\n        }\r\n\r\n        //历史问题\r\n        record._uid = record._id;\r\n\r\n        //if (!record._id) record._id = mini.DataSource.RecordId++;\r\n        record._state = \"added\";\r\n        this._ids[record._id] = record;\r\n        delete this._originals[record[this._originalIdField]];\r\n    },\r\n    _setModified: function (record, field, oldValue) {\r\n        if (record._state != \"added\"\r\n            && record._state != \"deleted\"\r\n            && record._state != \"removed\"\r\n        ) {\r\n            record._state = \"modified\";\r\n            var or = this._getOriginal(record);\r\n            if (!or.hasOwnProperty(field)) {\r\n                or[field] = oldValue;\r\n            }\r\n        }\r\n    },\r\n    _setDeleted: function (record) {\r\n        if (record._state != \"added\"\r\n            && record._state != \"deleted\"\r\n            && record._state != \"removed\"\r\n        ) {\r\n            record._state = \"deleted\";\r\n        }\r\n    },\r\n    _setRemoved: function (record) {\r\n        delete this._ids[record._id];\r\n        if (record._state != \"added\" && record._state != \"removed\") {\r\n            record._state = \"removed\";\r\n            delete this._originals[record[this._originalIdField]];\r\n            this._removeds.push(record);\r\n        }\r\n    },\r\n    _getOriginal: function (record) {\r\n        var rid = record[this._originalIdField];\r\n        var or = this._originals[rid];\r\n        if (!or) {\r\n            or = this._originals[rid] = {};\r\n        }\r\n        return or;\r\n    },\r\n    /////////////////////////////////////////////////////    \r\n    _selected: null,    //current\r\n    _selecteds: [],\r\n    _idSelecteds: null,\r\n    multiSelect: false,\r\n    isSelected: function (id) {\r\n        if (!id) return false;\r\n        if (typeof id != \"string\") id = id._id;\r\n        return !!this._idSelecteds[id];\r\n    },\r\n    setSelected: function (record) {         //@@不开放\r\n        record = this.getby_id(record);\r\n        var selected = this.getSelected();\r\n        if (selected != record) {\r\n            this._selected = record;\r\n            if (record) {\r\n                this.select(record);\r\n            } else {\r\n                this.deselect(this.getSelected());\r\n            }\r\n            //this.fire(\"currentchanged\"); //选择、修改、删除，都是currentchanged\r\n            this._OnCurrentChanged(record);\r\n        }\r\n    },\r\n    getSelected: function () {\r\n        if (this.isSelected(this._selected)) return this._selected;\r\n        return this._selecteds[0];\r\n    },\r\n    setCurrent: function (record) {\r\n        this.setSelected(record);\r\n    },\r\n    getCurrent: function () {\r\n        return this.getSelected();\r\n    },\r\n    getSelecteds: function () {\r\n        return this._selecteds.clone();\r\n    },\r\n    select: function (record, fireEvent) {\r\n        if (mini.isNull(record)) return;\r\n        this.selects([record], fireEvent);\r\n    },\r\n    deselect: function (record, fireEvent) {\r\n        if (mini.isNull(record)) return;\r\n\r\n        this.deselects([record], fireEvent);\r\n    },\r\n    selectAll: function (fireEvent) {\r\n        this.selects(this.getList(), fireEvent);\r\n    },\r\n    deselectAll: function (fireEvent) {\r\n        this.deselects(this.getSelecteds(), fireEvent);\r\n    },\r\n    _fireSelect: function (record, name) {\r\n        var e = { record: record, cancel: false };\r\n        this.fire(name, e);\r\n        return !e.cancel;\r\n    },\r\n    selects: function (records, fireEvent) {\r\n        if (!mini.isArray(records)) return;\r\n        records = records.clone();\r\n\r\n        //single select\r\n        if (this.multiSelect == false) {\r\n            this.deselects(this.getSelecteds());\r\n            if (records.length > 0) records.length = 1;\r\n            this._selecteds = [];\r\n            this._idSelecteds = {};\r\n        }\r\n\r\n        var _records = [];\r\n        for (var i = 0, l = records.length; i < l; i++) {\r\n            var record = this.getbyId(records[i]);\r\n            //var record = records[i];\r\n            if (!record) continue;\r\n            if (!this.isSelected(record)) {\r\n\r\n                if (fireEvent !== false) {\r\n\r\n                    if (!this._fireSelect(record, 'beforeselect')) continue;\r\n                }\r\n\r\n                this._selecteds.push(record);\r\n                this._idSelecteds[record._id] = record;\r\n                _records.push(record);\r\n                if (fireEvent !== false) {\r\n                    this.fire(\"select\", { record: record });\r\n                }\r\n            }\r\n        }\r\n        this._OnSelectionChanged(records, true, _records, fireEvent);\r\n    },\r\n    deselects: function (records, fireEvent) {\r\n\r\n        if (!mini.isArray(records)) return;\r\n        records = records.clone();\r\n        var _records = [];\r\n        for (var i = records.length - 1; i >= 0; i--) {\r\n            var record = this.getbyId(records[i]);\r\n            if (!record) continue;\r\n            if (this.isSelected(record)) {\r\n                if (fireEvent !== false) {\r\n                    if (!this._fireSelect(record, 'beforedeselect')) continue;\r\n                }\r\n\r\n                //this._selecteds.remove(record);   //优化性能\r\n                delete this._idSelecteds[record._id];\r\n                _records.push(record);\r\n\r\n                //                if (fireEvent !== false) {\r\n                //                    this.fire(\"deselect\", { record: record });\r\n                //                }\r\n            }\r\n        }\r\n        //_selecteds\r\n        this._selecteds = [];\r\n        var _idSelecteds = this._idSelecteds;\r\n        for (var i in _idSelecteds) {\r\n            var o = _idSelecteds[i];\r\n            if (o._id) this._selecteds.push(o);\r\n        }\r\n\r\n        //deselect在这里激发\r\n        for (var i = records.length - 1; i >= 0; i--) {\r\n            var record = this.getbyId(records[i]);\r\n            if (!record) continue;\r\n\r\n            if (fireEvent !== false) {\r\n                this.fire(\"deselect\", { record: record });\r\n            }\r\n\r\n        }\r\n        this._OnSelectionChanged(records, false, _records, fireEvent);\r\n    },\r\n    _OnSelectionChanged: function (records, select, _records, fireEvent) {\r\n        var e = {\r\n            fireEvent: fireEvent,\r\n            records: records,\r\n            select: select,\r\n            selected: this.getSelected(),\r\n            selecteds: this.getSelecteds(),\r\n            _records: _records\r\n        };\r\n        this.fire(\"SelectionChanged\", e);\r\n\r\n        var current = this._current;\r\n        var now = this.getCurrent();\r\n        if (current != now) {\r\n            this._current = now;\r\n            this._OnCurrentChanged(now);\r\n        }\r\n    },\r\n    _OnCurrentChanged: function (record) {\r\n        if (this._currentTimer) {\r\n            clearTimeout(this._currentTimer);\r\n        }\r\n        var me = this;\r\n        this._currentTimer = setTimeout(function () {\r\n            me._currentTimer = null;\r\n            var e = { record: record };\r\n            me.fire(\"CurrentChanged\", e);\r\n        }, 30);\r\n    },\r\n    _checkSelecteds: function () {\r\n        for (var i = this._selecteds.length - 1; i >= 0; i--) {\r\n            var record = this._selecteds[i];\r\n            var r = this.getby_id(record._id);\r\n            if (!r) {\r\n                this._selecteds.removeAt(i);\r\n                delete this._idSelecteds[record._id];\r\n            }\r\n        }\r\n        if (this._selected && this.getby_id(this._selected._id) == null) {\r\n            this._selected = null;\r\n        }\r\n    },\r\n    setMultiSelect: function (value) {\r\n        if (this.multiSelect != value) {\r\n            this.multiSelect = value;\r\n            if (value == false) {\r\n                //...\r\n            }\r\n        }\r\n    },\r\n    getMultiSelect: function () {\r\n        return this.multiSelect;\r\n    },\r\n    selectPrev: function () {\r\n        var record = this.getSelected();\r\n        if (!record) {\r\n            record = this.getAt(0);\r\n        } else {\r\n            var index = this.indexOf(record);\r\n            record = this.getAt(index - 1);\r\n        }\r\n        if (record) {\r\n            this.deselectAll();\r\n            this.select(record);\r\n            this.setCurrent(record);\r\n        }\r\n    },\r\n    selectNext: function () {\r\n        var record = this.getSelected();\r\n        if (!record) {\r\n            record = this.getAt(0);\r\n        } else {\r\n            var index = this.indexOf(record);\r\n            record = this.getAt(index + 1);\r\n        }\r\n        if (record) {\r\n            this.deselectAll();\r\n            this.select(record);\r\n            this.setCurrent(record);\r\n        }\r\n    },\r\n    selectFirst: function () {\r\n        var record = this.getAt(0);\r\n        if (record) {\r\n            this.deselectAll();\r\n            this.select(record);\r\n            this.setCurrent(record);\r\n        }\r\n    },\r\n    selectLast: function () {\r\n        var data = this.getVisibleRows();\r\n        var record = this.getAt(data.length - 1);\r\n        if (record) {\r\n            this.deselectAll();\r\n            this.select(record);\r\n            this.setCurrent(record);\r\n        }\r\n    },\r\n    getSelectedsId: function (delimiter) {\r\n        var nodes = this.getSelecteds();\r\n        var vts = this.getValueAndText(nodes, delimiter);\r\n        return vts[0];\r\n    },\r\n    getSelectedsText: function (delimiter) {\r\n        var nodes = this.getSelecteds();\r\n        var vts = this.getValueAndText(nodes, delimiter);\r\n        return vts[1];\r\n    },\r\n    ////////////////////////////////////////    \r\n    _filterInfo: null,\r\n    _sortInfo: null,\r\n    filter: function (fn, scope) {\r\n\r\n        if (typeof fn != \"function\") return;\r\n        scope = scope || this;\r\n\r\n        this._filterInfo = [fn, scope];\r\n        //alert(this.getVisibleRows().length);\r\n        this._doFilter();\r\n        //alert(this.getVisibleRows().length);\r\n        this._doSort();\r\n\r\n        this._dataChanged();\r\n\r\n        this.fire(\"filter\");\r\n    },\r\n    clearFilter: function () {\r\n        if (!this._filterInfo) return;\r\n        this._filterInfo = null;\r\n        this._doFilter();\r\n        this._doSort();\r\n        this._dataChanged();\r\n        this.fire(\"filter\");\r\n    },\r\n    sort: function (fn, scope, reverse) {\r\n        if (typeof fn != \"function\") return;\r\n        scope = scope || this;\r\n        this._sortInfo = [fn, scope, reverse];\r\n        this._doSort();\r\n        this._dataChanged();\r\n        this.fire(\"sort\");\r\n    },\r\n    clearSort: function () {\r\n        this._sortInfo = null;\r\n\r\n        this.sortField = this.sortOrder = \"\";\r\n\r\n        this._doFilter();\r\n        this._dataChanged();\r\n\r\n        if (this.sortMode == \"server\") {\r\n            var params = this.getLoadParams();\r\n            params.sortField = \"\";\r\n            params.sortOrder = \"\";\r\n            //params.pageIndex = this.pageIndex;\r\n            this.load(params);\r\n        } else {\r\n\r\n        }\r\n\r\n        this.fire(\"filter\");\r\n    },\r\n\r\n    _sortMulti: function (fields) {\r\n        //...\r\n    },\r\n\r\n    _doClientSortField: function (sortField, sortOrder, dataType) {\r\n\r\n        //        if (!dataType) {\r\n        //            var first = this.getAt(0);\r\n        //            if (first) {\r\n        //                var value = first[sortField];\r\n\r\n        //                if (mini.isDate(value)) {\r\n        //                    dataType = \"date\";\r\n        //                } else if (mini.isNumber(value)) {\r\n        //                    dataType = \"float\";\r\n        //                } else {\r\n        //                    dataType = \"string\";\r\n        //                }\r\n        //            }\r\n        //        }\r\n\r\n        var sortFn = this._getSortFnByField(sortField, dataType);\r\n        if (!sortFn) return;\r\n\r\n        //        this.sortField = sortField;\r\n        //        this.sortOrder = sortOrder;\r\n\r\n        //debugger\r\n        var reverse = sortOrder == \"desc\";\r\n        this.sort(sortFn, this, reverse);\r\n    },\r\n    _getSortFnByField: function (field, sortType) {\r\n        //默认逻辑：从小到大\r\n\r\n        if (!field) return null;\r\n        var sortFn = null;\r\n        var typeFn = mini.sortTypes[sortType];\r\n        if (!typeFn) typeFn = mini.sortTypes[\"string\"];\r\n\r\n        function sortBy(a, b) {\r\n\r\n            var a1 = mini._getMap(field, a), b1 = mini._getMap(field, b);\r\n\r\n            var nullA = mini.isNull(a1) || a1 === \"\";\r\n            var nullB = mini.isNull(b1) || b1 === \"\";\r\n            if (nullA) return 0;\r\n            if (nullB) return 1;\r\n\r\n            if (sortType == \"chinese\") {\r\n                return a1.localeCompare(b1, \"zh\");\r\n            }\r\n\r\n            var v1 = typeFn(a1);\r\n            var v2 = typeFn(b1);\r\n            if (v1 > v2) return 1;      //从小到大：前面比后面小，则互换\r\n            else return 0;\r\n            //            else if (v1 == v2) return 0;\r\n            //            else return 0;\r\n        }\r\n\r\n        sortFn = sortBy;\r\n        return sortFn;\r\n    },\r\n    ////////////////////////////////////////////////////////////////////\r\n    // Pager Load\r\n    ////////////////////////////////////////////////////////////////////\r\n\r\n\r\n    ajaxOptions: null,\r\n    autoLoad: false,\r\n    url: \"\",\r\n\r\n    pageSize: 10,\r\n    pageIndex: 0,\r\n    totalCount: 0,\r\n    totalPage: 0,\r\n\r\n    sortField: \"\",\r\n    sortOrder: \"\",\r\n\r\n    loadParams: null,\r\n    getLoadParams: function () {\r\n        return this.loadParams || {};\r\n    },\r\n\r\n    //serverSorting: false,\r\n    sortMode: \"server\", //server,client,none\r\n\r\n    pageIndexField: \"pageIndex\",\r\n    pageSizeField: \"pageSize\",\r\n    sortFieldField: \"sortField\",\r\n    sortOrderField: \"sortOrder\",\r\n    totalField: \"total\",\r\n    dataField: \"data\",\r\n\r\n    startField: '',     //start\r\n    limitField: '',     //limit\r\n\r\n    errorField: 'error',\r\n    errorMsgField: 'errorMsg',\r\n    stackTraceField: 'stackTrace',\r\n\r\n    load: function (params, success, error, complete) {\r\n        if (typeof params == \"string\") {\r\n            this.setUrl(params);\r\n            return;\r\n        }\r\n\r\n        if (this._loadTimer) clearTimeout(this._loadTimer);\r\n        this.loadParams = params || {};\r\n        if (!mini.isNumber(this.loadParams.pageIndex)) this.loadParams.pageIndex = 0;\r\n\r\n        if (this._xhr) {\r\n            this._xhr.abort();\r\n        }\r\n        if (this.ajaxAsync && mini_ajaxAsyncInvoke) {  //mini_ajaxAsyncInvoke = false，不会异步调用_doLoadAjax方法。\r\n            var me = this;\r\n            this._loadTimer = setTimeout(function () {\r\n                me._doLoadAjax(me.loadParams, success, error, complete);\r\n                me._loadTimer = null;\r\n            }, 1);\r\n        } else {\r\n            this._doLoadAjax(this.loadParams, success, error, complete);\r\n        }\r\n    },\r\n    reload: function (success, error, complete) {\r\n\r\n        this.load(this.loadParams, success, error, complete);\r\n    },\r\n    gotoPage: function (index, size) {\r\n        var params = this.loadParams || {};\r\n        if (mini.isNumber(index)) params.pageIndex = index;\r\n        if (mini.isNumber(size)) params.pageSize = size;\r\n        this.load(params);\r\n    },\r\n\r\n    sortBy: function (sortField, sortOrder) {\r\n        this.sortField = sortField;\r\n        this.sortOrder = sortOrder == \"asc\" ? \"asc\" : \"desc\";\r\n        if (this.sortMode == \"server\") {\r\n            var params = this.getLoadParams();\r\n            params.sortField = sortField;\r\n            params.sortOrder = sortOrder;\r\n            params.pageIndex = this.pageIndex;\r\n            this.load(params);\r\n        } else {\r\n            //alert(\"client sort\");\r\n            //this._doClientSort(sortField, sortOrder);\r\n        }\r\n    },\r\n\r\n    setSortField: function (value) {\r\n        this.sortField = value;\r\n        if (this.sortMode == \"server\") {\r\n            var params = this.getLoadParams();\r\n            params.sortField = value;\r\n        }\r\n    },\r\n    setSortOrder: function (value) {\r\n        this.sortOrder = value;\r\n        if (this.sortMode == \"server\") {\r\n            var params = this.getLoadParams();\r\n            params.sortOrder = value;\r\n        }\r\n    },\r\n\r\n    checkSelectOnLoad: true,    //重新加载，是否保持原选中记录状态\r\n    selectOnLoad: false,\r\n\r\n    ajaxData: null,\r\n    ajaxAsync: true,        //表格异步，tree、combobox同步\r\n    ajaxType: '',           //get|post    \r\n    //    ajaxDataType: \"text\",\r\n    //    ajaxContentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\r\n    _doLoadAjax: function (params, success, errorFn, complete, _successHandler) {\r\n\r\n        params = params || {};\r\n        if (mini.isNull(params.pageIndex)) params.pageIndex = this.pageIndex;\r\n        if (mini.isNull(params.pageSize)) params.pageSize = this.pageSize;\r\n\r\n        if (params.sortField) this.sortField = params.sortField;\r\n        if (params.sortOrder) this.sortOrder = params.sortOrder;\r\n        params.sortField = this.sortField;\r\n        params.sortOrder = this.sortOrder;\r\n\r\n        this.loadParams = params;\r\n\r\n        var url = this._evalUrl();\r\n        var type = this._evalType(url);\r\n\r\n        var obj = mini._evalAjaxData(this.ajaxData, this);\r\n        //mini.copyTo(params, obj);\r\n        jQuery.extend(true, params, obj);\r\n\r\n        var e = {               //options\r\n            url: url,\r\n            async: this.ajaxAsync,\r\n            type: type,\r\n            data: params,\r\n            params: params,\r\n            cache: false,\r\n            cancel: false\r\n        };\r\n\r\n        //ajaxOptions：async, type, dateType, contentType等都能在beforeload前修改。                \r\n\r\n        //mini.copyTo(e, this.ajaxOptions);\r\n        jQuery.extend(true, e, this.ajaxOptions);\r\n\r\n        this._OnBeforeLoad(e);\r\n        if (e.cancel == true) {\r\n            params.pageIndex = this.getPageIndex();\r\n            params.pageSize = this.getPageSize();\r\n            return;\r\n        }\r\n\r\n        //历史遗留问题：兼容e.params参数\r\n        if (e.data != e.params && e.params != params) {\r\n            e.data = e.params;\r\n        }\r\n\r\n        if (e.url != url && e.type == type) {\r\n            e.type = this._evalType(e.url);\r\n        }\r\n\r\n        //处理自定义field\r\n        var o = {};\r\n        o[this.pageIndexField] = params.pageIndex;\r\n        o[this.pageSizeField] = params.pageSize;\r\n        if (params.sortField) o[this.sortFieldField] = params.sortField;\r\n        if (params.sortOrder) o[this.sortOrderField] = params.sortOrder;\r\n\r\n        if (this.startField && this.limitField) {\r\n            o[this.startField] = params.pageIndex * params.pageSize;\r\n            o[this.limitField] = params.pageSize;\r\n        }\r\n\r\n        //        delete params.pageIndex;\r\n        //        delete params.pageSize;\r\n        //        delete params.sortField;\r\n        //        delete params.sortOrder;\r\n        //mini.copyTo(params, o);\r\n        //mini.copyTo(e.data, o);\r\n        jQuery.extend(true, params, o);\r\n        jQuery.extend(true, e.data, o);\r\n\r\n\r\n        if (this.sortMode == 'client') {\r\n            params[this.sortFieldField] = \"\";\r\n            params[this.sortOrderField] = \"\";\r\n        }\r\n\r\n        //保存记录值\r\n        //        var selected = this.getSelected();\r\n        //        this._selectedValue = selected ? selected[this.idField] : null;\r\n        //        if (mini.isNumber(this._selectedValue)) this._selectedValue = String(this._selectedValue);\r\n\r\n        //保存“当前选中”\r\n        var selected = this.getSelected();\r\n        this._currentSelectValue = selected ? selected[this.idField] : null; ;\r\n        if (mini.isNumber(this._currentSelectValue)) this._currentSelectValue = String(this._currentSelectValue);\r\n\r\n        //保存“所有选中”\r\n        var selecteds = this.getSelecteds();\r\n        var _selectsArr = [];\r\n        for (var i = 0, l = selecteds.length; i < l; i++) {\r\n            var id = selecteds[i][this.idField];\r\n            if (!mini.isNull(id)) id = String(id);\r\n            _selectsArr.push(id)\r\n        }\r\n        this._selectedValue = _selectsArr.length == 0 ? null : _selectsArr;\r\n        if (mini.isNumber(this._selectedValue)) this._selectedValue = String(this._selectedValue);\r\n\r\n\r\n        var me = this;\r\n        me._resultObject = null;\r\n        /*\r\n        e.textStatus\r\n        success     交互成功\r\n        error       网络交互失败：404,500\r\n        timeout     交互超时\r\n        abort       交互终止\r\n        servererror 网络交互成功，返回json，但是业务逻辑错误\r\n        e.errorCode     服务端错误码\r\n        e.errorMsg      错误描述信息\r\n        e.stackTrace    错误定位信息\r\n        */\r\n\r\n        var async = e.async;\r\n        mini.copyTo(e, {\r\n            success: function (text, textStatus, xhr) {\r\n\r\n                //return;\r\n                if (!text || text == \"null\") {\r\n                    text = '{ total: 0, data: [] }';\r\n                }\r\n\r\n                delete e.params;\r\n                var obj = { text: text, result: null, sender: me, options: e, xhr: xhr };\r\n                var result = null;\r\n                try {\r\n                    mini_doload(obj);\r\n                    result = obj.result;\r\n                    if (!result) {\r\n                        result = mini.decode(text);\r\n                    }\r\n                } catch (ex) {\r\n                    if (mini_debugger == true) {\r\n                        alert(url + \"\\n json is error.\");\r\n                    }\r\n                }\r\n\r\n                if (result && !mini.isArray(result)) {\r\n                    result.total = parseInt(mini._getMap(me.totalField, result)); //result[me.totalField];\r\n                    result.data = mini._getMap(me.dataField, result); //result[me.dataField];\r\n                } else {\r\n                    if (result == null) {\r\n                        result = {};\r\n                        result.data = [];\r\n                        result.total = 0;\r\n                    } else if (mini.isArray(result)) {\r\n                        var r = {};\r\n                        r.data = result;\r\n                        r.total = result.length;\r\n                        result = r;\r\n                    }\r\n                }\r\n                if (!result.data) result.data = [];\r\n                if (!result.total) result.total = 0;\r\n                me._resultObject = result;\r\n\r\n                if (!mini.isArray(result.data)) {\r\n                    result.data = [result.data];\r\n                }\r\n\r\n                var ex = {\r\n                    xhr: xhr,\r\n                    text: text,\r\n                    textStatus: textStatus,\r\n                    result: result,\r\n                    total: result.total,\r\n                    data: result.data.clone(),\r\n\r\n                    pageIndex: params[me.pageIndexField],\r\n                    pageSize: params[me.pageSizeField]\r\n                };\r\n\r\n\r\n                var error = mini._getMap(me.errorField, result);\r\n                var errorMsg = mini._getMap(me.errorMsgField, result);\r\n                var stackTrace = mini._getMap(me.stackTraceField, result);\r\n\r\n                if (mini.isNumber(error) && error != 0 || error === false) {\r\n                    //server error\r\n                    ex.textStatus = \"servererror\";\r\n                    ex.errorCode = error;\r\n                    ex.stackTrace = stackTrace || \"\";\r\n                    ex.errorMsg = errorMsg || \"\";\r\n                    if (mini_debugger == true) {\r\n                        alert(url + \"\\n\" + ex.textStatus + \"\\n\" + ex.errorMsg + \"\\n\" + ex.stackTrace);\r\n                    }\r\n                    me.fire(\"loaderror\", ex);\r\n                    if (errorFn) errorFn.call(me, ex);\r\n                } else {\r\n\r\n                    //if (ex.total >= 0) {\r\n                    //当页码大于0，数据为空\r\n                    if (ex.pageIndex > 0 && ex.data.length == 0) {\r\n                        //me.reload();\r\n                        me.gotoPage(ex.pageIndex - 1);\r\n                        return;\r\n                    }\r\n                    //}\r\n\r\n                    if (_successHandler) {\r\n                        _successHandler(ex);\r\n                    } else {\r\n\r\n\r\n\r\n                        //pager\r\n                        me.pageIndex = ex.pageIndex;\r\n                        me.pageSize = ex.pageSize;\r\n                        me.setTotalCount(ex.total);\r\n\r\n                        //success\r\n                        me._OnPreLoad(ex);\r\n\r\n                        me.loaded = true;\r\n\r\n                        var sss = new Date();\r\n                        //data\r\n                        me.setData(ex.data);\r\n                        //alert(new Date() - sss);\r\n                        //                        //checkSelectOnLoad\r\n                        //                        if (me._selectedValue && me.checkSelectOnLoad) {\r\n                        //                            var o = me.getbyId(me._selectedValue);\r\n                        //                            if (o) {\r\n                        //                                me.select(o);\r\n                        //                            }\r\n                        //                        }\r\n                        //checkSelectOnLoad\r\n                        //将之前选中的记录，在加载后，判断并重新选中，达到保持选中的效果\r\n                        if (me._selectedValue && me.checkSelectOnLoad) {\r\n                            var selects = [];\r\n                            var _selects = me._selectedValue;\r\n                            if (_selects.length > 0) {\r\n                                for (var i = 0, l = _selects.length; i < l; i++) {\r\n\r\n                                    var o = me.getbyId(_selects[i]);\r\n                                    if (o) {\r\n                                        selects.push(o);\r\n                                    }\r\n                                }\r\n\r\n                                // var o = me.getbyId(me._selectedValue);\r\n                                //                            if (o) {\r\n                                //                                me.select(o);\r\n                                //\r\n                                //                            }\r\n                                if (selects.length) me.selects(selects);\r\n\r\n                                me._selected = me.getbyId(me._currentSelectValue);\r\n\r\n                            }\r\n                        }\r\n\r\n\r\n\r\n                        //selectOnLoad                    \r\n                        if (me.getSelected() == null && me.selectOnLoad && me.getDataView().length > 0) {\r\n                            me.select(0);\r\n                        }\r\n                        me.fire(\"load\", ex);\r\n\r\n                        if (success) {\r\n                            if (async) {\r\n                                setTimeout(function () {\r\n                                    success.call(me, ex);\r\n                                }, 20);\r\n                            } else {\r\n                                success.call(me, ex);\r\n                            }\r\n                        }\r\n\r\n\r\n\r\n                    }\r\n                }\r\n            },\r\n            error: function (xhr, textStatus, errorThrown) {\r\n                if (textStatus == \"abort\") return;\r\n\r\n                var ex = {\r\n                    xhr: xhr,\r\n                    text: xhr.responseText,\r\n                    textStatus: textStatus\r\n                };\r\n                ex.errorMsg = xhr.responseText;\r\n                ex.errorCode = xhr.status;\r\n\r\n\r\n                if (mini_debugger == true) {\r\n                    alert(url + \"\\n\" + ex.errorCode + \"\\n\" + ex.errorMsg);\r\n                }\r\n\r\n                me.fire(\"loaderror\", ex);\r\n                if (errorFn) errorFn.call(me, ex);\r\n            },\r\n            complete: function (xhr, textStatus) {\r\n                var ex = {\r\n                    xhr: xhr,\r\n                    text: xhr.responseText,\r\n                    textStatus: textStatus\r\n                };\r\n                me.fire(\"loadcomplete\", ex);\r\n                if (complete) complete.call(me, ex);\r\n                me._xhr = null;\r\n            }\r\n        });\r\n        if (this._xhr) {\r\n            //this._xhr.abort();\r\n        }\r\n        this._xhr = mini.ajax(e);\r\n    },\r\n    _OnBeforeLoad: function (e) {\r\n        this.fire(\"beforeload\", e);\r\n    },\r\n    _OnPreLoad: function (e) {\r\n        this.fire(\"preload\", e); //加载前夕，处理更复杂数据\r\n    },\r\n    _evalUrl: function () {\r\n        var url = this.url;\r\n        if (typeof url == \"function\") {\r\n            url = url();\r\n        } else {\r\n            try {\r\n                url = window[\"ev\" + \"al\"](url);\r\n            } catch (ex) {\r\n                url = this.url;\r\n            }\r\n            if (!url) {\r\n                url = this.url;\r\n            }\r\n        }\r\n        return url;\r\n    },\r\n    _evalType: function (url) {\r\n        var type = this.ajaxType;\r\n        if (!type) {\r\n            type = 'post';\r\n            if (url) {\r\n                if (url.indexOf(\".txt\") != -1 || url.indexOf(\".json\") != -1) {\r\n                    type = \"get\";\r\n                }\r\n            } else {\r\n                type = \"get\";\r\n            }\r\n        }\r\n        return type;\r\n    },\r\n    setSortMode: function (value) {\r\n        this.sortMode = value;\r\n    },\r\n    getSortMode: function () {\r\n        return this.sortMode;\r\n    },\r\n    setAjaxOptions: function (value) {\r\n        this.ajaxOptions = value;\r\n    },\r\n    getAjaxOptions: function () {\r\n        return this.ajaxOptions;\r\n    },\r\n    setAutoLoad: function (value) {\r\n        this.autoLoad = value;\r\n    },\r\n    getAutoLoad: function () {\r\n        return this.autoLoad;\r\n    },\r\n    setUrl: function (value) {\r\n        this.url = value;\r\n        if (this.autoLoad) {\r\n            this.load();\r\n        }\r\n    },\r\n    getUrl: function () {\r\n        return this.url;\r\n    },\r\n    setPageIndex: function (value) {\r\n        this.pageIndex = value;\r\n\r\n        var params = this.loadParams || {};\r\n        if (mini.isNumber(value)) params.pageIndex = value;\r\n\r\n        this.fire(\"pageinfochanged\");\r\n    },\r\n    getPageIndex: function () {\r\n        return this.pageIndex;\r\n    },\r\n    setPageSize: function (value) {\r\n        this.pageSize = value;\r\n\r\n        var params = this.loadParams || {};\r\n        if (mini.isNumber(value)) params.pageSize = value;\r\n\r\n        this.fire(\"pageinfochanged\");\r\n    },\r\n    getPageSize: function () {\r\n        return this.pageSize;\r\n    },\r\n    setTotalCount: function (value) {\r\n        this.totalCount = parseInt(value);\r\n        this.fire(\"pageinfochanged\");\r\n    },\r\n    getTotalCount: function () {\r\n        return this.totalCount;\r\n    },\r\n    getTotalPage: function () {\r\n        return this.totalPage;\r\n    },\r\n    setCheckSelectOnLoad: function (value) {\r\n        this.checkSelectOnLoad = value;\r\n    },\r\n    getCheckSelectOnLoad: function () {\r\n        return this.checkSelectOnLoad;\r\n    },\r\n    setSelectOnLoad: function (value) {\r\n        this.selectOnLoad = value;\r\n    },\r\n    getSelectOnLoad: function () {\r\n        return this.selectOnLoad;\r\n    }\r\n\r\n});\r\nmini.DataSource.RecordId = 1;\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* DataTable\r\n-----------------------------------------------------------------------------*/\r\n\r\nmini.DataTable = function () {\r\n    mini.DataTable.superclass.constructor.apply(this, arguments);\r\n};\r\nmini.extend(mini.DataTable, mini.DataSource, {\r\n    _init: function () {\r\n        mini.DataTable.superclass._init.call(this);\r\n        this._filterInfo = null;\r\n        this._sortInfo = null;\r\n    },\r\n    add: function (record) {\r\n        return this.insert(this.source.length, record);\r\n    },\r\n    addRange: function (records) {\r\n        this.insertRange(this.source.length, records);\r\n    },\r\n    insert: function (index, record) {\r\n        if (!record) return null;\r\n\r\n        if (!mini.isNumber(index)) {\r\n            var insertRow = this.getRecord(index);\r\n            if (insertRow) {\r\n                index = this.indexOf(insertRow);\r\n            } else {\r\n                //index = this.getDataView().length;\r\n                index = this.dataview.length;\r\n            }\r\n            //return null;\r\n        }\r\n\r\n        var e = {\r\n            index: index,\r\n            record: record\r\n        };\r\n\r\n        this.fire(\"beforeadd\", e);  //if(this._events.beforeadd) \r\n\r\n        var target = this.dataview[index];\r\n        if (target) {\r\n            this.dataview.insert(index, record);\r\n        } else {\r\n            this.dataview.add(record);\r\n        }\r\n\r\n        if (this.dataview != this.source) {\r\n            if (target) {\r\n                var sourceIndex = this.source.indexOf(target);\r\n                this.source.insert(sourceIndex, record);\r\n            } else {\r\n                this.source.add(record);\r\n            }\r\n        }\r\n\r\n        this._setAdded(record);\r\n\r\n        this._dataChanged();\r\n\r\n\r\n        this.fire(\"add\", e);\r\n    },\r\n    insertRange: function (index, records) {\r\n        if (!mini.isArray(records)) return;\r\n\r\n        //debugger\r\n        if (!mini.isNumber(index)) index = this.dataview.length;\r\n\r\n        this.beginChange();\r\n        records = records.clone();\r\n        for (var i = 0, l = records.length; i < l; i++) {\r\n            var record = records[i];\r\n            this.insert(index + i, record);\r\n        }\r\n        this.endChange();\r\n    },\r\n    remove: function (record, autoSelect) {\r\n        var index = this.indexOf(record);\r\n        return this.removeAt(index, autoSelect);\r\n    },\r\n    removeAt: function (index, autoSelect) {\r\n        var record = this.getAt(index);\r\n        if (!record) return null;\r\n\r\n        var e = {\r\n            record: record\r\n        };\r\n        this.fire(\"beforeremove\", e);\r\n\r\n        var isSelected = this.isSelected(record);\r\n\r\n        //this.source.removeAt(index);\r\n        this.source.remove(record);\r\n        if (this.dataview !== this.source) {\r\n            this.dataview.removeAt(index);\r\n        }\r\n\r\n        this._setRemoved(record);\r\n\r\n        this._checkSelecteds();\r\n\r\n        this._dataChanged();\r\n\r\n        this.fire(\"remove\", e);\r\n\r\n        if (isSelected && autoSelect) {\r\n            var newSelected = this.getAt(index);\r\n            if (!newSelected) newSelected = this.getAt(index - 1);\r\n            this.deselectAll();\r\n            this.select(newSelected);\r\n        }\r\n    },\r\n\r\n    removeRange: function (records, autoSelect) {\r\n        if (!mini.isArray(records)) return;\r\n        this.beginChange();\r\n        records = records.clone();\r\n\r\n        //debugger\r\n        for (var i = 0, l = records.length; i < l; i++) {\r\n            var o = records[i];\r\n            this.remove(o, autoSelect);\r\n            //this.remove(o, false);\r\n        }\r\n\r\n\r\n        this._dataChanged();\r\n\r\n        this.endChange();\r\n    },\r\n    move: function (record, newIndex) {\r\n        if (!record || !mini.isNumber(newIndex)) return;\r\n        if (newIndex < 0) return;\r\n        if (mini.isArray(record)) {\r\n            this.beginChange();\r\n\r\n            var rs = record, targetRecord = this.getAt(newIndex);\r\n            var sf = this;\r\n            mini.sort(rs, function (a, b) {\r\n                return sf.indexOf(a) > sf.indexOf(b);\r\n            }, this);\r\n            for (var i = 0, l = rs.length; i < l; i++) {\r\n                var r = rs[i];\r\n                var index = this.indexOf(targetRecord);\r\n                this.move(r, index);\r\n            }\r\n            this.endChange();\r\n            return;\r\n        }\r\n\r\n        var e = {\r\n            index: newIndex,\r\n            record: record\r\n        };\r\n        this.fire(\"beforemove\", e);\r\n\r\n        var target = this.dataview[newIndex];\r\n\r\n        this.dataview.remove(record);\r\n\r\n        var _index = this.dataview.indexOf(target);\r\n        if (_index != -1) {\r\n            newIndex = _index;\r\n        }\r\n        if (target) {\r\n            this.dataview.insert(newIndex, record);\r\n        } else {\r\n            this.dataview.add(record);\r\n        }\r\n\r\n        if (this.dataview != this.source) {\r\n            this.source.remove(record);\r\n            var _index = this.source.indexOf(target);\r\n            if (_index != -1) {\r\n                newIndex = _index;\r\n            }\r\n            if (target) {\r\n                this.source.insert(newIndex, record);\r\n            } else {\r\n                this.source.add(record);\r\n            }\r\n        }\r\n\r\n        this._dataChanged();\r\n\r\n\r\n        this.fire(\"move\", e);\r\n    },\r\n    indexOf: function (record) {\r\n        return this.getVisibleRows().indexOf(record);\r\n    },\r\n    getAt: function (index) {\r\n        //return this.dataview[index];\r\n        return this.getVisibleRows()[index];\r\n    },\r\n    getRange: function (start, end) {\r\n        if (start > end) {\r\n            var t = start;\r\n            start = end;\r\n            end = t;\r\n        }\r\n        var range = [];\r\n        for (var i = start, l = end; i <= l; i++) {\r\n            var o = this.dataview[i];\r\n            range.push(o);\r\n        }\r\n        return range;\r\n    },\r\n    selectRange: function (start, end) {\r\n        if (!mini.isNumber(start)) start = this.indexOf(start);\r\n        if (!mini.isNumber(end)) end = this.indexOf(end);\r\n        if (mini.isNull(start) || mini.isNull(end)) return;\r\n\r\n        var rs = this.getRange(start, end);\r\n        this.selects(rs);\r\n    },\r\n    toArray: function () {\r\n        return this.source.clone();\r\n    },\r\n    //////////////////////////////////////////////\r\n    isChanged: function () {\r\n        return this.getChanges().length > 0;\r\n    },\r\n    /*\r\n    使用rowState获得不同状态的行对象数组:\r\n    新增的\r\n    删除的\r\n    修改的\r\n    */\r\n    getChanges: function (rowState, onlyField) {\r\n        var changes = [];\r\n        if (rowState == \"removed\" || rowState == null) {\r\n            changes.addRange(this._removeds.clone());\r\n        }\r\n        for (var i = 0, l = this.source.length; i < l; i++) {\r\n            var record = this.source[i];\r\n            if (!record._state) continue;\r\n            if (record._state == rowState || rowState == null) {\r\n                changes[changes.length] = record;\r\n            }\r\n        }\r\n        var rows = changes;\r\n        if (onlyField) {\r\n            for (var i = 0, l = rows.length; i < l; i++) {\r\n                var row = rows[i];\r\n                if (row._state == \"modified\") {\r\n                    var newRow = {};\r\n                    newRow._state = row._state;\r\n                    newRow[this.idField] = row[this.idField];\r\n                    for (var field in row) {\r\n                        var modifed = this.isModified(row, field);\r\n                        if (modifed) {\r\n                            newRow[field] = row[field];\r\n                        }\r\n                    }\r\n                    rows[i] = newRow;\r\n                }\r\n            }\r\n        }\r\n        //按序号排序\r\n        var grid = this;\r\n        mini.sort(changes, function (a, b) {\r\n            var index1 = grid.indexOf(a);\r\n            var index2 = grid.indexOf(b);\r\n            if (index1 > index2) return 1;\r\n            if (index1 < index2) return -1;\r\n            return 0;\r\n        });\r\n        return changes;\r\n    },\r\n    //acceptChanges和rejectChanges都能清空DataTable的增/删/改/错误等标记信息, 但是一个是\"提交\", 一个是\"撤销\"处理\r\n    accept: function () {\r\n        this.beginChange();\r\n        for (var i = 0, l = this.source.length; i < l; i++) {\r\n            var record = this.source[i];\r\n            this.acceptRecord(record);\r\n        }\r\n        this._removeds = [];  //被删除行集合\r\n        this._originals = {}; //被修改行集合        \r\n        this.endChange();\r\n    },\r\n    reject: function () {\r\n        this.beginChange();\r\n        var data = this.source.clone();\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var record = data[i];\r\n            this.rejectRecord(record);\r\n        }\r\n        this._removeds = [];  //被删除行集合\r\n        this._originals = {}; //被修改行集合\r\n        this.endChange();\r\n    },\r\n    acceptRecord: function (node) {\r\n        if (!node._state) return;\r\n        delete this._originals[node[this._originalIdField]];\r\n        if (node._state == \"deleted\") {  //如果是\"删除\", 则提交修改时, 实现真正移除\r\n            this.remove(node);\r\n        } else {\r\n            delete node._state;\r\n            delete this._originals[node[this._originalIdField]];\r\n            this._dataChanged();\r\n        }\r\n        this.fire(\"update\", { record: node });\r\n    },\r\n    rejectRecord: function (node) {\r\n        if (!node._state) return;\r\n        if (node._state == \"added\") {   //如果是新增撤销, 则删除之                                   \r\n            this.remove(node);\r\n        } else if (node._state == \"modified\" || node._state == \"deleted\") {\r\n            var or = this._getOriginal(node);\r\n\r\n            //old\r\n            //mini.copyTo(node, or);\r\n\r\n            //new\r\n            for (var field in or) {\r\n                var val = or[field];\r\n                mini._setMap(field, val, node);\r\n            }\r\n\r\n\r\n            delete node._state;\r\n            delete this._originals[node[this._originalIdField]];\r\n            this._dataChanged();\r\n            this.fire(\"update\", { record: node });\r\n        }\r\n    },\r\n    //////////////////////////////////////////////  \r\n    _doFilter: function () {\r\n        if (!this._filterInfo) {\r\n            this.dataview = this.source;\r\n            return;\r\n        }\r\n        var fn = this._filterInfo[0], scope = this._filterInfo[1];\r\n        var view = [];\r\n        var data = this.source;\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var r = data[i];\r\n            var add = fn.call(scope, r, i, this);\r\n            if (add !== false) {\r\n                view.push(r);\r\n            }\r\n        }\r\n        this.dataview = view;\r\n    },\r\n    _doSort: function () {\r\n        if (!this._sortInfo) return;\r\n        var fn = this._sortInfo[0], scope = this._sortInfo[1], reverse = this._sortInfo[2];\r\n        var dv = this.getDataView().clone();\r\n        mini.sort(dv, fn, scope);\r\n        if (reverse) dv.reverse();\r\n        this.dataview = dv;\r\n    }\r\n});\r\nmini.regClass(mini.DataTable, \"datatable\");\r\n\r\n/*\r\n    root == source  :原始树形数据对象。\r\n    viewNodes       :哈希结构，存放“过滤、排序”后的子节点数组。 (Tree控件)\r\n    dataview        :列表数据视图。“过滤、排序、折叠”后的数组。 (SuperTree控件)    \r\n*/\r\n\r\n/* DataTree\r\n-----------------------------------------------------------------------------*/\r\n\r\nmini.DataTree = function () {\r\n    mini.DataTree.superclass.constructor.apply(this, arguments);\r\n};\r\nmini.extend(mini.DataTree, mini.DataSource, {\r\n    isTree: true,\r\n\r\n    expandOnLoad: false,            //默认全部收缩\r\n\r\n    idField: \"id\",\r\n    parentField: \"pid\",\r\n    nodesField: \"children\",\r\n    checkedField: \"checked\",\r\n    resultAsTree: true,\r\n\r\n    dataField: \"\",\r\n\r\n    checkModel: \"cascade\",          //multiple|single|cascade\r\n    autoCheckParent: false,         //1.选子，选父；2.选父，全选子；3.全取消子，取消父\r\n    onlyLeafCheckable: false,       //只显示子节点checkbox\r\n\r\n\r\n    setExpandOnLoad: function (value) {\r\n        this.expandOnLoad = value;\r\n    },\r\n    getExpandOnLoad: function () {\r\n        return this.expandOnLoad;\r\n    },\r\n    setParentField: function (value) {\r\n        this.parentField = value;\r\n    },\r\n    setNodesField: function (value) {\r\n        if (this.nodesField != value) {\r\n            var data = this.root[this.nodesField];\r\n            this.nodesField = value;\r\n            this._doLoadData(data);\r\n        }\r\n    },\r\n    setResultAsTree: function (value) {\r\n        this.resultAsTree = value;\r\n    },\r\n    setCheckRecursive: function (value) {\r\n        this.checkModel = value ? \"cascade\" : \"multiple\";\r\n    },\r\n    getCheckRecursive: function () {\r\n        return this.checkModel == \"cascade\";\r\n    },\r\n    setShowFolderCheckBox: function (value) {\r\n        this.onlyLeafCheckable = !value;\r\n    },\r\n    getShowFolderCheckBox: function () {\r\n        return !this.onlyLeafCheckable;\r\n    },\r\n    _doExpandOnLoad: function (nodes) {\r\n        //expandOnLoad\r\n        var nodesField = this.nodesField;\r\n        var expandOnLoad = this.expandOnLoad;\r\n\r\n        function eachNodes(nodes, level) {\r\n            for (var i = 0, l = nodes.length; i < l; i++) {\r\n                var node = nodes[i];\r\n\r\n                if (mini.isNull(node.expanded)) {\r\n                    if (expandOnLoad === true\r\n                    || (mini.isNumber(expandOnLoad) && level <= expandOnLoad)) {\r\n                        node.expanded = true;\r\n                    } else {\r\n                        node.expanded = false;\r\n                    }\r\n                } else {\r\n                    //node.expanded = false;\r\n                }\r\n\r\n                var childs = node[nodesField];\r\n                if (childs) {\r\n                    eachNodes(childs, level + 1);\r\n                }\r\n            }\r\n        }\r\n        eachNodes(nodes, 0);\r\n    },\r\n    ///////////////////////////////////////////////////////////\r\n\r\n    _OnBeforeLoad: function (e) {\r\n        var node = this._loadingNode || this.root;\r\n        e.node = node;\r\n\r\n        if (this._isNodeLoading()) {\r\n            e.async = true;\r\n            e.isRoot = e.node == this.root;\r\n            if (!e.isRoot) {\r\n                e.data[this.idField] = this.getItemValue(e.node);\r\n            }\r\n        }\r\n        this.fire(\"beforeload\", e);\r\n    },\r\n    _OnPreLoad: function (e) {\r\n        //resultAsTree\r\n        if (this.resultAsTree == false) {\r\n            e.data = mini.arrayToTree(e.data, this.nodesField, this.idField, this.parentField)\r\n        }\r\n        this.fire(\"preload\", e);\r\n\r\n\r\n\r\n\r\n    },\r\n    _init: function () {\r\n        mini.DataTree.superclass._init.call(this);\r\n        this.root = { _id: -1, _level: -1 };\r\n        this.source = this.root[this.nodesField] = [];\r\n        this.viewNodes = null;  //当排序、过滤后，viewNodes才有对象\r\n        this.dataview = null;\r\n        this.visibleRows = null;\r\n        this.list = null;\r\n\r\n        this._ids[this.root._id] = this.root;\r\n    },\r\n    _doLoadData: function (data) {\r\n        data = data || [];\r\n\r\n        this._doExpandOnLoad(data);\r\n\r\n        this.source = this.root[this.nodesField] = data;\r\n        this.viewNodes = null;\r\n        this.dataview = null;\r\n        this.visibleRows = null;\r\n        this.list = null;\r\n\r\n        var sss = new Date();\r\n\r\n        //处理_id映射\r\n        var ds = mini.treeToArray(data, this.nodesField);\r\n\r\n\r\n        var ids = this._ids;\r\n        ids[this.root._id] = this.root;\r\n\r\n        var RecordId = mini.DataSource.RecordId;\r\n        for (var i = 0, l = ds.length; i < l; i++) {\r\n            var node = ds[i];\r\n            //if (!node._id) node._id = mini.DataSource.RecordId++;\r\n            node._id = RecordId++;\r\n            ids[node._id] = node;\r\n\r\n            //历史问题\r\n            node._uid = node._id;\r\n        }\r\n        mini.DataSource.RecordId = RecordId;\r\n        //遍历树形，设置父子关系\r\n\r\n        var checkedField = this.checkedField;\r\n        var ds = mini.treeToArray(data, this.nodesField, \"_id\", \"_pid\", this.root._id);\r\n\r\n        this.list = ds;\r\n\r\n        var ids = this._ids,\r\n\t\t\tnode, parentNode, checked;\r\n        for (var i = 0, l = ds.length; i < l; i++) {\r\n            node = ds[i];\r\n            //var parentNode = this.getParentNode(node);\r\n            parentNode = ids[node._pid];\r\n            //node._pid = parentNode._id;\r\n            node._level = parentNode._level + 1;\r\n            if (node._state) delete node._state;\r\n\r\n\r\n            //node[this.parentField] = parentNode[this.idField];\r\n\r\n            checked = node[checkedField];\r\n            if (checked) {\r\n                node.checked = checked;\r\n                if (node.checked) {\r\n                    node.checked = node.checked != 'false';\r\n                }\r\n            }\r\n\r\n            //\t\t\tif (this.isLeafNode(node) == false) {\r\n            //\t\t\t\tvar cs = node[this.nodesField];\r\n            //\t\t\t\tif (cs && cs.length > 0) {\r\n            //\t\t\t\t\t//delete node.isLeaf;\r\n            //\t\t\t\t}\r\n            //\t\t\t}\r\n        }\r\n\r\n\r\n\r\n        //同步checked\r\n        this._doUpdateLoadedCheckedNodes();\r\n        //alert(new Date() - sss);\r\n    },\r\n    _setAdded: function (node) {\r\n        var parentNode = this.getParentNode(node);  //设置父节点Id\r\n        node._id = mini.DataSource.RecordId++;\r\n\r\n        //自动创建idField\r\n        if (this._autoCreateNewID && !node[this.idField]) {\r\n            node[this.idField] = UUID();\r\n        }\r\n\r\n        //历史问题\r\n        node._uid = node._id;\r\n\r\n        //if (!node._id) node._id = mini.DataSource.RecordId++;\r\n        node._pid = parentNode._id;\r\n        if (parentNode[this.idField]) {\r\n            node[this.parentField] = parentNode[this.idField];\r\n        }\r\n        node._level = parentNode._level + 1;\r\n        node._state = \"added\";\r\n        this._ids[node._id] = node;\r\n        delete this._originals[node[this._originalIdField]];\r\n    },\r\n    _createNodes: function (node) {\r\n        var nodes = node[this.nodesField];\r\n        if (!nodes) {\r\n            nodes = node[this.nodesField] = [];\r\n\r\n        }\r\n        if (this.viewNodes && !this.viewNodes[node._id]) {\r\n            this.viewNodes[node._id] = [];\r\n        }\r\n        return nodes;\r\n    },\r\n    ///////////////////////////////////////    \r\n    addNode: function (node, parentNode) {\r\n        if (!node) return;\r\n        return this.insertNode(node, -1, parentNode);\r\n    },\r\n    addNodes: function (nodes, parentNode, action) {\r\n        if (!mini.isArray(nodes)) return;\r\n        if (mini.isNull(action)) action = \"add\";\r\n        for (var i = 0, l = nodes.length; i < l; i++) {\r\n            var node = nodes[i];\r\n            this.insertNode(node, action, parentNode);\r\n        }\r\n    },\r\n    insertNodes: function (nodes, index, parentNode) {\r\n        if (!mini.isNumber(index)) return;\r\n        if (!mini.isArray(nodes)) return;\r\n        if (!parentNode) parentNode = this.root;\r\n        this.beginChange();\r\n\r\n        var pnodes = this._createNodes(parentNode);\r\n        if (index < 0 || index > pnodes.length) index = pnodes.length;\r\n\r\n        nodes = nodes.clone();\r\n        for (var i = 0, l = nodes.length; i < l; i++) {\r\n            this.insertNode(nodes[i], index + i, parentNode);\r\n        }\r\n\r\n        this.endChange();\r\n        return nodes;\r\n    },\r\n    removeNode: function (node) {\r\n        var parentNode = this.getParentNode(node);\r\n        if (!parentNode) return;\r\n        var index = this.indexOfNode(node);\r\n        return this.removeNodeAt(index, parentNode);\r\n    },\r\n    removeNodes: function (nodes) {\r\n        if (!mini.isArray(nodes)) return;\r\n        this.beginChange();\r\n        nodes = nodes.clone();\r\n        for (var i = 0, l = nodes.length; i < l; i++) {\r\n            this.removeNode(nodes[i]);\r\n        }\r\n        this.endChange();\r\n    },\r\n    moveNodes: function (nodes, targetNode, action) {\r\n        if (!nodes || nodes.length == 0 || !targetNode || !action) return;\r\n        this.beginChange();\r\n        var sf = this;\r\n        mini.sort(nodes, function (a, b) {\r\n            return sf.indexOf(a) > sf.indexOf(b);\r\n        }, this);\r\n        for (var i = 0, l = nodes.length; i < l; i++) {\r\n            var node = nodes[i];\r\n            this.moveNode(node, targetNode, action);\r\n            if (i != 0) {\r\n                targetNode = node;\r\n                action = \"after\";\r\n            }\r\n            //alert(node.Name);\r\n        }\r\n        this.endChange();\r\n    },\r\n    /*\r\n    node: 要移动的节点\r\n    targetNode: 目标节点\r\n    action:\r\n    1.  index   这时候, targetNode作为父节点\r\n    2.  before, after, add/append 移动的方式\r\n    */\r\n    moveNode: function (node, targetNode, action) {\r\n        if (!node || !targetNode || mini.isNull(action)) return;\r\n\r\n\r\n\r\n        //如果有viewNodes，同时也发生变化\r\n        if (this.viewNodes) {\r\n            var parentNode = targetNode;\r\n            var index = action;\r\n            if (index == 'before') {\r\n                parentNode = this.getParentNode(targetNode);\r\n                index = this.indexOfNode(targetNode);\r\n            } else if (index == 'after') {\r\n                parentNode = this.getParentNode(targetNode);\r\n                index = this.indexOfNode(targetNode) + 1;\r\n            } else if (index == 'add' || index == \"append\") {\r\n                if (!parentNode[this.nodesField]) parentNode[this.nodesField] = [];\r\n                index = parentNode[this.nodesField].length;\r\n            } else if (!mini.isNumber(index)) {\r\n                return;\r\n            }\r\n            if (this.isAncestor(node, parentNode)) {  //如果目标父节点, 是节点的子节点, 则不能加入\r\n                return false;\r\n            }\r\n\r\n            var childNodes = this.viewNodes[parentNode._id];\r\n            if (!childNodes) childNodes = this.viewNodes[parentNode._id] = [];\r\n\r\n            var childNodes = this.getChildNodes(parentNode);\r\n            if (index < 0 || index > childNodes.length) index = childNodes.length;\r\n\r\n            //加入新父节点下(假节点)\r\n            var ___node = {};\r\n            childNodes.insert(index, ___node);\r\n\r\n            //node从原来的父节点中移除\r\n            var oldParentNode = this.getParentNode(node);\r\n            var oldChildNodes = this.getChildNodes(oldParentNode);\r\n            oldChildNodes.remove(node);\r\n\r\n            //真正节点加入\r\n            index = childNodes.indexOf(___node);\r\n            childNodes[index] = node;\r\n\r\n        }\r\n\r\n        var parentNode = targetNode;\r\n        var index = action;\r\n        var childNodes = this._createNodes(parentNode);\r\n\r\n        if (index == 'before') {\r\n            parentNode = this.getParentNode(targetNode);\r\n            childNodes = this._createNodes(parentNode);\r\n            index = childNodes.indexOf(targetNode);\r\n        } else if (index == 'after') {\r\n            parentNode = this.getParentNode(targetNode);\r\n            childNodes = this._createNodes(parentNode);\r\n            index = childNodes.indexOf(targetNode) + 1;\r\n        } else if (index == 'add' || index == \"append\") {\r\n            index = childNodes.length;\r\n        } else if (!mini.isNumber(index)) {\r\n            return;\r\n        }\r\n        if (this.isAncestor(node, parentNode)) {  //如果目标父节点, 是节点的子节点, 则不能加入\r\n            return false;\r\n        }\r\n\r\n        if (index < 0 || index > childNodes.length) index = childNodes.length;\r\n\r\n        //加入新父节点下(假节点)\r\n        var ___node = {};\r\n        childNodes.insert(index, ___node);\r\n\r\n        //node从原来的父节点中移除\r\n        var oldParentNode = this.getParentNode(node);\r\n        oldParentNode[this.nodesField].remove(node);\r\n\r\n        //真正节点加入\r\n        index = childNodes.indexOf(___node);\r\n        childNodes[index] = node;\r\n\r\n        //_ParentId和_Level会改变\r\n        this._updateParentAndLevel(node, parentNode);\r\n\r\n        this._dataChanged();\r\n        var e = {\r\n            oldParentNode: oldParentNode,\r\n            parentNode: parentNode,\r\n            index: index,\r\n            node: node\r\n        };\r\n\r\n        this.fire(\"movenode\", e);\r\n    },\r\n    //insertNode(task, action, targetTask) //action: before, after, append/add\r\n    insertNode: function (node, index, parentNode) {\r\n        if (!node) return;\r\n        if (!parentNode) {\r\n            parentNode = this.root;\r\n            index = \"add\";\r\n        }\r\n        if (!mini.isNumber(index)) {\r\n            switch (index) {\r\n                case \"before\":\r\n                    index = this.indexOfNode(parentNode);\r\n                    parentNode = this.getParentNode(parentNode);\r\n                    node = this.insertNode(node, index, parentNode);\r\n                    break;\r\n                case \"after\":\r\n                    index = this.indexOfNode(parentNode);\r\n                    parentNode = this.getParentNode(parentNode);\r\n                    node = this.insertNode(node, index + 1, parentNode);\r\n                    break;\r\n                case \"append\":\r\n                case \"add\":\r\n                    node = this.addNode(node, parentNode);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            return node;\r\n        };\r\n\r\n        var nodes2 = this._createNodes(parentNode); //原始节点组\r\n        var nodes = this.getChildNodes(parentNode);      //视图节点组\r\n        if (index < 0 || index > nodes.length) index = nodes.length;\r\n\r\n        nodes.insert(index, node);  //view\r\n\r\n        //index = nodes.indexOf(node);            //@@@ 2017-01-06\r\n\r\n        if (this.viewNodes) {\r\n            var preNode = nodes[index - 1];\r\n            if (preNode) {\r\n                var index2 = nodes2.indexOf(preNode);\r\n                nodes2.insert(index2 + 1, node);\r\n            } else {\r\n                nodes2.insert(0, node);\r\n            }\r\n        }\r\n\r\n        node._pid = parentNode._id;\r\n        this._setAdded(node);\r\n\r\n        //        if (node[this.nodesField]) {\r\n        //            this.cascadeChild(node, function (n, i, p) {\r\n        //                n._pid = p._id;\r\n        //                this._setAdded(n);\r\n        //            }, this);\r\n        //        }\r\n\r\n        var me = this;\r\n        var children = node[this.nodesField];\r\n        if (children) {\r\n            function each(children, p) {\r\n                for (var i = 0, l = children.length; i < l; i++) {\r\n                    var n = children[i];\r\n                    n._pid = p._id;\r\n                    me._setAdded(n);\r\n                    if (n[me.nodesField]) each(n[me.nodesField])\r\n                }\r\n            }\r\n            each(children, node);\r\n        }\r\n\r\n        this._dataChanged();\r\n        var e = {\r\n            parentNode: parentNode,\r\n            index: index,\r\n            node: node\r\n        };\r\n        this.fire(\"addnode\", e);\r\n        return node;\r\n    },\r\n    removeNodeAt: function (index, parentNode) {\r\n\r\n        if (!parentNode) parentNode = this.root;\r\n        var nodes = this.getChildNodes(parentNode);\r\n        var node = nodes[index];\r\n        if (!node) return null;\r\n\r\n        nodes.removeAt(index);\r\n        if (this.viewNodes) {\r\n            var nodes2 = parentNode[this.nodesField];\r\n            nodes2.remove(node);\r\n        }\r\n\r\n        this._setRemoved(node);\r\n        this.cascadeChild(node, function (n, i, p) {\r\n            this._setRemoved(n);\r\n        }, this);\r\n\r\n        this._checkSelecteds();\r\n\r\n        this._dataChanged();\r\n        var e = {\r\n            parentNode: parentNode,\r\n            index: index,\r\n            node: node\r\n        };\r\n        this.fire(\"removenode\", e);\r\n\r\n        return node;\r\n    },\r\n    ///////////////////////////////////////////////////////\r\n    //由当前节点开始一直上溯到根节点,对于每个节点应用fn,直到有一个fn返回假为止\r\n    bubbleParent: function (node, fn, scope) {\r\n        scope = scope || this;\r\n        if (node) fn.call(this, node);\r\n        var parentNode = this.getParentNode(node);\r\n        if (parentNode && parentNode != this.root) {\r\n            this.bubbleParent(parentNode, fn, scope);\r\n        }\r\n    },\r\n    //遍历所有层次的子节点, 直到返回false\r\n    cascadeChild: function (node, fn, scope) {\r\n        if (!fn) return;\r\n        if (!node) node = this.root;\r\n        //var nodes = node[this.nodesField];\r\n        var nodes = this.getChildNodes(node);\r\n        if (nodes) {\r\n            nodes = nodes.clone();\r\n            for (var i = 0, l = nodes.length; i < l; i++) {\r\n                var c = nodes[i];\r\n                if (fn.call(scope || this, c, i, node) === false) return;\r\n                this.cascadeChild(c, fn, scope);\r\n            }\r\n        }\r\n    },\r\n    //遍历下一级子节点\r\n    eachChild: function (node, fn, scope) {\r\n        if (!fn || !node) return;\r\n        var nodes = node[this.nodesField];\r\n        if (nodes) {\r\n            var list = nodes.clone();\r\n            for (var i = 0, l = list.length; i < l; i++) {\r\n                var o = list[i];\r\n                if (fn.call(scope || this, o, i, node) === false) break;\r\n            }\r\n        }\r\n    },\r\n\r\n    collapse: function (node, deep) {\r\n        node = this.getNode(node);\r\n        if (!node) return;\r\n        this.beginChange();\r\n\r\n        node.expanded = false;\r\n        if (deep) {\r\n            this.eachChild(node, function (o) {\r\n                if (o[this.nodesField] != null) {\r\n                    this.collapse(o, deep);\r\n                }\r\n            }, this);\r\n        }\r\n\r\n        this.endChange(\"collapse\");\r\n\r\n        var e = {\r\n            node: node\r\n        };\r\n        this.fire(\"collapse\", e);\r\n    },\r\n    expand: function (node, deep) {\r\n        node = this.getNode(node);\r\n        if (!node) return;\r\n        this.beginChange();\r\n\r\n        node.expanded = true;\r\n        if (deep) {\r\n            this.eachChild(node, function (o) {\r\n                if (o[this.nodesField] != null) {\r\n                    this.expand(o, deep);\r\n                }\r\n            }, this);\r\n        }\r\n\r\n        this.endChange(\"expand\");\r\n\r\n        var e = {\r\n            node: node\r\n        };\r\n        this.fire(\"expand\", e);\r\n    },\r\n    toggle: function (node) {\r\n        if (this.isExpandedNode(node)) this.collapse(node);\r\n        else this.expand(node);\r\n    },\r\n    expandNode: function (node) {\r\n        this.expand(node);\r\n    },\r\n    collapseNode: function (node) {\r\n        this.collapse(node);\r\n    },\r\n    collapseAll: function () {\r\n        this.collapse(this.root, true);\r\n    },\r\n    expandAll: function () {\r\n        this.expand(this.root, true);\r\n    },\r\n    collapseLevel: function (level, deep) {\r\n        this.beginChange();\r\n        this.each(function (node) {\r\n            var nodeLevel = this.getLevel(node);\r\n            if (level == nodeLevel) {\r\n                this.collapse(node, deep);\r\n            }\r\n        }, this);\r\n        this.endChange();\r\n    },\r\n    expandLevel: function (level, deep) {\r\n        this.beginChange();\r\n        this.each(function (node) {\r\n            var nodeLevel = this.getLevel(node);\r\n            if (level == nodeLevel) {\r\n                this.expand(node, deep);\r\n            }\r\n        }, this);\r\n        this.endChange();\r\n    },\r\n    expandPath: function (node) {\r\n        node = this.getNode(node);\r\n        if (!node) return;\r\n        var ans = this.getAncestors(node);\r\n        for (var i = 0, l = ans.length; i < l; i++) {\r\n            this.expandNode(ans[i]);\r\n        }\r\n    },\r\n    collapsePath: function (node) {\r\n        node = this.getNode(node);\r\n        if (!node) return;\r\n        var ans = this.getAncestors(node);\r\n        for (var i = 0, l = ans.length; i < l; i++) {\r\n            this.collapseNode(ans[i]);\r\n        }\r\n    },\r\n    ///////////////////////////////////////////////////////\r\n    //判断parentNode是否是node的父级节点\r\n    isAncestor: function (parentNode, node) {\r\n        if (parentNode == node) return true;\r\n        if (!parentNode || !node) return false;\r\n        if (parentNode == this.getRootNode()) return true;\r\n        var as = this.getAncestors(node);\r\n        for (var i = 0, l = as.length; i < l; i++) {\r\n            if (as[i] == parentNode) return true;\r\n        }\r\n        return false;\r\n    },\r\n    //获取父级链\r\n    getAncestors: function (node) {\r\n        var as = [];\r\n        while (1) {\r\n            var parentNode = this.getParentNode(node);\r\n            if (!parentNode || parentNode == this.root) break;\r\n            as[as.length] = parentNode;\r\n            node = parentNode;\r\n        }\r\n        as.reverse();\r\n        return as;\r\n    },\r\n    getNode: function (node) {\r\n        if (typeof node == 'object') return node;\r\n        return this.getRecord(node);\r\n    },\r\n    getRootNode: function () {\r\n        return this.root;\r\n    },\r\n    getParentNode: function (node) {\r\n        //if (this.root._id == node._pid) return this.root;\r\n        if (!node) return null;\r\n        return this.getby_id(node._pid);\r\n    },\r\n    getAllChildNodes: function (node, source) {\r\n        return this.getChildNodes(node, true, source);\r\n    },\r\n    getChildNodes: function (node, all, useView) {\r\n        node = this.getNode(node);\r\n        if (!node) node = this.getRootNode();\r\n        var nodes = node[this.nodesField];\r\n\r\n        //如果有过滤、排序，则从viewNodes中获取\r\n        if (this.viewNodes && useView !== false) {\r\n            nodes = this.viewNodes[node._id];\r\n        }\r\n        //        else if (nodes) {\r\n        //            nodes = nodes.clone();\r\n        //        }\r\n\r\n        if (all === true && nodes) {\r\n            var view = [];\r\n            for (var i = 0, l = nodes.length; i < l; i++) {\r\n                var cnode = nodes[i];\r\n                view[view.length] = cnode;\r\n                var cnodes = this.getChildNodes(cnode, all, useView);\r\n                if (cnodes && cnodes.length > 0) {\r\n                    view.addRange(cnodes);\r\n                }\r\n            }\r\n            nodes = view;\r\n        }\r\n        return nodes || [];\r\n    },\r\n    getChildNodeAt: function (index, node) {\r\n        var nodes = this.getChildNodes(node);\r\n        if (nodes) return nodes[index];\r\n        return null;\r\n    },\r\n    //是否有子节点\r\n    hasChildNodes: function (node) {\r\n        var nodes = this.getChildNodes(node);\r\n        return nodes.length > 0;\r\n    },\r\n    getLevel: function (node) {\r\n        return node._level;\r\n    },\r\n\r\n    //是否叶子节点(没有子节点的)\r\n    //注意: 是否有子节点, 跟是否是叶子节点没有必然的关系    一般我们用IsLeaf来显示+-号, 在懒加载的时候管用\r\n    //    _is_true: function (v) {\r\n    //        return v === true || v === 1 || v === 'Y' || v === 'y'\r\n    //    },\r\n    //    _is_false: function (v) {\r\n    //        return v === false || v === 0 || v === 'N' || v === 'n';\r\n    //    },\r\n    _is_true: function (v) {\r\n        return String(v) == \"true\" || v === 1 || v === 'Y' || v === 'y'\r\n    },\r\n    _is_false: function (v) {\r\n        return String(v) == \"false\" || v === 0 || v === 'N' || v === 'n';\r\n    },\r\n    leafField: 'isLeaf',\r\n    isLeafNode: function (node) {\r\n        return this.isLeaf(node);\r\n    },\r\n    isLeaf: function (node) {\r\n        if (!node) return false;\r\n        var v = node[this.leafField];\r\n        if (!node || this._is_false(v)) return false;\r\n        var nodes = this.getChildNodes(node, false, false);\r\n        if (nodes.length > 0) return false;\r\n        return true;\r\n    },\r\n    hasChildren: function (node) {\r\n        var subNodes = this.getChildNodes(node);\r\n        return !!(subNodes && subNodes.length > 0);\r\n    },\r\n    isFirstNode: function (node) {\r\n        if (node == this.root) return true;\r\n        var parentNode = this.getParentNode(node);\r\n        if (!parentNode) return false;\r\n        return this.getFirstNode(parentNode) == node;\r\n    },\r\n    isLastNode: function (node) {\r\n        if (node == this.root) return true;\r\n        var parentNode = this.getParentNode(node);\r\n        if (!parentNode) return false;\r\n        return this.getLastNode(parentNode) == node;\r\n    },\r\n    isCheckedNode: function (node) {\r\n        return node.checked === true;\r\n    },\r\n    isExpandedNode: function (node) {\r\n        return node.expanded == true || node.expanded == 1 || mini.isNull(node.expanded);\r\n    },\r\n    isEnabledNode: function (node) {\r\n        return node.enabled !== false;\r\n    },\r\n    isVisibleNode: function (node) {  //根据父节点折叠, 判断本节点是否可视\r\n        if (node.visible == false) return false;\r\n        var pnode = this._ids[node._pid];\r\n        if (!pnode || pnode == this.root) return true;\r\n        if (pnode.expanded === false) return false;\r\n        return this.isVisibleNode(pnode);\r\n    },\r\n    getNextNode: function (node) {\r\n        var parentNode = this.getby_id(node._pid);\r\n        if (!parentNode) return null;\r\n        var index = this.indexOfNode(node);\r\n        return this.getChildNodes(parentNode)[index + 1];\r\n    },\r\n    getPrevNode: function (node) {\r\n        var parentNode = this.getby_id(node._pid);\r\n        if (!parentNode) return null;\r\n        var index = this.indexOfNode(node);\r\n        return this.getChildNodes(parentNode)[index - 1];\r\n    },\r\n    getFirstNode: function (parentNode) {\r\n        return this.getChildNodes(parentNode)[0];\r\n    },\r\n    getLastNode: function (parentNode) {\r\n        var nodes = this.getChildNodes(parentNode);\r\n        return nodes[nodes.length - 1];\r\n    },\r\n    indexOfNode: function (node) {\r\n        var parentNode = this.getby_id(node._pid);\r\n        if (parentNode) {\r\n            return this.getChildNodes(parentNode).indexOf(node);\r\n        }\r\n        return -1;\r\n    },\r\n    indexOfList: function (node) {\r\n        return this.getList().indexOf(node);\r\n    },\r\n    getAt: function (index) {\r\n        //return this.getDataView()[index];\r\n        return this.getVisibleRows()[index];\r\n    },\r\n    indexOf: function (record) {\r\n        return this.getVisibleRows().indexOf(record);\r\n    },\r\n    getRange: function (start, end) {\r\n        if (start > end) {\r\n            var t = start;\r\n            start = end;\r\n            end = t;\r\n        }\r\n        var data = this.getChildNodes(this.root, true);\r\n        var range = [];\r\n        for (var i = start, l = end; i <= l; i++) {\r\n            var o = data[i];\r\n            if (o) {\r\n                range.push(o);\r\n            }\r\n        }\r\n        return range;\r\n    },\r\n    selectRange: function (start, end) {\r\n        var data = this.getChildNodes(this.root, true);\r\n        if (!mini.isNumber(start)) start = data.indexOf(start);\r\n        if (!mini.isNumber(end)) end = data.indexOf(end);\r\n        if (mini.isNull(start) || mini.isNull(end)) return;\r\n\r\n        var rs = this.getRange(start, end);\r\n        this.selects(rs);\r\n    },\r\n    findRecords: function (property, value) {\r\n        var data = this.toArray();\r\n\r\n        var ifFn = typeof property == \"function\";\r\n        var fn = property;\r\n        var scope = value || this;\r\n        var records = [];\r\n\r\n        if (!mini.isNull(value)) value = String(value);\r\n\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var o = data[i];\r\n\r\n            if (ifFn) {\r\n                var ret = fn.call(scope, o);\r\n                if (ret == true) {\r\n                    records[records.length] = o;\r\n                }\r\n                if (ret === 1) break;\r\n            } else {\r\n                //                if (o[property] == value) {\r\n                //                    records[records.length] = o;\r\n                //                }\r\n\r\n                if (value.indexOf(\",\") != -1) {\r\n                    var vls = value.split(\",\");\r\n                    for (var j = 0, len = vls.length; j < len; j++) {\r\n                        var v = vls[j];\r\n                        if (o[property] == v) {\r\n                            records[records.length] = o;\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (o[property] == value) {\r\n                        records[records.length] = o;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return records;\r\n    },\r\n    ////////////////////////////////////\r\n    _dataChangedCount: 0,\r\n    _dataChanged: function (action) {\r\n\r\n        this._dataChangedCount++;\r\n        if (action != \"update\") {\r\n            this.ids = null;                //!!!\r\n            this.dataview = null;\r\n            this.visibleRows = null;\r\n\r\n            if (action == \"collapse\" || action == \"expand\" || action == \"loaddata\") {\r\n            } else {\r\n                this.list = null;\r\n            }\r\n\r\n            //document.title = new Date().getTime();\r\n        }\r\n        if (this.__changeCount == 0) {\r\n            this.fire(\"datachanged\");\r\n        }\r\n    },\r\n\r\n    //    _createDataView: function () {\r\n    //        //获取所有排序、过滤后的节点列表\r\n    //        var data = this.getChildNodes(this.root, true);\r\n    //        return data;\r\n    //    },\r\n    //    _createVisibleRows: function () {\r\n    //        //获取所有排序、过滤后的节点列表\r\n    //        var data = this.getChildNodes(this.root, true);\r\n    //        //根据isVisibleNode, 再次筛选\r\n    //        var view = [];\r\n    //        for (var i = 0, l = data.length; i < l; i++) {\r\n    //            var node = data[i];\r\n    //            if (this.isVisibleNode(node)) view[view.length] = node;\r\n    //        }\r\n    //        return view;\r\n    //    },\r\n\r\n    _createDataView: function () {\r\n        //获取所有排序、过滤后的节点列表\r\n        var data = !this.viewNodes ? this.getList() : this.getChildNodes(this.root, true);\r\n        return data;\r\n    },\r\n    //\t_createVisibleRows: function () {\r\n    //\t\t//获取所有排序、过滤后的节点列表\r\n    //\t\tvar data = !this.viewNodes ? this.getList() : this.getChildNodes(this.root, true);\t  //this.getListView()\r\n    //\t\t//根据isVisibleNode, 再次筛选\r\n    //\t\tvar view = [];\r\n    //\t\tfor (var i = 0, l = data.length; i < l; i++) {\r\n    //\t\t\tvar node = data[i];\r\n    //\t\t\tif (this.isVisibleNode(node)) view[view.length] = node;\r\n    //\t\t}\r\n    //\t\treturn view;\r\n    //\t},\r\n    _createVisibleRows: function () {\r\n        var data = [],\r\n\t\t\tnodesField = this.nodesField,\r\n\t\t\tviewNodes = this.viewNodes,\r\n\t\t\tinView = !!viewNodes,\r\n\t\t\tnode, children;\r\n\r\n        function getChildren(node) {\r\n            return inView ? viewNodes[node._id] : node[nodesField];\r\n        }\r\n\r\n        function each(nodes) {\r\n            for (var i = 0, l = nodes.length; i < l; i++) {\r\n                node = nodes[i];\r\n                data[data.length] = node;\r\n\r\n                if (node.expanded === false) {\r\n                } else {\r\n                    children = getChildren(node);\r\n                    if (children) each(children);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        each(getChildren(this.root));\r\n        return data;\r\n\r\n        //\t\t//获取所有排序、过滤后的节点列表\r\n        //\t\tvar data = !this.viewNodes ? this.getList() : this.getChildNodes(this.root, true);   //this.getListView()\r\n        //\t\t//根据isVisibleNode, 再次筛选\r\n        //\t\tvar view = [];\r\n        //\t\tfor (var i = 0, l = data.length; i < l; i++) {\r\n        //\t\t\tvar node = data[i];\r\n        //\t\t\tif (this.isVisibleNode(node)) view[view.length] = node;\r\n        //\t\t}\r\n        //\t\treturn view;\r\n    },\r\n\r\n    //ccc: 0,\r\n    getList: function () {\r\n        //\r\n        if (!this.list) {\r\n\r\n            //document.title = this.ccc++;\r\n            this.list = mini.treeToList(this.source, this.nodesField);\r\n        }\r\n        return this.list;\r\n\r\n\r\n        //return mini.treeToList(this.source, this.nodesField);\r\n    },\r\n    getDataView: function () {\r\n\r\n        if (!this.dataview) {\r\n\r\n            this.dataview = this._createDataView();\r\n        }\r\n        return this.dataview; //.clone();\r\n    },\r\n    getVisibleRows: function () {\r\n        if (!this.visibleRows) {\r\n\r\n            this.visibleRows = this._createVisibleRows();\r\n        }\r\n        return this.visibleRows;\r\n    },\r\n    //过滤、排序，生成viewNodes\r\n    _doFilter: function () {\r\n        if (!this._filterInfo) {\r\n            this.viewNodes = null;\r\n            return;\r\n        }\r\n\r\n        var fn = this._filterInfo[0], scope = this._filterInfo[1];\r\n\r\n        var viewNodes = this.viewNodes = {}, nodesField = this.nodesField;\r\n        function filter(node) {\r\n            var nodes = node[nodesField];\r\n            if (!nodes) return false;\r\n            var id = node._id;\r\n            var views = viewNodes[id] = [];\r\n\r\n            for (var i = 0, l = nodes.length; i < l; i++) {\r\n                var r = nodes[i];\r\n                var cadd = filter(r);\r\n                var add = fn.call(scope, r, i, this);\r\n                if (add === true || cadd) {\r\n                    views.push(r);\r\n                }\r\n\r\n            }\r\n            return views.length > 0;\r\n        }\r\n        filter(this.root);\r\n    },\r\n    _doSort: function () {\r\n        if (!this._filterInfo && !this._sortInfo) {\r\n            this.viewNodes = null;\r\n            return;\r\n        }\r\n        if (!this._sortInfo) return;\r\n        var fn = this._sortInfo[0], scope = this._sortInfo[1], reverse = this._sortInfo[2];\r\n\r\n\r\n        var nodesField = this.nodesField;\r\n        if (!this.viewNodes) {\r\n            var viewNodes = this.viewNodes = {};\r\n            //如果没有viewNodes，则一一创建\r\n            viewNodes[this.root._id] = this.root[nodesField].clone();\r\n            this.cascadeChild(this.root, function (node, i, p) {\r\n                var nodes = node[nodesField];\r\n                if (nodes) {\r\n                    viewNodes[node._id] = nodes.clone();\r\n                }\r\n            });\r\n        }\r\n\r\n        var sf = this;\r\n        function sort(node) {\r\n            var nodes = sf.getChildNodes(node);\r\n            mini.sort(nodes, fn, scope);\r\n            if (reverse) nodes.reverse();\r\n            for (var i = 0, l = nodes.length; i < l; i++) {\r\n                var r = nodes[i];\r\n                sort(r);\r\n            }\r\n        };\r\n        sort(this.root);\r\n    },\r\n    ////////////////////////////////////////////////////////\r\n\r\n    toArray: function () {\r\n        //return this.getChildNodes(this.root, true, false);\r\n\r\n        if (!this._array || this._dataChangedCount != this._dataChangedCount2) {\r\n            this._dataChangedCount2 = this._dataChangedCount;\r\n            this._array = this.getChildNodes(this.root, true, false);\r\n        }\r\n\r\n        //1)节省掉性能开销；2）在大树形数据下，少生成对象，节省内存\r\n\r\n        return this._array;\r\n    },\r\n    toTree: function () {\r\n        return this.root[this.nodesField];\r\n    },\r\n    isChanged: function () {\r\n        return this.getChanges().length > 0;\r\n    },\r\n    /*\r\n    使用rowState获得不同状态的行对象数组:\r\n    新增的\r\n    删除的\r\n    修改的\r\n    */\r\n    getChanges: function (rowState, onlyField) {\r\n        var me = this,\r\n            changes = [];\r\n        if (rowState == \"removed\" || rowState == null) {\r\n            changes.addRange(this._removeds.clone());\r\n        }\r\n\r\n        var allNodes = this.getAllChildNodes(this.root, false);\r\n\r\n        for (var i = 0, l = allNodes.length; i < l; i++) {\r\n            var record = allNodes[i];\r\n            if (record._state == null || record._state == \"\") continue;\r\n            if (record._state == rowState || rowState == null) {\r\n                changes[changes.length] = record;\r\n            }\r\n        }\r\n\r\n        //        this.cascadeChild(this.root, function (record, i, p) {\r\n        //            if (record._state == null || record._state == \"\") return;\r\n        //            if (record._state == rowState || rowState == null) {\r\n        //                changes[changes.length] = record;\r\n        //            }\r\n        //        }, this);\r\n\r\n        var rows = changes;\r\n        if (onlyField) {\r\n            for (var i = 0, l = rows.length; i < l; i++) {\r\n                var row = rows[i];\r\n                if (row._state == \"modified\") {\r\n                    var newRow = {};\r\n                    newRow._state = row._state;\r\n                    newRow[this.idField] = row[this.idField];\r\n                    for (var field in row) {\r\n                        var modifed = this.isModified(row, field);\r\n                        if (modifed) {\r\n                            newRow[field] = row[field];\r\n                        }\r\n                    }\r\n                    rows[i] = newRow;\r\n                }\r\n            }\r\n        }\r\n        return changes;\r\n    },\r\n    //acceptChanges和rejectChanges都能清空DataTable的增/删/改/错误等标记信息, 但是一个是\"提交\", 一个是\"撤销\"处理\r\n    accept: function (node) {\r\n        node = node || this.root;\r\n        this.beginChange();\r\n        this.cascadeChild(this.root, function (node) {\r\n            this.acceptRecord(node);\r\n        }, this);\r\n        this._removeds = [];  //被删除行集合\r\n        this._originals = {}; //被修改行集合\r\n        this.endChange();\r\n    },\r\n    reject: function (node) {\r\n        this.beginChange();\r\n        this.cascadeChild(this.root, function (node) {\r\n            this.rejectRecord(node);\r\n        }, this);\r\n        this._removeds = [];  //被删除行集合\r\n        this._originals = {}; //被修改行集合\r\n        this.endChange();\r\n    },\r\n    acceptRecord: function (node) {\r\n        if (!node._state) return;\r\n        delete this._originals[node[this._originalIdField]];\r\n        if (node._state == \"deleted\") {  //如果是\"删除\", 则提交修改时, 实现真正移除\r\n            this.removeNode(node);\r\n        } else {\r\n            delete node._state;\r\n            delete this._originals[node[this._originalIdField]];\r\n            this._dataChanged();\r\n            this.fire(\"update\", { record: node });\r\n        }\r\n\r\n    },\r\n    rejectRecord: function (node) {\r\n        if (!node._state) return;\r\n        if (node._state == \"added\") {   //如果是新增撤销, 则删除之                                   \r\n            this.removeNode(node);\r\n        } else if (node._state == \"modified\" || node._state == \"deleted\") {\r\n            var or = this._getOriginal(node);\r\n            mini.copyTo(node, or);\r\n            delete node._state;\r\n            delete this._originals[node[this._originalIdField]];\r\n            this._dataChanged();\r\n            this.fire(\"update\", { record: node });\r\n        }\r\n    },\r\n    ///////////////////////////////////////////////\r\n    ////升级/降级方法, 不公开, 给甘特图用\r\n    upGrade: function (task) {\r\n        var parentTask = this.getParentNode(task);\r\n        if (parentTask == this.root || task == this.root) {\r\n            return false;\r\n        }\r\n\r\n        //任务的当前位置\r\n        var pNodes = parentTask[this.nodesField];\r\n\r\n        var index = pNodes.indexOf(task);\r\n        var appendIndex = task[this.nodesField] ? task[this.nodesField].length : 0;\r\n        //删除父任务下,index之后的元素,并将删除的元素增加给选中元素\r\n        for (var i = pNodes.length - 1; i >= index; i--) {\r\n            var o = pNodes[i];\r\n            pNodes.removeAt(i);\r\n            if (o != task) {\r\n                if (!task[this.nodesField]) task[this.nodesField] = [];\r\n                task[this.nodesField].insert(appendIndex, o);\r\n            }\r\n        }\r\n        //将task加入到原父任务之后位置\r\n        var pparentTask = this.getParentNode(parentTask);\r\n        var ppNodes = pparentTask[this.nodesField];\r\n        var index = ppNodes.indexOf(parentTask);\r\n        ppNodes.insert(index + 1, task);\r\n\r\n        //_ParentId和_Level会改变\r\n        this._updateParentAndLevel(task, pparentTask);\r\n\r\n        this._doFilter();\r\n\r\n        this._dataChanged();\r\n    },\r\n    downGrade: function (node) {\r\n        //如果node是数组的第一个元素,则不能降级\r\n        if (this.isFirstNode(node)) {\r\n            return false;\r\n        }\r\n\r\n        var oldParentNode = this.getParentNode(node);\r\n\r\n        var opNodes = oldParentNode[this.nodesField];\r\n\r\n        var index = opNodes.indexOf(node);\r\n\r\n        var parentNode = opNodes[index - 1];\r\n\r\n        //从旧父节点中删除, 并插入到新父节点下\r\n        opNodes.removeAt(index);\r\n        if (!parentNode[this.nodesField]) parentNode[this.nodesField] = [];\r\n        parentNode[this.nodesField].add(node);\r\n\r\n        //_ParentId和_Level会改变\r\n        this._updateParentAndLevel(node, parentNode);\r\n\r\n        //如果有viewNodes，同时也发生变化\r\n\r\n        this._doFilter();\r\n\r\n        this._dataChanged();\r\n\r\n\r\n    },\r\n\r\n    _updateParentAndLevel: function (node, parentNode) {\r\n        var that = this;\r\n        node._pid = parentNode._id;\r\n        node._level = parentNode._level + 1;\r\n        node[that.parentField] = parentNode[that.idField];\r\n        if (!node[that.parentField]) node[that.parentField] = parentNode._id;\r\n\r\n        this.cascadeChild(node, function (n, i, p) {\r\n            n._pid = p._id;\r\n            n._level = p._level + 1;\r\n\r\n            n[that.parentField] = p[that.idField];\r\n        }, this);\r\n        this._setModified(node);\r\n    },\r\n    //////////////////////////////////////////////////////////////\r\n    // Check Node\r\n    //////////////////////////////////////////////////////////////\r\n    setCheckModel: function (value) {\r\n        this.checkModel = value;\r\n    },\r\n    getCheckModel: function () {\r\n        return this.checkModel;\r\n    },\r\n    setOnlyLeafCheckable: function (value) {\r\n        this.onlyLeafCheckable = value;\r\n    },\r\n    getOnlyLeafCheckable: function () {\r\n        return this.onlyLeafCheckable;\r\n    },\r\n    setAutoCheckParent: function (value) {\r\n        this.autoCheckParent = value;\r\n    },\r\n    getAutoCheckParent: function () {\r\n        return this.autoCheckParent;\r\n    },\r\n    _doUpdateLoadedCheckedNodes: function () {  //加载后调用，同步checked\r\n\r\n        //var nodes = this.getAllChildNodes(this.root);\r\n        var nodes = this.getList();\r\n\r\n\r\n        for (var i = 0, l = nodes.length; i < l; i++) {\r\n            var node = nodes[i];\r\n            if (node.checked == true) {\r\n                if (this.autoCheckParent == false || !this.hasChildNodes(node)) {\r\n                    this._doUpdateNodeCheckState(node);\r\n                }\r\n            }\r\n        }\r\n\r\n    },\r\n    _doUpdateNodeCheckState: function (node) {\r\n        //遍历节点，根据设置，关联选择：checkModel(cascade)，\r\n        //判断：onlyLeafCheckable，node.checkable\r\n        if (!node) return;\r\n\r\n        var checked = this.isChecked(node);\r\n        if (this.checkModel == \"cascade\" || this.autoCheckParent) {\r\n            //反选子节点            \r\n            this.cascadeChild(node, function (cnode) {\r\n                //                var checkable = this.getCheckable(cnode);\r\n                //                if (checkable) {\r\n                this.doCheckNodes(cnode, checked);\r\n                //                }\r\n            }, this);\r\n            //三态父节点\r\n            if (!this.autoCheckParent) {\r\n                var ans = this.getAncestors(node);\r\n                ans.reverse();\r\n                for (var i = 0, l = ans.length; i < l; i++) {\r\n                    var pnode = ans[i];\r\n                    //                    var checkable = this.getCheckable(pnode);\r\n                    //                    if (checkable == false) return;\r\n                    var childNodes = this.getChildNodes(pnode);\r\n                    var checkAll = true;\r\n                    for (var ii = 0, ll = childNodes.length; ii < ll; ii++) {\r\n                        var cnode = childNodes[ii];\r\n                        if (!this.isCheckedNode(cnode)) {\r\n                            checkAll = false;\r\n                        }\r\n                    }\r\n                    if (checkAll) this.doCheckNodes(pnode, true);\r\n                    else {\r\n                        this.doCheckNodes(pnode, false);\r\n                    }\r\n                    //父节点数据不多，激发下\r\n                    this.fire(\"checkchanged\", { nodes: [pnode], _nodes: [pnode] });\r\n                }\r\n            }\r\n        }\r\n        var that = this;\r\n        //if (this.autoCheckParent && checked) {\r\n        function hasCheckedChildNode(pnode) {\r\n            var childNodes = that.getChildNodes(pnode);\r\n            for (var ii = 0, ll = childNodes.length; ii < ll; ii++) {\r\n                var cnode = childNodes[ii];\r\n                if (that.isCheckedNode(cnode)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        if (this.autoCheckParent) {\r\n            //1)有子节点选中就选中；2)所有子节点都没选中，取消选中\r\n            var ans = this.getAncestors(node);\r\n            ans.reverse();\r\n            for (var i = 0, l = ans.length; i < l; i++) {\r\n                var pnode = ans[i];\r\n                //                var checkable = this.getCheckable(pnode);\r\n                //                if (checkable == false) return;\r\n                pnode.checked = hasCheckedChildNode(pnode);\r\n                this.fire(\"checkchanged\", { nodes: [pnode], _nodes: [pnode] });\r\n            }\r\n        }\r\n    },\r\n    doCheckNodes: function (nodes, checked, cascade) {\r\n\r\n        //cascade: 是否关联选择\r\n        if (!nodes) return;\r\n        if (typeof nodes == \"string\") {\r\n            nodes = nodes.split(\",\");\r\n        }\r\n        if (!mini.isArray(nodes)) nodes = [nodes];\r\n        nodes = nodes.clone();\r\n        var _nodes = [];\r\n        checked = checked !== false;\r\n\r\n        if (cascade === true) {\r\n            if (this.checkModel == \"single\") {\r\n                this.uncheckAllNodes();\r\n            }\r\n        }\r\n        for (var i = nodes.length - 1; i >= 0; i--) {\r\n            var node = this.getRecord(nodes[i]);\r\n            if (\r\n                !node\r\n                || (checked && node.checked === true)\r\n                || (!checked && node.checked !== true)\r\n            ) {\r\n                if (node) {\r\n                    //if(node.text == 'Base') debugger\r\n                    //if(!checked \r\n                    if (cascade === true) {\r\n                        this._doUpdateNodeCheckState(node);\r\n                    }\r\n                    if (!checked && !this.isLeaf(node)) {\r\n                        _nodes.push(node);\r\n                    }\r\n\r\n                }\r\n                continue;\r\n            }\r\n            node.checked = checked;\r\n            _nodes.push(node);\r\n            if (cascade === true) {\r\n                this._doUpdateNodeCheckState(node);\r\n            }\r\n            //if (checked) delete node.checkState;\r\n        }\r\n\r\n        var me = this;\r\n        setTimeout(function () {\r\n            me.fire(\"_checkchanged\", { nodes: nodes, _nodes: _nodes, checked: checked });\r\n        }, 1);\r\n    },\r\n    checkNode: function (node, cascade) {\r\n\r\n        this.doCheckNodes([node], true, cascade !== false);\r\n    },\r\n    uncheckNode: function (node, cascade) {\r\n        this.doCheckNodes([node], false, cascade !== false);\r\n    },\r\n    checkNodes: function (nodes, cascade) {\r\n        if (!mini.isArray(nodes)) nodes = [];\r\n        this.doCheckNodes(nodes, true, cascade !== false);\r\n    },\r\n    uncheckNodes: function (nodes, cascade) {\r\n        if (!mini.isArray(nodes)) nodes = [];\r\n        this.doCheckNodes(nodes, false, cascade !== false);\r\n    },\r\n    checkAllNodes: function () {\r\n        var nodes = this.getList();\r\n        this.doCheckNodes(nodes, true, false);\r\n    },\r\n    uncheckAllNodes: function () {\r\n        var nodes = this.getList();\r\n        this.doCheckNodes(nodes, false, false);\r\n    },\r\n\r\n    doGetCheckedNodes: function (sourceNodes, mode) {\r\n        if (mode === false) mode = 'leaf';\r\n        var nodes = [];\r\n        var maps = {};\r\n\r\n        for (var j = 0, k = sourceNodes.length; j < k; j++) {\r\n            var node = sourceNodes[j];\r\n            var isLeaf = this.isLeafNode(node);\r\n            if (mode === true) {\r\n                //nodes.push(node);\r\n                if (!maps[node._id]) {\r\n                    maps[node._id] = node;\r\n                    nodes.push(node);\r\n                }\r\n                var ans = this.getAncestors(node);\r\n                for (var i = 0, l = ans.length; i < l; i++) {\r\n                    var anode = ans[i];\r\n                    if (!maps[anode._id]) {\r\n                        maps[anode._id] = anode;\r\n                        nodes.push(anode);\r\n                    }\r\n                }\r\n            } else if (mode === \"parent\") {\r\n                if (!isLeaf) {\r\n                    //nodes.push(node);\r\n                    if (!maps[node._id]) {\r\n                        maps[node._id] = node;\r\n                        nodes.push(node);\r\n                    }\r\n                }\r\n            } else if (mode === \"leaf\") {\r\n                if (isLeaf) {\r\n                    //nodes.push(node);\r\n                    if (!maps[node._id]) {\r\n                        maps[node._id] = node;\r\n                        nodes.push(node);\r\n                    }\r\n                }\r\n            } else {\r\n                //nodes.push(node);\r\n                if (!maps[node._id]) {\r\n                    maps[node._id] = node;\r\n                    nodes.push(node);\r\n                }\r\n            }\r\n\r\n        }\r\n        return nodes;\r\n    },\r\n\r\n    getCheckedNodes: function (mode) {  //parent, leaf, true(包含父节点）, 不传递（当前选中）\r\n        var nodes = [];\r\n\r\n        this.cascadeChild(this.root, function (node) {\r\n            if (node.checked == true) nodes.push(node);\r\n        });\r\n\r\n        nodes = this.doGetCheckedNodes(nodes, mode);\r\n\r\n        return nodes;\r\n    },\r\n\r\n    //    getCheckedNodes: function (mode) {  //parent, leaf, true(包含父节点）, 不传递（当前选中）\r\n    //        if (mode === false) mode = 'leaf';\r\n    //        var nodes = [];\r\n    //        var maps = {};\r\n    //        this.cascadeChild(this.root, function (node) {\r\n    //            if (node.checked == true) {\r\n    //                var isLeaf = this.isLeafNode(node);\r\n    //                if (mode === true) {\r\n    //                    //nodes.push(node);\r\n    //                    if (!maps[node._id]) {\r\n    //                        maps[node._id] = node;\r\n    //                        nodes.push(node);\r\n    //                    }\r\n    //                    var ans = this.getAncestors(node);\r\n    //                    for (var i = 0, l = ans.length; i < l; i++) {\r\n    //                        var anode = ans[i];\r\n    //                        if (!maps[anode._id]) {\r\n    //                            maps[anode._id] = anode;\r\n    //                            nodes.push(anode);\r\n    //                        }\r\n    //                    }\r\n    //                } else if (mode === \"parent\") {\r\n    //                    if (!isLeaf) {\r\n    //                        //nodes.push(node);\r\n    //                        if (!maps[node._id]) {\r\n    //                            maps[node._id] = node;\r\n    //                            nodes.push(node);\r\n    //                        }\r\n    //                    }\r\n    //                } else if (mode === \"leaf\") {\r\n    //                    if (isLeaf) {\r\n    //                        //nodes.push(node);\r\n    //                        if (!maps[node._id]) {\r\n    //                            maps[node._id] = node;\r\n    //                            nodes.push(node);\r\n    //                        }\r\n    //                    }\r\n    //                } else {\r\n    //                    //nodes.push(node);\r\n    //                    if (!maps[node._id]) {\r\n    //                        maps[node._id] = node;\r\n    //                        nodes.push(node);\r\n    //                    }\r\n    //                }\r\n    //            }\r\n    //        }, this);\r\n    //        return nodes;\r\n    //    },\r\n    getCheckedNodesId: function (mode, delimiter) {\r\n        var nodes = this.getCheckedNodes(mode);\r\n        var vts = this.getValueAndText(nodes, delimiter);\r\n        return vts[0];\r\n    },\r\n    getCheckedNodesText: function (mode, delimiter) {\r\n        var nodes = this.getCheckedNodes(mode);\r\n        var vts = this.getValueAndText(nodes, delimiter);\r\n        return vts[1];\r\n    },\r\n    isChecked: function (node) {\r\n        node = this.getRecord(node);\r\n        if (!node) return null;\r\n        return node.checked === true || node.checked === 1;\r\n    },\r\n    getCheckState: function (node) {    //更新三态时，只获取父节点\r\n\r\n        node = this.getRecord(node);\r\n        if (!node) return null;\r\n        if (node.checked === true) return \"checked\";\r\n        if (!node[this.nodesField]) return \"unchecked\";\r\n\r\n        if (node.indeterminate) return \"indeterminate\";\r\n\r\n        var children = this.getChildNodes(node, true); \t\t\t//@@@ 要死了\r\n        for (var i = 0, l = children.length; i < l; i++) {\r\n            var node = children[i];\r\n            if (node.checked === true) return \"indeterminate\";\r\n        }\r\n        return \"unchecked\";\r\n    },\r\n    getUnCheckableNodes: function () {\r\n        var nodes = [];\r\n        this.cascadeChild(this.root, function (node) {\r\n            var checkable = this.getCheckable(node);\r\n            if (checkable == false) {\r\n                nodes.push(node);\r\n            }\r\n        }, this);\r\n        return nodes;\r\n    },\r\n    setCheckable: function (nodes, checkable) {  //disableCheckbox方法就不提供了\r\n        if (!nodes) return;\r\n        if (!mini.isArray(nodes)) nodes = [nodes];\r\n        nodes = nodes.clone();\r\n        checkable = !!checkable;\r\n        for (var i = nodes.length - 1; i >= 0; i--) {\r\n            var node = this.getRecord(nodes[i]);\r\n            if (!node) {\r\n                continue;\r\n            }\r\n            node.checkable = checked;\r\n        }\r\n        //        this.fire(\"checkchanged\", {nodes: [node]);\r\n    },\r\n    getCheckable: function (node) {\r\n        node = this.getRecord(node);\r\n        if (!node) return false;\r\n        if (node.checkable === true) return true;\r\n        if (node.checkable === false) return false;\r\n        return this.isLeafNode(node) ? true : !this.onlyLeafCheckable;\r\n    },\r\n    showNodeCheckbox: function (node, show) {\r\n\r\n    },\r\n    ///////////////////////////////////\r\n    reload: function (success, error, complete) {\r\n\r\n        this._loadingNode = null;\r\n\r\n\r\n        this.load(this.loadParams, success, error, complete);\r\n    },\r\n    _isNodeLoading: function () {\r\n        return !!this._loadingNode;\r\n    },\r\n    loadNode: function (node, expand) {\r\n\r\n        this._loadingNode = node;\r\n        var e = { node: node };\r\n        this.fire(\"beforeloadnode\", e);\r\n        //\r\n\r\n        var time = new Date();\r\n\r\n        var me = this;\r\n        me._doLoadAjax(me.loadParams, null, null, null, function (e) {\r\n            var t = new Date() - time;\r\n            if (t < 60) t = 60 - t;\r\n\r\n            setTimeout(function () {\r\n\r\n                //success\r\n                e.node = node;\r\n                me._OnPreLoad(e);\r\n\r\n                //e.node = me._loadingNode;\r\n                me._loadingNode = null;\r\n                if (me.loadParams) delete me.loadParams[me.idField];\r\n\r\n                var oldNodes = node[me.nodesField];\r\n                me.removeNodes(oldNodes);\r\n\r\n                var nodes = e.data;\r\n                if (nodes && nodes.length > 0) {\r\n\r\n                    me.collapse(node);  //addNodes之前    优化！！！\r\n\r\n                    me.addNodes(nodes, node);\r\n\r\n                    //清楚新增痕迹\r\n                    var all = me.getAllChildNodes(node);\r\n                    for (var i = 0, l = all.length; i < l; i++) {\r\n                        var treeNode = all[i];\r\n                        //me.acceptRecord(treeNode);\r\n                        delete treeNode._state;         //优化！！！\r\n                    }\r\n\r\n                    if (expand !== false) {\r\n                        me.expand(node, true);\r\n                    } else {\r\n                        me.collapse(node, true);\r\n                    }\r\n                } else {\r\n                    delete node[me.leafField];\r\n                    me.expand(node, true);\r\n                }\r\n\r\n\r\n                me.fire(\"loadnode\", e);\r\n                me.fire(\"load\", e);\r\n            }, t);\r\n        }, true);\r\n    }\r\n});\r\nmini.regClass(mini.DataTree, \"datatree\");\r\n\r\n\r\n\r\n//==========================================================================\r\n/* DataTable/DateTree Applys\r\n-----------------------------------------------------------------------------*/\r\nmini._DataTableApplys = {\r\n    /////////////////////////////////////////////\r\n    idField: \"id\",\r\n    textField: \"text\",\r\n    setAjaxData: function (value) {\r\n        this._dataSource.ajaxData = value;\r\n    },\r\n    getby_id: function (id) {\r\n        return this._dataSource.getby_id(id);\r\n    },\r\n    getValueAndText: function (records, delimiter) {\r\n        return this._dataSource.getValueAndText(records, delimiter);\r\n    },\r\n    setIdField: function (value) {\r\n        this._dataSource.setIdField(value);\r\n        this.idField = value;\r\n    },\r\n    getIdField: function () {\r\n        return this._dataSource.idField;\r\n    },\r\n    setTextField: function (value) {\r\n        this._dataSource.setTextField(value);\r\n        this.textField = value;\r\n    },\r\n    getTextField: function () {\r\n        return this._dataSource.textField;\r\n    },\r\n    //////////////////////////////\r\n    getLoadParams: function () {\r\n        return this._dataSource.loadParams;\r\n    },\r\n    clearData: function () {\r\n        this._dataSource.clearData();\r\n    },\r\n    loadData: function (data) {\r\n        this._dataSource.loadData(data);\r\n    },\r\n    setData: function (data) {\r\n        this._dataSource.loadData(data);\r\n    },\r\n    getData: function () {\r\n        return this._dataSource.getSource().clone();\r\n    },\r\n    getList: function () {\r\n        return this._dataSource.getList();\r\n    },\r\n    getDataView: function () {\r\n        return this._dataSource.getDataView();\r\n    },\r\n    getVisibleRows: function () {\r\n        if (this._useEmptyView) return [];\r\n        return this._dataSource.getVisibleRows();\r\n    },\r\n    toArray: function () {\r\n        return this._dataSource.toArray();\r\n    },\r\n    getRecord: function (id) {\r\n        if (typeof id == 'object') return id;\r\n        return this._dataSource.getRecord(id);\r\n    },\r\n    getRow: function (index) {\r\n        if (typeof index == 'object') return index;\r\n        return this._dataSource.getRow(index);\r\n    },\r\n    getRange: function (start, end) {\r\n        if (mini.isNull(start) || mini.isNull(end)) return;\r\n        return this._dataSource.getRange(start, end);\r\n    },\r\n    getAt: function (index) {\r\n        return this._dataSource.getAt(index);\r\n    },\r\n    indexOf: function (record) {\r\n        return this._dataSource.indexOf(record);\r\n    },\r\n    getRowByUID: function (uid) {\r\n        return this._dataSource.getby_id(uid);\r\n    },\r\n    getRowByUid: function (uid) {\r\n        return this.getRowByUID(uid);\r\n    },\r\n    getRowById: function (id) {\r\n        return this._dataSource.getbyId(id);\r\n    },\r\n    ///////////////////////////////\r\n    clearRows: function () {\r\n        this._dataSource.clearData();\r\n    },\r\n    //    getRows: function () {\r\n    //        return this._dataSource.toArray();\r\n    //    },\r\n    updateRow: function (record, field, value) {\r\n        this._dataSource.updateRecord(record, field, value);\r\n    },\r\n    addRow: function (record, index) {\r\n        var o = this._dataSource.insert(index, record);\r\n        \r\n        if (this.validateOnAdd) this.validateRow(record);\r\n        return o;\r\n    },\r\n    removeRow: function (record, autoSelect) {\r\n\r\n        return this._dataSource.remove(record, autoSelect);\r\n    },\r\n    removeRows: function (records, autoSelect) {\r\n        return this._dataSource.removeRange(records, autoSelect);\r\n    },\r\n    removeSelected: function () {\r\n        var row = this.getSelected();\r\n        if (row) {\r\n            this.removeRow(row, true);\r\n        }\r\n    },\r\n    removeRowAt: function (index, autoSelect) {\r\n        return this._dataSource.removeAt(index, autoSelect);\r\n    },\r\n    moveRow: function (row, index) {\r\n        this._dataSource.move(row, index);\r\n    },\r\n    addRows: function (records, index) {\r\n        return this._dataSource.insertRange(index, records);\r\n    },\r\n    findRows: function (field, value) {\r\n        return this._dataSource.findRecords(field, value);\r\n    },\r\n    findRow: function (field, value) {\r\n        return this._dataSource.findRecord(field, value);\r\n    },\r\n    //    removeSelected: function (select) {\r\n    //        var row = this.getSelected();\r\n    //        var index = this.indexOf(row);\r\n    //        this.removeRecord(row);\r\n    //        if (select !== false) {\r\n    //            row = this.getAt(index);\r\n    //            this.select(row ? index : index - 1);\r\n    //        }\r\n    //    },\r\n    //////////////////////////////////////////////////\r\n    multiSelect: false,\r\n    setMultiSelect: function (value) {\r\n        this._dataSource.setMultiSelect(value);\r\n        this.multiSelect = value;\r\n    },\r\n    getMultiSelect: function () {\r\n        return this._dataSource.getMultiSelect();\r\n    },\r\n    setCurrent: function (record) {\r\n        this._dataSource.setCurrent(record);\r\n    },\r\n    getCurrent: function () {\r\n        return this._dataSource.getCurrent();\r\n    },\r\n    isSelected: function (record) {\r\n        return this._dataSource.isSelected(record);\r\n    },\r\n    setSelected: function (record) {\r\n        this._dataSource.setSelected(record);\r\n    },\r\n    getSelected: function () {\r\n        return this._dataSource.getSelected();\r\n    },\r\n    getSelecteds: function () {\r\n        return this._dataSource.getSelecteds();\r\n    },\r\n    select: function (record, fireEvent) {\r\n\r\n        this._dataSource.select(record, fireEvent);\r\n    },\r\n    selects: function (records, fireEvent) {\r\n        this._dataSource.selects(records, fireEvent);\r\n    },\r\n    deselect: function (record, fireEvent) {\r\n        this._dataSource.deselect(record, fireEvent);\r\n    },\r\n    deselects: function (records, fireEvent) {\r\n        this._dataSource.deselects(records, fireEvent);\r\n    },\r\n    selectAll: function (fireEvent) {\r\n        this._dataSource.selectAll(fireEvent);\r\n    },\r\n    deselectAll: function (fireEvent) {\r\n        this._dataSource.deselectAll(fireEvent);\r\n    },\r\n    clearSelect: function (fireEvent) {\r\n        this.deselectAll(fireEvent);\r\n    },\r\n    selectPrev: function () {\r\n        this._dataSource.selectPrev();\r\n    },\r\n    selectNext: function () {\r\n        this._dataSource.selectNext();\r\n    },\r\n    selectFirst: function () {\r\n        this._dataSource.selectFirst();\r\n    },\r\n    selectLast: function () {\r\n        this._dataSource.selectLast();\r\n    },\r\n    selectRange: function (start, end) {\r\n        this._dataSource.selectRange(start, end);\r\n    },\r\n    //////////////////////////////////////////////////\r\n    filter: function (fn, scope) {\r\n        this._dataSource.filter(fn, scope);\r\n    },\r\n    clearFilter: function () {\r\n        this._dataSource.clearFilter();\r\n    },\r\n    sort: function (fn, scope, reverse) {\r\n        this._dataSource.sort(fn, scope, reverse);\r\n    },\r\n    clearSort: function () {\r\n        this._dataSource.clearSort();\r\n    },\r\n    findItems: function (a, b, c) {\r\n        return this._dataSource.findRecords(c, b, c);\r\n    },\r\n    ////////////////////////////////////////\r\n    getResultObject: function () {\r\n        return this._dataSource._resultObject || {};\r\n    },\r\n    isChanged: function () {\r\n        return this._dataSource.isChanged();\r\n    },\r\n    getChanges: function (state, onlyField) {\r\n        return this._dataSource.getChanges(state, onlyField);\r\n    },\r\n    accept: function () {\r\n        this._dataSource.accept();\r\n    },\r\n    reject: function () {\r\n        this._dataSource.reject();\r\n    },\r\n    acceptRecord: function (record) {\r\n        this._dataSource.acceptRecord(record);\r\n    },\r\n    rejectRecord: function (record) {\r\n        this._dataSource.rejectRecord(record);\r\n    }\r\n};\r\n\r\n\r\nmini._DataTreeApplys = {\r\n    addRow: null,\r\n    removeRow: null,\r\n    removeRows: null,\r\n    removeRowAt: null,\r\n    moveRow: null,\r\n\r\n    /////////////////////////////////////////////\r\n    setExpandOnLoad: function (value) {\r\n        this._dataSource.setExpandOnLoad(value);\r\n    },\r\n    getExpandOnLoad: function () {\r\n        return this._dataSource.getExpandOnLoad();\r\n    },\r\n    /////////////////////////////////////////////\r\n    isSelectedNode: function (node) {\r\n        node = this.getNode(node);\r\n        return this.getSelectedNode() === node;\r\n    },\r\n    selectNode: function (node, fireEvent) {\r\n        if (node) {\r\n            this._dataSource.select(node, fireEvent);\r\n        } else {\r\n            this._dataSource.deselect(this.getSelectedNode(), fireEvent);\r\n        }\r\n    },\r\n    getSelectedNode: function () {\r\n        return this.getSelected();\r\n    },\r\n    getSelectedNodes: function () {\r\n        return this.getSelecteds();\r\n    },\r\n    updateNode: function (node, field, value) {\r\n        this._dataSource.updateRecord(node, field, value);\r\n    },\r\n    addNode: function (node, action, parentNode) {\r\n        return this._dataSource.insertNode(node, action, parentNode);\r\n    },\r\n    removeNodeAt: function (index, parentNode) {\r\n        return this._dataSource.removeNodeAt(index, parentNode);\r\n        this._changed = true;\r\n    },\r\n    removeNode: function (node) {\r\n        return this._dataSource.removeNode(node);\r\n    },\r\n    moveNode: function (node, action, targetNode) {\r\n        this._dataSource.moveNode(node, action, targetNode);\r\n    },\r\n    addNodes: function (nodes, parentNode, action) {\r\n        return this._dataSource.addNodes(nodes, parentNode, action);\r\n    },\r\n    insertNodes: function (nodes, index, parentNode) {\r\n        return this._dataSource.insertNodes(index, nodes, parentNode);\r\n    },\r\n    moveNodes: function (nodes, targetNode, action) {\r\n        this._dataSource.moveNodes(nodes, targetNode, action);\r\n    },\r\n    removeNodes: function (nodes) {\r\n        return this._dataSource.removeNodes(nodes);\r\n    },\r\n    ////////////////////////////////////////    \r\n\r\n    expandOnLoad: false,            //默认全部收缩\r\n    checkRecursive: true,\r\n    autoCheckParent: false,\r\n    showFolderCheckBox: true,\r\n\r\n    idField: \"id\",\r\n    textField: \"text\",\r\n    parentField: \"pid\",\r\n    nodesField: \"children\",\r\n    checkedField: \"checked\",\r\n    leafField: 'isLeaf',\r\n    resultAsTree: true,\r\n\r\n    //    _changed: false,\r\n    //    isChanged: function () {\r\n    //        return this._changed;\r\n    //    },\r\n\r\n    setShowFolderCheckBox: function (value) {\r\n        this._dataSource.setShowFolderCheckBox(value);\r\n        if (this.doUpdate) this.doUpdate();\r\n        this.showFolderCheckBox = value;\r\n    },\r\n    getShowFolderCheckBox: function () {\r\n        return this._dataSource.getShowFolderCheckBox();\r\n    },\r\n    setCheckRecursive: function (value) {\r\n        this._dataSource.setCheckRecursive(value);\r\n        this.checkRecursive = value;\r\n    },\r\n    getCheckRecursive: function () {\r\n        return this._dataSource.getCheckRecursive();\r\n    },\r\n    setResultAsTree: function (value) {\r\n        this._dataSource.setResultAsTree(value);\r\n    },\r\n    getResultAsTree: function (value) {\r\n        return this._dataSource.resultAsTree;\r\n    },\r\n    setParentField: function (value) {\r\n        this._dataSource.setParentField(value);\r\n        this.parentField = value;\r\n    },\r\n    getParentField: function () {\r\n        return this._dataSource.parentField;\r\n    },\r\n    setLeafField: function (value) {\r\n        this._dataSource.leafField = value;\r\n        this.leafField = value;\r\n    },\r\n    getLeafField: function () {\r\n        return this._dataSource.leafField;\r\n    },\r\n    setNodesField: function (value) {\r\n        this._dataSource.setNodesField(value);\r\n        this.nodesField = value;\r\n    },\r\n    getNodesField: function () {\r\n        return this._dataSource.nodesField;\r\n    },\r\n    setCheckedField: function (value) {\r\n        this._dataSource.checkedField = value;\r\n        this.checkedField = value;\r\n    },\r\n    getCheckedField: function () {\r\n        return this.checkedField;\r\n    },\r\n    /////////////////////////////\r\n    findNodes: function (field, value) {\r\n        return this._dataSource.findRecords(field, value);\r\n    },\r\n    getLevel: function (node) {\r\n        return this._dataSource.getLevel(node);\r\n    },\r\n    isVisibleNode: function (node) {\r\n        return this._dataSource.isVisibleNode(node);\r\n    },\r\n\r\n    isEnabledNode: function (node) {\r\n        return this._dataSource.isEnabledNode(node);\r\n    },\r\n    isExpandedNode: function (node) {\r\n        return this._dataSource.isExpandedNode(node);\r\n    },\r\n    isCheckedNode: function (node) {\r\n        return this._dataSource.isCheckedNode(node);\r\n    },\r\n    isLeaf: function (node) {\r\n        return this._dataSource.isLeafNode(node);\r\n    },\r\n    hasChildren: function (node) {\r\n        return this._dataSource.hasChildren(node);\r\n    },\r\n    isAncestor: function (pnode, node) {\r\n        return this._dataSource.isAncestor(pnode, node);\r\n    },\r\n    getNode: function (node) {\r\n        return this._dataSource.getRecord(node);\r\n    },\r\n    getRootNode: function () {\r\n        return this._dataSource.getRootNode();\r\n    },\r\n    getParentNode: function (node) {\r\n        return this._dataSource.getParentNode.apply(this._dataSource, arguments);\r\n    },\r\n    getAncestors: function (node) {\r\n        return this._dataSource.getAncestors(node);\r\n    },\r\n    getAllChildNodes: function (node) {\r\n        return this._dataSource.getAllChildNodes.apply(this._dataSource, arguments);\r\n    },\r\n    getChildNodes: function (node, all) {\r\n        return this._dataSource.getChildNodes.apply(this._dataSource, arguments);\r\n    },\r\n    getChildNodeAt: function (index, node) {\r\n        return this._dataSource.getChildNodeAt.apply(this._dataSource, arguments);\r\n    },\r\n    indexOfNode: function (node) {\r\n        return this._dataSource.indexOfNode.apply(this._dataSource, arguments);\r\n    },\r\n    hasChildNodes: function (node) {\r\n        return this._dataSource.hasChildNodes.apply(this._dataSource, arguments);\r\n    },\r\n    isFirstNode: function (node) {\r\n        return this._dataSource.isFirstNode.apply(this._dataSource, arguments);\r\n    },\r\n    isLastNode: function (node) {\r\n        return this._dataSource.isLastNode.apply(this._dataSource, arguments);\r\n    },\r\n    getNextNode: function (node) {\r\n        return this._dataSource.getNextNode.apply(this._dataSource, arguments);\r\n    },\r\n    getPrevNode: function (node) {\r\n        return this._dataSource.getPrevNode.apply(this._dataSource, arguments);\r\n    },\r\n    getFirstNode: function (parentNode) {\r\n        return this._dataSource.getFirstNode.apply(this._dataSource, arguments);\r\n    },\r\n    getLastNode: function (parentNode) {\r\n        return this._dataSource.getLastNode.apply(this._dataSource, arguments);\r\n    },\r\n\r\n    ///////////////////////////////////\r\n    toggleNode: function (node) {\r\n        this._dataSource.toggle(node);\r\n    },\r\n    collapseNode: function (node, deep) {\r\n        this._dataSource.collapse(node, deep);\r\n    },\r\n    expandNode: function (node, deep) {\r\n        this._dataSource.expand(node, deep);\r\n    },\r\n    collapseAll: function () {\r\n        this.useAnimation = false;\r\n        this._dataSource.collapseAll();\r\n        this.useAnimation = true;\r\n    },\r\n    expandAll: function () {\r\n        this.useAnimation = false;\r\n        this._dataSource.expandAll();\r\n        this.useAnimation = true;\r\n    },\r\n    expandLevel: function (level) {\r\n        this.useAnimation = false;\r\n        this._dataSource.expandLevel(level);\r\n        this.useAnimation = true;\r\n    },\r\n    collapseLevel: function (level) {\r\n        this.useAnimation = false;\r\n        this._dataSource.collapseLevel(level);\r\n        this.useAnimation = true;\r\n    },\r\n    expandPath: function (node) {\r\n        this.useAnimation = false;\r\n        this._dataSource.expandPath(node);\r\n        this.useAnimation = true;\r\n    },\r\n    collapsePath: function (node) {\r\n        this.useAnimation = false;\r\n        this._dataSource.collapsePath(node);\r\n        this.useAnimation = true;\r\n    },\r\n    ////////////////////////////////\r\n    loadNode: function (node, options) {\r\n        this._dataSource.loadNode(node, options);\r\n    },\r\n    ////////////////////////////////\r\n    setCheckModel: function (value) {\r\n        this._dataSource.setCheckModel(value);\r\n    },\r\n    getCheckModel: function () {\r\n        return this._dataSource.getCheckModel();\r\n    },\r\n    setOnlyLeafCheckable: function (value) {\r\n        this._dataSource.setOnlyLeafCheckable(value);\r\n    },\r\n    getOnlyLeafCheckable: function () {\r\n        return this._dataSource.getOnlyLeafCheckable();\r\n    },\r\n    setAutoCheckParent: function (value) {\r\n        this._dataSource.setAutoCheckParent(value);\r\n    },\r\n    getAutoCheckParent: function () {\r\n        return this._dataSource.getAutoCheckParent();\r\n    },\r\n    checkNode: function (node, cascade) {\r\n        this._dataSource.checkNode(node, cascade);\r\n    },\r\n    uncheckNode: function (node, cascade) {\r\n        this._dataSource.uncheckNode(node, cascade);\r\n    },\r\n    checkNodes: function (nodes, cascade) {\r\n        this._dataSource.checkNodes(nodes, cascade);\r\n    },\r\n    uncheckNodes: function (nodes, cascade) {\r\n        this._dataSource.uncheckNodes(nodes, cascade);\r\n    },\r\n    checkAllNodes: function () {\r\n        this._dataSource.checkAllNodes();\r\n    },\r\n    uncheckAllNodes: function () {\r\n        this._dataSource.uncheckAllNodes();\r\n    },\r\n    getCheckedNodes: function () {\r\n        return this._dataSource.getCheckedNodes.apply(this._dataSource, arguments);\r\n    },\r\n    getCheckedNodesId: function () {\r\n        return this._dataSource.getCheckedNodesId.apply(this._dataSource, arguments);\r\n    },\r\n    getCheckedNodesText: function () {\r\n        return this._dataSource.getCheckedNodesText.apply(this._dataSource, arguments);\r\n    },\r\n    getNodesByValue: function (value) {\r\n        if (mini.isNull(value)) value = \"\";\r\n        value = String(value);\r\n        var nodes = [];\r\n        var ids = String(value).split(\",\");\r\n        for (var i = 0, l = ids.length; i < l; i++) {\r\n            var node = this.getNode(ids[i]);\r\n            if (node) nodes.push(node);\r\n        }\r\n        return nodes;\r\n    },\r\n    isChecked: function (node) {\r\n        return this._dataSource.isChecked.apply(this._dataSource, arguments);\r\n    },\r\n    getCheckState: function (node) {\r\n        return this._dataSource.getCheckState.apply(this._dataSource, arguments);\r\n    },\r\n    setCheckable: function (nodes, checkable) {\r\n        this._dataSource.setCheckable.apply(this._dataSource, arguments);\r\n    },\r\n    getCheckable: function (node) {\r\n        return this._dataSource.getCheckable.apply(this._dataSource, arguments);\r\n    },\r\n    ///////////////////////////\r\n    bubbleParent: function (node, fn, scope) {\r\n        this._dataSource.bubbleParent.apply(this._dataSource, arguments);\r\n    },\r\n    cascadeChild: function (node, fn, scope) {\r\n        this._dataSource.cascadeChild.apply(this._dataSource, arguments);\r\n    },\r\n    eachChild: function (node, fn, scope) {\r\n        this._dataSource.eachChild.apply(this._dataSource, arguments);\r\n    }\r\n};\r\n\r\n\r\n\n/*\r\n    ColumnModel 列模型\r\n        多表头\r\n        隐藏列\r\n        锁定列\r\n        分组列\r\n    事件：columnschanged   :   add/remove/resize/move\r\n\r\n    列模型数据：\r\n        原始列：columns\r\n            简单：列数组\r\n            复杂：列属性\r\n        列视图：_columnsRow（多行列）、_visibleColumns显示的单行列。\r\n            隐藏列：减少列，改变_visibleColumnsRow和_visibleColumns\r\n            锁定列：不增加、不减少列，不改变_visibleColumnsRow和_visibleColumns。\r\n                  _frozenStartColumn和_frozenEndColumn，约定一个表格显示的左右列区域。\r\n                  生成表头、行的时候，根据这两个参数来处理下就可以了。\r\n            行号列：创建时自己设置列\r\n            //分组列：在GridView层次增加虚列，与ColumnModel无关\r\n*/\r\nmini.ColumnModel = function (grid) {\r\n    this.owner = grid;\r\n    mini.ColumnModel.superclass.constructor.apply(this, arguments);\r\n    this._init();\r\n}\r\nmini.ColumnModel_ColumnID = 1;\r\nmini.extend(mini.ColumnModel, mini.Component, {\r\n\r\n    _defaultColumnWidth: 100,\r\n\r\n    _init: function () {\r\n        this.columns = [];                  //原始列（全）\r\n\r\n        this._columnsRow = [];              //多表头数组(全）\r\n        this._visibleColumnsRow = [];       //多表头数组（可视，去除隐藏列）\r\n\r\n        this._bottomColumns = [];           //底行列数组（全）\r\n        this._visibleColumns = [];          //可视的底行列数组（去除隐藏列）\r\n\r\n        this._idColumns = {};\r\n        this._nameColumns = {};\r\n        this._fieldColumns = {};\r\n    },\r\n    getColumns: function () {\r\n        return this.columns;\r\n    },\r\n    getAllColumns: function () {\r\n        var columns = [];\r\n        for (var id in this._idColumns) {\r\n            var column = this._idColumns[id];\r\n            columns.push(column);\r\n        }\r\n        return columns;\r\n    },\r\n    getColumnsRow: function () {\r\n        return this._columnsRow;\r\n    },\r\n    getVisibleColumnsRow: function () {\r\n        return this._visibleColumnsRow;\r\n    },\r\n    getBottomColumns: function () {\r\n        return this._bottomColumns;\r\n    },\r\n    getVisibleColumns: function () {\r\n        return this._visibleColumns;\r\n    },\r\n    _getBottomColumnsByColumn: function (column) {\r\n        //获取某列最底层的列数组\r\n        column = this.getColumn(column);\r\n        var columns = this._bottomColumns;\r\n        var cs = [];\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var c = columns[i];\r\n            if (this.isAncestorColumn(column, c)) cs.push(c);\r\n        }\r\n        return cs;\r\n    },\r\n    _getVisibleColumnsByColumn: function (column) {\r\n        //获取某列最底层的可视列数组\r\n        column = this.getColumn(column);\r\n        var columns = this._visibleColumns;\r\n        var cs = [];\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var c = columns[i];\r\n            if (this.isAncestorColumn(column, c)) cs.push(c);\r\n        }\r\n        return cs;\r\n    },\r\n    setColumns: function (columns) {\r\n        if (!mini.isArray(columns)) columns = [];\r\n        this._init();\r\n        this.columns = columns;\r\n        this._columnsChanged();\r\n    },\r\n    _columnsChanged: function () {\r\n        this._updateColumnsView();\r\n        this.fire(\"columnschanged\");\r\n    },\r\n\r\n    columnDefaults: {\r\n        allowCellWrap: false\r\n    },\r\n\r\n    _updateColumnsView: function () {\r\n        //_id, _pid, _level, \r\n        this._maxColumnLevel = 0;\r\n        var level = 0;\r\n        function init(column, index, parentColumn) {\r\n            if (column.type) {\r\n                if (!mini.isNull(column.header) && typeof column.header !== \"function\") {\r\n                    if (column.header.trim() == \"\") {\r\n                        delete column.header;\r\n                    }\r\n                }\r\n                var col = mini._getColumn(column.type);\r\n                if (col) {\r\n                    var _column = mini.copyTo({}, column);\r\n                    mini.copyTo(column, col);\r\n                    mini.copyTo(column, _column);\r\n                }\r\n            }\r\n\r\n            //_id, _pid\r\n            if (!column._id) column._id = mini.ColumnModel_ColumnID++;\r\n            column._pid = parentColumn == this ? -1 : parentColumn._id;\r\n            this._idColumns[column._id] = column;\r\n            if (column.name) this._nameColumns[column.name] = column;\r\n\r\n            //level\r\n            column._level = level;\r\n            level += 1;\r\n            this.eachColumns(column, init, this);\r\n            level -= 1;\r\n            if (column._level > this._maxColumnLevel) this._maxColumnLevel = column._level;\r\n\r\n            //width\r\n            var width = parseInt(column.width);\r\n            if (mini.isNumber(width) && String(width) == column.width) column.width = width + \"px\";\r\n            if (mini.isNull(column.width)) column.width = this._defaultColumnWidth + \"px\";\r\n            if (String(column.width).indexOf('px')) {\r\n                column.pxWidth = parseInt(column.width);\r\n            }\r\n\r\n            column.visible = column.visible !== false;\r\n            column.allowResize = column.allowResize !== false;\r\n            column.allowMove = column.allowMove !== false;      //列移动\r\n            column.allowSort = column.allowSort === true;       //列排序\r\n            column.allowDrag = !!column.allowDrag;              //行移动\r\n            column.readOnly = !!column.readOnly;\r\n            //column.autoEscape = column.autoEscape !== false;\r\n            column.autoEscape = !!column.autoEscape;\r\n            column.enabled = column.enabled !== false;\r\n\r\n            column.showCellTip = column.showCellTip !== false;\r\n\r\n            //if(column.header == '姓名') debugger\r\n\r\n            column.valueFromSelect = column.valueFromSelect !== false;\r\n\r\n            column.vtype = column.vtype || \"\";\r\n\r\n\r\n\r\n            //column.allowCellWrap = column.allowCellWrap == true;\r\n\r\n            if (column.allowCellWrap == null) column.allowCellWrap = this.columnDefaults.allowCellWrap;\r\n\r\n\r\n            //editor\r\n\r\n            //filter\r\n            if (typeof column.filter == \"string\") {\r\n                column.filter = window[\"ev\" + \"al\"]('(' + column.filter + ')');\r\n            }\r\n            if (column.filter && !column.filter.el) {\r\n                column.filter = mini.create(column.filter);\r\n            }\r\n\r\n            //init\r\n            if (typeof column.init == \"function\" && column.inited != true) {\r\n                column.init(this.owner);\r\n            }\r\n            column.inited = true;   //如果移除column，将inited去除，这样到新表格，才正常。一般也不会那么复杂。\r\n\r\n            //历史问题\r\n            column._gridUID = this.owner.uid;\r\n            column._rowIdField = this.owner._rowIdField;\r\n        }\r\n        this.eachColumns(this, init, this);\r\n\r\n        //多表头行\r\n        this._createColumnsRow();\r\n\r\n        //底部显示的列集合\r\n        var index = 0;\r\n        var view = this._visibleColumns = [];\r\n        var bottoms = this._bottomColumns = [];\r\n        this.cascadeColumns(this, function (column) {\r\n            if (!column.columns || column.columns.length == 0) {\r\n                bottoms.push(column);\r\n                if (this.isVisibleColumn(column)) {\r\n                    view.push(column);\r\n                    column._index = index++;\r\n                }\r\n            }\r\n        }, this);\r\n\r\n        this._fieldColumns = {};\r\n        var columns = this.getAllColumns();\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            if (column.field && !this._fieldColumns[column.field]) {\r\n                this._fieldColumns[column.field] = column;\r\n            }\r\n        }\r\n\r\n        //计算锁定colspan1、非锁定colspan2\r\n        this._createFrozenColSpan();\r\n    },\r\n    //////////////////////////////////////////////////\r\n    _frozenStartColumn: -1,\r\n    _frozenEndColumn: -1,\r\n    isFrozen: function () {\r\n        return this._frozenStartColumn >= 0 && this._frozenEndColumn >= this._frozenStartColumn;\r\n    },\r\n    isFrozenColumn: function (column) {\r\n        if (!this.isFrozen()) return false;\r\n        column = this.getColumn(column);\r\n        if (!column) return false;\r\n        var index = this.getVisibleColumns().indexOf(column);\r\n        return this._frozenStartColumn <= index && index <= this._frozenEndColumn;\r\n    },\r\n    frozen: function (startColumn, finishColumn) {\r\n        startColumn = this.getColumn(startColumn);\r\n        finishColumn = this.getColumn(finishColumn);\r\n\r\n        var columns = this.getVisibleColumns();\r\n        this._frozenStartColumn = columns.indexOf(startColumn);\r\n        this._frozenEndColumn = columns.indexOf(finishColumn);\r\n\r\n        if (startColumn && finishColumn) {\r\n            this._columnsChanged();\r\n        }\r\n    },\r\n    unFrozen: function () {\r\n        this._frozenStartColumn = -1;\r\n        this._frozenEndColumn = -1;\r\n        this._columnsChanged();\r\n    },\r\n    setFrozenStartColumn: function (value) {\r\n        this.frozen(value, this._frozenEndColumn);\r\n    },\r\n    setFrozenEndColumn: function (value) {\r\n        this.frozen(this._frozenStartColumn, value);\r\n    },\r\n    getFrozenColumns: function () {\r\n        var columns = [], isFrozen = this.isFrozen();\r\n        for (var i = 0, l = this._visibleColumns.length; i < l; i++) {\r\n            if (isFrozen && this._frozenStartColumn <= i && i <= this._frozenEndColumn) {\r\n                columns.push(this._visibleColumns[i]);\r\n            }\r\n        }\r\n        return columns;\r\n    },\r\n    getUnFrozenColumns: function () {\r\n        var columns = [], isFrozen = this.isFrozen();\r\n        for (var i = 0, l = this._visibleColumns.length; i < l; i++) {\r\n            if ((isFrozen && i > this._frozenEndColumn) || !isFrozen) {\r\n                columns.push(this._visibleColumns[i]);\r\n            }\r\n        }\r\n        return columns;\r\n    },\r\n    getFrozenColumnsRow: function () {\r\n        return this.isFrozen() ? this._columnsRow1 : [];\r\n    },\r\n    getUnFrozenColumnsRow: function () {\r\n        return this.isFrozen() ? this._columnsRow2 : this.getVisibleColumnsRow();\r\n    },\r\n    //////////////////////////////////////////////////\r\n    _createFrozenColSpan: function () {\r\n        //计算锁定前的colspan0、锁定colspan1、非锁定colspan2：一共有3个区段\r\n        //步骤：从visibleColumns遍历，向上计算父column的colspan\r\n        var me = this;\r\n        var visibleColumns = this.getVisibleColumns();\r\n        var start = this._frozenStartColumn, end = this._frozenEndColumn;\r\n\r\n        function isViewIndex(column, viewIndex) {\r\n            var columns = me.isBottomColumn(column) ? [column] : me._getVisibleColumnsByColumn(column);\r\n            for (var i = 0, l = columns.length; i < l; i++) {\r\n                var c = columns[i];\r\n                var index = visibleColumns.indexOf(c);\r\n                if (viewIndex == 0 && index < start) return true;\r\n                if (viewIndex == 1 && start <= index && index <= end) return true;\r\n                if (viewIndex == 2 && index > end) return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        function getColSpan(col, viewIndex) {\r\n            var subColumns = mini.treeToList(col.columns, \"columns\");\r\n            var colSpan = 0;\r\n            for (var i = 0, l = subColumns.length; i < l; i++) {\r\n                var c = subColumns[i];\r\n                if (me.isVisibleColumn(c) == false || isViewIndex(c, viewIndex) == false) continue;\r\n                if (!c.columns || c.columns.length == 0) {//只处理最底层的列\r\n                    colSpan += 1;\r\n                }\r\n            }\r\n            return colSpan;\r\n        }\r\n\r\n        var list = mini.treeToList(this.columns, \"columns\");\r\n        for (var i = 0, l = list.length; i < l; i++) {\r\n            var column = list[i];\r\n            //if (column.header == 'Order') debugger\r\n            delete column.colspan0;\r\n            delete column.colspan1;\r\n            delete column.colspan2;\r\n\r\n            delete column.viewIndex0;\r\n            delete column.viewIndex1;\r\n            delete column.viewIndex2;\r\n\r\n            if (this.isFrozen()) {\r\n                if (column.columns && column.columns.length > 0) {\r\n                    column.colspan1 = getColSpan(column, 1);\r\n                    column.colspan2 = getColSpan(column, 2);\r\n                    column.colspan0 = getColSpan(column, 0);\r\n                } else {\r\n                    column.colspan1 = 1;\r\n                    column.colspan2 = 1;\r\n                    column.colspan0 = 1;\r\n                }\r\n                //确定列属于什么区域\r\n                if (isViewIndex(column, 0)) {\r\n                    column[\"viewIndex\" + 0] = true;\r\n                }\r\n                if (isViewIndex(column, 1)) {\r\n                    column[\"viewIndex\" + 1] = true;\r\n                }\r\n                if (isViewIndex(column, 2)) {\r\n                    column[\"viewIndex\" + 2] = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        //创建锁定列、非锁定列的列行数组\r\n        var maxLevel = this._getMaxColumnLevel();\r\n        this._columnsRow1 = [];\r\n        this._columnsRow2 = [];\r\n        for (var i = 0, l = this._visibleColumnsRow.length; i < l; i++) {\r\n            var columns = this._visibleColumnsRow[i];\r\n            var columns1 = [];\r\n            var columns2 = [];\r\n            this._columnsRow1.push(columns1);\r\n            this._columnsRow2.push(columns2);\r\n\r\n            for (var j = 0, k = columns.length; j < k; j++) {\r\n                var c = columns[j];\r\n                if (c.viewIndex1) columns1.push(c);\r\n                if (c.viewIndex2) columns2.push(c);\r\n            }\r\n        }\r\n    },\r\n    _createColumnsRow: function () {\r\n        //创建列行数组：可视的。\r\n        var maxLevel = this._getMaxColumnLevel();\r\n\r\n        var columnsRow = [];\r\n        var visibleColumnsRow = [];\r\n        for (var i = 0, l = maxLevel; i <= l; i++) {\r\n            columnsRow.push([]);\r\n            visibleColumnsRow.push([]);\r\n        }\r\n\r\n        var me = this;\r\n        function getColSpan(col) {\r\n            var subColumns = mini.treeToList(col.columns, \"columns\");\r\n            var colSpan = 0;\r\n            for (var i = 0, l = subColumns.length; i < l; i++) {\r\n                var c = subColumns[i];\r\n                if (me.isVisibleColumn(c) == false) continue;\r\n                if (!c.columns || c.columns.length == 0) {\r\n                    colSpan += 1;\r\n                }\r\n            }\r\n            return colSpan;\r\n        }\r\n\r\n        var list = mini.treeToList(this.columns, \"columns\");\r\n\r\n        for (var i = 0, l = list.length; i < l; i++) {\r\n            var column = list[i];\r\n            var cols = columnsRow[column._level];\r\n            var vcols = visibleColumnsRow[column._level];\r\n\r\n            delete column.rowspan;\r\n            delete column.colspan;\r\n\r\n            if (column.columns && column.columns.length > 0) {\r\n                column.colspan = getColSpan(column);\r\n            }\r\n            if ((!column.columns || column.columns.length == 0) && column._level < maxLevel) {\r\n                column.rowspan = maxLevel - column._level + 1;\r\n            }\r\n            //if (column.header == '工作信息') debugger\r\n            cols.push(column);\r\n            if (this.isVisibleColumn(column)) {\r\n                vcols.push(column);\r\n            }\r\n        }\r\n        //debugger\r\n        this._columnsRow = columnsRow;\r\n        this._visibleColumnsRow = visibleColumnsRow;\r\n    },\r\n    _getMaxColumnLevel: function () {\r\n        return this._maxColumnLevel;\r\n    },\r\n    cascadeColumns: function (node, fn, scope) {\r\n        if (!fn) return;\r\n        var nodes = node.columns;\r\n        if (nodes) {\r\n            nodes = nodes.clone();\r\n            for (var i = 0, l = nodes.length; i < l; i++) {\r\n                var c = nodes[i];\r\n                if (fn.call(scope || this, c, i, node) === false) return;\r\n                this.cascadeColumns(c, fn, scope);\r\n            }\r\n        }\r\n    },\r\n    eachColumns: function (column, fn, scope) {\r\n        var columns = column.columns;\r\n        if (columns) {\r\n            var list = columns.clone();\r\n            for (var i = 0, l = list.length; i < l; i++) {\r\n                var o = list[i];\r\n                if (fn.call(scope, o, i, column) === false) break;\r\n            }\r\n        }\r\n    },\r\n    getColumn: function (index) {\r\n        var t = typeof index;\r\n        if (t == \"number\") return this._bottomColumns[index];\r\n        else if (t == \"object\") return index;\r\n        else {\r\n            return this._nameColumns[index];\r\n        }\r\n    },\r\n    getColumnByField: function (field) {\r\n        if (!field) return null;\r\n        return this._fieldColumns[field];\r\n    },\r\n    _getColumnById: function (id) {\r\n        return this._idColumns[id];\r\n    },\r\n    _getDataTypeByField: function (field) {\r\n        var sortType = \"string\";\r\n        var columns = this.getBottomColumns();\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            if (column.field == field) {\r\n                if (column.sortType) {\r\n                    sortType = column.sortType.toLowerCase();\r\n                } else if (column.dataType) sortType = column.dataType.toLowerCase();\r\n                break;\r\n            }\r\n        }\r\n\r\n        //        var first = \r\n        //        if(!sortType \r\n\r\n        return sortType;\r\n    },\r\n    getParentColumn: function (column) {\r\n        column = this.getColumn(column);\r\n        var pid = column._pid;\r\n        if (pid == -1) return this;\r\n        return this._idColumns[pid];\r\n    },\r\n    getAncestorColumns: function (node) {\r\n        var as = [node];\r\n        while (1) {\r\n            var parentNode = this.getParentColumn(node);\r\n            if (!parentNode || parentNode == this) break;\r\n            as[as.length] = parentNode;\r\n            node = parentNode;\r\n        }\r\n        as.reverse();\r\n        return as;\r\n    },\r\n    isAncestorColumn: function (parentNode, node) {\r\n        if (parentNode == node) return true;\r\n        if (!parentNode || !node) return false;\r\n        var as = this.getAncestorColumns(node);\r\n        for (var i = 0, l = as.length; i < l; i++) {\r\n            if (as[i] == parentNode) return true;\r\n        }\r\n        return false;\r\n    },\r\n    isVisibleColumn: function (column) {\r\n        column = this.getColumn(column);\r\n        if (column.visible == false) return false;\r\n\r\n        var columns = this.getAncestorColumns(column);\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            if (columns[i].visible == false) return false;\r\n        }\r\n\r\n        var nodes = column.columns;\r\n        if (nodes) {\r\n            var allHide = true;\r\n            for (var i = 0, l = nodes.length; i < l; i++) {\r\n                var node = nodes[i];\r\n                if (this.isVisibleColumn(node)) {\r\n                    allHide = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (allHide) return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n    isBottomColumn: function (column) {\r\n        column = this.getColumn(column);\r\n        return !(column.columns && column.columns.length > 0);\r\n    },\r\n    ////////////////////////////////\r\n    updateColumn: function (column, options) {\r\n        column = this.getColumn(column);\r\n        if (!column) return;\r\n        mini.copyTo(column, options);\r\n        this._columnsChanged();\r\n    },\r\n    moveColumn: function (column, targetColumn, action) {\r\n        column = this.getColumn(column);\r\n        targetColumn = this.getColumn(targetColumn);\r\n        if (!column || !targetColumn || !action || column == targetColumn) return;\r\n\r\n        if (this.isAncestorColumn(column, targetColumn)\r\n            ) {\r\n            return;\r\n        }\r\n\r\n        //先删除column\r\n        var pcolumn = this.getParentColumn(column);\r\n        if (pcolumn) {\r\n            pcolumn.columns.remove(column);\r\n        }\r\n\r\n        //后加入到新位置\r\n        var parentColumn = targetColumn;\r\n        var index = action;\r\n        if (index == 'before') {\r\n            parentColumn = this.getParentColumn(targetColumn);\r\n            index = parentColumn.columns.indexOf(targetColumn);\r\n        } else if (index == 'after') {\r\n            parentColumn = this.getParentColumn(targetColumn);\r\n            index = parentColumn.columns.indexOf(targetColumn) + 1;\r\n        } else if (index == 'add' || index == \"append\") {\r\n            if (!parentColumn.columns) parentColumn.columns = [];\r\n            index = parentColumn.columns.length;\r\n        } else if (!mini.isNumber(index)) {\r\n            return;\r\n        }\r\n\r\n        parentColumn.columns.insert(index, column);\r\n\r\n        this._columnsChanged();\r\n    },\r\n    addColumn: function (column) {\r\n        if (!column) return;\r\n        delete column._id;\r\n        this._columnsChanged();\r\n    },\r\n    removeColumn: function () {\r\n        this._columnsChanged();\r\n    }\r\n});\n/*\r\n============================================================\r\n描述：        \r\n1.实现ColumnModal、DataSource\r\n2.实现Pager：客户端分页、服务端分页\r\n3.实现FilterRow、SummaryRow、BottomPager\r\n4.实现TableView渲染视图模式\r\n5.实现FitColumns、FixedColumns两种列宽显示模式\r\n============================================================\r\nGridView（基础表格视图）\r\n->  FrezonGridView（锁定列视图）\r\n->  ScrollGridView（动态表格视图）\r\n->  DataGrid（数据表格）\r\n->  TreeGrid（树形表格）\r\n->  Tree（树控件）\r\n============================================================\r\n1.getData()             原始数据。数据结构：数组、树形。\r\n2.getList()             原始数据。数据结构：数组。（树形转为数组）\r\n3.getDataView()         数据视图。客户端排序、过滤后。数据结构：数组。\r\n4.getVisibleRows()      可视数据视图。在DataView基础上，增加了树折叠处理。（是否加分组处理呢？）\r\n5.getGroupingView()     分组数据视图。[group, group, ...]\r\n*/\r\nmini.GridView = function () {\r\n    this._createTime = new Date();  //控件的创建时间\r\n\r\n    //columnModel\r\n    this._createColumnModel();\r\n    this._bindColumnModel();\r\n\r\n    //dataSource\r\n    this.data = [];\r\n    this._createSource();\r\n    this._bindSource();\r\n\r\n    this._initData();\r\n\r\n    mini.GridView.superclass.constructor.apply(this, arguments);\r\n\r\n\r\n    this._doUpdateFilterRow();\r\n    this._doUpdateSummaryRow();\r\n\r\n    this.doUpdate();\r\n\r\n\r\n    if (mini.isNull(this._paddingTop)) {\r\n\r\n        if (mini.isNull(mini.GridView._paddingTop)) {\r\n            var d = jQuery('<div class=\"mini-grid-cell-inner\" style=\"position:absolute;left:-1000px;top:-1000px;\"></div>').appendTo('body');\r\n            var p = mini.getPaddings(d);\r\n            mini.GridView._paddingTop = p.top;\r\n            mini.GridView._paddingBottom = p.bottom;\r\n        }\r\n        this._paddingTop = mini.GridView._paddingTop;\r\n        this._paddingBottom = mini.GridView._paddingBottom;\r\n    }\r\n\r\n    this._rowClsHash = {};\r\n\r\n}\r\nmini.extend(mini.GridView, mini.Panel, {\r\n    _displayStyle: \"block\",\r\n\r\n    _rowIdField: \"_id\",\r\n\r\n    width: \"100%\",\r\n\r\n    showSortIcon: false,\r\n\r\n    showColumns: true,\r\n    showFilterRow: false,\r\n    showSummaryRow: false,\r\n    summaryRows: 1,\r\n    showPager: false,\r\n\r\n    allowCellWrap: false,\r\n    allowHeaderWrap: false,\r\n\r\n    showModified: true,\r\n    showNewRow: true,\r\n\r\n    showEmptyText: false,\r\n    emptyText: \"No data returned.\",\r\n\r\n    showHGridLines: true,\r\n    showVGridLines: true,\r\n\r\n    _rowCls: \"mini-grid-row\",\r\n    _cellCls: \"mini-grid-cell\",\r\n    _headerCellCls: \"mini-grid-headerCell\",\r\n\r\n    _rowSelectedCls: \"mini-grid-row-selected\",\r\n    _rowHoverCls: \"mini-grid-row-hover\",\r\n\r\n    _cellSelectedCls: \"mini-grid-cell-selected\",\r\n\r\n    defaultRowHeight: 25,\r\n    fixedRowHeight: false,\r\n    isFixedRowHeight: function () {\r\n        return this.fixedRowHeight;\r\n    },\r\n\r\n    fitColumns: true,\r\n    isFitColumns: function () {\r\n        return this.fitColumns;\r\n    },\r\n\r\n    allowAlternating: false,\r\n    _alternatingCls: \"mini-grid-row-alt\",\r\n    getAllowAlternating: function () {\r\n        return this.allowAlternating;\r\n    },\r\n    setAllowAlternating: function (value) {\r\n        this.allowAlternating = value;\r\n        this.doUpdate();\r\n    },\r\n\r\n    showGroupSummary: false,\r\n    getShowGroupSummary: function () {\r\n        return this.showGroupSummary;\r\n    },\r\n    setShowGroupSummary: function (value) {\r\n        this.showGroupSummary = value;\r\n    },\r\n\r\n    summaryPosition: \"bottom\",      //top, flow?\r\n    getSummaryPosition: function () {\r\n        return this.summaryPosition;\r\n    },\r\n    setSummaryPosition: function (value) {\r\n\r\n        this.summaryPosition = value;\r\n\r\n\r\n        //alert(this.summaryPosition);\r\n        if (this.summaryPosition == \"top\") {\r\n            mini.before(this._rowsEl, this._summaryEl);\r\n            mini.before(this._summaryViewEl, this._summaryLockEl);\r\n        }\r\n\r\n        jQuery(this.el).toggleClass('mini-grid-summary-top', value == 'top');\r\n\r\n    },\r\n\r\n    uiCls: \"mini-gridview\",\r\n    _create: function () {\r\n\r\n        mini.GridView.superclass._create.call(this);\r\n        var el = this.el;\r\n        mini.addClass(el, 'mini-grid');\r\n        mini.addClass(this._borderEl, 'mini-grid-border');\r\n        mini.addClass(this._viewportEl, 'mini-grid-viewport');\r\n\r\n        var bottomPager = '<div class=\"mini-grid-pager\"></div>';\r\n        var filter = '<div class=\"mini-grid-filterRow\"><div class=\"mini-grid-filterRow-view\"></div><div class=\"mini-grid-scrollHeaderCell\"></div></div>';\r\n        var summary = '<div class=\"mini-grid-summaryRow\"><div class=\"mini-grid-summaryRow-view\"></div><div class=\"mini-grid-scrollHeaderCell\"></div></div>';\r\n        var columns = '<div class=\"mini-grid-columns\"><div class=\"mini-grid-columns-view\"></div><div class=\"mini-grid-scrollHeaderCell\"></div></div>';\r\n\r\n\r\n        this._columnsEl = mini.after(this._toolbarEl, columns);\r\n        this._filterEl = mini.after(this._columnsEl, filter);\r\n        this._rowsEl = this._bodyEl;\r\n        mini.addClass(this._rowsEl, \"mini-grid-rows\");\r\n\r\n        this._summaryEl = mini.after(this._rowsEl, summary);\r\n\r\n\r\n\r\n        this._bottomPagerEl = mini.after(this._summaryEl, bottomPager);\r\n\r\n        this._columnsViewEl = this._columnsEl.childNodes[0];\r\n        //this._topRightCellEl = this._columnsEl.childNodes[1];\r\n\r\n        //内嵌一个div(zoom:1)，消除ie7下横向滚动条BUG\r\n        this._rowsViewEl = mini.append(this._rowsEl, '<div class=\"mini-grid-rows-view\"><div class=\"mini-grid-rows-content\"></div></div>')\r\n        this._rowsViewContentEl = this._rowsViewEl.firstChild;\r\n\r\n        //filter\r\n        this._filterViewEl = this._filterEl.childNodes[0];\r\n        //summary\r\n        this._summaryViewEl = this._summaryEl.childNodes[0];\r\n\r\n        var s = '<a href=\"#\" class=\"mini-grid-focus\" style=\"position:absolute;left:0px;top:0px;width:0px;height:0px;outline:none;\" hideFocus onclick=\"return false\" ></a>';\r\n        this._focusEl = mini.append(this._borderEl, s);\r\n\r\n        //        if (mini.isChrome) {\r\n        //            $(this._focusEl).remove();\r\n\r\n        //            var s = '<div tabindex=0 class=\"mini-grid-focus\" style=\"position:absolute;left:0px;top:0px;width:0px;height:0px;outline:none;\" hideFocus onclick=\"return false\" ></div>';\r\n        //            this._focusEl = mini.append(this._borderEl, s);\r\n\r\n        //            \r\n        //        }\r\n\r\n        //this._focusEl.onfocus = function\r\n        //        mini.on(this._focusEl, \"focus\", function (e) {\r\n        //            e.preventDefault();\r\n        //        });\r\n        var me = this;\r\n        mini.on(this._filterViewEl, \"scroll\", function (e) {\r\n            if (me._filterViewEl.scrollLeft > 0) {\r\n                me._filterViewEl.scrollLeft = 0;\r\n            }\r\n        });\r\n    },\r\n    destroy: function (removeEl) {\r\n\r\n        if (this._dataSource) {\r\n            this._dataSource.destroy();\r\n            this._dataSource = null;\r\n        }\r\n        if (this._columnModel) {\r\n            this._columnModel.destroy();\r\n            this._columnModel = null;\r\n        }\r\n        if (this._pagers) {\r\n            var ps = this._pagers.clone();\r\n            for (var i = 0, l = ps.length; i < l; i++) {\r\n                ps[i].destroy(removeEl);\r\n            }\r\n\r\n            this._pagers = null;\r\n        }\r\n        if (this._viewportEl) {\r\n            mini.clearEvent(this._viewportEl);\r\n        }\r\n\r\n        if (this._rowsViewEl) {\r\n            mini.clearEvent(this._rowsViewEl);\r\n        }\r\n        if (this._rowsEl) {                      //FrozenGridView\r\n            mini.clearEvent(this._rowsEl);\r\n        }\r\n        if (this._vscrollEl) {                   //ScrollGridView\r\n            mini.clearEvent(this._vscrollEl)\r\n        }\r\n\r\n        if (this._headerEl) {                     //_Sorter\r\n            mini.clearEvent(this._headerEl)\r\n        }\r\n        if (this._columnsEl) {\r\n            jQuery(this._columnsEl).unbind(\"mouseenter\");    //_Grid_Select\r\n            jQuery(this._columnsEl).unbind(\"mouseleave\");\r\n        }\r\n\r\n        this._columnsEl = this._rowsEl = this._filterEl = this._summaryEl = this._bottomPagerEl = null;\r\n        this._columnsViewEl = this._topRightCellEl = this._rowsViewEl = this._rowsViewContentEl = null;\r\n        this._filterViewEl = this._summaryViewEl = this._focusEl = null;\r\n        this._viewportEl = this._vscrollEl = this._bottomPager = null;\r\n\r\n        mini.GridView.superclass.destroy.call(this, removeEl);\r\n    },\r\n    _initEvents: function () {\r\n        mini.GridView.superclass._initEvents.call(this);\r\n\r\n        this._bindScrollEvent();\r\n\r\n        //this._unbindScrollEvent();\r\n    },\r\n\r\n    //    count1: 0,\r\n    //    count2: 0,\r\n\r\n    _bindScrollEvent: function () {\r\n        var me = this;\r\n        this._unbindScrollEvent();\r\n        this._scrollBindTimer = setTimeout(function () {\r\n            //$(\"#div1\").html(me.count1++);\r\n            mini.on(me._rowsViewEl, \"scroll\", me.__OnRowViewScroll, me);\r\n        }, 100);\r\n    },\r\n\r\n    _unbindScrollEvent: function () {\r\n        var me = this;\r\n        if (this._scrollBindTimer) {\r\n            clearTimeout(this._scrollBindTimer);\r\n            this._scrollBindTimer = null;\r\n        }\r\n        //$(\"#div2\").html(me.count2++);\r\n        mini.un(this._rowsViewEl, \"scroll\", this.__OnRowViewScroll, this);\r\n    },\r\n\r\n    _syncScrollOffset: function (left, top) {\r\n        this._unbindScrollEvent();\r\n        if (left != null) {\r\n            this._rowsViewEl.scrollLeft = left;\r\n        }\r\n        if (top != null) {\r\n\r\n            //debugger\r\n            this._rowsViewEl.scrollTop = top;\r\n            if (this._vscrollEl) {\r\n            }\r\n        }\r\n        this._bindScrollEvent();\r\n    },\r\n\r\n    //    _sizeChanged: function () {\r\n    //        this.deferLayout();\r\n    //    },\r\n    _sizeChanged: function () {\r\n        mini.GridView.superclass._sizeChanged.call(this);\r\n        /*if (this.isAutoHeight()) {\r\n        mini.addClass(this.el, 'mini-grid-autoheight');\r\n        } else {\r\n        mini.removeClass(this.el, 'mini-grid-autoheight');\r\n        }*/\r\n\r\n        var autoHeight = this.isAutoHeight();\r\n        if (mini.isIE) {\r\n            if (autoHeight) {\r\n                mini.addClass(this._rowsViewEl, 'mini-grid-hidden-y');\r\n            } else {\r\n                mini.removeClass(this._rowsViewEl, 'mini-grid-hidden-y');\r\n            }\r\n        }\r\n\r\n    },\r\n    _setBodyWidth: false,\r\n\r\n    doLayoutCardView: function () {\r\n        var me = this,\r\n            hasVScroll = this._rowsViewEl.scrollHeight > this._rowsViewEl.clientHeight + 1,\r\n            hdTable = this._columnsViewEl.firstChild,\r\n            paddingRight = hasVScroll ? mini.getScrollOffset() : 0;\r\n\r\n        //        var bodyWidth = this._rowsViewContentEl.parentNode.offsetWidth;\r\n        //        var tableWidth = bodyWidth - (hasVScroll ? mini.getScrollOffset() : 0);\r\n        //        hdTable.style.width = tableWidth + \"px\";\r\n\r\n        hdTable.parentNode.style[\"paddingRight\"] = paddingRight + \"px\";\r\n        hdTable.style.width = \"100%\";\r\n\r\n    },\r\n\r\n    doLayout: function () {\r\n        var that = this;\r\n        if (!this.canLayout()) return;\r\n        mini.GridView.superclass.doLayout.call(this);\r\n\r\n        //alert(\"layout:\" + this.id);\r\n\r\n        this._stopLayout();\r\n\r\n        if (this.viewType == \"cardview\") {\r\n            this.doLayoutCardView();\r\n            return;\r\n        }\r\n\r\n        var autoHeight = this._autoHeight; // this.isAutoHeight();\r\n\r\n        if (mini.isIE) {\r\n            if (autoHeight) {\r\n                mini.addClass(this._rowsViewEl, 'mini-grid-hidden-y');\r\n            } else {\r\n                mini.removeClass(this._rowsViewEl, 'mini-grid-hidden-y');\r\n            }\r\n        }\r\n\r\n        var hdTable = this._columnsViewEl.firstChild;\r\n        var bdTable = this._rowsViewContentEl.firstChild;\r\n\r\n        var filterTable = this._filterViewEl.firstChild;\r\n        var summaryTable = this._summaryViewEl.firstChild;\r\n\r\n        var columnHeight = jQuery(this._columnsViewEl).height();\r\n        var filterRowHeight = filterTable.offsetHeight;\r\n\r\n        var hasVScroll = this._rowsViewEl.scrollHeight > this._rowsViewEl.clientHeight + 1;\r\n        var hasHScroll = this._rowsViewEl.scrollWidth > this._rowsViewEl.clientWidth + 1;\r\n\r\n        //alert(hasVScroll + \",\" + hasHScroll);\r\n\r\n        var bodyWidth = this._rowsViewContentEl.parentNode.offsetWidth;\r\n        //var tableWidth = bdTable.parentNode.offsetWidth;\r\n        var tableWidth = bodyWidth - (hasVScroll ? mini.getScrollOffset() : 0);\r\n        //alert(tableWidth);\r\n        //document.title = tableWidth;\r\n\r\n        //        if (autoHeight) {\r\n        //            mini.addClass(this.el, 'mini-grid-autoHeight');\r\n        //        } else {\r\n        //            mini.removeClass(this.el, 'mini-grid-autoHeight');\r\n        //        }\r\n\r\n        //alert(mini.isChrome);\r\n\r\n        function doLayout(hdTable) {\r\n            //fitColumns\r\n\r\n            if (this.isFitColumns()) {\r\n                bdTable.style.width = \"100%\";\r\n                //if(that.id == 'employee_grid') debugger\r\n\r\n                //                if (mini.isChrome) {                   \r\n                //                    if (hasVScroll) {\r\n                //                        if (filterTable != hdTable) {\r\n                //                            hdTable.style[\"paddingRight\"] = mini.getScrollOffset() + \"px\";\r\n                //                        }\r\n                //                    } else {\r\n                //                        hdTable.style[\"paddingRight\"] = \"0px\";\r\n                //                    }\r\n                //                } else \r\n                if (mini.isSafari || mini.isIE6) {\r\n                    //alert(bdTable.offsetWidth);\r\n                    //                    if (mini.isIE6) {\r\n                    //                        hdTable.style.width = (bdTable.offsetWidth + 2) + \"px\";\r\n                    //                    } else {\r\n                    //hdTable.style.width = bdTable.offsetWidth + \"px\";\r\n                    hdTable.style.width = tableWidth + \"px\";\r\n                    //}\r\n\r\n                } else {\r\n                    //alert(hasVScroll);\r\n                    //if (this._rowsViewEl.scrollHeight > this._rowsViewEl.clientHeight + 1) {\r\n                    if (hasVScroll) {\r\n\r\n                        hdTable.style.width = \"100%\";\r\n                        hdTable.parentNode.style.width = \"auto\";\r\n                        //hdTable.parentNode.style[\"paddingRight\"] = \"17px\";\r\n                        if (filterTable != hdTable) {\r\n                            hdTable.parentNode.style[\"paddingRight\"] = mini.getScrollOffset() + \"px\";\r\n                        }\r\n                        //var \r\n\r\n                        if (mini.isIE8) mini.removeClass(this._rowsViewEl, 'mini-grid-hidden-y');\r\n                    } else {\r\n                        hdTable.style.width = \"100%\";\r\n                        hdTable.parentNode.style.width = \"auto\";\r\n                        hdTable.parentNode.style[\"paddingRight\"] = \"0px\";\r\n\r\n                        if (mini.isIE8) mini.addClass(this._rowsViewEl, 'mini-grid-hidden-y');\r\n                    }\r\n                    //alert(hdTable.parentNode.style[\"paddingRight\"]);\r\n                    // mini.repaint(hdTable.parentNode);\r\n                }\r\n            } else {\r\n                bdTable.style.width = \"0px\";\r\n                hdTable.style.width = \"0px\";\r\n                if (mini.isSafari || mini.isChrome || mini.isIE6) {\r\n                    //hdTable.style.width = bdTable.offsetWidth + \"px\";\r\n                } else {\r\n                    hdTable.parentNode.style.width = \"100%\";\r\n                    hdTable.parentNode.style[\"paddingRight\"] = \"0px\";\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        //if(hasVScroll) debugger\r\n        doLayout.call(this, hdTable);\r\n\r\n        doLayout.call(this, filterTable);\r\n        doLayout.call(this, summaryTable);\r\n\r\n\r\n        //\r\n        this._syncScroll();\r\n\r\n        var me = this;\r\n        setTimeout(function () {\r\n            mini.layout(me._filterEl);\r\n            mini.layout(me._summaryEl);\r\n\r\n\r\n        }, 10);\r\n\r\n        if (mini.isIE6) {\r\n            setTimeout(function () {\r\n                doLayout.call(that, hdTable);\r\n            }, 1);\r\n        }\r\n\r\n        //if (mini.isIE10 && this.isFrozen()) {\r\n        if (mini.isIE10) {\r\n            //fix ie10\r\n            setTimeout(function () {\r\n                if (me.isFitColumns()) {\r\n                    hdTable.style.width = 'auto';\r\n                    hdTable.offsetWidth;\r\n                    hdTable.style.width = '100%';\r\n                } else {\r\n                    hdTable.style.width = '0px';\r\n\r\n                }\r\n            }, 0);\r\n            mini.repaint(bdTable);\r\n        }\r\n\r\n\r\n        this._topRightCellEl = this._columnsViewEl.childNodes[1];\r\n\r\n        if (mini.isIE6) {\r\n            this._topRightCellEl.style.height = columnHeight; //jQuery(this._columnsViewEl).height() + \"px\";\r\n        }\r\n        //alert(\"grid layout\");\r\n\r\n\r\n        //ie6, ie7 有横向滚动条，且高度auto时\r\n        if (mini.isIE6 || mini.isIE7) {\r\n            this._rowsViewContentEl.style[\"paddingBottom\"] = \"0px\";\r\n            if (autoHeight) {\r\n                //var hasHScroll = this._rowsViewEl.scrollWidth > this._rowsViewEl.clientWidth + 1;\r\n                if (hasHScroll) {\r\n                    this._rowsViewContentEl.style[\"paddingBottom\"] = \"17px\";\r\n                }\r\n            }\r\n        }\r\n\r\n        this._filterViewEl.style.height = filterRowHeight + \"px\";\r\n\r\n        filterTable.style.width = this.isFitColumns() ? (tableWidth + \"px\") : \"\";          //@@@\r\n\r\n        //alert(filterTable.style.width);\r\n\r\n        //filterTable.parentNode.style[\"paddingRight\"] = summaryTable.parentNode.style.paddingRight;\r\n\r\n    },\r\n    setBody: function () { },\r\n    /////////////////////////\r\n    //------------  Update/Layout -----------//\r\n\r\n    //    _hasSpaceTd: function () {\r\n    //        return true;\r\n    //    },\r\n\r\n    _createTopRowHTML: function (columns, flag, data) {\r\n        var s = \"\";\r\n        if (mini.isIE) {\r\n            if (mini.isIE6 || mini.isIE7 || !mini.boxModel) {\r\n                //if (mini.isIE6 || mini.isIE7) {\r\n                s += '<tr style=\"display:none;height:0px;\">';\r\n            } else {\r\n                s += '<tr style=\"height:0px;\">';\r\n            }\r\n            //s += '<tr style=\"height:0px;\">';\r\n        } else {\r\n\r\n            if (mini.isChrome && data && data.length == 0) {\r\n                s += '<tr style=\"height:1px;\">';\r\n            } else {\r\n                s += '<tr style=\"height:0px;\">';\r\n            }\r\n        }\r\n\r\n        if (this._userEmptyTd !== false) s += '<td style=\"height:0px;width:0;\"></td>';\r\n\r\n\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            var width = column.width;\r\n            var id = column._id;\r\n            s += '<td id=\"' + id + '\" style=\"padding:0;border:0;margin:0;height:0px;';\r\n\r\n\r\n            if (column.width) s += 'width:' + column.width;\r\n\r\n\r\n            if (column.minWidth) s += ';min-width:' + column.minWidth + \"px\";\r\n\r\n            s += '\" ></td>';\r\n        }\r\n        s += '<td style=\"width:0px;\"></td>';\r\n        s += \"</tr>\";\r\n        return s;\r\n    },\r\n\r\n    _createColumnsHTML: function (rows, viewIndex, visibleColumns) {\r\n        var visibleColumns = visibleColumns ? visibleColumns : this.getVisibleColumns();\r\n        var sb = ['<table class=\"mini-grid-table\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">'];\r\n        sb.push(this._createTopRowHTML(visibleColumns));\r\n\r\n\r\n        var sortField = this.getSortField();\r\n        var sortOrder = this.getSortOrder();\r\n\r\n        for (var j = 0, k = rows.length; j < k; j++) {\r\n            var columns = rows[j];\r\n            sb[sb.length] = '<tr>';\r\n            sb[sb.length] = '<td style=\"width:0;\"></td>';\r\n            for (var i = 0, l = columns.length; i < l; i++) {\r\n                var column = columns[i];\r\n                var _sortField = column.sortField || column.field;\r\n\r\n                var headerText = this._createHeaderText(column, viewIndex);\r\n\r\n                var columnId = this._createHeaderCellId(column, viewIndex)\r\n\r\n                //if(column.name == \"name1\") debugger\r\n\r\n                var sortCls = \"\";\r\n                if (sortField && sortField == _sortField) {\r\n                    sortCls = sortOrder == \"asc\" ? \"mini-grid-asc\" : \"mini-grid-desc\";\r\n                }\r\n                var cls = \"\";\r\n                if (this.allowHeaderWrap == false) {\r\n                    cls = \" mini-grid-headerCell-nowrap \";\r\n                }\r\n\r\n                sb[sb.length] = '<td id=\"';\r\n                sb[sb.length] = columnId;\r\n                sb[sb.length] = '\" class=\"mini-grid-headerCell ' + sortCls + ' ' + (column.headerCls || \"\") + ' ';\r\n\r\n                var isButtom = !(column.columns && column.columns.length > 0)\r\n                if (isButtom) sb[sb.length] = ' mini-grid-bottomCell ';\r\n                if (i == l - 1) sb[sb.length] = ' mini-grid-rightCell ';\r\n\r\n                sb[sb.length] = '\" style=\"';\r\n                if (column.headerStyle) {\r\n\r\n                    sb[sb.length] = column.headerStyle + ';';\r\n                }\r\n                if (column.headerAlign) {\r\n                    sb[sb.length] = 'text-align:' + column.headerAlign + ';';\r\n                }\r\n\r\n                sb[sb.length] = '\" ';\r\n\r\n                if (column.rowspan) {\r\n                    sb[sb.length] = 'rowspan=\"' + column.rowspan + '\" ';\r\n                }\r\n                this._createColumnColSpan(column, sb, viewIndex);\r\n\r\n                sb[sb.length] = '><div class=\"mini-grid-headerCell-outer\"><div class=\"mini-grid-headerCell-inner ' + cls + '\">';\r\n\r\n                sb[sb.length] = headerText;\r\n\r\n                if (sortCls) {\r\n                    sb[sb.length] = '<span class=\"mini-grid-sortIcon mini-icon\"></span>';\r\n                } else {\r\n                    if (this.showSortIcon) {\r\n                        if (column.allowSort) {\r\n                            sb[sb.length] = '<span class=\"mini-grid-allowsort mini-icon\"></span>';\r\n                        }\r\n                    }\r\n                }\r\n\r\n                sb[sb.length] = '</div><div id=\"' + column._id + '\" class=\"mini-grid-column-splitter\"></div>';\r\n\r\n                sb[sb.length] = '</div></td>';\r\n            }\r\n\r\n            //space column\r\n            if (this.isFrozen() && viewIndex == 1) {\r\n                sb[sb.length] = '<td class=\"mini-grid-headerCell\" style=\"width:0;\"><div class=\"mini-grid-headerCell-inner\" style=\"';\r\n\r\n                //sb[sb.length] = '\">&nbsp;</div></td>';\r\n                sb[sb.length] = '\">0</div></td>';\r\n            }\r\n\r\n            sb[sb.length] = '</tr>';\r\n        }\r\n        sb.push('</table>');\r\n        return sb.join('');\r\n    },\r\n    _createHeaderText: function (column, viewIndex) {\r\n        var header = column.header;\r\n        if (typeof header == \"function\") header = header.call(this, column);\r\n        if (mini.isNull(header) || header === \"\") header = \"&nbsp;\";\r\n        return header;\r\n    },\r\n    _createColumnColSpan: function (column, sb, viewIndex) {\r\n        if (column.colspan) {\r\n            sb[sb.length] = 'colspan=\"' + column.colspan + '\" ';\r\n        }\r\n    },\r\n    doUpdateColumns: function () {\r\n        var scrollLeft = this._columnsViewEl.scrollLeft;\r\n\r\n        var columnRows = this.getVisibleColumnsRow();\r\n        var html = this._createColumnsHTML(columnRows, 2);\r\n        var s = '<div class=\"mini-grid-topRightCell\"></div>';\r\n        html += s;\r\n        this._columnsViewEl.innerHTML = html;\r\n\r\n        this._columnsViewEl.scrollLeft = scrollLeft;\r\n    },\r\n    doUpdate: function () {\r\n        if (this.canUpdate() == false) return;\r\n        var that = this;\r\n\r\n        //创建组件100毫秒内，rows延迟创建，提升初始化时性能表现（避免了多次setColumns/setData时的重新创建整个表格开销）\r\n        var defer = this._isCreating();\r\n\r\n        var sss = new Date();\r\n\r\n        this._doUpdateSummaryRow();\r\n\r\n        var me = this;\r\n\r\n        var scrollLeft = this.getScrollLeft();\r\n\r\n\r\n        //alert(1);\r\n\r\n        function doUpdate() {\r\n            if (!me.el) return;\r\n            me.doUpdateColumns();\r\n\r\n            //rows            \r\n\r\n\r\n            if (that.viewType == \"cardview\") {\r\n                me.updateCardView();\r\n            } else {\r\n                me.doUpdateRows();\r\n            }\r\n\r\n            me.doLayout();\r\n            me._doUpdateTimer = null;\r\n            //alert(new Date() - sss);\r\n\r\n\r\n        }\r\n\r\n        //columns\r\n        me.doUpdateColumns();\r\n\r\n        //        if (this._doUpdateTimer) {\r\n        //            this.doLayout();\r\n        //            return;\r\n        //        }\r\n\r\n        //EmptyView\r\n        if (defer) {\r\n            this._useEmptyView = true;\r\n        }\r\n\r\n        //移除行\r\n        //        if (this._rowsViewContentEl && this._rowsViewContentEl.firstChild) {\r\n        //            this._rowsViewContentEl.removeChild(this._rowsViewContentEl.firstChild);\r\n        //        }\r\n        //        if (this._rowsLockContentEl && this._rowsLockContentEl.firstChild) {\r\n        //            this._rowsLockContentEl.removeChild(this._rowsLockContentEl.firstChild);\r\n        //        }\r\n        this._doRemoveRowContent();\r\n\r\n        //var sss = new Date();\r\n\r\n        if (that.viewType == \"cardview\") {\r\n            me.updateCardView();\r\n        } else {\r\n            me.doUpdateRows();\r\n        }\r\n\r\n        //alert(new Date() - sss);\r\n\r\n        if (scrollLeft > 0 && me.isVirtualScroll()) {\r\n            //me.setScrollLeft(scrollLeft);\r\n            me._syncScrollOffset(scrollLeft);\r\n        }\r\n\r\n        if (defer) {\r\n            this._useEmptyView = false;\r\n        }\r\n        me.doLayout();\r\n        if (defer && !this._doUpdateTimer) {\r\n            this._doUpdateTimer = setTimeout(doUpdate, 15);\r\n        }\r\n        this.unmask();\r\n\r\n        if (that._fireUpdateTimer) {\r\n            clearTimeout(that._fireUpdateTimer);\r\n            that._fireUpdateTimer = null;\r\n        }\r\n        that._fireUpdateTimer = setTimeout(function () {\r\n            that._fireUpdateTimer = null;\r\n            that.fire(\"update\");\r\n        }, 100);\r\n\r\n    },\r\n\r\n    _doRemoveRowContent: function () {\r\n        if (this._rowsViewContentEl && this._rowsViewContentEl.firstChild) {\r\n            this._rowsViewContentEl.removeChild(this._rowsViewContentEl.firstChild);\r\n        }\r\n        if (this._rowsLockContentEl && this._rowsLockContentEl.firstChild) {\r\n            this._rowsLockContentEl.removeChild(this._rowsLockContentEl.firstChild);\r\n        }\r\n    },\r\n\r\n    /////////////////////////////////////////\r\n    _isCreating: function () {\r\n        return (new Date() - this._createTime) < 1000;\r\n    },\r\n    deferUpdate: function (time) {\r\n\r\n        if (!time) time = 5;\r\n        if (this._updateTimer || this._doUpdateTimer) return;\r\n        var me = this;\r\n        this._updateTimer = setTimeout(function () {\r\n            me._updateTimer = null;\r\n            me.doUpdate();\r\n        }, time);\r\n    },\r\n    _stopDeferUpdate: function () {\r\n        if (this._updateTimer) {\r\n            clearTimeout(this._updateTimer);\r\n            this._updateTimer = null;\r\n        }\r\n    },\r\n    _pushUpdateCallback: function (fn, scope, args) {\r\n        var time = 0;\r\n\r\n        if (this._doUpdateTimer || this._updateTimer) time = 20;\r\n        //alert(time);\r\n        if (time == 0) {\r\n            fn.apply(scope, args);\r\n        } else {\r\n            setTimeout(function () {\r\n                fn.apply(scope, args);\r\n            }, time);\r\n        }\r\n    },\r\n    _updateCount: 0,\r\n    beginUpdate: function () {\r\n        this._updateCount++;\r\n    },\r\n    endUpdate: function (raise) {\r\n        this._updateCount--;\r\n        if (this._updateCount == 0 || raise === true) {\r\n            this._updateCount = 0;\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    canUpdate: function () {\r\n        //return this._updateCount == 0 && this.isRender();\r\n        return this._updateCount == 0;\r\n    },\r\n    /////////////////////////////////////////\r\n    setDefaultRowHeight: function (value) {\r\n        this.defaultRowHeight = value;\r\n    },\r\n    getDefaultRowHeight: function () {\r\n        return this.defaultRowHeight;\r\n    },\r\n    _getRowHeight: function (record) {\r\n\r\n        //if(\r\n\r\n        var h = this.defaultRowHeight;\r\n        if (record._height) {\r\n            h = parseInt(record._height);\r\n            if (isNaN(parseInt(record._height))) h = rowHeight;\r\n        }\r\n        //h -= 4; //padding-top/padding-bottom\r\n\r\n        h = h - this._paddingTop - this._paddingBottom;\r\n\r\n        //if (!mini.isOpera) {\r\n        h -= 1;\r\n        //}\r\n        return h;\r\n    },\r\n    _createGroupingHTML: function (columns, viewIndex) {\r\n\r\n        var groups = this.getGroupingView();\r\n        var showGroupSummary = this.showGroupSummary;\r\n\r\n        var isFrozen = this.isFrozen();\r\n\r\n        var rowIndex = 0;\r\n        var me = this;\r\n        function createRows(rows, group) {\r\n            sb.push('<table class=\"mini-grid-table\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">');\r\n            if (columns.length > 0) {\r\n                sb.push(me._createTopRowHTML(columns));\r\n                for (var j = 0, k = rows.length; j < k; j++) {\r\n                    var row = rows[j];\r\n                    me._createRowHTML(row, rowIndex++, columns, viewIndex, sb);\r\n                }\r\n            }\r\n\r\n            sb.push('</table>');\r\n        }\r\n\r\n        var groupTitleCollapsible = this.groupTitleCollapsible !== false;\r\n\r\n        var sb = ['<table class=\"mini-grid-table\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">'];\r\n        sb.push(this._createTopRowHTML(columns));\r\n        for (var j = 0, k = groups.length; j < k; j++) {\r\n\r\n            if (viewIndex == 1 && !this.isFrozen()) continue;\r\n\r\n            var group = groups[j];\r\n            var id = this._createRowGroupId(group, viewIndex);\r\n            var rowid = this._createRowGroupRowsId(group, viewIndex);\r\n            var e = this._OnDrawGroup(group);\r\n            var cls = group.expanded ? '' : ' mini-grid-group-collapse ';\r\n\r\n            //group header\r\n            sb[sb.length] = '<tr id=\"';\r\n            sb[sb.length] = id;\r\n            sb[sb.length] = '\" class=\"mini-grid-groupRow';\r\n            sb[sb.length] = cls;\r\n            //sb[sb.length] = '\"><td class=\"mini-grid-groupCell ';\r\n            sb[sb.length] = '\"><td style=\"width:0;\"></td><td class=\"mini-grid-groupCell ';\r\n\r\n            sb[sb.length] = e.cls;\r\n            sb[sb.length] = '\" style=\"';\r\n            sb[sb.length] = e.style;\r\n            sb[sb.length] = '\" colspan=\"';\r\n            sb[sb.length] = columns.length;\r\n            //sb[sb.length] = '\"><div class=\"mini-grid-groupHeader\">';\r\n            sb[sb.length] = '\"><div class=\"mini-grid-groupHeader ';\r\n            if (groupTitleCollapsible) {\r\n                sb[sb.length] = 'mini-grid-groupHeader-collapsible';\r\n            }\r\n            sb[sb.length] = '\">';\r\n\r\n\r\n            if (!isFrozen || (isFrozen && viewIndex == 1)) {\r\n                sb[sb.length] = '<div class=\"mini-grid-group-ecicon\"></div>';\r\n                sb[sb.length] = '<div class=\"mini-grid-groupTitle\">' + e.cellHtml + '</div>';\r\n            } else {\r\n                sb[sb.length] = \"&nbsp;\";\r\n            }\r\n            sb[sb.length] = '</div></td></tr>';\r\n\r\n            //group.expanded = false;\r\n\r\n            var style = group.expanded ? \"\" : \"display:none\";\r\n            sb[sb.length] = '<tr class=\"mini-grid-groupRows-tr\" style=\"';\r\n\r\n\r\n\r\n            //if (mini.isIE) sb[sb.length] = style;\r\n            //sb[sb.length] = '\"><td class=\"mini-grid-groupRows-td\" colspan=\"';\r\n            sb[sb.length] = '\"><td style=\"width:0;\"></td><td class=\"mini-grid-groupRows-td\" colspan=\"';\r\n\r\n            sb[sb.length] = columns.length;\r\n            sb[sb.length] = '\"><div id=\"';\r\n            sb[sb.length] = rowid;\r\n            sb[sb.length] = '\" class=\"mini-grid-groupRows\" style=\"';\r\n            if (mini.isChrome) sb[sb.length] = 'margin-left:-1px;';\r\n            sb[sb.length] = style;\r\n            sb[sb.length] = '\">';\r\n            createRows(group.rows, group);\r\n            sb[sb.length] = '</div></td></tr>';\r\n\r\n            //分组汇总\r\n            if (showGroupSummary) {\r\n                //sb.push('<table class=\"mini-grid-table\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">');\r\n                if (columns.length > 0) {\r\n                    //                    sb.push(me._createTopRowHTML(columns));\r\n                    //                    for (var j = 0, k = rows.length; j < k; j++) {\r\n                    //                        var row = rows[j];\r\n                    //                        me._createRowHTML(row, rowIndex++, columns, viewIndex, sb);\r\n                    //                    }\r\n\r\n\r\n\r\n                    sb[sb.length] = '<tr class=\"mini-grid-groupFooter\">';\r\n                    sb[sb.length] = '<td style=\"width:0;\"></td>';\r\n                    for (var i = 0, l = columns.length; i < l; i++) {\r\n                        var column = columns[i];\r\n                        var id = \"\"; //this._createSummaryCellId(column);\r\n\r\n                        //if(column.field == 'age') debugger\r\n\r\n                        var e = this._OnDrawSummaryCell(group.rows, column, group);\r\n\r\n                        sb[sb.length] = '<td id=\"';\r\n                        sb[sb.length] = id;\r\n                        sb[sb.length] = '\" class=\"mini-grid-cell ' + e.cellCls + '\" style=\"' + e.cellStyle + ';';\r\n                        sb[sb.length] = '\"><div class=\"mini-grid-cell-inner\">';\r\n                        sb[sb.length] = e.cellHtml;\r\n                        sb[sb.length] = '</div></td>';\r\n                    }\r\n                    sb[sb.length] = '</tr>';\r\n\r\n                }\r\n\r\n                //sb.push('</table>');\r\n            }\r\n\r\n        }\r\n        sb.push('</table>');\r\n        return sb.join('');\r\n    },\r\n\r\n    _isFastCreating: function () {\r\n        //return false;\r\n        var data = this.getVisibleRows();\r\n        if (data.length > 50) {\r\n            return this._isCreating() || this.getScrollTop() < 50 * this._defaultRowHeight;\r\n        }\r\n        return false;\r\n    },\r\n    isShowRowDetail: function (row) {\r\n        return false;\r\n    },\r\n    isCellValid: function (record, column) {\r\n        return true;\r\n    },\r\n\r\n\r\n    /////////////////////////////////////////////////////////\r\n\r\n    //创建cardview视图\r\n    updateCardView: function () {\r\n\r\n        var me = this,\r\n            data = this.getVisibleRows(),\r\n            columns = this.getVisibleColumns(),\r\n            sb = [];\r\n\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var record = data[i];\r\n            var meta = { rowCls: \"\", rowStyle: \"\" };\r\n            var html = me.itemRenderer(record, i, meta, me);\r\n            sb[sb.length] = '<div class=\"mini-grid-row ';\r\n            sb[sb.length] = meta.rowCls;\r\n            sb[sb.length] = '\" style=\"';\r\n            sb[sb.length] = meta.rowStyle;\r\n            sb[sb.length] = '\" id=\"';\r\n            sb[sb.length] = me._createRowId(record, 1);\r\n            sb[sb.length] = '\">';\r\n            sb[sb.length] = html;\r\n            sb[sb.length] = '</div>';\r\n        }\r\n\r\n        me._rowsViewContentEl.innerHTML = sb.join('');\r\n\r\n    },\r\n\r\n    itemRenderer: function (record, rowIndex, meta, grid) {\r\n        return \"\";\r\n    },\r\n\r\n    /////////////////////////////////////////////////////////\r\n\r\n    _createRowHTML: function (record, rowIndex, columns, viewIndex, sb) {\r\n        var isReturn = !sb;\r\n        if (!sb) sb = [];\r\n        var rowHeight = \"\";\r\n        var isFixedRowHeight = this.isFixedRowHeight();\r\n        if (isFixedRowHeight) {\r\n            rowHeight = this._getRowHeight(record);\r\n        }\r\n        var defaultRowHeight = this.defaultRowHeight - 1;\r\n\r\n        var rowClsIndex = -1;\r\n        var rowCls = \" \";\r\n        var rowStyleIndex = -1;\r\n        var rowStyle = \" \";\r\n\r\n        sb[sb.length] = '<tr class=\"mini-grid-row ';\r\n\r\n        if (record._state == \"added\" && this.showNewRow) sb[sb.length] = \"mini-grid-newRow \";\r\n        if (this.isShowRowDetail(record)) sb[sb.length] = \"mini-grid-expandRow \";\r\n\r\n        if (this.allowAlternating && rowIndex % 2 == 1) {\r\n            sb[sb.length] = this._alternatingCls;\r\n            sb[sb.length] = \" \";\r\n        }\r\n\r\n        //if (record._id == 1) debugger\r\n\r\n        var _rowClsSb = this._rowClsHash[record._id];\r\n        if (_rowClsSb) {\r\n\r\n            sb[sb.length] = _rowClsSb.join(' ');\r\n            sb[sb.length] = \" \";\r\n        }\r\n\r\n        //选择的样式不在_rowClsHash中处理\r\n        //if (!_rowClsSb || _rowClsSb.indexOf(this._rowSelectedCls) == -1) {\r\n        var isSelected = this._dataSource.isSelected(record);\r\n        if (isSelected) {\r\n            sb[sb.length] = this._rowSelectedCls;\r\n            sb[sb.length] = \" \";\r\n        }\r\n        //}\r\n\r\n        rowClsIndex = sb.length;\r\n        sb[sb.length] = rowCls;\r\n        sb[sb.length] = '\" style=\"';\r\n        rowStyleIndex = sb.length;\r\n        sb[sb.length] = rowStyle;\r\n\r\n        //@ 2017-11-06 是否不应该修改？\r\n        //        if (record.visible === false) {\r\n        //            sb[sb.length] = \";display:none;\";\r\n        //        }\r\n\r\n        sb[sb.length] = '\" id=\"';\r\n        sb[sb.length] = this._createRowId(record, viewIndex);\r\n        sb[sb.length] = '\">';\r\n\r\n        if (this._userEmptyTd !== false) sb[sb.length] = '<td style=\"width:0;\"></td>';\r\n\r\n        var _currentCell = this._currentCell;\r\n\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            var cellId = this._createCellId(record, column);\r\n\r\n            var cls = \"\";\r\n\r\n            //var e = this._OnDrawCell(record, column, rowIndex, column._index, i, columns.length, isFrozen, viewIndex);\r\n            var e = this._OnDrawCell(record, column, rowIndex, column._index);\r\n            if (e.cellHtml === null || e.cellHtml === undefined || e.cellHtml === \"\") {\r\n                e.cellHtml = \"&nbsp;\";\r\n            }\r\n\r\n            sb[sb.length] = '<td ';\r\n            if (e.rowSpan) {\r\n                sb[sb.length] = 'rowspan=\"' + e.rowSpan + '\"';\r\n            }\r\n            if (e.colSpan) {\r\n                sb[sb.length] = 'colspan=\"' + e.colSpan + '\"';\r\n            }\r\n            sb[sb.length] = ' id=\"';\r\n            sb[sb.length] = cellId;\r\n\r\n            sb[sb.length] = '\" class=\"mini-grid-cell ';\r\n\r\n            if (!this.isCellValid(record, column)) sb[sb.length] = ' mini-grid-cell-error ';\r\n\r\n            if (i == l - 1) sb[sb.length] = ' mini-grid-rightCell ';\r\n\r\n            if (e.cellCls) sb[sb.length] = ' ' + e.cellCls + ' ';\r\n            if (cls) sb[sb.length] = cls;\r\n\r\n            if (_currentCell && _currentCell[0] == record && _currentCell[1] == column) {\r\n                sb[sb.length] = \" \";\r\n                sb[sb.length] = this._cellSelectedCls;\r\n            }\r\n\r\n            sb[sb.length] = '\" style=\"';\r\n            if (e.showHGridLines == false) {\r\n                sb[sb.length] = 'border-bottom:0;';\r\n            }\r\n            if (e.showVGridLines == false) {\r\n                sb[sb.length] = 'border-right:0;';\r\n            }\r\n\r\n            if (!e.visible) sb[sb.length] = \"display:none;\";\r\n\r\n            if (column.align) {\r\n                sb[sb.length] = 'text-align:';\r\n                sb[sb.length] = column.align;\r\n                sb[sb.length] = ';';\r\n            }\r\n\r\n            if (e.cellStyle) sb[sb.length] = e.cellStyle;\r\n\r\n            sb[sb.length] = '\">';\r\n            sb[sb.length] = '<div class=\"mini-grid-cell-inner ';\r\n\r\n            var cellWrap = column.allowCellWrap;\r\n            if (!cellWrap) cellWrap = e.allowCellWrap;\r\n            if (!cellWrap) {\r\n                //if (!e.allowCellWrap || !column.allowCellWrap) {\r\n                //if (!e.allowCellWrap) {\r\n                //if (!column.allowCellWrap) {\r\n                sb[sb.length] = ' mini-grid-cell-nowrap ';\r\n            }\r\n\r\n\r\n            if (e.cellInnerCls) {\r\n                sb[sb.length] = e.cellInnerCls;\r\n            }\r\n\r\n            var isModified = column.field ? this._dataSource.isModified(record, column.field) : false;\r\n            if (isModified && this.showModified) {\r\n                sb[sb.length] = ' mini-grid-cell-dirty';\r\n            }\r\n\r\n\r\n            sb[sb.length] = '\" style=\"';\r\n            if (isFixedRowHeight) {\r\n\r\n                sb[sb.length] = 'height:';\r\n                //sb[sb.length] = rowHeight;\r\n\r\n                if (!column.name || this._treeColumn !== column.name) {\r\n                    sb[sb.length] = rowHeight;\r\n                } else {\r\n                    sb[sb.length] = defaultRowHeight;\r\n                }\r\n\r\n                sb[sb.length] = 'px;';\r\n                sb[sb.length] = 'line-height:';\r\n                //sb[sb.length] = rowHeight;\r\n\r\n                if (!column.name || this._treeColumn !== column.name) {\r\n                    sb[sb.length] = rowHeight;\r\n                } else {\r\n                    sb[sb.length] = defaultRowHeight;\r\n                }\r\n\r\n                sb[sb.length] = 'px;';\r\n            }\r\n            if (e.cellInnerStyle) {\r\n                sb[sb.length] = e.cellInnerStyle;\r\n            }\r\n            sb[sb.length] = '\">';\r\n            sb[sb.length] = e.cellHtml;\r\n            sb[sb.length] = '</div>';\r\n            sb[sb.length] = '</td>';\r\n\r\n            if (e.rowCls) rowCls = e.rowCls;\r\n            if (e.rowStyle) rowStyle = e.rowStyle;\r\n        }\r\n        //space column\r\n        if (this.isFrozen() && viewIndex == 1) {\r\n            sb[sb.length] = '<td class=\"mini-grid-cell\" style=\"width:0;';\r\n            if (this.showHGridLines == false) {\r\n                sb[sb.length] = 'border-bottom:0;';\r\n            }\r\n            sb[sb.length] = '\"><div class=\"mini-grid-cell-inner\" style=\"';\r\n            if (isFixedRowHeight) {\r\n                sb[sb.length] = 'height:';\r\n                sb[sb.length] = rowHeight;\r\n                sb[sb.length] = 'px;';\r\n            }\r\n            //sb[sb.length] = '\">&nbsp;</div></td>';\r\n            sb[sb.length] = '\">0</div></td>';\r\n        }\r\n\r\n        sb[rowClsIndex] = rowCls;\r\n        sb[rowStyleIndex] = rowStyle;\r\n\r\n        sb[sb.length] = '</tr>';\r\n\r\n        if (isReturn) {\r\n            var s = sb.join('');\r\n            //var reg = /<script[^>]*>.*(?=<\\/script(\\s)*>)<\\/script(\\s)*>/gi;\r\n            //var reg = /(<script(.*)<\\/script(\\s*)>)/i;\r\n            var reg = /(<script(.*)<\\/script(\\s*)>)/i;\r\n            s = s.replace(reg, \"\");\r\n\r\n            return s;\r\n        }\r\n    },\r\n    _createRowsHTML: function (columns, viewIndex, data, bottomHtml) {\r\n\r\n        data = data || this.getVisibleRows();\r\n\r\n        var sb = ['<table class=\"mini-grid-table mini-grid-rowstable\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">'];\r\n        sb.push(this._createTopRowHTML(columns, true, data));\r\n\r\n        var emptyId = this.uid + \"$emptytext\" + viewIndex;\r\n        if (viewIndex == 2 && (this._dataSource.loaded || this.alwaysShowEmptyText)) {\r\n            var style = (this.showEmptyText && data.length == 0) ? '' : 'display:none;';\r\n            sb.push('<tr id=\"' + emptyId + '\" style=\"' + style + '\"><td style=\"width:0\"></td><td class=\"mini-grid-emptyText\" colspan=\"' + columns.length + '\">' + this.emptyText + '</td></tr>');\r\n        }\r\n\r\n        var startIndex = 0;\r\n        if (data.length > 0) {\r\n            var first = data[0];\r\n            startIndex = this.getVisibleRows().indexOf(first);\r\n\r\n        }\r\n        for (var j = 0, k = data.length; j < k; j++) {\r\n            var rowIndex = startIndex + j;\r\n            var record = data[j];\r\n            this._createRowHTML(record, rowIndex, columns, viewIndex, sb);\r\n        }\r\n\r\n        if (bottomHtml) {\r\n            sb.push(bottomHtml);\r\n        }\r\n\r\n        sb.push('</table>');\r\n\r\n        return sb.join('');\r\n    },\r\n\r\n    doUpdateRows: function () {\r\n        var data = this.getVisibleRows();\r\n\r\n        var sss = new Date();\r\n\r\n        var columns = this.getVisibleColumns();\r\n        if (this.isGrouping()) {\r\n            var html = this._createGroupingHTML(columns, 2);\r\n            this._rowsViewContentEl.innerHTML = html;\r\n        } else {\r\n            var html = this._createRowsHTML(columns, 2, data);\r\n            this._rowsViewContentEl.innerHTML = html;\r\n        }\r\n\r\n    },\r\n\r\n\r\n\r\n    /////////////////////////////////////////////////////\r\n    _createFilterRowHTML: function (columns, viewIndex) {\r\n        var sb = ['<table class=\"mini-grid-table\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"position:absolute;top:0;left:0;height:100%;\">'];\r\n        sb.push(this._createTopRowHTML(columns));\r\n        sb[sb.length] = '<tr>';\r\n        sb[sb.length] = '<td style=\"width:0;\"></td>';\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            var id = this._createFilterCellId(column);\r\n            sb[sb.length] = '<td id=\"';\r\n            sb[sb.length] = id;\r\n            sb[sb.length] = '\" class=\"mini-grid-filterCell\" style=\"';\r\n            sb[sb.length] = '\">&nbsp;</td>';\r\n        }\r\n        sb[sb.length] = '</tr></table><div class=\"mini-grid-scrollHeaderCell\"></div>';\r\n        var s = sb.join('');\r\n        return s;\r\n    },\r\n    _doRenderFilters: function () {\r\n        //遍历columns，如果有filter对象，则render加入\r\n        var columns = this.getVisibleColumns();\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            if (column.filter) {\r\n                //if (column.field == 'name') debugger\r\n                var cellEl = this.getFilterCellEl(column);\r\n                if (cellEl) {\r\n                    cellEl.innerHTML = \"\";\r\n                    column.filter.render(cellEl);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _doUpdateFilterRow: function () {\r\n        if (this._filterViewEl.firstChild) {\r\n            this._filterViewEl.removeChild(this._filterViewEl.firstChild);\r\n        }\r\n        var isFrozen = this.isFrozen();\r\n        var columns = this.getVisibleColumns();\r\n\r\n        var html = this._createFilterRowHTML(columns, 2);\r\n        this._filterViewEl.innerHTML = html;\r\n\r\n        this._doRenderFilters();\r\n    },\r\n    /////////////////////////////////////////////////////\r\n    _createSummaryRowHTML: function (columns, viewIndex) {\r\n        var records = this.getDataView();\r\n\r\n        var sb = ['<table class=\"mini-grid-table\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">'];\r\n        sb.push(this._createTopRowHTML(columns));\r\n\r\n        for (var j = 0, k = this.summaryRows; j < k; j++) {\r\n            sb[sb.length] = '<tr>';\r\n            sb[sb.length] = '<td style=\"width:0;\"></td>';\r\n            for (var i = 0, l = columns.length; i < l; i++) {\r\n                var column = columns[i];\r\n                var id = this._createSummaryCellId(column, j);\r\n\r\n                var e = this._OnDrawSummaryCell(records, column, null, j);\r\n\r\n                sb[sb.length] = '<td id=\"';\r\n                sb[sb.length] = id;\r\n                sb[sb.length] = '\" class=\"mini-grid-summaryCell ' + e.cellCls + '\" style=\"' + e.cellStyle + ';';\r\n                sb[sb.length] = '\">';\r\n                sb[sb.length] = e.cellHtml;\r\n                sb[sb.length] = '</td>';\r\n            }\r\n            sb[sb.length] = '</tr>';\r\n        }\r\n\r\n        sb[sb.length] = '</table><div class=\"mini-grid-scrollHeaderCell\"></div>';\r\n        var s = sb.join('');\r\n        return s;\r\n    },\r\n    _doUpdateSummaryRow: function () {\r\n        if (!this.showSummaryRow) return;\r\n        var columns = this.getVisibleColumns();\r\n        var html = this._createSummaryRowHTML(columns, 2);\r\n        this._summaryViewEl.innerHTML = html;\r\n    },\r\n    /////////////////////////////////////////////////////\r\n    _doSortByField: function (sortField, sortOrder) {\r\n        if (!sortField) return null;\r\n        var dataType = this._columnModel._getDataTypeByField(sortField);\r\n        this._dataSource._doClientSortField(sortField, sortOrder, dataType);\r\n    },\r\n    _expandGroupOnLoad: true,\r\n    _GroupID: 1,\r\n    _groupField: \"\",\r\n    _groupDir: \"\",\r\n    groupBy: function (field, dir) {\r\n        if (!field) return;\r\n        this._groupField = field;\r\n        if (typeof dir == \"string\") dir = dir.toLowerCase();\r\n        this._groupDir = dir;\r\n        this._createGroupingView();\r\n        this.deferUpdate();\r\n    },\r\n    clearGroup: function () {\r\n        this._groupField = \"\";\r\n        this._groupDir = \"\";\r\n        this._groupDataView = null;\r\n        this.deferUpdate();\r\n    },\r\n    setGroupField: function (value) {\r\n        this.groupBy(value);\r\n    },\r\n\r\n    getGroupField: function () {\r\n        return this._groupField;\r\n    },\r\n\r\n    getGroupDir: function () {\r\n        return this._groupDir;\r\n    },\r\n\r\n    setGroupDir: function (value) {\r\n        this._groupDir = field;\r\n        this.groupBy(this._groupField, value);\r\n    },\r\n    isGrouping: function () {\r\n        return this._groupField != \"\";\r\n    },\r\n    getGroupingView: function () {\r\n        return this._groupDataView;\r\n    },\r\n\r\n    enableGroupOrder: true,\r\n    _createGroupingView: function () {\r\n        if (this.isGrouping() == false) return;\r\n        this._groupDataView = null;\r\n\r\n        var source = this._dataSource;\r\n\r\n        var field = this._groupField, dir = this._groupDir;\r\n\r\n        //1）分组排序\r\n\r\n        if (this.enableGroupOrder || dir) {\r\n\r\n            this._doSortByField(field, dir);          //分组时应该可以不用排序\r\n        }\r\n\r\n        //2）得到分组数据\r\n        var data = this.getVisibleRows();\r\n        var groups = [];\r\n        var groupMaps = {};\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var o = data[i];\r\n            var v = o[field];    //string, number, boolean, date\r\n            var p = mini.isDate(v) ? v.getTime() : v;\r\n            var group = groupMaps[p];\r\n            if (!group) {\r\n                group = groupMaps[p] = {};\r\n                group.field = field,\r\n                group.dir = dir;\r\n                group.value = v;\r\n                group.rows = [];\r\n                groups.push(group);\r\n                group.id = \"g\" + this._GroupID++;\r\n                group.expanded = this._expandGroupOnLoad;\r\n            }\r\n            group.rows.push(o);\r\n        }\r\n\r\n        //3) groups 排序\r\n        var sortField = source.sortField,\r\n            sortOrder = source.sortOrder;\r\n\r\n        if (sortField) {\r\n            var dataType = this._columnModel._getDataTypeByField(sortField);\r\n            var sortFn = source._getSortFnByField(sortField, dataType);\r\n            if (sortFn) {\r\n                var reverse = sortOrder == \"desc\";\r\n\r\n                for (var i = 0, l = groups.length; i < l; i++) {\r\n                    var group = groups[i];\r\n\r\n                    mini.sort(group.rows, sortFn);\r\n                    if (reverse) group.rows.reverse();\r\n                }\r\n                //this.sort(sortFn, this, reverse);\r\n            }\r\n        }\r\n\r\n        this._groupDataView = groups;\r\n    },\r\n    _OnDrawGroup: function (group) {\r\n        var e = {\r\n            group: group,\r\n            rows: group.rows,\r\n            field: group.field,\r\n            dir: group.dir,\r\n            value: group.value,\r\n            cls: \"\",\r\n            style: \"\",\r\n            cellHtml: group.field + \" (\" + group.rows.length + \" Items)\"\r\n        };\r\n        this.fire(\"drawgroup\", e);\r\n        return e;\r\n    },\r\n    getRowGroup: function (id) {\r\n        var t = typeof id;\r\n        if (t == \"number\") return this.getGroupingView()[id];\r\n        if (t == \"string\") return this._getRowGroupById(id);\r\n        return id;\r\n    },\r\n    _getRowGroupByEvent: function (e) {\r\n        var t = mini.findParent(e.target, 'mini-grid-groupRow')\r\n        if (t) {\r\n            var ids = t.id.split(\"$\");\r\n            if (ids[0] != this._id) return null;\r\n            var id = ids[ids.length - 1];\r\n            return this._getRowGroupById(id);\r\n        }\r\n        return null;\r\n    },\r\n    _getRowGroupById: function (id) {\r\n        var groups = this.getGroupingView();\r\n        for (var i = 0, l = groups.length; i < l; i++) {\r\n            var g = groups[i];\r\n            if (g.id == id) return g;\r\n        }\r\n        return null;\r\n    },\r\n    _createRowGroupId: function (group, viewIndex) {\r\n        return this._id + \"$group\" + viewIndex + \"$\" + group.id;\r\n    },\r\n    _createRowGroupRowsId: function (group, viewIndex) {\r\n        return this._id + \"$grouprows\" + viewIndex + \"$\" + group.id;\r\n    },\r\n    ////////////////////////////////////\r\n    _createRowId: function (row, index) {\r\n        var id = this._id + \"$row\" + index + \"$\" + row._id;\r\n        return id;\r\n    },\r\n    _createHeaderCellId: function (column, index) {\r\n        var id = this._id + \"$headerCell\" + index + \"$\" + column._id;\r\n        return id;\r\n    },\r\n    _createCellId: function (row, column) {\r\n        var id = row._id + \"$cell$\" + column._id;\r\n        return id;\r\n    },\r\n    _createFilterCellId: function (column) {\r\n        return this._id + \"$filter$\" + column._id;\r\n    },\r\n    _createSummaryCellId: function (column, rowIndex) {\r\n        return this._id + \"$summary$\" + column._id + \"_\" + rowIndex;\r\n    },\r\n    /////////////////////////\r\n    getFilterCellEl: function (column) {\r\n        column = this.getColumn(column);\r\n        if (!column) return null;\r\n        return document.getElementById(this._createFilterCellId(column));\r\n    },\r\n    getSummaryCellEl: function (column, rowIndex) {\r\n        if (!rowIndex) rowIndex = 0;\r\n        column = this.getColumn(column);\r\n        if (!column) return null;\r\n        return document.getElementById(this._createSummaryCellId(column, rowIndex));\r\n    },\r\n    /////////////////////////\r\n    _doVisibleEls: function () {\r\n        mini.GridView.superclass._doVisibleEls.call(this);\r\n        this._columnsEl.style.display = this.showColumns ? \"block\" : \"none\";\r\n        this._filterEl.style.display = this.showFilterRow ? \"block\" : \"none\";\r\n        this._summaryEl.style.display = this.showSummaryRow ? \"block\" : \"none\";\r\n        this._bottomPagerEl.style.display = this.showPager ? \"block\" : \"none\";\r\n\r\n        //alert(this._summaryEl.offsetHeight);\r\n    },\r\n    setShowColumns: function (value) {\r\n        this.showColumns = value;\r\n        this._doVisibleEls();\r\n        this.deferLayout();\r\n    },\r\n    setShowFilterRow: function (value) {\r\n        this.showFilterRow = value;\r\n        this._doVisibleEls();\r\n        this.deferLayout();\r\n    },\r\n    setShowSummaryRow: function (value) {\r\n        this.showSummaryRow = value;\r\n        this._doVisibleEls();\r\n        this.deferLayout();\r\n    },\r\n    setShowPager: function (value) {\r\n\r\n        this.showPager = value;\r\n        this._doVisibleEls();\r\n        this.deferLayout();\r\n    },\r\n    setFitColumns: function (value) {\r\n        this.fitColumns = value;\r\n        mini.removeClass(this.el, 'mini-grid-fixwidth');\r\n        if (this.fitColumns == false) {\r\n            mini.addClass(this.el, 'mini-grid-fixwidth');\r\n        }\r\n        this.deferLayout();\r\n    },\r\n    getBodyHeight: function (content) {\r\n        //if(this.id == \"datagrid2\") debugger\r\n        var h = mini.GridView.superclass.getBodyHeight.call(this, content);\r\n        h = h - this.getColumnsHeight() - this.getFilterHeight()\r\n            - this.getSummaryHeight() - this.getPagerHeight();\r\n        return h;\r\n    },\r\n    getColumnsHeight: function () {\r\n        if (!this.showColumns) return 0;\r\n        var h = mini.getHeight(this._columnsEl);\r\n        //        if (this.isFrozen()) {\r\n        //            var h2 = mini.getHeight(this._columnsLockEl);\r\n        //            if (h2 > h) h = h2;\r\n        //        }\r\n        return h;\r\n    },\r\n    getFilterHeight: function () {\r\n        //return this.showFilterRow ? mini.getHeight(this._filterEl) : 0;\r\n        //return this.showFilterRow ? mini.getHeight(this._filterEl.lastChild.lastChild) : 0;\r\n        return this.showFilterRow ? mini.getHeight(this._filterViewEl.firstChild) : 0;\r\n\r\n    },\r\n    getSummaryHeight: function () {\r\n        //alert(this._summaryEl.offsetHeight);\r\n        return this.showSummaryRow ? mini.getHeight(this._summaryEl) : 0;\r\n    },\r\n    getPagerHeight: function () {\r\n        return this.showPager ? mini.getHeight(this._bottomPagerEl) : 0;\r\n    },\r\n    getGridViewBox: function (content) {\r\n        var box = mini.getBox(this._columnsEl);\r\n        var bodyBox = mini.getBox(this._bodyEl);\r\n        box.height = bodyBox.bottom - box.top;\r\n        box.bottom = box.top + box.height;\r\n        return box;\r\n    },\r\n    getSortField: function (value) {\r\n        return this._dataSource.sortField;\r\n    },\r\n    getSortOrder: function (value) {\r\n        return this._dataSource.sortOrder;\r\n    },\r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    // DataSource \r\n    ////////////////////////////////////////////////////////////////////////////////////////    \r\n    _createSource: function () {\r\n        this._dataSource = new mini.DataTable();\r\n    },\r\n    _bindSource: function () {\r\n        var source = this._dataSource;\r\n        //table\r\n        source.on(\"loaddata\", this.__OnSourceLoadData, this);\r\n        source.on(\"cleardata\", this.__OnSourceClearData, this);\r\n\r\n    },\r\n    __OnSourceLoadData: function (e) {\r\n\r\n        this._initData();\r\n\r\n        \r\n\r\n        var grid = this,\r\n            sortField = grid.getSortField(),\r\n            sortOrder = grid.getSortOrder();\r\n        if (grid.sortMode == \"client\" && sortField && sortOrder) {\r\n            grid.sortBy(sortField, sortOrder);\r\n        }\r\n\r\n        this.doUpdate();\r\n\r\n        //this.deferUpdate();   //不能做这个，会有影响\r\n\r\n    },\r\n    __OnSourceClearData: function (e) {\r\n        this._initData();\r\n        this.doUpdate();\r\n    },\r\n    _initData: function () {\r\n\r\n    },\r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    // ColumnModel  \r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    isFrozen: function () {\r\n        var sc = this._columnModel._frozenStartColumn, fc = this._columnModel._frozenEndColumn;\r\n        //return this.isTableView() && !this.isGrouping() && sc >= 0 && fc >= sc;\r\n        return this._columnModel.isFrozen();\r\n    },\r\n    _createColumnModel: function () {\r\n        this._columnModel = new mini.ColumnModel(this);\r\n    },\r\n    _bindColumnModel: function () {\r\n        this._columnModel.on(\"columnschanged\", this.__OnColumnsChanged, this);\r\n    },\r\n    __OnColumnsChanged: function (e) {\r\n        this.columns = this._columnModel.columns;\r\n        this._doUpdateFilterRow();\r\n        this._doUpdateSummaryRow();\r\n\r\n        this.doUpdate();\r\n        this.fire(\"columnschanged\");\r\n\r\n    },\r\n    setColumns: function (columns) {\r\n        this._columnModel.setColumns(columns);\r\n        this.columns = this._columnModel.columns;\r\n    },\r\n    getColumns: function () {\r\n        return this._columnModel.getColumns();\r\n    },\r\n    getBottomColumns: function () {\r\n        return this._columnModel.getBottomColumns();\r\n    },\r\n    getVisibleColumnsRow: function () {\r\n        //获取可视列多行数组。多表头时。\r\n        var rows = this._columnModel.getVisibleColumnsRow().clone();\r\n        return rows;\r\n    },\r\n    getVisibleColumns: function () {\r\n        //获取可视列数组。底行。\r\n        var columns = this._columnModel.getVisibleColumns().clone();\r\n        return columns;\r\n    },\r\n    getFrozenColumns: function () {\r\n        //获取锁定列数组。底行。\r\n        var columns = this._columnModel.getFrozenColumns().clone();\r\n        //alert(columns.length);\r\n        return columns;\r\n    },\r\n    getUnFrozenColumns: function () {\r\n        //获取非锁定列数组。底行。\r\n        var columns = this._columnModel.getUnFrozenColumns().clone();\r\n        return columns;\r\n    },\r\n    getColumn: function (name) {\r\n        //根据列的name和index获取列对象\r\n        return this._columnModel.getColumn(name);\r\n    },\r\n    updateColumn: function (column, options) {\r\n        this._columnModel.updateColumn(column, options);\r\n    },\r\n    showColumns: function (columns) {\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = this.getColumn(columns[i]);\r\n            if (!column) continue;\r\n            column.visible = true;\r\n        }\r\n        this._columnModel._columnsChanged();\r\n        //this.setColumns(this.columns);\r\n    },\r\n    hideColumns: function (columns) {\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = this.getColumn(columns[i]);\r\n            if (!column) continue;\r\n            column.visible = false;\r\n        }\r\n        this._columnModel._columnsChanged();\r\n        //this.setColumns(this.columns);\r\n    },\r\n    showColumn: function (column) {\r\n        this.updateColumn(column, { visible: true });\r\n    },\r\n    hideColumn: function (column) {\r\n        this.updateColumn(column, { visible: false });\r\n    },\r\n    moveColumn: function (column, targetColumn, action) {\r\n        this._columnModel.moveColumn(column, targetColumn, action);\r\n    },\r\n    removeColumn: function (column) {\r\n        column = this.getColumn(column);\r\n        if (!column) return;\r\n        var pcolumn = this.getParentColumn(column);\r\n        if (column && pcolumn) {\r\n            pcolumn.columns.remove(column);\r\n            //this.setColumns(this.columns);\r\n            this._columnModel._columnsChanged();\r\n        }\r\n        return column;\r\n    },\r\n    //    insertColumn: function (column) {\r\n    //        \r\n    //    },\r\n    setDefaultColumnWidth: function (value) {\r\n        this._columnModel._defaultColumnWidth = value;\r\n    },\r\n    getDefaultColumnWidth: function () {\r\n        return this._columnModel._defaultColumnWidth;\r\n    },\r\n    setColumnWidth: function (column, width) {\r\n        this.updateColumn(column, { width: width });\r\n    },\r\n    getColumnWidth: function (column) {\r\n        var box = this.getColumnBox(column);\r\n        return box.width;\r\n    },\r\n    getParentColumn: function (column) {\r\n        return this._columnModel.getParentColumn(column);\r\n    },\r\n    getMaxColumnLevel: function () {\r\n        return this._columnModel._getMaxColumnLevel();\r\n    },\r\n    /////////////////////////////////////////////////////\r\n    _isCellVisible: function (rowIndex, columnIndex) {\r\n        return true;\r\n    },\r\n    _createDrawCellEvent: function (record, column, rowIndex, columnIndex) {\r\n        //if(rowIndex == 0 && column.field == \"Extends.loginname\") debugger\r\n\r\n        //var field = this.getKeyField(column.field);\r\n\r\n        var value = mini._getMap(column.field, record);\r\n        var e = {\r\n            sender: this,\r\n            //rowType: record._rowType,\r\n            rowIndex: rowIndex,\r\n            columnIndex: columnIndex,\r\n            record: record,\r\n            row: record,\r\n            column: column,\r\n            field: column.field,\r\n            value: value,\r\n            cellHtml: value,\r\n            rowCls: \"\",\r\n            rowStyle: null,\r\n            cellCls: column.cellCls || '',\r\n            cellStyle: column.cellStyle || '',\r\n            allowCellWrap: this.allowCellWrap,\r\n            showHGridLines: this.showHGridLines,\r\n            showVGridLines: this.showVGridLines,\r\n            cellInnerCls: \"\",\r\n            cellInnnerStyle: \"\",\r\n            autoEscape: column.autoEscape\r\n        };\r\n        e.visible = this._isCellVisible(rowIndex, columnIndex);\r\n        if (e.visible == true && this._mergedCellMaps) {\r\n            var cell = this._mergedCellMaps[rowIndex + \":\" + columnIndex];\r\n            if (cell) {\r\n                e.rowSpan = cell.rowSpan;\r\n                e.colSpan = cell.colSpan;\r\n            }\r\n        }\r\n        return e;\r\n    },\r\n\r\n    defaultColumnDateFormat: 'yyyy-MM-dd',      //dateType=\"date\"\r\n\r\n    _OnDrawCell: function (record, column, rowIndex, columnIndex) {\r\n        var e = this._createDrawCellEvent(record, column, rowIndex, columnIndex);\r\n        var value = e.value;\r\n\r\n        var dateFormat = column.dateFormat || (column.dataType == \"date\" ? this.defaultColumnDateFormat : \"\");\r\n        if (dateFormat) {\r\n\r\n\r\n            if (mini.isDate(e.value)) {\r\n                //日期格式化，有点慢！已经做了特别优化：yyyy-MM-dd, MM/dd/yyyy\r\n                e.cellHtml = mini.formatDate(value, dateFormat);\r\n            }\r\n            else e.cellHtml = value;\r\n        }\r\n\r\n\r\n        if (column.dataType == \"float\") {\r\n            var value = parseFloat(e.value);\r\n            if (!isNaN(value)) {\r\n                decimalPlaces = parseInt(column.decimalPlaces);\r\n                if (isNaN(decimalPlaces)) decimalPlaces = 2;\r\n\r\n                e.cellHtml = value.toFixed(decimalPlaces);\r\n            }\r\n        }\r\n\r\n        if (column.dataType == \"currency\") {        //dtype, vtype, xtype?\r\n            e.cellHtml = mini.formatCurrency(e.value, column.currencyUnit);\r\n        }\r\n\r\n        if (column.displayField) {\r\n            e.cellHtml = mini._getMap(column.displayField, record); //record[column.displayField];\r\n        }\r\n        if (column.numberFormat) {\r\n            var number = parseFloat(e.cellHtml);\r\n            if (!isNaN(number)) {\r\n                e.cellHtml = mini.formatNumber(number, column.numberFormat);\r\n            }\r\n        }\r\n        if (e.autoEscape == true) {     //e.htmlEncode = true       代码升级，更新换代 \r\n            e.cellHtml = mini.htmlEncode(e.cellHtml);\r\n            //e.cellHtml = 1;\r\n        }\r\n\r\n        var renderer = column.renderer;\r\n        if (renderer) {\r\n            //            var fn = null;\r\n            //            if (typeof renderer == \"function\") {\r\n            //                fn = renderer;\r\n            //            } else {\r\n            //                fn = mini._getFunctoin(renderer);\r\n            //            }\r\n            var fn = typeof renderer == \"function\" ? renderer : mini._getFunctoin(renderer);\r\n            if (fn) {\r\n                e.cellHtml = fn.call(column, e);\r\n            }\r\n        }\r\n\r\n        //e.cellHtml = e.cellHtml ? String(e.cellHtml).trim() : \"\";\r\n\r\n        //e.cellHtml = (e.cellHtml === 0 || e.cellHtml) ? String(e.cellHtml).trim() : \"\";\r\n\r\n        e.cellHtml = (e.cellHtml === 0 || e.cellHtml === false || e.cellHtml) ? String(e.cellHtml).trim() : \"\";\r\n\r\n        //e.cellHtml = (e.cellHtml === 0 || !mini.isNull(e.cellHtml)) ? String(e.cellHtml).trim() : \"\";\r\n\r\n\r\n        this.fire(\"drawcell\", e);\r\n\r\n        if (e.cellHtml && !!e.cellHtml.unshift && e.cellHtml.length == 0) {\r\n            e.cellHtml = \"&nbsp;\";\r\n        }\r\n        if (e.cellHtml === null || e.cellHtml === undefined || e.cellHtml === \"\") e.cellHtml = \"&nbsp;\";\r\n\r\n        return e;\r\n    },\r\n    _OnDrawSummaryCell: function (records, column, group, row) {\r\n        var e = {\r\n            row: row,\r\n            group: group,\r\n            result: this.getResultObject(),\r\n            sender: this,\r\n            data: records,\r\n            column: column,\r\n            field: column.field,\r\n            value: \"\",\r\n            cellHtml: \"\",\r\n            cellCls: column.cellCls || '',\r\n            cellStyle: column.cellStyle || '',\r\n            allowCellWrap: this.allowCellWrap\r\n        };\r\n\r\n        if (column.summaryType) {\r\n            var fn = mini.summaryTypes[column.summaryType];\r\n            if (fn) {\r\n                e.value = fn(records, column.field);\r\n            }\r\n        }\r\n\r\n        var value = e.value;\r\n        e.cellHtml = e.value;\r\n\r\n        if (e.value && parseInt(e.value) != e.value && e.value.toFixed) {\r\n            decimalPlaces = parseInt(column.decimalPlaces);\r\n            if (isNaN(decimalPlaces)) decimalPlaces = 2;\r\n\r\n            e.cellHtml = parseFloat(e.value.toFixed(decimalPlaces));\r\n        }\r\n\r\n        if (column.dateFormat) {\r\n            if (mini.isDate(e.value)) {\r\n                //日期格式化，有点慢！已经做了特别优化：yyyy-MM-dd, MM/dd/yyyy\r\n                e.cellHtml = mini.formatDate(value, column.dateFormat);\r\n            }\r\n            else e.cellHtml = value;\r\n        }\r\n        if (e.cellHtml) {\r\n            if (column.dataType == \"currency\") {\r\n                e.cellHtml = mini.formatCurrency(e.cellHtml, column.currencyUnit);\r\n            }\r\n        }\r\n\r\n        var renderer = column.summaryRenderer;\r\n        if (renderer) {\r\n            fn = typeof renderer == \"function\" ? renderer : window[renderer];\r\n            if (fn) {\r\n                e.cellHtml = fn.call(column, e);\r\n            }\r\n        }\r\n        column.summaryValue = e.value;\r\n\r\n        this.fire(\"drawsummarycell\", e);\r\n\r\n        if (e.cellHtml === null || e.cellHtml === undefined || e.cellHtml === \"\") e.cellHtml = \"&nbsp;\";\r\n\r\n        return e;\r\n    },\r\n    /////////////////////////////////////////\r\n    getScrollTop: function () {\r\n        return this._rowsViewEl.scrollTop;\r\n    },\r\n    setScrollTop: function (value) {\r\n        this._rowsViewEl.scrollTop = value;\r\n    },\r\n    getScrollLeft: function () {\r\n        return this._rowsViewEl.scrollLeft;\r\n    },\r\n    setScrollLeft: function (value) {\r\n\r\n        this._rowsViewEl.scrollLeft = value;\r\n    },\r\n    _syncScroll: function () {\r\n        var scrollLeft = this._rowsViewEl.scrollLeft;\r\n\r\n        //this._filterViewEl.scrollLeft = scrollLeft;\r\n        var filterTable = this._filterViewEl.firstChild;\r\n        filterTable.style.left = -scrollLeft + \"px\";\r\n\r\n\r\n\r\n        this._summaryViewEl.scrollLeft = scrollLeft;\r\n        this._columnsViewEl.scrollLeft = scrollLeft;\r\n    },\r\n    __OnRowViewScroll: function (e) {\r\n        this._syncScroll();\r\n    },\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    // Pager\r\n    //////////////////////////////////////////////////////////////////////////////////////////  \r\n    pagerType: \"pager\",\r\n    getPagerType: function () {\r\n        return this.pagerType;\r\n    },\r\n    setPagerType: function (value) {\r\n        this.pagerType = value;\r\n\r\n        var pager = mini.create({ type: this.pagerType });\r\n        if (pager) this._setBottomPager(pager);\r\n    },\r\n\r\n    _pagers: [],\r\n    _createPagers: function () {\r\n\r\n\r\n        this._pagers = [];\r\n        var bottomPager = new mini.Pager();\r\n        this._setBottomPager(bottomPager);\r\n    },\r\n\r\n    _setBottomPager: function (pager) {\r\n        pager = mini.create(pager);\r\n        if (!pager) return;\r\n        if (this._bottomPager) {\r\n            this.unbindPager(this._bottomPager);\r\n            this._bottomPagerEl.removeChild(this._bottomPager.el);\r\n        }\r\n        this._bottomPager = pager;\r\n        pager.render(this._bottomPagerEl);\r\n        this.bindPager(pager);\r\n    },\r\n\r\n    bindPager: function (pager) {\r\n        this._pagers.add(pager);\r\n    },\r\n    unbindPager: function (pager) {\r\n        this._pagers.remove(pager);\r\n    },\r\n    ////////////////////////////////////////////////////////\r\n\r\n    alwaysShowEmptyText: false,\r\n    setAlwaysShowEmptyText: function (value) {\r\n        this.alwaysShowEmptyText = value;\r\n    },\r\n    getAlwaysShowEmptyText: function () {\r\n        return this.alwaysShowEmptyText;\r\n    },\r\n\r\n\r\n    setShowEmptyText: function (value) {\r\n        this.showEmptyText = value;\r\n        if (this.data.length == 0) this.deferUpdate();\r\n    },\r\n    getShowEmptyText: function () {\r\n        return this.showEmptyText;\r\n    },\r\n    setEmptyText: function (value) {\r\n        this.emptyText = value;\r\n    },\r\n    getEmptyText: function () {\r\n        return this.emptyText;\r\n    },\r\n    setShowModified: function (value) {\r\n        this.showModified = value;\r\n    },\r\n    getShowModified: function () {\r\n        return this.showModified;\r\n    },\r\n    setShowNewRow: function (value) {\r\n        this.showNewRow = value;\r\n    },\r\n    getShowNewRow: function () {\r\n        return this.showNewRow;\r\n    },\r\n    setAllowCellWrap: function (value) {\r\n        this.allowCellWrap = value;\r\n    },\r\n    getAllowCellWrap: function () {\r\n        return this.allowCellWrap;\r\n    },\r\n    setAllowHeaderWrap: function (value) {\r\n        this.allowHeaderWrap = value;\r\n    },\r\n    getAllowHeaderWrap: function () {\r\n        return this.allowHeaderWrap;\r\n    },\r\n    setEnableGroupOrder: function (value) {\r\n        this.enableGroupOrder = value;\r\n    },\r\n    getEnableGroupOrder: function () {\r\n        return this.enableGroupOrder;\r\n    },\r\n\r\n    /////////////////////////////////////////////////////////////////////\r\n    //Grid Lines\r\n    /////////////////////////////////////////////////////////////////////\r\n    setShowHGridLines: function (value) {\r\n        if (this.showHGridLines != value) {\r\n            this.showHGridLines = value;\r\n            this.deferUpdate();\r\n        }\r\n    },\r\n    getShowHGridLines: function () {\r\n        return this.showHGridLines;\r\n    },\r\n    setShowVGridLines: function (value) {\r\n        if (this.showVGridLines != value) {\r\n            this.showVGridLines = value;\r\n            this.deferUpdate();\r\n        }\r\n    },\r\n    getShowVGridLines: function () {\r\n        return this.showVGridLines;\r\n    },\r\n\r\n    setShowSortIcon: function (value) {\r\n        if (this.showSortIcon != value) {\r\n            this.showSortIcon = value;\r\n            this.deferUpdate();\r\n        }\r\n    },\r\n    getShowSortIcon: function () {\r\n        return this.showSortIcon;\r\n    }\r\n\r\n\r\n});\r\n\r\nmini.copyTo(mini.GridView.prototype, mini._DataTableApplys);\r\n\r\nmini.regClass(mini.GridView, \"gridview\");\r\n\r\n\r\n//(function () {\r\n//    var inited = false;\r\n//    function init(){\r\n//        var grid = this;\r\n//        grid.on(\"drawcell\", function(e){\r\n//            \r\n//        });\r\n//    }\r\n\r\n//    var set = mini.DataGrid.prototype.set;\r\n//    mini.DataGrid.prototype.set = function(){\r\n//        if(!inited){\r\n//            init.call(this);\r\n//            inited = true;\r\n//        }\r\n//        set.apply(this, arguments);\r\n//    }\r\n//})();\r\n\r\n\r\n\r\n\r\n\n/*   \r\n    1.实现锁定列\r\n\r\n*/\r\n\r\nmini.FrozenGridView = function () {    \r\n    mini.FrozenGridView.superclass.constructor.apply(this, arguments);\r\n};\r\nmini.extend(mini.FrozenGridView, mini.GridView, {\r\n\r\n    //锁定列后，行高固定\r\n    isFixedRowHeight: function () {\r\n        //return this.fixedRowHeight || this.isFrozen();\r\n        //return this.fixedRowHeight || !this.allowCellWrap;\r\n        return this.fixedRowHeight;\r\n    },\r\n\r\n    frozenPosition: 'left',\r\n    isRightFrozen: function () {\r\n        return this.frozenPosition == 'right';\r\n    },\r\n    //    setFrozenPosition: function (value) {\r\n    //        this.frozenPosition = value;\r\n    //        this.deferLayout();\r\n    //    },\r\n    //    getFrozenPosition: function (value) {\r\n    //        return this.frozenPosition;\r\n    //    },\r\n\r\n    _create: function () {\r\n        mini.FrozenGridView.superclass._create.call(this);\r\n        var el = this.el;\r\n\r\n        var lockColumns = '<div class=\"mini-grid-columns-lock\"></div>';\r\n        var lockRows = '<div class=\"mini-grid-rows-lock\"><div class=\"mini-grid-rows-content\"></div></div>';\r\n\r\n        this._columnsLockEl = mini.before(this._columnsViewEl, lockColumns);\r\n        this._rowsLockEl = mini.before(this._rowsViewEl, lockRows);\r\n\r\n        this._rowsLockContentEl = this._rowsLockEl.firstChild;\r\n\r\n        //filter\r\n        var lockFilter = '<div class=\"mini-grid-filterRow-lock\" style=\"height:100%;\"></div>';\r\n        this._filterLockEl = mini.before(this._filterViewEl, lockFilter);\r\n        //summary\r\n        var lockSummary = '<div class=\"mini-grid-summaryRow-lock\"></div>';\r\n        this._summaryLockEl = mini.before(this._summaryViewEl, lockSummary);\r\n\r\n    },\r\n    _initEvents: function () {\r\n        mini.FrozenGridView.superclass._initEvents.call(this);\r\n\r\n        mini.on(this._rowsEl, \"mousewheel\", this.__OnMouseWheel, this);\r\n\r\n    },\r\n    _createHeaderText: function (column, viewIndex) {\r\n        var header = column.header;\r\n        if (typeof header == \"function\") header = header.call(this, column);\r\n        if (mini.isNull(header) || header === \"\") header = \"&nbsp;\";\r\n        if (this.isFrozen() && viewIndex == 2) {\r\n            if (column.viewIndex1) {\r\n                header = \"&nbsp;\";\r\n            }\r\n        }\r\n        return header;\r\n    },\r\n    _createColumnColSpan: function (column, sb, viewIndex) {\r\n        if (this.isFrozen()) {\r\n            var colspan = column[\"colspan\" + viewIndex];\r\n            if (colspan) {\r\n                sb[sb.length] = 'colspan=\"' + colspan + '\" ';\r\n            }\r\n        } else {\r\n            if (column.colspan) {\r\n                sb[sb.length] = 'colspan=\"' + column.colspan + '\" ';\r\n            }\r\n        }\r\n    },\r\n    doUpdateColumns: function () {\r\n        var scrollLeft = this._columnsViewEl.scrollLeft;\r\n\r\n        var frozenColumnsRow = this.isFrozen() ? this.getFrozenColumnsRow() : [];\r\n        var unFrozenColumnsRow = this.isFrozen() ? this.getUnFrozenColumnsRow() : this.getVisibleColumnsRow();\r\n\r\n        var frozenColumns = this.isFrozen() ? this.getFrozenColumns() : [];\r\n        var unfrozenColumns = this.isFrozen() ? this.getUnFrozenColumns() : this.getVisibleColumns();\r\n\r\n\r\n        var lockHtml = this._createColumnsHTML(frozenColumnsRow, 1, frozenColumns);\r\n        var html = this._createColumnsHTML(unFrozenColumnsRow, 2, unfrozenColumns);\r\n        var s = '<div class=\"mini-grid-topRightCell\"></div>';\r\n\r\n        lockHtml += s;\r\n        html += s;\r\n\r\n        this._columnsLockEl.innerHTML = lockHtml;\r\n        this._columnsViewEl.innerHTML = html;\r\n\r\n        var lockTable = this._columnsLockEl.firstChild;\r\n        lockTable.style.width = \"0px\";\r\n\r\n\r\n        this._columnsViewEl.scrollLeft = scrollLeft;\r\n    },\r\n    doUpdateRows: function () {\r\n\r\n        var data = this.getVisibleRows();\r\n\r\n\r\n        var columns1 = this.getFrozenColumns();\r\n        var columns2 = this.getUnFrozenColumns();\r\n\r\n\r\n        if (this.isGrouping()) {\r\n            var lockHtml = this._createGroupingHTML(columns1, 1);\r\n            var html = this._createGroupingHTML(columns2, 2);\r\n\r\n            this._rowsLockContentEl.innerHTML = lockHtml;\r\n            this._rowsViewContentEl.innerHTML = html;\r\n        } else {\r\n            //if (data.length > 1) data.length = 1;\r\n            var lockHtml = this._createRowsHTML(columns1, 1, this.isFrozen() ? data : []);\r\n            var html = this._createRowsHTML(columns2, 2, data);\r\n\r\n            //            mini.removeChilds(this._rowsLockContentEl);\r\n            //            mini.removeChilds(this._rowsViewContentEl);\r\n\r\n            //            jQuery(this._rowsLockContentEl).empty();\r\n            //            jQuery(this._rowsViewContentEl).empty();\r\n\r\n            this._rowsLockContentEl.innerHTML = lockHtml;\r\n            this._rowsViewContentEl.innerHTML = html;\r\n        }\r\n        var lockTable = this._rowsLockContentEl.firstChild;\r\n        lockTable.style.width = \"0px\";\r\n\r\n        //this._syncRowsHeight();\r\n    },\r\n    _doUpdateFilterRow: function () {\r\n\r\n        if (this._filterLockEl.firstChild) {\r\n            this._filterLockEl.removeChild(this._filterLockEl.firstChild);\r\n        }\r\n        if (this._filterViewEl.firstChild) {\r\n            this._filterViewEl.removeChild(this._filterViewEl.firstChild);\r\n        }\r\n\r\n        var columns1 = this.getFrozenColumns();\r\n        var columns2 = this.getUnFrozenColumns();\r\n\r\n        var html1 = this._createFilterRowHTML(columns1, 1);\r\n        var html2 = this._createFilterRowHTML(columns2, 2);\r\n\r\n        this._filterLockEl.innerHTML = html1;\r\n        this._filterViewEl.innerHTML = html2;\r\n\r\n        this._doRenderFilters();\r\n    },\r\n    _doUpdateSummaryRow: function () {\r\n\r\n        var columns1 = this.getFrozenColumns();\r\n        var columns2 = this.getUnFrozenColumns();\r\n\r\n        var html1 = this._createSummaryRowHTML(columns1, 1);\r\n        var html2 = this._createSummaryRowHTML(columns2, 2);\r\n\r\n        this._summaryLockEl.innerHTML = html1;\r\n        this._summaryViewEl.innerHTML = html2;\r\n    },\r\n    _syncRowsHeightTimer: null,\r\n    //只在doUpdateRows方法内调用?\r\n\r\n    syncRowDetail: function (row) {\r\n        var row1 = this._getRowDetailEl(row, 1);\r\n        var row2 = this._getRowDetailEl(row, 2);\r\n        if (row1 && row2) this._doSyncRowHeight(row1, row2);\r\n    },\r\n\r\n    _doSyncRowHeight: function (row1, row2) {\r\n\r\n        //        row1.style.height = row2.style.height = \"auto\";\r\n\r\n        //        var h1 = row1.offsetHeight;\r\n        //        var h2 = row2.offsetHeight;\r\n        //        if (h1 < h2) h1 = h2;\r\n\r\n        //        row1.style.height = row2.style.height = h1 + \"px\";\r\n\r\n        row1.style.height = row2.style.height = \"auto\";\r\n\r\n        var td1 = row1.cells[0],\r\n            td2 = row2.cells[0];\r\n\r\n\r\n        var h1 = td1.offsetHeight;\r\n        var h2 = td2.offsetHeight;\r\n\r\n        if (h1 < h2) h1 = h2;\r\n\r\n        row1.style.height = row2.style.height = h1 + \"px\";\r\n\r\n    },\r\n\r\n    _syncRowsHeight: function () {\r\n        //同步锁定区、非锁定区的所有行高。优化方案：在doUpdate的时候调用一次，其他的时候不调用。\r\n        var me = this;\r\n\r\n        function autoRow(row1, row2) {\r\n            row1.style.height = row2.style.height = \"auto\";\r\n        }\r\n\r\n        function measureRow(row1, row2) {\r\n            var td1 = row1.cells[0],\r\n            td2 = row2.cells[0];\r\n\r\n            var h1 = td1.offsetHeight;\r\n            var h2 = td2.offsetHeight;\r\n\r\n            if (h1 < h2) h1 = h2;\r\n\r\n            return h1;\r\n        }\r\n\r\n        function arrangeRow(row1, row2, height) {\r\n            row1.style.height = row2.style.height = height + \"px\";\r\n        }\r\n\r\n        function doSync() {\r\n            var sss = new Date();\r\n            //return;\r\n            //优化：1）分2次同步；2）只在doUpdate调用一次\r\n            var d = document;\r\n            var data = me.getDataView();\r\n\r\n            //1) auto\r\n            var rowMap = {};\r\n            for (var i = 0, l = data.length; i < l; i++) {\r\n                var row = data[i];\r\n                var row1 = me._getRowEl(row, 1);\r\n                var row2 = me._getRowEl(row, 2);\r\n                if (!row1 || !row2) continue;\r\n\r\n                //me._doSyncRowHeight(row1, row2);\r\n\r\n                autoRow(row1, row2);\r\n                rowMap[i] = { row1: row1, row2: row2 };\r\n            }\r\n            //2) measure\r\n            for (var i = 0, l = data.length; i < l; i++) {\r\n                var row = data[i];\r\n                var map = rowMap[i];\r\n                if (!map) continue;\r\n                map.height = measureRow(map.row1, map.row2);\r\n            }\r\n            //2) arrange\r\n            for (var i = 0, l = data.length; i < l; i++) {\r\n                var row = data[i];\r\n                var map = rowMap[i];\r\n                if (!map) continue;\r\n                arrangeRow(map.row1, map.row2, map.height);\r\n            }\r\n\r\n            me._syncRowsHeightTimer = null;\r\n\r\n            //alert(new Date() - sss);\r\n        }\r\n\r\n        if (this.isFrozen() && this.isFixedRowHeight() == false) {\r\n            if (this._syncRowsHeightTimer) clearTimeout(this._syncRowsHeightTimer);\r\n            this._syncRowsHeightTimer = setTimeout(doSync, 2);\r\n        }\r\n    },\r\n    _syncColumnHeight: function () {\r\n\r\n        var lock = this._columnsLockEl, view = this._columnsViewEl;\r\n        lock.style.height = view.style.height = 'auto';\r\n        if (this.isFrozen()) {\r\n            var h = lock.offsetHeight;\r\n            var h2 = view.offsetHeight;\r\n            h = h > h2 ? h : h2;\r\n            lock.style.height = view.style.height = h + 'px';\r\n        }\r\n\r\n        //summary\r\n        var lock = this._summaryLockEl, view = this._summaryViewEl;\r\n        lock.style.height = view.style.height = 'auto';\r\n        if (this.isFrozen()) {\r\n            var h = lock.offsetHeight;\r\n            var h2 = view.offsetHeight;\r\n            h = h > h2 ? h : h2;\r\n            lock.style.height = view.style.height = h + 'px';\r\n        }\r\n    },\r\n\r\n    _layoutColumns: function () {\r\n        //if(mini.isChrome) return; //暂不实现\r\n        function getHeight(el) {\r\n            return el.offsetHeight;\r\n        }\r\n        function getTds(tr) {\r\n            var tds = [];\r\n            for (var i = 0, l = tr.cells.length; i < l; i++) {\r\n                var td = tr.cells[i];\r\n                if (td.style.width == \"0px\") continue;\r\n                tds.push(td);\r\n            }\r\n            return tds;\r\n        }\r\n        function clearHeight(tr) {\r\n            var tds = getTds(tr);\r\n            for (var i = 0, l = tds.length; i < l; i++) {\r\n                var td = tds[i];\r\n                td.style.height = \"auto\";\r\n            }\r\n        }\r\n        function clearHeights() {\r\n            table1.style.height = table1.style.height = \"auto\";\r\n            for (var i = 0, l = table1.rows.length; i < l; i++) {\r\n                var row1 = table1.rows[i];\r\n                var row2 = table2.rows[i];\r\n                clearHeight(row1);\r\n                clearHeight(row2);\r\n            }\r\n        }\r\n        function getRowHeight(tr, nospan) {\r\n            var h = 0;\r\n            var tds = getTds(tr);\r\n            for (var i = 0, l = tds.length; i < l; i++) {\r\n                var td = tds[i];\r\n                var rowspan = parseInt(td.rowSpan) > 1;\r\n                if (rowspan && nospan) continue;\r\n\r\n                var th = td.offsetHeight;\r\n                if (th > h) h = th;\r\n\r\n            }\r\n            return h;\r\n        }\r\n\r\n\r\n        if (!this.isFrozen()) return;\r\n        var table1 = this._columnsLockEl.firstChild,\r\n                    table2 = this._columnsViewEl.firstChild;\r\n\r\n        /*\r\n        多表头+换行+锁定列同步高度算法：\r\n        1.首先对比tr的height\r\n        2.然后，设置小的td高度\r\n        3.\r\n        1.先找正常td，设置正常高度\r\n        2.然后找rowspan的td，设置最大高度\r\n        */\r\n\r\n        function syncNoRowSpan(tr, tr2) {\r\n            var h = getRowHeight(tr2, true);\r\n            //if (h == 0) return;\r\n            var tds = getTds(tr);\r\n            for (var i = 0, l = tds.length; i < l; i++) {\r\n                var td = tds[i];\r\n                var rowspan = parseInt(td.rowSpan) > 1;\r\n                //if (td.id == \"mini-3$headerCell1$25\") debugger\r\n                if (rowspan) {\r\n\r\n                } else {\r\n                    mini.setHeight(td, h);\r\n                }\r\n            }\r\n        }\r\n        function syncRowSpan(tr, tr2) {\r\n            var h = getRowHeight(tr2);\r\n            //if (h == 0) return;\r\n            var tds = getTds(tr);\r\n            for (var i = 0, l = tds.length; i < l; i++) {\r\n                var td = tds[i];\r\n                var rowspan = parseInt(td.rowSpan) > 1;\r\n                //if(td.id == \"mini-3$headerCell1$25\") debugger\r\n                if (rowspan) {\r\n                    mini.setHeight(td, h);\r\n                } else {\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        clearHeights();\r\n\r\n        //处理只有一个单元格的情况\r\n\r\n        for (var i = 0, l = table1.rows.length; i < l; i++) {\r\n            var row1 = table1.rows[i];\r\n            var row2 = table2.rows[i];\r\n            var h1 = getRowHeight(row1), h2 = getRowHeight(row2);\r\n\r\n            if (h1 == h2) {\r\n\r\n                //} else if (h1 < h2 || row1.cells.length == 2) {//row1.cells.length == 2 表示只有一列\r\n            } else if (h1 < h2) {\r\n                syncNoRowSpan(row1, row2);\r\n                syncRowSpan(row1, row2);\r\n                //} else if (h1 > h2 || row2.cells.length == 2) {\r\n            } else if (h1 > h2) {\r\n                syncNoRowSpan(row2, row1);\r\n                syncRowSpan(row2, row1);\r\n            }\r\n        }\r\n\r\n        //同步下表格高度\r\n        var h1 = getHeight(table1), h2 = getHeight(table2);\r\n        if (h1 < h2) {\r\n            mini.setHeight(table1, h2);\r\n        } else if (h1 > h2) {\r\n            mini.setHeight(table2, h1);\r\n        }\r\n    },\r\n    doLayout: function () {\r\n        if (this.canLayout() == false) return;\r\n        this._doLayoutScroll = false;\r\n\r\n\r\n        //debugger\r\n\r\n        //var autoHeight = this.isAutoHeight();\r\n        var isFrozen = this.isFrozen();\r\n        var viewportWidth = this.getViewportWidth(true);\r\n        var lockedWidth = this.getLockedWidth();\r\n        var viewWidth = viewportWidth - lockedWidth;\r\n\r\n        //alert(lockedWidth);\r\n\r\n        this._doEmptyText();\r\n\r\n\r\n\r\n        var marginStyle = this.isRightFrozen() ? 'marginRight' : 'marginLeft';\r\n        var leftStyle = this.isRightFrozen() ? 'right' : 'left';\r\n        //        this._filterLockEl.style.left = \"auto\";\r\n        //        this._summaryLockEl.style.left = \"auto\";\r\n        //        this._columnsLockEl.style.left = \"auto\";\r\n        //        this._rowsLockEl.style.left = \"auto\";\r\n\r\n        if (isFrozen) {\r\n\r\n            this._filterViewEl.style[marginStyle] = lockedWidth + \"px\";\r\n            this._summaryViewEl.style[marginStyle] = lockedWidth + \"px\";\r\n            this._columnsViewEl.style[marginStyle] = lockedWidth + \"px\";\r\n            this._rowsViewEl.style[marginStyle] = lockedWidth + \"px\";\r\n\r\n            if (mini.isSafari || mini.isChrome || mini.isIE6) {\r\n\r\n                this._filterViewEl.style[\"width\"] = viewWidth + \"px\";\r\n                this._summaryViewEl.style[\"width\"] = viewWidth + \"px\";\r\n                this._columnsViewEl.style[\"width\"] = viewWidth + \"px\";\r\n            } else {\r\n                this._filterViewEl.style[\"width\"] = \"auto\";\r\n                this._summaryViewEl.style[\"width\"] = \"auto\";\r\n                this._columnsViewEl.style[\"width\"] = \"auto\";\r\n            }\r\n            //            if (mini.isIE6 || !mini.isIE)  this._columnsViewEl.style[\"width\"] = viewWidth + \"px\";\r\n            if (mini.isSafari || mini.isChrome || mini.isIE6) this._rowsViewEl.style[\"width\"] = viewWidth + \"px\";\r\n\r\n            mini.setWidth(this._filterLockEl, lockedWidth);\r\n            mini.setWidth(this._summaryLockEl, lockedWidth);\r\n            mini.setWidth(this._columnsLockEl, lockedWidth);\r\n            mini.setWidth(this._rowsLockEl, lockedWidth);\r\n\r\n            this._filterLockEl.style[leftStyle] = \"0px\";\r\n            this._summaryLockEl.style[leftStyle] = \"0px\";\r\n            this._columnsLockEl.style[leftStyle] = \"0px\";\r\n            this._rowsLockEl.style[leftStyle] = \"0px\";\r\n\r\n            //            //锁定列区域偏移\r\n            //            this._columnsLockEl.firstChild.style.left = -leftLockedOffset + \"px\";\r\n            //            this._columnsViewEl.firstChild.style.left = -rightLockedOffset + \"px\";\r\n\r\n        } else {\r\n            this._doClearFrozen();\r\n        }\r\n\r\n        //处理td的高度\r\n        this._layoutColumns();\r\n        //同步左右两个column高度\r\n        this._syncColumnHeight();\r\n\r\n\r\n        mini.FrozenGridView.superclass.doLayout.call(this);\r\n\r\n        var autoHeight = this._autoHeight;\r\n\r\n        if (isFrozen) {\r\n            if (mini.isChrome || mini.isIE6) {\r\n                //处理td的高度\r\n                this._layoutColumns();\r\n                //同步左右两个column高度\r\n                this._syncColumnHeight();\r\n                mini.FrozenGridView.superclass.doLayout.call(this);\r\n            }\r\n        }\r\n\r\n\r\n        //        if (isFrozen) {\r\n\r\n        //            this._filterViewEl.style[\"marginLeft\"] = lockedWidth + \"px\";\r\n        //            this._summaryViewEl.style[\"marginLeft\"] = lockedWidth + \"px\";\r\n        //            this._columnsViewEl.style[\"marginLeft\"] = lockedWidth + \"px\";\r\n        //            this._rowsViewEl.style[\"marginLeft\"] = lockedWidth + \"px\";\r\n\r\n        //            if (mini.isSafari || mini.isChrome || mini.isIE6) {\r\n        //                \r\n        //                this._filterViewEl.style[\"width\"] = viewWidth + \"px\";\r\n        //                this._summaryViewEl.style[\"width\"] = viewWidth + \"px\";\r\n        //                this._columnsViewEl.style[\"width\"] = viewWidth + \"px\";\r\n        //            } else {\r\n        //                this._filterViewEl.style[\"width\"] = \"auto\";\r\n        //                this._summaryViewEl.style[\"width\"] = \"auto\";\r\n        //                this._columnsViewEl.style[\"width\"] = \"auto\";\r\n        //            }\r\n        //            //            if (mini.isIE6 || !mini.isIE)  this._columnsViewEl.style[\"width\"] = viewWidth + \"px\";\r\n        //            if (mini.isSafari || mini.isChrome || mini.isIE6) this._rowsViewEl.style[\"width\"] = viewWidth + \"px\";\r\n\r\n        //            mini.setWidth(this._filterLockEl, lockedWidth);\r\n        //            mini.setWidth(this._summaryLockEl, lockedWidth);\r\n        //            mini.setWidth(this._columnsLockEl, lockedWidth);\r\n        //            mini.setWidth(this._rowsLockEl, lockedWidth);\r\n\r\n        //            this._filterLockEl.style[\"left\"] = \"0px\";\r\n        //            this._summaryLockEl.style[\"left\"] = \"0px\";\r\n        //            this._columnsLockEl.style[\"left\"] = \"0px\";\r\n        //            this._rowsLockEl.style[\"left\"] = \"0px\";\r\n\r\n        //            //            //锁定列区域偏移\r\n        //            //            this._columnsLockEl.firstChild.style.left = -leftLockedOffset + \"px\";\r\n        //            //            this._columnsViewEl.firstChild.style.left = -rightLockedOffset + \"px\";\r\n\r\n        //        } else {\r\n        //            this._doClearFrozen();\r\n        //        }\r\n\r\n        if (autoHeight) {\r\n            this._rowsLockEl.style.height = \"auto\";\r\n        } else {\r\n            this._rowsLockEl.style.height = \"100%\";\r\n        }\r\n\r\n        this._syncRowsHeight();\r\n\r\n        //        this._layoutScroll();\r\n        //        var me = this;\r\n        //        setTimeout(function () {\r\n        //            me._layoutScroll();\r\n        //        }, 1);\r\n    },\r\n    _doEmptyText: function () {\r\n        //        var d1 = document.getElementById(this.uid + \"$emptytext\" + 1);\r\n        //        var d2 = document.getElementById(this.uid + \"$emptytext\" + 2);        \r\n        //        if (this.getDataView().length == 0 && this.showEmptyText) {            \r\n        //            d1.style.display = d2.style.display = \"\";\r\n        //        } else {\r\n        //            d1.style.display = d2.style.display = \"none\";\r\n        //        }\r\n    },\r\n    //count: 0,\r\n    _getRowEl: function (row, index) {\r\n        row = this.getRecord(row);\r\n        var id = this._createRowId(row, index);\r\n        var el = document.getElementById(id);\r\n        return el;\r\n    },\r\n\r\n    ///////////////////////////////////////////////////\r\n    _doClearFrozen: function () {\r\n\r\n        var marginStyle = this.isRightFrozen() ? 'marginRight' : 'marginLeft';\r\n        var leftStyle = this.isRightFrozen() ? 'right' : 'left';\r\n\r\n        this._filterLockEl.style.left = \"-10px\";\r\n        this._summaryLockEl.style.left = \"-10px\";\r\n        this._columnsLockEl.style.left = \"-10px\";\r\n        this._rowsLockEl.style.left = \"-10px\";\r\n\r\n        this._filterLockEl.style[\"width\"] = \"0px\";\r\n        this._summaryLockEl.style[\"width\"] = \"0px\";\r\n        this._columnsLockEl.style[\"width\"] = \"0px\";\r\n        this._rowsLockEl.style[\"width\"] = \"0px\";\r\n\r\n        this._filterViewEl.style[\"marginLeft\"] = \"0px\";\r\n        this._summaryViewEl.style[\"marginLeft\"] = \"0px\";\r\n        this._columnsViewEl.style[\"marginLeft\"] = \"0px\";\r\n        this._rowsViewEl.style[\"marginLeft\"] = \"0px\";\r\n\r\n        this._filterViewEl.style[\"width\"] = \"auto\";\r\n        this._summaryViewEl.style[\"width\"] = \"auto\";\r\n        this._columnsViewEl.style[\"width\"] = \"auto\";\r\n        this._rowsViewEl.style[\"width\"] = \"auto\";\r\n\r\n        if (mini.isSafari || mini.isChrome || mini.isIE6) {\r\n            this._filterViewEl.style[\"width\"] = \"100%\";\r\n            this._summaryViewEl.style[\"width\"] = \"100%\";\r\n            this._columnsViewEl.style[\"width\"] = \"100%\";\r\n            this._rowsViewEl.style[\"width\"] = \"100%\";\r\n        }\r\n\r\n        //        //取消锁定列区域偏移\r\n        //        this._columnsLockEl.firstChild.style.left = \"0px\";\r\n        //        this._columnsViewEl.firstChild.style.left = \"0px\";\r\n    },\r\n    frozenColumns: function (startColumn, finishColumn) {\r\n        this.frozen(startColumn, finishColumn);\r\n    },\r\n    unFrozenColumns: function () {\r\n        this.unFrozen();\r\n    },\r\n    frozen: function (startColumn, finishColumn) {\r\n        this._doClearFrozen();\r\n        this._columnModel.frozen(startColumn, finishColumn);\r\n    },\r\n    unFrozen: function () {\r\n        this._doClearFrozen();\r\n        this._columnModel.unFrozen();\r\n    },\r\n    setFrozenStartColumn: function (value) {\r\n        this._columnModel.setFrozenStartColumn(value);\r\n    },\r\n    setFrozenEndColumn: function (value) {\r\n        return this._columnModel.setFrozenEndColumn(value);\r\n    },\r\n    getFrozenStartColumn: function (value) {\r\n        return this._columnModel._frozenStartColumn;\r\n    },\r\n    getFrozenEndColumn: function (value) {\r\n        return this._columnModel._frozenEndColumn;\r\n    },\r\n    getFrozenColumnsRow: function () {\r\n        return this._columnModel.getFrozenColumnsRow();\r\n    },\r\n    getUnFrozenColumnsRow: function () {\r\n        return this._columnModel.getUnFrozenColumnsRow();\r\n    },\r\n    ////////////////////////////////////////////////////\r\n    getLockedWidth: function () {\r\n\r\n        if (!this.isFrozen()) return 0;\r\n\r\n        var table = this._rowsLockContentEl.firstChild.firstChild;\r\n        //var table = this._columnsLockEl.firstChild.firstChild;\r\n        var width = table ? table.offsetWidth : 0;\r\n        return width;\r\n    },\r\n    ////////////////////////////////////////\r\n    _canDeferSyncScroll: function () {\r\n        return this.isFrozen();\r\n    },\r\n    _syncScroll: function () {\r\n        var scrollLeft = this._rowsViewEl.scrollLeft;\r\n        //if(scrollLeft != 0) alert(scrollLeft);\r\n\r\n        //this._filterViewEl.scrollLeft = scrollLeft;\r\n        var filterTable = this._filterViewEl.firstChild;\r\n        //        filterTable.style.position = \"absolute\";\r\n        //        filterTable.style.top = \"0px\";\r\n        filterTable.style.left = -scrollLeft + \"px\";\r\n\r\n        //        document.title = new Date().getTime();\r\n        //        if (this._filterViewEl.scrollLeft > 0) debugger\r\n        //this._filterViewEl.scrollLeft = 0;\r\n\r\n        this._summaryViewEl.scrollLeft = scrollLeft;\r\n        this._columnsViewEl.scrollLeft = scrollLeft;\r\n\r\n        var me = this;\r\n        var scrollTop = me._rowsViewEl.scrollTop;\r\n        me._rowsLockEl.scrollTop = scrollTop;\r\n\r\n        //document.title = new Date().getTime();\r\n\r\n        //@ 2017-11-27  注释掉\r\n//        if (this._canDeferSyncScroll()) {\r\n\r\n//            setTimeout(function () {\r\n//                //                if (scrollTop > me._rowsLockEl.scrollTop) {\r\n//                //                }\r\n\r\n//                //me._rowsViewEl.scrollTop = me._rowsLockEl.scrollTop;\r\n//                me._syncScrollOffset(null, me._rowsLockEl.scrollTop);  //@ 2017-11-20 \r\n\r\n//                //me._rowsViewEl.scrollTop = me._rowsLockEl.scrollTop = scrollTop;\r\n//            }, 50);\r\n//        }\r\n    },\r\n    //    _syncScrollOffset: function () {\r\n    //        var scrollLeft = this._hscrollEl.scrollLeft;\r\n    //        this._rowsViewEl.scrollLeft = scrollLeft;\r\n    //        this._columnsViewEl.scrollLeft = this._rowsViewEl.scrollLeft;\r\n\r\n    //        var me = this;\r\n    //        me._rowsLockEl.scrollTop = me._rowsViewEl.scrollTop;\r\n    //        setTimeout(function () {\r\n    //            if (me.isFrozen()) {\r\n    //                me._rowsViewEl.scrollTop = me._rowsLockEl.scrollTop;\r\n    //            }\r\n    //        }, 60);\r\n    //    },\r\n    //    __OnRowsViewScroll: function (e) {\r\n    //        this._syncScrollOffset();\r\n    //    },\r\n    __OnMouseWheel: function (e) {\r\n        var scrollTop = this.getScrollTop() - e.wheelDelta;\r\n        var top = this.getScrollTop();\r\n        this.setScrollTop(scrollTop);\r\n        if (top != this.getScrollTop()) {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n\r\n});\r\nmini.regClass(mini.FrozenGridView, \"FrozenGridView\");\r\n\r\n\n/*\r\n    1.动态刷新表格\r\n*/\r\n\r\nmini.ScrollGridView = function () {\r\n    mini.ScrollGridView.superclass.constructor.apply(this, arguments);\r\n};\r\nmini.extend(mini.ScrollGridView, mini.FrozenGridView, {\r\n\r\n    virtualScroll: true,\r\n    virtualRows: 25,\r\n\r\n    defaultRowHeight: 25,\r\n\r\n    virtualColumns: false,\r\n\r\n    ///////////////////////////\r\n    _canDeferSyncScroll: function () {\r\n        return this.isFrozen() && !this.isVirtualScroll();\r\n    },\r\n    setVirtualScroll: function (value) {\r\n        this.virtualScroll = value;\r\n        this.doUpdate();\r\n    },\r\n    getVirtualScroll: function (value) {\r\n        return this.virtualScroll;\r\n    },\r\n    isFitColumns: function () {\r\n        return this.fitColumns && !this.virtualColumns;\r\n    },\r\n    setVirtualColumns: function (value) {\r\n        this.virtualColumns = value;\r\n        //mini.addCls(this.el, 'mini-grid-virtualcolumns');\r\n        this.doUpdate();\r\n    },\r\n    getVirtualColumns: function (value) {\r\n        return this.virtualColumns;\r\n    },\r\n\r\n    isFixedRowHeight: function () {\r\n        //return this.fixedRowHeight || this.isVirtualScroll() || this.isFrozen();\r\n        //return this.fixedRowHeight || this.isVirtualScroll() || !this.allowCellWrap;\r\n        //return this.fixedRowHeight || this.isVirtualScroll();\r\n        return this.fixedRowHeight || this.virtualScroll;\r\n    },\r\n    isVirtualScroll: function () {\r\n        if (this.virtualScroll) {\r\n            return this.isAutoHeight() == false && this.isGrouping() == false;\r\n        }\r\n        return false;\r\n    },\r\n    _getScrollView: function () {\r\n        var data = this.getVisibleRows();\r\n        return data;\r\n    },\r\n    _getScrollViewCount: function () {\r\n        return this._getScrollView().length;\r\n    },\r\n\r\n    //    _getRowHeight: function (row) {\r\n    //        return this._getScrollRowHeight(0, row);\r\n    //    },\r\n\r\n    _getScrollRowHeight: function (index, row) {\r\n        if (row && row._height) {\r\n            var h = parseInt(row._height);\r\n            if (!isNaN(h)) return h;\r\n        }\r\n        return this.defaultRowHeight;\r\n\r\n        //        var data = this._getScrollView();\r\n        //        var record = data[index];\r\n        //        if (!record) return 0;\r\n        //        var h = parseInt(record._height);\r\n        //        if (isNaN(parseInt(record._height))) h = this.defaultRowHeight;\r\n        //        return h;\r\n    },\r\n    _getRangeHeight: function (start, end) {\r\n\r\n        return (end - start) * this.defaultRowHeight;\r\n\r\n//        \t\tvar height = 0;\r\n//        \t\tvar data = this._getScrollView();\r\n//        \t\tfor (var i = start; i < end; i++) {\r\n//        \t\t\tvar row = data[i];\r\n//        \t\t\tvar h = this._getScrollRowHeight(i, row);\r\n//        \t\t\theight += h;\r\n//        \t\t}\r\n//        \t\treturn height;\r\n    },\r\n    _getIndexByScrollTop: function (scrollTop) {\r\n\r\n        var count = parseInt(scrollTop / this.defaultRowHeight);\r\n        return count;\r\n\r\n//        \t\tvar height = 0;\r\n//        \t\tvar data = this._getScrollView();\r\n//        \t\tvar count = this._getScrollViewCount();\r\n//        \t\tfor (var i = 0, l = count; i < l; i++) {\r\n//        \t\t\tvar row = data[i];\r\n//        \t\t\tvar h = this._getScrollRowHeight(i, row);\r\n//        \t\t\theight += h;\r\n//        \t\t\tif (height >= scrollTop) return i;\r\n//        \t\t}\r\n//        \t\treturn count;\r\n    },\r\n    //\t_getRangeHeight: function (start, end) {\r\n    //\t\tvar height = 0;\r\n    //\t\tvar data = this._getScrollView();\r\n    //\t\tfor (var i = start; i < end; i++) {\r\n    //\t\t\tvar row = data[i];\r\n    //\t\t\tvar h = this._getScrollRowHeight(i, row);\r\n    //\t\t\theight += h;\r\n    //\t\t}\r\n    //\t\treturn height;\r\n    //\t},\r\n    //\t_getIndexByScrollTop: function (scrollTop) {\r\n    //\t\tvar height = 0;\r\n    //\t\tvar data = this._getScrollView();\r\n    //\t\tvar count = this._getScrollViewCount();\r\n    //\t\tfor (var i = 0, l = count; i < l; i++) {\r\n    //\t\t\tvar row = data[i];\r\n    //\t\t\tvar h = this._getScrollRowHeight(i, row);\r\n    //\t\t\theight += h;\r\n    //\t\t\tif (height >= scrollTop) return i;\r\n    //\t\t}\r\n    //\t\treturn count;\r\n    //\t},\r\n    __getScrollViewRange: function (start, end) {\r\n        var data = this._getScrollView();\r\n        return data.getRange(start, end);\r\n    },\r\n\r\n    _getColumnByScrollLeft: function (scrollLeft) {\r\n\r\n        var width = 0;\r\n        var columns = this.getUnFrozenColumns();\r\n        var count = columns.length;\r\n        for (var i = 0, l = count; i < l; i++) {\r\n            var col = columns[i];\r\n            var w = col.pxWidth;\r\n            if (!isNaN(w)) {\r\n                width += w;\r\n            }\r\n            if (width >= scrollLeft) return i;\r\n        }\r\n        return count;\r\n    },\r\n    _getRangeWidth: function (start, end) {\r\n\r\n        var width = 0;\r\n        var columns = this.getUnFrozenColumns();\r\n        for (var i = start; i < end; i++) {\r\n            var col = columns[i];\r\n            if (col) {\r\n                var w = col.pxWidth;\r\n                if (!isNaN(w)) {\r\n                    width += w;\r\n                }\r\n            }\r\n        }\r\n        return width;\r\n    },\r\n    _getColumnAllWidth: function () {\r\n\r\n        var width = 0;\r\n        var columns = this.getUnFrozenColumns();\r\n        var count = columns.length;\r\n        for (var i = 0, l = count; i < l; i++) {\r\n            var col = columns[i];\r\n            var w = col.pxWidth;\r\n            if (!isNaN(w)) {\r\n                width += w;\r\n            }\r\n        }\r\n        return width;\r\n    },\r\n\r\n    _getViewRegion: function () {\r\n\r\n\r\n        //根据virtualRows，返回严格限制的区域范围：start, end\r\n        var data = this._getScrollView();\r\n\r\n        if (this.isVirtualScroll() == false) {\r\n            var region = {\r\n                top: 0,\r\n                bottom: 0,\r\n                rows: data,\r\n                start: 0,\r\n                end: 0\r\n            };\r\n            return region;\r\n        }\r\n\r\n        var rowHeight = this.defaultRowHeight;\r\n\r\n        var nowRegion = this._getViewNowRegion();\r\n\r\n        var scrollTop = this.getScrollTop();\r\n        var bodyHeight = this._vscrollEl.offsetHeight;\r\n\r\n        var count = this._getScrollViewCount();\r\n\r\n        var start = nowRegion.start, end = nowRegion.end;\r\n\r\n        for (var i = 0, l = count; i < l; i += this.virtualRows) {\r\n            var i2 = i + this.virtualRows;\r\n            if (i <= start && start < i2) {\r\n                start = i;\r\n            }\r\n            if (i < end && end <= i2) {\r\n                end = i2;\r\n            }\r\n        }\r\n        if (end > count) end = count;\r\n        if (end == 0) end = this.virtualRows;\r\n        //if (start > end) start = end;\r\n\r\n        var top = this._getRangeHeight(0, start);\r\n        var bottom = this._getRangeHeight(end, this._getScrollViewCount());\r\n        var data = this.__getScrollViewRange(start, end); //data.getRange(start, end);\r\n\r\n        var region = {\r\n            top: top,\r\n            bottom: bottom,\r\n            rows: data,\r\n            start: start,\r\n            end: end,\r\n            viewStart: start,\r\n            viewEnd: end\r\n            //            viewStart: nowRegion.start,\r\n            //            viewEnd: nowRegion.end\r\n        };\r\n        //document.title = start + \":\" + end + \" (\" + region.viewStart + \":\" + region.viewEnd + \")\";\r\n\r\n        region.viewTop = this._getRangeHeight(0, region.viewStart);\r\n        region.viewBottom = this._getRangeHeight(region.viewEnd, this._getScrollViewCount());\r\n\r\n\r\n        //virtualColumns\r\n        if (this.virtualColumns) {\r\n\r\n            var scrollLeft = this.getScrollLeft();\r\n            var bodyWidth = this._rowsViewEl.offsetWidth;\r\n            region.startColumn = this._getColumnByScrollLeft(scrollLeft);\r\n            region.endColumn = this._getColumnByScrollLeft(scrollLeft + bodyWidth);\r\n            region.columns = this.getUnFrozenColumns().slice(region.startColumn, region.endColumn + 1);\r\n\r\n            region.right = this._getColumnAllWidth();\r\n            region.viewLeft = this._getRangeWidth(0, region.startColumn); ;\r\n        } else {\r\n            region.columns = this.getUnFrozenColumns();\r\n        }\r\n\r\n        return region;\r\n    },\r\n    _getViewNowRegion: function () {\r\n        //根据当前scrllTop和bodyHeight，获取当前的start~end范围\r\n        var rowHeight = this.defaultRowHeight;\r\n        var scrollTop = this.getScrollTop();\r\n        //var bodyHeight = this._vscrollEl.offsetHeight;\r\n        var bodyHeight = this._rowsViewEl.offsetHeight;\r\n\r\n        //@@@\r\n        var startRow = this._getIndexByScrollTop(scrollTop); //parseInt(scrollTop / rowHeight);\r\n        var endRow = this._getIndexByScrollTop(scrollTop + bodyHeight + 30);\r\n        //var endRow = parseInt((scrollTop + bodyHeight) / rowHeight) + 1;\r\n\r\n        var count = this._getScrollViewCount();\r\n        if (endRow > count) endRow = count;\r\n\r\n        var region = { start: startRow, end: endRow };\r\n        return region;\r\n    },\r\n    _canVirtualUpdate: function () {\r\n        if (!this._viewRegion) return true;\r\n        var region = this._getViewNowRegion();\r\n\r\n        if (this._viewRegion.start <= region.start && region.end <= this._viewRegion.end) return false;\r\n        return true;\r\n    },\r\n    ////////////////////////////////////////////////////////////\r\n    //    __OnSourceAdd: function (e) {\r\n\r\n    //        mini.ScrollGridView.superclass.__OnSourceAdd.call(this, e);\r\n    //        \r\n    //        this._viewRegion = this._getViewRegion();\r\n    //    },\r\n    __OnColumnsChanged: function (e) {\r\n        var that = this;\r\n        //var scrollLeft = this.getScrollLeft();\r\n\r\n        this.columns = this._columnModel.columns;\r\n        this._doUpdateFilterRow();\r\n        this._doUpdateSummaryRow();\r\n        if (this.getVisibleRows().length == 0) {\r\n            //this.doUpdateColumns();\r\n            this.doUpdate();\r\n        } else {\r\n            this.deferUpdate();\r\n        }\r\n        if (this.isVirtualScroll()) {\r\n            this.__OnVScroll();\r\n\r\n            //that.setScrollLeft(scrollLeft);\r\n\r\n        }\r\n        this.fire(\"columnschanged\");\r\n    },\r\n    doLayout: function () {\r\n        if (this.canLayout() == false) return;\r\n        //alert(1);\r\n        mini.ScrollGridView.superclass.doLayout.call(this);\r\n        this._layoutScroll();\r\n\r\n        //this._scrollTop = this._vscrollEl.scrollTop;\r\n        if (mini.isNumber(this._scrollTop) && this._vscrollEl.scrollTop != this._scrollTop) {\r\n            //alert(1);\r\n            this._vscrollEl.scrollTop = this._scrollTop;\r\n        }\r\n        //alert(this._scrollTop);\r\n    },\r\n    _createRowsHTML: function (columns, viewIndex, data, top, bottom, rowIndex) {\r\n        var isVirtualScroll = this.isVirtualScroll();\r\n        if (!isVirtualScroll) {\r\n            return mini.ScrollGridView.superclass._createRowsHTML.apply(this, arguments);\r\n        }\r\n\r\n        //document.title = new Date().getTime();\r\n\r\n\r\n        //var region = isVirtualScroll ? this._getViewRegion() : null;  _viewRegion\r\n        var region = isVirtualScroll ? this._viewRegion : null;\r\n\r\n        var sb = ['<table class=\"mini-grid-table\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" >'];\r\n        sb.push(this._createTopRowHTML(columns));\r\n        if (this.isVirtualScroll()) {\r\n            var style = top == 0 ? \"display:none;\" : \"\";\r\n            sb.push('<tr class=\"mini-grid-virtualscroll-top\" style=\"padding:0;border:0;' + style + '\"><td colspan=\"' + columns.length + '\" style=\"height:' + top + 'px;padding:0;border:0;' + style + '\"></td></tr>');\r\n        }\r\n\r\n        var sss = new Date();\r\n\r\n\r\n        if (viewIndex == 1 && this.isFrozen() == false) {\r\n            //如果非锁定，且绘制锁定区域，则不创建\r\n\r\n        } else {\r\n\r\n            //alert(columns.length);\r\n\r\n            for (var j = 0, k = data.length; j < k; j++) {\r\n                //var rowIndex = startIndex + j;            \r\n                var record = data[j];\r\n                //if (!record) continue;//???????????????????????\r\n                this._createRowHTML(record, rowIndex, columns, viewIndex, sb);\r\n                rowIndex++;\r\n            }\r\n        }\r\n\r\n        //if (viewIndex == 2) document.title = \"a:\" + (new Date() - sss);\r\n\r\n        if (this.isVirtualScroll()) {\r\n            sb.push('<tr class=\"mini-grid-virtualscroll-bottom\" style=\"padding:0;border:0;\"><td colspan=\"' + columns.length + '\" style=\"height:' + bottom + 'px;padding:0;border:0;\"></td></tr>');\r\n        }\r\n        sb.push('</table>');\r\n\r\n\r\n\r\n        return sb.join('');\r\n    },\r\n    //更优化：先显示view区域，然后在填补top和bottom部分\r\n    doUpdateRows: function () {\r\n\r\n        if (this.isVirtualScroll() == false) {\r\n            mini.ScrollGridView.superclass.doUpdateRows.call(this);\r\n            return;\r\n        }\r\n\r\n        var region = this._getViewRegion();\r\n\r\n        this._viewRegion = region;  //当创建时刻的region，才是viewRegion\r\n\r\n        var columns1 = this.getFrozenColumns();\r\n        var columns2 = region.columns; // this.getUnFrozenColumns();\r\n\r\n        var rowIndex = region.viewStart;\r\n        var rowIndexTop = region.start;\r\n        var rowIndexBottom = region.viewEnd;\r\n        if (this._scrollPaging) {\r\n            var index = this.getPageIndex() * this.getPageSize();\r\n            rowIndex -= index;\r\n            rowIndexTop -= index;\r\n            rowIndexBottom -= index;\r\n        }\r\n        //var sss = new Date();\r\n        var lockHtml = this._createRowsHTML(columns1, 1, region.rows, region.viewTop, region.viewBottom, rowIndex);\r\n\r\n        \r\n        //var sss = new Date();\r\n        var html = this._createRowsHTML(columns2, 2, region.rows, region.viewTop, region.viewBottom, rowIndex);\r\n        //document.title = new Date() - sss;\r\n        //if (this.getVisibleRows().length > 0) alert(new Date() - sss);\r\n\r\n        this._rowsLockContentEl.innerHTML = lockHtml;\r\n        this._rowsViewContentEl.innerHTML = html;\r\n\r\n        var table = this._rowsViewContentEl.firstChild;\r\n        if (this.virtualColumns) {\r\n\r\n            var html = '<div style=\"position:absolute;top:0px;left:' + region.right + 'px;width:1px;height:1px;overflow:hidden;\"></div>';\r\n            jQuery(html).appendTo(this._rowsViewContentEl);\r\n\r\n            table.style.width = \"0px\";\r\n            table.style.position = \"absolute\";\r\n            table.style.top = \"0px\";\r\n            table.style.left = region.viewLeft + \"px\";\r\n        }\r\n\r\n        var scrollTop = this.getScrollTop();\r\n        if (this._rowsViewEl.scrollTop != scrollTop) {\r\n            //this._rowsViewEl.scrollTop = scrollTop;\r\n\r\n            this._syncScrollOffset(null, scrollTop);\r\n        }\r\n\r\n\r\n    },\r\n\r\n    ////////////////////////////////////////////////////////////\r\n    _create: function () {\r\n        mini.ScrollGridView.superclass._create.call(this);\r\n        //vscroll\r\n        this._vscrollEl = mini.append(this._rowsEl, '<div class=\"mini-grid-vscroll\"><div class=\"mini-grid-vscroll-content\"></div></div>');\r\n        this._vscrollContentEl = this._vscrollEl.firstChild;\r\n    },\r\n    _initEvents: function () {\r\n        mini.ScrollGridView.superclass._initEvents.call(this);\r\n\r\n        var me = this;\r\n        mini.on(this._vscrollEl, \"scroll\", this.__OnVScroll, this);\r\n        mini._onScrollDownUp(this._vscrollEl, function (e) {\r\n            //document.title = 'down:' +new Date().getTime();\r\n            me._VScrollMouseDown = true;\r\n        }, function (e) {\r\n            //document.title = 'up:' + new Date().getTime();\r\n            me._VScrollMouseDown = false;\r\n        });\r\n    },\r\n\r\n    _layoutScroll: function () {\r\n\r\n        var isVirtualScroll = this.isVirtualScroll();\r\n\r\n        if (isVirtualScroll) {\r\n\r\n            var scrollHeight = this.getScrollHeight();\r\n\r\n            var outHeight = scrollHeight > this._rowsViewEl.offsetHeight;\r\n\r\n            if (isVirtualScroll && outHeight) {\r\n                this._vscrollEl.style.display = 'block';\r\n                this._vscrollContentEl.style.height = scrollHeight + \"px\";\r\n            } else {\r\n                this._vscrollEl.style.display = 'none';\r\n            }\r\n\r\n            if (this._rowsViewEl.scrollWidth > this._rowsViewEl.clientWidth + 1) {\r\n                var h = this.getBodyHeight(true) - 18;\r\n                if (h < 0) h = 0;\r\n                this._vscrollEl.style.height = h + 'px';\r\n            } else {\r\n                this._vscrollEl.style.height = '100%';\r\n            }\r\n\r\n            //alert(scrollHeight);\r\n\r\n        } else {\r\n\r\n            this._vscrollEl.style.display = \"none\";\r\n        }\r\n\r\n    },\r\n    ////////////////////\r\n    getScrollHeight: function () {\r\n        var data = this.getVisibleRows();\r\n        return this._getRangeHeight(0, data.length);\r\n    },\r\n    setScrollTop: function (value) {\r\n        if (this.isVirtualScroll()) {\r\n            this._vscrollEl.scrollTop = value;\r\n        } else {\r\n            this._rowsViewEl.scrollTop = value;\r\n        }\r\n    },\r\n    getScrollTop: function () {\r\n        if (this.isVirtualScroll()) {\r\n            return this._vscrollEl.scrollTop;\r\n        } else {\r\n            return this._rowsViewEl.scrollTop;\r\n        }\r\n    },\r\n    __OnVScroll: function (e) {\r\n\r\n        //当滚动条滚动，禁止刷新top/bottom\r\n        //this._stopUpdateTableView();\r\n\r\n        var isVirtualScroll = this.isVirtualScroll();\r\n        if (isVirtualScroll) {\r\n\r\n            this._scrollTop = this._vscrollEl.scrollTop;\r\n\r\n            var me = this;\r\n            setTimeout(function () {\r\n                //me._rowsViewEl.scrollTop = me._scrollTop;\r\n                me._syncScrollOffset(null, me._scrollTop);\r\n                me.__scrollTimer = null;\r\n            }, 8);\r\n\r\n            if (this._scrollTopTimer) {\r\n                clearTimeout(this._scrollTopTimer);\r\n            }\r\n            this._scrollTopTimer = setTimeout(function () {\r\n                me._scrollTopTimer = null;\r\n\r\n                me._tryUpdateScroll();\r\n\r\n                //me._rowsViewEl.scrollTop = me._scrollTop;\r\n                me._syncScrollOffset(null, me._scrollTop);\r\n                //document.title = new Date().getTime();\r\n            }, 150);\r\n        }\r\n    },\r\n\r\n    wheelIncrement: 0,\r\n\r\n    setWheelIncrement: function (val) {\r\n        this.wheelIncrement = val;\r\n    },\r\n    getWheelIncrement: function () {\r\n        return this.wheelIncrement;\r\n    },\r\n\r\n    __OnMouseWheel: function (e) {\r\n        var ev = e.wheelDelta ? e : e.originalEvent;\r\n        var detail = ev.wheelDelta || -ev.detail * 40;\r\n\r\n        //document.title = detail;\r\n        if (detail > 0) {\r\n            detail = detail + this.wheelIncrement;\r\n        } else {\r\n            detail = detail - this.wheelIncrement;\r\n        }\r\n        //detail = detail - this.wheelIncrement;\r\n\r\n        var scrollTop = this.getScrollTop() - detail;\r\n\r\n        var top = this.getScrollTop();\r\n        this.setScrollTop(scrollTop);\r\n        if (top != this.getScrollTop() || this.isVirtualScroll()) {\r\n            e.preventDefault();\r\n        }\r\n        //e.preventDefault();\r\n    },\r\n    /////////////////////////////////////////\r\n    _tryUpdateScroll: function () {\r\n        //设置一个布尔值，reload成功后取消\r\n        var doUpdate = this._canVirtualUpdate();\r\n        if (doUpdate) {\r\n            if (this._scrollPaging) {\r\n                var me = this;\r\n                //this._doGetScrollPaging = true;\r\n                this.reload(null, null, function (e) {\r\n                    //me._doGetScrollPaging = false;\r\n                });\r\n            } else {\r\n\r\n                var sss = new Date();\r\n\r\n                var scrollLeft = this._rowsViewEl.scrollLeft;\r\n\r\n                this._doRemoveRowContent();\r\n                this.doUpdateRows();         //30条，55ms                \r\n                this.deferLayout(50);\r\n\r\n                //this.doUpdate();\r\n                //                alert(new Date() - sss);\r\n                //document.title = scrollLeft;\r\n                //this._rowsViewEl.scrollLeft = scrollLeft;\r\n                this._syncScrollOffset(scrollLeft);\r\n            }\r\n        } else {\r\n            //this._doUpdateTopBottom();\r\n        }\r\n    },\r\n    //////////////////////////////////////////////////////////////\r\n\r\n    //立刻刷新scrollTop\r\n    _updateScrollTop: function (top) {\r\n        this._syncScrollOffset(null, top);\r\n        this._tryUpdateScroll();\r\n    },\r\n\r\n    //////////////////////////////////////////////////////////////\r\n\r\n    __OnRowViewScroll: function (e) {\r\n\r\n        this._syncScroll();\r\n\r\n        if (this.virtualColumns) {\r\n            this.doVirtualColumns();\r\n        }\r\n    },\r\n\r\n    doVirtualColumns: function () {\r\n        //var scrollLeft = this.getScrollLeft();\r\n\r\n        var me = this;\r\n        if (me._virtualColumnTimer) {\r\n            clearTimeout(me._virtualColumnTimer);\r\n            me._virtualColumnTimer = null;\r\n        }\r\n        me._virtualColumnTimer = setTimeout(function () {\r\n            me._virtualColumnTimer = null;\r\n\r\n            //debugger\r\n\r\n            me._doRemoveRowContent();\r\n\r\n            me.doUpdateRows();         //30条，55ms                \r\n            me.deferLayout(50);\r\n\r\n        }, 500);\r\n\r\n    }\r\n\r\n\r\n\r\n});\r\nmini.regClass(mini.ScrollGridView, \"ScrollGridView\");\r\n\r\nmini._onScrollDownUp = function (el, mousedown, mouseup) {\r\n    function onmousedown(e) {\r\n        if (mini.isFirefox) {\r\n            mini.on(document, 'mouseup', onmouseup);\r\n        } else {\r\n            mini.on(document, 'mousemove', onmousemove);\r\n        }\r\n        mousedown(e);\r\n    }\r\n    function onmousemove(e) {\r\n        //no ff\r\n        mini.un(document, 'mousemove', onmousemove);\r\n        mouseup(e);\r\n    }\r\n    function onmouseup(e) {\r\n        //ff\r\n        mini.un(document, 'mouseup', onmouseup);\r\n        mouseup(e);\r\n    }\r\n\r\n    mini.on(el, 'mousedown', onmousedown);\r\n}\r\n\r\n\n\r\nmini.mousewheelEditable = false;\r\n\r\n//Selection\r\nmini._Grid_Select = function (grid) {\r\n\r\n    this.owner = grid, el = grid.el;\r\n\r\n    //return;\r\n\r\n    //row hover        \r\n    grid.on(\"rowmousemove\", this.__OnRowMouseMove, this);\r\n    mini.on(grid._viewportEl, \"mouseout\", this.__OnMouseOut, this);\r\n    mini.on(grid._viewportEl, \"mousewheel\", this.__OnMouseWheel, this);\r\n\r\n    mini.on(document, \"mousewheel\", this.__OnMouseWheel, this);\r\n\r\n\r\n    //cell select/ cell edit\r\n\r\n    grid.on(\"cellmousedown\", this.__OnCellMouseDown, this);\r\n\r\n    //grid.on(\"cellclick\", this.__OnGridCellClick, this);\r\n    grid.on(\"cellmouseup\", this.__OnGridCellClick, this);\r\n    grid.on(\"celldblclick\", this.__OnGridCellClick, this);\r\n\r\n    mini.on(grid.el, \"keydown\", this.__OnGridKeyDown, this);\r\n\r\n    jQuery(grid._columnsEl).on(\"mouseenter\", \".mini-grid-headerCell\", function (e) {\r\n        jQuery(e.currentTarget).addClass(\"mini-grid-header-over\");\r\n    });\r\n    jQuery(grid._columnsEl).on(\"mouseleave\", \".mini-grid-headerCell\", function (e) {\r\n        jQuery(e.currentTarget).removeClass(\"mini-grid-header-over\");\r\n    });\r\n    //    jQuery(grid._columnsEl).hover(function () {\r\n    //        jQuery(this).addClass(\"\");\r\n    //    }, function () {\r\n    //        jQuery(this).removeClass(\"\");\r\n    //    });\r\n}\r\nmini._Grid_Select.prototype = {\r\n    __OnGridKeyDown: function (e) {\r\n\r\n        var grid = this.owner;\r\n\r\n        var p = mini.findParent(e.target, 'mini-grid-detailRow');\r\n        var inGrid = p ? mini.isAncestor(grid.el, p) : false;\r\n\r\n        if (mini.isAncestor(grid._filterEl, e.target)\r\n            || mini.isAncestor(grid._summaryEl, e.target)\r\n            || mini.isAncestor(grid._toolbarEl, e.target)\r\n            || mini.isAncestor(grid._footerEl, e.target)\r\n            || (mini.findParent(e.target, 'mini-grid-detailRow') && inGrid)\r\n            || mini.findParent(e.target, 'mini-grid-rowEdit')\r\n            || mini.findParent(e.target, 'mini-tree-editinput')\r\n            ) {\r\n            return;\r\n        }\r\n\r\n        var currentCell = grid.getCurrentCell();\r\n\r\n        if (e.shiftKey || e.ctrlKey || e.altKey) {\r\n            return;\r\n        }\r\n\r\n        if (e.keyCode == 37 || e.keyCode == 38 || e.keyCode == 39 || e.keyCode == 40) {\r\n            e.preventDefault();\r\n        }\r\n        var columns = grid.getVisibleColumns();\r\n\r\n        //////////////////////////////////////\r\n        function getAt(index) {\r\n            return grid.getVisibleRows()[index];\r\n        }\r\n        function indexOf(row) {\r\n            return grid.getVisibleRows().indexOf(row);\r\n        }\r\n        function getCount() {\r\n            return grid.getVisibleRows().length;\r\n        }\r\n\r\n        var column = currentCell ? currentCell[1] : null,\r\n            record = currentCell ? currentCell[0] : null;\r\n        if (!currentCell) record = grid.getCurrent();\r\n        var columnIndex = columns.indexOf(column);\r\n\r\n        var rowIndex = indexOf(record);\r\n        var count = getCount();\r\n\r\n        switch (e.keyCode) {\r\n            case 9:     //tab\r\n                if (grid.allowCellEdit && grid.editOnTabKey) {\r\n                    e.preventDefault();\r\n                    grid._beginEditNextCell(e.shiftKey == false, true);\r\n                    return;\r\n                }\r\n                //                if (column) {\r\n                //                    if (columnIndex > 0) {\r\n                //                        columnIndex += 1;\r\n                //                    }\r\n                //                } else {\r\n                //                    columnIndex = 0;\r\n                //                }\r\n                //                e.preventDefault();\r\n                break;\r\n            case 27:        //esc\r\n\r\n                break;\r\n            case 13:     //enter\r\n                if (grid.allowCellEdit && grid.editNextOnEnterKey) {\r\n                    if (column) {\r\n                        if (grid.isEditingCell(currentCell) || !column.editor) {\r\n                            grid._beginEditNextCell(e.shiftKey == false);\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                if (grid.allowCellEdit && currentCell && !column.readOnly && !grid.isReadOnly()) {\r\n                    grid.beginEditCell();\r\n                }\r\n                break;\r\n            case 37:    //left\r\n                if (column) {\r\n                    if (columnIndex > 0) {\r\n                        columnIndex -= 1;\r\n                    }\r\n                } else {\r\n                    columnIndex = 0;\r\n                }\r\n                break;\r\n            case 38:    //top      \r\n                if (record) {\r\n                    if (rowIndex > 0) rowIndex -= 1;\r\n                } else {\r\n                    rowIndex = 0;\r\n                }\r\n                if (rowIndex != 0 && grid.isVirtualScroll()) {\r\n                    /* @ 之前的虚拟滚动不支持超过边界，现在可以\r\n                    if (grid._viewRegion.start > rowIndex) {\r\n                        return;\r\n                        //                        grid._bodyEl.scrollTop -= grid.defaultRowHeight;\r\n                        //                        grid._tryUpdateScroll();\r\n                    }\r\n                    */\r\n                }\r\n                break;\r\n            case 39:    //right\r\n                if (column) {\r\n                    if (columnIndex < columns.length - 1) {\r\n                        columnIndex += 1;\r\n                    }\r\n                } else {\r\n                    columnIndex = 0;\r\n                }\r\n                break;\r\n            case 40:    //bottom                   \r\n                if (record) {\r\n                    if (rowIndex < count - 1) rowIndex += 1;\r\n                } else {\r\n                    rowIndex = 0;\r\n                }\r\n                /* @ 之前的虚拟滚动不支持超过边界，现在可以\r\n                if (grid.isVirtualScroll()) {\r\n                    if (grid._viewRegion.end < rowIndex) {\r\n                        return;\r\n                        grid.setScrollTop(grid.getScrollTop() + grid.defaultRowHeight);\r\n                        //                        setTimeout(function () {\r\n                        //                            grid.scrollIntoView(record, column);\r\n                        //                        }, 100);\r\n                        //grid._bodyEl.scrollTop += grid.defaultRowHeight;\r\n                        //grid._tryUpdateScroll();\r\n                    }\r\n                }*/\r\n                break;\r\n            default:\r\n                return;\r\n                break;\r\n        }\r\n\r\n        column = columns[columnIndex];\r\n\r\n        record = getAt(rowIndex);\r\n        //current cell\r\n        if (column && record && grid.allowCellSelect) {\r\n            var currentCell = [record, column];\r\n            grid.setCurrentCell(currentCell);\r\n            grid.scrollIntoView(record, column, false);\r\n        }\r\n\r\n\r\n        //current row\r\n        if (!grid.onlyCheckSelection) {\r\n            if (e.keyCode != 37 && e.keyCode != 39) {       //当左右键不执行选中\r\n\r\n                if (record && grid.allowRowSelect) {\r\n\r\n                    var ex = { record: record, selected: record, cancel: false, htmlEvent: e };\r\n                    if (record) {\r\n                        grid.fire(\"beforerowselect\", ex);\r\n                        grid.fire(\"beforeselect\", ex);\r\n                    }\r\n                    if (ex.cancel) return;\r\n\r\n\r\n                    grid.deselectAll();\r\n                    grid.setCurrent(record);\r\n                    if (record) {\r\n\r\n                        grid.scrollIntoView(record, null, false);\r\n                        //grid.scrollIntoView(record, null);\r\n                    } \r\n                }\r\n            }\r\n        }\r\n    },\r\n    __OnMouseWheel: function (e) {\r\n        var grid = this.owner;\r\n\r\n        //e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if (mini.mousewheelEditable) return;\r\n\r\n        //        var gridEl = mini.findParent(e.target, 'mini-datagrid');\r\n        //        if (gridEl != grid.el) {\r\n        //            e.preventDefault();\r\n        //            return\r\n        //        }\r\n\r\n\r\n\r\n\r\n        var editor = grid._editingControl;\r\n        if (editor && editor.within(e)) return;\r\n\r\n        if (grid.allowCellEdit) {\r\n            grid.commitEdit();\r\n        }\r\n    },\r\n    __OnGridCellClick: function (e) {\r\n        var grid = this.owner,\r\n            type = e.type;\r\n        var sss = new Date();\r\n        //return;\r\n        if (type == \"cellmouseup\") type = \"cellclick\";\r\n\r\n        if (grid.allowCellEdit == false) return;\r\n        if (grid.cellEditAction != type) return;\r\n\r\n        var record = e.record, column = e.column;\r\n\r\n        if (!column.readOnly && !grid.isReadOnly()) {\r\n            if (e.htmlEvent.shiftKey || e.htmlEvent.ctrlKey) {\r\n            } else {\r\n\r\n\r\n                grid.beginEditCell();\r\n\r\n\r\n            }\r\n        }\r\n\r\n\r\n    },\r\n    __OnCellMouseDown: function (e) {\r\n        //return;\r\n        var me = this;\r\n\r\n        if (!me.owner.selectOnRightClick) {\r\n            if (e.htmlEvent.which == 3) return;  //阻止右键选中行\r\n        }\r\n\r\n        setTimeout(function () {    //!!必须延迟1秒（不能删除）\r\n            me.__doSelect(e);\r\n        }, 1);\r\n    },\r\n    __OnRowMouseMove: function (e) {\r\n        var grid = this.owner;\r\n        var record = e.record;\r\n\r\n        if (!grid.enabled || grid.enableHotTrack == false) return;\r\n\r\n        grid.focusRow(record);\r\n    },\r\n    __OnMouseOut: function (e) {\r\n        if (this.owner.allowHotTrackOut) {\r\n            this.owner.focusRow(null);\r\n        }\r\n    },\r\n    __doSelect: function (e) {\r\n\r\n        //debugger\r\n        //return;\r\n\r\n        var record = e.record, column = e.column;\r\n        var grid = this.owner;\r\n        if (record.enabled === false) return;\r\n\r\n\r\n        //cell select\r\n        if (grid.allowCellSelect) {\r\n            var cell = [record, column];\r\n            grid.setCurrentCell(cell);\r\n        }\r\n\r\n        if (grid.onlyCheckSelection && !column._multiRowSelect) return;\r\n\r\n        //row select \r\n\r\n        //        function isOnlyCheckSelection() {\r\n        //            return grid.onlyCheckSelection && !column._multiRowSelect;\r\n        //        }\r\n\r\n        if (grid.allowRowSelect) {\r\n            var ex = { record: record, selected: record, cancel: false, htmlEvent: e };\r\n\r\n\r\n            if (record) {\r\n                if (!grid.isSelected(record)) {\r\n                    grid.fire(\"beforerowselect\", ex);\r\n                    grid.fire(\"beforeselect\", ex);\r\n                }\r\n            }\r\n\r\n//            if (record) {\r\n//                grid.fire(\"beforerowselect\", ex);\r\n//                grid.fire(\"beforeselect\", ex);\r\n//            }\r\n\r\n\r\n            if (ex.cancel) return;\r\n\r\n            if (grid.getMultiSelect()) {\r\n\r\n                grid.el.onselectstart = function () { };\r\n\r\n                if (e.htmlEvent.shiftKey) {\r\n                    grid.el.onselectstart = function () { return false };\r\n                    try {\r\n                        e.htmlEvent.preventDefault();\r\n                    } catch (ex) { }\r\n\r\n                    var current = grid.getCurrent();\r\n                    if (current) {\r\n\r\n                        grid.deselectAll();\r\n                        grid.selectRange(current, record);\r\n                        grid.setCurrent(current);\r\n                    } else {\r\n                        grid.select(record);\r\n                        grid.setCurrent(record);\r\n                    }\r\n\r\n                } else {\r\n\r\n                    grid.el.onselectstart = function () { };\r\n                    if (e.htmlEvent.ctrlKey) {\r\n                        grid.el.onselectstart = function () { return false };\r\n                        try {\r\n                            e.htmlEvent.preventDefault();\r\n                        } catch (ex) { }\r\n                    }\r\n\r\n                    if (e.column._multiRowSelect === true || e.htmlEvent.ctrlKey || grid.allowUnselect) {\r\n                        if (grid.isSelected(record)) {\r\n                            grid.deselect(record);\r\n                        } else {\r\n                            grid.select(record);\r\n                            grid.setCurrent(record);\r\n                        }\r\n                    } else {\r\n                        if (grid.isSelected(record)) {\r\n                            //                            grid.deselectAll();\r\n                            //                            grid.select(record);\r\n                        } else {\r\n                            grid.deselectAll();\r\n                            grid.select(record);\r\n                            grid.setCurrent(record);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                //alert(grid.isSelected(record));\r\n                //if (grid.isSelected(record)) return;\r\n                if (!grid.isSelected(record)) {\r\n                    grid.deselectAll();\r\n                    grid.select(record);\r\n                } else {\r\n                    if (e.htmlEvent.ctrlKey || grid.allowUnselect) {\r\n                        grid.deselectAll();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n\r\n/* RowGroup\r\n-----------------------------------------------------------------------------*/\r\n\r\nmini._Grid_RowGroup = function (grid) {\r\n    this.owner = grid, el = grid.el;    \r\n    mini.on(grid._bodyEl, \"click\", this.__OnClick, this);\r\n}\r\nmini._Grid_RowGroup.prototype = {\r\n    __OnClick: function (e) {\r\n        var grid = this.owner;\r\n        var group = grid._getRowGroupByEvent(e);\r\n        if (group) {\r\n\r\n            if (!grid.groupTitleCollapsible && !mini.hasClass(e.target, \"mini-grid-group-ecicon\")) {\r\n                return;\r\n            }\r\n\r\n\r\n            var ev = { htmlEvent: e, cancel: false, group: group };\r\n            grid.fire(\"beforegroupclick\", ev);\r\n            if (ev.cancel === true) return;\r\n\r\n            grid.toggleRowGroup(group);\r\n        }\r\n    }\r\n};\r\n\r\n\r\n/* ColumnsMenu\r\n-----------------------------------------------------------------------------*/\r\nmini._Grid_ColumnsMenu = function (grid) {\r\n    this.owner = grid;\r\n    this.menu = this.createMenu();\r\n    mini.on(grid.el, \"contextmenu\", this.__OnContextMenu, this);    \r\n    grid.on(\"destroy\", this.__OnGridDestroy, this);\r\n}\r\nmini._Grid_ColumnsMenu.prototype = {\r\n    __OnGridDestroy: function (e) {\r\n        if (this.menu) this.menu.destroy();\r\n        this.menu = null;\r\n    },\r\n    createMenu: function () {\r\n        var menu = mini.create({ type: \"menu\", hideOnClick: false });\r\n        menu.on(\"itemclick\", this.__OnItemClick, this);\r\n        jQuery(menu.el).addClass(\"mini-menu-open\");\r\n        return menu;\r\n    },\r\n    updateMenu: function () {\r\n        var grid = this.owner, menu = this.menu;\r\n        var columns = grid.getBottomColumns();\r\n        var items = [];\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            if (column.hideable) continue;\r\n            var item = {};\r\n            item.checked = column.visible;\r\n            item.checkOnClick = true;\r\n            item.text = grid._createHeaderText(column);\r\n            if (item.text == \"&nbsp;\") {\r\n                if (column.type == \"indexcolumn\") item.text = \"序号\";\r\n                if (column.type == \"checkcolumn\") item.text = \"选择\";\r\n            }\r\n            items.push(item);\r\n            //enabled\r\n            item.enabled = column.enabled;\r\n\r\n            item._column = column;\r\n        }\r\n        menu.setItems(items);\r\n    },\r\n    __OnContextMenu: function (e) {\r\n        var grid = this.owner;\r\n        if (grid.showColumnsMenu == false) return;\r\n        if (mini.isAncestor(grid._columnsEl, e.target) == false) return;\r\n        this.updateMenu();\r\n        this.menu.showAtPos(e.pageX, e.pageY);\r\n        return false;\r\n    },\r\n    __OnItemClick: function (e) {\r\n        var grid = this.owner, menu = this.menu;\r\n        var columns = grid.getBottomColumns();\r\n        var items = menu.getItems();\r\n        var item = e.item, column = item._column;\r\n\r\n        var checkedCount = 0;\r\n        for (var i = 0, l = items.length; i < l; i++) {\r\n            var it = items[i];\r\n            if (it.getChecked()) checkedCount++;\r\n        }\r\n        if (checkedCount < 1) {\r\n            item.setChecked(true);\r\n        }\r\n\r\n        var checked = item.getChecked();\r\n        if (checked) grid.showColumn(column);\r\n        else grid.hideColumn(column);\r\n    }\r\n}\r\n\r\n\r\n/* _CellToolTip\r\n-----------------------------------------------------------------------------*/\r\n\r\nmini._Grid_CellToolTip = function (grid) {\r\n    this.owner = grid;\r\n    mini.on(this.owner.el, \"mousemove\", this.__OnGridMouseMove, this);\r\n};\r\nmini._Grid_CellToolTip.prototype = {\r\n    __OnGridMouseMove: function (e) {\r\n        var grid = this.owner;\r\n\r\n        if (mini.hasClass(e.target, \"mini-grid-headerCell-inner\")) {\r\n            var cellEl = e.target;\r\n\r\n            if (cellEl.scrollWidth > cellEl.clientWidth) {\r\n                var s = cellEl.innerText || cellEl.textContent || \"\";\r\n                cellEl.title = s.trim();\r\n            } else {\r\n                cellEl.title = \"\";\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        var cell = grid._getCellByEvent(e);\r\n\r\n        var cellEl = grid._getCellEl(cell[0], cell[1]);\r\n        //if (cell.record && cell.column && cell.column.vtype) debugger\r\n\r\n        var error = grid.getCellError(cell[0], cell[1]);\r\n        if (cellEl) {\r\n            //if(cellEl.id == '3$cell$2') debugger\r\n            if (error) {\r\n                setTimeout(function () {\r\n                    cellEl.title = error.errorText;\r\n                }, 10);\r\n                return;\r\n            }\r\n            setTimeout(function () {\r\n                var innerEl = cellEl;\r\n                if (cellEl.firstChild) {\r\n                    if (mini.hasClass(cellEl.firstChild, \"mini-grid-cell-inner\")) {\r\n                        innerEl = cellEl.firstChild;\r\n                    }\r\n                    if (mini.hasClass(cellEl.firstChild, \"mini-tree-nodetitle\")) {\r\n                        innerEl = cellEl.firstChild;\r\n                    }\r\n                }\r\n                if (innerEl.scrollWidth > innerEl.clientWidth && grid.getShowCellTip() && cell[1].showCellTip) {\r\n                    var s = innerEl.innerText || innerEl.textContent || \"\";\r\n                    cellEl.title = s.trim();\r\n                } else {\r\n                    cellEl.title = \"\";\r\n                }\r\n            }, 10);\r\n        }\r\n    }\r\n};\r\n\r\n\r\n/* Sorter\r\n-----------------------------------------------------------------------------*/\r\n\r\nmini._Grid_Sorter = function (grid) {\r\n\r\n    this.owner = grid;\r\n    this.owner.on(\"headercellclick\", this.__OnGridHeaderCellClick, this);\r\n    this.owner.on(\"headercelldblclick\", this.__OnGridHeaderCellClick, this);\r\n    //this.owner.on(\"headercellmousedown\", this.__OnGridHeaderCellMouseDown, this);\r\n\r\n    mini.on(grid._headerEl, \"mousemove\", this.__OnGridHeaderMouseMove, this);\r\n    mini.on(grid._headerEl, \"mouseout\", this.__OnGridHeaderMouseOut, this);\r\n};\r\nmini._Grid_Sorter.prototype = {\r\n    __OnGridHeaderMouseOut: function (e) {\r\n        if (this._focusedColumnEl) {\r\n            mini.removeClass(this._focusedColumnEl, \"mini-grid-headerCell-hover\");\r\n        }\r\n    },\r\n    __OnGridHeaderMouseMove: function (e) {\r\n        var t = mini.findParent(e.target, \"mini-grid-headerCell\");\r\n        if (t) {\r\n            mini.addClass(t, \"mini-grid-headerCell-hover\");\r\n            this._focusedColumnEl = t;\r\n        }\r\n    },\r\n    __OnGridHeaderCellClick: function (e) {\r\n        var grid = this.owner;\r\n\r\n        var type = e.htmlEvent.type;\r\n        if (type == 'dblclick' && !grid.sortDblClick) return;\r\n        if (type == 'click' && grid.sortDblClick) return;\r\n\r\n\r\n        //if (!mini.hasClass(e.htmlEvent.target, \"mini-grid-column-splitter\")) {\r\n        if (mini.hasClass(e.htmlEvent.target, \"mini-grid-headerCell-inner\")) {\r\n            if (grid.allowSortColumn && grid.isEditing() == false) {\r\n\r\n                var column = e.column;\r\n                if (!column.columns || column.columns.length == 0) {\r\n                    var sortField = column.sortField || column.field;\r\n\r\n                    if (sortField && column.allowSort !== false) {\r\n\r\n                        if (grid.allowCancelSort && grid.getSortOrder() == \"desc\") {\r\n                            grid.clearSort();\r\n                        } else {\r\n                            var sortOrder = \"asc\";\r\n                            if (grid.getSortField() == sortField) {\r\n                                sortOrder = grid.getSortOrder() == \"asc\" ? \"desc\" : \"asc\";\r\n                            }\r\n\r\n                            grid.sortBy(sortField, sortOrder);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n\r\n/* _ColumnMove\r\n-----------------------------------------------------------------------------*/\r\n\r\nmini._Grid_ColumnMove = function (grid) {\r\n    this.owner = grid;\r\n    mini.on(this.owner.el, \"mousedown\", this.__onGridMouseDown, this);\r\n};\r\nmini._Grid_ColumnMove.prototype = {\r\n    __onGridMouseDown: function (e) {\r\n\r\n        var grid = this.owner;\r\n        \r\n        if (grid.isEditing()) return;\r\n        if (mini.hasClass(e.target, \"mini-grid-column-splitter\")) return;\r\n\r\n        if (e.button == mini.MouseButton.Right) return;\r\n        var t = mini.findParent(e.target, grid._headerCellCls);\r\n        if (t) {\r\n            this._remove();\r\n            var column = grid._getColumnByEvent(e);\r\n            if (grid.allowMoveColumn && column && column.allowMove) {\r\n                this.dragColumn = column;\r\n                this._columnEl = t;\r\n                this.getDrag().start(e);\r\n            }\r\n        }\r\n    },\r\n    getDrag: function () {\r\n        if (!this.drag) {\r\n            this.drag = new mini.Drag({\r\n                capture: false,\r\n                onStart: mini.createDelegate(this._OnDragStart, this),\r\n                onMove: mini.createDelegate(this._OnDragMove, this),\r\n                onStop: mini.createDelegate(this._OnDragStop, this)\r\n            });\r\n        }\r\n        return this.drag;\r\n    },\r\n    _OnDragStart: function (drag) {\r\n        function createHeaderCell(column) {\r\n            var header = column.header;\r\n            if (typeof header == \"function\") header = header.call(grid, column);\r\n            if (mini.isNull(header) || header === \"\") header = \"&nbsp;\";\r\n            return header;\r\n        }\r\n\r\n        var grid = this.owner;\r\n        this._dragProxy = mini.append(document.body, '<div class=\"mini-grid-columnproxy\"></div>');\r\n        this._dragProxy.innerHTML = '<div class=\"mini-grid-columnproxy-inner\" style=\"height:26px;\">' + createHeaderCell(this.dragColumn) + '</div>';\r\n        mini.setXY(this._dragProxy, drag.now[0] + 15, drag.now[1] + 18);\r\n        mini.addClass(this._dragProxy, \"mini-grid-no\");\r\n\r\n        this.moveTop = mini.append(document.body, '<div class=\"mini-grid-movetop\"></div>');\r\n        this.moveBottom = mini.append(document.body, '<div class=\"mini-grid-movebottom\"></div>');\r\n    },\r\n    _OnDragMove: function (drag) {\r\n        var grid = this.owner;\r\n        var x = drag.now[0];\r\n\r\n        mini.setXY(this._dragProxy, x + 15, drag.now[1] + 18);\r\n\r\n        this.targetColumn = this.insertAction = null;\r\n        var t = mini.findParent(drag.event.target, grid._headerCellCls);\r\n        if (t) {\r\n            var column = grid._getColumnByEvent(drag.event);\r\n            if (column && column != this.dragColumn) {\r\n                var p1 = grid.getParentColumn(this.dragColumn);\r\n                var p2 = grid.getParentColumn(column);\r\n                if (p1 == p2) {\r\n\r\n                    this.targetColumn = column;\r\n                    this.insertAction = \"before\";\r\n                    var columnBox = grid.getColumnBox(this.targetColumn);\r\n\r\n                    if (x > columnBox.x + columnBox.width / 2) {\r\n\r\n                        this.insertAction = \"after\";\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.targetColumn) {\r\n\r\n            mini.addClass(this._dragProxy, \"mini-grid-ok\");\r\n            mini.removeClass(this._dragProxy, \"mini-grid-no\");\r\n\r\n            var box = grid.getColumnBox(this.targetColumn);\r\n\r\n            this.moveTop.style.display = 'block';\r\n            this.moveBottom.style.display = 'block';\r\n            if (this.insertAction == \"before\") {\r\n\r\n                mini.setXY(this.moveTop, box.x - 4, box.y - 9);\r\n                mini.setXY(this.moveBottom, box.x - 4, box.bottom);\r\n            } else {\r\n\r\n                mini.setXY(this.moveTop, box.right - 4, box.y - 9);\r\n                mini.setXY(this.moveBottom, box.right - 4, box.bottom);\r\n            }\r\n        } else {\r\n            mini.removeClass(this._dragProxy, \"mini-grid-ok\");\r\n            mini.addClass(this._dragProxy, \"mini-grid-no\");\r\n\r\n            this.moveTop.style.display = 'none';\r\n            this.moveBottom.style.display = 'none';\r\n        }\r\n    },\r\n    _remove: function () {\r\n        var grid = this.owner;\r\n        mini.removeNode(this._dragProxy);\r\n        mini.removeNode(this.moveTop);\r\n        mini.removeNode(this.moveBottom);\r\n        this._dragProxy = this.moveTop = this.moveBottom = this.dragColumn = this.targetColumn = null;\r\n    },\r\n    _OnDragStop: function (drag) {\r\n        var grid = this.owner;\r\n        \r\n        grid.moveColumn(this.dragColumn, this.targetColumn, this.insertAction);\r\n        this._remove();\r\n    }\r\n};\r\n\r\n\r\n\r\n/* _ColumnSplitter\r\n-----------------------------------------------------------------------------*/\r\n\r\nmini._Grid_ColumnSplitter = function (grid) {           //ColumnResizable\r\n    this.owner = grid;    \r\n    mini.on(grid.el, \"mousedown\", this.__OnMouseDown, this);\r\n};\r\nmini._Grid_ColumnSplitter.prototype = {\r\n    __OnMouseDown: function (e) {\r\n        var grid = this.owner;\r\n        var t = e.target;\r\n\r\n        if (mini.hasClass(t, \"mini-grid-column-splitter\")) {\r\n            var column = grid._getColumnById(t.id);\r\n            if (grid.isEditing()) return;\r\n            if (grid.allowResizeColumn && column && column.allowResize) {\r\n                this.splitterColumn = column;\r\n                this.getDrag().start(e);\r\n            }\r\n        }\r\n    },\r\n    getDrag: function () {\r\n        if (!this.drag) {\r\n            this.drag = new mini.Drag({\r\n                capture: true,\r\n                onStart: mini.createDelegate(this._OnDragStart, this),\r\n                onMove: mini.createDelegate(this._OnDragMove, this),\r\n                onStop: mini.createDelegate(this._OnDragStop, this)\r\n            });\r\n        }\r\n        return this.drag;\r\n    },\r\n    _OnDragStart: function (drag) {\r\n        var grid = this.owner;\r\n        var columnBox = grid.getColumnBox(this.splitterColumn);\r\n\r\n        this.columnBox = columnBox;\r\n        this._dragProxy = mini.append(document.body, '<div class=\"mini-grid-proxy\"></div>');\r\n        var box = grid.getGridViewBox();\r\n        box.x = columnBox.x;\r\n        box.width = columnBox.width;\r\n        box.right = columnBox.right;\r\n        mini.setBox(this._dragProxy, box);\r\n\r\n        grid._ignoreClick = true;\r\n    },\r\n    _OnDragMove: function (drag) {\r\n        var grid = this.owner;\r\n        var box = mini.copyTo({}, this.columnBox);\r\n        var width = box.width + (drag.now[0] - drag.init[0]);\r\n        if (width < grid.columnMinWidth) width = grid.columnMinWidth;\r\n        if (width > grid.columnMaxWidth) width = grid.columnMaxWidth;\r\n\r\n        mini.setWidth(this._dragProxy, width);\r\n    },\r\n    _OnDragStop: function (drag) {\r\n        var grid = this.owner;\r\n        var box = mini.getBox(this._dragProxy);\r\n        var sf = this;\r\n        var allowSort = grid.allowSortColumn;\r\n        grid.allowSortColumn = false;\r\n        setTimeout(function () {\r\n            jQuery(sf._dragProxy).remove();\r\n            sf._dragProxy = null;\r\n            grid.allowSortColumn = allowSort;\r\n        }, 10);\r\n\r\n        var column = this.splitterColumn;\r\n\r\n        var columnWidth = parseInt(column.width);\r\n        if (columnWidth + \"%\" != column.width) {\r\n            var width = grid.getColumnWidth(column);\r\n            var w = parseInt(columnWidth / width * box.width);\r\n            if (w < grid.columnMinWidth) w = grid.columnMinWidth;\r\n            grid.setColumnWidth(column, w);\r\n        }\r\n\r\n        setTimeout(function () {\r\n            grid._ignoreClick = false;\r\n        }, 100);\r\n    }\r\n};\r\n\r\n\r\n/* DragDrop\r\n-----------------------------------------------------------------------------*/\r\n\r\n/*\r\n控制行/节点的拖拽拖放行为    \r\nGrid 行拖拽事件:\r\n    RowDragStart可以控制是否可拖拽此行\r\n    RowDragDrop 可以控制是否执行默认的投放操作(移动)\r\n    从而改成自己的投放行为(调用Project.MoveTask方法)    \r\n*/\r\nmini._Grid_DragDrop = function (grid) {\r\n    this.owner = grid;\r\n    this.owner.on('CellMouseDown', this.__OnGridCellMouseDown, this);\r\n}\r\nmini._Grid_DragDrop.prototype = {\r\n    __OnGridCellMouseDown: function (e) {\r\n\r\n        if (e.htmlEvent.button == mini.MouseButton.Right) return;\r\n        var grid = this.owner;\r\n        if (grid._dragging) return;\r\n\r\n        this.dropObj = grid;\r\n\r\n        if (mini.findParent(e.htmlEvent.target, 'mini-tree-editinput')) return;\r\n\r\n        if (grid.isReadOnly() || grid.isAllowDrag(e.record, e.column) == false) return;\r\n        //alert(grid._getDragData().length);\r\n\r\n        var ex = grid._OnDragStart(e.record, e.column);\r\n        if (ex.cancel) return;\r\n        this.dragText = ex.dragText;\r\n\r\n        var record = e.record;\r\n\r\n        this.isTree = !!grid.isTree;\r\n\r\n        this.beginRecord = record;\r\n        //alert(grid._getDragData().length);\r\n        var drag = this._getDrag();\r\n        drag.start(e.htmlEvent);\r\n    },\r\n    _OnDragStart: function (drag) {\r\n        var grid = this.owner;\r\n        grid._dragging = true;\r\n\r\n        var record = this.beginRecord;\r\n        this.dragData = grid._getDragData();\r\n\r\n        if (this.dragData.indexOf(record) == -1) {\r\n            this.dragData.push(record);\r\n        }\r\n        //grid.select(record);\r\n\r\n        this.feedbackEl = mini.append(document.body, '<div class=\"mini-feedback\"></div>');\r\n        this.feedbackEl.innerHTML = this.dragText;\r\n        this.lastFeedbackClass = \"\";\r\n\r\n        this.enableHotTrack = grid.getEnableHotTrack();\r\n        grid.setEnableHotTrack(false);\r\n    },\r\n    _getDropTargetObj: function (event) {\r\n        var dom = mini.findParent(event.target, \"mini-grid\", 500);\r\n        if (dom) {\r\n            return mini.get(dom);\r\n        }\r\n    },\r\n    _OnDragMove: function (drag) {\r\n        var grid = this.owner;\r\n        var dropObj = this._getDropTargetObj(drag.event);\r\n        this.dropObj = dropObj;\r\n\r\n        var x = drag.now[0], y = drag.now[1];\r\n        mini.setXY(this.feedbackEl, x + 15, y + 18);\r\n\r\n        if (dropObj && dropObj.allowDrop) {\r\n            this.isTree = dropObj.isTree;\r\n\r\n            var targetRecord = dropObj._getRecordByEvent(drag.event);\r\n            this.dropRecord = targetRecord;\r\n\r\n            if (targetRecord) {\r\n                if (this.isTree) {\r\n                    this.dragAction = this.getFeedback(targetRecord, y, 3);\r\n                } else {\r\n                    this.dragAction = this.getFeedback(targetRecord, y, 2);\r\n                }\r\n            } else {\r\n                this.dragAction = \"no\";\r\n            }\r\n\r\n        } else {\r\n            this.dragAction = \"no\";\r\n        }\r\n\r\n        //empty\r\n        if (dropObj && dropObj.allowDrop && !targetRecord && dropObj.getData().length == 0) {\r\n            this.dragAction = \"add\";\r\n        }\r\n\r\n        this.lastFeedbackClass = \"mini-feedback-\" + this.dragAction;\r\n        this.feedbackEl.className = \"mini-feedback \" + this.lastFeedbackClass;\r\n        if (this.dragAction == \"no\") targetRecord = null;\r\n        this.setRowFeedback(targetRecord, this.dragAction);\r\n    },\r\n    _OnDragStop: function (drag) {\r\n\r\n        var grid = this.owner;\r\n        var dropObj = this.dropObj;\r\n\r\n        grid._dragging = false;\r\n        mini.removeNode(this.feedbackEl);\r\n\r\n\r\n        grid.setEnableHotTrack(this.enableHotTrack);\r\n\r\n        this.feedbackEl = null;\r\n        this.setRowFeedback(null);\r\n\r\n        //如果是树形数据源, 只能选择一个父节点, 子节点去除掉\r\n        if (this.isTree) {\r\n            var dragRecords = [];\r\n            for (var i = 0, l = this.dragData.length; i < l; i++) {\r\n                var dragRecord = this.dragData[i];\r\n                var hasParent = false;\r\n                for (var j = 0, k = this.dragData.length; j < k; j++) {\r\n                    var dr = this.dragData[j];\r\n                    if (dr != dragRecord) {\r\n                        hasParent = grid.isAncestor(dr, dragRecord);\r\n                        if (hasParent) break;\r\n                    }\r\n                }\r\n\r\n                if (!hasParent) {\r\n                    dragRecords.push(dragRecord);\r\n                }\r\n            }\r\n            this.dragData = dragRecords;\r\n        }\r\n\r\n        if (this.dragAction == 'add' && !this.dropRecord) {\r\n            this.dropRecord = dropObj.getRootNode ? dropObj.getRootNode() : { __root: true };\r\n        }\r\n\r\n        //alert(dragRecords[0].Name + \":\" + dragRecords[1].Name);\r\n        if (this.dropRecord && dropObj && this.dragAction != \"no\") {\r\n            //var e = grid._OnDragDrop(this.dragData, this.dropRecord, this.dragAction);\r\n            var e = dropObj._OnDragDrop(this.dragData, this.dropRecord, this.dragAction);       //beforedrop\r\n            if (!e.cancel) {\r\n                var dragRecords = e.dragNodes, targetRecord = e.targetNode, action = e.action;\r\n\r\n                if (dropObj.isTree) {\r\n\r\n                \r\n                    \r\n                    if (grid == dropObj) {\r\n                        dropObj.moveNodes(dragRecords, targetRecord, action);\r\n                    } else {\r\n                        if (dropObj.dropAction == \"move\") {\r\n                            grid.removeNodes(dragRecords);\r\n                        } else if (dropObj.dropAction == \"copy\") {\r\n                            dragRecords = mini.clone(dragRecords);\r\n                        }\r\n                        dropObj.addNodes(dragRecords, targetRecord, action);\r\n                    }\r\n\r\n                } else {\r\n                    var index = dropObj.indexOf(targetRecord);\r\n                    if (action == \"after\") index += 1;\r\n\r\n                    if (grid == dropObj) {\r\n                        dropObj.moveRow(dragRecords, index);\r\n                    } else {\r\n                        \r\n                        if (dropObj.dropAction == \"move\") {\r\n                            grid.removeRows(dragRecords);\r\n                        } else if (dropObj.dropAction == \"copy\") {\r\n                            dragRecords = mini.clone(dragRecords);\r\n                        }\r\n\r\n                        if (this.dragAction == \"add\") {\r\n                            dropObj.addRows(dragRecords);\r\n                        } else {\r\n                            dropObj.addRows(dragRecords, index);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                var e = {\r\n                    dragNode: e.dragNodes[0],\r\n                    dropNode: e.targetNode,\r\n                    dragAction: e.action,\r\n\r\n                    dragNodes: e.dragNodes,\r\n                    targetNode: e.targetNode\r\n                };\r\n                dropObj.fire(\"drop\", e);\r\n            }\r\n\r\n        }\r\n\r\n        this.dropRecord = null;\r\n        this.dragData = null;\r\n    },\r\n    setRowFeedback: function (record, feedback) {\r\n        //        if (this.lastRowFeedback != -1) {\r\n        //            \r\n        //        }\r\n        var grid = this.owner;\r\n        var dropObj = this.dropObj;\r\n\r\n        if (this.lastAddDomRow && dropObj) {\r\n            dropObj.removeRowCls(this.lastAddDomRow, \"mini-tree-feedback-add\");\r\n        }\r\n        if (record == null || this.dragAction == \"add\") {\r\n            mini.removeNode(this.feedbackLine);\r\n            this.feedbackLine = null;\r\n        }\r\n\r\n        this.lastRowFeedback = record;\r\n\r\n        if (record != null) {\r\n            if (feedback == \"before\" || feedback == \"after\") {\r\n                if (!this.feedbackLine) {\r\n                    this.feedbackLine = mini.append(document.body, \"<div class='mini-feedback-line'></div>\");\r\n                }\r\n                this.feedbackLine.style.display = \"block\";\r\n                var rowBox = dropObj.getRowBox(record);\r\n                var x = rowBox.x, y = rowBox.y - 1;\r\n                if (feedback == \"after\") {\r\n                    y += rowBox.height;\r\n                }\r\n                mini.setXY(this.feedbackLine, x, y);\r\n\r\n                var box = dropObj.getBox(true);\r\n                mini.setWidth(this.feedbackLine, box.width);\r\n            } else {\r\n                dropObj.addRowCls(record, \"mini-tree-feedback-add\");\r\n                this.lastAddDomRow = record;\r\n\r\n                //mini.repaint(grid.el);\r\n            }\r\n        }\r\n    },\r\n    getFeedback: function (dropRecord, y, way) {\r\n        //way : 2, 3\r\n        var grid = this.owner;\r\n\r\n        var dropObj = this.dropObj;\r\n\r\n        var rowBox = dropObj.getRowBox(dropRecord);\r\n        //var rowPoint = grid.PointToViewport({ X: rowBounds.Left, Y: rowBounds.Top });\r\n\r\n        var h = rowBox.height;\r\n        var t = y - rowBox.y;\r\n\r\n        var effect = null;\r\n\r\n        //如果dropRecord属于dragData之一, 则\"no\"\r\n        if (this.dragData.indexOf(dropRecord) != -1) return \"no\";\r\n        var IsLeaf = false;\r\n        if (way == 3) {\r\n            IsLeaf = dropObj.isLeaf(dropRecord);\r\n\r\n            //遍历DragRecords, dropRecord不能是其子节点\r\n            for (var i = 0, l = this.dragData.length; i < l; i++) {\r\n                var dragRecord = this.dragData[i];\r\n\r\n                var isAncestor = dropObj.isAncestor(dragRecord, dropRecord);\r\n                if (isAncestor) {\r\n                    effect = \"no\";\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (effect == null) {\r\n            if (way == 2) {\r\n                if (t > h / 2) effect = \"after\";\r\n                else effect = \"before\";\r\n            } else {\r\n                if (IsLeaf && dropObj.allowLeafDropIn === false) {\r\n                    if (t > h / 2) effect = \"after\";\r\n                    else effect = \"before\";\r\n                } else {\r\n                    if (t > (h / 3) * 2) effect = \"after\";\r\n                    else if (h / 3 <= t && t <= (h / 3 * 2)) effect = \"add\";\r\n                    else effect = \"before\";\r\n                }\r\n            }\r\n        }\r\n        var e = dropObj._OnGiveFeedback(effect, this.dragData, dropRecord, grid);\r\n        return e.effect;\r\n    },\r\n    _getDrag: function () {\r\n        if (!this.drag) {\r\n            this.drag = new mini.Drag({\r\n                //capture: false,\r\n                onStart: mini.createDelegate(this._OnDragStart, this),\r\n                onMove: mini.createDelegate(this._OnDragMove, this),\r\n                onStop: mini.createDelegate(this._OnDragStop, this)\r\n            });\r\n        }\r\n        return this.drag;\r\n    }\r\n};\r\n\r\n\r\n//Events\r\nmini._Grid_Events = function (grid) {\r\n    this.owner = grid, el = grid.el;\r\n\r\n    mini.on(el, 'click', this.__OnClick, this);\r\n    mini.on(el, 'dblclick', this.__OnDblClick, this);\r\n\r\n    mini.on(el, 'mousedown', this.__OnMouseDown, this);\r\n    mini.on(el, 'mouseup', this.__OnMouseUp, this);\r\n    mini.on(el, 'mousemove', this.__OnMouseMove, this);\r\n    mini.on(el, 'mouseover', this.__OnMouseOver, this);\r\n    mini.on(el, 'mouseout', this.__OnMouseOut, this);\r\n\r\n    mini.on(el, 'keydown', this.__OnKeyDown, this);\r\n    mini.on(el, 'keyup', this.__OnKeyUp, this);\r\n\r\n    mini.on(el, 'contextmenu', this.__OnContextMenu, this);\r\n\r\n    //rowmouseenter, rowmouseout\r\n    grid.on(\"rowmousemove\", this.__OnRowMouseMove, this);\r\n\r\n\r\n    mini.on(window, \"resize\", this.__windowResize, this);\r\n}\r\nmini._Grid_Events.prototype = {\r\n\r\n    __windowResize: function () {\r\n        var grid = this.owner;\r\n\r\n        function layoutEditor() {\r\n            var editor = grid._getEditingControl();\r\n            if (editor) {\r\n                var currentCell = grid.getCurrentCell();\r\n                var cellBox = grid.getCellBox(currentCell[0], currentCell[1]);\r\n                grid._getEditWrap(cellBox, editor);\r\n                grid._setEditorBox(editor, cellBox); //_setEdiorBox\r\n            }\r\n        }\r\n\r\n        //if (grid._editWrap) grid._editWrap.style.left = \"-10000px\";\r\n        setTimeout(function () {\r\n            layoutEditor();\r\n        }, 100);\r\n\r\n    },\r\n\r\n\r\n    _row: null,\r\n    __OnRowMouseMove: function (e) {\r\n        var grid = this.owner;\r\n        var row = e.record;\r\n\r\n        if (this._row != row) {\r\n            //            if (this._row) {\r\n            //                e.record = this._row;\r\n            //                e.row = this._row;\r\n            //                grid.fire(\"rowmouseleave\", e);\r\n            //            }\r\n            e.record = row;\r\n            e.row = row;\r\n            grid.fire(\"rowmouseenter\", e);\r\n        }\r\n        this._row = row;\r\n    },\r\n\r\n\r\n    __OnClick: function (e) {\r\n        if (this.owner._ignoreClick) return;\r\n        this._fireEvent(e, 'Click');\r\n    },\r\n    __OnDblClick: function (e) {\r\n        this._fireEvent(e, 'Dblclick');\r\n    },\r\n    __OnMouseDown: function (e) {\r\n        var grid = this.owner;\r\n        if (mini.findParent(e.target, 'mini-tree-editinput')) return;\r\n        if (mini.findParent(e.target, \"mini-tree-node-ecicon\")) return;\r\n\r\n        this._fireEvent(e, 'MouseDown');\r\n\r\n        //if(e.target.tagName\r\n        var timer = 300;\r\n        if (e.target.tagName.toLowerCase() == \"a\" && e.target.href) {\r\n            timer = 10;\r\n        }\r\n\r\n        function fn() {\r\n            var p = mini.findParent(e.target, 'mini-grid-detailRow');\r\n            if (mini.isAncestor(grid.el, p)) return;\r\n            if (!!grid._editingCell) return;\r\n\r\n            grid._tryFocus(e);\r\n        }\r\n\r\n        //        if (mini.isChrome) {\r\n        //            fn();\r\n        //        } else {\r\n        setTimeout(function () {\r\n            fn();\r\n        }, timer);\r\n        //}\r\n    },\r\n    __OnMouseUp: function (e) {\r\n        if (mini.findParent(e.target, 'mini-tree-editinput')) return;\r\n        if (mini.findParent(e.target, \"mini-tree-node-ecicon\")) return;\r\n        if (mini.findParent(e.target, \"mini-tree-checkbox\")) return;\r\n\r\n        var grid = this.owner;\r\n        if (mini.isAncestor(grid.el, e.target)) {\r\n            //            setTimeout(function () {\r\n            //                grid._tryFocus(e);\r\n            //            }, 30);\r\n            //this.owner._tryFocus(e);\r\n            this._fireEvent(e, 'MouseUp');\r\n        }\r\n    },\r\n    __OnMouseMove: function (e) {\r\n        this._fireEvent(e, 'MouseMove');\r\n    },\r\n    __OnMouseOver: function (e) {\r\n        this._fireEvent(e, 'MouseOver');\r\n    },\r\n    __OnMouseOut: function (e) {\r\n        this._fireEvent(e, 'MouseOut');\r\n    },\r\n    __OnKeyDown: function (e) {\r\n        this._fireEvent(e, 'KeyDown');\r\n    },\r\n    __OnKeyUp: function (e) {\r\n        this._fireEvent(e, 'KeyUp');\r\n    },\r\n    __OnContextMenu: function (e) {\r\n        this._fireEvent(e, 'ContextMenu');\r\n    },\r\n    _fireEvent: function (e, name) {\r\n        //if (name == \"Dblclick\") debugger\r\n        //if (!this.enabled) return;\r\n\r\n        //if(name == \"Click\") debugger\r\n\r\n        var grid = this.owner;\r\n\r\n        var cell = grid._getCellByEvent(e);\r\n        var record = cell[0], column = cell[1];\r\n        if (record) {\r\n            var eve = {\r\n                record: record,\r\n                row: record,\r\n                htmlEvent: e\r\n            };\r\n\r\n            var fn = grid['_OnRow' + name];\r\n            if (fn) {\r\n                fn.call(grid, eve);\r\n            } else {\r\n                grid.fire(\"row\" + name, eve);\r\n            }\r\n        }\r\n        if (column) {\r\n            var eve = {\r\n                column: column,\r\n                field: column.field,\r\n                htmlEvent: e\r\n            };\r\n\r\n            var fn = grid['_OnColumn' + name];\r\n            if (fn) {\r\n                fn.call(grid, eve);\r\n            } else {\r\n                grid.fire(\"column\" + name, eve);\r\n            }\r\n        }\r\n\r\n        if (record && column) {\r\n            var eve = {\r\n                sender: grid,\r\n                record: record,\r\n                row: record,\r\n                column: column,\r\n                field: column.field,\r\n                htmlEvent: e\r\n            };\r\n\r\n            var fn = grid['_OnCell' + name];\r\n            if (fn) {\r\n                fn.call(grid, eve);\r\n            } else {\r\n                //if(name == \"Click\") debugger\r\n                grid.fire(\"cell\" + name, eve);\r\n            }\r\n\r\n            if (column[\"onCell\" + name]) {\r\n                column[\"onCell\" + name].call(column, eve);\r\n            }\r\n\r\n        }\r\n        if (!record && column && mini.findParent(e.target, 'mini-grid-headerCell')) {\r\n            var eve = {\r\n                column: column,\r\n                htmlEvent: e\r\n            };\r\n            var fn = grid['_OnHeaderCell' + name];\r\n            if (fn) {\r\n                fn.call(grid, eve);\r\n            } else {\r\n\r\n                var evName = \"onheadercell\" + name.toLowerCase();\r\n                if (column[evName]) {\r\n                    eve.sender = grid;\r\n                    column[evName](eve);\r\n                }\r\n\r\n                grid.fire(\"headercell\" + name, eve);\r\n            }\r\n        }\r\n    }\r\n}\n/*\r\n描述：DataGrid\r\n功能：\r\n选择模型：\r\n行选择\r\n单元格选择\r\n编辑模型：\r\n单元格编辑\r\n行编辑\r\n分页模型：\r\n服务端分页\r\ntop/bottom分页\r\n自定义分页\r\n*/\r\n\r\nmini.DataGrid = function (el) {\r\n    mini.DataGrid.superclass.constructor.call(this, null);\r\n\r\n    this._Events = new mini._Grid_Events(this);\r\n    this._Select = new mini._Grid_Select(this);\r\n    this._DragDrop = new mini._Grid_DragDrop(this);\r\n\r\n    this._RowGroup = new mini._Grid_RowGroup(this);\r\n\r\n    this._Splitter = new mini._Grid_ColumnSplitter(this);\r\n    this._ColumnMove = new mini._Grid_ColumnMove(this);\r\n    this._Sorter = new mini._Grid_Sorter(this);\r\n    this._CellToolTip = new mini._Grid_CellToolTip(this);\r\n    this._ColumnsMenu = new mini._Grid_ColumnsMenu(this);\r\n\r\n    this._createPagers();\r\n\r\n    if (el) mini.applyTo.call(this, el);\r\n\r\n\r\n//    if (mini.isIE || mini.isIE11) {\r\n//    } else {\r\n//        $(this.el).bind('focus', function (e) {\r\n//            e.preventDefault();\r\n//        });\r\n//    }\r\n};\r\nmini.extend(mini.DataGrid, mini.ScrollGridView, {\r\n\r\n    uiCls: \"mini-datagrid\",\r\n\r\n    selectOnLoad: false,\r\n\r\n    showHeader: false,\r\n    showPager: true,\r\n\r\n    validateOnAdd: false,\r\n    getValidateOnAdd: function () {\r\n        return this.validateOnAdd;\r\n    },\r\n    setValidateOnAdd: function (value) {\r\n        this.validateOnAdd = value;\r\n    },\r\n\r\n    dropAction: \"move\",         //move,copy\r\n\r\n    onlyCheckSelection: false,  //只运行checkcolumn选择\r\n    _$onlyCheckSelection: true,\r\n    allowUnselect: false,       //单选时点击能取消选择；多选的时候能直接点击多选\r\n    allowRowSelect: true,\r\n    allowCellSelect: false,\r\n    allowCellEdit: false,\r\n    cellEditAction: \"cellclick\",\r\n    allowCellValid: false,\r\n\r\n    allowResizeColumn: true,\r\n    allowSortColumn: true,\r\n    allowMoveColumn: true,\r\n\r\n    showColumnsMenu: false,\r\n\r\n    virtualScroll: false,\r\n    enableHotTrack: true,       //启动移动高亮显示行\r\n    allowHotTrackOut: true,   //允许高亮显示行移开消失\r\n    showLoading: true,\r\n\r\n    columnMinWidth: 8,\r\n\r\n    _expandLoad: function () {\r\n    },\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var value = kv.value;\r\n        delete kv.value;\r\n        var url = kv.url;\r\n        delete kv.url;\r\n        var data = kv.data;\r\n        delete kv.data;\r\n        var columns = kv.columns;\r\n        delete kv.columns;\r\n\r\n\r\n        var defaultColumnWidth = kv.defaultColumnWidth;\r\n        delete kv.defaultColumnWidth;\r\n        if (defaultColumnWidth) {\r\n            this.setDefaultColumnWidth(defaultColumnWidth);\r\n        }\r\n\r\n        if (!mini.isNull(columns)) {\r\n            this.setColumns(columns);\r\n        }\r\n\r\n        mini.DataGrid.superclass.set.call(this, kv);\r\n\r\n        if (!mini.isNull(data)) {\r\n            this.setData(data);\r\n        }\r\n        if (!mini.isNull(url)) {\r\n\r\n            this.setUrl(url);\r\n        }\r\n        if (!mini.isNull(value)) {\r\n            this.setValue(value);\r\n        }\r\n\r\n        return this;\r\n    },\r\n    doUpdate: function () {\r\n        //return;\r\n\r\n        this._destroyEditors();\r\n        mini.DataGrid.superclass.doUpdate.apply(this, arguments);\r\n    },\r\n    _destroyEditors: function () {\r\n        var controls = mini.getChildControls(this);\r\n        var editors = [];\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var ui = controls[i];\r\n            if (ui.el && mini.findParent(ui.el, this._rowCls)) {\r\n                editors.push(ui);\r\n                ui.destroy();\r\n            }\r\n        }\r\n        //alert(editors.length);\r\n    },\r\n    /////////////////////////////////////////////////\r\n    _OnDrawCell: function () {\r\n        var e = mini.DataGrid.superclass._OnDrawCell.apply(this, arguments);\r\n        //        var error = this.getCellError(e.record, e.column);\r\n        //        if (error) {\r\n        //            if (!e.cellCls) e.cellCls = \"\";\r\n        //            e.cellCls += \" mini-grid-cell-error \";\r\n        //        }\r\n\r\n        return e;\r\n    },\r\n    /////////////////////////////////////////////////\r\n    _bindSource: function () {\r\n        var source = this._dataSource;\r\n        //table\r\n        source.on(\"beforeload\", this.__OnSourceBeforeLoad, this);\r\n        source.on(\"preload\", this.__OnSourcePreLoad, this);\r\n        source.on(\"load\", this.__OnSourceLoadSuccess, this);\r\n        source.on(\"loaderror\", this.__OnSourceLoadError, this);\r\n\r\n\r\n        source.on(\"loaddata\", this.__OnSourceLoadData, this);\r\n        source.on(\"cleardata\", this.__OnSourceClearData, this);\r\n        source.on(\"sort\", this.__OnSourceSort, this);\r\n        source.on(\"filter\", this.__OnSourceFilter, this);\r\n\r\n        source.on(\"pageinfochanged\", this.__OnPageInfoChanged, this);\r\n        source.on(\"selectionchanged\", this.__OnSelectionChanged, this);\r\n        source.on(\"currentchanged\", function (e) {\r\n            this.fire(\"currentchanged\", e);\r\n        }, this);\r\n\r\n        //\r\n        source.on(\"add\", this.__OnSourceAdd, this);\r\n        source.on(\"update\", this.__OnSourceUpdate, this);\r\n        source.on(\"remove\", this.__OnSourceRemove, this);\r\n        source.on(\"move\", this.__OnSourceMove, this);\r\n\r\n        source.on(\"beforeadd\", function (e) {\r\n            this.fire(\"beforeaddrow\", e);\r\n        }, this);\r\n        source.on(\"beforeupdate\", function (e) {\r\n            this.fire(\"beforeupdaterow\", e);\r\n        }, this);\r\n        source.on(\"beforeremove\", function (e) {\r\n            this.fire(\"beforeremoverow\", e);\r\n        }, this);\r\n        source.on(\"beforemove\", function (e) {\r\n            this.fire(\"beforemoverow\", e);\r\n        }, this);\r\n\r\n        //select\r\n        source.on(\"beforeselect\", function (e) {\r\n            this.fire(\"beforeselect\", e);\r\n        }, this);\r\n\r\n\r\n        source.on(\"beforedeselect\", function (e) {\r\n\r\n            this.fire(\"beforedeselect\", e);\r\n        }, this);\r\n        source.on(\"select\", function (e) {\r\n            this.fire(\"select\", e);\r\n        }, this);\r\n        source.on(\"deselect\", function (e) {\r\n            this.fire(\"deselect\", e);\r\n        }, this);\r\n    },\r\n    _getMaskWrapEl: function () {\r\n        return this.el;\r\n    },\r\n    _initData: function () {\r\n\r\n        this.data = this._dataSource.getSource();\r\n        this.pageIndex = this.getPageIndex();\r\n        this.pageSize = this.getPageSize();\r\n        this.totalCount = this.getTotalCount();\r\n        this.totalPage = this.getTotalPage();\r\n        this.sortField = this.getSortField();\r\n        this.sortOrder = this.getSortOrder();\r\n        this.url = this.getUrl();\r\n\r\n        this._mergedCellMaps = {};\r\n        this._mergedCells = {};\r\n\r\n        this._cellErrors = [];\r\n        this._cellMapErrors = {};\r\n\r\n        if (this.isGrouping()) {\r\n            this.groupBy(this._groupField, this._groupDir);\r\n\r\n            if (this.collapseGroupOnLoad) {\r\n\r\n                this.collapseGroups();\r\n            }\r\n        }\r\n    },\r\n    __OnSourceBeforeLoad: function (e) {\r\n        this.fire(\"beforeload\", e);\r\n        if (e.cancel == true) {\r\n\r\n            return;\r\n        }\r\n        if (this.showLoading) {\r\n            this.loading();\r\n        }\r\n    },\r\n    __OnSourcePreLoad: function (e) {\r\n        this.fire(\"preload\", e);\r\n    },\r\n\r\n    __OnSourceLoadSuccess: function (e) {\r\n\r\n        this.fire(\"load\", e);\r\n        this.unmask();\r\n    },\r\n    __OnSourceLoadError: function (e) {\r\n        this.fire(\"loaderror\", e);\r\n        this.unmask();\r\n    },\r\n\r\n    __OnSourceSort: function (e) {\r\n        this.deferUpdate();\r\n        this.fire(\"sort\", e);\r\n    },\r\n    __OnSourceFilter: function (e) {\r\n        this.deferUpdate();\r\n        this.fire(\"filter\", e);\r\n    },\r\n\r\n    __OnSourceAdd: function (e) {\r\n\r\n        this._doAddRowEl(e.record, e.index);\r\n\r\n        var me = this;\r\n        if (!me._addTimer) {\r\n            me._addTimer = setTimeout(function () {\r\n                me._addTimer = null;\r\n\r\n                me._doUpdateSummaryRow();\r\n                me._viewRegion = me._getViewRegion();\r\n            }, 10);\r\n        }\r\n\r\n\r\n        this.fire(\"addrow\", e);\r\n    },\r\n    __OnSourceUpdate: function (e) {\r\n\r\n        this._doUpdateRowEl(e.record);\r\n        this._doUpdateSummaryRow();\r\n\r\n        this.fire(\"updaterow\", e);\r\n    },\r\n    __OnSourceRemove: function (e) {\r\n        var me = this;\r\n        this._doRemoveRowEl(e.record);\r\n\r\n        if (!me._toSummary) {\r\n            me._toSummary = setTimeout(function () {\r\n                me._toSummary = null;\r\n                me._doUpdateSummaryRow();\r\n                //alert(1);\r\n            }, 10);\r\n        }\r\n\r\n        this.fire(\"removerow\", e);\r\n\r\n        if (this.isVirtualScroll()) {\r\n            this.deferUpdate();\r\n        }\r\n    },\r\n    __OnSourceMove: function (e) {\r\n        this._doMoveRowEl(e.record, e.index);\r\n        this._doUpdateSummaryRow();\r\n        this.fire(\"moverow\", e);\r\n    },\r\n    __OnSelectionChanged: function (e) {\r\n        //return\r\n\r\n        if (e.fireEvent !== false) {\r\n            if (e.select) {\r\n                this.fire(\"rowselect\", e);\r\n            } else {\r\n                this.fire(\"rowdeselect\", e);\r\n            }\r\n        }\r\n\r\n        var me = this;\r\n        if (this._selectionTimer) {\r\n            clearTimeout(this._selectionTimer);\r\n            this._selectionTimer = null;\r\n        }\r\n        this._selectionTimer = setTimeout(function () {\r\n            me._selectionTimer = null;\r\n\r\n            if (e.fireEvent !== false) {\r\n                me.fire(\"SelectionChanged\", e);\r\n            }\r\n\r\n            me.fire(\"_selectchange\", e);\r\n\r\n            //            //滚动第一个\r\n            //            var first = me.getSelected();\r\n            //            if(first) \r\n        }, 1);\r\n        //alert(e.records.length);\r\n        var sss = new Date();\r\n\r\n        this._doRowSelect(e._records, e.select);\r\n\r\n        //        if (e.select) {\r\n        //            setTimeout(function () {\r\n        //                alert(new Date() - sss);\r\n        //            }, 1);\r\n        //        }\r\n        //this.fire(\"_SelectionChanged\", e);\r\n    },\r\n    __OnPageInfoChanged: function (e) {\r\n        this._updatePagesInfo();\r\n    },\r\n    _updatePagesInfo: function () {\r\n        var pageIndex = this.getPageIndex();\r\n        var pageSize = this.getPageSize();\r\n        var totalCount = this.getTotalCount();\r\n        var totalPages = this.getTotalPage();\r\n\r\n        var pagers = this._pagers;\r\n        for (var i = 0, l = pagers.length; i < l; i++) {\r\n            var pager = pagers[i];\r\n            pager.update(pageIndex, pageSize, totalCount);\r\n            this._dataSource.totalPage = pager.totalPage;\r\n        }\r\n    },\r\n    setPagerButtons: function (value) {\r\n        this._bottomPager.setButtons(value);\r\n    },\r\n    setPager: function (value) {\r\n        if (typeof value == \"string\") {\r\n            var el = mini.byId(value);\r\n            if (!el) return;\r\n            mini.parse(value);\r\n            value = mini.get(value);\r\n        }\r\n        if (value) {\r\n            this.bindPager(value);\r\n        }\r\n    },\r\n    bindPager: function (pager) {\r\n        if (!pager) return;\r\n        this.unbindPager(pager);\r\n        this._pagers.add(pager);\r\n        pager.on(\"beforepagechanged\", this.__OnPageChanged, this);\r\n    },\r\n    unbindPager: function (pager) {\r\n        if (!pager) return;\r\n        this._pagers.remove(pager);\r\n        pager.un(\"pagechanged\", this.__OnPageChanged, this);\r\n    },\r\n    __OnPageChanged: function (e) {\r\n        e.cancel = true;\r\n        this.gotoPage(e.pageIndex, e.pageSize);\r\n        //this._dataSource.gotoPage(e.pageIndex, e.pageSize);\r\n    },\r\n    ///////////////////////////////////////////////\r\n    _canUpdateRowEl: true,\r\n    _doUpdateRowEl: function (row) {\r\n\r\n        var columns1 = this.getFrozenColumns();\r\n        var columns2 = this.getUnFrozenColumns();\r\n\r\n        var rowEl1, rowEl2;\r\n\r\n        var rowIndex = this.indexOf(row);\r\n\r\n        var s = this._createRowHTML(row, rowIndex, columns2, 2);\r\n        var rowEl = this._getRowEl(row, 2);\r\n        if (!rowEl) return;\r\n\r\n\r\n        jQuery(rowEl).before(s);\r\n        rowEl1 = rowEl.previousSibling;\r\n        //mini.before(rowEl, s);\r\n        if (rowEl) rowEl.parentNode.removeChild(rowEl);\r\n\r\n        if (this.isFrozen()) {\r\n            var s = this._createRowHTML(row, rowIndex, columns1, 1);\r\n            var rowEl = this._getRowEl(row, 1);\r\n            jQuery(rowEl).before(s);\r\n            rowEl2 = rowEl.previousSibling;\r\n            //rowEl.parentNode.removeChild(rowEl);\r\n            jQuery(rowEl).remove();\r\n        }\r\n\r\n        this.deferLayout();\r\n\r\n        if (rowEl1 && rowEl2) {\r\n            this._doSyncRowHeight(rowEl1, rowEl2);\r\n            //var row\r\n        }\r\n    },\r\n    _doAddRowEl: function (row, index) {\r\n\r\n        var columns1 = this.getFrozenColumns();\r\n        var columns2 = this.getUnFrozenColumns();\r\n\r\n        var bdTable1 = this._rowsLockContentEl.firstChild;\r\n        var bdTable2 = this._rowsViewContentEl.firstChild;\r\n\r\n        //var rowIndex = this.indexOf(row);\r\n        var rowIndex = mini.isNumber(index) ? index : this.indexOf(row);\r\n        var insertRow = this.getAt(rowIndex + 1);\r\n\r\n        function doAdd(row, viewIndex, columns, bdTable) {\r\n            var s = this._createRowHTML(row, rowIndex, columns, viewIndex);\r\n            if (insertRow) {\r\n                var inertRowEl = this._getRowEl(insertRow, viewIndex);\r\n                jQuery(inertRowEl).before(s);\r\n            } else {\r\n                mini.append(bdTable, s);\r\n            }\r\n        }\r\n\r\n        doAdd.call(this, row, 2, columns2, bdTable2);\r\n        if (this.isFrozen()) {\r\n            doAdd.call(this, row, 1, columns1, bdTable1);\r\n        }\r\n\r\n        this.deferLayout();\r\n\r\n        if (this.showEmptyText) {\r\n            var el = jQuery(\".mini-grid-emptyText\", this._bodyEl)[0];\r\n            if (el) {\r\n                //mini.removeNode(el.parentNode);           \r\n                el.style.display = \"none\";\r\n                el.parentNode.style.display = \"none\";\r\n            }\r\n        }\r\n    },\r\n    _doRemoveRowEl: function (row) {\r\n        var rowEl = this._getRowEl(row, 1);\r\n        var rowEl2 = this._getRowEl(row, 2);\r\n        if (rowEl) rowEl.parentNode.removeChild(rowEl);\r\n        if (rowEl2) rowEl2.parentNode.removeChild(rowEl2);\r\n        if (!rowEl2) return;\r\n\r\n        //详细行\r\n        var tr = this._getRowDetailEl(row, 1);\r\n        var tr2 = this._getRowDetailEl(row, 2);\r\n        if (tr) tr.parentNode.removeChild(tr);\r\n        if (tr2) tr2.parentNode.removeChild(tr2);\r\n\r\n        this.deferLayout();\r\n\r\n        if (this.showEmptyText && this.getVisibleRows().length == 0) {\r\n            var el = jQuery(\".mini-grid-emptyText\", this._bodyEl)[0];\r\n            if (el) {\r\n                //mini.removeNode(el.parentNode);           \r\n                el.style.display = \"\";\r\n                el.parentNode.style.display = \"\";\r\n            }\r\n        }\r\n    },\r\n    _doMoveRowEl: function (row, index) {\r\n        this._doRemoveRowEl(row);\r\n        this._doAddRowEl(row);\r\n    },\r\n    ///////////////////////////////////////////////\r\n    _getRowGroupEl: function (group, index) {\r\n        if (index == 1 && !this.isFrozen()) return null;\r\n        var id = this._createRowGroupId(group, index);\r\n        var el = mini.byId(id, this.el);   //是否优化此方法？\r\n        return el;\r\n    },\r\n    _getRowGroupRowsEl: function (group, index) {\r\n        if (index == 1 && !this.isFrozen()) return null;\r\n        var id = this._createRowGroupRowsId(group, index);\r\n        var el = mini.byId(id, this.el);   //是否优化此方法？\r\n        return el;\r\n    },\r\n    _getRowEl: function (row, index) {\r\n        if (index == null) index = 2;\r\n        if (index == 1 && !this.isFrozen()) return null;\r\n        row = this.getRecord(row);\r\n        var id = this._createRowId(row, index);\r\n        var el = mini.byId(id, this.el);   //是否优化此方法？\r\n        return el;\r\n    },\r\n    _getHeaderCellEl: function (column, index) {\r\n        if (index == null) index = 2;\r\n        if (index == 1 && !this.isFrozen()) return null;\r\n        column = this.getColumn(column);\r\n        var id = this._createHeaderCellId(column, index);\r\n        var el = mini.byId(id, this.el);\r\n        return el;\r\n    },\r\n\r\n    getRowEl: function (row, index) {\r\n        return this._getRowEl(row, index);\r\n    },\r\n\r\n    getHeaderCellEl: function (column, index) {\r\n        return this._getHeaderCellEl(column, index);\r\n    },\r\n\r\n    _getCellEl: function (row, column) {\r\n        row = this.getRecord(row);\r\n        column = this.getColumn(column);\r\n        if (!row || !column) return null;\r\n        var id = this._createCellId(row, column);\r\n        var el = mini.byId(id, this.el);\r\n        return el;\r\n    },\r\n    getCellEl: function (row, column) {\r\n        return this._getCellEl(row, column);\r\n    },\r\n    getRecordByEvent: function (e) {\r\n        return this._getRecordByEvent(e);\r\n    },\r\n    _getRecordByEvent: function (e) {\r\n        var t = mini.findParent(e.target, this._rowCls);\r\n        if (!t) return null;\r\n        var ids = t.id.split(\"$\");\r\n        var uid = ids[ids.length - 1];\r\n        return this._getRowByID(uid);\r\n    },\r\n    getColumnByEvent: function (e) {\r\n        if (!e) return null;\r\n        return this._getColumnByEvent(e);\r\n    },\r\n\r\n    _getColumnByEvent: function (e) {\r\n        var t = mini.findParent(e.target, this._cellCls);\r\n        if (!t) t = mini.findParent(e.target, this._headerCellCls);\r\n        if (t) {\r\n            var ids = t.id.split(\"$\");\r\n            var id = ids[ids.length - 1];\r\n            return this._getColumnById(id);\r\n        }\r\n        return null;\r\n    },\r\n    _getCellByEvent: function (e) {\r\n        var record = this._getRecordByEvent(e);\r\n        var column = this._getColumnByEvent(e);\r\n        return [record, column];\r\n    },\r\n\r\n    getColumnFromEvent: function (e) {\r\n        if (!e) return null;\r\n        return this._getColumnByEvent(e);\r\n    },\r\n    getCellFromEvent: function (e) {\r\n        return this._getCellByEvent(e);\r\n    },\r\n    getRowFromEvent: function (e) {\r\n        var cell = this._getCellByEvent(e);\r\n        return cell ? cell[0] : null;\r\n    },\r\n\r\n    getRowByEvent: function (e) {\r\n        return this.getRowFromEvent(e);\r\n    },\r\n    getColumnByEvent: function (e) {\r\n        return this.getColumnFromEvent(e);\r\n    },\r\n    getCellByEvent: function (e) {\r\n        return this.getCellFromEvent(e);\r\n    },\r\n\r\n    _getRowByID: function (id) {\r\n        return this._dataSource.getby_id(id);\r\n    },\r\n    _getColumnById: function (id) {\r\n        return this._columnModel._getColumnById(id);\r\n    },\r\n\r\n    //    getRowCls: function (row) {\r\n    //        return row ? this._rowClsHash[row._id] : null;\r\n    //    },\r\n\r\n    hasRowCls: function (row, cls) {\r\n\r\n        var sb = this._rowClsHash[row._id];\r\n        if (sb) return sb.indexOf(cls) != -1;\r\n        return false;\r\n    },\r\n\r\n    addRowCls: function (row, cls, _marked) {\r\n\r\n        var d1 = this._getRowEl(row, 1);\r\n        var d2 = this._getRowEl(row, 2);\r\n        if (d1) mini.addClass(d1, cls);\r\n        if (d2) mini.addClass(d2, cls);\r\n\r\n        if (row && _marked !== false) {\r\n            var sb = this._rowClsHash[row._id];\r\n            if (!sb) sb = this._rowClsHash[row._id] = [];\r\n            else sb.remove(cls);\r\n            sb.push(cls);\r\n        }\r\n\r\n    },\r\n    removeRowCls: function (row, cls) {\r\n        var d1 = this._getRowEl(row, 1);\r\n        var d2 = this._getRowEl(row, 2);\r\n        if (d1) mini.removeClass(d1, cls);\r\n        if (d2) mini.removeClass(d2, cls);\r\n\r\n        if (row) {\r\n            var sb = this._rowClsHash[row._id];\r\n            if (sb) {\r\n                sb.remove(cls);\r\n                if (sb.length == 0) delete this._rowClsHash[row._id];\r\n            }\r\n        }\r\n    },\r\n    getCellBox: function (row, column) {\r\n        row = this.getRow(row);\r\n        column = this.getColumn(column);\r\n        if (!row || !column) return null;\r\n        var cellEl = this._getCellEl(row, column);\r\n        if (!cellEl) return null;\r\n        return mini.getBox(cellEl);\r\n    },\r\n    getColumnBox: function (column) {\r\n        var id = this._createHeaderCellId(column, 2);\r\n        var el = document.getElementById(id);\r\n        if (!el) {\r\n            id = this._createHeaderCellId(column, 1);\r\n            el = document.getElementById(id);\r\n        }\r\n        if (el) {\r\n            //if (el.style.display == \"none\") return null;\r\n            var box = mini.getBox(el);\r\n            box.x -= 1;\r\n            box.left = box.x;\r\n            box.right = box.x + box.width;\r\n            return box;\r\n        }\r\n    },\r\n    getRowBox: function (row) {\r\n        var rowEl = this._getRowEl(row, 1);\r\n        var rowEl2 = this._getRowEl(row, 2);\r\n        if (!rowEl2) return null;\r\n        var box = mini.getBox(rowEl2);\r\n        if (rowEl) {\r\n            var box1 = mini.getBox(rowEl);\r\n            box.x = box.left = box1.left;\r\n            box.width = box.right - box.x;\r\n        }\r\n        return box;\r\n    },\r\n    ///////////////////\r\n\r\n    //    _isRenderedRow: function (record) {\r\n    //        \r\n    //    },\r\n\r\n    _doRowSelect: function (rows, select) {\r\n\r\n        var virtual = this.isVirtualScroll(),\r\n            region = this._viewRegion,\r\n            start = virtual ? region.start : -1,\r\n            end = virtual ? region.end : -1,\r\n            map = {};\r\n        if (start != -1) {\r\n            var data = this.getVisibleRows();\r\n            for (var i = start, l = end; i < l; i++) {\r\n                var row = data[i];\r\n                if (row) map[row._id] = true;\r\n            }\r\n        }\r\n\r\n        var sss = new Date();\r\n        for (var i = 0, l = rows.length; i < l; i++) {\r\n            var record = rows[i];\r\n\r\n            //continue;\r\n            if (start != -1) {\r\n                if (!map[record._id]) {\r\n\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            if (select) {\r\n                this.addRowCls(record, this._rowSelectedCls, false);\r\n            } else {\r\n                this.removeRowCls(record, this._rowSelectedCls);\r\n            }\r\n        }\r\n    },\r\n    _tryFocus: function (e) {\r\n\r\n        try {\r\n            var tagName = e.target.tagName.toLowerCase();\r\n            if (tagName == \"input\" || tagName == \"textarea\" || tagName == \"select\") return;\r\n            if (mini.hasClass(e.target, 'mini-placeholder-label')) return;\r\n\r\n            if (mini.findParent(e.target, 'mini-grid-rows-content')) {\r\n\r\n                mini.setXY(this._focusEl, e.pageX, e.pageY);\r\n\r\n                this.focus(false);\r\n            }\r\n            //            if (mini.isAncestor(this._filterEl, e.target)\r\n            //            || mini.isAncestor(this._summaryEl, e.target)\r\n            //            || mini.isAncestor(this._footerEl, e.target)\r\n            //            || mini.findParent(e.target, \"mini-grid-rowEdit\")\r\n            //            || mini.findParent(e.target, \"mini-grid-detailRow\")\r\n            //            ) {\r\n\r\n            //            } else {\r\n            //                var me = this;\r\n\r\n            //                //setTimeout(function () {\r\n            //                me.focus();\r\n            //                //}, 100);\r\n            //            }\r\n        } catch (ex) { }\r\n    },\r\n    //    focus: function () {\r\n    //        var that = this;\r\n    //        try {\r\n    //            that.el.focus();\r\n\r\n    //            if (mini.isIE) {\r\n    //                var cell = this.getCurrentCell();\r\n    //                if (cell) {\r\n    //                    var el = this._getCellEl(cell[0], cell[1]);\r\n    //                    el.focus();\r\n    //                    var box = this.getCellBox(cell[0], cell[1]);\r\n    //                    mini.setX(this._focusEl, box.x);\r\n    //                }\r\n    //            }\r\n\r\n    //        } catch (e) { }\r\n    //    },\r\n    focus: function (_fixFocus) {\r\n\r\n\r\n        //alert(1);\r\n        try {\r\n            var that = this;\r\n            var cell = this.getCurrentCell();\r\n            if (cell && _fixFocus !== false) {\r\n                var box = this.getCellBox(cell[0], cell[1]);\r\n                mini.setX(this._focusEl, box.x);\r\n            }\r\n\r\n            var row = this.getCurrent();\r\n            if (row) {\r\n\r\n                var rowEl = this._getRowEl(row, 2);\r\n                if (rowEl) {\r\n                    if (_fixFocus !== false) {\r\n                        var rowBox = mini.getBox(rowEl);\r\n                        mini.setY(that._focusEl, rowBox.top);\r\n                    }\r\n                    if (mini.isIE || mini.isIE11 || mini.isChrome) {\r\n                        if (mini.isChrome) {\r\n                            //that._focusEl.focus();\r\n                            that.el.focus();          //chrome60可能需要修改下。\r\n                            //rowEl.focus();\r\n                        } else {\r\n                            that._focusEl.focus();\r\n                        }\r\n                        //that.el.focus();\r\n                    } else {\r\n                        that.el.focus();\r\n                    }\r\n                }\r\n            } else {\r\n                if (mini.isIE || mini.isIE11 || mini.isChrome) {\r\n\r\n                    that._focusEl.focus();\r\n                    //that.el.focus();\r\n                } else {\r\n                    that.el.focus();\r\n\r\n                    //that._focusEl.focus();\r\n                }\r\n            }\r\n\r\n        } catch (e) { }\r\n    },\r\n    focusRow: function (row) {\r\n        if (this._focusRow == row) return;\r\n        if (this._focusRow) {\r\n            this.removeRowCls(this._focusRow, this._rowHoverCls);\r\n        }\r\n        this._focusRow = row;\r\n        if (row) this.addRowCls(row, this._rowHoverCls, false);\r\n\r\n        if (mini.isIE6) mini.repaint();\r\n    },\r\n    scrollIntoView: function (row, column, virtualScroll) {\r\n        row = this.getRow(row);\r\n        if (!row) return;\r\n\r\n        var virtualScroll = this.isVirtualScroll()\r\n\r\n        try {\r\n\r\n            if (column) {\r\n\r\n                if (this._columnModel.isFrozenColumn(column)) {\r\n                    column = null;\r\n                }\r\n            }\r\n\r\n            if (column) {\r\n                var cellEl = this._getCellEl(row, column);\r\n                mini.scrollIntoView(cellEl, this._rowsViewEl, true, virtualScroll != true);\r\n\r\n                this._syncScroll();\r\n            }\r\n\r\n\r\n            if (this.isVirtualScroll()) {       //@ 虚拟滚动时不处理滚动条偏移调整\r\n\r\n                virtualScroll = true;\r\n\r\n                var scrollTop = this.getScrollTop(),\r\n                        offsetHeight = this._vscrollEl.offsetHeight;\r\n\r\n                //alert(scrollTop);\r\n\r\n                //@ 虚拟滚动新方案\r\n                var region = this._getViewRegion();\r\n                var visibleRows = this.getVisibleRows();\r\n                var index = visibleRows.indexOf(row)\r\n                var offset = this._getRangeHeight(0, index),\r\n                        rowHeight = row._height || this.defaultRowHeight,\r\n                        offsetBottom = offset + rowHeight;\r\n\r\n                if (offset < scrollTop) {\r\n                    //alert(\"up\");\r\n                    //this._updateScrollTop(offset);\r\n\r\n                    //if(index == 49 || index == 50) debugger\r\n\r\n                    this.setScrollTop(offset);\r\n                    this._updateScrollTop(offset);      //@立刻更新\r\n                    //document.title = offset;\r\n                } else if (offsetBottom > scrollTop + offsetHeight) {\r\n                    //alert(\"down\");\r\n\r\n                    //offsetBottom  - x = scrollTop + offsetHeight + x;\r\n\r\n                    offset = scrollTop + offsetBottom - (scrollTop + offsetHeight)\r\n\r\n                    this.setScrollTop(offset);\r\n                    this._updateScrollTop(offset);      //@立刻更新\r\n                }\r\n\r\n\r\n                //this.setScrollTop(offset);\r\n\r\n                //                    debugger\r\n                //                    alert(offset);\r\n\r\n                //@旧方案先暂搁置\r\n                //                    if (virtualScroll != false) {\r\n                //                        \r\n                //                        var region = this._getViewRegion();\r\n                //                        //var index = this.indexOf(row);\r\n\r\n                //                        var visibleRows = this.getVisibleRows();\r\n                //                        var index = visibleRows.indexOf(row)\r\n\r\n                //                        //                    if (region.start <= index && index <= region.end) {\r\n                //                        //                    } else {\r\n\r\n                //                        var offset = this._getRangeHeight(0, index);\r\n                //                        //判断下间距，决定是否偏移\r\n\r\n                //                        this.setScrollTop(offset);\r\n\r\n                //                    }\r\n            } else {\r\n                var rowEl = this._getRowEl(row, 2);\r\n                mini.scrollIntoView(rowEl, this._rowsViewEl, false);\r\n\r\n                this._syncScroll();\r\n            }\r\n\r\n        } catch (e) { }\r\n    },\r\n    /////////////////////////////////////////////////////////////\r\n\r\n    setShowLoading: function (value) {\r\n        this.showLoading = value;\r\n    },\r\n    getShowLoading: function () {\r\n        return this.showLoading;\r\n    },\r\n    setEnableHotTrack: function (value) {\r\n        this.enableHotTrack = value;\r\n    },\r\n    getEnableHotTrack: function () {\r\n        return this.enableHotTrack;\r\n    },\r\n    setAllowHotTrackOut: function (value) {\r\n        this.allowHotTrackOut = value;\r\n    },\r\n    getAllowHotTrackOut: function () {\r\n        return this.allowHotTrackOut;\r\n    },\r\n\r\n    setOnlyCheckSelection: function (value) {\r\n        this.onlyCheckSelection = value;\r\n    },\r\n    getOnlyCheckSelection: function () {\r\n        return this.onlyCheckSelection;\r\n    },\r\n    setAllowUnselect: function (value) {\r\n        this.allowUnselect = value;\r\n    },\r\n    getAllowUnselect: function () {\r\n        return this.allowUnselect;\r\n    },\r\n    setAllowRowSelect: function (value) {\r\n        this.allowRowSelect = value;\r\n    },\r\n    getAllowRowSelect: function () {\r\n        return this.allowRowSelect;\r\n    },\r\n    setAllowCellSelect: function (value) {\r\n        this.allowCellSelect = value;\r\n    },\r\n    getAllowCellSelect: function () {\r\n        return this.allowCellSelect;\r\n    },\r\n    setAllowCellEdit: function (value) {\r\n        this.allowCellEdit = value;\r\n    },\r\n    getAllowCellEdit: function () {\r\n        return this.allowCellEdit;\r\n    },\r\n    setCellEditAction: function (value) {\r\n        this.cellEditAction = value;\r\n    },\r\n    getCellEditAction: function () {\r\n        return this.cellEditAction;\r\n    },\r\n    setAllowCellValid: function (value) {\r\n        this.allowCellValid = value;\r\n    },\r\n    getAllowCellValid: function () {\r\n        return this.allowCellValid;\r\n    },\r\n    setAllowResizeColumn: function (value) {\r\n        this.allowResizeColumn = value;\r\n        mini.removeClass(this.el, \"mini-grid-resizeColumns-no\");\r\n        if (!value) {\r\n            mini.addClass(this.el, \"mini-grid-resizeColumns-no\");\r\n        }\r\n    },\r\n    getAllowResizeColumn: function () {\r\n        return this.allowResizeColumn;\r\n    },\r\n    setAllowSortColumn: function (value) {\r\n        this.allowSortColumn = value;\r\n    },\r\n    getAllowSortColumn: function () {\r\n        return this.allowSortColumn;\r\n    },\r\n    setAllowMoveColumn: function (value) {\r\n        this.allowMoveColumn = value;\r\n    },\r\n    getAllowMoveColumn: function () {\r\n        return this.allowMoveColumn;\r\n    },\r\n    setShowColumnsMenu: function (value) {\r\n        this.showColumnsMenu = value;\r\n    },\r\n    getShowColumnsMenu: function () {\r\n        return this.showColumnsMenu;\r\n    },\r\n\r\n    setEditNextRowCell: function (value) {\r\n        this.editNextRowCell = value;\r\n    },\r\n    getEditNextRowCell: function () {\r\n        return this.editNextRowCell;\r\n    },\r\n    setEditNextOnEnterKey: function (value) {\r\n        this.editNextOnEnterKey = value;\r\n    },\r\n    getEditNextOnEnterKey: function () {\r\n        return this.editNextOnEnterKey;\r\n    },\r\n    setEditOnTabKey: function (value) {\r\n        this.editOnTabKey = value;\r\n    },\r\n    getEditOnTabKey: function () {\r\n        return this.editOnTabKey;\r\n    },\r\n    setCreateOnEnter: function (value) {\r\n        this.createOnEnter = value;\r\n    },\r\n    getCreateOnEnter: function () {\r\n        return this.createOnEnter;\r\n    },\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    // CellSelect\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    _currentCell: null,\r\n    _doCurrentCell: function (select) {\r\n        if (this._currentCell) {\r\n            var record = this._currentCell[0], column = this._currentCell[1];\r\n            var cellEl = this._getCellEl(record, column);\r\n            if (cellEl) {\r\n                if (select) {\r\n                    mini.addClass(cellEl, this._cellSelectedCls);\r\n                } else {\r\n                    mini.removeClass(cellEl, this._cellSelectedCls);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    setCurrentCell: function (cell) {\r\n\r\n\r\n\r\n        if (this._currentCell != cell) {\r\n            this._doCurrentCell(false);\r\n            this._currentCell = cell;\r\n\r\n            if (cell) {\r\n                var row = this.getRow(cell[0]);\r\n                var column = this.getColumn(cell[1]);\r\n                if (row && column) {\r\n                    this._currentCell = [row, column];\r\n                } else {\r\n                    this._currentCell = null;\r\n                }\r\n            }\r\n\r\n            this._doCurrentCell(true);\r\n            if (cell) {\r\n                //不能是合并单元格\r\n                var ac = this._getAnchorCell(cell[0], cell[1]);\r\n                if (!ac) {\r\n\r\n\r\n                    if (this.isFrozen()) {\r\n                        //if (!this.virtualScroll) {\r\n                        this.scrollIntoView(cell[0], null, false);\r\n                        //}\r\n                    } else {\r\n                        //this.scrollIntoView(cell[0]);\r\n                        this.scrollIntoView(cell[0], cell[1], false);\r\n                    }\r\n\r\n                }\r\n            }\r\n            this.fire(\"currentcellchanged\");\r\n            //this._blurRow();\r\n        }\r\n    },\r\n    getCurrentCell: function () {\r\n        var cc = this._currentCell;\r\n        if (cc) {\r\n            if (this.indexOf(cc[0]) == -1) {\r\n                this._currentCell = null;\r\n                cc = null;\r\n            }\r\n        }\r\n        return cc;\r\n    },\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    // CellEdit\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    _editingCell: null,\r\n    isEditingCell: function (cell) {\r\n        return this._editingCell && this._editingCell[0] == cell[0] && this._editingCell[1] == cell[1];\r\n    },\r\n    //    isCellCanEdit: function(row, column){\r\n    //    },\r\n    beginEditCell: function (row, column) {\r\n\r\n        function beginEdit(row, column) {\r\n\r\n            var sss = new Date();\r\n\r\n            row = this.getRow(row);\r\n            column = this.getColumn(column);\r\n            var cell = [row, column];\r\n            if (row && column) {\r\n                this.setCurrentCell(cell);\r\n            }\r\n\r\n            var cell = this.getCurrentCell();\r\n            if (this._editingCell && cell) {\r\n                if (this._editingCell[0] == cell[0] && this._editingCell[1] == cell[1]) return;\r\n            }\r\n\r\n            if (this._editingCell) this.commitEdit();\r\n\r\n\r\n\r\n            if (cell) {\r\n                var row = cell[0], column = cell[1];\r\n                if (column.editMode != \"inline\") {\r\n                    var canEdit = this._OnCellBeginEdit(row, column, this.getCellEditor(column));\r\n\r\n                    //document.title = new Date() - sss;\r\n\r\n                    if (canEdit !== false) {\r\n                        this.scrollIntoView(row, column, false);\r\n                        this._editingCell = cell;\r\n                        this._OnCellShowingEdit(row, column);\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n        this._pushUpdateCallback(beginEdit, this, [row, column]);\r\n    },\r\n    cancelEdit: function () {\r\n\r\n        if (this.allowCellEdit) {\r\n            if (this._editingCell) {\r\n                this._OnCellEndEdit();\r\n            }\r\n        } else {\r\n            if (this.isEditing()) {\r\n                this._allowLayout = false;\r\n                var data = this.getDataView();\r\n                for (var i = 0, l = data.length; i < l; i++) {\r\n                    var row = data[i];\r\n                    if (row._editing == true) this.cancelEditRow(i);\r\n                }\r\n                this._allowLayout = true;\r\n                this.doLayout();\r\n            }\r\n        }\r\n    },\r\n    commitEdit: function () {\r\n\r\n        if (this.allowCellEdit) {\r\n\r\n            if (this._editingCell) {\r\n                this._OnCellCommitEdit(this._editingCell[0], this._editingCell[1]);\r\n\r\n                this._OnCellEndEdit();\r\n            }\r\n        } else {\r\n\r\n            if (this.isEditing()) {\r\n                this._allowLayout = false;\r\n                var data = this.getDataView();\r\n                for (var i = 0, l = data.length; i < l; i++) {\r\n                    var row = data[i];\r\n                    if (row._editing == true) this.commitEditRow(row);\r\n                }\r\n                this._allowLayout = true;\r\n\r\n                this.doLayout();\r\n            }\r\n        }\r\n    },\r\n\r\n    getCellEditor: function (column, row) {\r\n\r\n        column = this.getColumn(column);\r\n        if (!column) return;\r\n        if (this.allowCellEdit) {\r\n\r\n            var editor = column.__editor;\r\n\r\n            if (!editor) editor = mini.getAndCreate(column.editor);\r\n            if (editor && editor != column.editor) {\r\n                column.editor = editor;\r\n            }\r\n            return editor;\r\n        } else {\r\n            row = this.getRow(row);\r\n            column = this.getColumn(column);\r\n            if (!row) row = this.getEditingRow();\r\n            if (!row || !column) return null;\r\n            var id = this.uid + \"$\" + row._uid + \"$\" + column._id + \"$editor\";\r\n            return mini.get(id);\r\n        }\r\n    },\r\n\r\n    _OnCellBeginEdit: function (record, column, editor, initEditor) {\r\n\r\n        var value = mini._getMap(column.field, record);\r\n        var e = {\r\n            sender: this,\r\n            rowIndex: this.indexOf(record),\r\n            row: record,\r\n            record: record,\r\n            column: column,\r\n            field: column.field,\r\n            editor: editor,\r\n            value: value,\r\n            cancel: false\r\n        };\r\n\r\n        this.fire(\"cellbeginedit\", e);\r\n\r\n        if (!mini.isNull(column.defaultValue) && (mini.isNull(e.value) || e.value === \"\")) {\r\n            var defaultValue = column.defaultValue;\r\n            //            try {\r\n            //                \r\n            //                defaultValue = eval('('+defaultValue+')');\r\n            //            } catch (ex) { debugger}\r\n            var obj = mini.clone({ d: defaultValue });\r\n            e.value = obj.d;\r\n        }\r\n\r\n        var editor = e.editor;\r\n        value = e.value;\r\n\r\n        if (e.cancel) {\r\n            return false;\r\n        }\r\n        //if (!editor) return false;\r\n        //column.editor = editor;   //!!!不能加\r\n\r\n        if (!editor && column.editMode != \"inline\") return false;\r\n        if (column.readOnly === true) return false;\r\n\r\n        if (initEditor === false) return true;\r\n\r\n        //        if (column.editMode != \"inline\") {\r\n        //                    var canEdit = this.isCellCanEdit(row, column);\r\n\r\n        if (column.editMode != \"inline\") {\r\n            //value, text初始化\r\n            if (mini.isNull(value)) value = \"\";\r\n            if (editor.setValue) {\r\n                editor.setValue(value);\r\n            }\r\n            editor.ownerRowID = record._uid;\r\n\r\n            if (column.displayField && editor.setText) {\r\n                //var text = record[column.displayField];\r\n                var text = mini._getMap(column.displayField, record);\r\n\r\n                if (!mini.isNull(column.defaultText) && (mini.isNull(text) || text === \"\")) {\r\n                    var obj = mini.clone({ d: column.defaultText });\r\n                    text = obj.d;\r\n                }\r\n\r\n                editor.setText(text);\r\n            }\r\n\r\n            if (this.allowCellEdit) {\r\n                this._editingControl = e.editor;\r\n            }\r\n\r\n        }\r\n\r\n        return true;\r\n    },\r\n    _OnCellCommitEdit: function (record, column, value, editor) {\r\n\r\n        var e = {\r\n            sender: this,\r\n            rowIndex: this.indexOf(record),\r\n            record: record,\r\n            row: record,\r\n            column: column,\r\n            field: column.field,\r\n            editor: editor ? editor : this.getCellEditor(column),\r\n            value: mini.isNull(value) ? \"\" : value,\r\n            text: \"\",\r\n            cancel: false\r\n        };\r\n\r\n        if (e.editor && e.editor.getValue) {\r\n            try {\r\n                e.editor.blur();\r\n            } catch (ex) {\r\n\r\n            }\r\n            e.value = e.editor.getValue();\r\n\r\n            //alert(e.value);\r\n        }\r\n        if (e.editor && e.editor.getText) {\r\n            e.text = e.editor.getText();\r\n        }\r\n\r\n        //document.title = e.value + \":\" + e.text + \":\" + new Date().getTime();\r\n\r\n        //        this.updateRow(record, { NodeId: 1, NodeName: \"aaa\" });\r\n        //        return;\r\n\r\n        var oldValue = mini._getMap(column.field, record), newValue = e.value;\r\n        e.oldValue = oldValue;\r\n        if (mini.isEquals(oldValue, newValue)) return e;\r\n\r\n        this.fire(\"cellcommitedit\", e);\r\n\r\n        if (e.cancel == false) {\r\n\r\n            if (this.allowCellEdit) {\r\n                var o = {};\r\n                o[column.field] = e.value;\r\n                //mini._setMap(column.field, e.value, o);\r\n                if (column.displayField) {\r\n                    o[column.displayField] = e.text;\r\n                    //mini._setMap(column.displayField, e.text, o);\r\n                }\r\n                this.updateRow(record, o);\r\n            }\r\n        }\r\n        return e;\r\n    },\r\n    _OnCellEndEdit: function (record, column) {\r\n        if (!this._editingCell && !record) return;\r\n        if (!record) record = this._editingCell[0];\r\n        if (!column) column = this._editingCell[1];\r\n        var value = mini._getMap(column.field, record);\r\n        var e = {\r\n            sender: this,\r\n            rowIndex: this.indexOf(record),\r\n            record: record,\r\n            row: record,\r\n            column: column,\r\n            field: column.field,\r\n            editor: this._editingControl,\r\n            //value: record[column.field]\r\n            value: value\r\n        };\r\n\r\n        this.fire(\"cellendedit\", e);\r\n        //return;\r\n        if (this.allowCellEdit && e.editor) {\r\n            var editor = e.editor;\r\n            if (editor && editor.setIsValid) {\r\n\r\n                editor.setIsValid(true);\r\n            }\r\n\r\n            if (this._editWrap) this._editWrap.style.display = 'none';\r\n            var childNodes = this._editWrap.childNodes;\r\n            for (var i = childNodes.length - 1; i >= 0; i--) {\r\n                var el = childNodes[i];\r\n                this._editWrap.removeChild(el);\r\n            }\r\n\r\n\r\n            if (editor && editor.hidePopup) {\r\n                editor.hidePopup();\r\n            }\r\n            if (editor && editor.setValue) {\r\n                editor.setValue(\"\");\r\n            }\r\n\r\n            this._editingControl = null;\r\n            this._editingCell = null;\r\n\r\n            if (this.allowCellValid) {\r\n                this.validateCell(record, column);\r\n                //this.validateRow(record);\r\n            }\r\n        }\r\n    },\r\n    _OnCellShowingEdit: function (record, column) {\r\n        if (!this._editingControl) return false;\r\n\r\n\r\n        var cellBox = this.getCellBox(record, column);\r\n\r\n        if (cellBox) {\r\n            var viewWidth = document.body.scrollWidth; //mini.getViewportBox().width;\r\n            if (cellBox.right > viewWidth) {\r\n\r\n                cellBox.width = viewWidth - cellBox.left;\r\n                if (cellBox.width < 10) cellBox.width = 10;\r\n                cellBox.right = cellBox.left + cellBox.width;\r\n            }\r\n        }\r\n\r\n        var e = {\r\n            sender: this,\r\n            rowIndex: this.indexOf(record),\r\n            record: record,\r\n            row: record,\r\n            column: column,\r\n            field: column.field,\r\n            cellBox: cellBox,\r\n            editor: this._editingControl\r\n        };\r\n\r\n        this.fire(\"cellshowingedit\", e);\r\n\r\n        var editor = e.editor;\r\n        if (editor && editor.setIsValid) {\r\n\r\n            editor.setIsValid(true);\r\n        }\r\n\r\n        if (cellBox) {\r\n            var editWrap = this._getEditWrap(editor);\r\n            this._editWrap.style.zIndex = mini.getMaxZIndex();\r\n\r\n\r\n\r\n\r\n            //        if (editor.setWidth) {\r\n            //            var width = cellBox.width;\r\n            //            if (width < 20) width = 20;\r\n            //            editor.setWidth(width);\r\n            //        }\r\n\r\n            //        if (editor.setHeight && editor.type == \"textarea\") {\r\n            //            var height = cellBox.height - 1;\r\n            //            if (editor.minHeight && height < editor.minHeight) height = editor.minHeight;\r\n            //            editor.setHeight(height);\r\n            //        }\r\n            //        if (editor.setWidth) {\r\n            //            var width = cellBox.width - 1;\r\n            //            if (editor.minWidth && width < editor.minWidth) width = editor.minWidth;\r\n            //            editor.setWidth(width);\r\n            //        }\r\n\r\n            this._setEditorBox(editor, cellBox);\r\n\r\n            mini.on(document, 'mousedown', this.__OnBodyMouseDown, this);\r\n\r\n            if (column.autoShowPopup && editor.showPopup) {\r\n\r\n                editor.showPopup();\r\n            }\r\n\r\n        }\r\n\r\n\r\n        //navEditMode\r\n        if (editor) {\r\n            if (this.navEditMode) {\r\n                editor.keyNavEnabled = !(column.navUpdown !== false);\r\n            }\r\n            //editor.keyNavEnabled = !this.navEditMode && column.navUpdown === false;\r\n        }\r\n\r\n        //alert(editor.keyNavEnabled);\r\n\r\n    },\r\n    _getEditingControl: function () {\r\n        return this._editingControl;\r\n    },\r\n    _setEditorBox: function (editor, cellBox) {\r\n        if (editor.setWidth) {\r\n            var width = cellBox.width;\r\n            if (width < 20) width = 20;\r\n            editor.setWidth(width);\r\n        }\r\n\r\n        if (editor.setHeight && editor.type == \"textarea\") {\r\n            var height = cellBox.height - 1;\r\n            if (editor.minHeight && height < editor.minHeight) height = editor.minHeight;\r\n            editor.setHeight(height);\r\n        }\r\n        if (editor.setWidth) {\r\n            var width = cellBox.width - 1;\r\n            if (editor.minWidth && width < editor.minWidth) width = editor.minWidth;\r\n            editor.setWidth(width);\r\n        }\r\n\r\n        /////////////////////////////////////////////////////////////////////////\r\n        var box = cellBox;\r\n        var editorHeight = editor.getHeight();\r\n\r\n        var y = box.y;\r\n        //if (editor.type != \"textarea\") {\r\n\r\n        if (editorHeight < box.height - 2) {\r\n            y = Math.round(box.y + box.height / 2 - editorHeight / 2);\r\n            //y = parseInt(box.y + box.height / 2 - editorHeight / 2);\r\n\r\n        }\r\n\r\n\r\n\r\n        mini.setXY(this._editWrap, box.x, y);\r\n        mini.setWidth(this._editWrap, box.width);\r\n\r\n        var viewWidth = document.body.scrollWidth; //mini.getViewportBox().width;\r\n        if (box.x > viewWidth) mini.setX(this._editWrap, -1000);\r\n    },\r\n    __OnBodyMouseDown: function (e) {\r\n        if (this._editingControl) {\r\n\r\n            var cell = this._getCellByEvent(e);\r\n\r\n            if (this._editingCell && cell) {\r\n                if (this._editingCell[0] == cell.record && this._editingCell[1] == cell.column) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            var within = false;\r\n            if (this._editingControl.within) within = this._editingControl.within(e);\r\n            else within = mini.isAncestor(this._editWrap, e.target);\r\n\r\n            if (within == false) {\r\n                var me = this;\r\n                if (mini.isAncestor(this._bodyEl, e.target) == false) {\r\n                    setTimeout(function () {\r\n\r\n                        me.commitEdit();\r\n\r\n                    }, 1);\r\n                } else {\r\n\r\n                    var cell1 = me._editingCell;\r\n                    setTimeout(function () {\r\n                        var cell2 = me._editingCell;\r\n                        if (cell1 == cell2) {\r\n                            me.commitEdit();\r\n                        }\r\n                    }, 70);\r\n                }\r\n                mini.un(document, 'mousedown', this.__OnBodyMouseDown, this);\r\n            }\r\n        }\r\n    },\r\n    getEditWrap: function () {\r\n        return this._editWrap;\r\n    },\r\n    _getEditWrap: function (editor) {\r\n        if (!this._editWrap) {\r\n            this._editWrap = mini.append(this.cellEditorContainer || mini.cellEditorContainer || document.body, '<div class=\"mini-grid-editwrap\" style=\"position:absolute;\"></div>');\r\n            mini.on(this._editWrap, \"keydown\", this.___OnEditControlKeyDown, this);\r\n\r\n            //            mini.on(this._editWrap, \"keydown\", function (event) {\r\n            //                alert(1);\r\n            //            }, this);\r\n        }\r\n        this._editWrap.style.zIndex = 1000000000;    //\r\n        this._editWrap.style.display = 'block';\r\n\r\n        if (editor.render) {\r\n            editor.render(this._editWrap);\r\n            setTimeout(function () {\r\n                editor.focus();\r\n                if (editor.selectText) {\r\n                    setTimeout(function () {\r\n                        editor.selectText();\r\n                    }, 11);\r\n                }\r\n            }, 50);\r\n            if (editor.setVisible) editor.setVisible(true);\r\n        } else if (editor.el) {\r\n            this._editWrap.appendChild(editor.el);\r\n            setTimeout(function () {\r\n                try {\r\n                    editor.el.focus();\r\n                } catch (e) {\r\n                }\r\n            }, 50);\r\n        }\r\n\r\n        //        var editorHeight = editor.getHeight();\r\n\r\n        //        var y = box.y;\r\n        //        //if (editor.type != \"textarea\") {\r\n\r\n        //        if (editorHeight < box.height) {\r\n\r\n        //            y = Math.round(box.y + box.height / 2 - editorHeight / 2);\r\n        //            //y = parseInt(box.y + box.height / 2 - editorHeight / 2);\r\n\r\n        //        }\r\n\r\n\r\n        //        mini.setXY(this._editWrap, box.x, y);\r\n        //        mini.setWidth(this._editWrap, box.width);\r\n\r\n        //        var viewWidth = document.body.scrollWidth; //mini.getViewportBox().width;\r\n        //        if (box.x > viewWidth) mini.setX(this._editWrap, -1000);\r\n\r\n        return this._editWrap;\r\n    },\r\n\r\n    ___OnEditControlKeyDown: function (e) {\r\n\r\n        var editor = this._editingControl;\r\n\r\n\r\n        if (e.keyCode == 13 && editor && editor.type == \"textarea\") {\r\n\r\n            return;\r\n        }\r\n        //        if (e.keyCode == 13 && e.ctrlKey == false && editor && editor.type == \"textarea\") {\r\n        //            return;\r\n        //        }\r\n        //        if (e.keyCode == 38 || e.keyCode == 40) {\r\n        //            e.preventDefault();\r\n        //        }\r\n\r\n        //document.title = 'enter' + new Date().getTime();\r\n\r\n        if (e.keyCode == 13) {      //enter\r\n\r\n            var time = new Date();\r\n            if (this._enterTimestamp && (time - this._enterTimestamp < 80)) return;\r\n            this._enterTimestamp = time;\r\n\r\n            //            document.title = 'enter' + new Date().getTime();\r\n\r\n            var cell = this._editingCell;\r\n            if (cell && cell[1] && cell[1].enterCommit === false) return;\r\n\r\n\r\n            this.commitEdit();\r\n            this.focus();\r\n\r\n            if (this.editNextOnEnterKey) {\r\n                this.fire(\"celleditenter\", { record: cell[0], column: cell[1] })\r\n\r\n                this._beginEditNextCell(e.shiftKey == false);\r\n            } else {\r\n\r\n\r\n            }\r\n        } else if (e.keyCode == 27) {   //esc\r\n\r\n            this.cancelEdit();\r\n\r\n            this.focus();\r\n        } else if (e.keyCode == 9) {    //tab\r\n            this.commitEdit();\r\n            if (this.editOnTabKey) {\r\n                e.preventDefault();\r\n                this.commitEdit();\r\n                this._beginEditNextCell(e.shiftKey == false, true);\r\n            } else {\r\n                //this.cancelEdit();\r\n            }\r\n        }\r\n\r\n        //alert(e.keyCode);\r\n\r\n        if (this.navEditMode) {\r\n\r\n            var cell = this._editingCell;\r\n            if (cell) {\r\n                var column = cell[1];\r\n                if (column && column.navUpdown === false) {\r\n                    if (editor && (e.keyCode == 38 || e.keyCode == 40)) {\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            //\r\n            switch (e.keyCode) {\r\n                case 37:            //left\r\n                    this.focus();\r\n                    e.preventDefault();\r\n                    this.commitEdit();\r\n                    this._beginEditNextCell(e.shiftKey !== false);\r\n                    break;\r\n                case 39:            //right\r\n                    this.focus();\r\n                    this.commitEdit();\r\n                    if (this.editOnTabKey) {\r\n                        e.preventDefault();\r\n                        this.commitEdit();\r\n                        this._beginEditNextCell(e.shiftKey == false, true);\r\n                    } else {\r\n                        //this.cancelEdit();\r\n                    }\r\n                    break;\r\n                case 38:                //up\r\n                    this.focus();\r\n\r\n                    //spinner内会改动值\r\n                    e.preventDefault();\r\n\r\n                    var cell = this._editingCell;\r\n                    this.commitEdit()\r\n                    var record = cell[0];\r\n                    var column = cell[1];\r\n\r\n                    if (record) {\r\n                        var rowIndex = this.indexOf(record);\r\n                        if (rowIndex > 0) rowIndex -= 1;\r\n                    } else {\r\n                        return\r\n                    }\r\n                    var newRecord = this.getRow(rowIndex);\r\n                    var newCell = [newRecord, column];\r\n                    this.setCurrentCell(newCell);\r\n                    this.beginEditCell()\r\n\r\n                    break;\r\n                case 40:            //down\r\n                    this.focus();\r\n                    //                    e.preventDefault();\r\n                    //                    this.commitEdit();\r\n                    //                    this._beginEditNextCell(e.shiftKey == false);\r\n\r\n                    e.preventDefault();\r\n\r\n                    var cell = this._editingCell;\r\n                    this.commitEdit()\r\n                    var record = cell[0];\r\n                    var column = cell[1];\r\n\r\n                    if (record) {\r\n                        var rowIndex = this.indexOf(record);\r\n                        var length = this.getData().length;\r\n                        if (rowIndex < length - 1) rowIndex += 1;\r\n                    } else {\r\n                        return\r\n                    }\r\n                    var newRecord = this.getRow(rowIndex);\r\n                    var newCell = [newRecord, column];\r\n                    this.setCurrentCell(newCell);\r\n                    this.beginEditCell()\r\n\r\n                    break;\r\n            }\r\n        }\r\n    },\r\n\r\n    navEditMode: false,\r\n    setNavEditMode: function (value) {\r\n        this.navEditMode = value;\r\n    },\r\n    getNavEditMode: function () {\r\n        return this.navEditMode;\r\n    },\r\n\r\n    editNextRowCell: false,\r\n    editNextOnEnterKey: false,\r\n    editOnTabKey: true,\r\n    createOnEnter: false,\r\n\r\n    //\r\n    skipReadOnlyCell: false,\r\n    setSkipReadOnlyCell: function (value) {\r\n        this.skipReadOnlyCell = value;\r\n    },\r\n    getSkipReadOnlyCell: function () {\r\n        return this.skipReadOnlyCell;\r\n    },\r\n\r\n    isCellCanEdit: function (row, column) {\r\n        var canEdit = this._OnCellBeginEdit(row, column, this.getCellEditor(column), false);\r\n        return canEdit;\r\n    },\r\n\r\n    _beginEditNextCell: function (next, tab) {\r\n\r\n\r\n        var time = new Date();\r\n        if (this._editTimestamp && (time - this._editTimestamp < 80)) return;\r\n        this._editTimestamp = time;\r\n\r\n        //document.title = new Date().getTime();\r\n\r\n\r\n        var grid = this;\r\n        var currentCell = this.getCurrentCell();\r\n        if (!currentCell) return;\r\n        this.focus();\r\n        var columns = grid.getVisibleColumns();\r\n\r\n        var column = currentCell ? currentCell[1] : null,\r\n            record = currentCell ? currentCell[0] : null;\r\n        //if (!currentCell) record = grid.getCurrent();\r\n\r\n        /////////////////////////////////////\r\n        function getAt(index) {\r\n            return grid.getVisibleRows()[index];\r\n        }\r\n        function indexOf(row) {\r\n            return grid.getVisibleRows().indexOf(row);\r\n        }\r\n        function getCount() {\r\n            return grid.getVisibleRows().length;\r\n        }\r\n\r\n        var columnIndex = columns.indexOf(column);\r\n        var rowIndex = indexOf(record);\r\n        var count = getCount();\r\n\r\n\r\n\r\n        if (next === false) {\r\n            if (this.skipReadOnlyCell) {\r\n                var me = this;\r\n\r\n                var nextColumn = getPrevCanEditCell();\r\n\r\n                function getPrevCanEditCell() {\r\n                    var l = 0;\r\n                    var i = (columnIndex - 1 === 0) ? columns.length : columnIndex - 1;\r\n\r\n                    for (; i > l; i--) {\r\n                        column = columns[i];\r\n\r\n                        var canEdit = me.isCellCanEdit(record, column);\r\n                        if (canEdit) {\r\n                            return column;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!nextColumn || columnIndex == 0) {\r\n                    columnIndex = columns.length;\r\n                    var nextRowColumn = getPrevCanEditCell();\r\n                    setLastRow();\r\n                }\r\n            } else {\r\n                columnIndex -= 1;\r\n                column = columns[columnIndex];\r\n                if (!column) {\r\n                    column = columns[columns.length - 1];\r\n                    setLastRow();\r\n                }\r\n            }\r\n\r\n            function setLastRow() {\r\n                record = getAt(rowIndex - 1);\r\n                if (!record) {\r\n\r\n                    return;\r\n                }\r\n            }\r\n\r\n        } else {\r\n\r\n            if (this.editNextRowCell && !tab) {\r\n                if (rowIndex + 1 < count) {\r\n                    record = getAt(rowIndex + 1);\r\n                }\r\n            } else {\r\n\r\n                function setNextRow() {\r\n                    record = grid.getAt(rowIndex + 1);\r\n                    if (!record) {\r\n                        if (grid.createOnEnter) {\r\n                            record = {};\r\n\r\n                            grid.addRow(record);\r\n                        } else {\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function getNextCanEditCell() {\r\n\r\n                    var i = (columnIndex + 1 == l) ? 0 : (columnIndex + 1);\r\n\r\n                    for (; i < l; i++) {\r\n                        column = columns[i];\r\n\r\n                        var canEdit = me.isCellCanEdit(record, column);\r\n                        if (canEdit) {\r\n                            return column;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (this.skipReadOnlyCell) {\r\n                    var me = this;\r\n                    var l = columns.length;\r\n\r\n                    var nextColumn = getNextCanEditCell();\r\n\r\n                    if (!nextColumn || columnIndex + 1 == l) {\r\n                        columnIndex = 0;\r\n                        var nextRowColumn = getNextCanEditCell();\r\n                        setNextRow();\r\n                    }\r\n                } else {\r\n                    columnIndex += 1;\r\n                    column = columns[columnIndex];\r\n                    if (!column) {\r\n                        column = columns[0];\r\n                        setNextRow();\r\n                    }\r\n                }\r\n\r\n\r\n            }\r\n        }\r\n\r\n\r\n\r\n        //        if (next === false) {\r\n\r\n        //            columnIndex -= 1;\r\n        //            column = columns[columnIndex];\r\n        //            if (!column) {\r\n        //                column = columns[columns.length - 1];\r\n        //                record = getAt(rowIndex - 1);\r\n        //                if (!record) {\r\n\r\n        //                    return;\r\n        //                }\r\n        //            }\r\n        //        } else {\r\n\r\n        //            if (this.editNextRowCell && !tab) {\r\n        //                if (rowIndex + 1 < count) {\r\n        //                    record = getAt(rowIndex + 1);\r\n        //                }\r\n        //            } else {\r\n        //                columnIndex += 1;\r\n        //                column = columns[columnIndex];\r\n        //                if (!column) {\r\n        //                    column = columns[0];\r\n        //                    record = grid.getAt(rowIndex + 1);\r\n        //                    if (!record) {\r\n        //                        if (this.createOnEnter) {\r\n        //                            record = {};\r\n\r\n        //                            this.addRow(record);\r\n        //                        } else {\r\n        //                            return;\r\n        //                        }\r\n        //                    }\r\n        //                }\r\n        //            }\r\n        //        }\r\n\r\n        var currentCell = [record, column];\r\n\r\n        grid.setCurrentCell(currentCell);\r\n\r\n        if (!grid.onlyCheckSelection && grid.allowRowSelect) {\r\n            if (grid.getCurrent() != record) {\r\n                grid.deselectAll();\r\n                grid.setCurrent(record);\r\n            }\r\n        }\r\n\r\n        grid.scrollIntoView(record, column, false);\r\n\r\n        if (grid.isReadOnly() || column.readOnly) return false;\r\n        grid.beginEditCell();\r\n    },\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    // RowEdit\r\n    //////////////////////////////////////////////////////////////////////////////////////////    \r\n    getEditorOwnerRow: function (editor) {\r\n        var uid = editor.ownerRowID;\r\n        return this.getRowByUID(uid);\r\n    },\r\n\r\n    beginEditRow: function (row) {\r\n        if (this.allowCellEdit) return;\r\n\r\n        function beginEdit(row) {\r\n            var sss = new Date();\r\n\r\n            row = this.getRow(row);\r\n            if (!row) return;\r\n            var rowEl = this._getRowEl(row, 2);\r\n            if (!rowEl) return;\r\n\r\n\r\n            //if (!this.multiEdit) this.cancelEdit();\r\n\r\n            row._editing = true;\r\n\r\n            this._doUpdateRowEl(row);\r\n            //        var s = this._createRow(row);\r\n            //        var rowEl = this._getRowEl(row);\r\n            //        jQuery(rowEl).before(s);\r\n            //        rowEl.parentNode.removeChild(rowEl);\r\n\r\n            var rowEl = this._getRowEl(row, 2);\r\n            mini.addClass(rowEl, \"mini-grid-rowEdit\");\r\n\r\n            var columns = this.getVisibleColumns();\r\n            for (var i = 0, l = columns.length; i < l; i++) {\r\n                var column = columns[i];\r\n                var value = row[column.field];\r\n\r\n                //var cellId = this._createCellId(row, columns[i]);\r\n                //var cellEl = document.getElementById(cellId);\r\n                var cellEl = this._getCellEl(row, column);\r\n                if (!cellEl) continue;\r\n\r\n                if (typeof column.editor == \"string\") {\r\n                    column.editor = window[\"ev\" + \"al\"]('(' + column.editor + ')');\r\n                }\r\n\r\n                var editorConfig = mini.copyTo({}, column.editor);\r\n\r\n                editorConfig.id = this.uid + \"$\" + row._uid + \"$\" + column._id + \"$editor\";\r\n                var editor = mini.create(editorConfig);\r\n\r\n                if (this._OnCellBeginEdit(row, column, editor)) {\r\n                    if (editor) {\r\n                        mini.addClass(cellEl, \"mini-grid-cellEdit\");\r\n                        cellEl.innerHTML = \"\";\r\n                        cellEl.appendChild(editor.el);\r\n                        mini.addClass(editor.el, \"mini-grid-editor\");\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.doLayout();\r\n        }\r\n        this._pushUpdateCallback(beginEdit, this, [row]);\r\n        //alert(new Date() - sss);\r\n\r\n    },\r\n    cancelEditRow: function (row) {\r\n        if (this.allowCellEdit) return;\r\n\r\n        row = this.getRow(row);\r\n        if (!row || !row._editing) return;\r\n        delete row._editing;\r\n\r\n        var rowEl = this._getRowEl(row);\r\n\r\n        var columns = this.getVisibleColumns();\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n\r\n            var cellId = this._createCellId(row, columns[i]);\r\n            var cellEl = document.getElementById(cellId);\r\n            if (!cellEl) continue;\r\n\r\n            var editorEl = cellEl.firstChild;\r\n            var editor = mini.get(editorEl);\r\n            if (!editor) continue;\r\n\r\n            editor.destroy();\r\n        }\r\n\r\n        this._doUpdateRowEl(row);\r\n\r\n        this.doLayout();\r\n\r\n    },\r\n    commitEditRow: function (row) {\r\n        if (this.allowCellEdit) return;\r\n\r\n        row = this.getRow(row);\r\n        if (!row || !row._editing) return;\r\n\r\n        var rowData = this.getEditRowData(row, false, false);\r\n\r\n        this._canUpdateRowEl = false;\r\n        this.updateRow(row, rowData);\r\n        this._canUpdateRowEl = true;\r\n\r\n        this.cancelEditRow(row);\r\n    },\r\n    isEditing: function () {\r\n        var data = this.getDataView();\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var row = data[i];\r\n            if (row._editing == true) return true;\r\n        }\r\n        return false;\r\n    },\r\n    isEditingRow: function (row) {\r\n        row = this.getRow(row);\r\n        if (!row) return false;\r\n        return !!row._editing;\r\n    },\r\n    isNewRow: function (row) {\r\n        return row._state == \"added\";\r\n    },\r\n    getEditingRows: function () {\r\n        var rows = [];\r\n        var data = this.getDataView();\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var row = data[i];\r\n            if (row._editing == true) rows.push(row);\r\n        }\r\n        return rows;\r\n    },\r\n    getEditingRow: function () {\r\n        var rows = this.getEditingRows();\r\n        return rows[0];\r\n    },\r\n    //    getEditData: function (all) {\r\n    //        var data = [];\r\n    //        var data = this.getDataView();\r\n    //        for (var i = 0, l = data.length; i < l; i++) {\r\n    //            var row = data[i];\r\n    //            if (row._editing == true) {\r\n    //                var rowData = this.getEditRowData(i, all);\r\n    //                rowData._index = i;\r\n\r\n    //                data.push(rowData);\r\n    //            }\r\n    //        }\r\n    //        return data;\r\n    //    },\r\n    getEditData: function (all) {\r\n        var data = [];\r\n        var dataView = this.getDataView();\r\n        for (var i = 0, l = dataView.length; i < l; i++) {\r\n            var row = dataView[i];\r\n            if (row._editing == true) {\r\n                var rowData = this.getEditRowData(i, all);\r\n                data.push(rowData);\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n    getEditRowData: function (row, all, deep) {\r\n        row = this.getRow(row);\r\n\r\n        if (!row || !row._editing) return null;\r\n\r\n        var idField = this.getIdField();\r\n        var pidField = this.getParentField ? this.getParentField() : null;\r\n\r\n        var rowData = {};\r\n\r\n        var columns = this.getVisibleColumns();\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            var cellId = this._createCellId(row, columns[i]);\r\n            var cellEl = document.getElementById(cellId);\r\n\r\n            if (!cellEl) continue;\r\n\r\n            var e = null;\r\n            if (column.type == \"checkboxcolumn\" || column.type == \"radiobuttoncolumn\") {//checkboxcolumn\r\n\r\n                var checked = column.isChecked(row, column);\r\n                var value = checked ? column.trueValue : column.falseValue;\r\n                e = this._OnCellCommitEdit(row, column, value);\r\n\r\n                //                var ck = column.getCheckBoxEl(row, column);\r\n                //                var value = ck.checked ? column.trueValue : column.falseValue;\r\n                //                e = this._OnCellCommitEdit(row, column, value);\r\n            } else {\r\n                var editorEl = cellEl.firstChild;\r\n                var editor = mini.get(editorEl);\r\n                if (!editor) continue;\r\n                e = this._OnCellCommitEdit(row, column, null, editor);\r\n            }\r\n            if (deep !== false) {\r\n                mini._setMap(column.field, e.value, rowData);\r\n                if (column.displayField) {\r\n                    mini._setMap(column.displayField, e.text, rowData);\r\n                }\r\n            } else {\r\n                rowData[column.field] = e.value;\r\n                if (column.displayField) {\r\n                    rowData[column.displayField] = e.text;\r\n                }\r\n            }\r\n        }\r\n\r\n        rowData[idField] = row[idField];\r\n        if (pidField) {\r\n            rowData[pidField] = row[pidField];\r\n        }\r\n\r\n        if (all) {\r\n            var o = mini.copyTo({}, row);\r\n            rowData = mini.copyTo(o, rowData);\r\n        }\r\n\r\n        return rowData;\r\n    },\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    // RowGroup\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    collapseGroups: function () {\r\n        if (!this.isGrouping()) return;\r\n        this._allowLayout = false;\r\n        var groups = this.getGroupingView();\r\n        for (var i = 0, l = groups.length; i < l; i++) {\r\n            var g = groups[i];\r\n            this.collapseRowGroup(g);\r\n        }\r\n        this._allowLayout = true;\r\n        this.doLayout();\r\n    },\r\n    expandGroups: function () {\r\n        if (!this.isGrouping()) return;\r\n        this._allowLayout = false;\r\n        var groups = this.getGroupingView();\r\n        for (var i = 0, l = groups.length; i < l; i++) {\r\n            var g = groups[i];\r\n            this.expandRowGroup(g);\r\n        }\r\n        this._allowLayout = true;\r\n        this.doLayout();\r\n    },\r\n    toggleRowGroup: function (group) {\r\n        if (group.expanded) {\r\n            this.collapseRowGroup(group);\r\n        } else {\r\n            this.expandRowGroup(group);\r\n        }\r\n    },\r\n    collapseRowGroup: function (group) {\r\n\r\n        group = this.getRowGroup(group);\r\n        if (!group) return;\r\n        group.expanded = false;\r\n\r\n        var g = this._getRowGroupEl(group, 1);\r\n        var rows = this._getRowGroupRowsEl(group, 1);\r\n        var g2 = this._getRowGroupEl(group, 2);\r\n        var rows2 = this._getRowGroupRowsEl(group, 2);\r\n\r\n        if (rows) rows.style.display = \"none\";\r\n        if (rows2) rows2.style.display = \"none\";\r\n\r\n        if (g) mini.addClass(g, \"mini-grid-group-collapse\");\r\n        if (g2) mini.addClass(g2, \"mini-grid-group-collapse\");\r\n        this.doLayout();\r\n    },\r\n    expandRowGroup: function (group) {\r\n        group = this.getRowGroup(group);\r\n        if (!group) return;\r\n        group.expanded = true;\r\n\r\n        var g = this._getRowGroupEl(group, 1);\r\n        var rows = this._getRowGroupRowsEl(group, 1);\r\n        var g2 = this._getRowGroupEl(group, 2);\r\n        var rows2 = this._getRowGroupRowsEl(group, 2);\r\n\r\n        if (rows) rows.style.display = \"\";\r\n        if (rows2) rows2.style.display = \"\";\r\n\r\n        if (g) mini.removeClass(g, \"mini-grid-group-collapse\");\r\n        if (g2) mini.removeClass(g2, \"mini-grid-group-collapse\");\r\n        this.doLayout();\r\n    },\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    // RowDetail\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    showAllRowDetail: function () {\r\n        this._allowLayout = false;\r\n        var data = this.getDataView();\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var row = data[i];\r\n            this.showRowDetail(row);\r\n        }\r\n        this._allowLayout = true;\r\n        this.doLayout();\r\n    },\r\n    hideAllRowDetail: function () {\r\n        this._allowLayout = false;\r\n        var data = this.getDataView();\r\n\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var row = data[i];\r\n            this.hideRowDetail(row);\r\n        }\r\n        this._allowLayout = true;\r\n        this.doLayout();\r\n    },\r\n    isShowRowDetail: function (row) {\r\n        row = typeof row == 'object' ? row : this.getRow(row);\r\n        if (!row) return false;\r\n        return !!row._showDetail;\r\n    },\r\n    toggleRowDetail: function (row) {\r\n        row = this.getRow(row);\r\n        if (!row) return;\r\n        if (grid.isShowRowDetail(row)) {\r\n            grid.hideRowDetail(row);\r\n        } else {\r\n            grid.showRowDetail(row);\r\n        }\r\n    },\r\n    showRowDetail: function (row) {\r\n        row = this.getRow(row);\r\n        if (!row || row._showDetail == true) return;\r\n        row._showDetail = true;\r\n\r\n\r\n        var tr = this._getRowDetailEl(row, 1, true);\r\n        var tr2 = this._getRowDetailEl(row, 2, true);\r\n        if (tr) tr.style.display = \"\";\r\n        if (tr2) tr2.style.display = \"\";\r\n\r\n        var rowEl = this._getRowEl(row, 1);\r\n        var rowEl2 = this._getRowEl(row, 2);\r\n        if (rowEl) mini.addClass(rowEl, \"mini-grid-expandRow\");\r\n        if (rowEl2) mini.addClass(rowEl2, \"mini-grid-expandRow\");\r\n\r\n\r\n\r\n\r\n        this.fire(\"showrowdetail\", { record: row });\r\n\r\n        var self = this;\r\n        if (this.isFrozen()) {\r\n            setTimeout(function () {\r\n                self.syncRowDetail(row);\r\n            }, 1);\r\n            //            setTimeout(function () {\r\n            //                self.syncRowDetail(row);\r\n            //            }, 100);\r\n        }\r\n\r\n        this.doLayout();\r\n    },\r\n    hideRowDetail: function (row) {\r\n        row = this.getRow(row);\r\n        if (!row || row._showDetail !== true) return;\r\n        row._showDetail = false;\r\n\r\n        var tr = this._getRowDetailEl(row, 1);\r\n        var tr2 = this._getRowDetailEl(row, 2);\r\n        if (tr) tr.style.display = \"none\";\r\n        if (tr2) tr2.style.display = \"none\";\r\n\r\n        var rowEl = this._getRowEl(row, 1);\r\n        var rowEl2 = this._getRowEl(row, 2);\r\n        if (rowEl) mini.removeClass(rowEl, \"mini-grid-expandRow\");\r\n        if (rowEl2) mini.removeClass(rowEl2, \"mini-grid-expandRow\");\r\n\r\n        this.fire(\"hiderowdetail\", { record: row });\r\n\r\n        this.doLayout();\r\n    },\r\n    _getRowDetailEl: function (row, viewIndex, autoCreate) {\r\n        row = this.getRow(row);\r\n        if (!row) return null;\r\n        var id = this._createRowDetailId(row, viewIndex);\r\n        var el = document.getElementById(id);\r\n        if (!el && autoCreate === true) {\r\n            el = this._createRowDetail(row, viewIndex);\r\n        }\r\n        return el;\r\n    },\r\n    _createRowDetail: function (row, viewIndex) {\r\n        var columns1 = this.getFrozenColumns();\r\n        var columns2 = this.getUnFrozenColumns();\r\n        var colspan = columns1.length;\r\n        if (viewIndex == 2) {\r\n            colspan = columns2.length;\r\n        }\r\n        var el = this._getRowEl(row, viewIndex);\r\n        if (!el) return null;\r\n        var id = this._createRowDetailId(row, viewIndex);\r\n        //var s = '<tr id=\"' + id + '\" class=\"mini-grid-detailRow\"><td class=\"mini-grid-detailCell\" colspan=\"' + colspan + '\"></td></tr>';\r\n        var s = '<tr id=\"' + id + '\" class=\"mini-grid-detailRow\"><td style=\"width:0\"></td><td class=\"mini-grid-detailCell\" colspan=\"' + colspan + '\"></td></tr>';\r\n        jQuery(el).after(s);\r\n        return document.getElementById(id);\r\n    },\r\n    _createRowDetailId: function (row, viewIndex) {\r\n        return this._id + \"$detail\" + viewIndex + \"$\" + row._id;\r\n    },\r\n    getRowDetailCellEl: function (row, viewIndex) {\r\n        if (!viewIndex) viewIndex = 2;\r\n        var el = this._getRowDetailEl(row, viewIndex);\r\n        if (el) return el.cells[1];\r\n    },\r\n    autoHideRowDetail: true,\r\n    setAutoHideRowDetail: function (value) {\r\n        this.autoHideRowDetail = value;\r\n    },\r\n    getAutoHideRowDetail: function () {\r\n        return this.autoHideRowDetail;\r\n    },\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    // MergerCell\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    mergeColumns: function (columns) {\r\n\r\n        if (columns && mini.isArray(columns) == false) columns = [columns];\r\n        //自动合并值相同的单元格：行合并\r\n        var grid = this;\r\n        var bottomColumns = grid.getVisibleColumns();\r\n        if (!columns) columns = bottomColumns;\r\n        var data = grid.getDataView();\r\n        data.push({});\r\n\r\n        var __cells = [];\r\n\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            column = grid.getColumn(column);\r\n            if (!column) continue;\r\n            var cells = margeCells(column);\r\n            __cells.addRange(cells);\r\n        }\r\n\r\n        function margeCells(column) {\r\n            if (!column.field) return;\r\n            var cells = [];\r\n            var rowIndex = -1, rowSpan = 1, columnIndex = bottomColumns.indexOf(column);\r\n            var cellValue = null;\r\n            for (var i = 0, l = data.length; i < l; i++) {\r\n                var row = data[i];\r\n                //var value = row[column.field];\r\n                var value = mini._getMap(column.field, row);\r\n                //if (rowIndex == -1 || value != cellValue) {\r\n                if (rowIndex == -1 || !mini.isEquals(value, cellValue)) {\r\n                    if (rowSpan > 1) {\r\n                        var cell = { rowIndex: rowIndex, columnIndex: columnIndex, rowSpan: rowSpan, colSpan: 1 };\r\n                        cells.push(cell);\r\n                    }\r\n                    rowIndex = i;\r\n                    rowSpan = 1;\r\n                    cellValue = value;\r\n                } else {\r\n                    rowSpan++;\r\n                }\r\n            }\r\n            return cells;\r\n        }\r\n\r\n        grid.mergeCells(__cells);\r\n    },\r\n    mergeCells: function (cells) {\r\n        if (!mini.isArray(cells)) return;\r\n        this._mergedCells = cells;\r\n        //maps\r\n        var _mergedCellMaps = this._mergedCellMaps = {};\r\n\r\n        function doMargedCellMaps(rowIndex, columnIndex, rowSpan, colSpan, cell) {\r\n            for (var i = rowIndex, l = rowIndex + rowSpan; i < l; i++) {\r\n                for (var j = columnIndex, k = columnIndex + colSpan; j < k; j++) {\r\n                    if (i == rowIndex && j == columnIndex) {\r\n                        _mergedCellMaps[i + \":\" + j] = cell;\r\n                    } else {\r\n                        _mergedCellMaps[i + \":\" + j] = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var cells = this._mergedCells;\r\n        if (cells) {\r\n            for (var i = 0, l = cells.length; i < l; i++) {\r\n                var cell = cells[i];\r\n                if (!cell.rowSpan) cell.rowSpan = 1;\r\n                if (!cell.colSpan) cell.colSpan = 1;\r\n                doMargedCellMaps(cell.rowIndex, cell.columnIndex, cell.rowSpan, cell.colSpan, cell);\r\n            }\r\n        }\r\n\r\n        //this.deferUpdate();\r\n        this.doUpdate();\r\n    },\r\n    margeCells: function (cells) {\r\n        this.mergeCells(cells);\r\n    },\r\n    _isCellVisible: function (rowIndex, columnIndex) {\r\n        if (!this._mergedCellMaps) return true;\r\n        var ret = this._mergedCellMaps[rowIndex + \":\" + columnIndex];\r\n        return !(ret === true);\r\n    },\r\n    _getAnchorCell: function (row, column) {\r\n        if (!this._mergedCellMaps) return null;\r\n        var rowIndex = this.indexOf(row), columnIndex = this.getBottomColumns().indexOf(column);\r\n        return this._mergedCellMaps[rowIndex + \":\" + columnIndex];\r\n    },\r\n\r\n    //    _doMargeCells: function () {\r\n    //        function _doMargeCells() {\r\n    //            var cells = this._mergedCells;\r\n    //            if (!cells) return;\r\n    //            for (var i = 0, l = cells.length; i < l; i++) {\r\n    //                var cell = cells[i];\r\n    //                if (!cell.rowSpan) cell.rowSpan = 1;\r\n    //                if (!cell.colSpan) cell.colSpan = 1;\r\n    //                var cellEls = this._getCellEls(cell.rowIndex, cell.columnIndex, cell.rowSpan, cell.colSpan);\r\n    //                for (var j = 0, k = cellEls.length; j < k; j++) {\r\n    //                    var el = cellEls[j];\r\n    //                    if (j != 0) {\r\n    //                        el.style.display = \"none\";\r\n    //                    } else {\r\n    //                        el.rowSpan = cell.rowSpan;\r\n    //                        el.colSpan = cell.colSpan;\r\n    //                    }\r\n    //                }\r\n    //            }\r\n    //        }\r\n    //        //if (mini.isIE8) {\r\n    //        _doMargeCells.call(this);\r\n    //        //        } else {\r\n    //        //            var me = this;\r\n    //        //            if (this._doMargeCellsTimer) return;\r\n    //        //            this._doMargeCellsTimer = setTimeout(function () {\r\n    //        //                _doMargeCells.call(me);\r\n    //        //                me._doMargeCellsTimer = null;\r\n    //        //            }, 1);\r\n    //        //        }\r\n    //    },\r\n    _getCellEls: function (rowIndex, columnIndex, rowSpan, colSpan) {\r\n        var cells = [];\r\n        if (!mini.isNumber(rowIndex)) return [];\r\n        if (!mini.isNumber(columnIndex)) return [];\r\n        var columns = this.getVisibleColumns();\r\n        var data = this.getDataView();\r\n\r\n        for (var i = rowIndex, l = rowIndex + rowSpan; i < l; i++) {\r\n            for (var j = columnIndex, k = columnIndex + colSpan; j < k; j++) {\r\n                var cell = this._getCellEl(i, j);\r\n                if (cell) cells.push(cell);\r\n            }\r\n        }\r\n        return cells;\r\n    },\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    // Row DragDrop\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    _getDragData: function () {\r\n        var data = this.getSelecteds().clone();\r\n        var grid = this;\r\n\r\n\r\n        //if (data.length == 2) debugger\r\n        mini.sort(data, function (a, b) {\r\n            var index1 = grid.indexOf(a);\r\n            var index2 = grid.indexOf(b);\r\n            if (index1 > index2) return 1;\r\n            if (index1 < index2) return -1;\r\n            return 0;\r\n        }, this);\r\n        //if(data.length == 2) alert(data[0].Name + \":\" + data[1].Name);\r\n        return data;\r\n    },\r\n    _getDragText: function (dragNodes) {\r\n        return \"Records \" + dragNodes.length;\r\n    },\r\n    allowDrag: false,\r\n    allowDrop: false,\r\n    allowLeafDropIn: false,\r\n    setAllowLeafDropIn: function (value) {\r\n        this.allowLeafDropIn = value;\r\n    },\r\n    getAllowLeafDropIn: function () {\r\n        return this.allowLeafDropIn;\r\n    },\r\n    setAllowDrag: function (value) {\r\n        this.allowDrag = value;\r\n    },\r\n    getAllowDrag: function () {\r\n        return this.allowDrag;\r\n    },\r\n    setAllowDrop: function (value) {\r\n        this.allowDrop = value;\r\n    },\r\n    getAllowDrop: function () {\r\n        return this.allowDrop;\r\n    },\r\n    isAllowDrag: function (node, column) {\r\n\r\n        if (this.isReadOnly() || this.enabled == false) return false;\r\n        if (!this.allowDrag || !column.allowDrag) return false;\r\n        if (node.allowDrag === false) return false;\r\n        return true;\r\n        //        var e = this._OnDragStart(node, column);\r\n        //        return !e.cancel;\r\n    },\r\n    _OnDragStart: function (node, column) {\r\n        var e = {\r\n            node: node,\r\n            nodes: this._getDragData(),\r\n            column: column,\r\n            cancel: false\r\n        };\r\n        e.record = e.node;\r\n        e.records = e.nodes;\r\n        e.dragText = this._getDragText(e.nodes);\r\n\r\n        this.fire(\"dragstart\", e);\r\n        return e;\r\n    },\r\n    _OnGiveFeedback: function (effect, dragNodes, dropNode, from) {\r\n        var e = {};\r\n        e.from = from;\r\n\r\n        e.effect = effect;\r\n        e.nodes = dragNodes;\r\n        e.node = e.nodes[0];\r\n        e.targetNode = dropNode;\r\n\r\n        e.dragNodes = dragNodes;\r\n        e.dragNode = e.dragNodes[0];\r\n        e.dropNode = e.targetNode;\r\n        e.dragAction = e.action;\r\n\r\n        this.fire(\"givefeedback\", e);\r\n        return e;\r\n    },\r\n    _OnDragDrop: function (dragNodes, dropNode, dragAction) {\r\n        dragNodes = dragNodes.clone();\r\n        var e = {\r\n            dragNodes: dragNodes,\r\n            targetNode: dropNode,\r\n            action: dragAction,\r\n            cancel: false\r\n        };\r\n\r\n        e.dragNode = e.dragNodes[0];\r\n        e.dropNode = e.targetNode;\r\n        e.dragAction = e.action;\r\n\r\n        this.fire(\"beforedrop\", e);\r\n        this.fire(\"dragdrop\", e);\r\n        return e;\r\n    },\r\n    ////////////////////////////\r\n    moveUp: function (items) {\r\n        if (!mini.isArray(items)) return;\r\n        //按序号，从小到大\r\n        var me = this;\r\n        items = items.sort(function (a, b) {\r\n            var i1 = me.indexOf(a);\r\n            var i2 = me.indexOf(b);\r\n            if (i1 > i2) return 1;\r\n            return -1;\r\n        });\r\n        for (var i = 0, l = items.length; i < l; i++) {\r\n            var item = items[i];\r\n            var index = this.indexOf(item);\r\n            this.moveRow(item, index - 1);\r\n        }\r\n    },\r\n    moveDown: function (items) {\r\n        if (!mini.isArray(items)) return;\r\n        //按序号，从大到小\r\n        var me = this;\r\n        items = items.sort(function (a, b) {\r\n            var i1 = me.indexOf(a);\r\n            var i2 = me.indexOf(b);\r\n            if (i1 > i2) return 1;\r\n            return -1;\r\n        });\r\n        items.reverse();\r\n        for (var i = 0, l = items.length; i < l; i++) {\r\n            var item = items[i];\r\n            var index = this.indexOf(item);\r\n            this.moveRow(item, index + 2);\r\n        }\r\n    },\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    // Load Sort Pager\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    pageSize: 20,\r\n    pageIndex: 0,\r\n    totalCount: 0,\r\n    totalPage: 0,\r\n\r\n    sortField: \"\",\r\n    sortOrder: \"\",\r\n    url: \"\",\r\n\r\n    setAjaxAsync: function (value) {\r\n        this._dataSource.ajaxAsync = value;\r\n        this.ajaxAsync = value;\r\n    },\r\n    getAjaxAsync: function () {\r\n        return this._dataSource.ajaxAsync;\r\n    },\r\n    setAjaxMethod: function (value) {\r\n        this._dataSource.ajaxMethod = value;\r\n        this.ajaxMethod = value;\r\n    },\r\n    getAjaxMethod: function () {\r\n        return this._dataSource.ajaxMethod;\r\n    },\r\n    setAjaxType: function (value) {\r\n        this._dataSource.ajaxType = value;\r\n        this.ajaxType = value;\r\n    },\r\n    getAjaxType: function () {\r\n        return this._dataSource.ajaxType;\r\n    },\r\n    setAjaxOptions: function (value) {\r\n        this._dataSource.setAjaxOptions(value);\r\n    },\r\n    getAjaxOptions: function () {\r\n        return this._dataSource.getAjaxOptions();\r\n    },\r\n    setAutoLoad: function (value) {\r\n        this._dataSource.setAutoLoad(value);\r\n    },\r\n    getAutoLoad: function () {\r\n        return this._dataSource.getAutoLoad();\r\n    },\r\n    setUrl: function (value) {\r\n        this._dataSource.setUrl(value);\r\n        this.url = value;\r\n    },\r\n    getUrl: function () {\r\n        return this._dataSource.getUrl();\r\n    },\r\n    load: function (params, success, error, complete) {\r\n        this._dataSource.load(params, success, error, complete);\r\n    },\r\n    reload: function (success, error, complete) {\r\n        this.accept();\r\n        this._dataSource.reload(success, error, complete);\r\n    },\r\n    gotoPage: function (index, size) {\r\n        this._dataSource.gotoPage(index, size);\r\n    },\r\n    sortBy: function (sortField, sortOrder) {\r\n        if (!sortField) return null;\r\n        var source = this._dataSource;\r\n        this.sortField = source.sortField = sortField;\r\n        this.sortOrder = source.sortOrder = sortOrder;\r\n\r\n        if (this._dataSource.sortMode == \"server\") {\r\n            this._dataSource.sortBy(sortField, sortOrder);\r\n        } else {\r\n            var dataType = this._columnModel._getDataTypeByField(sortField);\r\n            this._dataSource._doClientSortField(sortField, sortOrder, dataType);\r\n        }\r\n    },\r\n\r\n    sortDblClick: false,\r\n    setSortDblClick: function (value) {\r\n        this.sortDblClick = value\r\n    },\r\n    getSortDblClick: function () {\r\n        return this.sortDblClick;\r\n    },\r\n\r\n    showCellTip: true,\r\n\r\n    setShowCellTip: function (value) {\r\n        this.showCellTip = value\r\n    },\r\n    getShowCellTip: function () {\r\n        return this.showCellTip;\r\n    },\r\n\r\n    setCheckSelectOnLoad: function (value) {\r\n        this._dataSource.setCheckSelectOnLoad(value);\r\n        this.checkSelectOnLoad = value;\r\n    },\r\n    getCheckSelectOnLoad: function () {\r\n        return this._dataSource.getCheckSelectOnLoad();\r\n    },\r\n    setSelectOnLoad: function (value) {\r\n        this._dataSource.setSelectOnLoad(value);\r\n        this.selectOnLoad = value;\r\n    },\r\n    getSelectOnLoad: function () {\r\n        return this._dataSource.getSelectOnLoad();\r\n    },\r\n\r\n    allowCancelSort: false,\r\n    setAllowCancelSort: function (value) {\r\n        this.allowCancelSort = value;\r\n    },\r\n    getAllowCancelSort: function () {\r\n        return this.allowCancelSort;\r\n    },\r\n\r\n    setSortMode: function (value) {\r\n        this._dataSource.setSortMode(value);\r\n        this.sortMode = value;\r\n    },\r\n    getSortMode: function () {\r\n        return this._dataSource.getSortMode();\r\n    },\r\n    setPageIndex: function (value) {\r\n        this._dataSource.setPageIndex(value);\r\n        this.pageIndex = value;\r\n    },\r\n    getPageIndex: function () {\r\n        return this._dataSource.getPageIndex();\r\n    },\r\n    setPageSize: function (value) {\r\n        this._dataSource.setPageSize(value);\r\n        this._virtualRows = value;\r\n        this.pageSize = value;\r\n    },\r\n    getPageSize: function () {\r\n        return this._dataSource.getPageSize();\r\n    },\r\n    setTotalCount: function (value) {\r\n        this._dataSource.setTotalCount(value);\r\n        this.totalCount = value;\r\n    },\r\n    getTotalCount: function () {\r\n        return this._dataSource.getTotalCount();\r\n    },\r\n    getTotalPage: function () {\r\n        return this._dataSource.getTotalPage();\r\n    },\r\n\r\n    setSortField: function (value) {\r\n        this._dataSource.setSortField(value);\r\n        this.sortField = value;\r\n    },\r\n    getSortField: function () {\r\n        return this._dataSource.sortField;\r\n    },\r\n    setSortOrder: function (value) {\r\n        this._dataSource.setSortOrder(value);\r\n        this.sortOrder = value;\r\n    },\r\n    getSortOrder: function () {\r\n        return this._dataSource.sortOrder;\r\n    },\r\n\r\n    setPageIndexField: function (value) {\r\n        this._dataSource.pageIndexField = value;\r\n        this.pageIndexField = value;\r\n    },\r\n    getPageIndexField: function () {\r\n        return this._dataSource.pageIndexField;\r\n    },\r\n    setPageSizeField: function (value) {\r\n        this._dataSource.pageSizeField = value;\r\n        this.pageSizeField = value;\r\n    },\r\n    getPageSizeField: function () {\r\n        return this._dataSource.pageSizeField;\r\n    },\r\n\r\n    setStartField: function (value) {\r\n        this._dataSource.startField = value;\r\n        this.startField = value;\r\n    },\r\n    getStartField: function () {\r\n        return this._dataSource.startField;\r\n    },\r\n    setLimitField: function (value) {\r\n        this._dataSource.limitField = value;\r\n        this.limitField = value;\r\n    },\r\n    getLimitField: function () {\r\n        return this._dataSource.limitField;\r\n    },\r\n\r\n    setSortFieldField: function (value) {\r\n        this._dataSource.sortFieldField = value;\r\n        this.sortFieldField = value;\r\n    },\r\n    getSortFieldField: function () {\r\n        return this._dataSource.sortFieldField;\r\n    },\r\n    setSortOrderField: function (value) {\r\n        this._dataSource.sortOrderField = value;\r\n        this.sortOrderField = value;\r\n    },\r\n    getSortOrderField: function () {\r\n        return this._dataSource.sortOrderField;\r\n    },\r\n    setTotalField: function (value) {\r\n        this._dataSource.totalField = value;\r\n        this.totalField = value;\r\n    },\r\n    getTotalField: function () {\r\n        return this._dataSource.totalField;\r\n    },\r\n    setDataField: function (value) {\r\n        this._dataSource.dataField = value;\r\n        this.dataField = value;\r\n    },\r\n    getDataField: function () {\r\n        return this._dataSource.dataField;\r\n    },\r\n\r\n    setErrorField: function (value) {\r\n        this._dataSource.errorField = value;\r\n        this.errorField = value;\r\n    },\r\n    getErrorField: function () {\r\n        return this._dataSource.errorField;\r\n    },\r\n    setErrorMsgField: function (value) {\r\n        this._dataSource.errorMsgField = value;\r\n        this.errorMsgField = value;\r\n    },\r\n    getErrorMsgField: function () {\r\n        return this._dataSource.errorMsgField;\r\n    },\r\n    setStackTraceField: function (value) {\r\n        this._dataSource.stackTraceField = value;\r\n        this.stackTraceField = value;\r\n    },\r\n    getStackTraceField: function () {\r\n        return this._dataSource.stackTraceField;\r\n    },\r\n\r\n    setPageSizeWidth: function (value) {\r\n        this._bottomPager.setPageSizeWidth(value);\r\n    },\r\n    getPageSizeWidth: function () {\r\n        return this._bottomPager.getPageSizeWidth();\r\n    },\r\n\r\n    getBottomPager: function () {\r\n        return this._bottomPager;\r\n    },\r\n\r\n    sizeText: \"\",\r\n    setSizeText: function (value) {\r\n        this._bottomPager.sizeText = value;\r\n    },\r\n    getSizeText: function () {\r\n        return this.sizeText;\r\n    },\r\n\r\n    showPagerButtonText: false,\r\n    setShowPagerButtonText: function (value) {\r\n        this._bottomPager.setShowButtonText(value);\r\n    },\r\n    getShowPagerButtonText: function () {\r\n        return this.showPagerButtonText;\r\n    },\r\n    showPagerButtonIcon: false,\r\n    setShowPagerButtonIcon: function (value) {\r\n        this._bottomPager.setShowButtonIcon(value);\r\n    },\r\n    getShowPagerButtonIcon: function () {\r\n        return this.showPagerButtonIcon;\r\n    },\r\n    setShowReloadButton: function (value) {\r\n        this._bottomPager.setShowReloadButton(value);\r\n    },\r\n    getShowReloadButton: function () {\r\n        return this._bottomPager.getShowReloadButton();\r\n    },\r\n    setShowPageInfo: function (value) {\r\n        this._bottomPager.setShowPageInfo(value);\r\n    },\r\n    getShowPageInfo: function () {\r\n        return this._bottomPager.getShowPageInfo();\r\n    },\r\n    setSizeList: function (value) {\r\n        if (!mini.isArray(value)) return;\r\n        this._bottomPager.setSizeList(value);\r\n    },\r\n    getSizeList: function () {\r\n        return this._bottomPager.getSizeList();\r\n    },\r\n    setShowPageSize: function (value) {\r\n        this._bottomPager.setShowPageSize(value);\r\n    },\r\n    getShowPageSize: function () {\r\n        return this._bottomPager.getShowPageSize();\r\n    },\r\n    setShowPageIndex: function (value) {\r\n        this.showPageIndex = value;\r\n        this._bottomPager.setShowPageIndex(value);\r\n    },\r\n    getShowPageIndex: function () {\r\n        return this._bottomPager.getShowPageIndex();\r\n    },\r\n    setShowTotalCount: function (value) {\r\n\r\n        this._bottomPager.setShowTotalCount(value);\r\n    },\r\n    getShowTotalCount: function () {\r\n        return this._bottomPager.getShowTotalCount();\r\n    },\r\n    setPagerStyle: function (value) {\r\n        this.pagerStyle = value;\r\n        mini.setStyle(this._bottomPager.el, value);\r\n    },\r\n    setPagerCls: function (value) {\r\n        this.pagerCls = value;\r\n        mini.addClass(this._bottomPager.el, value);\r\n    },\r\n    setDropAction: function (value) {\r\n        this.dropAction = value;\r\n    },\r\n    getDropAction: function () {\r\n        return this.dropAction;\r\n    },\r\n\r\n    groupTitleCollapsible: true,\r\n    setGroupTitleCollapsible: function (value) {\r\n        this.groupTitleCollapsible = value;\r\n    },\r\n    getGroupTitleCollapsible: function () {\r\n        return this.groupTitleCollapsible;\r\n    },\r\n\r\n    allowEmptyContextMenu: false,\r\n    setAllowEmptyContextMenu: function (value) {\r\n        this.allowEmptyContextMenu = value;\r\n    },\r\n    getAllowEmptyContextMenu: function () {\r\n        return this.allowEmptyContextMenu;\r\n    },\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    // ContextMenu\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    _beforeOpenContentMenu: function (menu, e) {\r\n        //var record = this._getRecordByEvent(e.htmlEvent);        \r\n        var can = mini.isAncestor(this._bodyEl, e.htmlEvent.target);\r\n        if (can) {\r\n            menu.fire(\"BeforeOpen\", e);\r\n        } else {\r\n            e.cancel = true;\r\n        }\r\n    },\r\n\r\n\r\n\r\n    __OnHtmlContextMenu: function (e) {\r\n        var ev = {\r\n            popupEl: this.el,\r\n            htmlEvent: e,\r\n            cancel: false\r\n        };\r\n\r\n        if (mini.isAncestor(this._columnsEl, e.target)) {\r\n            if (this.headerContextMenu) {\r\n                this.headerContextMenu.fire(\"BeforeOpen\", ev);\r\n                if (ev.cancel == true) return;\r\n                this.headerContextMenu.fire(\"opening\", ev);\r\n                if (ev.cancel == true) return;\r\n                this.headerContextMenu.showAtPos(e.pageX, e.pageY);\r\n                this.headerContextMenu.fire(\"Open\", ev);\r\n            }\r\n        } else {\r\n\r\n            var d = mini.findParent(e.target, \"mini-grid-detailRow\");\r\n            if (d && mini.isAncestor(this.el, d)) return;\r\n\r\n            var f = mini.findParent(e.target, \"mini-tree-nodeshow\");\r\n            //if (!f && this.uiCls == \"mini-tree\") return\r\n\r\n            //            if (!f && this.type == \"tree\") return\r\n            if (!f && this.type == \"tree\" && !this.allowEmptyContextMenu) return\r\n\r\n\r\n            //if ($(e.target).hasClass(\"mini-grid-rows-view\")) return;\r\n\r\n            if (!this.allowEmptyContextMenu && !mini.findParent(e.target, \"mini-grid-table\")) return;\r\n\r\n            if (mini.findParent(e.target, \"mini-grid-filterRow\")) return;\r\n            if (mini.findParent(e.target, \"mini-grid-summaryRow\")) return;\r\n\r\n\r\n            if (this.contextMenu) {\r\n                this._beforeOpenContentMenu(this.contextMenu, ev);\r\n                if (ev.cancel == true) return;\r\n                this.contextMenu.fire(\"opening\", ev);\r\n                if (ev.cancel == true) return;\r\n                this.contextMenu.showAtPos(e.pageX, e.pageY);\r\n                this.contextMenu.fire(\"Open\", ev);\r\n            }\r\n        }\r\n        return false;\r\n\r\n    },\r\n    headerContextMenu: null,\r\n    setHeaderContextMenu: function (value) {\r\n        var ui = this._getContextMenu(value);\r\n        if (!ui) return;\r\n        if (this.headerContextMenu !== ui) {\r\n            this.headerContextMenu = ui;\r\n            mini.addClass(ui.el, \"mini-menu-open\");\r\n            this.headerContextMenu.owner = this;\r\n            mini.on(this.el, \"contextmenu\", this.__OnHtmlContextMenu, this);\r\n        }\r\n    },\r\n    getHeaderContextMenu: function () {\r\n        return this.headerContextMenu;\r\n    },\r\n\r\n    selectOnRightClick: true,\r\n    setSelectOnRightClick: function (value) {\r\n        this.selectOnRightClick = value;\r\n    },\r\n    getSelectOnRightClick: function () {\r\n        return this.selectOnRightClick;\r\n    },\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    _get_originals: function () {\r\n        return this._dataSource._originals;\r\n    },\r\n    _set_originals: function (value) {\r\n        this._dataSource._originals = value;\r\n    },\r\n    _set_clearOriginals: function (value) {\r\n        this._dataSource._clearOriginals = value;\r\n    },\r\n    _set_originalIdField: function (value) {\r\n        this._dataSource._originalIdField = value;\r\n    },\r\n    _set_autoCreateNewID: function (value) {\r\n        this._dataSource._autoCreateNewID = value;\r\n    },\r\n    //////////////////////////////////////////////////////////////////////////////////////////\r\n    // HTML Tags\r\n    //////////////////////////////////////////////////////////////////////////////////////////       \r\n    getAttrs: function (el) {\r\n        var attrs = mini.DataGrid.superclass.getAttrs.call(this, el);\r\n        var cs = mini.getChildNodes(el);\r\n        for (var i = 0, l = cs.length; i < l; i++) {\r\n            var node = cs[i];\r\n            //var property = jQuery(node).attr(\"property\");\r\n            var property = mini.getAttr(node, \"property\");\r\n            if (!property) continue;\r\n            property = property.toLowerCase();\r\n            if (property == \"columns\") {\r\n                attrs.columns = mini._ParseColumns(node);\r\n                mini.removeNode(node);\r\n            } else if (property == \"data\") {\r\n                attrs.data = node.innerHTML;\r\n                mini.removeNode(node);\r\n            }\r\n        }\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\r\n                \"oncelleditenter\",\r\n                \"onselect\", \"ondeselect\", \"onbeforeselect\", \"onbeforedeselect\",\r\n                \"url\", \"sizeList\", \"bodyCls\", \"bodyStyle\", \"footerCls\", \"footerStyle\", \"pagerCls\", \"pagerStyle\",\r\n                \"onheadercellclick\", \"onheadercellmousedown\", \"onheadercellcontextmenu\", \"onrowdblclick\",\r\n                \"onrowclick\", \"onrowmousedown\", \"onrowcontextmenu\",\r\n                \"onrowmouseenter\", \"onrowmouseleave\",\r\n                \"oncellclick\", \"oncellmousedown\", \"oncellcontextmenu\", \"oncelldblclick\",\r\n                \"onbeforeload\", \"onpreload\", \"onloaderror\", \"onload\",\r\n                \"onupdate\", \"ondrawcell\", \"oncellbeginedit\", \"onselectionchanged\", \"ondrawgroup\",\r\n                \"onbeforeshowrowdetail\", \"onbeforehiderowdetail\", \"onshowrowdetail\", \"onhiderowdetail\", \"idField\", \"valueField\",\r\n                \"pager\", \"oncellcommitedit\", \"oncellendedit\",\r\n                \"headerContextMenu\", \"loadingMsg\", \"emptyText\", \"cellEditAction\",\r\n                \"sortMode\", \"oncellvalidation\", \"onsort\",\r\n                \"ondrawsummarycell\", \"ondrawgroupsummarycell\", \"onresize\", \"oncolumnschanged\",\r\n                \"ajaxMethod\", \"ajaxOptions\",\r\n\r\n                \"onaddrow\", \"onupdaterow\", \"onremoverow\", \"onmoverow\",\r\n                \"onbeforeaddrow\", \"onbeforeupdaterow\", \"onbeforeremoverow\", \"onbeforemoverow\",\r\n\r\n                \"pageIndexField\", \"pageSizeField\", \"sortFieldField\", \"sortOrderField\",\r\n                \"startField\", \"limitField\",\r\n                \"totalField\", \"dataField\", \"sortField\", \"sortOrder\",\r\n                \"stackTraceField\", \"errorField\", \"errorMsgField\",\r\n                \"pagerButtons\", \"onbeforegroupclick\", \"dropAction\", \"sizeText\", \"pagerType\", \"viewType\", \"itemRenderer\", \"summaryPosition\"\r\n             ]\r\n        );\r\n\r\n        mini._ParseBool(el, attrs,\r\n            [\"showColumns\", \"showFilterRow\", \"showSummaryRow\", \"showPager\", \"showFooter\", \"enableGroupOrder\", \"validateOnAdd\",\r\n            \"showHGridLines\", \"showVGridLines\", \"showSortIcon\",\r\n            \"allowSortColumn\", \"allowMoveColumn\", \"allowResizeColumn\",\r\n            \"fitColumns\", \"showLoading\", \"multiSelect\", \"allowAlternating\", \"resultAsData\", \"allowRowSelect\", \"allowUnselect\",\r\n            \"onlyCheckSelection\",\r\n            \"allowHotTrackOut\", \"enableHotTrack\", \"showPageIndex\", \"showPageSize\", \"showTotalCount\",\r\n            \"checkSelectOnLoad\", \"allowResize\", \"autoLoad\",\r\n            \"autoHideRowDetail\", \"allowCellSelect\", \"allowCellEdit\", \"allowCellWrap\", \"allowHeaderWrap\", \"selectOnLoad\",\r\n            \"virtualScroll\", \"virtualColumns\", \"collapseGroupOnLoad\", \"showGroupSummary\",\r\n            \"showEmptyText\", \"alwaysShowEmptyText\", \"allowCellValid\", \"showModified\", \"showColumnsMenu\", \"showPageInfo\", \"showReloadButton\",\r\n            \"showNewRow\", \"editNextOnEnterKey\", \"createOnEnter\", \"skipReadOnlyCell\",\r\n            \"ajaxAsync\",\r\n            \"allowDrag\", \"allowDrop\", \"allowLeafDropIn\", \"editNextRowCell\",\r\n            \"fixedRowHeight\", \"showCellTip\", \"showPagerButtonText\", \"showPagerButtonIcon\", \"groupTitleCollapsible\",\r\n            \"navEditMode\", \"selectOnRightClick\", \"sortDblClick\", \"allowEmptyContextMenu\", \"showGroupSummary\",\r\n            \"allowCancelSort\"\r\n             ]\r\n        );\r\n\r\n        mini._ParseInt(el, attrs,\r\n            [\"frozenStartColumn\", \"frozenEndColumn\", \"pageSizeWidth\",\r\n            \"pageIndex\", \"pageSize\", \"defaultRowHeight\", \"defaultColumnWidth\", \"wheelIncrement\", \"summaryRows\"\r\n             ]\r\n        );\r\n\r\n        if (typeof attrs.ajaxOptions == \"string\") {\r\n            attrs.ajaxOptions = window[\"ev\" + \"al\"]('(' + attrs.ajaxOptions + ')');\r\n        }\r\n        if (typeof attrs.sizeList == \"string\") {\r\n            attrs.sizeList = window[\"ev\" + \"al\"]('(' + attrs.sizeList + ')');\r\n        }\r\n        if (!attrs.idField && attrs.valueField) {\r\n            attrs.idField = attrs.valueField;\r\n        }\r\n\r\n        if (attrs.pagerButtons) {\r\n            attrs.pagerButtons = mini.byId(attrs.pagerButtons);\r\n        }\r\n\r\n        if (attrs.itemRenderer) attrs.itemRenderer = window[attrs.itemRenderer];\r\n\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.DataGrid, \"datagrid\");\r\n\r\n\r\n/* Cell Validae\r\n-----------------------------------------------------------------------------*/\r\n\r\nmini_DataGrid_CellValidator_Prototype = {\r\n    getCellErrors: function () {\r\n        var errors = this._cellErrors.clone();\r\n\r\n        //如果errors中的行对象已经被删除，则需要从错误数组中移除\r\n        var source = this._dataSource;\r\n        for (var i = 0, l = errors.length; i < l; i++) {\r\n            var error = errors[i];\r\n            var row = error.record;\r\n            if (!source.getby_id(row._id)) {\r\n                var column = error.column;\r\n                var id = row[this._rowIdField] + \"$\" + column._id;\r\n                delete this._cellMapErrors[id];\r\n                this._cellErrors.remove(error);\r\n            }\r\n        }\r\n\r\n        //        var data = this.getDataView();\r\n        //        for (var i = 0, l = errors.length; i < l; i++) {\r\n        //            var error = errors[i];\r\n        //            var row = error.record;\r\n        //            var column = error.column;\r\n        //            if (data.indexOf(row) == -1) {\r\n        //                var id = row[this._rowIdField] + \"$\" + column._id;\r\n        //                delete this._cellMapErrors[id];\r\n        //                this._cellErrors.remove(error);\r\n        //            }\r\n        //        }\r\n\r\n        return this._cellErrors;\r\n    },\r\n    getCellError: function (row, column) {\r\n        row = this.getNode ? this.getNode(row) : this.getRow(row);\r\n        column = this.getColumn(column);\r\n        if (!row || !column) return;\r\n\r\n        var id = row[this._rowIdField] + \"$\" + column._id;\r\n        return this._cellMapErrors ? this._cellMapErrors[id] : null;\r\n    },\r\n    isValid: function () {\r\n        return this.getCellErrors().length == 0;\r\n    },\r\n    isCellValid: function (record, column) {\r\n        //if(this.indexOf(record) == 0) debugger\r\n        if (!this._cellMapErrors) return true;\r\n        var id = record[this._rowIdField] + \"$\" + column._id;\r\n        return !this._cellMapErrors[id];\r\n    },\r\n    validate: function (data) {\r\n        data = data || this.getDataView();\r\n        if (!mini.isArray(data)) data = [];\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var row = data[i];\r\n            this.validateRow(row);\r\n        }\r\n    },\r\n    validateRow: function (row) {\r\n        var columns = this.getBottomColumns();\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            this.validateCell(row, column);\r\n        }\r\n    },\r\n    validateCell: function (row, column) {\r\n        row = this.getNode ? this.getNode(row) : this.getRow(row);\r\n        column = this.getColumn(column);\r\n        if (!row || !column || column.visible == false) return;\r\n        var value = mini._getMap(column.field, row);\r\n        var e = {\r\n            record: row,\r\n            row: row,\r\n            node: row,\r\n            column: column,\r\n            field: column.field,\r\n            value: value,\r\n            isValid: true,\r\n            errorText: \"\"\r\n        };\r\n\r\n        if (column.vtype) {\r\n\r\n            mini._ValidateVType(column.vtype, e.value, e, column);\r\n        }\r\n        //唯一列值处理unique：遍历行，满足条件，遍历行\r\n        if (e.isValid == true && column.unique && column.field) {\r\n\r\n            var maps = {};\r\n            var data = this.data, field = column.field;\r\n            for (var i = 0, l = data.length; i < l; i++) {\r\n                var o = data[i];\r\n                var v = o[field];\r\n                //if (mini.isNull(v) || v === \"\") {\r\n                if (mini.isNull(v) || String(v).trim() === \"\") {\r\n                } else {\r\n                    var old = maps[v];\r\n                    if (old && o == row) {\r\n                        e.isValid = false;\r\n                        e.errorText = mini._getErrorText(column, \"uniqueErrorText\");\r\n\r\n                        //上面的也是\r\n                        this.setCellIsValid(old, column, e.isValid, e.errorText);\r\n                        break;\r\n                    }\r\n                    maps[v] = o;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.fire(\"cellvalidation\", e);\r\n        this.setCellIsValid(row, column, e.isValid, e.errorText);\r\n    },\r\n\r\n    setIsValid: function (value) {\r\n        if (value) {\r\n            var errors = this._cellErrors.clone();\r\n            for (var i = 0, l = errors.length; i < l; i++) {\r\n                var error = errors[i];\r\n                this.setCellIsValid(error.record, error.column, true);\r\n            }\r\n        }\r\n    },\r\n    _removeRowError: function (row) {\r\n        var columns = this.getColumns();\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            var id = row[this._rowIdField] + \"$\" + column._id;\r\n            var error = this._cellMapErrors[id];\r\n            if (error) {\r\n                delete this._cellMapErrors[id];\r\n                this._cellErrors.remove(error);\r\n            }\r\n        }\r\n    },\r\n    setCellIsValid: function (row, column, isValid, errorText) {\r\n        row = this.getRow(row);\r\n        column = this.getColumn(column);\r\n        if (!row || !column) return;\r\n        var id = row[this._rowIdField] + \"$\" + column._id;\r\n        var cellEl = this._getCellEl(row, column);\r\n\r\n        var error = this._cellMapErrors[id];\r\n        delete this._cellMapErrors[id];\r\n        this._cellErrors.remove(error);\r\n\r\n        if (isValid === true) {\r\n            if (cellEl && error) {\r\n                mini.removeClass(cellEl, 'mini-grid-cell-error');\r\n            }\r\n        } else {\r\n            error = { record: row, column: column, isValid: isValid, errorText: errorText };\r\n            this._cellMapErrors[id] = error;\r\n            this._cellErrors.add(error);\r\n            if (cellEl) {\r\n                mini.addClass(cellEl, 'mini-grid-cell-error');\r\n            }\r\n        }\r\n    }\r\n}\r\nmini.copyTo(mini.DataGrid.prototype, mini_DataGrid_CellValidator_Prototype);\r\n\n/*\r\n描述：TreeGrid\r\n节点对象：{ enabled, expanded, checked, checkState, checkable, asyncLoad, isLeaf, children }\r\n    0.checked(true|false), checkState(indeterminate|unchecked|checked)\r\n    1.checkable 决定是否可以选中。设置false，会隐藏checkbox。\r\n    2.enabled 决定是否灰化显示，禁止点击、选择操作\r\n    3.isLeaf 决定是否显示成父节点样子\r\n    4.asyncLoad 决定是否可以懒加载。设置false，展开时不懒加载\r\n            \r\n    node.showCheckBox?\r\n    是否显示checkbox。   也可以在ondrawcell的时候，e.showCheckBox=false;\r\n    node.checkable\r\n    是否禁用checkbox。\r\n    \r\n    1.isLeaf：没有子节点，有isLeaf=\"true\"，也返回true，显示成一个父节点\r\n    2.hasChildren：只判断子节点。\r\n*/\r\n\r\nmini.TreeGrid = function () {\r\n    mini.TreeGrid.superclass.constructor.apply(this, arguments);\r\n    mini.addClass(this.el, 'mini-tree');\r\n\r\n    this.setAjaxAsync(false);\r\n    this.setAutoLoad(true);\r\n\r\n    if (this.showTreeLines == true) {\r\n        mini.addClass(this.el, 'mini-tree-treeLine');\r\n    }\r\n\r\n    this._AsyncLoader = new mini._Tree_AsyncLoader(this);\r\n    this._Expander = new mini._Tree_Expander(this);\r\n\r\n    this.setShowArrow(this.showArrow);\r\n};\r\nmini.copyTo(mini.TreeGrid.prototype, mini._DataTreeApplys);\r\n\r\nmini.extend(mini.TreeGrid, mini.DataGrid, {\r\n    isTree: true,\r\n\r\n    uiCls: \"mini-treegrid\",\r\n\r\n    showPager: false,\r\n    showNewRow: false,\r\n\r\n    showCheckBox: false,    //checkbox\r\n    showRadioButton: false, //radio\r\n    showTreeIcon: true,     //节点图标    \r\n    showExpandButtons: true,    //+、-号的连线\r\n    showTreeLines: false,        //连线\r\n    showArrow: false,\r\n\r\n    expandOnDblClick: true,\r\n    expandOnNodeClick: false,\r\n    loadOnExpand: true,\r\n\r\n    _checkBoxType: \"checkbox\",\r\n\r\n    iconField: \"iconCls\",\r\n\r\n    _treeColumn: null,\r\n\r\n    leafIconCls: \"mini-tree-leaf\",\r\n    folderIconCls: \"mini-tree-folder\",\r\n\r\n    fixedRowHeight: false,  //固定高度\r\n\r\n    _checkBoxCls: \"mini-tree-checkbox\",\r\n    _expandNodeCls: \"mini-tree-expand\",\r\n    _collapseNodeCls: \"mini-tree-collapse\",\r\n    _eciconCls: \"mini-tree-node-ecicon\",\r\n    _inNodeCls: \"mini-tree-nodeshow\",\r\n\r\n\r\n    //    set: function (kv) {\r\n    //        if (typeof kv == 'string') {\r\n    //            return this;\r\n    //        }\r\n\r\n    //        var value = kv.showTreeNode;\r\n    //        if (!mini.isNull(value)) {\r\n    //            delete kv.showTreeNode;\r\n    //            this.setShowTreeIcon(value);\r\n    //        }\r\n\r\n\r\n    //        if (!mini.isNull(columns)) {\r\n    //            this.setColumns(columns);\r\n    //        }\r\n\r\n    //        mini.TreeGrid.superclass.set.call(this, kv);\r\n\r\n    //       \r\n\r\n    //        return this;\r\n    //    },\r\n\r\n    isEditingNode: function (node) {\r\n        return this._editingNode == node;\r\n    },\r\n\r\n    indexOf: function (record) {\r\n        return this._dataSource.indexOfList(record);\r\n    },\r\n\r\n    _getDragText: function (dragNodes) {\r\n        return \"Nodes \" + dragNodes.length;\r\n    },\r\n    _initEvents: function () {\r\n        mini.TreeGrid.superclass._initEvents.call(this);\r\n\r\n        this.on(\"nodedblclick\", this.__OnNodeDblClick, this);\r\n        this.on(\"nodeclick\", this.__OnNodeClick, this);\r\n\r\n\r\n        //adapter events\r\n        this.on(\"cellclick\", function (e) {\r\n            e.node = e.record;\r\n            e.isLeaf = this.isLeaf(e.node);\r\n            this.fire(\"nodeclick\", e);\r\n        }, this);\r\n        this.on(\"cellmousedown\", function (e) {\r\n            e.node = e.record;\r\n            e.isLeaf = this.isLeaf(e.node);\r\n            this.fire(\"nodemousedown\", e);\r\n        }, this);\r\n        this.on(\"celldblclick\", function (e) {\r\n            e.node = e.record;\r\n            e.isLeaf = this.isLeaf(e.node);\r\n            this.fire(\"nodedblclick\", e);\r\n        }, this);\r\n\r\n        this.on(\"beforerowselect\", function (e) {\r\n            e.node = e.selected;\r\n            e.isLeaf = this.isLeaf(e.node);\r\n            this.fire(\"beforenodeselect\", e);\r\n        }, this);\r\n        this.on(\"rowselect\", function (e) {\r\n            e.node = e.selected;\r\n            e.isLeaf = this.isLeaf(e.node);\r\n            this.fire(\"nodeselect\", e);\r\n        }, this);\r\n\r\n    },\r\n    setValue: function (value, cascade) {\r\n        if (mini.isNull(value)) value = \"\";\r\n        value = String(value);\r\n        if (this.getValue() != value) {\r\n            var nodes = this.getCheckedNodes();\r\n\r\n            //this.uncheckNodes(nodes, false); //三态的时候，是否会有问题？\r\n            this.uncheckNodes(nodes, this.checkRecursive); //取消选择，也应该引发三态\r\n\r\n            this.value = value;\r\n            if (this.showCheckBox) {\r\n                var ids = String(value).split(\",\");\r\n                this._dataSource.doCheckNodes(ids, true, cascade !== false);\r\n                //                for (var i = 0, l = ids.length; i < l; i++) {\r\n                //                    this.checkNode(ids[i]);\r\n                //                }\r\n            } else {\r\n                this.selectNode(value, false);\r\n            }\r\n        }\r\n    },\r\n    getValue: function (mode) {\r\n        if (this.showCheckBox) {\r\n            if (mode === false) mode = 'leaf';\r\n            return this._dataSource.getCheckedNodesId(mode);\r\n        } else {\r\n            return this._dataSource.getSelectedsId();\r\n        }\r\n    },\r\n    getText: function () {\r\n        var nodes = [];\r\n        if (this.showCheckBox) {\r\n            nodes = this.getCheckedNodes();\r\n        } else {\r\n            var node = this.getSelectedNode();\r\n            if (node) nodes.push(node);\r\n        }\r\n\r\n        var sb = [], textField = this.getTextField();\r\n        for (var i = 0, l = nodes.length; i < l; i++) {\r\n            var node = nodes[i];\r\n            sb.push(node[textField]);\r\n        }\r\n\r\n        return sb.join(',');\r\n    },\r\n    //////////////////////////////////////////////////////////\r\n    isGrouping: function () {\r\n        return false;\r\n    },\r\n    _createSource: function () {\r\n        this._dataSource = new mini.DataTree();\r\n    },\r\n    _bindSource: function () {\r\n        mini.TreeGrid.superclass._bindSource.call(this);\r\n        var source = this._dataSource;\r\n\r\n        source.on(\"expand\", this.__OnTreeExpand, this);\r\n        source.on(\"collapse\", this.__OnTreeCollapse, this);\r\n\r\n        source.on(\"_checkchanged\", this.__OnCheckChanged, this);\r\n\r\n        source.on(\"addnode\", this.__OnSourceAddNode, this);\r\n        source.on(\"removenode\", this.__OnSourceRemoveNode, this);\r\n        source.on(\"movenode\", this.__OnSourceMoveNode, this);\r\n\r\n        source.on(\"beforeloadnode\", this.__OnBeforeLoadNode, this);\r\n        source.on(\"loadnode\", this.__OnLoadNode, this);\r\n    },\r\n    __OnBeforeLoadNode: function (e) {\r\n        this.__showLoading = this.showLoading;\r\n        this.showLoading = false;\r\n        this.addNodeCls(e.node, \"mini-tree-loading\");\r\n        this.fire(\"beforeloadnode\", e);\r\n    },\r\n    __OnLoadNode: function (e) {\r\n        this.showLoading = this.__showLoading;\r\n        this.removeNodeCls(e.node, \"mini-tree-loading\");\r\n        this.fire(\"loadnode\", e);\r\n    },\r\n    _virtualUpdate: function () {\r\n        var that = this;\r\n        if (that._updateNodeTimer) {\r\n            clearTimeout(that._updateNodeTimer);\r\n            that._updateNodeTimer = null;\r\n        }\r\n        that._updateNodeTimer = setTimeout(function () {\r\n            that._updateNodeTimer = null;\r\n\r\n            that.doUpdateRows();         //30条，55ms\r\n            //this._stopUpdateTableView();\r\n            that.deferLayout(50);\r\n        }, 5);\r\n    },\r\n    //    __OnSourceAddNode: function (e) {\r\n\r\n    //        var visible = this._dataSource.isVisibleNode(e.node);\r\n\r\n    //        if (this.isVirtualScroll() == true) {\r\n    //            this._virtualUpdate();\r\n    //        } else {\r\n    //            if (visible) this._doAddNodeEl(e.node);\r\n\r\n    //        }\r\n    //        this.fire(\"addnode\", e);\r\n    //    },\r\n    __OnSourceAddNode: function (e) {\r\n\r\n        var visible = this._dataSource.isVisibleNode(e.node);\r\n\r\n        if (this.isVirtualScroll() == true) {\r\n            this._virtualUpdate();\r\n        } else {\r\n            if (visible) this._doAddNodeEl(e.node);\r\n            else {\r\n                var parentNode = this.getParentNode(e.node);\r\n                if (this._dataSource.isVisibleNode(parentNode)) {\r\n                    this._doUpdateTreeNodeEl(parentNode);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        this.fire(\"addnode\", e);\r\n    },\r\n    __OnSourceRemoveNode: function (e) {\r\n        if (this.isVirtualScroll() == true) {\r\n            this._virtualUpdate();\r\n        } else {\r\n            this._doRemoveNodeEl(e.node);\r\n\r\n            //更新父节点        \r\n            var parentNode = this.getParentNode(e.node);\r\n            var nodes = this.getChildNodes(parentNode);\r\n            if (nodes.length == 0) {\r\n                this._doUpdateTreeNodeEl(parentNode);\r\n            }\r\n            else {\r\n                var index = e.index;\r\n                if (index > 1 && index == nodes.length) {\r\n                    this._doUpdateTreeNodeEl(nodes[nodes.length - 1]);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.fire(\"removenode\", e);\r\n    },\r\n\r\n    __OnSourceMoveNode: function (e) {\r\n        this._doMoveNodeEl(e.node);\r\n        this.fire(\"movenode\", e);\r\n\r\n        var oldParentNode = e.oldParentNode;\r\n        var parentNode = e.parentNode;\r\n        if (oldParentNode != parentNode) {\r\n            var nodes = this.getChildNodes(oldParentNode);\r\n            if (nodes) {\r\n                var last = nodes[nodes.length - 1];\r\n                if (last) this._doUpdateTreeNodeEl(last);\r\n            }\r\n        }\r\n    },\r\n    _doAddNodeEl: function (node) {\r\n        var columns1 = this.getFrozenColumns();\r\n        var columns2 = this.getUnFrozenColumns();\r\n\r\n        var parentNode = this.getParentNode(node);\r\n        var rowIndex = this.indexOf(node);\r\n\r\n        var updateParent = false;\r\n        function doAdd(node, columns, viewIndex) {\r\n            var s = this._createRowHTML(node, rowIndex, columns, viewIndex);\r\n\r\n            var index = this.indexOfNode(node) + 1;\r\n            var targetNode = this.getChildNodeAt(index, parentNode);\r\n            if (targetNode) {\r\n                var targetEl = this._getNodeEl(targetNode, viewIndex);\r\n                jQuery(targetEl).before(s);\r\n            } else {\r\n                var nodesEl = this._getNodesEl(parentNode, viewIndex);\r\n                if (nodesEl) {\r\n                    mini.append(nodesEl.firstChild, s);\r\n                } else {\r\n                    updateParent = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        doAdd.call(this, node, columns2, 2);\r\n        doAdd.call(this, node, columns1, 1);\r\n\r\n        if (updateParent) {\r\n            this._doUpdateTreeNodeEl(parentNode);\r\n        }\r\n    },\r\n    _doRemoveNodeEl: function (node) {\r\n        this._doRemoveRowEl(node);\r\n        var nodesEl = this._getNodesEl(node, 1);\r\n        var nodesEl2 = this._getNodesEl(node, 2);\r\n        if (nodesEl) nodesEl.parentNode.removeChild(nodesEl);\r\n        if (nodesEl2) nodesEl2.parentNode.removeChild(nodesEl2);\r\n\r\n\r\n    },\r\n    _doMoveNodeEl: function (node) {\r\n\r\n        if (this.isVirtualScroll() == true) {\r\n            this._virtualUpdate();\r\n        } else {\r\n            //1）删除节点        \r\n            this._doRemoveNodeEl(node);\r\n            //2）更新父节点\r\n\r\n            var parentNode = this.getParentNode(node);\r\n            this._doUpdateTreeNodeEl(parentNode);\r\n        }\r\n\r\n\r\n    },\r\n    _doUpdateNodeTitle: function (node) {\r\n        this._doUpdateTreeNodeEl(node, false);\r\n    },\r\n    _doUpdateTreeNodeEl: function (node, hasChild) {\r\n        //更新：节点、子节点\r\n        hasChild = hasChild !== false;\r\n\r\n        var rootNode = this.getRootNode();\r\n        if (rootNode == node) {\r\n            this.doUpdate();\r\n            return;\r\n        }\r\n        if (!this.isVisibleNode(node)) return;\r\n\r\n        var objNode = node;\r\n        var frozenColumns = this.getFrozenColumns();\r\n        var unfrozenColumns = this.getUnFrozenColumns();\r\n\r\n        var lockHtml = this._createNodeHTML(node, frozenColumns, 1, null, hasChild);\r\n        var html = this._createNodeHTML(node, unfrozenColumns, 2, null, hasChild);\r\n\r\n        var nodeEl1 = this._getNodeEl(node, 1);\r\n        var nodeEl2 = this._getNodeEl(node, 2);\r\n        var nodesEl1 = this._getNodesTr(node, 1);\r\n        var nodesEl2 = this._getNodesTr(node, 2);\r\n\r\n        var detail1 = this._getRowDetailEl(node, 1);\r\n        var detail2 = this._getRowDetailEl(node, 2);\r\n\r\n        //1）\r\n        var els = mini.createElements(lockHtml);\r\n        var node = els[0];\r\n        var nodes = els[1];\r\n        if (nodeEl1) {\r\n            mini.before(nodeEl1, node);\r\n            if (hasChild) {\r\n                if (detail1) mini.after(detail1, nodes);\r\n                else mini.before(nodeEl1, nodes);\r\n            }\r\n\r\n            mini.removeNode(nodeEl1);\r\n            if (hasChild) {\r\n                mini.removeNode(nodesEl1);\r\n            }\r\n        }\r\n        //2）\r\n        var els = mini.createElements(html);\r\n        var node = els[0];\r\n        var nodes = els[1];\r\n        if (nodeEl2) {\r\n            mini.before(nodeEl2, node);\r\n\r\n            if (hasChild) {\r\n                if (detail2) mini.after(detail2, nodes);\r\n                else mini.before(nodeEl2, nodes);\r\n            }\r\n\r\n            mini.removeNode(nodeEl2);\r\n            if (hasChild) {\r\n                mini.removeNode(nodesEl2);\r\n            }\r\n        }\r\n\r\n        if (node.checked != true && !this.isLeaf(node)) {\r\n            this._doCheckNodeEl(objNode);\r\n        }\r\n    },\r\n    addNodeCls: function (node, cls) {\r\n        this.addRowCls(node, cls);\r\n    },\r\n    removeNodeCls: function (node, cls) {\r\n        this.removeRowCls(node, cls);\r\n    },\r\n    /////////////////////////////////////////////////////////////////\r\n    doUpdate: function () {\r\n\r\n        mini.TreeGrid.superclass.doUpdate.apply(this, arguments);\r\n        //this._doUpdate\r\n    },\r\n    setData: function (data) {\r\n        if (!data) data = [];\r\n        this._dataSource.setData(data);\r\n    },\r\n    loadList: function (list, idField, parentField) {\r\n        idField = idField || this.getIdField();\r\n        parentField = parentField || this.getParentField();\r\n        var tree = mini.listToTree(list, this.getNodesField(), idField, parentField);\r\n        this.setData(tree);\r\n    },\r\n    //    _OnDrawNode: function (e) {\r\n    //        var showCheckBox = this.showCheckBox;\r\n    //        if (showCheckBox && this.hasChildren(node)) {\r\n    //            showCheckBox = this.showFolderCheckBox;\r\n    //        }\r\n    //        var nodeHtml = this.getItemText(node);\r\n    //        var e = {\r\n    //            isLeaf: this.isLeaf(node),\r\n    //            node: node,\r\n    //            nodeHtml: nodeHtml,\r\n    //            nodeCls: '',\r\n    //            nodeStyle: \"\",\r\n    //            showCheckBox: showCheckBox,\r\n    //            iconCls: this.getNodeIcon(node),\r\n    //            img: node[this.imgField],\r\n    //            showTreeIcon: this.showTreeIcon\r\n    //        };\r\n    //        this.fire(\"drawnode\", e);\r\n    //        if (e.nodeHtml === null || e.nodeHtml === undefined || e.nodeHtml === \"\") e.nodeHtml = \"&nbsp;\";\r\n    //        return e;\r\n    //    },\r\n    _createDrawCellEvent: function (record, column, rowIndex, columnIndex) {\r\n        var e = mini.TreeGrid.superclass._createDrawCellEvent.call(this, record, column, rowIndex, columnIndex);\r\n        e.node = e.record;\r\n        e.isLeaf = this.isLeaf(e.node);\r\n        if (this._treeColumn && this._treeColumn == column.name) {\r\n            e.isTreeCell = true;\r\n\r\n            e.img = record[this.imgField];\r\n            e.iconCls = this._getNodeIcon(record);\r\n            e.nodeCls = \"\";\r\n            e.nodeStyle = \"\";\r\n            e.nodeHtml = \"\";\r\n\r\n            e.showTreeIcon = this.showTreeIcon;\r\n            e.checkBoxType = this._checkBoxType;\r\n            e.showCheckBox = this.showCheckBox;\r\n            e.showRadioButton = this.showRadioButton;\r\n            if (e.showCheckBox && !e.isLeaf) {\r\n                e.showCheckBox = this.showFolderCheckBox;\r\n            }\r\n            if (e.showRadioButton && !e.isLeaf) {\r\n                e.showRadioButton = this.showFolderCheckBox;\r\n            }\r\n            e.enabled = e.node.enabled !== false;\r\n            e.checkable = this.getCheckable(e.node);\r\n            //            if (this.getOnlyLeafCheckable() && !this.isLeaf(record)) {\r\n            //                e.showCheckBox = false;\r\n            //            }\r\n            //            if (record.checkable === false) {\r\n            //                e.showCheckBox = false;\r\n            //            }\r\n        }\r\n        return e;\r\n    },\r\n    _OnDrawCell: function (record, column, rowIndex, columnIndex) {\r\n        var e = mini.TreeGrid.superclass._OnDrawCell.call(this, record, column, rowIndex, columnIndex);\r\n\r\n        if (this._treeColumn && this._treeColumn == column.name) {\r\n\r\n            this.fire(\"drawnode\", e);\r\n            if (e.nodeStyle) {\r\n                e.cellStyle = e.nodeStyle;\r\n            }\r\n            if (e.nodeCls) {\r\n                e.cellCls = e.nodeCls;\r\n            }\r\n            if (e.nodeHtml) {\r\n                e.cellHtml = e.nodeHtml;\r\n            }\r\n\r\n            this._createTreeColumn(e);\r\n        }\r\n        return e;\r\n    },\r\n    _isViewFirstNode: function (node) {\r\n        if (this._viewNodes) {\r\n            var pnode = this.getParentNode(node);\r\n            var nodes = this._getViewChildNodes(pnode);\r\n            return nodes[0] === node;\r\n        } else {\r\n            return this.isFirstNode(node);\r\n        }\r\n    },\r\n    _isViewLastNode: function (node) {\r\n        if (this._viewNodes) {\r\n            var pnode = this.getParentNode(node);\r\n            var nodes = this._getViewChildNodes(pnode);\r\n            return nodes[nodes.length - 1] === node;\r\n        } else {\r\n            return this.isLastNode(node);\r\n        }\r\n    },\r\n    _isInViewLastNode: function (node, level) {\r\n        if (this._viewNodes) {\r\n            var pnode = null;\r\n            var ans = this.getAncestors(node);\r\n            for (var i = 0, l = ans.length; i < l; i++) {\r\n                var a = ans[i];\r\n                if (this.getLevel(a) == level) {\r\n                    pnode = a;\r\n                }\r\n            }\r\n            if (!pnode || pnode == this.root) return false;\r\n            return this._isViewLastNode(pnode);\r\n        } else {\r\n            return this.isInLastNode(node, level);\r\n        }\r\n    },\r\n    isInLastNode: function (node, level) {\r\n        var pnode = null;\r\n        var ans = this.getAncestors(node);\r\n        for (var i = 0, l = ans.length; i < l; i++) {\r\n            var a = ans[i];\r\n            if (this.getLevel(a) == level) {\r\n                pnode = a;\r\n            }\r\n        }\r\n        if (!pnode || pnode == this.root) return false;\r\n        return this.isLastNode(pnode);\r\n    },\r\n    _createNodeTitle: function (node, sb, e) {\r\n        var isReturn = !sb;\r\n        if (!sb) sb = [];\r\n\r\n        var isLeaf = this.isLeaf(node);\r\n        var level = this.getLevel(node);\r\n\r\n        var cls = e.nodeCls;\r\n\r\n        if (!isLeaf) {\r\n            cls = this.isExpandedNode(node) ? this._expandNodeCls : this._collapseNodeCls;\r\n        }\r\n\r\n        if (node.enabled === false) {\r\n            cls += \" mini-disabled\";\r\n        }\r\n        if (!isLeaf) {\r\n            cls += \" mini-tree-parentNode\";\r\n        }\r\n\r\n        var subNodes = this.getChildNodes(node);\r\n        var hasChilds = subNodes && subNodes.length > 0;\r\n\r\n        //sb[sb.length] = '<div class=\"mini-tree-nodetitle ' + cls + '\" style=\"' + e.nodeStyle + '\">';\r\n        sb[sb.length] = '<div class=\"mini-tree-nodetitle ' + cls + '\" >';\r\n\r\n        //if (!this.showExpandButtons) level -= 1;\r\n\r\n        var parentNode = this.getParentNode(node);\r\n        var ii = 0;\r\n        //if (!this.showExpandButtons && parentNode && !hasChilds) ii = 1;\r\n        for (var i = ii; i <= level; i++) {\r\n            if (i == level) continue;\r\n\r\n            if (isLeaf) {\r\n                //if (this.showExpandButtons == false && i >= level - 1) {\r\n                if (i > level - 1) {\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            var indentStyle = \"\";\r\n            if (this._isInViewLastNode(node, i)) {\r\n                indentStyle = \"background:none\";\r\n            }\r\n\r\n\r\n            sb[sb.length] = '<span class=\"mini-tree-indent \" style=\"' + indentStyle + '\"></span>';\r\n        }\r\n\r\n\r\n        var ecCls = \"\";\r\n        if (this._isViewFirstNode(node) && level == 0) {\r\n            ecCls = \"mini-tree-node-ecicon-first\";\r\n        } else if (this._isViewLastNode(node)) {\r\n            ecCls = \"mini-tree-node-ecicon-last\";\r\n        }\r\n\r\n        if (this._isViewFirstNode(node) && this._isViewLastNode(node)) {\r\n            ecCls = \"mini-tree-node-ecicon-firstAndlast\";\r\n            //ecCls = \"mini-tree-node-ecicon-last\";\r\n            if (parentNode == this.root) {\r\n                ecCls = \"mini-tree-node-ecicon-firstLast\";\r\n            }\r\n        }\r\n\r\n        if (!isLeaf) {\r\n            sb[sb.length] = '<a class=\"' + this._eciconCls + ' ' + ecCls + '\" style=\"' + (this.showExpandButtons ? \"\" : \"display:none\") + '\" ' + (mini.isChrome ? \"\" : 'href=\"javascript:void(0);\"') + ' onclick=\"return false;\" hidefocus></a>';\r\n\r\n\r\n        } else {\r\n            sb[sb.length] = '<span class=\"' + this._eciconCls + ' ' + ecCls + '\" style=\"' + (this.showExpandButtons ? \"\" : \"display:none\") + '\"></span>';\r\n        }\r\n\r\n\r\n        sb[sb.length] = '<span class=\"mini-tree-nodeshow mini-corner-all\">';\r\n        if (e.showTreeIcon) {\r\n            //if (e.node.id == 'sys') debugger\r\n            if (e.img) {\r\n                var img = this.imgPath + e.img;\r\n                sb[sb.length] = '<span class=\"mini-tree-icon mini-icon mini-iconfont\" style=\"background-image:url(' + img + ');\"></span>';\r\n            } else {\r\n                sb[sb.length] = '<span class=\"' + e.iconCls + ' mini-tree-icon mini-icon mini-iconfont\"></span>';\r\n            }\r\n        }\r\n\r\n        if (e.showRadioButton && !e.showCheckBox) {\r\n            sb[sb.length] = '<span class=\"mini-tree-radio mini-icon\" ></span>';\r\n        }\r\n\r\n        if (e.showCheckBox) {\r\n            var ckid = this._createCheckNodeId(node);\r\n            var checked = this.isCheckedNode(node);\r\n            var enabled = e.enabled === false ? \"disabled\" : \"\";\r\n            if (e.enabled !== false) {\r\n                enabled = e.checkable === false ? \"disabled\" : \"\";\r\n            }\r\n\r\n            //sb[sb.length] = '<input type=\"checkbox\" id=\"' + ckid + '\" class=\"' + this._checkBoxCls + '\" hidefocus ' + (checked ? \"checked\" : \"\") + ' ' + (enabled) + ' onclick=\"return false;\"/>';\r\n\r\n            sb[sb.length] = '<span id=\"' + ckid + '\" class=\"mini-icon ' + this._checkBoxCls + ' ' + (checked ? 'mini-tree-checkbox-checked' : '') + '\"></span>';\r\n        }\r\n\r\n        sb[sb.length] = '<span class=\"mini-tree-nodetext\">';\r\n        if (this._editingNode == node) {\r\n            var editId = this._id + \"$edit$\" + node._id;\r\n            var text = e.value;\r\n            sb[sb.length] = '<input id=\"' + editId + '\" type=\"text\" class=\"mini-tree-editinput\" value=\"' + text + '\"/>';\r\n        } else {\r\n            sb[sb.length] = e.cellHtml;\r\n        }\r\n\r\n        sb[sb.length] = '</span>';\r\n        sb[sb.length] = '</span>';\r\n\r\n        sb[sb.length] = '</div>';\r\n\r\n\r\n        if (isReturn) return sb.join('');\r\n    },\r\n\r\n    _createCheckNodeId: function (node) {\r\n        return this._id + \"$checkbox$\" + node._id;\r\n    },\r\n\r\n    _createTreeColumn: function (e) {\r\n        var node = e.record, column = e.column;\r\n\r\n        e.headerCls += ' mini-tree-treecolumn';\r\n        e.cellCls += ' mini-tree-treecell';\r\n        e.cellStyle += ';padding:0;';\r\n\r\n\r\n        var isLeaf = this.isLeaf(node);\r\n\r\n\r\n        e.cellHtml = this._createNodeTitle(node, null, e);\r\n        //e.rowCls += ' ' + cls;\r\n\r\n        if (node.checked != true && !isLeaf) {//1）父节点；2）没选中\r\n            //\t\t    var checkState = this.getCheckState(node);\t //@@@ 慢死了\r\n            //\t\t    if (checkState == \"indeterminate\") {\r\n\r\n            if (e.showCheckBox) {\r\n                this._renderCheckState(node);\r\n            }\r\n            //}\r\n        }\r\n    },\r\n\r\n    //    _createTreeColumn: function (e) {\r\n    //        var node = e.record, column = e.column;\r\n\r\n    //        //        if (e.showCheckBox) {\r\n    //        //            node.checkable = true;\r\n    //        //        }        \r\n\r\n    //        e.headerCls += ' mini-tree-treecolumn';\r\n    //        e.cellCls += ' mini-tree-treecell';\r\n    //        e.cellStyle += ';padding:0;vertical-align:top;';\r\n    //        //e.cellInnerStyle = 'padding:0px';\r\n\r\n    //        var isLeaf = this.isLeaf(node);\r\n    //        var level = this.getLevel(node);\r\n\r\n    //        if (!isLeaf) {\r\n    //            e.rowCls += \" mini-tree-parentNode\";\r\n    //        }\r\n\r\n    //        var sb = [];\r\n    //        sb[sb.length] = '<div class=\"mini-tree-nodetitle\" style=\"padding-left:';\r\n    //        sb[sb.length] = (level + 1) * 18;\r\n    //        sb[sb.length] = 'px;\">';\r\n    //        //        e.cellInnerCls = 'mini-tree-nodetitle';\r\n    //        //        e.cellInnerStyle = 'padding-left:' + (level + 1) * 18 + \"px\";\r\n\r\n    //        var left = 0;\r\n\r\n    //        for (var i = 0; i <= level; i++) {\r\n    //            if (i == level && !isLeaf) break;\r\n    //            if (this.showTreeLine) {\r\n    //                sb[sb.length] = '<span class=\"mini-tree-indent \" style=\"left:' + left + 'px;\"></span>';\r\n    //            }\r\n    //            left += 18;\r\n    //        }\r\n    //        var cls = \"\";\r\n    //        if (!isLeaf) {\r\n    //            cls = this.isExpandedNode(node) ? 'mini-tree-expand' : 'mini-tree-collapse';\r\n    //            var _left = mini.isIE6 ? left - 18 * (level+1) : left;\r\n    //            sb[sb.length] = '<span class=\"mini-tree-ec-icon\" style=\"left:' + (_left) + 'px;\"></span>';\r\n    //            left += 18;\r\n    //        }\r\n    //        sb[sb.length] = '<div class=\"mini-tree-nodeshow\">';\r\n\r\n\r\n    //        if (e.showTreeIcon) {\r\n    //            var icon = e.iconCls;\r\n    //            var _left = mini.isIE6 ? left - 18 * (level+1) : left;\r\n    //            sb[sb.length] = '<div class=\"' + icon + ' mini-tree-nodeicon\" style=\"left:' + _left + 'px;\"></div>';\r\n    //        }\r\n    //        var offset = e.showTreeIcon ? 18 : 0;\r\n\r\n    //        if (e.showCheckBox) {\r\n    //            left += 18;\r\n    //            offset += 18;\r\n    //            var id = this._id + \"$checkbox$\" + node._id;\r\n    //            var checked = node.checked ? \"checked\" : \"\";\r\n    //            var checkable = this.getCheckable(node) ? \"\" : \"disabled\";\r\n    //            var _left = mini.isIE6 ? left - 18 * (level + 1) : left;\r\n    //            sb[sb.length] = '<input type=\"' + e.checkBoxType + '\" id=\"' + id + '\" ' + checked + ' ' + checkable + ' class=\"mini-tree-checkbox\" style=\"left:' + _left + 'px;\" hideFocus onclick=\"return false\"/>';\r\n    //        }\r\n\r\n    //        sb[sb.length] = '<div class=\"mini-tree-nodetext\" style=\"margin-left:' + offset + 'px;\">';\r\n    //        sb[sb.length] = e.cellHtml;\r\n    //        sb[sb.length] = '</div></div></div>';\r\n\r\n    //        e.cellHtml = sb.join('');\r\n    //        e.rowCls += ' ' + cls;\r\n\r\n    //        if (node.checked != true && !isLeaf) {//1）父节点；2）没选中\r\n    //            var checkState = this.getCheckState(node);\r\n    //            if (checkState == \"indeterminate\") {\r\n    //                this._renderCheckState(node);\r\n    //            }\r\n    //        }\r\n    //    },\r\n    _renderCheckState: function (node) {\r\n        if (!this._renderCheckStateNodes) this._renderCheckStateNodes = [];\r\n        this._renderCheckStateNodes.push(node);\r\n        if (this._renderCheckStateTimer) return;\r\n        var me = this;\r\n        this._renderCheckStateTimer = setTimeout(function () {\r\n\r\n            me._renderCheckStateTimer = null;\r\n            var nodes = me._renderCheckStateNodes;\r\n            me._renderCheckStateNodes = null;\r\n            for (var i = 0, l = nodes.length; i < l; i++) {\r\n                me._doCheckNodeEl(nodes[i]);\r\n            }\r\n\r\n\r\n        }, 1);\r\n    },\r\n    //创建树形层次HTML：非动态模式时有用\r\n    _createNodeHTML: function (node, columns, viewIndex, sb, hasChild) {\r\n        var isReturn = !sb;\r\n        if (!sb) sb = [];\r\n\r\n        var source = this._dataSource;\r\n\r\n        //node html\r\n        var rowIndex = source.getDataView().indexOf(node); //数据量大，index有点慢\r\n        this._createRowHTML(node, rowIndex, columns, viewIndex, sb);\r\n\r\n        //nodes html\r\n        if (hasChild !== false) {\r\n            var cnodes = source.getChildNodes(node);\r\n            var isVisible = this.isVisibleNode(node);\r\n            if (cnodes && cnodes.length > 0) {\r\n                var isExpand = this.isExpandedNode(node);\r\n                if (isExpand == true) {\r\n                    var style = (isExpand && isVisible) ? \"\" : \"display:none\";\r\n                    var nodesId = this._createNodesId(node, viewIndex);\r\n                    sb[sb.length] = '<tr class=\"mini-tree-nodes-tr\" style=\"';\r\n                    if (mini.isIE) sb[sb.length] = style;\r\n                    //sb[sb.length] = '\" ><td style=\"width:0;\"></td><td class=\"mini-tree-nodes-td\" colspan=\"';\r\n                    sb[sb.length] = '\" ><td class=\"mini-tree-nodes-td\" colspan=\"';\r\n                    sb[sb.length] = columns.length + 1;\r\n                    sb[sb.length] = '\" >';\r\n\r\n                    sb[sb.length] = '<div class=\"mini-tree-nodes\" id=\"';\r\n                    sb[sb.length] = nodesId;\r\n                    sb[sb.length] = '\" style=\"';\r\n                    sb[sb.length] = style;\r\n                    sb[sb.length] = '\">';\r\n                    this._createNodesHTML(cnodes, columns, viewIndex, sb);\r\n                    sb[sb.length] = '</div>';\r\n\r\n                    sb[sb.length] = '</td></tr>';\r\n                }\r\n            }\r\n        }\r\n        if (isReturn) return sb.join('');\r\n    },\r\n    _createNodesHTML: function (nodes, columns, viewIndex, sb) {\r\n        if (!nodes) return '';\r\n        var isReturn = !sb;\r\n        if (!sb) sb = [];\r\n\r\n        sb.push('<table class=\"mini-grid-table\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">');\r\n        sb.push(this._createTopRowHTML(columns, true));\r\n        if (columns.length > 0) {\r\n            for (var j = 0, k = nodes.length; j < k; j++) {\r\n                var node = nodes[j];\r\n                this._createNodeHTML(node, columns, viewIndex, sb);\r\n            }\r\n        }\r\n        sb.push('</table>');\r\n        if (isReturn) return sb.join('');\r\n    },\r\n\r\n    _createRowsHTML: function (columns, viewIndex) {\r\n        if (this.isVirtualScroll()) {\r\n            return mini.TreeGrid.superclass._createRowsHTML.apply(this, arguments);\r\n        }\r\n\r\n        var source = this._dataSource, me = this;\r\n\r\n        var sb = [];\r\n\r\n        //第一次进来，不创建节点\r\n        var nodes = [];\r\n        var rootNode = source.getRootNode();\r\n        if (this._useEmptyView !== true) {\r\n            nodes = source.getChildNodes(rootNode);\r\n        }\r\n        //createNodes(nodes);\r\n\r\n        var nodesEl = viewIndex == 2 ? this._rowsViewEl.firstChild : this._rowsLockEl.firstChild;\r\n        nodesEl.id = this._createNodesId(rootNode, viewIndex);\r\n\r\n        this._createNodesHTML(nodes, columns, viewIndex, sb);\r\n\r\n        return sb.join('');\r\n    },\r\n    /////////////////////////////////\r\n    _createNodesId: function (node, viewIndex) {\r\n        var id = this._id + \"$nodes\" + viewIndex + \"$\" + node._id;\r\n        return id;\r\n    },\r\n    _getNodeEl: function (node, viewIndex) {\r\n        //if (this.isVisibleNode(node) == false) return null;\r\n        return this._getRowEl(node, viewIndex);\r\n    },\r\n    _getNodesEl: function (node, viewIndex) {\r\n        //if (this.isVisibleNode(node) == false) return null;\r\n        node = this.getNode(node);\r\n        var id = this._createNodesId(node, viewIndex);\r\n        return document.getElementById(id);\r\n    },\r\n    _getNodesTr: function (node, viewIndex) {\r\n        //if (this.isVisibleNode(node) == false) return null;\r\n        var el = this._getNodesEl(node, viewIndex);\r\n        if (el) return el.parentNode.parentNode;\r\n    },\r\n    /////////////////////////////////////////////////\r\n\r\n    checkOnTextClick: false,\r\n    setCheckOnTextClick: function (value) {\r\n        this.checkOnTextClick = value;\r\n    },\r\n    getCheckOnTextClick: function () {\r\n        return this.checkOnTextClick;\r\n    },\r\n\r\n    setTreeColumn: function (value) {\r\n        this._treeColumn = value;\r\n        this.deferUpdate();\r\n    },\r\n    getTreeColumn: function () {\r\n        return this._treeColumn;\r\n    },\r\n    setShowTreeIcon: function (value) {\r\n        this.showTreeIcon = value;\r\n        this.deferUpdate();\r\n    },\r\n    getShowTreeIcon: function () {\r\n        return this.showTreeIcon;\r\n    },\r\n    setShowCheckBox: function (value) {\r\n        this.showCheckBox = value;\r\n        this.deferUpdate();\r\n    },\r\n    getShowCheckBox: function () {\r\n        return this.showCheckBox;\r\n    },\r\n    setShowRadioButton: function (value) {\r\n        this.showRadioButton = value;\r\n        this.deferUpdate();\r\n    },\r\n    getShowRadioButton: function () {\r\n        return this.showRadioButton;\r\n    },\r\n    setCheckBoxType: function (value) {\r\n        this._checkBoxType = value;\r\n        this._doUpdateCheckState();\r\n    },\r\n    getCheckBoxType: function () {\r\n        return this._checkBoxType;\r\n    },\r\n    setIconsField: function (value) {\r\n        this._iconsField = value;\r\n    },\r\n    getIconsField: function () {\r\n        return this._iconsField;\r\n    },\r\n    //////////////////////////////////\r\n    _getNodeIcon: function (node) {\r\n        var icon = node[this.iconField];\r\n        if (!icon) {\r\n            if (this.isLeaf(node)) icon = this.leafIconCls;\r\n            else icon = this.folderIconCls;\r\n        }\r\n        return icon;\r\n    },\r\n    _getCheckBoxEl: function (node) {\r\n        if (this.isVisibleNode(node) == false) return null;\r\n        var id = this._id + \"$checkbox$\" + node._id;\r\n        return mini.byId(id, this.el);\r\n    },\r\n    //////////////////////////\r\n\r\n    //    setRootNodeText: function (value) {\r\n    //        var node = this.getRootNode();\r\n    //        node[this._textField] = value;\r\n    //        this._doUpdateRowEl(node);\r\n    //    },\r\n\r\n    //////////////////////////\r\n    useAnimation: true,\r\n    _updateNodeTimer: null,\r\n    _doExpandCollapseNode: function (node) {\r\n        var that = this;\r\n        if (that._updateNodeTimer) {\r\n            clearTimeout(that._updateNodeTimer);\r\n            that._updateNodeTimer = null;\r\n        }\r\n\r\n        var sss = new Date();\r\n        if (this.isVirtualScroll() == true) {\r\n            //this._stopDeferUpdate();\r\n            if (!this._updateTimer) {\t//不能有deferUpdate,以及吱声\r\n                that._updateNodeTimer = setTimeout(function () {\r\n                    that._updateNodeTimer = null;\r\n\r\n                    that.doUpdateRows();         //30条，55ms\r\n                    //this._stopUpdateTableView();\r\n                    that.deferLayout(50);\r\n                }, 5);\r\n            }\r\n            //                    setTimeout(function () {\r\n            //                        alert(new Date() - sss);\r\n            //                    }, 20);\r\n            return;\r\n        }\r\n\r\n        //\r\n\r\n        function onCallback() {\r\n            this._doUpdateTreeNodeEl(node);\r\n            this.deferLayout(20);\r\n        }\r\n\r\n        //this._layoutColumns(30);\r\n\r\n        //////////////////////////////////////////////////////////////////////\r\n        //if (this._inAniming) {\r\n\r\n        if (false || mini.isIE6 || !this.useAnimation || this.isFrozen()) {        //ie6不显示动画\r\n            onCallback.call(this);\r\n        } else {\r\n            var expanded = this.isExpandedNode(node);\r\n            function doExpandAnim(node, viewIndex, onCallback) {\r\n                var nodesEl = this._getNodesEl(node, viewIndex);\r\n                if (nodesEl) {\r\n                    var h = mini.getHeight(nodesEl);\r\n                    nodesEl.style.overflow = \"hidden\";\r\n                    nodesEl.style.height = \"0px\";\r\n                    var config = { height: h + \"px\" };\r\n                    var sf = this;\r\n                    sf._inAniming = true;\r\n\r\n                    //setTimeout(function () {\r\n                    var jq = jQuery(nodesEl);\r\n                    jq.animate(\r\n                            config,\r\n                            250,\r\n                            function () {\r\n                                nodesEl.style.height = \"auto\";\r\n                                sf._inAniming = false;\r\n                                sf.doLayout();\r\n                                mini.repaint(nodesEl);\r\n                            }\r\n                        );\r\n                    //}, 1);\r\n                } else {\r\n                    //onCallback.call(this);\r\n                }\r\n            }\r\n            function doCollapseAnim(node, viewIndex, onCallback) {\r\n                var nodesEl = this._getNodesEl(node, viewIndex);\r\n                if (nodesEl) {\r\n                    var h = mini.getHeight(nodesEl);\r\n                    var config = { height: 0 + \"px\" };\r\n                    var sf = this;\r\n                    sf._inAniming = true;\r\n                    var jq = jQuery(nodesEl);\r\n                    jq.animate(\r\n                        config,\r\n                        180,\r\n                        function () {\r\n                            nodesEl.style.height = \"auto\";\r\n                            sf._inAniming = false;\r\n                            if (onCallback) onCallback.call(sf);\r\n                            sf.doLayout();\r\n                            mini.repaint(nodesEl);\r\n\r\n                        }\r\n                    );\r\n                } else {\r\n                    if (onCallback) onCallback.call(this);\r\n                }\r\n            }\r\n\r\n            var that = this;\r\n            if (expanded) {\r\n                onCallback.call(this);\r\n                doExpandAnim.call(this, node, 2);\r\n                doExpandAnim.call(this, node, 1);\r\n            } else {\r\n                doCollapseAnim.call(this, node, 2, onCallback);\r\n                doCollapseAnim.call(this, node, 1);\r\n            }\r\n        }\r\n    },\r\n    __OnTreeCollapse: function (e) {\r\n        this._doExpandCollapseNode(e.node);\r\n    },\r\n    __OnTreeExpand: function (e) {\r\n        this._doExpandCollapseNode(e.node);\r\n    },\r\n    _doCheckNodeEl: function (node) {\r\n        //        var ck = this._getCheckBoxEl(node);\r\n        //        if (ck) {\r\n        //            \r\n        //        }\r\n        //alert(1);\r\n        var ck = this._getCheckBoxEl(node);\r\n        if (ck) {\r\n            var checkModel = this.getCheckModel();\r\n            //            ck.checked = node.checked;\r\n            //            ck.indeterminate = false;\r\n            mini.removeClass(ck, \"mini-tree-checkbox-indeterminate\");\r\n\r\n            var isIndeterminate = node.indeterminate && !node.checked;\r\n\r\n            if (checkModel == \"cascade\" || isIndeterminate) {\r\n                var checkState = isIndeterminate ? \"indeterminate\" : this.getCheckState(node);\r\n                if (checkState == \"indeterminate\") {\r\n                    //ck.indeterminate = true;\r\n                    mini.addClass(ck, \"mini-tree-checkbox-indeterminate\");\r\n                } else {\r\n                    //ck.indeterminate = false;\r\n                    mini.removeClass(ck, \"mini-tree-checkbox-indeterminate\");\r\n                }\r\n            }\r\n\r\n            if (node.checked) {\r\n                mini.addClass(ck, \"mini-tree-checkbox-checked\");\r\n            } else {\r\n                mini.removeClass(ck, \"mini-tree-checkbox-checked\");\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n    __OnCheckChanged: function (e) {\r\n\r\n        //var checkModel = this.getCheckModel();\r\n        for (var i = 0, l = e._nodes.length; i < l; i++) {\r\n            var node = e._nodes[i];\r\n            this._doCheckNodeEl(node);\r\n            //            var ck = this._getCheckBoxEl(node);\r\n            //            if (ck) {\r\n            //                ck.checked = node.checked;\r\n\r\n            //                if (checkModel == \"cascade\") {\r\n            //                    var checkState = this.getCheckState(node);\r\n            //                    if (checkState == \"indeterminate\") {\r\n            //                        ck.indeterminate = true;\r\n            //                    } else {\r\n            //                        ck.indeterminate = false;\r\n            //                    }\r\n            //                }\r\n            //            }\r\n        }\r\n\r\n        if (this._checkChangedTimer) {\r\n            clearTimeout(this._checkChangedTimer);\r\n            this._checkChangedTimer = null;\r\n        }\r\n        var me = this;\r\n        this._checkChangedTimer = setTimeout(function () {\r\n            me._checkChangedTimer = null;\r\n            //////me.fire(\"checkchanged\", { nodes: e.nodes, checked: e.checked });\r\n            me.fire(\"_checkchanged\");      //@刚注释\r\n        }, 1);\r\n\r\n    },\r\n    /////////////////////////////////\r\n    //    _doMoveRowEl: function (row, index) {\r\n    //    debugger\r\n    //        this._doRemoveRowEl(row);\r\n    //        this._doAddRowEl(row);\r\n    //    },\r\n    /////////////////////////////////\r\n    //    _doUpdateCheckState: function () {\r\n    //        //第三态\r\n    //        //autoCheckParent\r\n\r\n    //    },\r\n    _tryToggleCheckNode: function (node) {\r\n        if (node.enabled === false) return;\r\n\r\n        var checkable = this.getCheckable(node);\r\n        if (checkable == false) return;\r\n\r\n        var checked = this.isCheckedNode(node);\r\n\r\n        var e = { node: node, cancel: false, checked: checked, isLeaf: this.isLeaf(node) };\r\n        this.fire(\"beforenodecheck\", e);\r\n        if (e.cancel) return;\r\n\r\n        this._dataSource.doCheckNodes(node, !checked, true);\r\n        //        if (this.getAutoCheckParent()) {\r\n        //        \r\n        //            this._dataSource.doCheckNodes(node, !checked, true);\r\n        //        } else {\r\n        //            this._dataSource.doCheckNodes(node, !checked, true);\r\n        //        }\r\n        //        this._doUpdateCheckState();\r\n        this.fire(\"nodecheck\", e);\r\n    },\r\n    _tryToggleNode: function (node) {\r\n        var isExpanded = this.isExpandedNode(node);\r\n        var e = { node: node, cancel: false };\r\n\r\n        if (isExpanded) {\r\n            this.fire(\"beforecollapse\", e);\r\n            if (e.cancel == true) return;\r\n            this.collapseNode(node);\r\n\r\n            e.type = \"collapse\";\r\n            this.fire(\"collapse\", e);\r\n        } else {\r\n            this.fire(\"beforeexpand\", e);\r\n            if (e.cancel == true) return;\r\n            this.expandNode(node);\r\n\r\n            e.type = \"expand\";\r\n            this.fire(\"expand\", e);\r\n        }\r\n    },\r\n    _OnCellMouseDown: function (e) {\r\n        //if (mini.findParent(e.htmlEvent.target, 'mini-tree-editinput')) return;\r\n        if (mini.findParent(e.htmlEvent.target, this._eciconCls)) {\r\n        } else if (mini.findParent(e.htmlEvent.target, 'mini-tree-checkbox')) {\r\n        } else {\r\n            this.fire(\"cellmousedown\", e);\r\n        }\r\n    },\r\n    _OnCellClick: function (e) {\r\n        //if (mini.findParent(e.htmlEvent.target, 'mini-tree-editinput')) return;\r\n        //        if (mini.findParent(e.htmlEvent.target, this._eciconCls)) {\r\n        //            //this._tryToggleNode(e.record);\r\n        //        } else \r\n        if (mini.findParent(e.htmlEvent.target, this._eciconCls)) return;\r\n\r\n\r\n        if (mini.findParent(e.htmlEvent.target, 'mini-tree-checkbox') || this.checkOnTextClick) {\r\n            this._tryToggleCheckNode(e.record);\r\n        } else {\r\n            this.fire(\"cellclick\", e);\r\n        }\r\n    },\r\n    __OnNodeDblClick: function (e) {\r\n        //        if (this.expandOnDblClick && !e.isLeaf && !this._inAniming) {\r\n        //            this._tryToggleNode(e.node);\r\n        //        }\r\n    },\r\n    __OnNodeClick: function (e) {\r\n        //        if (this.expandOnNodeClick && !e.isLeaf && !this._inAniming) {\r\n        //            this._tryToggleNode(e.node);\r\n        //        }\r\n    },\r\n    ////////////////////////////////////////////////////////////////////\r\n    setNodeText: function (node, text) {\r\n        node = this.getNode(node);\r\n        if (!node) return;\r\n        var obj = {};\r\n        obj[this.getTextField()] = text;\r\n        this.updateNode(node, obj);\r\n        //        node[this.getTextField()] = text;\r\n        //        this._doUpdateNodeTitle(node);\r\n        //this._changed = true;\r\n    },\r\n    setNodeIconCls: function (node, iconCls) {\r\n        node = this.getNode(node);\r\n        if (!node) return;\r\n        var obj = {};\r\n        obj[this.iconField] = iconCls;\r\n        this.updateNode(node, obj);\r\n        //        node[this.iconField] = iconCls;\r\n        //        this._doUpdateNodeTitle(node);\r\n        //this._changed = true;\r\n    },\r\n    setIconField: function (value) {\r\n        this.iconField = value;\r\n    },\r\n    getIconField: function () {\r\n        return this.iconField;\r\n    },\r\n    setAllowSelect: function (value) {\r\n        this.setAllowRowSelect(value);\r\n    },\r\n    getAllowSelect: function () {\r\n        return this.getAllowRowSelect();\r\n    },\r\n    setShowExpandButtons: function (value) {\r\n        if (this.showExpandButtons != value) {\r\n            this.showExpandButtons = value;\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    getShowExpandButtons: function () {\r\n        return this.showExpandButtons;\r\n    },\r\n    setShowTreeLines: function (value) {\r\n        this.showTreeLines = value;\r\n        if (value == true) {\r\n            mini.addClass(this.el, 'mini-tree-treeLine');\r\n        } else {\r\n            mini.removeClass(this.el, 'mini-tree-treeLine');\r\n        }\r\n    },\r\n    getShowTreeLines: function () {\r\n        return this.showTreeLines;\r\n    },\r\n    setShowArrow: function (value) {\r\n        this.showArrow = value;\r\n        if (value == true) {\r\n            mini.addClass(this.el, 'mini-tree-showArrows');\r\n        } else {\r\n            mini.removeClass(this.el, 'mini-tree-showArrows');\r\n        }\r\n    },\r\n    getShowArrow: function () {\r\n        return this.showArrow;\r\n    },\r\n    setLeafIcon: function (value) {\r\n        this.leafIcon = value;\r\n    },\r\n    getLeafIcon: function () {\r\n        return this.leafIcon;\r\n    },\r\n    setFolderIcon: function (value) {\r\n        this.folderIcon = value;\r\n    },\r\n    getFolderIcon: function () {\r\n        return this.folderIcon;\r\n    },\r\n    getExpandOnDblClick: function () {\r\n        return this.expandOnDblClick;\r\n    },\r\n    setExpandOnNodeClick: function (value) {\r\n        this.expandOnNodeClick = value;\r\n        if (value) {\r\n            mini.addClass(this.el, \"mini-tree-nodeclick\");\r\n        } else {\r\n            mini.removeClass(this.el, \"mini-tree-nodeclick\");\r\n        }\r\n    },\r\n    getExpandOnNodeClick: function () {\r\n        return this.expandOnNodeClick;\r\n    },\r\n    setLoadOnExpand: function (value) {\r\n        this.loadOnExpand = value;\r\n    },\r\n    getLoadOnExpand: function () {\r\n        return this.loadOnExpand;\r\n    },\r\n\r\n    hideNode: function (node) {\r\n        node = this.getNode(node);\r\n        if (!node) return;\r\n        node.visible = false;\r\n\r\n        this._doUpdateTreeNodeEl(node);\r\n\r\n        var el1 = this._getNodeEl(node, 1);\r\n        var el2 = this._getNodeEl(node, 2);\r\n        if (el1) el1.style.display = \"none\";\r\n        if (el2) el2.style.display = \"none\";\r\n\r\n    },\r\n    showNode: function (node) {\r\n\r\n        node = this.getNode(node);\r\n        if (!node) return;\r\n        node.visible = true;\r\n\r\n        this._doUpdateTreeNodeEl(node);\r\n        //        var el = this._getNodeEl(node);\r\n        //        el.style.display = \"\";\r\n    },\r\n    enableNode: function (node) {\r\n        node = this.getNode(node);\r\n        if (!node) return;\r\n        node.enabled = true;\r\n\r\n        var el1 = this._getNodeEl(node, 1);\r\n        var el2 = this._getNodeEl(node, 2);\r\n        if (el1) mini.removeClass(el1, \"mini-disabled\");\r\n        if (el2) mini.removeClass(el2, \"mini-disabled\");\r\n        var ck = this._getCheckBoxEl(node);\r\n        if (ck) ck.disabled = false;\r\n    },\r\n    disableNode: function (node) {\r\n        node = this.getNode(node);\r\n        if (!node) return;\r\n\r\n        node.enabled = false;\r\n        var el1 = this._getNodeEl(node, 1);\r\n        var el2 = this._getNodeEl(node, 2);\r\n        if (el1) mini.addClass(el1, \"mini-disabled\");\r\n        if (el2) mini.addClass(el2, \"mini-disabled\");\r\n\r\n        var ck = this._getCheckBoxEl(node);\r\n        if (ck) ck.disabled = true;\r\n    },\r\n\r\n\r\n\r\n    imgPath: '',\r\n    setImgPath: function (value) {\r\n        this.imgPath = value;\r\n    },\r\n    getImgPath: function () {\r\n        return this.imgPath;\r\n    },\r\n    imgField: 'img',\r\n    setImgField: function (value) {\r\n        this.imgField = value;\r\n    },\r\n    getImgField: function () {\r\n        return this.imgField;\r\n    },\r\n\r\n    ////////////////////////////////////////////////////////////////////\r\n    // HTML Tags\r\n    ////////////////////////////////////////////////////////////////////    \r\n    getAttrs: function (el) {\r\n        var attrs = mini.TreeGrid.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"value\", \"url\", \"idField\", \"textField\", \"iconField\", \"nodesField\", \"parentField\", \"valueField\", \"checkedField\",\r\n            \"leafIcon\", \"folderIcon\", \"leafField\",\r\n            \"ondrawnode\", \"onbeforenodeselect\", \"onnodeselect\", \"onnodemousedown\", \"onnodeclick\", \"onnodedblclick\",\r\n                \"onbeforenodecheck\", \"onnodecheck\",\r\n                \"onbeforeexpand\", \"onexpand\", \"onbeforecollapse\", \"oncollapse\",\r\n                \"dragGroupName\", \"dropGroupName\", \"onendedit\",\r\n                \"expandOnLoad\", \"ondragstart\", \"onbeforedrop\", \"ondrop\", \"ongivefeedback\",\r\n                \"treeColumn\", \"onaddnode\", \"onremovenode\", \"onmovenode\", \"imgPath\", \"imgField\", \"hoverMode\"\r\n             ]\r\n        );\r\n\r\n        mini._ParseBool(el, attrs,\r\n            [\"allowSelect\", \"showCheckBox\", \"showRadioButton\", \"showExpandButtons\", \"showTreeIcon\", \"showTreeLines\", \"checkRecursive\",\r\n                \"enableHotTrack\", \"showFolderCheckBox\", \"resultAsTree\",\r\n                \"allowDrag\", \"allowDrop\", \"showArrow\", \"expandOnDblClick\", \"removeOnCollapse\",\r\n                \"autoCheckParent\", \"loadOnExpand\", \"expandOnNodeClick\", \"useAnimation\", \"checkOnTextClick\"\r\n             ]\r\n        );\r\n\r\n        if (attrs.expandOnLoad) {\r\n            var level = parseInt(attrs.expandOnLoad);\r\n            if (mini.isNumber(level)) {\r\n                attrs.expandOnLoad = level;\r\n            } else {\r\n                attrs.expandOnLoad = attrs.expandOnLoad == \"true\" ? true : false;\r\n            }\r\n        }\r\n\r\n        var idField = attrs.idField || this.getIdField();\r\n        var textField = attrs.textField || this.getTextField();\r\n        var iconField = attrs.iconField || this.getIconField();\r\n        var nodesField = attrs.nodesField || this.getNodesField();\r\n\r\n        function parseNodes(nodes) {\r\n            var data = [];\r\n\r\n            for (var i = 0, l = nodes.length; i < l; i++) {\r\n                var node = nodes[i];\r\n                var cnodes = mini.getChildNodes(node);\r\n                var nodeTitle = cnodes[0];\r\n                var nodeChild = cnodes[1];\r\n\r\n                if (!nodeTitle || !nodeChild) nodeTitle = node;\r\n                var jqTitle = jQuery(nodeTitle);\r\n                var o = {};\r\n                var id = o[idField] = nodeTitle.getAttribute(\"value\"); //jqTitle.attr(\"value\");\r\n\r\n                o[iconField] = jqTitle.attr(\"iconCls\");\r\n                o[textField] = nodeTitle.innerHTML;\r\n                data.add(o);\r\n\r\n                //if(nodeTitle.innerHTML == \"所有客户\") debugger\r\n\r\n                var expanded = jqTitle.attr(\"expanded\");\r\n                if (expanded) {\r\n                    o.expanded = expanded == \"false\" ? false : true;\r\n                }\r\n\r\n                var allowSelect = jqTitle.attr(\"allowSelect\");\r\n                if (allowSelect) {\r\n                    o.allowSelect = allowSelect == \"false\" ? false : true;\r\n                }\r\n\r\n                if (!nodeChild) continue;\r\n                var cs = mini.getChildNodes(nodeChild);\r\n                var cdata = parseNodes(cs);\r\n                if (cdata.length > 0) {\r\n                    o[nodesField] = cdata;\r\n                }\r\n            }\r\n            return data;\r\n        }\r\n\r\n        var data = parseNodes(mini.getChildNodes(el));\r\n        if (data.length > 0) {\r\n            attrs.data = data;\r\n        }\r\n\r\n        if (!attrs.idField && attrs.valueField) {\r\n            attrs.idField = attrs.valueField;\r\n        }\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.TreeGrid, \"TreeGrid\");\r\n\r\n\r\n//Tree\r\nmini.Tree = function () {\r\n    mini.Tree.superclass.constructor.apply(this, arguments);\r\n\r\n    var columns = [\r\n        { name: \"node\", header: \"\", field: this.getTextField(), width: 'auto', allowDrag: true,\r\n            //autoEscape: false,\r\n            editor: { type: \"textbox\" }\r\n        }\r\n    ];\r\n    this._columnModel.setColumns(columns);\r\n    this._column = this._columnModel.getColumn(\"node\");\r\n\r\n    mini.removeClass(this.el, 'mini-treegrid');\r\n    mini.addClass(this.el, 'mini-tree-nowrap');\r\n    this.setBorderStyle(\"border:0\"); \r\n};\r\nmini.extend(mini.Tree, mini.TreeGrid, {\r\n\r\n    //    _hasSpaceTd: function () {\r\n    //        return !(mini.isIE6 || mini.isIE7);\r\n    //    },\r\n\r\n    _userEmptyTd: (mini.isChrome || mini.isIE6 || mini.isIE7) ? false : true,\r\n\r\n    setTextField: function (value) {\r\n        this._dataSource.setTextField(value);\r\n        this._columnModel.updateColumn('node', { field: value });\r\n        this.textField = value;\r\n    },\r\n\r\n    uiCls: \"mini-tree\",\r\n\r\n    hoverMode: 'title',\r\n\r\n    _rowHoverCls: \"mini-tree-node-hover\",\r\n    _rowSelectedCls: \"mini-tree-selectedNode\",\r\n    _getRecordByEvent: function (e, inNodeShow) {\r\n        \r\n        if (this.hoverMode == 'node') inNodeShow = false;\r\n\r\n        var row = mini.Tree.superclass._getRecordByEvent.call(this, e);\r\n        if (inNodeShow === false) return row;\r\n        if (row && mini.findParent(e.target, \"mini-tree-nodeshow\")) {\r\n            return row;\r\n        }\r\n        return null;\r\n    },\r\n\r\n    _treeColumn: \"node\",\r\n    //_fitColumns: false,\r\n\r\n    defaultRowHeight: 22,\r\n    _getRowHeight: function (record) {\r\n        var h = this.defaultRowHeight;\r\n        if (record._height) {\r\n            h = parseInt(record._height);\r\n            if (isNaN(parseInt(record._height))) h = rowHeight;\r\n        }\r\n        //        h -= 4; //padding-top/padding-bottom\r\n        //        //if (!mini.isOpera) {\r\n        //        h -= 1;\r\n        //}\r\n        return h;\r\n    },\r\n\r\n    showHeader: false,\r\n    showTopbar: false,\r\n    showFooter: false,\r\n    showColumns: false,\r\n\r\n    showHGridLines: false,\r\n    showVGridLines: false,\r\n\r\n    showTreeLines: true,\r\n\r\n    setTreeColumn: null,\r\n    setColumns: null,\r\n    getColumns: null,\r\n\r\n    frozen: null,\r\n    unFrozen: null,\r\n\r\n    showModified: false,\r\n\r\n    /////////////////////////////\r\n\r\n    /////////////////////////////\r\n    _OnCellMouseDown: function (e) {\r\n        if (this._editInput) this._editInput.blur();\r\n        this.fire(\"cellmousedown\", e);\r\n    },\r\n\r\n    beginEdit: function (node) {\r\n        node = this.getNode(node);\r\n        if (!node) return;\r\n\r\n        var column = this.getColumn(0);\r\n        var value = mini._getMap(column.field, node);\r\n        var e = { record: node, node: node, column: column, field: column.field, value: value, cancel: false };\r\n        this.fire(\"cellbeginedit\", e);\r\n        if (e.cancel == true) return;\r\n\r\n        this._editingNode = node;\r\n        this._doUpdateNodeTitle(node);\r\n\r\n\r\n        var that = this;\r\n        function doEdit() {\r\n            var editId = that._id + \"$edit$\" + node._id;\r\n            that._editInput = document.getElementById(editId);\r\n\r\n            that._editInput.focus();\r\n\r\n            mini.selectRange(that._editInput, 0, 1000);\r\n            mini.on(that._editInput, \"keydown\", that.__OnEditInputKeyDown, that);\r\n            mini.on(that._editInput, \"blur\", that.__OnEditInputBlur, that);\r\n        }\r\n        setTimeout(function () {\r\n            doEdit();\r\n        }, 100);\r\n        doEdit();\r\n    },\r\n    cancelEdit: function (update) {\r\n        var node = this._editingNode;\r\n        this._editingNode = null;\r\n        if (node) {\r\n            if (update !== false) this._doUpdateNodeTitle(node);\r\n            mini.un(this._editInput, \"keydown\", this.__OnEditInputKeyDown, this);\r\n            mini.un(this._editInput, \"blur\", this.__OnEditInputBlur, this);\r\n        }\r\n        this._editInput = null;\r\n        //this.fire(\"endedit\", {node: });\r\n    },\r\n    __OnEditInputKeyDown: function (e) {\r\n        if (e.keyCode == 13) {\r\n            var node = this._editingNode;\r\n            var text = this._editInput.value;\r\n            this._editingNode = null;\r\n            this.setNodeText(node, text);\r\n            this.cancelEdit(false);\r\n            this.fire(\"endedit\", { node: node, text: text });\r\n        } else if (e.keyCode == 27) {\r\n            this.cancelEdit();\r\n        }\r\n    },\r\n    __OnEditInputBlur: function (e) {\r\n        //if (mini.findParent(e.target, 'mini-tree-editinput')) return;\r\n        var node = this._editingNode;\r\n        if (node) {\r\n            var text = this._editInput.value;\r\n            this.cancelEdit();\r\n            this.setNodeText(node, text);\r\n            this.fire(\"endedit\", { node: node, text: text });\r\n        }\r\n    },\r\n    /////////////////////////\r\n    //ie6 bug\r\n    addRowCls: function (row, cls) {\r\n        var d1 = this._getRowEl(row, 1);\r\n        var d2 = this._getRowEl(row, 2);\r\n        if (d1) mini.addClass(d1, cls);\r\n        if (d2) mini.addClass(d2, cls);\r\n\r\n        //fix ie6/7\r\n        if (d1) mini.addClass(d1.cells[1], cls);\r\n        if (d2) mini.addClass(d2.cells[1], cls);\r\n    },\r\n    removeRowCls: function (row, cls) {\r\n        var d1 = this._getRowEl(row, 1);\r\n        var d2 = this._getRowEl(row, 2);\r\n        if (d1) {\r\n            mini.removeClass(d1, cls);\r\n        }\r\n        if (d2) {\r\n            mini.removeClass(d2, cls);\r\n        }\r\n\r\n        //fix ie6/7     hover,seleced 没效果，必须加载td上才可以\r\n        if (d1) mini.removeClass(d1.cells[1], cls);\r\n        if (d2) mini.removeClass(d2.cells[1], cls);\r\n    },\r\n    scrollIntoView: function (node) {\r\n        node = this.getNode(node);\r\n        if (!node) return;\r\n\r\n        if (!this.isVisibleNode(node)) {\r\n            this.expandPath(node);\r\n        }\r\n        var that = this;\r\n        setTimeout(function () {\r\n//            var itemEl = that._getNodeEl(node, 2);\r\n//            mini.scrollIntoView(itemEl, that._rowsViewEl, false);\r\n            \r\n            if (that.isVirtualScroll()) {\r\n                mini.Tree.superclass.scrollIntoView.call(that, node);\r\n            } else {\r\n\r\n                var itemEl = that._getNodeEl(node, 2);\r\n                mini.scrollIntoView(itemEl, that._rowsViewEl, false);\r\n            }\r\n\r\n        }, 10);\r\n    }\r\n});\r\nmini.regClass(mini.Tree, \"Tree\");\r\n\r\n/////////////////////////////////////////\r\n//1)树折叠\r\nmini._Tree_Expander = function (grid) {\r\n    this.owner = grid;\r\n\r\n    mini.on(grid.el, \"click\", this.__OnClick, this);\r\n    mini.on(grid.el, \"dblclick\", this.__OnDblClick, this);    \r\n}\r\nmini._Tree_Expander.prototype = {\r\n    _canToggle: function () {\r\n        return !this.owner._dataSource._isNodeLoading();\r\n    },\r\n    __OnClick: function (e) {\r\n        var tree = this.owner;\r\n        var node = tree._getRecordByEvent(e, false);\r\n        if (!node || node.enabled === false) return;\r\n        if (mini.findParent(e.target, 'mini-tree-checkbox')) return;\r\n\r\n        var isLeaf = tree.isLeaf(node);\r\n\r\n        if (mini.findParent(e.target, tree._eciconCls)) {\r\n            if (this._canToggle() == false) return;\r\n            tree._tryToggleNode(node);\r\n        }\r\n        else if (tree.expandOnNodeClick && !isLeaf && !tree._inAniming) {\r\n            if (this._canToggle() == false) return;\r\n            tree._tryToggleNode(node);\r\n        }\r\n    },\r\n    __OnDblClick: function (e) {\r\n\r\n        var tree = this.owner;\r\n        var node = tree._getRecordByEvent(e, false);\r\n        if (!node || node.enabled === false) return;\r\n\r\n        if (tree.isEditingNode(node)) return\r\n\r\n        var isLeaf = tree.isLeaf(node);\r\n\r\n        if (tree._inAniming) return;\r\n\r\n        if (mini.findParent(e.target, tree._eciconCls)) {\r\n            return;\r\n        }\r\n        if (mini.findParent(e.target, \"mini-tree-checkbox\")) {\r\n            return;\r\n        }\r\n        if (tree.expandOnNodeClick) {\r\n            return;\r\n        }\r\n        if (tree.expandOnDblClick && !isLeaf) {\r\n            if (this._canToggle() == false) return;\r\n            e.preventDefault();\r\n            tree._tryToggleNode(node);\r\n        }\r\n\r\n    }\r\n}\r\n//2)异步加载子节点\r\nmini._Tree_AsyncLoader = function (grid) {\r\n    this.owner = grid;\r\n    //grid.on(\"beforeexpand\", this.__OnBeforeNodeExpand, this);\r\n    grid.on(\"expand\", this.__OnBeforeNodeExpand, this);\r\n}\r\nmini._Tree_AsyncLoader.prototype = {\r\n    __OnBeforeNodeExpand: function (e) {\r\n        var tree = this.owner;\r\n        var node = e.node;\r\n        var isLeaf = tree.isLeaf(node);\r\n        var cs = node[tree.getNodesField()];\r\n        \r\n        if (!isLeaf && (!cs || cs.length == 0)) {\r\n            if (tree.loadOnExpand && node.asyncLoad !== false) {\r\n                e.cancel = true;\r\n                tree.loadNode(node);\r\n            }\r\n        }\r\n    }\r\n}\r\n\n// 因数据被转义 验证的时候要还原\r\nmini.DataGrid.prototype.validateCell = mini_DataGrid_CellValidator_Prototype.validateCell = function validateCell(\r\n    row,\r\n    column\r\n) {\r\n    row = this.getNode ? this.getNode(row) : this.getRow(row);\r\n    column = this.getColumn(column);\r\n    if (!row || !column || column.visible == false) return;\r\n    var value = mini._getMap(column.field, row);\r\n    var e = {\r\n        record: row,\r\n        row: row,\r\n        node: row,\r\n        column: column,\r\n        field: column.field,\r\n        value: mini.htmlUnescape(value),\r\n        isValid: true,\r\n        errorText: ''\r\n    };\r\n\r\n    if (column.vtype) {\r\n        mini._ValidateVType(column.vtype, e.value, e, column);\r\n    }\r\n    //唯一列值处理unique：遍历行，满足条件，遍历行\r\n    if (e.isValid == true && column.unique && column.field) {\r\n        var maps = {};\r\n        var data = this.data,\r\n            field = column.field;\r\n        for (var i = 0, l = data.length; i < l; i++) {\r\n            var o = data[i];\r\n            var v = o[field];\r\n            //if (mini.isNull(v) || v === \"\") {\r\n            if (mini.isNull(v) || String(v).trim() === '') {\r\n            } else {\r\n                var old = maps[v];\r\n                if (old && o == row) {\r\n                    e.isValid = false;\r\n                    e.errorText = mini._getErrorText(column, 'uniqueErrorText');\r\n\r\n                    //上面的也是\r\n                    this.setCellIsValid(old, column, e.isValid, e.errorText);\r\n                    break;\r\n                }\r\n                maps[v] = o;\r\n            }\r\n        }\r\n    }\r\n\r\n    this.fire('cellvalidation', e);\r\n    this.setCellIsValid(row, column, e.isValid, e.errorText);\r\n};\r\n\nmini.overwrite(mini.Form, {\r\n    getValidateFields: function(disableValid) {\r\n        function isDisplay(control) {\r\n            return mini.isDisplay(control.el, function(p) {\r\n                // 手风琴布局中隐藏的还是需要验证的\r\n                if (mini.hasClass(p, 'mini-tabs-body') || mini.hasClass(p, 'fui-acc-bd') || mini.hasClass(p, 'invisible')) return true;\r\n            });\r\n        }\r\n\r\n        var fields = [];\r\n        var controls = this.getFields();\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n            if (!control.validate || !control.isDisplay) continue;\r\n            if (isDisplay(control) || control.forceValidate) {\r\n                //\r\n\r\n                if (control.enabled || disableValid || control.forceValidate) {\r\n                    fields.push(control);\r\n                }\r\n            }\r\n        }\r\n        return fields;\r\n    },\r\n    \r\n    getErrors: function () {\r\n        var errors = [];\r\n        // var controls = this.getFields();\r\n        var controls = this.getValidateFields();\r\n        for (var i = 0, l = controls.length; i < l; i++) {\r\n            var control = controls[i];\r\n            if (!control.isValid) continue;\r\n            if (control.isValid() == false) {\r\n                errors.push(control);\r\n            }\r\n        }\r\n        return errors;\r\n    }\r\n});\r\n\nmini.overwrite(mini.MessageBox, {\r\n    /**\r\n     * 显示提示框。别名为 {@link mini#showMessageBox}\r\n     *\r\n     *     @example\r\n     *     mini.showMessageBox({\r\n     *         title: \"消息提示框\",\r\n     *         message: \"你好， 这是一个消息提示框中的内容描述。\",\r\n     *         buttons: [\"ok\", \"no\", \"cancel\"],\r\n     *         iconCls: \"mini-messagebox-question\",\r\n     *         callback: function(action){\r\n     *         }\r\n     *     });\r\n     *\r\n     * @param {Object} options 提示框的设置选项\r\n     * @param {Number/String} [options.width=\"auto\"] 宽度。可以是一个数值或百分比，值为数值时，单位为像素\r\n     * @param {Number/String} [options.height=\"auto\"] 高度。可以是一个数值或百分比，值为数值时，单位为像素\r\n     * @param {String} [options.customCls=\"diyclass\"] 类名，整体消息框添加类名，可用于个性化样式\r\n     * @param {Boolean} [options.showModal = true] 是否显示为模态消息框\r\n     * @param {Number} [options.timeout = 0] 值大于 0 时，消息框将在 `timeout` 毫秒后自动关闭\r\n     * @param {Number} [options.minWidth = 150] 最小宽度，单位为像素\r\n     * @param {Number} [options.maxWidth = 800] 最大宽度，单位为像素\r\n     * @param {Number} [options.minHeight = 50] 最小高度，单位为像素\r\n     * @param {Number} [options.maxHeight = 350] 最大高度，单位为像素\r\n     * @param {Boolean} [options.showHeader = true] 是否显示标题栏\r\n     * @param {String} [options.title = \"\"] 标题\r\n     * @param {String} [options.titleIcon = \"\"] 标题栏图标样式类\r\n     * @param {String} [options.iconCls = \"\"] 消息内容左侧图标的样式类，如：\r\n     *          `\"mini-messagebox-info\"`、`\"mini-messagebox-warning\"`、`\"mini-messagebox-question\"`、`\"mini-messagebox-error\"`、`\"mini-messagebox-download\"`、\r\n     * @param {String} [options.iconStyle = \"\"] 标题栏样式\r\n     * @param {String} [options.message = \"\"] 消息内容\r\n     * @param {String/HTMLElement} [options.html = \"\"] HTML 源码形式的消息内容\r\n     * @param {String} [options.spaceStyle = \"margin-right:15px\"]\r\n     * @param {Boolean} [options.showCloseButton = true] 是不显示关闭按钮\r\n     * @param {Array} [options.buttons = null] 按钮数组，可以是 DOM 节点或 `mini.MessageBox.buttonText.*` 即：`\"ok\"`、`\"cancel\"`、`\"yes\"`、`\"no\"` 等\r\n     * @param {Number} [options.buttonWidth =]\r\n     * @param {Function} [options.callback =]\r\n     * @return {String} 消息框的唯一标识符\r\n     * @member mini.MessageBox\r\n     */\r\n    show: function(options) {\r\n        options = mini.copyTo(\r\n            {\r\n                width: '360',\r\n                height: '145',\r\n                customCls: '',\r\n                showModal: true,\r\n                timeout: 0,\r\n                minWidth: 150,\r\n                maxWidth: 800,\r\n                minHeight: 50,\r\n                maxHeight: 350,\r\n                showHeader: true,\r\n                title: '',\r\n                titleIcon: '',\r\n                iconCls: '',\r\n                iconStyle: '',\r\n                message: '',\r\n                html: '',\r\n                spaceStyle: '',\r\n                showCloseButton: true,\r\n                buttons: null,\r\n                buttonWidth: null,\r\n                callback: null,\r\n                // 是否显示\"不再提示\"选项\r\n                // NOTE: \"不再提示\"的逻辑通过clickNoTipCheck来实现，而不是放在组件内部，因为与具体业务需求耦合\r\n                showNoTipCheck: false,\r\n                // 点击\"不再提示\"回调\r\n                clickNoTipCheck: false\r\n            },\r\n            options\r\n        );\r\n        options.message = String(options.message);\r\n        var callback = options.callback;\r\n\r\n        var control = options.control || new mini.Window();\r\n        // 添加自定义 class 样式\r\n        if (options.customCls) {\r\n            control.addCls(options.customCls);\r\n        }\r\n\r\n        control.addCls('mini-messagebox');\r\n        control.setBodyStyle('overflow:hidden');\r\n        control.setShowModal(options.showModal);\r\n        control.setTitle(options.title || '');\r\n        control.setIconCls(options.titleIcon);\r\n        control.setShowHeader(options.showHeader);\r\n\r\n        control.setShowCloseButton(options.showCloseButton);\r\n\r\n        var id1 = control.uid + '$table',\r\n            id2 = control.uid + '$content';\r\n\r\n        // var icon = '<div class=\"' + options.iconCls + '\" style=\"' + options.iconStyle + '\"></div>';\r\n        // var s = '<table class=\"mini-messagebox-table\" id=\"' + id1 + '\" style=\"\" cellspacing=\"0\" cellpadding=\"0\"><tr><td>'\r\n        //         + icon + '</td><td id=\"' + id2 + '\" class=\"mini-messagebox-content-text\">'\r\n        //         + (options.message || \"\") + '</td></tr></table>';\r\n\r\n        //var s = \"\";\r\n        //control.setShowHeader(false);\r\n\r\n        // 重写content中的dom结构\r\n        var s = '<i class=\"mini-messagebox-icon mini-iconfont ' + options.iconCls + '\" style=\"' + options.iconStyle + '\"></i>' + '<p class=\"mini-messagebox-msg\">' + (options.message || '') + '</p>';\r\n        var ws = '<div class=\"mini-messagebox-content\"></div>' + '<div class=\"mini-messagebox-buttons\"></div>';\r\n        control._bodyEl.innerHTML = ws;\r\n        var contentEl = control._bodyEl.firstChild;\r\n        if (options.html) {\r\n            if (typeof options.html == 'string') {\r\n                contentEl.innerHTML = options.html;\r\n            } else if (mini.isElement(options.html)) {\r\n                contentEl.appendChild(options.html);\r\n            }\r\n        } else {\r\n            contentEl.innerHTML = s;\r\n\r\n            // 记录下内容元素\r\n            control._content = contentEl.lastChild;\r\n        }\r\n        // 不再提醒\r\n        if (options.showNoTipCheck) {\r\n            var foot = control._bodyEl.lastChild;\r\n            foot.innerHTML = '<label class=\"mini-messagebox-checkbox\"><input type=\"checkbox\">不再提示</label>';\r\n\r\n            mini.on(foot.firstChild, 'click', function() {\r\n                if (options.clickNoTipCheck) {\r\n                    var checked = this.firstChild.checked;\r\n\r\n                    options.clickNoTipCheck.apply(this, [checked]);\r\n                }\r\n            });\r\n        }\r\n\r\n        control._Buttons = [];\r\n\r\n        var buttonsEl = control._bodyEl.lastChild;\r\n        if (options.buttons && options.buttons.length > 0) {\r\n            for (var i = 0, l = options.buttons.length; i < l; i++) {\r\n                var button = options.buttons[i];\r\n                var text = mini.MessageBox.buttonText[button];\r\n                if (!text) text = button;\r\n\r\n                var btn = new mini.Button();\r\n                btn.setText(text);\r\n                btn.setWidth(options.buttonWidth);\r\n                btn.render(buttonsEl);\r\n                btn.action = button;\r\n                btn.on('click', function(e) {\r\n                    var button = e.sender;\r\n                    if (callback) if (callback(button.action) === false) return;\r\n                    mini.MessageBox.hide(control);\r\n                });\r\n\r\n                if (i != l - 1) {\r\n                    btn.setStyle(options.spaceStyle);\r\n                }\r\n\r\n                // 给button设置样式\r\n                btn.setCls('mini-messagebox-button');\r\n                // ok的button特殊处理\r\n                if (button == 'ok') {\r\n                    btn.addCls('ok');\r\n                    btn.setState('primary');\r\n                }\r\n\r\n                control._Buttons.push(btn);\r\n            }\r\n        } else {\r\n            mini.addClass(control._bodyEl, 'no-btn');\r\n        }\r\n\r\n        control.setMinWidth(options.minWidth);\r\n        control.setMinHeight(options.minHeight);\r\n        control.setMaxWidth(options.maxWidth);\r\n        control.setMaxHeight(options.maxHeight);\r\n        control.setWidth(options.width);\r\n        control.setHeight(options.height);\r\n        mini.parse(contentEl);\r\n        control.show(options.x, options.y, {\r\n            animType: options.animType\r\n        });\r\n\r\n        // 调整内容位置以居中\r\n        // if (control._content) {\r\n        //     var height = control._content.clientHeight;\r\n        //     control._content.style.marginTop = (control._contentEl.firstChild.clientHeight - height) / 2 + 'px';\r\n        // }\r\n\r\n        var width = control.getWidth();\r\n        control.setWidth(width + 'px');\r\n\r\n        // var height = control.getHeight();\r\n        // control.setHeight(height + 'px');\r\n\r\n        // 计算高度\r\n        var contentHeight = $(contentEl).css('position', 'relative').outerHeight(true);\r\n        $(contentEl).css('position', '');\r\n\r\n        // prettier-ignore\r\n        var height = contentHeight ? \r\n            contentHeight \r\n                 + ($(control._headerEl).is(':visible') ? $(control._headerEl).outerHeight(true) : 0) \r\n                 + ($(buttonsEl).is(':visible') ? $(buttonsEl).outerHeight(true) : 0 )\r\n            : control.getHeight();\r\n\r\n        if(height > options.maxHeight) {\r\n            height = options.maxHeight;\r\n        }\r\n        control.setHeight(height + 'px');\r\n\r\n        var tb = document.getElementById(id1);\r\n        if (tb) {\r\n            tb.style.width = '100%';\r\n        }\r\n        var td = document.getElementById(id2);\r\n        if (td) {\r\n            td.style.width = '100%';\r\n        }\r\n        //}\r\n\r\n        // var firstButton = control._Buttons[0];\r\n        // if (firstButton) {\r\n        //     firstButton.focus();\r\n        // } else {\r\n        //     control.focus();\r\n        // }\r\n\r\n        if (mini.MessageBox.autoFocus) {\r\n            var firstButton = control._Buttons[0];\r\n            if (firstButton) {\r\n                //alert(1);\r\n                firstButton.focus();\r\n            } else {\r\n                //alert(2);\r\n                control.focus();\r\n            }\r\n        }\r\n\r\n        control.on('beforebuttonclick', function(e) {\r\n            if (callback) callback('close');\r\n            e.cancel = true;\r\n            mini.MessageBox.hide(control);\r\n        });\r\n\r\n        mini.on(control.el, 'keydown', function(e) {\r\n            if (e.keyCode == 27) {\r\n                if (callback) callback('close');\r\n                mini.MessageBox.hide(control);\r\n            }\r\n        });\r\n\r\n        //\r\n\r\n        if (options.timeout) {\r\n            setTimeout(function() {\r\n                mini.MessageBox.hide(control.uid);\r\n            }, options.timeout);\r\n        }\r\n\r\n        return control.uid;\r\n    },\r\n\r\n    /**\r\n     * @callback btnCallback\r\n     * @param {string} action 用户点击了`ok`还是`cancel`\r\n     * @param {string} value 输入框中的值\r\n     */\r\n\r\n    /**\r\n     * 文本输入提示框。别名为 {@link mini#prompt}\r\n     * @param {String} [message=mini.MessageBox.promptMessage] 消息内容\r\n     * @param {String} [title=mini.MessageBox.promptTitle] 标题\r\n     * @param {btnCallback} callback - 处理按钮点击的回调函数\r\n     * @param {Boolean} [multi=false] 是否允许输入多行（使用 textarea 作为输入框）\r\n     * @param {function} [validation] 验证函数\r\n     * @return {String} 消息框的唯一标识符\r\n     * @member mini.MessageBox\r\n     */\r\n    prompt: function(message, title, callback, multi, validation) {\r\n        var control = new mini.Window();\r\n        control.addCls('mini-prompt');\r\n        var uid = control.uid;\r\n        var inputId = uid + '$prompt';\r\n        var s = message || mini.MessageBox.promptMessage;\r\n        if (multi) {\r\n            s = '<label class=\"mini-prompt-label\">' + s + '</label><input id=\"' + inputId + '\" class=\"mini-textarea mini-prompt-input\" errorMode=\"text\">';\r\n        } else {\r\n            s = '<label class=\"mini-prompt-label\">' + s + '</label><input type=\"text\" id=\"' + inputId + '\" class=\"mini-textbox mini-prompt-input\" errorMode=\"text\">';\r\n        }\r\n        uid = mini.MessageBox.show({\r\n            control: control,\r\n            title: title || mini.MessageBox.promptTitle,\r\n            buttons: ['ok', 'cancel'],\r\n            // width: 250,\r\n            html: '<div class=\"mini-messagebox-prompt\" >' + s + '</div>',\r\n            callback: function(action) {\r\n                var input = mini.get(inputId);\r\n                if (validation && input.validate) {\r\n                    input.validate();\r\n                } \r\n                if (callback) {\r\n                    return callback(action, input.getValue());\r\n                }\r\n            }\r\n        });\r\n        if (validation) {\r\n            mini.get(inputId).on('validation', validation);\r\n        }\r\n        mini.get(inputId).focus();\r\n        return uid;\r\n    },\r\n    /**\r\n     * 要求输入确认内容的删除提醒\r\n     * @param {string} content 确认的文字内容\r\n     * @param {*} callback 输入正确的回调函数\r\n     * @param {*} options 配置 {title:'', tpl: '删除后不可恢复，请输入%s确认'}\r\n     */\r\n    deletePrompt: function (content, callback, options) {\r\n        options = options || {};\r\n        callback = callback || function () { };\r\n        var opt = $.extend({\r\n            title: '删除确认',\r\n            tpl: '删除后不可恢复，请输入%s确认',\r\n        }, options);\r\n        var confirmHtml = $('<span class=\"mini-delete-prompt-content\"></span>').text(content)[0].outerHTML;\r\n        var contentHtml = opt.tpl.replace(/%s/, confirmHtml);\r\n\r\n        var pid = mini.prompt(contentHtml, opt.title, function (action, value) {\r\n            if (action == 'ok') {\r\n                if (value === content) {\r\n                    callback();\r\n                } else {\r\n                    return false;\r\n                }\r\n            } else { }\r\n        }, false, function (e) {\r\n            var v = e.value;\r\n            if (v !== content) {\r\n                e.errorText = \"输入内容不匹配\";\r\n                e.isValid = false;\r\n            } else {\r\n                e.errorText = \"\";\r\n                e.isValid = true;\r\n            }\r\n        });\r\n        return pid;\r\n    },\r\n    confirm: function(message, title, callback) {\r\n        return mini.MessageBox.show({\r\n            minWidth: 250,\r\n            title: title || mini.MessageBox.confirmTitle,\r\n            buttons: ['ok', 'cancel'],\r\n            message: message,\r\n            iconCls: 'mini-messagebox-question',\r\n            callback: callback\r\n        });\r\n    },\r\n    deleteConfirm: function() {\r\n\r\n    }\r\n});\r\n\r\n/**\r\n * @method prompt\r\n * @member mini\r\n * @alias mini.MessageBox#prompt\r\n */\r\nmini.prompt = mini.MessageBox.prompt;\r\n\r\n/**\r\n * 要求输入确认内容的删除提醒\r\n * @param {string} content 确认的文字内容\r\n * @param {*} callback 输入正确的回调函数\r\n * @param {*} options 配置 {title:'', tpl: '删除后不可恢复，请输入%s确认'}\r\n */\r\nmini.deletePrompt = mini.MessageBox.deletePrompt;\r\n\r\n/**\r\n * @method showMessageBox\r\n * @member mini\r\n * @alias mini.MessageBox#show\r\n */\r\nmini.showMessageBox = mini.MessageBox.show;\r\nmini.confirm = mini.MessageBox.confirm;\r\n\r\nmini.showTips = mini.MessageBox.showTips = function(options) {\r\n    var id = mini.newId('mini-tips-');\r\n    options = jQuery.extend(\r\n        {\r\n            content: '',\r\n            state: 'default',\r\n            showIcon: true,\r\n            x: 'center',\r\n            y: 'top',\r\n            offset: [10, 10],\r\n            fixed: true,\r\n            timeout: 2000\r\n        },\r\n        options\r\n    );\r\n\r\n    var cls = 'mini-tips-' + options.state;\r\n    var showIconCls = options.showIcon ? ' mini-tips-showIcon' : '';\r\n    var html = '<div id=\"' + id + '\" class=\"mini-tips ' + cls + showIconCls + '\">' + options.content.replace(/<(script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*)<(\\/script)>/gi, '&lt;$1&lt;$2&gt;') + '</div>';\r\n\r\n    var jq = jQuery(html).appendTo(document.body);\r\n\r\n    options.el = jq[0];\r\n    options.timeoutHandler = function() {\r\n        jq.slideUp(function() {\r\n            jq.remove();\r\n        });\r\n    };\r\n\r\n    mini.showAt(options);\r\n    jq.hide().slideDown();\r\n    return id;\r\n};\r\n\r\nmini.hideTips = mini.MessageBox.hideTips = function(id, immediately) {\r\n    if (!id) return;\r\n\r\n    if (immediately) {\r\n        return $(this).remove();\r\n    }\r\n    return jQuery('#' + id).slideUp(function() {\r\n        $(this).remove();\r\n    });\r\n};\r\n\nmini.Avatar = function () {\r\n    mini.Avatar.superclass.constructor.call(this);\r\n};\r\nmini.extend(mini.Avatar, mini.Control, {\r\n    uiCls: 'mini-avatar',\r\n    username: '',\r\n    shortName: '',\r\n    bgColor: '',\r\n    portrait: '',\r\n    _tpl:\r\n        '{{#portrait}}<img class=\"mini-avatar-img\" src=\"{{portrait}}\" >{{/portrait}}{{^portrait}}<span class=\"mini-avatar-text\" style=\"background:{{avatarBg}}\">{{shortName}}</span>{{/portrait}}',\r\n    _create: function () {\r\n        var el = document.createElement('span');\r\n\r\n        this._portraitEl = document.createElement('img');\r\n        this._portraitEl.className = 'mini-avatar-img';\r\n\r\n        this._textEl = document.createElement('span');\r\n        this._textEl.className = 'mini-avatar-text';\r\n\r\n        el.appendChild(this._portraitEl);\r\n        el.appendChild(this._textEl);\r\n        this.el = el;\r\n    },\r\n    _getShortName: function () {\r\n        if (!this.username) return '';\r\n\r\n        return this.username.substr(-2);\r\n    },\r\n    setData: function (data) {\r\n        var username = data.username;\r\n        var bgColor = data.bgColor;\r\n        var portrait = data.portrait;\r\n\r\n        this.setUsername(username);\r\n        this.setBgColor(bgColor);\r\n        this.setPortrait(portrait);\r\n    },\r\n    getData: function () {\r\n        return {\r\n            username: this.username,\r\n            bgColor: this.bgColor,\r\n            portrait: this.portrait\r\n        };\r\n    },\r\n    setUsername: function (v) {\r\n        this.username = v;\r\n        this._textEl.setAttribute('title', v);\r\n        this._portraitEl.setAttribute('title', v);\r\n        this._textEl.innerText = this._getShortName();\r\n        if (!this.portrait) {\r\n            this.el.setAttribute('mode', '');\r\n        } else {\r\n            this.el.setAttribute('mode', 'img');\r\n        }\r\n    },\r\n\r\n    getUsername: function (v) {\r\n        return this.username;\r\n    },\r\n    setBgColor: function (v) {\r\n        this.bgColor = v;\r\n        this._textEl.style.backgroundColor = v;\r\n    },\r\n    getBgColor: function (v) {\r\n        return this.bgColor;\r\n    },\r\n    setPortrait: function (v) {\r\n        this.portrait = v;\r\n\r\n        if (!this.portrait) {\r\n            this.el.setAttribute('mode', '');\r\n        } else {\r\n            this._portraitEl.setAttribute('src', v);\r\n            this.el.setAttribute('mode', 'img');\r\n        }\r\n    },\r\n    getPortrait: function (v) {\r\n        return this.portrait;\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Avatar.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs, ['username', 'bgColor', 'portrait', 'width', 'height']);\r\n        return attrs;\r\n    },\r\n    setWidth: function (v) {\r\n        $(this.el).add(this._textEl).add(this._portraitEl).css('width', v);\r\n    },\r\n    setHeight: function (v) {\r\n        var n;\r\n        if (typeof v === 'number') {\r\n            n = v + 'px';\r\n        } else if (/px$/.test(v)) {\r\n            n = v;\r\n        } else {\r\n            n = parseInt(v, 10) + 'px';\r\n        }\r\n        $(this.el).add(this._textEl).add(this._portraitEl).css({\r\n            height: v,\r\n            'line-height': n\r\n        });\r\n    }\r\n});\r\nmini.regClass(mini.Avatar, 'avatar');\r\n\nmini.CatalogImport = function () {\r\n    mini.CatalogImport.superclass.constructor.call(this);\r\n};\r\nmini.extend(mini.CatalogImport, mini.Control, {\r\n    uiCls: \"mini-catalogimport\",\r\n    url: \"\",\r\n    pickerText: '导入文件',\r\n\r\n    _create: function () {\r\n        this.el = document.createElement(\"div\");\r\n\r\n        this.uploader = new mini.WebUploader();\r\n\r\n        this.uploader.set({\r\n            uploadUrl: this.url,\r\n            pickerText: this.pickerText,\r\n            fileNumLimit: 1,\r\n            limitType: 'xls,xlsx,xlsm',\r\n            showDefaultUI: false,\r\n            auto: false,\r\n            renderTo: this.el\r\n        });\r\n\r\n        this.uploader.on('beforefilequeued', this._onBeforeFileQueued, this);\r\n        this.uploader.on('filesqueued', this._onFilesQueued, this);\r\n        this.uploader.on('uploadbeforesend', this._onUploadBeforeSend, this);\r\n        this.uploader.on('uploadprogress', this._onUploadProgress, this);\r\n        this.uploader.on('uploadsuccess', this._onUploadSuccess, this);\r\n\r\n        this.uploader._uploadBtn.hide();\r\n\r\n        // this.maskEl = document.createElement(\"div\");\r\n        // this.maskEl.className = 'mini-catalogimport-mask';\r\n        // this.maskEl.innerHTML = '<div class=\"mini-catalogimport-mask-content\"></div>';\r\n        // this.maskContent = this.maskEl.firstChild;\r\n\r\n        // document.body.appendChild(this.maskEl);\r\n\r\n        // this.detailEl = document.createElement(\"div\");\r\n        // this.detailEl.className = 'mini-catalogimport-detail';\r\n        // this.detailEl.innerHTML = '<div class=\"mini-catalogimport-detail-content\"></div><i class=\"catalogimport-detail-close\">X</i>';\r\n        // this.detailContent = this.detailEl.firstChild;\r\n\r\n        // document.body.appendChild(this.detailEl);\r\n\r\n        this.fileList = document.createElement(\"div\");\r\n        this.fileList.className = 'mini-catalogimport-filelist';\r\n\r\n        this.el.appendChild(this.fileList);\r\n\r\n        this._bindEvent();\r\n    },\r\n\r\n    _bindEvent: function () {\r\n        var self = this;\r\n        // jQuery(this.maskEl).on('click', '.catalogimport-showdetail', function () {\r\n        //     self.showDetailStatus();\r\n        //     return false;\r\n        // }).on('click', '.catalogimport-continue', function () {\r\n        //     self.isContinueImport = true;\r\n        //     self.uploader._uploader.upload();\r\n        // }).on('click', '.catalogimport-restart', function () {\r\n        //     self.uploader._uploader.upload();\r\n        // }).on('click', function () {\r\n        //     if (self.isImportFinished && !self.isDetailShow) {\r\n        //         self.maskEl.style.display = 'none';\r\n        //     }\r\n        // });\r\n\r\n        // jQuery(this.detailEl).on('click', '.catalogimport-detail-close', function () {\r\n        //     self.hideDetailStatus();\r\n        // }).on('click', '.catalogimport-status-toggle', function () {\r\n        //     var $this = $(this),\r\n        //         $parent = $this.parent();\r\n\r\n        //     if ($parent.hasClass('opened')) {\r\n        //         $this.text('展开详情');\r\n        //         $parent.removeClass('opened');\r\n        //     } else {\r\n        //         $this.text('收起详情');\r\n        //         $parent.addClass('opened');\r\n        //     }\r\n        // });\r\n        \r\n        jQuery(this.fileList).on('click', '.catalogimport-delete', function () {\r\n            var $li = $(this).closest('.mini-catalogimport-item');\r\n\r\n            $li.remove();\r\n\r\n            self.uploader.clearFile();\r\n\r\n        }).on('click', '.catalogimport-export', function(){\r\n            self.fire('exportresult', {\r\n                attachGuid: self._curAttachGuid\r\n            });\r\n        });\r\n    },\r\n\r\n    _onFilesQueued: function (event) {\r\n        var files = event.files,\r\n            file = files[0],\r\n            self = this;\r\n        if (!file) {\r\n            return;\r\n        }\r\n\r\n        var html = this._generateFileList({\r\n            id: file.id,\r\n            name: file.name,\r\n            size: file.size\r\n        });\r\n\r\n        this.isImportFinished = false;\r\n\r\n        // this.maskContent.innerHTML = html;\r\n        // this.maskEl.style.display = 'block';\r\n\r\n        jQuery(html).appendTo(this.fileList);\r\n\r\n        this.uploader._uploader.md5File(file)\r\n            .progress(function (percentage) {\r\n\r\n            }).then(function (md5) {\r\n                self._curFileMD5 = md5;\r\n                var data = {\r\n                    fileMD5: md5,\r\n                    fileName: file.name,\r\n                    fileSize: file.size\r\n                };\r\n\r\n                data[self.uploader.id + '_action'] = \"queryFileStatus\";\r\n\r\n                if (self.uploader.getCommonData) {\r\n                    data.commonDto = mini.encode(self.uploader.getCommonData());\r\n                }\r\n\r\n                self._onPostFileMd5(data);\r\n\r\n                // 与服务端验证\r\n                $.ajax(self.url, {\r\n                    dataType: 'json',\r\n                    data: data,\r\n                    type: 'post',\r\n                    success: function (response) {\r\n                        if (mini.getSecondRequestData) {\r\n                            response = mini.getSecondRequestData(response);\r\n                        }\r\n                        self._onQueryFileStatus(response);\r\n                    }\r\n                });\r\n            });\r\n    },\r\n\r\n    _onPostFileMd5: function (data) {\r\n        this.fire('postfilemd5', {\r\n            data: data\r\n        });\r\n    },\r\n\r\n    _curFileMD5: '',\r\n    _curAttachGuid: '',\r\n    _onQueryFileStatus: function (data) {\r\n        if (data.msg) {\r\n            mini.alert(data.msg);\r\n        }\r\n\r\n        this.setDetailStatus(data.detail);\r\n        this._curAttachGuid = data.attachGuid;\r\n        this._oldAttachGuid = data.attachGuidOld;\r\n\r\n        if (data.end) {\r\n            this._onFinished(data.status);\r\n            return;\r\n        }\r\n\r\n        if (data.pollingFrequency) {\r\n            this._pollingFrequency = data.pollingFrequency;\r\n        }\r\n\r\n        if (data.action == \"importStatus\") {\r\n            this.pollingStatus(data);\r\n        } else if (data.action == \"upload\") {\r\n            this.uploader._uploader.upload();\r\n        } else {\r\n            // jQuery(this.maskContent).find('.mini-catalogimport-action').removeClass('hidden');\r\n            jQuery(this.fileList).find('.mini-catalogimport-action').removeClass('hidden');\r\n        }\r\n\r\n    },\r\n\r\n    _onUploadBeforeSend: function (event) {\r\n        if (this.isContinueImport) {\r\n            event.data.attachGuid = this._curAttachGuid;\r\n        }\r\n        event.data.fileMD5 = this._curFileMD5;\r\n    },\r\n\r\n    _onUploadProgress: function (event) {\r\n        var file = event.file,\r\n            percentage = event.percentage,\r\n            li = mini.byId(file.id),\r\n            $progressbar = jQuery('.mini-catalogimport-progressbar', li),\r\n            $progresstext = jQuery('.progress-text', $progressbar),\r\n            $progressbody = jQuery('.progress-body', $progressbar),\r\n            width = Math.round(percentage * 100) + '%';\r\n\r\n        $progresstext.text(width);\r\n        $progressbody.width(width);\r\n    },\r\n\r\n    _generateFileList: function (options) {\r\n\r\n        var list = [];\r\n        list.push('<div class=\"mini-catalogimport-item\" id=\"' + options.id + '\">');\r\n        list.push('<span class=\"mini-catalogimport-info\">' + options.name + '</span>');\r\n        list.push('<span class=\"mini-catalogimport-size\">(' + this._getSize(options.size) + ')</span>');\r\n        list.push('<span class=\"mini-catalogimport-action hidden\"><a href=\"javascript:void(0)\" class=\"catalogimport-delete\">删除</a></span>');\r\n        list.push('<span class=\"mini-catalogimport-status\">正在上传</span>')\r\n        list.push('<span class=\"mini-catalogimport-progressbar\"><span class=\"progress-text\">0%</span><div class=\"progress-body\"></div></span>');\r\n\r\n        // list.push('<span class=\"mini-catalogimport-action hidden\"><a href=\"javascript:void(0)\" class=\"catalogimport-continue\" title=\"上次导入中断，修改完后继续导入\">继续导入</a><a href=\"javascript:void(0)\" class=\"catalogimport-restart\" title=\"重新尝试导入这个文件\">重新导入</a><a href=\"javascript:void(0)\" class=\"catalogimport-showdetail hidden\">查看详情</a></span>');\r\n        list.push('</div>');\r\n\r\n        return list.join('');\r\n    },\r\n\r\n    // _generateImportStatus: function (options) {\r\n    //     var list = [];\r\n    //     list.push('<div class=\"mini-catalogimport-item\">');\r\n    //     list.push('<span class=\"mini-catalogimport-info\">' + (options.status || '') + '</span>');\r\n    //     if (options.handlepercent >= 0) {\r\n    //         list.push('<span class=\"mini-catalogimport-progressbar\"><span class=\"progress-text\">' + options.handlepercent + '%</span><div class=\"progress-body\" style=\"width:' + options.handlepercent + '%;\"></div></span>');\r\n    //     }\r\n\r\n    //     if (options.end) {\r\n    //         list.push('<span class=\"mini-catalogimport-action\"><a href=\"javascript:void(0)\" class=\"catalogimport-showdetail\">查看详情</a></span>');\r\n    //     }\r\n\r\n    //     list.push('</div>');\r\n\r\n    //     return list.join('');\r\n\r\n    // },\r\n\r\n    _onPollingStatus: function(options) {\r\n\r\n        if(!options.status) {\r\n            return;\r\n        }\r\n        var li = mini.byId(this._currentFileId),\r\n            $status = jQuery('.mini-catalogimport-status', li),\r\n            $progressbar = jQuery('.mini-catalogimport-progressbar', li),\r\n            $progresstext = jQuery('.progress-text', $progressbar),\r\n            $progressbody = jQuery('.progress-body', $progressbar),\r\n            \r\n            width;\r\n\r\n        $status.text(options.status);\r\n\r\n        if (options.handlepercent >= 0) {\r\n            width = options.handlepercent + '%';\r\n\r\n            $progressbar.removeClass('hidden');\r\n            $progresstext.text(width);\r\n            $progressbody.width(width);\r\n        } else {\r\n            $progressbar.addClass('hidden');\r\n        }\r\n    },\r\n\r\n    _generateStatuslist: function (options) {\r\n        var i, len, arr,\r\n            isCheckEnd = true,\r\n            isSaveEnd = true;\r\n        var list = ['<div class=\"catalogimport-status-item\">'];\r\n        list.push('<h3 class=\"catalogimport-status-title\">' + options.sheetName + '</h3>');\r\n        list.push('<h4 class=\"catalogimport-status-type\">校验结果：</h4>');\r\n        list.push('<p class=\"catalogimport-status-count\">总计：' + options.checkCount + '条，成功：' + options.checkSuccessCount + '，失败：' + options.checkErrorCount + '条。');\r\n        if ((arr = options.checkMsg) && (len = arr.length)) {\r\n            list.push('<a href=\"javascript:void(0);\" class=\"catalogimport-status-toggle\">展开详情</a></p>');\r\n            list.push('<div class=\"catalogimport-status-detail\">');\r\n            for (i = 0; i < len; i++) {\r\n                list.push('<p>' + arr[i] + '</p>');\r\n            }\r\n            list.push('</div>');\r\n        } else {\r\n            isCheckEnd = false;\r\n        }\r\n\r\n        if (options.saveCount) {\r\n            if (!isCheckEnd) {\r\n                list.push('</p>');\r\n                isCheckEnd = true;\r\n            }\r\n            list.push('<h4 class=\"catalogimport-status-type\">导入结果：</h4>');\r\n            list.push('<p class=\"catalogimport-status-count\">总计：' + options.saveCount + '条，成功：' + options.saveSuccessCount + '，失败：' + options.saveErrorCount + '条。');\r\n\r\n            if ((arr = options.saveMsg) && (len = arr.length)) {\r\n                list.push('<a href=\"javascript:void(0);\" class=\"catalogimport-status-toggle\">展开详情</a></p>');\r\n                list.push('<div class=\"catalogimport-status-detail\">');\r\n                for (i = 0; i < len; i++) {\r\n                    list.push('<p>' + arr[i] + '</p>');\r\n                }\r\n                list.push('</div>');\r\n            } else {\r\n                isSaveEnd = false;\r\n            }\r\n        }\r\n\r\n        if ((arr = options.taskMsg) && (len = arr.length)) {\r\n            list.push('<a href=\"javascript:void(0);\" class=\"catalogimport-status-toggle\">展开详情</a></p>');\r\n            list.push('<div class=\"catalogimport-status-detail\">');\r\n            for (i = 0; i < len; i++) {\r\n                list.push('<p>' + arr[i] + '</p>');\r\n            }\r\n            list.push('</div>');\r\n        } else if (!isCheckEnd || !isSaveEnd) {\r\n            list.push('</p>');\r\n        }\r\n\r\n        list.push('</div>');\r\n\r\n        return list.join('');\r\n    },\r\n\r\n    _getSize: function (size) {\r\n        var K = 1024,\r\n            M = 1048576;\r\n        size = parseInt(size);\r\n\r\n        if (size > M) {\r\n            return (size / M).toFixed(2) + \"M\";\r\n        } else {\r\n            return (size / K).toFixed(2) + \"K\";\r\n        }\r\n    },\r\n\r\n    _pollingFrequency: 1000,\r\n    _oldAttachGuid: '',\r\n    _onUploadSuccess: function (event) {\r\n        var ret = event.ret,\r\n            file = event.file;\r\n\r\n        if (mini.getSecondRequestData) {\r\n            ret = mini.getSecondRequestData(ret);\r\n        }\r\n\r\n        ret = ret.data || ret;\r\n        ret = ret.extraDatas || ret;\r\n\r\n        this._pollingFrequency = ret.pollingFrequency;\r\n        if (ret.action == \"importStatus\") {\r\n            this._curAttachGuid = ret.attachGuid;\r\n            this._oldAttachGuid = ret.attachGuidOld;\r\n            ret.fileId = file.id;\r\n            this.pollingStatus(ret);\r\n            return;\r\n        }\r\n\r\n        var self = this;\r\n        mini.alert('数据导入失败，请重试！', '', function () {\r\n            // self._onFinished(ret.status);\r\n\r\n            self._onFinished(ret);\r\n\r\n            // self.maskEl.style.display = 'none';\r\n        });\r\n\r\n\r\n    },\r\n\r\n    // _onFinished: function (msg) {\r\n    //     msg = msg || \"导入已完成\";\r\n    //     this.isImportFinished = true;\r\n    //     this.maskContent.innerHTML = msg + '<a href=\"javascript:void(0);\" class=\"catalogimport-showdetail\">查看详情</a>';\r\n\r\n    //     if (this._events[\"importfinished\"]) {\r\n    //         this.fire(\"importfinished\");\r\n    //     }\r\n\r\n    //     this.uploader.clearFile();\r\n    // },\r\n\r\n    _onFinished: function (data) {\r\n        var msg = data.status || \"导入已完成\",\r\n            isSuccess = data.success;\r\n\r\n        this.isImportFinished = true;\r\n\r\n        var li = mini.byId(this._currentFileId),\r\n            $status = jQuery('.mini-catalogimport-status', li),\r\n            $progressbar = jQuery('.mini-catalogimport-progressbar', li),\r\n            $action = jQuery('.mini-catalogimport-action', li);\r\n\r\n        $status.text(msg);\r\n        $progressbar.addClass('hidden');\r\n\r\n        if(isSuccess) {\r\n            setTimeout(function(){\r\n                $status.addClass('hidden');\r\n            }, 1000);\r\n        } else {\r\n            $status.addClass('error');\r\n            $status.append('<a class=\"catalogimport-export\">校验结果导出</a>')\r\n            $action.removeClass('hidden');\r\n        }\r\n        \r\n        if (this._events[\"importfinished\"]) {\r\n            this.fire(\"importfinished\", data);\r\n        }\r\n\r\n    },\r\n\r\n    _onBeforeFileQueued: function (event) {\r\n        if (this._events[\"beforefilequeued\"]) {\r\n            this.fire(\"beforefilequeued\", event);\r\n        }\r\n    },\r\n\r\n    _currentFileId: '',\r\n    pollingStatus: function (options) {\r\n        // 由于一次导入过程只会存在一个文件，所以可以用一个变量来保存当前正在上传的文件id\r\n        if(options.fileId) {\r\n            this._currentFileId = options.fileId;\r\n        }\r\n        // this.maskContent.innerHTML = this._generateImportStatus(options);\r\n        this._onPollingStatus(options);\r\n\r\n        var self = this,\r\n            data = {\r\n                fileMD5: this._curFileMD5,\r\n                attachGuid: this._curAttachGuid,\r\n                attachGuidOld: this._oldAttachGuid\r\n            };\r\n        data[this.uploader.id + \"_action\"] = \"importStatus\";\r\n\r\n        if (this.uploader.getCommonData) {\r\n            data.commonDto = mini.encode(this.uploader.getCommonData());\r\n        }\r\n\r\n        jQuery.ajax({\r\n            url: this.url,\r\n            data: data,\r\n            type: 'POST',\r\n            dataType: 'json'\r\n        }).done(function (data) {\r\n            if (mini.getSecondRequestData) {\r\n                data = mini.getSecondRequestData(data);\r\n            }\r\n            // 有提示信息，则alert\r\n            if (data.msg) {\r\n                mini.alert(data.msg);\r\n            }\r\n\r\n            if (data.end) {\r\n                // self._onFinished(data.status);\r\n                self._onFinished(data);\r\n            } else {\r\n                setTimeout(jQuery.proxy(self.pollingStatus, self, data), self._pollingFrequency);\r\n            }\r\n\r\n            self.setDetailStatus(data.detail);\r\n\r\n        });\r\n    },\r\n\r\n    setDetailStatus: function (data) {\r\n        this.detailStatus = data;\r\n\r\n        if (this.isDetailShow) {\r\n            this.renderDetailStatus();\r\n        }\r\n    },\r\n\r\n    renderDetailStatus: function () {\r\n        var detail = this.detailStatus,\r\n            html = [],\r\n            i = 0,\r\n            l;\r\n\r\n        if (detail) {\r\n            for (l = detail.length; i < l; i++) {\r\n                html.push(this._generateStatuslist(detail[i]));\r\n            }\r\n\r\n        }\r\n\r\n        this.detailContent.innerHTML = html.join('');\r\n\r\n    },\r\n\r\n    showDetailStatus: function () {\r\n        this.renderDetailStatus();\r\n\r\n        this.detailEl.style.display = 'block';\r\n\r\n        this.isDetailShow = true;\r\n    },\r\n\r\n    hideDetailStatus: function () {\r\n        this.detailEl.style.display = 'none';\r\n\r\n        this.isDetailShow = false;\r\n    },\r\n\r\n    setUrl: function (url) {\r\n        this.url = url;\r\n\r\n        this.uploader && this.uploader.setUploadUrl(url);\r\n    },\r\n\r\n    getUrl: function () {\r\n        return this.url;\r\n    },\r\n\r\n    setPickerText: function (pickerText) {\r\n\r\n    },\r\n\r\n    setEnabled: function(enabled) {\r\n        mini.CatalogImport.superclass.setEnabled.call(this, enabled);\r\n        this.uploader && this.uploader.setEnabled(enabled);\r\n    },\r\n\r\n    getAttrs: function (el) {\r\n        var attrs = mini.CatalogImport.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs, [\"url\", \"pickerText\", \"onbeforefilequeued\", \"onpostfilemd5\", \"onimportfinished\", \"onexportresult\"]);\r\n        return attrs;\r\n    }\r\n\r\n});\r\n\r\nmini.regClass(mini.CatalogImport, 'catalogimport');\n/* =========================================================\r\n * bootstrap-colorpicker.js \r\n * http://www.eyecon.ro/bootstrap-colorpicker\r\n * =========================================================\r\n * Copyright 2012 Stefan Petre\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ========================================================= */\r\n\r\n! function($) {\r\n\r\n    // Color object\r\n\r\n    var Color = function(val) {\r\n        this.value = {\r\n            h: 1,\r\n            s: 1,\r\n            b: 1,\r\n            a: 1\r\n        };\r\n        this.setColor(val);\r\n    };\r\n\r\n    Color.prototype = {\r\n        constructor: Color,\r\n\r\n        //parse a string to HSB\r\n        setColor: function(val) {\r\n            val = val.toLowerCase();\r\n            var that = this;\r\n            $.each(CPGlobal.stringParsers, function(i, parser) {\r\n                var match = parser.re.exec(val),\r\n                    values = match && parser.parse(match),\r\n                    space = parser.space || 'rgba';\r\n                if (values) {\r\n                    if (space === 'hsla') {\r\n                        that.value = CPGlobal.RGBtoHSB.apply(null, CPGlobal.HSLtoRGB.apply(null, values));\r\n                    } else {\r\n                        that.value = CPGlobal.RGBtoHSB.apply(null, values);\r\n                    }\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n\r\n        setHue: function(h) {\r\n            this.value.h = 1 - h;\r\n        },\r\n\r\n        setSaturation: function(s) {\r\n            this.value.s = s;\r\n        },\r\n\r\n        setLightness: function(b) {\r\n            this.value.b = 1 - b;\r\n        },\r\n\r\n        setAlpha: function(a) {\r\n            this.value.a = parseInt((1 - a) * 100, 10) / 100;\r\n        },\r\n\r\n        // HSBtoRGB from RaphaelJS\r\n        // https://github.com/DmitryBaranovskiy/raphael/\r\n        toRGB: function(h, s, b, a) {\r\n            if (!h) {\r\n                h = this.value.h;\r\n                s = this.value.s;\r\n                b = this.value.b;\r\n            }\r\n            h *= 360;\r\n            var R, G, B, X, C;\r\n            h = (h % 360) / 60;\r\n            C = b * s;\r\n            X = C * (1 - Math.abs(h % 2 - 1));\r\n            R = G = B = b - C;\r\n\r\n            h = ~~h;\r\n            R += [C, X, 0, 0, X, C][h];\r\n            G += [X, C, C, X, 0, 0][h];\r\n            B += [0, 0, X, C, C, X][h];\r\n            return {\r\n                r: Math.round(R * 255),\r\n                g: Math.round(G * 255),\r\n                b: Math.round(B * 255),\r\n                a: a || this.value.a\r\n            };\r\n        },\r\n\r\n        toHex: function(h, s, b, a) {\r\n            var rgb = this.toRGB(h, s, b, a);\r\n            return '#' + ((1 << 24) | (parseInt(rgb.r) << 16) | (parseInt(rgb.g) << 8) | parseInt(rgb.b)).toString(16).substr(1);\r\n        },\r\n\r\n        toHSL: function(h, s, b, a) {\r\n            if (!h) {\r\n                h = this.value.h;\r\n                s = this.value.s;\r\n                b = this.value.b;\r\n            }\r\n            var H = h,\r\n                L = (2 - s) * b,\r\n                S = s * b;\r\n            if (L > 0 && L <= 1) {\r\n                S /= L;\r\n            } else {\r\n                S /= 2 - L;\r\n            }\r\n            L /= 2;\r\n            if (S > 1) {\r\n                S = 1;\r\n            }\r\n            return {\r\n                h: H,\r\n                s: S,\r\n                l: L,\r\n                a: a || this.value.a\r\n            };\r\n        }\r\n    };\r\n\r\n    // Picker object\r\n\r\n    var Colorpicker = function(element, options) {\r\n        this.element = $(element);\r\n        var format = options.format || this.element.data('color-format') || 'hex';\r\n        this.format = CPGlobal.translateFormats[format];\r\n        this.isInput = this.element.is('input');\r\n        this.component = this.element.is('.color') ? this.element.find('.add-on') : false;\r\n\r\n        this.picker = $(CPGlobal.template)\r\n            .appendTo('body')\r\n            .on('mousedown', $.proxy(this.mousedown, this));\r\n\r\n        if (this.isInput) {\r\n            this.element.on({\r\n                'focus': $.proxy(this.show, this),\r\n                'keyup': $.proxy(this.update, this)\r\n            });\r\n        } else if (this.component) {\r\n            this.component.on({\r\n                'click': $.proxy(this.show, this)\r\n            });\r\n        } else {\r\n            this.element.on({\r\n                'click': $.proxy(this.show, this)\r\n            });\r\n        }\r\n        if (format === 'rgba' || format === 'hsla') {\r\n            this.picker.addClass('alpha');\r\n            this.alpha = this.picker.find('.colorpicker-alpha')[0].style;\r\n        }\r\n\r\n        if (this.component) {\r\n            this.picker.find('.colorpicker-color').hide();\r\n            this.preview = this.element.find('i')[0].style;\r\n        } else {\r\n            this.preview = this.picker.find('div:last')[0].style;\r\n        }\r\n\r\n        this.base = this.picker.find('div:first')[0].style;\r\n        this.update();\r\n    };\r\n\r\n    Colorpicker.prototype = {\r\n        constructor: Colorpicker,\r\n\r\n        show: function(e) {\r\n            this.picker.show();\r\n            this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\r\n            this.place();\r\n            $(window).on('resize', $.proxy(this.place, this));\r\n            if (!this.isInput) {\r\n                if (e) {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n            $(document).on({\r\n                'mousedown': $.proxy(this.hide, this)\r\n            });\r\n            this.element.trigger({\r\n                type: 'show',\r\n                color: this.color\r\n            });\r\n        },\r\n\r\n        update: function() {\r\n            this.color = new Color(this.isInput ? this.element.prop('value') : this.element.data('color'));\r\n            this.picker.find('i')\r\n                .eq(0).css({ left: this.color.value.s * 100, top: 100 - this.color.value.b * 100 }).end()\r\n                .eq(1).css('top', 100 * (1 - this.color.value.h)).end()\r\n                .eq(2).css('top', 100 * (1 - this.color.value.a));\r\n            this.previewColor();\r\n        },\r\n\r\n        setValue: function(newColor) {\r\n            this.color = new Color(newColor);\r\n            this.picker.find('i')\r\n                .eq(0).css({ left: this.color.value.s * 100, top: 100 - this.color.value.b * 100 }).end()\r\n                .eq(1).css('top', 100 * (1 - this.color.value.h)).end()\r\n                .eq(2).css('top', 100 * (1 - this.color.value.a));\r\n            this.previewColor();\r\n            this.element.trigger({\r\n                type: 'changeColor',\r\n                color: this.color\r\n            });\r\n        },\r\n\r\n        hide: function() {\r\n            this.picker.hide();\r\n            $(window).off('resize', this.place);\r\n            if (!this.isInput) {\r\n                $(document).off({\r\n                    'mousedown': this.hide\r\n                });\r\n                if (this.component) {\r\n                    this.element.find('input').prop('value', this.format.call(this));\r\n                }\r\n                this.element.data('color', this.format.call(this));\r\n            } else {\r\n                this.element.prop('value', this.format.call(this));\r\n            }\r\n            this.element.trigger({\r\n                type: 'hide',\r\n                color: this.color\r\n            });\r\n        },\r\n\r\n        place: function() {\r\n            var offset = this.component ? this.component.offset() : this.element.offset();\r\n            this.picker.css({\r\n                top: offset.top + this.height,\r\n                left: offset.left\r\n            });\r\n        },\r\n\r\n        //preview color change\r\n        previewColor: function() {\r\n            try {\r\n                this.preview.backgroundColor = this.format.call(this);\r\n            } catch (e) {\r\n                this.preview.backgroundColor = this.color.toHex();\r\n            }\r\n            //set the color for brightness/saturation slider\r\n            this.base.backgroundColor = this.color.toHex(this.color.value.h, 1, 1, 1);\r\n            //set te color for alpha slider\r\n            if (this.alpha) {\r\n                this.alpha.backgroundColor = this.color.toHex();\r\n            }\r\n        },\r\n\r\n        pointer: null,\r\n\r\n        slider: null,\r\n\r\n        mousedown: function(e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n\r\n            var target = $(e.target);\r\n\r\n            //detect the slider and set the limits and callbacks\r\n            var zone = target.closest('div');\r\n            if (!zone.is('.colorpicker')) {\r\n                if (zone.is('.colorpicker-saturation')) {\r\n                    this.slider = $.extend({}, CPGlobal.sliders.saturation);\r\n                } else if (zone.is('.colorpicker-hue')) {\r\n                    this.slider = $.extend({}, CPGlobal.sliders.hue);\r\n                } else if (zone.is('.colorpicker-alpha')) {\r\n                    this.slider = $.extend({}, CPGlobal.sliders.alpha);\r\n                } else {\r\n                    return false;\r\n                }\r\n                var offset = zone.offset();\r\n                //reference to knob's style\r\n                this.slider.knob = zone.find('i')[0].style;\r\n                this.slider.left = e.pageX - offset.left;\r\n                this.slider.top = e.pageY - offset.top;\r\n                this.pointer = {\r\n                    left: e.pageX,\r\n                    top: e.pageY\r\n                };\r\n                //trigger mousemove to move the knob to the current position\r\n                $(document).on({\r\n                    mousemove: $.proxy(this.mousemove, this),\r\n                    mouseup: $.proxy(this.mouseup, this)\r\n                }).trigger('mousemove');\r\n            }\r\n            return false;\r\n        },\r\n\r\n        mousemove: function(e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            var left = Math.max(\r\n                0,\r\n                Math.min(\r\n                    this.slider.maxLeft,\r\n                    this.slider.left + ((e.pageX || this.pointer.left) - this.pointer.left)\r\n                )\r\n            );\r\n            var top = Math.max(\r\n                0,\r\n                Math.min(\r\n                    this.slider.maxTop,\r\n                    this.slider.top + ((e.pageY || this.pointer.top) - this.pointer.top)\r\n                )\r\n            );\r\n            this.slider.knob.left = left + 'px';\r\n            this.slider.knob.top = top + 'px';\r\n            if (this.slider.callLeft) {\r\n                this.color[this.slider.callLeft].call(this.color, left / 100);\r\n            }\r\n            if (this.slider.callTop) {\r\n                this.color[this.slider.callTop].call(this.color, top / 100);\r\n            }\r\n            this.previewColor();\r\n            this.element.trigger({\r\n                type: 'changeColor',\r\n                color: this.color\r\n            });\r\n            return false;\r\n        },\r\n\r\n        mouseup: function(e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            $(document).off({\r\n                mousemove: this.mousemove,\r\n                mouseup: this.mouseup\r\n            });\r\n            return false;\r\n        }\r\n    }\r\n\r\n    $.fn.colorpicker = function(option, val) {\r\n        return this.each(function() {\r\n            var $this = $(this),\r\n                data = $this.data('colorpicker'),\r\n                options = typeof option === 'object' && option;\r\n            if (!data) {\r\n                $this.data('colorpicker', (data = new Colorpicker(this, $.extend({}, $.fn.colorpicker.defaults, options))));\r\n            }\r\n            if (typeof option === 'string') data[option](val);\r\n        });\r\n    };\r\n\r\n    $.fn.colorpicker.defaults = {};\r\n\r\n    $.fn.colorpicker.Constructor = Colorpicker;\r\n\r\n    var CPGlobal = {\r\n\r\n        // translate a format from Color object to a string\r\n        translateFormats: {\r\n            'rgb': function() {\r\n                var rgb = this.color.toRGB();\r\n                return 'rgb(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ')';\r\n            },\r\n\r\n            'rgba': function() {\r\n                var rgb = this.color.toRGB();\r\n                return 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + rgb.a + ')';\r\n            },\r\n\r\n            'hsl': function() {\r\n                var hsl = this.color.toHSL();\r\n                return 'hsl(' + Math.round(hsl.h * 360) + ',' + Math.round(hsl.s * 100) + '%,' + Math.round(hsl.l * 100) + '%)';\r\n            },\r\n\r\n            'hsla': function() {\r\n                var hsl = this.color.toHSL();\r\n                return 'hsla(' + Math.round(hsl.h * 360) + ',' + Math.round(hsl.s * 100) + '%,' + Math.round(hsl.l * 100) + '%,' + hsl.a + ')';\r\n            },\r\n\r\n            'hex': function() {\r\n                return this.color.toHex();\r\n            }\r\n        },\r\n\r\n        sliders: {\r\n            saturation: {\r\n                maxLeft: 100,\r\n                maxTop: 100,\r\n                callLeft: 'setSaturation',\r\n                callTop: 'setLightness'\r\n            },\r\n\r\n            hue: {\r\n                maxLeft: 0,\r\n                maxTop: 100,\r\n                callLeft: false,\r\n                callTop: 'setHue'\r\n            },\r\n\r\n            alpha: {\r\n                maxLeft: 0,\r\n                maxTop: 100,\r\n                callLeft: false,\r\n                callTop: 'setAlpha'\r\n            }\r\n        },\r\n\r\n        // HSBtoRGB from RaphaelJS\r\n        // https://github.com/DmitryBaranovskiy/raphael/\r\n        RGBtoHSB: function(r, g, b, a) {\r\n            r /= 255;\r\n            g /= 255;\r\n            b /= 255;\r\n\r\n            var H, S, V, C;\r\n            V = Math.max(r, g, b);\r\n            C = V - Math.min(r, g, b);\r\n            H = (C === 0 ? null :\r\n                V == r ? (g - b) / C :\r\n                V == g ? (b - r) / C + 2 :\r\n                (r - g) / C + 4\r\n            );\r\n            H = ((H + 360) % 6) * 60 / 360;\r\n            S = C === 0 ? 0 : C / V;\r\n            return { h: H || 1, s: S, b: V, a: a || 1 };\r\n        },\r\n\r\n        HueToRGB: function(p, q, h) {\r\n            if (h < 0)\r\n                h += 1;\r\n            else if (h > 1)\r\n                h -= 1;\r\n\r\n            if ((h * 6) < 1)\r\n                return p + (q - p) * h * 6;\r\n            else if ((h * 2) < 1)\r\n                return q;\r\n            else if ((h * 3) < 2)\r\n                return p + (q - p) * ((2 / 3) - h) * 6;\r\n            else\r\n                return p;\r\n        },\r\n\r\n        HSLtoRGB: function(h, s, l, a) {\r\n            if (s < 0) {\r\n                s = 0;\r\n            }\r\n            var q;\r\n            if (l <= 0.5) {\r\n                q = l * (1 + s);\r\n            } else {\r\n                q = l + s - (l * s);\r\n            }\r\n\r\n            var p = 2 * l - q;\r\n\r\n            var tr = h + (1 / 3);\r\n            var tg = h;\r\n            var tb = h - (1 / 3);\r\n\r\n            var r = Math.round(CPGlobal.HueToRGB(p, q, tr) * 255);\r\n            var g = Math.round(CPGlobal.HueToRGB(p, q, tg) * 255);\r\n            var b = Math.round(CPGlobal.HueToRGB(p, q, tb) * 255);\r\n            return [r, g, b, a || 1];\r\n        },\r\n\r\n        // a set of RE's that can match strings and generate color tuples.\r\n        // from John Resig color plugin\r\n        // https://github.com/jquery/jquery-color/\r\n        stringParsers: [{\r\n            re: /rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,\r\n            parse: function(execResult) {\r\n                return [\r\n                    execResult[1],\r\n                    execResult[2],\r\n                    execResult[3],\r\n                    execResult[4]\r\n                ];\r\n            }\r\n        }, {\r\n            re: /rgba?\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,\r\n            parse: function(execResult) {\r\n                return [\r\n                    2.55 * execResult[1],\r\n                    2.55 * execResult[2],\r\n                    2.55 * execResult[3],\r\n                    execResult[4]\r\n                ];\r\n            }\r\n        }, {\r\n            re: /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,\r\n            parse: function(execResult) {\r\n                return [\r\n                    parseInt(execResult[1], 16),\r\n                    parseInt(execResult[2], 16),\r\n                    parseInt(execResult[3], 16)\r\n                ];\r\n            }\r\n        }, {\r\n            re: /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,\r\n            parse: function(execResult) {\r\n                return [\r\n                    parseInt(execResult[1] + execResult[1], 16),\r\n                    parseInt(execResult[2] + execResult[2], 16),\r\n                    parseInt(execResult[3] + execResult[3], 16)\r\n                ];\r\n            }\r\n        }, {\r\n            re: /hsla?\\(\\s*(\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,\r\n            space: 'hsla',\r\n            parse: function(execResult) {\r\n                return [\r\n                    execResult[1] / 360,\r\n                    execResult[2] / 100,\r\n                    execResult[3] / 100,\r\n                    execResult[4]\r\n                ];\r\n            }\r\n        }],\r\n        template: '<div class=\"colorpicker dropdown-menu\">' +\r\n            '<div class=\"colorpicker-saturation\"><i><b></b></i></div>' +\r\n            '<div class=\"colorpicker-hue\"><i></i></div>' +\r\n            '<div class=\"colorpicker-alpha\"><i></i></div>' +\r\n            '<div class=\"colorpicker-color\"><div /></div>' +\r\n            '</div>'\r\n    };\r\n\r\n}(window.jQuery);\r\n\r\n\r\nmini.ColorPicker = function() {\r\n\r\n    mini.ColorPicker.superclass.constructor.call(this);\r\n\r\n};\r\n\r\nmini.extend(mini.ColorPicker, mini.Control, {\r\n    value: '#ff0000',\r\n    format: 'hex',\r\n    allowInput: false,\r\n\r\n    uiCls: 'mini-colorpicker',\r\n\r\n    _clearBorder: false,\r\n\r\n    _create: function() {\r\n        this.el = document.createElement('div');\r\n\r\n        this.el.innerHTML = '<span class=\"mini-colorpicker-indication\"><i></i></span>'\r\n\r\n        this._valueBox = new mini.TextBox();\r\n        this._indication = this.el.lastChild.firstChild;\r\n\r\n        this._valueBox.setValue(this.value);\r\n\r\n        if (!this.allowInput) {\r\n            this._valueBox.setAllowInput(false);\r\n        }\r\n        this._valueBox.render(this.el, 'prepend');\r\n\r\n        jQuery(this._indication).css('background', this.value);\r\n\r\n        this.colorPicker = jQuery(this.el)\r\n            .attr('data-color', this.value)\r\n            .colorpicker({\r\n                format: this.format\r\n            });\r\n\r\n    },\r\n\r\n    _initEvents: function() {\r\n        var that = this;\r\n        this.colorPicker.on('changeColor', function(ev) {\r\n            that.value = that._getValue(ev.color);\r\n            that._valueBox.setValue(that.value);\r\n            jQuery(that._indication).css('background', that.value);\r\n\r\n            that.fire('valuechanged', {\r\n                sender: that,\r\n                value: that.value,\r\n                type: 'valuechanged'\r\n            });\r\n        });\r\n\r\n        this._valueBox.on('blur', function(e) {\r\n            that.colorPicker.colorpicker('setValue', that._valueBox.getValue());\r\n        });\r\n    },\r\n\r\n    _getValue: function(color) {\r\n        var value = '';\r\n        switch (this.format) {\r\n            case 'rgb':\r\n                var rgb = color.toRGB();\r\n                value = 'rgb(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ')';\r\n                break;\r\n            case 'rgba':\r\n                var rgb = color.toRGB();\r\n                value = 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + rgb.a + ')';\r\n                break;\r\n            case 'hsl':\r\n                var hsl = color.toHSL();\r\n                value = 'hsl(' + Math.round(hsl.h * 360) + ',' + Math.round(hsl.s * 100) + '%,' + Math.round(hsl.l * 100) + '%)';\r\n                break;\r\n            case 'hsla':\r\n                var hsl = color.toHSL();\r\n                value = 'hsla(' + Math.round(hsl.h * 360) + ',' + Math.round(hsl.s * 100) + '%,' + Math.round(hsl.l * 100) + '%,' + hsl.a + ')';\r\n                break;\r\n            case 'hex':\r\n                value = color.toHex();\r\n                break;\r\n        }\r\n\r\n        return value;\r\n    },\r\n\r\n    setValue: function(value) {\r\n        this.colorPicker.colorpicker('setValue', value);\r\n\r\n    },\r\n\r\n    getValue: function() {\r\n        return this.value;\r\n    },\r\n\r\n    setFormat: function(format) {\r\n        this.colorPicker.colorpicker({\r\n            format: format\r\n        });\r\n\r\n        this.format = format;\r\n\r\n        this.setValue(this.value);\r\n\r\n    },\r\n\r\n    getFormat: function() {\r\n        return this.format;\r\n    },\r\n\r\n    setAllowInput: function(allowInput) {\r\n        this._valueBox.setAllowInput(allowInput);\r\n\r\n        this.allowInput = allowInput;\r\n\r\n    },\r\n\r\n    getAllowInput: function() {\r\n        return this.allowInput;\r\n    },\r\n\r\n    getAttrs: function(el) {\r\n        var attrs = mini.ColorPicker.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs, [\"onvaluechanged\", \"format\"]);\r\n        mini._ParseBool(el, attrs, [\"allowInput\"]);\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.ColorPicker, \"colorpicker\");\r\n\nmini.DataExport = function () {\r\n    mini.DataExport.superclass.constructor.call(this);\r\n};\r\n\r\nmini.extend(mini.DataExport, mini.Button, {\r\n    // 相关联表格的id\r\n    gridId: '',\r\n    // 导出时请求的后台处理地址\r\n    exportUrl: '',\r\n    // 导出文件的文件名\r\n    fileName: '',\r\n    // column初始时的位置\r\n    position: 'right',\r\n\r\n    uiCls: 'mini-dataexport',\r\n\r\n    // 列的值选项\r\n    columnsValue: '',\r\n    // 列的文本选项\r\n    columnsText: '',\r\n\r\n    paramName: 'exportParams',\r\n\r\n    // 是否需要每次展示时都去动态获取一遍columns\r\n    dynamicColumns: false,\r\n\r\n    expandText: '导出',\r\n    collapseText: '导出',\r\n    exportText: '导 出',\r\n    // panelTitle: '导出列配置',\r\n    leftListTitle: '待选列',\r\n    rightListTitle: '已选列',\r\n    // tipInfo: '不填页码即导出当前页',\r\n    fromText: '从第',\r\n    pageNumInfo: '页导出到第',\r\n    pageText: '页',\r\n    exportModelText: '以模板导出',\r\n    _clearBorder: false,\r\n\r\n    showExportModel: false,\r\n    showIcon: false,\r\n\r\n    _iconCls: 'icon-upload',\r\n\r\n    _create: function () {\r\n        mini.DataExport.superclass._create.apply(this, arguments);\r\n        this.set({\r\n            text: this.collapseText,\r\n            disableMultiClick: false\r\n        });\r\n\r\n        if (this.showIcon) {\r\n            this.setIconCls(this._iconCls);\r\n        }\r\n        // this.el = this.el;\r\n\r\n        this.popup = new mini.Popup();\r\n        this.panel = new mini.Panel();\r\n        this.popup.addCls('mini-dataexport-popup');\r\n        this.panel.addCls('mini-dataexport-panel');\r\n        this.panel.set({\r\n            width: 450,\r\n            showToolbar: false,\r\n            showFooter: false,\r\n            showHeader: false\r\n        });\r\n\r\n        this.popup.render(document.body);\r\n        this.panel.render(this.popup.el);\r\n\r\n        var bodyArr = [\r\n            '<div class=\"mini-export-list\"><div class=\"mini-export-left\"></div><div class=\"mini-export-middle\"></div><div class=\"mini-export-right\"></div></div>'\r\n        ];\r\n        // bodyArr.push(\r\n        //     '<div class=\"mini-export-line\"><div id=\"' +\r\n        //     this.id +\r\n        //     '-rbl\" class=\"mini-radiobuttonlist\" repeatItems=\"1\" repeatLayout=\"table\" ></div></div>'\r\n        // );\r\n        bodyArr.push('<div class=\"mini-export-line\">');\r\n        bodyArr.push('<div id=\"' +\r\n            this.id +\r\n            '-rbl\" class=\"mini-radiobuttonlist\" repeatItems=\"1\" repeatLayout=\"table\" ></div>');\r\n        bodyArr.push('<div id=\"' +\r\n            this.id +\r\n            '-model-ck\" class=\"mini-checkbox model-ck\" style=\"display:none\" text=\"' +\r\n            this.exportModelText +\r\n            '\"></div>');\r\n        bodyArr.push('</div>');\r\n        bodyArr.push(\r\n            '<a id=\"' +\r\n            this.id +\r\n            '-action\" class=\"mini-button mini-btn-primary mini-export-btn\">' +\r\n            this.exportText +\r\n            '</a>'\r\n        );\r\n        bodyArr.push('<div style=\"display:none;\"></div>');\r\n\r\n        this.panel.setBody(bodyArr.join(''));\r\n\r\n        mini.parse(this.popup.el);\r\n\r\n        this._panel = this.panel.el;\r\n\r\n        this._exportBtn = mini.get(this.id + '-action', this._panel);\r\n\r\n        var body = this.panel.getBodyEl();\r\n        this._listContent = body.firstChild;\r\n        this._exportRbl = mini.get(this.id + '-rbl', this._panel);\r\n        this._exportRbl.setData([{\r\n            text: '仅导出选中行',\r\n            id: '0'\r\n        }, {\r\n            text: '导出全部',\r\n            id: '1'\r\n        }, {\r\n            text: '导出当前页',\r\n            id: '2'\r\n        }, {\r\n            text: this.fromText +\r\n                '<input type=\"text\" class=\"mini-export-num\" id=\"' +\r\n                this.id +\r\n                '-fromnum\"/>' +\r\n                this.pageNumInfo +\r\n                '<input type=\"text\" class=\"mini-export-num\" id=\"' +\r\n                this.id +\r\n                '-tonum\"/>' +\r\n                this.pageText,\r\n            id: '3'\r\n        }]);\r\n\r\n        this._radioTrs = this._exportRbl._innerEl.getElementsByTagName('tr');\r\n        this._rowTr = this._radioTrs[0];\r\n        this._curPageTr = this._radioTrs[2];\r\n        this._pageTr = this._radioTrs[3];\r\n\r\n        this._fromNumInput = mini.byId(this.id + '-fromnum', this._pageTr);\r\n        this._toNumInput = mini.byId(this.id + '-tonum', this._pageTr);\r\n\r\n        this.exportModelCheck = mini.get(this.id + '-model-ck', this._panel);\r\n\r\n        this._exportFormWrap = body.lastChild;\r\n        this._exportFormWrap.innerHTML =\r\n            '<form method=\"post\" target=\"exportIFrame\"><input type=\"hidden\" name=\"' +\r\n            this.paramName +\r\n            '\" /></form><iframe id=\"exportIFrame\" name=\"exportIFrame\" style=\"display:none;\"></iframe>';\r\n\r\n        this._exportForm = this._exportFormWrap.firstChild;\r\n        this._exportFormField = this._exportForm.firstChild;\r\n\r\n        this._exportIframe = this._exportFormWrap.lastChild;\r\n\r\n        this._contentL = this._listContent.firstChild;\r\n        this._contentM = this._listContent.childNodes[1];\r\n        this._contentR = this._listContent.lastChild;\r\n\r\n        this._contentL.innerHTML =\r\n            '<div class=\"mini-export-list-header\">' +\r\n            this.leftListTitle +\r\n            '</div><div class=\"mini-export-list-content\"></div>';\r\n        this._contentR.innerHTML =\r\n            '<div class=\"mini-export-list-header\">' +\r\n            this.rightListTitle +\r\n            '</div><div class=\"mini-export-list-content\"></div>';\r\n\r\n        this.leftListBox = new mini.ListBox();\r\n        this.leftListBox.set({\r\n            height: 170,\r\n            width: 180,\r\n            valueField: 'field',\r\n            showCheckBox: true,\r\n            multiSelect: true\r\n        });\r\n        this.leftListBox.render(this._contentL.lastChild);\r\n\r\n        this.rightListBox = new mini.ListBox();\r\n        this.rightListBox.set({\r\n            height: 170,\r\n            width: 180,\r\n            valueField: 'field',\r\n            showCheckBox: true,\r\n            multiSelect: true\r\n        });\r\n        this.rightListBox.render(this._contentR.lastChild);\r\n\r\n        this._initButtons();\r\n    },\r\n\r\n    _initEvents: function () {\r\n        mini.DataExport.superclass._initEvents.apply(this, arguments);\r\n        var that = this;\r\n        this.on('click', function () {\r\n            if (!mini.hasClass(that.el, 'mini-button-popup')) {\r\n                that.showPanel();\r\n            } else {\r\n                that.hidePanel();\r\n            }\r\n        });\r\n\r\n        this._exportBtn.on('click', function (e) {\r\n            that._OnExport(e);\r\n        });\r\n\r\n        // 开始页码输入\r\n        mini.on(this._fromNumInput, 'blur', function () {\r\n            if (that.dataGrid) {\r\n                var pageIndex = that.dataGrid.getPageIndex() + 1,\r\n                    totalPage = that.dataGrid.getTotalPage(),\r\n                    toIndex = parseInt(that._toNumInput.value, 10),\r\n                    value = parseInt(this.value, 10);\r\n\r\n                // 无value，则为当前页\r\n                if (!value) {\r\n                    value = pageIndex;\r\n                } else if (value > totalPage) {\r\n                    value = totalPage;\r\n                }\r\n                if (value > toIndex) {\r\n                    value = toIndex;\r\n                }\r\n\r\n                this.value = value;\r\n            }\r\n        });\r\n\r\n        // 结束页码输入\r\n        mini.on(this._toNumInput, 'blur', function () {\r\n            if (that.dataGrid) {\r\n                var pageIndex = that.dataGrid.getPageIndex() + 1,\r\n                    totalPage = that.dataGrid.getTotalPage(),\r\n                    fromIndex = parseInt(that._fromNumInput.value, 10),\r\n                    value = parseInt(this.value, 10);\r\n\r\n                if (!value || value > totalPage) {\r\n                    // 不填 或超出默认为最大页码\r\n                    value = totalPage;\r\n                }\r\n\r\n                if (value < fromIndex) {\r\n                    // 不得小于开始页码\r\n                    value = fromIndex;\r\n                }\r\n\r\n                this.value = value;\r\n            }\r\n        });\r\n\r\n        mini.on(document, 'mouseup', this._OnDocMouseUp, this);\r\n\r\n        mini.on(this._exportIframe, 'load', function () {\r\n            that.fire('exportsuccess');\r\n        });\r\n    },\r\n\r\n    _getExportData: function () {\r\n        var data = {\r\n            columns: this.rightListBox.data,\r\n            fileName: this.fileName\r\n        };\r\n\r\n        // 必须指定文件名\r\n        if (!data.fileName) {\r\n            window.console && window.console.error && console.error('未指定导出文件的filename，导出文件可能不正常！');\r\n        }\r\n\r\n        if (this.gridId) {\r\n            if (!this.dataGrid) {\r\n                this.dataGrid = mini.get(this.gridId);\r\n            }\r\n            // 获取用户选中的类型  0：当前行，1：全部页码，2：当前页，3：指定页码\r\n            var exportType = this._exportRbl.value,\r\n                pageSize = this.dataGrid.getPageSize(),\r\n                totalCount = this.dataGrid.getTotalCount(),\r\n                sortField = this.dataGrid.getSortField(),\r\n                sortOrder = this.dataGrid.getSortOrder(),\r\n                maxPageIndex = this.dataGrid.getTotalPage() - 1,\r\n                fromIndex = 0,\r\n                toIndex = 0,\r\n                pageIndex = this.dataGrid.getPageIndex(),\r\n                exportByTemplate = this.exportModelCheck.checked;\r\n\r\n            switch (exportType) {\r\n                case '0':\r\n                    // 当前行\r\n                    fromIndex = pageIndex;\r\n                    toIndex = pageIndex;\r\n                    data.idField = this.dataGrid.idField;\r\n                    data.checkedRows = {};\r\n                    data.checkedRows[this.dataGrid.idField] = this._getSelectedGridIds();\r\n                    break;\r\n\r\n                case '1':\r\n                    // 全部页码 从0 到最大页码\r\n                    fromIndex = 0;\r\n                    toIndex = maxPageIndex;\r\n                    break;\r\n\r\n                case '2':\r\n                    // 当前页码\r\n                    fromIndex = pageIndex;\r\n                    toIndex = pageIndex;\r\n                    break;\r\n\r\n                case '3':\r\n                    // 指定页码\r\n                    fromIndex = parseInt(this._fromNumInput.value, 10) - 1;\r\n                    toIndex = parseInt(this._toNumInput.value) - 1;\r\n                    // 不填开始页码则为当前页\r\n                    if (!mini.isNumber(fromIndex)) {\r\n                        fromIndex = pageIndex;\r\n                    }\r\n                    // 不填结束页码 或者填的结束页码小于开始页码 结束页码为总页码\r\n                    if (!mini.isNumber(toIndex) || toIndex < fromIndex) {\r\n                        toIndex = maxPageIndex;\r\n                    }\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            mini.copyTo(data, {\r\n                fromIndex: fromIndex,\r\n                toIndex: toIndex,\r\n                pageSize: pageSize,\r\n                totalCount: totalCount,\r\n                sortField: sortField,\r\n                sortOrder: sortOrder,\r\n                exportByTemplate: exportByTemplate\r\n            });\r\n        }\r\n\r\n        return data;\r\n    },\r\n\r\n    _getSelectedGridIds: function () {\r\n        var ids = [];\r\n        var rows = [];\r\n        var idField = this.dataGrid.idField;\r\n\r\n        if (this.dataGrid) {\r\n            rows = this.dataGrid.getSelecteds();\r\n        }\r\n\r\n        for (var i = 0, l = rows.length; i < l; i++) {\r\n            var r = rows[i];\r\n            ids.push(r[idField]);\r\n        }\r\n\r\n        return ids.join(',');\r\n    },\r\n    _OnExport: function (event) {\r\n        var data = this._getExportData();\r\n        var e = {\r\n            htmlEvent: event,\r\n            data: data\r\n        };\r\n\r\n        this.fire('beforeexport', e);\r\n\r\n        this._exportFormField.value = typeof e.data === 'string' ? e.data : mini.encode(e.data);\r\n        this._exportForm.submit();\r\n\r\n        this.hidePanel();\r\n    },\r\n\r\n    _OnDocMouseUp: function (e) {\r\n        if (!mini.isAncestor(this.popup.el, e.target)) {\r\n            this.hidePanel();\r\n        }\r\n    },\r\n\r\n    _initButtons: function () {\r\n        this._contentM.innerHTML =\r\n            '<button class=\"mini-export-listbtn mini-icon right\" type=\"button\"></button><button class=\"mini-export-listbtn mini-icon right-all\" type=\"button\"></button><button class=\"mini-export-listbtn mini-icon left\" type=\"button\"></button><button class=\"mini-export-listbtn mini-icon left-all\" type=\"button\"></button>';\r\n\r\n        var that = this;\r\n        mini.on(this._contentM, 'click', function (e) {\r\n            var target = e.target,\r\n                items;\r\n            if (mini.hasClass(target, 'right')) {\r\n                items = that.leftListBox.getSelecteds();\r\n                that.leftListBox.removeItems(items);\r\n                that.rightListBox.addItems(items);\r\n            } else if (mini.hasClass(target, 'right-all')) {\r\n                items = that.leftListBox.getData();\r\n                that.leftListBox.removeItems(items);\r\n                that.rightListBox.addItems(items);\r\n            } else if (mini.hasClass(target, 'left')) {\r\n                items = that.rightListBox.getSelecteds();\r\n                that.rightListBox.removeItems(items);\r\n                that.leftListBox.addItems(items);\r\n            } else if (mini.hasClass(target, 'left-all')) {\r\n                items = that.rightListBox.getData();\r\n                that.rightListBox.removeItems(items);\r\n                that.leftListBox.addItems(items);\r\n            }\r\n        });\r\n    },\r\n\r\n    setExportUrl: function (url) {\r\n        this.exportUrl = url;\r\n        this._exportForm.action = url;\r\n    },\r\n\r\n    getExportUrl: function () {\r\n        return this.exportUrl;\r\n    },\r\n\r\n    getGridId: function () {\r\n        return this.gridId;\r\n    },\r\n\r\n    setGridId: function (gridId) {\r\n        this.gridId = gridId;\r\n        this.dataGrid = mini.get(gridId);\r\n    },\r\n\r\n    showPanel: function () {\r\n        this._adjustRadioLayout();\r\n        this.setText(this.expandText);\r\n        this.addCls('mini-button-popup');\r\n        if (!this.isInit || this.dynamicColumns) {\r\n            var columns = this.getColumns();\r\n\r\n            if (this.position == 'left') {\r\n                this.leftListBox.setData(columns);\r\n                this.rightListBox.setData([]);\r\n            } else {\r\n                this.rightListBox.setData(columns);\r\n                this.leftListBox.setData([]);\r\n            }\r\n            this.isInit = true;\r\n        }\r\n        this.popup.showAtEl(this.el);\r\n    },\r\n\r\n    _adjustRadioLayout: function () {\r\n        if (!this.dataGrid && this.gridId) {\r\n            this.dataGrid = mini.get(this.gridId);\r\n        }\r\n        if (this.dataGrid) {\r\n            mini.removeClass(this._exportRbl.el, 'hidden');\r\n            if (this.dataGrid.multiSelect && this._getSelectedGridIds()) {\r\n                mini.removeClass(this._rowTr, 'hidden');\r\n                // mini.removeClass(this._pageTrRadio, 'hidden');\r\n                this._exportRbl.setValue('0');\r\n            } else {\r\n                mini.addClass(this._rowTr, 'hidden');\r\n                // mini.addClass(this._pageTrRadio, 'hidden');\r\n                this._exportRbl.setValue('1');\r\n\r\n                if (!this.dataGrid.showPager) {\r\n                    mini.addClass(this._curPageTr, 'hidden');\r\n                    mini.addClass(this._pageTr, 'hidden');\r\n                }\r\n                // 设置表格的当前页码作为默认的导出开始页码\r\n                this._fromNumInput.value = this.dataGrid.getPageIndex() + 1;\r\n            }\r\n        } else {\r\n            // 没有datagrid\r\n            mini.addClass(this._exportRbl.el, 'hidden');\r\n        }\r\n    },\r\n\r\n    hidePanel: function () {\r\n        this.removeCls('mini-button-popup');\r\n        this.setText(this.collapseText);\r\n        this.popup.hide();\r\n    },\r\n\r\n    getColumns: function () {\r\n        var data = [];\r\n\r\n        if (this.columnsData) {\r\n            data = this.columnsData;\r\n        } else if (this.columnsValue) {\r\n            var values = this.columnsValue.split(','),\r\n                texts = this.columnsText.split(','),\r\n                len = values.length,\r\n                i = 0;\r\n\r\n            for (; i < len; i++) {\r\n                data.push({\r\n                    text: texts[i] ? texts[i] : values[i],\r\n                    field: values[i]\r\n                });\r\n            }\r\n        } else if (this.gridId) {\r\n            if (!this.dataGrid) {\r\n                this.dataGrid = mini.get(this.gridId);\r\n            }\r\n            if (this.dataGrid) {\r\n                data = this._getColumns(this.dataGrid.columns);\r\n            } else {\r\n                data = [];\r\n            }\r\n        }\r\n\r\n\r\n        var e = {\r\n            columns: data\r\n        };\r\n        this.fire('beforeupdatecolumn', e);\r\n\r\n        data = e.columns;\r\n\r\n        this.columnsData = data;\r\n        return data;\r\n    },\r\n\r\n    _getColumns: function (columns) {\r\n        var data = [];\r\n        for (var i = 0, len = columns.length; i < len; i++) {\r\n            var column = columns[i];\r\n            if (!column.field) {\r\n                if (column.columns) {\r\n                    var childColumns = this._getColumns(column.columns);\r\n                    data = data.concat(childColumns);\r\n                }\r\n            } else {\r\n                data.push({\r\n                    text: jQuery.trim(column.header),\r\n                    field: column.field\r\n                });\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    setCollapseText: function (collapseText) {\r\n        this.collapseText = collapseText;\r\n\r\n        if (this) {\r\n            this.setText(collapseText);\r\n        }\r\n    },\r\n\r\n    getFileName: function () {\r\n        return this.fileName;\r\n    },\r\n\r\n    setFileName: function (fileName) {\r\n        this.fileName = fileName;\r\n    },\r\n\r\n    setShowIcon: function (showIcon) {\r\n        this.showIcon = showIcon;\r\n\r\n        this && this.setIconCls(showIcon ? this._iconCls : '');\r\n    },\r\n\r\n    setShowExportModel: function(showExportModel) {\r\n        if(this.showExportModel == showExportModel) {\r\n            return;\r\n        }\r\n        \r\n        this.showExportModel = showExportModel;\r\n        if(showExportModel) {\r\n            this.exportModelCheck.show();\r\n        } else {\r\n            this.exportModelCheck.hide();\r\n            this.exportModelCheck.setChecked(false);\r\n        }\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.DataExport.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs, [\r\n            'gridId',\r\n            'exportUrl',\r\n            'onbeforeexport',\r\n            'fileName',\r\n            'columnsText',\r\n            'columnsValue',\r\n            'position',\r\n            'expandText',\r\n            'collapseText',\r\n            'onbeforeupdatecolumn',\r\n            'onexportsuccess'\r\n        ]);\r\n        mini._ParseBool(el, attrs, ['dynamicColumns', 'showIcon', 'showExportModel']);\r\n        attrs.text = attrs.expandText;\r\n        if(!attrs.text) {\r\n            attrs.text = this.expandText;\r\n        }\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.DataExport, 'dataexport');\nmini.DataImport = function () {\r\n    mini.DataImport.superclass.constructor.call(this);\r\n};\r\nmini.extend(mini.DataImport, mini.Control, {\r\n    uiCls: \"mini-dataimport\",\r\n    url: \"\",\r\n    pickerText: '导入文件',\r\n\r\n    _create: function () {\r\n        this.el = document.createElement(\"div\");\r\n\r\n        this.uploader = new mini.WebUploader();\r\n\r\n        this.uploader.set({\r\n            uploadUrl: this.url,\r\n            pickerText: this.pickerText,\r\n            fileNumLimit: 1,\r\n            limitType: 'xls,xlsx,xlsm',\r\n            showDefaultUI: false,\r\n            auto: false,\r\n            renderTo: this.el\r\n        });\r\n\r\n        this.uploader.on('beforefilequeued', this._onBeforeFileQueued, this);\r\n        this.uploader.on('filesqueued', this._onFilesQueued, this);\r\n        this.uploader.on('uploadbeforesend', this._onUploadBeforeSend, this);\r\n        this.uploader.on('uploadprogress', this._onUploadProgress, this);\r\n        this.uploader.on('uploadsuccess', this._onUploadSuccess, this);\r\n\r\n        this.uploader._uploadBtn.hide();\r\n\r\n        this.maskEl = document.createElement(\"div\");\r\n        this.maskEl.className = 'mini-dataimport-mask';\r\n        this.maskEl.innerHTML = '<div class=\"mini-dataimport-mask-content\"></div>';\r\n        this.maskContent = this.maskEl.firstChild;\r\n\r\n        document.body.appendChild(this.maskEl);\r\n\r\n        this.detailEl = document.createElement(\"div\");\r\n        this.detailEl.className = 'mini-dataimport-detail';\r\n        this.detailEl.innerHTML = '<div class=\"mini-dataimport-detail-content\"></div><i class=\"dataimport-detail-close\">X</i>';\r\n        this.detailContent = this.detailEl.firstChild;\r\n\r\n        document.body.appendChild(this.detailEl);\r\n\r\n        this._bindEvent();\r\n    },\r\n\r\n    _bindEvent: function () {\r\n        var self = this;\r\n        jQuery(this.maskEl).on('click', '.dataimport-showdetail', function () {\r\n            self.showDetailStatus();\r\n            return false;\r\n        }).on('click', '.dataimport-continue', function () {\r\n            self.isContinueImport = true;\r\n            self.uploader._uploader.upload();\r\n        }).on('click', '.dataimport-restart', function () {\r\n            self.uploader._uploader.upload();\r\n        }).on('click', function () {\r\n            if (self.isImportFinished && !self.isDetailShow) {\r\n                self.maskEl.style.display = 'none';\r\n            }\r\n        });\r\n\r\n        jQuery(this.detailEl).on('click', '.dataimport-detail-close', function () {\r\n            self.hideDetailStatus();\r\n        }).on('click', '.dataimport-status-toggle', function () {\r\n            var $this = $(this),\r\n                $parent = $this.parent();\r\n\r\n            if ($parent.hasClass('opened')) {\r\n                $this.text('展开详情');\r\n                $parent.removeClass('opened');\r\n            } else {\r\n                $this.text('收起详情');\r\n                $parent.addClass('opened');\r\n            }\r\n        });\r\n    },\r\n\r\n    _onFilesQueued: function (event) {\r\n        var files = event.files,\r\n            file = files[0],\r\n            self = this;\r\n        if (!file) {\r\n            return;\r\n        }\r\n\r\n        var html = this._generateFileList({\r\n            id: file.id,\r\n            name: file.name,\r\n            size: file.size\r\n        });\r\n\r\n        this.isImportFinished = false;\r\n\r\n        this.maskContent.innerHTML = html;\r\n        this.maskEl.style.display = 'block';\r\n\r\n        this.uploader._uploader.md5File(file)\r\n            .progress(function (percentage) {\r\n\r\n            }).then(function (md5) {\r\n                self._curFileMD5 = md5;\r\n                var data = {\r\n                    fileMD5: md5,\r\n                    fileName: file.name,\r\n                    fileSize: file.size\r\n                };\r\n\r\n                data[self.uploader.id + '_action'] = \"queryFileStatus\";\r\n\r\n                if (self.uploader.getCommonData) {\r\n                    data.commonDto = mini.encode(self.uploader.getCommonData());\r\n                }\r\n\r\n                self._onPostFileMd5(data);\r\n\r\n                // 与服务端验证\r\n                $.ajax(self.url, {\r\n                    dataType: 'json',\r\n                    data: data,\r\n                    type: 'post',\r\n                    success: function (response) {\r\n                        if (mini.getSecondRequestData) {\r\n                            response = mini.getSecondRequestData(response);\r\n                        }\r\n                        self._onQueryFileStatus(response);\r\n                    }\r\n                });\r\n            });\r\n    },\r\n\r\n    _onPostFileMd5: function (data) {\r\n        this.fire('postfilemd5', {\r\n            data: data\r\n        });\r\n    },\r\n\r\n    _curFileMD5: '',\r\n    _curAttachGuid: '',\r\n    _onQueryFileStatus: function (data) {\r\n        if (data.msg) {\r\n            mini.alert(data.msg);\r\n        }\r\n\r\n        this.setDetailStatus(data.detail);\r\n        this._curAttachGuid = data.attachGuid;\r\n        this._oldAttachGuid = data.attachGuidOld;\r\n\r\n        if (data.end) {\r\n            this._onFinished(data.status);\r\n            return;\r\n        }\r\n\r\n        if (data.pollingFrequency) {\r\n            this._pollingFrequency = data.pollingFrequency;\r\n        }\r\n\r\n        if (data.action == \"importStatus\") {\r\n            this.pollingStatus(data);\r\n        } else if (data.action == \"upload\") {\r\n            this.uploader._uploader.upload();\r\n        } else {\r\n            jQuery(this.maskContent).find('.mini-dataimport-action').removeClass('hidden');\r\n        }\r\n\r\n    },\r\n\r\n    _onUploadBeforeSend: function (event) {\r\n        if (this.isContinueImport) {\r\n            event.data.attachGuid = this._curAttachGuid;\r\n        }\r\n        event.data.fileMD5 = this._curFileMD5;\r\n    },\r\n\r\n    _onUploadProgress: function (event) {\r\n        var file = event.file,\r\n            percentage = event.percentage,\r\n            li = mini.byId(file.id),\r\n            $progressbar = jQuery('.mini-dataimport-progressbar', li),\r\n            $progresstext = jQuery('.progress-text', $progressbar),\r\n            $progressbody = jQuery('.progress-body', $progressbar),\r\n            width = Math.round(percentage * 100) + '%';\r\n\r\n        $progresstext.text(width);\r\n        $progressbody.width(width);\r\n    },\r\n\r\n    _generateFileList: function (options) {\r\n\r\n        var list = [];\r\n        list.push('<div class=\"mini-dataimport-item\">');\r\n        list.push('<span class=\"mini-dataimport-info\">' + options.name + '</span>');\r\n        list.push('<span class=\"mini-dataimport-size\">(' + this._getSize(options.size) + ')</span>');\r\n        list.push('<span class=\"mini-dataimport-progressbar\"><span class=\"progress-text\">0%</span><div class=\"progress-body\"></div></span>');\r\n\r\n        list.push('<span class=\"mini-dataimport-action hidden\"><a href=\"javascript:void(0)\" class=\"dataimport-continue\" title=\"上次导入中断，修改完后继续导入\">继续导入</a><a href=\"javascript:void(0)\" class=\"dataimport-restart\" title=\"重新尝试导入这个文件\">重新导入</a><a href=\"javascript:void(0)\" class=\"dataimport-showdetail hidden\">查看详情</a></span>');\r\n\r\n        list.push('</div>');\r\n\r\n        return list.join('');\r\n    },\r\n\r\n    _generateImportStatus: function (options) {\r\n        var list = [];\r\n        list.push('<div class=\"mini-dataimport-item\">');\r\n        list.push('<span class=\"mini-dataimport-info\">' + (options.status || '') + '</span>');\r\n        if (options.handlepercent >= 0) {\r\n            list.push('<span class=\"mini-dataimport-progressbar\"><span class=\"progress-text\">' + options.handlepercent + '%</span><div class=\"progress-body\" style=\"width:' + options.handlepercent + '%;\"></div></span>');\r\n        }\r\n\r\n        if (options.end) {\r\n            list.push('<span class=\"mini-dataimport-action\"><a href=\"javascript:void(0)\" class=\"dataimport-showdetail\">查看详情</a></span>');\r\n        }\r\n\r\n        list.push('</div>');\r\n\r\n        return list.join('');\r\n    },\r\n\r\n    _generateStatuslist: function (options) {\r\n        var i, len, arr,\r\n            isCheckEnd = true,\r\n            isSaveEnd = true;\r\n        var list = ['<div class=\"dataimport-status-item\">'];\r\n        list.push('<h3 class=\"dataimport-status-title\">' + options.sheetName + '</h3>');\r\n        list.push('<h4 class=\"dataimport-status-type\">校验结果：</h4>');\r\n        list.push('<p class=\"dataimport-status-count\">总计：' + options.checkCount + '条，成功：' + options.checkSuccessCount + '，失败：' + options.checkErrorCount + '条。');\r\n        if ((arr = options.checkMsg) && (len = arr.length)) {\r\n            list.push('<a href=\"javascript:void(0);\" class=\"dataimport-status-toggle\">展开详情</a></p>');\r\n            list.push('<div class=\"dataimport-status-detail\">');\r\n            for (i = 0; i < len; i++) {\r\n                list.push('<p>' + arr[i] + '</p>');\r\n            }\r\n            list.push('</div>');\r\n        } else {\r\n            isCheckEnd = false;\r\n        }\r\n\r\n        if (options.saveCount) {\r\n            if (!isCheckEnd) {\r\n                list.push('</p>');\r\n                isCheckEnd = true;\r\n            }\r\n            list.push('<h4 class=\"dataimport-status-type\">导入结果：</h4>');\r\n            list.push('<p class=\"dataimport-status-count\">总计：' + options.saveCount + '条，成功：' + options.saveSuccessCount + '，失败：' + options.saveErrorCount + '条。');\r\n\r\n            if ((arr = options.saveMsg) && (len = arr.length)) {\r\n                list.push('<a href=\"javascript:void(0);\" class=\"dataimport-status-toggle\">展开详情</a></p>');\r\n                list.push('<div class=\"dataimport-status-detail\">');\r\n                for (i = 0; i < len; i++) {\r\n                    list.push('<p>' + arr[i] + '</p>');\r\n                }\r\n                list.push('</div>');\r\n            } else {\r\n                isSaveEnd = false;\r\n            }\r\n        }\r\n\r\n        if ((arr = options.taskMsg) && (len = arr.length)) {\r\n            list.push('<a href=\"javascript:void(0);\" class=\"dataimport-status-toggle\">展开详情</a></p>');\r\n            list.push('<div class=\"dataimport-status-detail\">');\r\n            for (i = 0; i < len; i++) {\r\n                list.push('<p>' + arr[i] + '</p>');\r\n            }\r\n            list.push('</div>');\r\n        } else if (!isCheckEnd || !isSaveEnd) {\r\n            list.push('</p>');\r\n        }\r\n\r\n        list.push('</div>');\r\n\r\n        return list.join('');\r\n    },\r\n\r\n    _getSize: function (size) {\r\n        var K = 1024,\r\n            M = 1048576;\r\n        size = parseInt(size);\r\n\r\n        if (size > M) {\r\n            return (size / M).toFixed(2) + \"M\";\r\n        } else {\r\n            return (size / K).toFixed(2) + \"K\";\r\n        }\r\n    },\r\n\r\n    _pollingFrequency: 1000,\r\n    _oldAttachGuid: '',\r\n    _onUploadSuccess: function (event) {\r\n        var ret = event.ret,\r\n            file = event.file;\r\n\r\n        if (mini.getSecondRequestData) {\r\n            ret = mini.getSecondRequestData(ret);\r\n        }\r\n\r\n        ret = ret.data || ret;\r\n        ret = ret.extraDatas || ret;\r\n\r\n        this._pollingFrequency = ret.pollingFrequency;\r\n        if (ret.action == \"importStatus\") {\r\n            this._curAttachGuid = ret.attachGuid;\r\n            this._oldAttachGuid = ret.attachGuidOld;\r\n            this.pollingStatus(ret);\r\n            return;\r\n        }\r\n\r\n        var self = this;\r\n        mini.alert('数据导入失败，请重试！', '', function () {\r\n            self._onFinished(ret.status);\r\n\r\n            self.maskEl.style.display = 'none';\r\n        });\r\n\r\n\r\n    },\r\n\r\n    _onFinished: function (msg) {\r\n        msg = msg || \"导入已完成\";\r\n        this.isImportFinished = true;\r\n        this.maskContent.innerHTML = msg + '<a href=\"javascript:void(0);\" class=\"dataimport-showdetail\">查看详情</a>';\r\n\r\n        if (this._events[\"importfinished\"]) {\r\n            this.fire(\"importfinished\");\r\n        }\r\n\r\n        this.uploader.clearFile();\r\n    },\r\n\r\n    _onBeforeFileQueued: function (event) {\r\n        if (this._events[\"beforefilequeued\"]) {\r\n            this.fire(\"beforefilequeued\", event);\r\n        }\r\n    },\r\n\r\n    pollingStatus: function (options) {\r\n        this.maskContent.innerHTML = this._generateImportStatus(options);\r\n        var self = this,\r\n            data = {\r\n                fileMD5: this._curFileMD5,\r\n                attachGuid: this._curAttachGuid,\r\n                attachGuidOld: this._oldAttachGuid\r\n            };\r\n        data[this.uploader.id + \"_action\"] = \"importStatus\";\r\n\r\n        if (this.uploader.getCommonData) {\r\n            data.commonDto = mini.encode(this.uploader.getCommonData());\r\n        }\r\n\r\n        jQuery.ajax({\r\n            url: this.url,\r\n            data: data,\r\n            type: 'POST',\r\n            dataType: 'json'\r\n        }).done(function (data) {\r\n            if (mini.getSecondRequestData) {\r\n                data = mini.getSecondRequestData(data);\r\n            }\r\n            // 有提示信息，则alert\r\n            if (data.msg) {\r\n                mini.alert(data.msg);\r\n            }\r\n\r\n            if (data.end) {\r\n                self._onFinished(data.status);\r\n            } else {\r\n                setTimeout(jQuery.proxy(self.pollingStatus, self, data), self._pollingFrequency);\r\n            }\r\n\r\n            self.setDetailStatus(data.detail);\r\n\r\n        });\r\n    },\r\n\r\n    setDetailStatus: function (data) {\r\n        this.detailStatus = data;\r\n\r\n        if (this.isDetailShow) {\r\n            this.renderDetailStatus();\r\n        }\r\n    },\r\n\r\n    renderDetailStatus: function () {\r\n        var detail = this.detailStatus,\r\n            html = [],\r\n            i = 0,\r\n            l;\r\n\r\n        if (detail) {\r\n            for (l = detail.length; i < l; i++) {\r\n                html.push(this._generateStatuslist(detail[i]));\r\n            }\r\n\r\n        }\r\n\r\n        this.detailContent.innerHTML = html.join('');\r\n\r\n    },\r\n\r\n    showDetailStatus: function () {\r\n        this.renderDetailStatus();\r\n\r\n        this.detailEl.style.display = 'block';\r\n\r\n        this.isDetailShow = true;\r\n    },\r\n\r\n    hideDetailStatus: function () {\r\n        this.detailEl.style.display = 'none';\r\n\r\n        this.isDetailShow = false;\r\n    },\r\n\r\n    setUrl: function (url) {\r\n        this.url = url;\r\n\r\n        this.uploader && this.uploader.setUploadUrl(url);\r\n    },\r\n\r\n    getUrl: function () {\r\n        return this.url;\r\n    },\r\n\r\n    setPickerText: function (pickerText) {\r\n        this.pickerText = pickerText;\r\n        this.uploader.setPickerText(pickerText);\r\n    },\r\n\r\n    setEnabled: function(enabled) {\r\n        mini.CatalogImport.superclass.setEnabled.call(this, enabled);\r\n        this.uploader && this.uploader.setEnabled(enabled);\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.DataImport.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs, [\"url\", \"pickerText\", \"onbeforefilequeued\", \"onpostfilemd5\", \"onimportfinished\"]);\r\n        return attrs;\r\n    }\r\n\r\n});\r\n\r\nmini.regClass(mini.DataImport, 'dataimport');\nmini.DatePicker = function () {\r\n    mini.DatePicker.superclass.constructor.apply(this, arguments);\r\n    mini.addClass(this.el, 'mini-datepicker');\r\n\r\n    this.on('validation', this.__OnValidation, this);\r\n};\r\n\r\nmini.extend(mini.DatePicker, mini.ButtonEdit, {\r\n    valueFormat: '',\r\n    format: 'yyyy-MM-dd', //displayFormat可以是任意的\r\n    //editFormat: 'yyyy-MM-dd',   //固定几个editFormat，这样可以做成JS的优化处理\r\n\r\n    maxDate: '9999-12-31',\r\n    minDate: '1753-01-01',\r\n\r\n    showTime: false,\r\n    timeFormat: 'H:mm',\r\n\r\n    showYesterdayButton: false,\r\n    showTodayButton: true,\r\n    showClearButton: true,\r\n    showOkButton: false,\r\n    firstDayOfWeek: 0,\r\n\r\n    valueType: 'date', //date,string\r\n    formField: true,\r\n\r\n    allowInput: true,\r\n\r\n    uiCls: 'mini-datepicker',\r\n\r\n    _create: function () {\r\n        mini.DatePicker.superclass._create.call(this);\r\n\r\n        this.externalSrc = this.externalSrc || mini.externalSrc;\r\n        var self = this;\r\n        if (window.laydate) {\r\n            this._init();\r\n        } else {\r\n            mini.loadJS(this.externalSrc + 'laydate/laydate.js', function () {\r\n                self._init();\r\n            });\r\n        }\r\n    },\r\n\r\n    _init: function () {\r\n        var self = this;\r\n\r\n        var cfg = {\r\n            elem: this._textEl,\r\n            format: this._translateToLaydateFormat(this.format),\r\n            readOnly: this.readOnly,\r\n            enabled: this.enabled,\r\n            btns: this._getBtns(),\r\n            trigger: 'click',\r\n            ready: function (date) {\r\n                self._onLaydateReady(date);\r\n                self.showPopup();\r\n            },\r\n            done: function (value, date, endDate) {\r\n                self._onLaydateDone(value, date, endDate);\r\n                self._tryValidate();\r\n            },\r\n            onHide: function () {\r\n                self.hidePopup();\r\n            },\r\n            drawdate: function (date, dom) {\r\n                var event = {\r\n                    allowSelect: true,\r\n                    date: mini.parseDate(date.year + '-' + date.month + '-' + date.date),\r\n                    dom: dom\r\n                };\r\n                self.fire('drawdate', event);\r\n                if (!event.allowSelect) {\r\n                    mini.addClass(dom, 'laydate-disabled');\r\n                }\r\n            }\r\n        };\r\n\r\n        if (this.minDate) {\r\n            cfg.min = mini.formatDate(new Date(this.minDate), 'yyyy-MM-dd HH:mm:ss');\r\n        }\r\n\r\n        if (this.maxDate) {\r\n            cfg.max = mini.formatDate(new Date(this.maxDate), 'yyyy-MM-dd HH:mm:ss');\r\n        }\r\n\r\n        this._beforeLaydateRender(cfg);\r\n        // eslint-disable-next-line no-undef\r\n        this.laydate = laydate.render(cfg);\r\n\r\n        this._fixedHoverScroller();\r\n        this._fixedTimeScrollPos();\r\n    },\r\n\r\n    _translateToLaydateFormat: function (format) {\r\n        return format.replace(/(y)\\1{1}/g, function (match, g1, index, origin) {\r\n            if (origin.charAt(index - 1) === 'y' || origin.charAt(index + 2) === 'y') {\r\n                return 'yy';\r\n            }\r\n            return 'y';\r\n\r\n        });\r\n    },\r\n\r\n    _onLaydateReady: function (date) {\r\n\r\n    },\r\n    _onLaydateDone: function (value, date, endDate) {\r\n        this.setValue(value);\r\n\r\n        if (this._oldValue !== this.value) {\r\n            this.fire('valuechanged', {\r\n                value: this.value,\r\n                oldValue: this._oldValue\r\n            });\r\n\r\n            this._oldValue = this.value;\r\n        }\r\n\r\n    },\r\n    _beforeLaydateRender: function (cfg) {\r\n        if (this.showTime) {\r\n            cfg.type = 'datetime';\r\n\r\n            this.showOkButton = true;\r\n            cfg.btns = this._getBtns();\r\n        }\r\n    },\r\n    // 本来 是 overflow hidden 在 hover 时 overflow auto\r\n    // 会存在 hover 抖动的问题 此处计算滚动条宽度 来修正此问题\r\n    _fixedHoverScroller: function () {\r\n        var scrollerWidth = mini._scrollBarWidth;\r\n\r\n        var id = 'fixed-hover-scroller-for-daterange';\r\n        if (!scrollerWidth || $('#' + id).length) {\r\n            return;\r\n        }\r\n        var text = ['.laydate-time-list li ol {', 'margin-right: ' + scrollerWidth + 'px}', '.laydate-time-list>li:hover ol{', 'margin-right:0;}'].join('');\r\n        $('<style id=\"' + id + '\">' + text + '</style>').appendTo('head');\r\n    },\r\n    // laydate 中 时间的滚动是写高度的 会存在滚动位置不正确的问题\r\n    _fixedTimeScrollPos: (function () {\r\n        function scrollIntoView($target) {\r\n            var currentTop = $target.position().top;\r\n            var currentHeight = $target.outerHeight(true);\r\n            var $parent = $target.parent();\r\n            var viewHeight = $parent[0].offsetHeight;\r\n\r\n            if (currentTop > 0 && currentTop < viewHeight - currentHeight) {\r\n                // console.log('可见');\r\n            } else {\r\n                // console.log('不可见');\r\n                $parent[0].scrollTop = $parent[0].scrollTop + currentTop;\r\n            }\r\n        }\r\n        // 源码中已经滚动了一次了， 用 requestAnimationFrame 使得两个事件的间隔更可能的小 避免肉眼可见的跳动\r\n        var nextTick = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.setTimeout;\r\n\r\n        function handle(ev) {\r\n            var $target = $(ev.target || ev.srcElement);\r\n            if ($target.closest('.laydate-time-list > li li').length) {\r\n                // console.log(ev);\r\n\r\n                nextTick(function () {\r\n                    scrollIntoView($target);\r\n                });\r\n            }\r\n        }\r\n        // 确保只绑定一次\r\n        return document.addEventListener ?\r\n            function () {\r\n                document.removeEventListener('click', handle, true);\r\n                document.addEventListener('click', handle, true);\r\n            } :\r\n            function () {};\r\n    })(),\r\n\r\n    showPopup: function () {\r\n        var btnEl = jQuery(this.el).find('.mini-buttonedit-button')[0];\r\n        if (btnEl) {\r\n            mini.addClass(btnEl, this._buttonPressedCls);\r\n        }\r\n        // 滚动时隐藏\r\n        var namespace = '.daterange-' + this.id;\r\n        $('html, body, .fui-content').on('scroll' + namespace, function () {\r\n            $('body').trigger('click');\r\n            $('html, body, .fui-content').off('scroll' + namespace);\r\n        });\r\n        this.fire('showPopup');\r\n    },\r\n    hidePopup: function () {\r\n        var btnEl = jQuery(this.el).find('.mini-buttonedit-button')[0];\r\n        if (btnEl) {\r\n            mini.removeClass(btnEl, this._buttonPressedCls);\r\n        }\r\n        this.fire('hidePopup');\r\n    },\r\n\r\n    _monthPicker: false,\r\n\r\n    within: function (e) {\r\n        if (mini.isAncestor(this.el, e.target)) return true;\r\n        if (mini.isAncestor(this.laydate._laydate.elem, e.target)) return true;\r\n        return false;\r\n    },\r\n    minDateErrorText: '', //'不能小于日期 {0}',\r\n    maxDateErrorText: '', //'不能大于日期 {0}',\r\n    __OnValidation: function (e) {\r\n\r\n        if (e.isValid === false) return;\r\n        var date = this.value;\r\n\r\n        if (!mini.isDate(date)) return;\r\n        var maxDate = mini.parseDate(this.maxDate);\r\n        var minDate = mini.parseDate(this.minDate);\r\n        var maxDateErrorText = this.maxDateErrorText || mini.VTypes.maxDateErrorText;\r\n        var minDateErrorText = this.minDateErrorText || mini.VTypes.minDateErrorText;\r\n        if (mini.isDate(maxDate)) {\r\n            if (date.getTime() > maxDate.getTime()) {\r\n                e.isValid = false;\r\n                e.errorText = String.format(maxDateErrorText, mini.formatDate(maxDate, this.format));\r\n            }\r\n        }\r\n        if (mini.isDate(minDate)) {\r\n            if (date.getTime() < minDate.getTime()) {\r\n                e.isValid = false;\r\n                e.errorText = String.format(minDateErrorText, mini.formatDate(minDate, this.format));\r\n            }\r\n        }\r\n\r\n    },\r\n    setFormat: function (value) {\r\n        if (typeof value !== 'string') return;\r\n        if (this.format !== value) {\r\n            this.format = value;\r\n            this._textEl.value = this.getFormValue();\r\n\r\n            this._updateLaydateFormat();\r\n        }\r\n    },\r\n    _updateLaydateFormat: function () {\r\n        var dateType = 'yyyy|y|MM|M|dd|d|HH|H|mm|m|ss|s',\r\n            _laydate;\r\n        if (this.laydate) {\r\n            this.laydate.config.format = this._translateToLaydateFormat(this.format);\r\n            _laydate = this.laydate._laydate;\r\n            _laydate.format = this.laydate.config.format.match(new RegExp(dateType +'|.', 'g')) || [];\r\n\r\n            //生成正则表达式\r\n            _laydate.EXP_IF = '';\r\n            _laydate.EXP_SPLIT = '';\r\n            mini.forEach(_laydate.format, function (item, i) {\r\n                var EXP = new RegExp(dateType).test(item) ?\r\n                    '\\\\d{' + function () {\r\n                        if (new RegExp(dateType).test(_laydate.format[i === 0 ? i + 1 : i - 1] || '')) {\r\n                            if (/^yyyy|y$/.test(item)) return 4;\r\n                            return item.length;\r\n                        }\r\n                        if (/^yyyy$/.test(item)) return '1,4';\r\n                        if (/^y$/.test(item)) return '1,308';\r\n                        return '1,2';\r\n                    }() + '}' :\r\n                    '\\\\' + item;\r\n                _laydate.EXP_IF = _laydate.EXP_IF + EXP;\r\n                _laydate.EXP_SPLIT = _laydate.EXP_SPLIT + '(' + EXP + ')';\r\n            });\r\n            _laydate.EXP_IF = new RegExp('^' + (\r\n                this.delimiter ?\r\n                _laydate.EXP_IF + '\\\\s\\\\' + this.delimiter + '\\\\s' + _laydate.EXP_IF :\r\n                _laydate.EXP_IF\r\n            ) + '$');\r\n            _laydate.EXP_SPLIT = new RegExp('^' + _laydate.EXP_SPLIT + '$', '');\r\n        }\r\n    },\r\n    getFormat: function () {\r\n        return this.format;\r\n    },\r\n    setValueFormat: function (value) {\r\n        if (typeof value !== 'string') return;\r\n        if (this.valueFormat !== value) {\r\n            this.valueFormat = value;\r\n        }\r\n    },\r\n    getValueFormat: function () {\r\n        return this.valueFormat;\r\n    },\r\n    _oldValue: '',\r\n    setValue: function (value) {\r\n\r\n        var me = this;\r\n        if (this.getFormValue() !== value) {\r\n            if (me.valueType === 'date') {\r\n                value = mini.parseDate(value);\r\n            } else {\r\n                if (mini.isDate(value)) value = mini.formatDate(value, me.format);\r\n            }\r\n\r\n            if (mini.isNull(value)) value = '';\r\n            if (mini.isDate(value)) {\r\n                value = new Date(value.getTime());\r\n                if (mini.isDate(value) && isNaN(value.getTime())) {\r\n                    value = '';\r\n                }\r\n            }\r\n\r\n            this.value = value;\r\n            //this._doEmpty();\r\n        }\r\n        this.text = this.getFormValue();\r\n\r\n        this._textEl.value = this.text;\r\n    },\r\n    nullValue: '',\r\n    setNullValue: function (value) {\r\n        if (value === 'null') value = null;\r\n        this.nullValue = value;\r\n    },\r\n    getNullValue: function () {\r\n        return this.nullValue;\r\n    },\r\n\r\n    getValue: function () {\r\n        if (this.valueType !== 'date') return this.value;\r\n        if (!mini.isDate(this.value)) return this.nullValue;\r\n        var v = this.value;\r\n        if (this.valueFormat) {\r\n            v = mini.formatDate(v, this.valueFormat);\r\n        }\r\n        return v;\r\n    },\r\n\r\n    getFormValue: function (format) {\r\n        if (this.valueType !== 'date') return this.value;\r\n        if (!mini.isDate(this.value)) return '';\r\n        format = format || this.format;\r\n        return mini.formatDate(this.value, format);\r\n    },\r\n\r\n    setViewDate: function (value) {\r\n\r\n    },\r\n    getViewDate: function () {\r\n\r\n    },\r\n    setShowTime: function (value) {\r\n        if (this.showTime !== value) {\r\n            this.showTime = value;\r\n\r\n            this._updateLaydateShowTime();\r\n        }\r\n    },\r\n    _updateLaydateShowTime: function () {\r\n        if (!this.laydate) {\r\n            return;\r\n        }\r\n\r\n        if (this.showTime) {\r\n            this.laydate.config.type = 'datetime';\r\n\r\n            this.showOkButton = true;\r\n            this.laydate.config.btns = this._getBtns();\r\n        } else {\r\n            this.laydate.config.type = 'date';\r\n        }\r\n    },\r\n    getShowTime: function () {\r\n        return this.showTime;\r\n    },\r\n    setTimeFormat: function (value) {\r\n        if (this.timeFormat !== value) {\r\n            this.timeFormat = value;\r\n        }\r\n    },\r\n    getTimeFormat: function () {\r\n        return this.timeFormat;\r\n    },\r\n\r\n    setShowYesterdayButton: function (value) {\r\n        this.showYesterdayButton = value;\r\n        //this.doUpdate();\r\n    },\r\n    getShowYesterdayButton: function () {\r\n        return this.showYesterdayButton;\r\n    },\r\n    setShowTodayButton: function (value) {\r\n        this.showTodayButton = value;\r\n        this._updateLaydateBtns();\r\n    },\r\n    getShowTodayButton: function () {\r\n        return this.showTodayButton;\r\n    },\r\n    setShowClearButton: function (value) {\r\n        this.showClearButton = value;\r\n        this._updateLaydateBtns();\r\n    },\r\n    getShowClearButton: function () {\r\n        return this.showClearButton;\r\n    },\r\n    setShowOkButton: function (value) {\r\n        this.showOkButton = value;\r\n        this._updateLaydateBtns();\r\n    },\r\n    getShowOkButton: function () {\r\n        return this.showOkButton;\r\n    },\r\n    _getBtns: function () {\r\n        var btns = [];\r\n        if (this.showClearButton) {\r\n            btns.push('clear');\r\n        }\r\n        if (this.showTodayButton) {\r\n            btns.push('now');\r\n        }\r\n        if (this.showOkButton) {\r\n            btns.push('confirm');\r\n        }\r\n\r\n        return btns;\r\n    },\r\n    _updateLaydateBtns: function () {\r\n        if (this.laydate) {\r\n            this.laydate.config.btns = this._getBtns();\r\n        }\r\n    },\r\n    setShowWeekNumber: function (value) {\r\n        this.showWeekNumber = value;\r\n    },\r\n    getShowWeekNumber: function () {\r\n        return this.showWeekNumber;\r\n    },\r\n    setMaxDate: function (value) {\r\n        this.maxDate = value;\r\n        if (this.laydate) {\r\n            var date = new Date(this.maxDate);\r\n            this.laydate.config.max = {\r\n                year: date.getFullYear(),\r\n                month: date.getMonth(),\r\n                date: date.getDate(),\r\n                hours: date.getHours(),\r\n                minutes: date.getMinutes(),\r\n                seconds: date.getSeconds()\r\n            };\r\n        }\r\n    },\r\n    getMaxDate: function () {\r\n        return this.maxDate;\r\n    },\r\n    setMinDate: function (value) {\r\n        this.minDate = value;\r\n        if (this.laydate) {\r\n            var date = new Date(this.minDate);\r\n            this.laydate.config.min = {\r\n                year: date.getFullYear(),\r\n                month: date.getMonth(),\r\n                date: date.getDate(),\r\n                hours: date.getHours(),\r\n                minutes: date.getMinutes(),\r\n                seconds: date.getSeconds()\r\n            };\r\n        }\r\n    },\r\n    getMinDate: function () {\r\n        return this.minDate;\r\n    },\r\n\r\n    setMaxDateErrorText: function (value) {\r\n        this.maxDateErrorText = value;\r\n    },\r\n    getMaxDateErrorText: function () {\r\n        return this.maxDateErrorText;\r\n    },\r\n    setMinDateErrorText: function (value) {\r\n        this.minDateErrorText = value;\r\n    },\r\n    getMinDateErrorText: function () {\r\n        return this.minDateErrorText;\r\n    },\r\n    setEnabled: function (enable) {\r\n        mini.DatePicker.superclass.setEnabled.call(this, enable);\r\n        this.laydate && (this.laydate.config.enabled = enable);\r\n    },\r\n    _OnButtonClick: function (htmlEvent) {\r\n        // 阻止事件冒泡，解决由于laydate绑定在body上的click事件，日期选择面板消失问题\r\n        htmlEvent.stopPropagation();\r\n\r\n        var e = {\r\n            htmlEvent: htmlEvent,\r\n            cancel: false\r\n        };\r\n        this.fire(\"beforebuttonclick\", e);\r\n        if (e.cancel == true) return;\r\n\r\n        this.fire(\"buttonclick\", e);\r\n\r\n        jQuery(this._textEl).trigger('click');\r\n    },\r\n    //////////////////////////////////\r\n    __OnInputTextChanged: function (e) {\r\n        var v = this._textEl.value;\r\n\r\n        if (this.valueType == \"date\") {\r\n            var d = mini.parseDate(v);\r\n\r\n            //if (!d || isNaN(d) || d.getFullYear() == 1970) {\r\n            if (!d || isNaN(d)) {\r\n                d = null;\r\n            }\r\n\r\n        }\r\n\r\n        this.setValue(v);\r\n\r\n    },\r\n    __OnInputKeyDown: function (e) {\r\n        var ex = {\r\n            htmlEvent: e\r\n        };\r\n        this.fire('keydown', ex);\r\n        if (e.keyCode === 8 && (this.isReadOnly() || this.allowInput === false)) {\r\n            return false;\r\n        }\r\n\r\n        if (e.keyCode === 9) { //tab\r\n            if (this.isShowPopup()) {\r\n                this.hidePopup();\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this.isReadOnly()) return;\r\n\r\n        switch (e.keyCode) {\r\n            case 27: //esc\r\n                e.preventDefault();\r\n                if (this.isShowPopup()) {\r\n                    e.stopPropagation();\r\n                }\r\n\r\n                this.hidePopup();\r\n                break;\r\n            case 9: //tab\r\n            case 13: //enter     \r\n\r\n                this.__OnInputTextChanged(null);\r\n                var me = this;\r\n                setTimeout(function () {\r\n                    me.fire('enter', ex);\r\n                }, 10);\r\n                break;\r\n            case 37: //left\r\n                break;\r\n            case 38: //top      \r\n                e.preventDefault();\r\n                break;\r\n            case 39: //right\r\n                break;\r\n            case 40: //bottom\r\n                if (this.keyNavEnabled) {\r\n                    e.preventDefault();\r\n                    this.showPopup();\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n    setReadOnly: function (readOnly) {\r\n        mini.DatePicker.superclass.setReadOnly.call(this, readOnly);\r\n\r\n        this.laydate && (this.laydate.config.readOnly = readOnly);\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.DatePicker.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"format\", \"viewDate\", \"timeFormat\", \"ondrawdate\", \"minDate\", \"maxDate\", \"valueType\",\r\n                \"valueFormat\", \"nullValue\", \"minDateErrorText\", \"maxDateErrorText\"\r\n            ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"showTime\", \"showTodayButton\", \"showClearButton\", \"showOkButton\", \"showWeekNumber\", \"showYesterdayButton\", 'allowInput']\r\n        );\r\n\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.DatePicker, 'datepicker');\r\n\r\n\r\nmini.MonthPicker = function () {\r\n    mini.MonthPicker.superclass.constructor.apply(this, arguments);\r\n\r\n};\r\n\r\nmini.extend(mini.MonthPicker, mini.DatePicker, {\r\n    uiCls: 'mini-monthpicker',\r\n    valueFormat: \"\",\r\n    format: \"yyyy-MM\",\r\n    _monthPicker: true,\r\n    showOkButton: true,\r\n    _beforeLaydateRender: function (cfg) {\r\n        cfg.type = 'month';\r\n    }\r\n});\r\nmini.regClass(mini.MonthPicker, 'monthpicker');\nmini.DateRangePicker = function() {\r\n    mini.DateRangePicker.superclass.constructor.call(this);\r\n};\r\n\r\nmini.extend(mini.DateRangePicker, mini.DatePicker, {\r\n    uiCls: 'mini-daterangepicker',\r\n\r\n    rangeType: 'date',\r\n    delimiter: '~',\r\n    showOkButton: true,\r\n\r\n    set: function(kv) {\r\n        if (typeof kv === 'string') {\r\n            return this;\r\n        }\r\n\r\n        var rangeType = kv.rangeType;\r\n        delete kv.rangeType;\r\n        var format = kv.format;\r\n        delete kv.format;\r\n\r\n        mini.DateRangePicker.superclass.set.call(this, kv);\r\n\r\n        if (!mini.isNull(rangeType)) {\r\n            this.setRangeType(rangeType);\r\n        }\r\n        if (!mini.isNull(format)) {\r\n            this.setFormat(format);\r\n        }\r\n        return this;\r\n    },\r\n    _onLaydateReady: function (date) { \r\n        var $btns = $('.laydate-footer-btns');\r\n        if($btns.length) {\r\n            $('<span class=\"laydate-footer-tips\">注：点击某日期两次代表选择某一天</span>').insertBefore($btns);\r\n        }\r\n    },\r\n    _onLaydateDone: function (value, date, endDate) { \r\n        this.setValue({\r\n            startDate: this._formatDate(date),\r\n            endDate: this._formatDate(endDate)\r\n        });\r\n    },\r\n    _beforeLaydateRender: function (cfg) {  \r\n        if(this.showTime) {\r\n            cfg.type = 'datetime';\r\n        }\r\n        cfg.range = this.delimiter;\r\n    },\r\n    _formatDate: function(date) {\r\n        function isEmptyObject(obj) {\r\n            for (var key in obj) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n\r\n        if (!date || isEmptyObject(date)) {\r\n            return '';\r\n        }\r\n\r\n        var result = this.format.replace(/yyyy/g, date.year);\r\n        result = result.replace(/yy/g, (date.year + '').substring(2));\r\n        result = result.replace(/MM/g, date.month < 10 ? '0' + date.month : date.month);\r\n        result = result.replace(/M/g, date.month);\r\n        result = result.replace(/dd/g, date.date < 10 ? '0' + date.date : date.date);\r\n        result = result.replace(/d/g, date.date);\r\n        result = result.replace(/HH/g, date.hours < 10 ? '0' + date.hours : date.hours);\r\n        result = result.replace(/H/g, date.hours);\r\n        result = result.replace(/mm/g, date.minutes < 10 ? '0' + date.minutes : date.minutes);\r\n        result = result.replace(/m/g, date.minutes);\r\n        result = result.replace(/ss/g, date.seconds < 10 ? '0' + date.seconds : date.seconds);\r\n        result = result.replace(/s/g, date.seconds);\r\n\r\n        return result;\r\n    },\r\n\r\n    setFormat: function(format) {\r\n        this.format = format;\r\n\r\n        this.laydate && (this.laydate.config.format = this._translateToLaydateFormat(format));\r\n    },\r\n\r\n    _translateToLaydateFormat: function(format) {\r\n        return format.replace(/(y)\\1{1}/g, function(match, g1, index, origin) {\r\n            if (origin.charAt(index - 1) == 'y' || origin.charAt(index + 2) == 'y') {\r\n                return 'yy';\r\n            } \r\n                return 'y';\r\n            \r\n        });\r\n    },\r\n\r\n    setMinDate: function(value) {\r\n        this.minDate = mini.parseDate(value);\r\n\r\n        if (this.laydate) {\r\n            this.laydate.config.min = {\r\n                year: this.minDate.getFullYear(),\r\n                month: this.minDate.getMonth(),\r\n                date: this.minDate.getDate(),\r\n                hours: this.minDate.getHours(),\r\n                minutes: this.minDate.getMinutes(),\r\n                seconds: this.minDate.getSeconds()\r\n            };\r\n        }\r\n    },\r\n    setMaxDate: function(value) {\r\n        this.maxDate = mini.parseDate(value);\r\n\r\n        if (this.laydate) {\r\n            this.laydate.config.max = {\r\n                year: this.maxDate.getFullYear(),\r\n                month: this.maxDate.getMonth(),\r\n                date: this.maxDate.getDate(),\r\n                hours: this.maxDate.getHours(),\r\n                minutes: this.maxDate.getMinutes(),\r\n                seconds: this.maxDate.getSeconds()\r\n            };\r\n        }\r\n    },\r\n\r\n    setRangeType: function(value) {\r\n        this.rangeType = value;\r\n\r\n        this.laydate && (this.laydate.config.type = value);\r\n\r\n        if (value == 'datetime') {\r\n            this.format = 'yyyy-MM-dd HH:mm';\r\n            this.showTime = true;\r\n        } else {\r\n            this.showTime = false;\r\n        }\r\n    },\r\n    setShowTime: function (value) {\r\n        if (this.showTime !== value) {\r\n            this.showTime = value;\r\n\r\n            if(this.showTime) {\r\n                this.rangeType = 'datetime';\r\n            } else {\r\n                this.rangeType = 'date';\r\n            }\r\n        }\r\n    },\r\n    _oldValue: {\r\n        startDate: '',\r\n        endDate: ''\r\n    },\r\n    value: {\r\n        startDate: '',\r\n        endDate: ''\r\n    },\r\n    setValue: function(value) {\r\n        if(typeof value === 'string') {\r\n            value = mini.JSON.decode(value);\r\n        }\r\n        if (!value.startDate || !value.endDate) {\r\n            this.value = {\r\n                startDate: '',\r\n                endDate: ''\r\n            };\r\n            this.text = '';\r\n        } else {\r\n            this.value = {\r\n                startDate: mini.formatDate(mini.parseDate(value.startDate), this.format),\r\n                endDate: mini.formatDate(mini.parseDate(value.endDate), this.format)\r\n            };\r\n            this.text = this.value.startDate + ' ' + this.delimiter + ' ' + this.value.endDate;\r\n        }\r\n\r\n        if (this.value.startDate != this._oldValue.startDate || this.value.endDate != this._oldValue.endDate) {\r\n            \r\n            this._oldValue = this.value;\r\n            this.fire('valuechanged', {\r\n                value: this.value,\r\n                oldValue: this._oldValue\r\n            });\r\n\r\n            this._oldValue = this.value;\r\n        }\r\n        \r\n        this._textEl.value = this.text;\r\n    },\r\n    getValue: function() {\r\n        return this.value;\r\n    },\r\n    getText: function() {\r\n        return this._textEl.value;\r\n    },\r\n    validate: function() {\r\n        var e = {\r\n            value: this.getValue(),\r\n            errorText: '',\r\n            isValid: true\r\n        };\r\n\r\n        if (this.required) {\r\n            // value 是特殊的格式，需要特殊处理\r\n            if (String(e.value.startDate).trim() === '' || String(e.value.endDate).trim() === '') {\r\n                e.isValid = false;\r\n                e.errorText = this.requiredErrorText;\r\n            }\r\n        }\r\n\r\n        this.fire('validation', e);\r\n\r\n        this.errorText = e.errorText;\r\n        this.setIsValid(e.isValid);\r\n        return this.isValid();\r\n    },\r\n    getAttrs: function(el) {\r\n        var attrs = mini.DateRangePicker.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs, ['rangeType', 'format', 'minDate', 'maxDate', 'onvaluechanged', 'emptyText', 'onShowPopup', 'onHidePopup']);\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.DateRangePicker, 'daterangepicker');\r\n\n/**\r\n * FilterTree\r\n * @class\r\n * @extends mini.Tree\r\n * @constructor\r\n */\r\n\r\n mini.FilterTree = function() {\r\n\r\n    mini.FilterTree.superclass.constructor.call(this);\r\n\r\n    this.initComponents();\r\n    this.bindEvents();\r\n\r\n};\r\n\r\nmini.extend(mini.FilterTree, mini.Tree, {\r\n    // 搜索模式，可取值为'client'、'server'\r\n    filterMode: 'client',\r\n\r\n    filterUrl: '',\r\n\r\n    height: '100%',\r\n\r\n    emptyText: '请输入内容查询',\r\n\r\n    uiCls: 'mini-filtertree',\r\n\r\n\r\n    initComponents: function() {\r\n        var toolbar = '<input name=\"filterInput\" class=\"mini-buttonedit mini-filtertree-filter\" emptyText=\"' + this.emptyText + '\" />';\r\n\r\n        this.set({\r\n            showToolbar: true,\r\n            toolbar: toolbar\r\n        });\r\n    },\r\n\r\n    _filterKey: '',\r\n    bindEvents: function() {\r\n        var that = this;\r\n        this._filterInput = mini.getbyName('filterInput', this);\r\n        \r\n        // 键盘事件\r\n        this._filterInput.on('enter', function() {\r\n            // 回车触发搜索\r\n            var key = that._filterInput._textEl.value;\r\n            that._doFilter(key);\r\n        });\r\n        // 按钮事件\r\n        this._filterInput.on('buttonclick', function () {\r\n            var key = that._filterInput._textEl.value;\r\n            that._doFilter(key);    \r\n        });\r\n        this.on('load', function(e){\r\n            var data = e.data;\r\n            // 只有真正的ajax请求才需要设置_initialData\r\n            // 排查框架 commondto 中 setData 触发的 load 事件\r\n            if(e.xhr && this.filterMode === 'client') {\r\n                this._initialData = mini.clone(data);\r\n            }\r\n        });\r\n\r\n    },\r\n    setData: function(data) {\r\n        mini.FilterTree.superclass.setData.call(this, data);\r\n\r\n        if(this.filterMode === 'client') {\r\n            this._initialData = mini.clone(data);\r\n        }\r\n    },\r\n    _doFilter: function(key){\r\n        var that = this;\r\n        that._filterKey = key;\r\n        if (that.filterMode == 'server') {\r\n\r\n            var e = {\r\n                data: {\r\n                    search_condition: key\r\n                },\r\n                url: that.getFilterUrl(),\r\n                sender: that,\r\n                cancel: false\r\n            };\r\n\r\n            that.fire('serverfilter', e);\r\n            if(e.cancel) {\r\n                return;\r\n            }\r\n            that.fire('beforeload', e);\r\n            jQuery.ajax({\r\n                url: e.url,\r\n                data: e.data,\r\n                type: 'post',\r\n                success: function(text, textStatus, xhr) {\r\n\r\n                    if (!text || text == 'null') {\r\n                        text = '{ tatal: 0, data: [] }';\r\n                    }\r\n\r\n                    delete e.params;\r\n                    var obj = { text: text, result: null, sender: that, options: e, xhr: xhr };\r\n                    var result = null;\r\n                    try {\r\n                        mini_doload(obj);\r\n                        result = obj.result;\r\n                        if (!result) {\r\n                            result = mini.decode(text);\r\n                        }\r\n                    } catch (err) {\r\n                        if (mini_debugger == true) {\r\n                            alert(url + '\\n json is error.');\r\n                        }\r\n                    }\r\n                    if (mini.isArray(result)) {\r\n                        result = { data: result };\r\n                    }\r\n                    if (that.dataField) {\r\n                        result.data = mini._getMap(that.dataField, result);\r\n                    }\r\n                    if (!result.data) result.data = [];\r\n\r\n                    var ex = { data: result.data, cancel: false, result: result };\r\n                    that.fire('preload', ex);\r\n                    if (ex.cancel == true) return;\r\n\r\n\r\n                    if (that.getResultAsTree()) {\r\n                        that.loadData(ex.data);\r\n                    } else {\r\n                        that.loadList(ex.data);\r\n                    }\r\n\r\n                    that.fire('filter');\r\n                    // 没有搜索条件时，表示还原到未搜索状态，不需要展开节点\r\n                    if (key !== '') {\r\n                        that.expandAll();\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            if (key === '') {\r\n                that.clearFilter();\r\n                \r\n                that.isFilter = false;\r\n            } else {\r\n                // 节点的 text 都是 html 转义的，key也需要转义下\r\n                key = mini.htmlEncode(key.toLowerCase());\r\n                that.filter(function(node) {\r\n                    var text = node.text ? node.text.toLowerCase() : '';\r\n                    if (text.indexOf(key) != -1) {\r\n                        return true;\r\n                    }\r\n                });\r\n                that.expandAll();\r\n                that.isFilter = true;\r\n            }\r\n            that.fire('filter');\r\n        }\r\n\r\n    },\r\n    // 把node的text可能包含的html标签去除掉\r\n    _OnCellClick: function(e) {\r\n        //if (mini.findParent(e.htmlEvent.target, 'mini-tree-editinput')) return;\r\n        //        if (mini.findParent(e.htmlEvent.target, this._eciconCls)) {\r\n        //            //this._tryToggleNode(e.record);\r\n        //        } else \r\n        if (mini.findParent(e.htmlEvent.target, this._eciconCls)) return;\r\n\r\n        var nodes, text;\r\n\r\n        // 有值则说明存在搜索，则节点text中存在HTML标签\r\n        if (this._filterKey) {\r\n            nodes = e.record[this.nodesField];\r\n            if (nodes) {\r\n\r\n                for (var i = 0, l = nodes.length; i < l; i++) {\r\n                    text = nodes[i][this.textField];\r\n                    nodes[i][this.textField] = text.replace(/<\\/?.+?>/g, '');\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n        if (mini.findParent(e.htmlEvent.target, 'mini-tree-checkbox') || this.checkOnTextClick) {\r\n            this._tryToggleCheckNode(e.record);\r\n        } else {\r\n            this.fire('cellclick', e);\r\n        }\r\n    },\r\n\r\n    // 安全整改后服务端不再返回html，所以搜索关键字高亮效果需要前端来实现了\r\n    _OnDrawCell: function (record, column, rowIndex, columnIndex) {\r\n\r\n        var e = mini.TreeGrid.superclass._OnDrawCell.call(this, record, column, rowIndex, columnIndex);\r\n        function dealRegExp(reg) {\r\n            return reg.replace(/\\\\/g, '\\\\\\\\')\r\n                    .replace(/\\$/g, '\\\\$')\r\n                    .replace(/\\(/g, '\\\\(')\r\n                    .replace(/\\)/g, '\\\\)')\r\n                    .replace(/\\*/g, '\\\\*')\r\n                    .replace(/\\+/g, '\\\\+')\r\n                    .replace(/\\./g, '\\\\.')\r\n                    .replace(/\\[/g, '\\\\[')\r\n                    .replace(/\\?/g, '\\\\?')\r\n                    .replace(/\\^/g, '\\\\^')\r\n                    .replace(/\\{/g, '\\\\{')\r\n                    .replace(/\\|/g, '\\\\|')\r\n                    .replace(/</g, '&lt;')\r\n                    .replace(/>/g, '&gt;');\r\n        }\r\n        if (this._treeColumn && this._treeColumn == column.name) {\r\n            var node = e.node;\r\n\r\n            if (node.ckr === false) {\r\n                e.showCheckBox = false;\r\n                e.showRadioButton = false;\r\n            }\r\n            // 加上搜索关键字高亮效果\r\n            if(this._filterKey) {\r\n                var text = record[column.field];\r\n                // 如果text中已经有html了，说明已经关键字高亮了，不需要再做处理\r\n                // 兼容以前服务端实现高亮的情况，以及解决展开收起节点引起的重复drawcell事件\r\n                if(!/<[^>]+>/.test(text)) {\r\n                    e.nodeHtml = text.replace(new RegExp('(' + dealRegExp(this._filterKey) + ')', 'gi' ), '<span class=\"mini-highlight\">$1</span>');\r\n                }\r\n                \r\n            }\r\n            this.fire('drawnode', e);\r\n            if (e.nodeStyle) {\r\n                e.cellStyle = e.nodeStyle;\r\n            }\r\n            if (e.nodeCls) {\r\n                e.cellCls = e.nodeCls;\r\n            }\r\n            if (e.nodeHtml) {\r\n                e.cellHtml = e.nodeHtml;\r\n            } else if(node.textCls) {\r\n                e.cellHtml = '<span class=\"' + node.textCls + '\">' + e.cellHtml + '</span>';\r\n            }\r\n\r\n            this._createTreeColumn(e);\r\n        }\r\n        return e;\r\n    },\r\n    clearFilter: function() {\r\n        if(this._filterKey || this.isFilter) {\r\n            this._filterInput.setValue('');\r\n            this._filterInput.setText('');\r\n            this._filterKey = '';\r\n    \r\n            mini.FilterTree.superclass.clearFilter.call(this);\r\n    \r\n            if(this.filterMode === 'server') {\r\n                this.reload();\r\n            } else {\r\n                this._initialData && this.setData(this._initialData);\r\n            }\r\n        }\r\n        \r\n    },\r\n    getFilterUrl: function() {\r\n        return this.filterUrl || this.url;\r\n    },\r\n\r\n    setFilterUrl: function(filterUrl) {\r\n        this.filterUrl = filterUrl;\r\n    },\r\n\r\n    getFilterMode: function() {\r\n        return this.filterMode;\r\n    },\r\n\r\n    setFilterMode: function(filterMode) {\r\n        this.filterMode = filterMode;\r\n    },\r\n    /**\r\n     * [setEmptyText 设置搜索树文本框为空时内容]\r\n     * @param {String} value 要设置的值\r\n     */\r\n    setEmptyText: function(value) {\r\n        if (this.emptyText != value) {\r\n            this._filterInput.emptyText = this.emptyText = value;\r\n            this._filterInput._doEmpty();\r\n        }\r\n    },\r\n    /**\r\n     * [getEmptyText 获取搜索树文本框为空时内容提示]\r\n     * @return {String} emptyText\r\n     */\r\n    getEmptyText: function() {\r\n        return this.emptyText;\r\n    },\r\n\r\n    getAttrs: function(el) {\r\n        var attrs = mini.FilterTree.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs, ['filterMode', 'filterUrl', 'emptyText', 'onserverfilter']);\r\n\r\n        if (!attrs.filterUrl) {\r\n            attrs.filterUrl = attrs.url;\r\n        }\r\n        return attrs;\r\n    }\r\n\r\n\r\n});\r\n\r\nmini.regClass(mini.FilterTree, 'filtertree');\r\n\nmini.ImageUploader = function () {\r\n    mini.ImageUploader.superclass.constructor.call(this);\r\n};\r\n// mini.ImageUploader.FILE_ADD_QUEUE = 'FILE_ADD_QUEUE';\r\n\r\nmini.extend(mini.ImageUploader, mini.Control, {\r\n    uiCls: 'mini-imageuploader',\r\n    actionButtons: [\r\n        { icon: 'icon-upload', name: '上传', role: 'reselect' },\r\n        { icon: 'icon-trash', name: '删除', role: 'remove' }\r\n    ],\r\n    maxBtnNum: 3,\r\n\r\n    imageWidth: 80,\r\n    imageHeight: 80,\r\n\r\n    limitWidth: NaN, // 要求的图片宽度\r\n    limitHeight: NaN, // 要求的图片高度\r\n\r\n    accept: 'image/*',\r\n\r\n    fileNumLimit: undefined,\r\n    fileSizeLimit: undefined,\r\n\r\n    multiple: false, // 多图上传\r\n    serverFileNum: 0,\r\n    data: [],\r\n\r\n    /**\r\n     * state ： pedding -> uploading -> done\r\n     * state: pedding -> uploading -> fail\r\n     */\r\n    STATE_TEXT: {\r\n        PEDDING: 'pedding',\r\n        UPLOADING: 'UPLOADING',\r\n        DONE: 'done',\r\n        FAIL: 'fail'\r\n    },\r\n\r\n    _dealUrl: function (url) {\r\n        return url;\r\n    },\r\n    _initToolTip: function () {\r\n        if (mini.ImageUploader.tooltip) return;\r\n        var tip = (mini.ImageUploader.tooltip = new mini.ToolTip());\r\n        tip.set({\r\n            target: document.body,\r\n            trigger: 'hover',\r\n            selector: '.mini-imageuploader [data-tooltip]',\r\n            placement: 'top',\r\n            autoHide: true\r\n        });\r\n    },\r\n    _create: function () {\r\n        this.externalSrc = this.externalSrc || mini.externalSrc;\r\n        (this._fileIdPrefix = this.id + '$file$'), (this._fileIndex = 0);\r\n\r\n        this._initToolTip();\r\n        this._createInput();\r\n\r\n        this.el = document.createElement('div');\r\n        this.el.innerHTML =\r\n            '<div class=\"mini-imageuploader-list\"><label class=\"mini-imageuploader-addbutton action-icon icon-add\"></label></div>';\r\n\r\n        this._listEl = this.el.firstChild;\r\n\r\n        this.el.appendChild(this._fileInput);\r\n\r\n        this._$addBtn = jQuery(this.el).find('.mini-imageuploader-addbutton');\r\n        this._$addBtn\r\n            .css({\r\n                width: this.imageWidth ? this.imageWidth : 'auto',\r\n                height: this.imageHeight ? this.imageHeight : 'auto',\r\n                lineHeight: this.imageHeight ? this.imageHeight + 'px' : ''\r\n            })\r\n            .attr({\r\n                for: this.id + '$file'\r\n            });\r\n\r\n        mini.on(this._$addBtn[0], 'click', this.__onAddBtnClick, this);\r\n\r\n        this.on('change', this.__onFileChange, this);\r\n    },\r\n    setActionButtons: function (arr) {\r\n        var that = this;\r\n        var MORE_ID = this.id + '$action$more';\r\n        this.actionButtons = arr;\r\n        var map = (this.actionButtonsMap = {});\r\n        jQuery.each(arr, function (i, item) {\r\n            if (!item.id) {\r\n                item.id = this.id + '$action$' + (i + 1);\r\n            }\r\n            map[item.id] = item;\r\n        });\r\n        console.log('_initActionBtn');\r\n\r\n        jQuery(this.el)\r\n            .off('click', '.mini-imageuploader-btn')\r\n            .on('click', '.mini-imageuploader-btn', function (e) {\r\n                var target = e.target;\r\n                var id = target.getAttribute('data-id');\r\n                if (id === MORE_ID) {\r\n                    that._showActionPopup(target);\r\n                    return;\r\n                }\r\n                var action = that.actionButtonsMap[id];\r\n                if (!action) return;\r\n                // 默认的处理逻辑\r\n                var role = action.role;\r\n                if (role) {\r\n                    that.handleActionBtnClick(role, that._genderActionBtnEventData(target));\r\n                    return;\r\n                }\r\n                // 用户自定义的处理逻辑\r\n                var handle = action.handle;\r\n                if (typeof handle !== 'function') {\r\n                    handle = window[handle];\r\n                }\r\n                if (typeof handle === 'function') {\r\n                    handle.call(that, that._genderActionBtnEventData(target));\r\n                }\r\n            });\r\n\r\n        var isOver = this.actionButtons.length > this.maxBtnNum;\r\n        var html;\r\n        if (!isOver) {\r\n            html = jQuery\r\n                .map(this.actionButtons, function (btn) {\r\n                    return (\r\n                        '<span class=\"mini-imageuploader-btn action-icon ' +\r\n                        btn.icon +\r\n                        '\" data-tooltip=\"' +\r\n                        btn.name +\r\n                        '\" data-id=\"' +\r\n                        btn.id +\r\n                        '\"></span>'\r\n                    );\r\n                })\r\n                .join('');\r\n            this._actionBtnHtml = html;\r\n            return;\r\n        }\r\n\r\n        var base = this.actionButtons.slice(0, this.maxBtnNum - 1);\r\n        base.push({ id: MORE_ID, icon: 'icon-omit', handle: this._showActionPopup, name: '更多' });\r\n        var ext = this.actionButtons.slice(this.maxBtnNum - 1);\r\n        this._initActonBtnPopup(ext);\r\n        html = jQuery\r\n            .map(base, function (btn) {\r\n                return (\r\n                    '<span class=\"mini-imageuploader-btn action-icon ' +\r\n                    btn.icon +\r\n                    '\" data-tooltip=\"' +\r\n                    btn.name +\r\n                    '\" data-id=\"' +\r\n                    btn.id +\r\n                    '\"></span>'\r\n                );\r\n            })\r\n            .join('');\r\n        this._actionBtnHtml = html;\r\n    },\r\n    _genderActionBtnEventData: function (target) {\r\n        var $target = jQuery(target);\r\n        var icon = this.actionButtonsMap[$target.attr('data-id')];\r\n        var $file = $target.closest('.mini-imageuploader-item');\r\n        var fileId = $file.attr('file-id');\r\n        var fileGuid = $file.attr('file-guid');\r\n        var fileData = this.data.filter(function (file) {\r\n            return file.id == fileId || file.attachGuid == fileGuid;\r\n        })[0];\r\n        var e = {\r\n            sender: this,\r\n            source: this,\r\n            icon: icon,\r\n            file: fileData,\r\n            fileEl: $file[0]\r\n        };\r\n\r\n        return e;\r\n    },\r\n    _initActonBtnPopup: function (ext) {\r\n        if (this.__extMenuInited) return;\r\n        var that = this;\r\n        var extMenu = new mini.Menu();\r\n        extMenu.set({\r\n            minWidth: 50,\r\n            yOffset: 4\r\n        });\r\n\r\n        extMenu.setItems(\r\n            $.map(ext, function (item) {\r\n                return {\r\n                    id: item.id,\r\n                    text: item.name,\r\n                    iconCls: item.icon\r\n                };\r\n            })\r\n        );\r\n        extMenu.on('itemclick', function (e) {\r\n            var id = e.item.id;\r\n            var moreTarget = e.sender.popupEl;\r\n            var action = that.actionButtonsMap[id];\r\n            if (!action) return;\r\n            // 默认的处理逻辑\r\n            var role = action.role;\r\n            if (role) {\r\n                that.handleActionBtnClick(role, that._genderActionBtnEventData(moreTarget));\r\n                return;\r\n            }\r\n            var handle = action.handle;\r\n            if (typeof handle !== 'function') {\r\n                handle = window[handle];\r\n            }\r\n            if (typeof handle === 'function') {\r\n                handle.call(that, that._genderActionBtnEventData(moreTarget));\r\n            }\r\n        });\r\n        var oldHide = extMenu.hide;\r\n        extMenu.hide = function () {\r\n            oldHide.apply(this, arguments);\r\n            // 移除 active\r\n            jQuery(that.el).find('.mini-imageuploader-btn').removeClass('active');\r\n        };\r\n\r\n        this.__extMenu = extMenu;\r\n        this.__extMenuInited = true;\r\n\r\n        this._showActionPopup = function (target) {\r\n            extMenu.popupEl = target;\r\n            extMenu.showAtEl(target);\r\n            jQuery(target).addClass('active');\r\n        };\r\n    },\r\n    handleActionBtnClick: function (role, event) {\r\n        var that = this;\r\n        switch (role) {\r\n            case 'remove':\r\n                mini.confirm('确定移除此图片？', '删除提醒', function (action) {\r\n                    if (action == 'ok') {\r\n                        that.removeImage(event.file);\r\n                    }\r\n                });\r\n                break;\r\n            case 'reselect':\r\n                this.reselectImage(event.file);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n    /**\r\n     * 根据文件id获取文件对象\r\n     * @param {string} id 文件id\r\n     */\r\n    _getFileData: function (id) {\r\n        var fileItem = null;\r\n        for (var i = 0, len = this.data.length; i < len; i++) {\r\n            var item = this.data[i];\r\n            if (item.id === id) {\r\n                fileItem = item;\r\n                break;\r\n            }\r\n        }\r\n        return fileItem;\r\n    },\r\n    _removeFileData: function (id) {\r\n        var removed = false;\r\n        for (var i = 0, len = this.data.length; i < len; i++) {\r\n            var item = this.data[i];\r\n            if (item.id === id) {\r\n                this.data.splice(i, 1);\r\n                removed = true;\r\n                break;\r\n            }\r\n        }\r\n        return removed;\r\n    },\r\n    /**\r\n     * 移除某个图片\r\n     * @param {string | object} file 文件id 或文件数据对象\r\n     */\r\n    removeImage: function (file) {\r\n        var id = typeof file !== 'string' ? file.id : file;\r\n        var removed = this._removeFileData(id);\r\n        if (removed && this.serverFiles[id]) {\r\n            delete this.serverFiles[id];\r\n            this.serverFileNum--;\r\n        }\r\n\r\n        jQuery(this.el)\r\n            .find('.mini-imageuploader-item[file-id=\"' + id + '\"]')\r\n            .remove();\r\n        if (removed) {\r\n            this._updateAddBtnState();\r\n        }\r\n        return removed;\r\n    },\r\n    /**\r\n     * 重新选择一张图片上传\r\n     * @param {string | WrappedFile} file 要替换吧的文件对象\r\n     */\r\n    reselectImage: function (file) {\r\n        var id = typeof file !== 'string' ? file.id : file;\r\n        var me = this;\r\n        var fileItem = this._getFileData(id);\r\n        var $fileEl = jQuery(this.el).find('.mini-imageuploader-item[file-id=\"' + id + '\"]');\r\n\r\n        // 替换文件只能单选\r\n        this._fileInput.removeAttribute('multiple');\r\n\r\n        function handleReselect(e) {\r\n            // 组织正常逻辑 此处自行完成\r\n            e.cancel = true;\r\n            // 还原正常的状态\r\n            me.setMultiple(me.multiple);\r\n            me.un('selectFile', handleReselect, this);\r\n\r\n            //\r\n            var files = e.files;\r\n            if (!files.length) return;\r\n            if (files.length > 1) {\r\n                return mini.alert('你选择的图片文件过多，只能选择一个');\r\n            }\r\n            var file = e.files[0];\r\n            if (me.fileSizeLimit && file.size > me.fileSizeLimit * 1024) {\r\n                return mini.alert('选中的图片文件过大，最大允许上传' + this.fileSizeLimit + 'KB的图片');\r\n            }\r\n            me._validateWidthHeight(file).then(function (wrappedFile) {\r\n                var e = {\r\n                    sender: me,\r\n                    source: me,\r\n                    cancel: false,\r\n                    type: 'beforefilequeued',\r\n                    file: wrappedFile\r\n                };\r\n                me.fire('beforefilequeued', e);\r\n\r\n                if (e.cancel) {\r\n                    return;\r\n                }\r\n                wrappedFile.fromServer = false;\r\n                wrappedFile.state = me.STATE_TEXT.PEDDING;\r\n\r\n                // 加入新文件\r\n                me.data.push(wrappedFile);\r\n                // 删除旧文件\r\n                me._removeFileData(id);\r\n                // 开始上传\r\n                var itemEl = me._genderImgEl(wrappedFile, $fileEl[0]);\r\n                me._doUpload(wrappedFile, itemEl);\r\n            });\r\n        }\r\n\r\n        this.on('selectFile', handleReselect, this);\r\n\r\n        var label = document.createElement('label');\r\n        label.setAttribute('for', this._fileInput.id);\r\n        // label.style.cssText = '';\r\n        document.body.appendChild(label);\r\n        label.click();\r\n        document.body.removeChild(label);\r\n    },\r\n    __onAddBtnClick: function (e) {\r\n        if (!this.multi) {\r\n            // 单个的时候检查当前是否已经有文件\r\n            if (\r\n                (this._fileInput.files && this._fileInput.files.length) ||\r\n                (this.data && this.data.length) ||\r\n                $(this._listEl).find('.mini-imageuploader-item').length\r\n            ) {\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n        } else {\r\n            // todo 多选的是否还可以再选\r\n        }\r\n    },\r\n    _createInput: function () {\r\n        this._fileInput = document.createElement('input');\r\n        this._fileInput.style.cssText = 'display:none';\r\n        this._fileInput.setAttribute('type', 'file');\r\n        this._fileInput.setAttribute('accept', this.accept);\r\n        if (this.multiple) {\r\n            this._fileInput.setAttribute('multiple', '');\r\n        } else {\r\n            this._fileInput.removeAttribute('multiple');\r\n        }\r\n\r\n        this._fileInput.id = this.id + '$file';\r\n\r\n        var me = this;\r\n\r\n        function change(e) {\r\n            var event = e.originalEvent;\r\n            var files = this.files;\r\n            var e = {\r\n                files: files,\r\n                cancel: false\r\n            };\r\n            me.fire('selectFile', e);\r\n            if (!e.cancel) {\r\n                me.fire('change', e);\r\n            }\r\n\r\n            var clone = event.target.cloneNode(true);\r\n            clone.value = null;\r\n            this.parentNode.replaceChild(clone, this);\r\n            jQuery(me._fileInput).off();\r\n\r\n            me._fileInput = clone;\r\n            jQuery(me._fileInput).on('change', change);\r\n        }\r\n        jQuery(this._fileInput).on('change', change);\r\n    },\r\n    _getFileWrapper: function (file) {\r\n        return {\r\n            id: this._fileIdPrefix + ++this._fileIndex,\r\n            name: file.name,\r\n            size: file.size,\r\n            type: file.type,\r\n            ext: file.name.substr(file.name.lastIndexOf('.') + 1),\r\n            file: file\r\n        };\r\n    },\r\n    /**\r\n     * 验证图片文件的尺寸\r\n     * @returns {jQuery.Deferred}\r\n     */\r\n    _validateWidthHeight: function (file) {\r\n        var wrappedFile = this._getFileWrapper(file);\r\n        var dtd = jQuery.Deferred();\r\n        // 无需验证的情况直接给\r\n        if (!(this.limitWidth && this.limitHeight)) {\r\n            dtd.resolve(wrappedFile);\r\n            return dtd.promise();\r\n        }\r\n        var that = this;\r\n        var image = new Image();\r\n        var url = URL.createObjectURL(wrappedFile.file);\r\n        image.onload = function () {\r\n            image.onload = null;\r\n            image.onerror = null;\r\n            URL.revokeObjectURL(url);\r\n            wrappedFile.width = image.width;\r\n            wrappedFile.height = image.height;\r\n            var e = {\r\n                sender: that,\r\n                source: that,\r\n                isValid: image.width === that.limitWidth && image.height === that.limitHeight,\r\n                width: image.width,\r\n                height: image.height\r\n            };\r\n\r\n            e.errorText = e.isValid\r\n                ? ''\r\n                : '图片宽高校验失败，只允许上传' + that.limitWidth + 'px *' + that.limitHeight + 'px的图片';\r\n\r\n            that.fire('limitValidation', e);\r\n\r\n            if (e.isValid) {\r\n                dtd.resolve(wrappedFile);\r\n            } else {\r\n                mini.showTips({\r\n                    content: e.errorText,\r\n                    state: 'danger'\r\n                });\r\n                dtd.reject(wrappedFile);\r\n            }\r\n        };\r\n        image.onerror = function (err) {\r\n            image.onload = null;\r\n            image.onerror = null;\r\n            URL.revokeObjectURL(url);\r\n            // wrappedFile.width = NaN;\r\n            // wrappedFile.height = NaN;\r\n            dtd.reject(err);\r\n            console.log(err);\r\n        };\r\n        image.src = url;\r\n\r\n        return dtd.promise();\r\n    },\r\n\r\n    __onFileChange: function (e) {\r\n        var files = e.files;\r\n        console.log(files);\r\n        if (!files.length) {\r\n            return;\r\n        }\r\n\r\n        // 先检查数目 数目超出 直接结束\r\n        if (files.length + this.data.length > this.fileNumLimit) {\r\n            mini.showTips({\r\n                content: '您选择的文件过多，最多还能选择 ' + (this.fileNumLimit - this.data.length) + ' 个图片',\r\n                state: 'danger'\r\n            });\r\n            return;\r\n        }\r\n        this.__doFilesAdd(files);\r\n\r\n        // var me = this;\r\n        // var q1 = jQuery.queue(document.createElement('div'), this._, ['a', 'b', 'c']);\r\n        // var i = 0;\r\n        // function next() {\r\n        //     console.log(i);\r\n        //     if (i < files.length) {\r\n        //         var file = files[i++];\r\n        //         return me.__fileQueue(file).then(next);\r\n        //     }\r\n        // }\r\n\r\n        // next();\r\n    },\r\n\r\n    // 处理选中文件 准备加入上传队列的情况\r\n    __doFilesAdd: function (files) {\r\n        this._filesQueue = [];\r\n        var me = this;\r\n\r\n        if (!this._validateImageSize(files)) {\r\n            return;\r\n        }\r\n\r\n        var i = 0;\r\n        function next() {\r\n            if (i < files.length) {\r\n                var file = files[i++];\r\n                return me.__fileQueue(file).then(next);\r\n            }\r\n        }\r\n\r\n        next().then(function () {\r\n            // 全部选择的图片入队完成\r\n            var e = {\r\n                sender: me,\r\n                source: me,\r\n                type: 'filesqueued',\r\n                files: me._filesQueue\r\n            };\r\n            me.fire('filesqueued', e);\r\n            // 根据数目调整 add 按钮的可用性\r\n            me._updateAddBtnState();\r\n            // 开始上传\r\n            me.__doFilesUpload();\r\n        });\r\n    },\r\n\r\n    _validateImageSize: function (files) {\r\n        // 文件大小的验证\r\n        if (this.fileSizeLimit) {\r\n            var limit = this.fileSizeLimit * 1024;\r\n            for (var j = 0, len = files.length; j < len; j++) {\r\n                if (files[j].size > limit) {\r\n                    mini.alert('选中的图片文件过大，最大允许上传' + this.fileSizeLimit + 'KB的图片');\r\n\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * 单个文件的入队逻辑\r\n     * @param {File} file 原生 file 对象\r\n     * @returns {jQuery.Deferred<undefined>}\r\n     */\r\n    __fileQueue: function (file) {\r\n        var dtd = $.Deferred();\r\n        var that = this;\r\n        this._validateWidthHeight(file).then(\r\n            function (wrappedFile) {\r\n                // 尺寸验证成功加入队列\r\n                console.log('beforefilequeued');\r\n                var e = {\r\n                    sender: that,\r\n                    source: that,\r\n                    cancel: false,\r\n                    type: 'beforefilequeued',\r\n                    file: wrappedFile\r\n                };\r\n                that.fire('beforefilequeued', e);\r\n\r\n                if (e.cancel) {\r\n                    return dtd.resolve();\r\n                }\r\n                wrappedFile.fromServer = false;\r\n                wrappedFile.state = that.STATE_TEXT.PEDDING;\r\n                that._filesQueue.push(wrappedFile);\r\n                that.data.push(wrappedFile);\r\n\r\n                dtd.resolve();\r\n            },\r\n            function () {\r\n                // 尺寸验证失败\r\n                dtd.resolve();\r\n            }\r\n        );\r\n        return dtd.promise();\r\n    },\r\n\r\n    _updateAddBtnState: function () {\r\n        if (!this.multiple) {\r\n            // 单选\r\n            if (\r\n                (this._fileInput.files && this._fileInput.files.length) ||\r\n                (this.data && this.data.length) ||\r\n                $(this._listEl).find('.mini-imageuploader-item').length\r\n            ) {\r\n                this._$addBtn.hide();\r\n            }\r\n        } else {\r\n            // 多选\r\n            if (this.data.length >= this.fileNumLimit) {\r\n                this._$addBtn.hide();\r\n            } else {\r\n                this._$addBtn.show();\r\n            }\r\n        }\r\n    },\r\n\r\n    __doFilesUpload: function () {\r\n        // TODO: 上传还需要一个队列 控制并发上传的数目\r\n        for (var i = 0, len = this._filesQueue.length; i < len; i++) {\r\n            var fileData = this._filesQueue[i];\r\n            this._doUpload(fileData, this._genderImgEl(fileData));\r\n        }\r\n    },\r\n    _genderItemEl: function (fileData) {\r\n        var div = document.createElement('div');\r\n        div.className = 'mini-imageuploader-item';\r\n        jQuery(div).css({\r\n            width: this.imageWidth ? this.imageWidth : 'auto',\r\n            height: this.imageHeight ? this.imageHeight : 'auto'\r\n        });\r\n        // div.innerHTML =\r\n        //     '<div class=\"mini-imageuploader-progress\"><div class=\"mini-imageuploader-progress-current\"></div></div>';\r\n\r\n        div.innerHTML = '<div class=\"mini-imageuploader-btns\">' + this._actionBtnHtml + '</div>';\r\n\r\n        div.setAttribute('file-id', fileData.id);\r\n        if (fileData.fileGuid) {\r\n            div.setAttribute('file-guid', fileData.fileGuid);\r\n        }\r\n        if (fileData.downloadUrl) {\r\n            var img = document.createElement('img');\r\n            img.className = 'mini-imageuploader-img';\r\n            img.src = this._dealUrl(fileData.downloadUrl);\r\n            div.insertAdjacentElement('afterbegin', img);\r\n        }\r\n        return div;\r\n    },\r\n    /**\r\n     * 生成图片预览 dom\r\n     * @param {WrappedFile} fileData 封装过的file对象\r\n     * @param {HTMLElement | undefined} replaceEl 旧的图片dom\r\n     * @returns {HTMLElement}\r\n     */\r\n    _genderImgEl: function (fileData, replaceEl) {\r\n        var file = fileData.file;\r\n        // var div = document.createElement('div');\r\n        // div.setAttribute('file-name', file.name);\r\n        // div.setAttribute('file-id', fileData.id);\r\n        // div.className = 'mini-imageuploader-item';\r\n        // div.innerHTML =\r\n        //     '<div class=\"mini-imageuploader-progress\"><div class=\"mini-imageuploader-progress-current\"></div></div>';\r\n\r\n        var div = this._genderItemEl(fileData);\r\n        var img = document.createElement('img');\r\n        img.className = 'mini-imageuploader-img';\r\n        var url = URL.createObjectURL(file);\r\n        img.onload = function () {\r\n            img.onload = null;\r\n            URL.revokeObjectURL(url);\r\n        };\r\n        img.src = url;\r\n        div.insertAdjacentElement('afterbegin', img);\r\n        if (replaceEl) {\r\n            jQuery(replaceEl).replaceWith(div);\r\n        } else {\r\n            jQuery(div).insertBefore(this._$addBtn);\r\n        }\r\n        return div;\r\n    },\r\n\r\n    _doUpload: function (fileData, el) {\r\n        var file = fileData.file;\r\n        // return;\r\n        // var c = document.createElement('canvas');\r\n        // c.width = 100;\r\n        // c.height = 100;\r\n        // var ctx = c.getContext('2d');\r\n        // var img = document.createElement('img');\r\n        // img.src = URL.createObjectURL(file);\r\n        // ctx.drawImage(img, 0, 0, 100, 100);\r\n        // c.toBlob(function (file) {});\r\n\r\n        var me = this;\r\n\r\n        var img = jQuery(el).find('.mini-imageuploader-img')[0];\r\n\r\n        var formData = new FormData();\r\n        formData.append('file', file);\r\n\r\n        this.fire('beforeUpload', {\r\n            sender: this,\r\n            source: this,\r\n            formData: formData\r\n        });\r\n        jQuery\r\n            .ajax({\r\n                method: 'post',\r\n                url: this.uploadUrl,\r\n                // contentType: 'multipart/form-data',\r\n                contentType: false,\r\n                processData: false,\r\n                dataType: 'json',\r\n                data: formData,\r\n                xhr: function () {\r\n                    var xhr = new XMLHttpRequest();\r\n                    xhr.upload.onloadstart = function () {\r\n                        fileData.state = me.STATE_TEXT.UPLOADING;\r\n                    };\r\n\r\n                    xhr.upload.onprogress = function (e) {\r\n                        // console.log(e);\r\n                        var progress = e.loaded / e.total;\r\n                        if (progress >= 1) progress == 1;\r\n                        var percent = (progress * 100).toFixed(2) + '%';\r\n\r\n                        console.log(progress, percent);\r\n\r\n                        fileData.progress = progress;\r\n\r\n                        me.fire('uploadprogress', {\r\n                            progress: progress,\r\n                            percent: percent,\r\n                            file: fileData,\r\n                            fileEl: el\r\n                        });\r\n                    };\r\n                    // xhr.onreadystatechange = function () {\r\n                    //     if (xhr.readyState !== 4) {\r\n                    //         return;\r\n                    //     }\r\n\r\n                    //     xhr.upload.onprogress = null;\r\n                    //     xhr.onreadystatechange = null;\r\n\r\n                    //     if (xhr.status >= 200 && xhr.status < 300) {\r\n                    //         // me._response = xhr.responseText;\r\n                    //         // return me.trigger('load');\r\n                    //     } else if (xhr.status >= 500 && xhr.status < 600) {\r\n                    //         // me._response = xhr.responseText;\r\n                    //         // return me.trigger('error', 'server');\r\n                    //     }\r\n\r\n                    //     // return me.trigger('error', me._status ? 'http' : 'abort');\r\n                    // };\r\n                    return xhr;\r\n                }\r\n            })\r\n            .done(function (res) {\r\n                console.log(res);\r\n                URL.revokeObjectURL(img.src);\r\n                img.src = res.downloadUrl;\r\n\r\n                // 成功时 进度确保到了 100% 若没有则再派发一次\r\n                if (fileData.progress < 1) {\r\n                    fileData.progress = 1;\r\n                    me.fire('uploadprogress', {\r\n                        progress: 1,\r\n                        percent: '100%',\r\n                        file: fileData,\r\n                        fileEl: el\r\n                    });\r\n                }\r\n                fileData.state = me.STATE_TEXT.DONE;\r\n                me.fire('uploaderror', {\r\n                    type: 'uploaderror',\r\n                    sender: me,\r\n                    source: me,\r\n                    file: fileData,\r\n                    fileEl: el\r\n                });\r\n            })\r\n            .fail(function (err) {\r\n                console.error(err);\r\n\r\n                fileData.state = me.STATE_TEXT.FAIL;\r\n                me.fire('uploaderror', {\r\n                    type: 'uploaderror',\r\n                    sender: me,\r\n                    source: me,\r\n                    file: fileData,\r\n                    fileEl: el\r\n                });\r\n            });\r\n    },\r\n    getData: function () {\r\n        return this.data || [];\r\n    },\r\n\r\n    setData: function (data) {\r\n        if (!jQuery.isArray(data)) {\r\n            return false;\r\n        }\r\n        var arr = $.map(data, function (item) {\r\n            return {\r\n                fromServer: true,\r\n                id: item.attachGuid,\r\n                state: 'success',\r\n                size: item.attachLength,\r\n                width: item.width,\r\n                height: item.height,\r\n                date: item.uploadDateTime,\r\n                fileGuid: item.attachGuid,\r\n                downloadUrl: item.downloadUrl\r\n            };\r\n        });\r\n        var files = (this.data = arr);\r\n        this.serverFileNum = this.data.length;\r\n        this._updateAddBtnState();\r\n\r\n        // 处理服务端返回的文件\r\n        var fileItem,\r\n            html = document.createDocumentFragment();\r\n        this.serverFiles = {};\r\n        for (var i = 0, len = files.length; i < len; i++) {\r\n            //  加入服务端文件列表\r\n            fileItem = files[i];\r\n            this.serverFiles[fileItem.fileGuid] = fileItem;\r\n            html.appendChild(this._genderItemEl(fileItem));\r\n        }\r\n        // this._$addBtn.remove();\r\n        this._$addBtn.parent().empty();\r\n        this._listEl.appendChild(html);\r\n        this._listEl.appendChild(this._$addBtn[0]);\r\n\r\n        this.fire('load', {\r\n            sender: this,\r\n            eventType: 'load',\r\n            data: data\r\n        });\r\n    },\r\n\r\n    getMultiple: function () {\r\n        return this.multiple;\r\n    },\r\n    setMultiple: function (v) {\r\n        this.multiple = v === true ? true : false;\r\n        if (this.multiple) {\r\n            this._fileInput.setAttribute('multiple', '');\r\n        } else {\r\n            this._fileInput.removeAttribute('multiple');\r\n        }\r\n    },\r\n\r\n    getFileNumLimit: function () {\r\n        return this.fileNumLimit;\r\n    },\r\n    setFileNumLimit: function (v) {\r\n        if (jQuery.isNumeric(v)) {\r\n            this.fileNumLimit = v;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n    getFileSizeLimit: function () {\r\n        return this.fileSizeLimit;\r\n    },\r\n    setFileSizeLimit: function (v) {\r\n        if (jQuery.isNumeric(v)) {\r\n            this.fileSizeLimit = v;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n    getImageWidth: function () {\r\n        return this.imageWidth;\r\n    },\r\n    setImageWidth: function (v) {\r\n        if (jQuery.isNumeric(v)) {\r\n            this.imageWidth = v;\r\n            this._$addBtn.css({\r\n                width: this.imageWidth\r\n            });\r\n            jQuery(this.el).find('.mini-imageuploader-item').css({\r\n                width: this.imageWidth\r\n            });\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n    getImageHeight: function () {\r\n        return this.imageHeight;\r\n    },\r\n    setImageHeight: function (v) {\r\n        if (jQuery.isNumeric(v)) {\r\n            this.imageHeight = v;\r\n            this._$addBtn.css({\r\n                height: this.imageHeight,\r\n                lineHeight: this.imageHeight + 'px'\r\n            });\r\n            jQuery(this.el).find('.mini-imageuploader-item').css({\r\n                height: this.imageHeight\r\n            });\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n\r\n    getAttrs: function (el) {\r\n        var attrs = mini.ImageUploader.superclass.getAttrs.call(this, el);\r\n        console.log('getAttrs');\r\n\r\n        var $cs = jQuery(el).children('[type=\"button\"]');\r\n        var buttons = [];\r\n        $.each($cs, function (i, item) {\r\n            if (item.getAttribute('type') == 'button') {\r\n                buttons.push({\r\n                    icon: item.getAttribute('icon'),\r\n                    name: item.getAttribute('title') || item.innerText,\r\n                    role: item.getAttribute('role'),\r\n                    handle: item.getAttribute('onclick')\r\n                });\r\n            }\r\n        });\r\n        if (buttons.length) {\r\n            attrs.actionButtons = buttons;\r\n        } else {\r\n            this.setActionButtons(this.actionButtons);\r\n        }\r\n\r\n        mini._ParseInt(el, attrs, [\r\n            'imageWidth',\r\n            'imageHeight',\r\n            'limitWidth',\r\n            'limitHeight',\r\n            'fileNumLimit',\r\n            'fileSizeLimit',\r\n            'maxBtnNum'\r\n        ]);\r\n\r\n        mini._ParseBool(el, attrs, ['multiple']);\r\n\r\n        mini._ParseString(el, attrs, [\r\n            'accept',\r\n            'uploadUrl',\r\n\r\n            'onLimitValidation',\r\n            'onbeforefilequeued',\r\n            'onFilesQueued',\r\n            'onbeforeUpload',\r\n            'onuploadprogress',\r\n            'onuploadprogress',\r\n            'onuploaderror'\r\n        ]);\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.ImageUploader, 'imageuploader');\r\n\r\n// var q1 = jQuery.queue(document.createElement('div'), 'fileQueue', ['a', 'b', 'c']);\r\n\n! function(factory) {\r\n    \"function\" == typeof define && define.amd ? define([\"jquery\"], factory) : factory(\"object\" == typeof exports ? require(\"jquery\") : jQuery);\r\n}(function($) {\r\n    var caretTimeoutId, ua = navigator.userAgent,\r\n        iPhone = /iphone/i.test(ua),\r\n        chrome = /chrome/i.test(ua),\r\n        android = /android/i.test(ua);\r\n    $.mask = {\r\n        definitions: {\r\n            \"9\": \"[0-9]\",\r\n            a: \"[A-Za-z]\",\r\n            \"*\": \"[A-Za-z0-9]\"\r\n        },\r\n        autoclear: !0,\r\n        dataName: \"rawMaskFn\",\r\n        placeholder: \"_\"\r\n    }, $.fn.extend({\r\n        caret: function(begin, end) {\r\n            var range;\r\n            if (0 !== this.length && !this.is(\":hidden\")) return \"number\" == typeof begin ? (end = \"number\" == typeof end ? end : begin,\r\n                this.each(function() {\r\n                    this.setSelectionRange ? this.setSelectionRange(begin, end) : this.createTextRange && (range = this.createTextRange(),\r\n                        range.collapse(!0), range.moveEnd(\"character\", end), range.moveStart(\"character\", begin),\r\n                        range.select());\r\n                })) : (this[0].setSelectionRange ? (begin = this[0].selectionStart, end = this[0].selectionEnd) : document.selection && document.selection.createRange && (range = document.selection.createRange(),\r\n                begin = 0 - range.duplicate().moveStart(\"character\", -1e5), end = begin + range.text.length), {\r\n                begin: begin,\r\n                end: end\r\n            });\r\n        },\r\n        unmask: function() {\r\n            return this.trigger(\"unmask\");\r\n        },\r\n        mask: function(mask, settings) {\r\n            var input, defs, tests, partialPosition, firstNonMaskPos, lastRequiredNonMaskPos, len, oldVal;\r\n            if (!mask && this.length > 0) {\r\n                input = $(this[0]);\r\n                var fn = input.data($.mask.dataName);\r\n                return fn ? fn() : void 0;\r\n            }\r\n            return settings = $.extend({\r\n                    autoclear: $.mask.autoclear,\r\n                    placeholder: $.mask.placeholder,\r\n                    completed: null\r\n                }, settings), defs = $.mask.definitions, tests = [], partialPosition = len = mask.length,\r\n                firstNonMaskPos = null, $.each(mask.split(\"\"), function(i, c) {\r\n                    \"?\" == c ? (len--, partialPosition = i) : defs[c] ? (tests.push(new RegExp(defs[c])),\r\n                        null === firstNonMaskPos && (firstNonMaskPos = tests.length - 1), partialPosition > i && (lastRequiredNonMaskPos = tests.length - 1)) : tests.push(null);\r\n                }), this.trigger(\"unmask\").each(function() {\r\n                    function tryFireCompleted() {\r\n                        if (settings.completed) {\r\n                            for (var i = firstNonMaskPos; lastRequiredNonMaskPos >= i; i++)\r\n                                if (tests[i] && buffer[i] === getPlaceholder(i)) return;\r\n                            settings.completed.call(input);\r\n                        }\r\n                    }\r\n\r\n                    function getPlaceholder(i) {\r\n                        return settings.placeholder.charAt(i < settings.placeholder.length ? i : 0);\r\n                    }\r\n\r\n                    function seekNext(pos) {\r\n                        for (; ++pos < len && !tests[pos];);\r\n                        return pos;\r\n                    }\r\n\r\n                    function seekPrev(pos) {\r\n                        for (; --pos >= 0 && !tests[pos];);\r\n                        return pos;\r\n                    }\r\n\r\n                    function shiftL(begin, end) {\r\n                        var i, j;\r\n                        if (!(0 > begin)) {\r\n                            for (i = begin, j = seekNext(end); len > i; i++)\r\n                                if (tests[i]) {\r\n                                    if (!(len > j && tests[i].test(buffer[j]))) break;\r\n                                    buffer[i] = buffer[j], buffer[j] = getPlaceholder(j), j = seekNext(j);\r\n                                }\r\n                            writeBuffer(), input.caret(Math.max(firstNonMaskPos, begin));\r\n                        }\r\n                    }\r\n\r\n                    function shiftR(pos) {\r\n                        var i, c, j, t;\r\n                        for (i = pos, c = getPlaceholder(pos); len > i; i++)\r\n                            if (tests[i]) {\r\n                                if (j = seekNext(i), t = buffer[i], buffer[i] = c, !(len > j && tests[j].test(t))) break;\r\n                                c = t;\r\n                            }\r\n                    }\r\n\r\n                    function androidInputEvent() {\r\n                        var curVal = input.val(),\r\n                            pos = input.caret();\r\n                        if (curVal.length < oldVal.length) {\r\n                            for (checkVal(!0); pos.begin > 0 && !tests[pos.begin - 1];) pos.begin--;\r\n                            if (0 === pos.begin)\r\n                                for (; pos.begin < firstNonMaskPos && !tests[pos.begin];) pos.begin++;\r\n                            input.caret(pos.begin, pos.begin);\r\n                        } else {\r\n                            for (checkVal(!0); pos.begin < len && !tests[pos.begin];) pos.begin++;\r\n                            input.caret(pos.begin, pos.begin);\r\n                        }\r\n                        tryFireCompleted();\r\n                    }\r\n\r\n                    function blurEvent() {\r\n                        checkVal(), input.val() != focusText && input.change();\r\n                    }\r\n\r\n                    function keydownEvent(e) {\r\n                        if (!input.prop(\"readonly\")) {\r\n                            var pos, begin, end, k = e.which || e.keyCode;\r\n                            oldVal = input.val(), 8 === k || 46 === k || iPhone && 127 === k ? (pos = input.caret(),\r\n                                begin = pos.begin, end = pos.end, end - begin === 0 && (begin = 46 !== k ? seekPrev(begin) : end = seekNext(begin - 1),\r\n                                    end = 46 === k ? seekNext(end) : end), clearBuffer(begin, end), shiftL(begin, end - 1),\r\n                                e.preventDefault()) : 13 === k ? blurEvent.call(this, e) : 27 === k && (input.val(focusText),\r\n                                input.caret(0, checkVal()), e.preventDefault());\r\n                        }\r\n                    }\r\n\r\n                    function keypressEvent(e) {\r\n                        if (!input.prop(\"readonly\")) {\r\n                            var p, c, next, k = e.which || e.keyCode,\r\n                                pos = input.caret();\r\n                            if (!(e.ctrlKey || e.altKey || e.metaKey || 32 > k) && k && 13 !== k) {\r\n                                if (pos.end - pos.begin !== 0 && (clearBuffer(pos.begin, pos.end), shiftL(pos.begin, pos.end - 1)),\r\n                                    p = seekNext(pos.begin - 1), len > p && (c = String.fromCharCode(k), tests[p].test(c))) {\r\n                                    if (shiftR(p), buffer[p] = c, writeBuffer(), next = seekNext(p), android) {\r\n                                        var proxy = function() {\r\n                                            $.proxy($.fn.caret, input, next)();\r\n                                        };\r\n                                        setTimeout(proxy, 0);\r\n                                    } else input.caret(next);\r\n                                    pos.begin <= lastRequiredNonMaskPos && tryFireCompleted();\r\n                                }\r\n                                e.preventDefault();\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    function clearBuffer(start, end) {\r\n                        var i;\r\n                        for (i = start; end > i && len > i; i++) tests[i] && (buffer[i] = getPlaceholder(i));\r\n                    }\r\n\r\n                    function writeBuffer() {\r\n                        input.val(buffer.join(\"\"));\r\n                    }\r\n\r\n                    function checkVal(allow) {\r\n                        var i, c, pos, test = input.val(),\r\n                            lastMatch = -1;\r\n                        for (i = 0, pos = 0; len > i; i++)\r\n                            if (tests[i]) {\r\n                                for (buffer[i] = getPlaceholder(i); pos++ < test.length;)\r\n                                    if (c = test.charAt(pos - 1),\r\n                                        tests[i].test(c)) {\r\n                                        buffer[i] = c, lastMatch = i;\r\n                                        break;\r\n                                    }\r\n                                if (pos > test.length) {\r\n                                    clearBuffer(i + 1, len);\r\n                                    break;\r\n                                }\r\n                            } else buffer[i] === test.charAt(pos) && pos++, partialPosition > i && (lastMatch = i);\r\n                        return allow ? writeBuffer() : partialPosition > lastMatch + 1 ? settings.autoclear || buffer.join(\"\") === defaultBuffer ? (input.val() && input.val(\"\"),\r\n                                clearBuffer(0, len)) : writeBuffer() : (writeBuffer(), input.val(input.val().substring(0, lastMatch + 1))),\r\n                            partialPosition ? i : firstNonMaskPos;\r\n                    }\r\n                    var input = $(this),\r\n                        buffer = $.map(mask.split(\"\"), function(c, i) {\r\n                            return \"?\" != c ? defs[c] ? getPlaceholder(i) : c : void 0;\r\n                        }),\r\n                        defaultBuffer = buffer.join(\"\"),\r\n                        focusText = input.val();\r\n                    input.data($.mask.dataName, function() {\r\n                            return $.map(buffer, function(c, i) {\r\n                                return tests[i] && c != getPlaceholder(i) ? c : null;\r\n                            }).join(\"\");\r\n                        }), input.one(\"unmask\", function() {\r\n                            input.off(\".mask\").removeData($.mask.dataName);\r\n                        }).on(\"focus.mask\", function() {\r\n                            if (!input.prop(\"readonly\")) {\r\n                                clearTimeout(caretTimeoutId);\r\n                                var pos;\r\n                                focusText = input.val(), pos = checkVal(), caretTimeoutId = setTimeout(function() {\r\n                                    writeBuffer(), pos == mask.replace(\"?\", \"\").length ? input.caret(0, pos) : input.caret(pos);\r\n                                }, 10);\r\n                            }\r\n                        }).on(\"blur.mask\", blurEvent).on(\"keydown.mask\", keydownEvent).on(\"keypress.mask\", keypressEvent).on(\"input.mask paste.mask\", function() {\r\n                            input.prop(\"readonly\") || setTimeout(function() {\r\n                                var pos = checkVal(!0);\r\n                                input.caret(pos), tryFireCompleted();\r\n                            }, 0);\r\n                        }), chrome && android && input.off(\"input.mask\").on(\"input.mask\", androidInputEvent),\r\n                        checkVal();\r\n                });\r\n        }\r\n    });\r\n});\r\nmini.InputMask = function() {\r\n\r\n    mini.InputMask.superclass.constructor.call(this);\r\n\r\n};\r\n\r\nmini.extend(mini.InputMask, mini.TextBox, {\r\n    uiCls: 'mini-inputmask',\r\n    mask: '',\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        // var placeholder = kv.placeholder;\r\n        // delete kv.placeholder;\r\n\r\n        var mask = kv.mask;\r\n        delete kv.mask;\r\n\r\n        // var autoclear = kv.autoclear;\r\n        // delete kv.autoclear;\r\n\r\n        mini.InputMask.superclass.set.call(this, kv);\r\n\r\n        if (mask) {\r\n            this.setMask(mask);\r\n        }\r\n\r\n\r\n        return this;\r\n    },\r\n\r\n    setMask: function(mask) {\r\n        this.mask = mask;\r\n\r\n        jQuery(this._textEl).mask(mask);\r\n    },\r\n\r\n    getMask: function() {\r\n        return this.mask;\r\n    },\r\n\r\n    getAttrs: function(el) {\r\n        var attrs = mini.InputMask.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs, [\"mask\"]);\r\n\r\n        return attrs;\r\n    }\r\n\r\n});\r\n\r\nmini.regClass(mini.InputMask, 'inputmask');\nmini.LargeFileUploader = function() {\r\n    mini.LargeFileUploader.superclass.constructor.call(this);\r\n};\r\nmini.extend(mini.LargeFileUploader, mini.Control, {\r\n    uiCls: \"mini-largefileuploader\",\r\n    uploadUrl: \"\",\r\n    // 允许的文件后缀，不带点，多个用逗号分割\r\n    limitType: \"\",\r\n    fileNumLimit: 1,\r\n    fileSizeLimit: 0,\r\n    fileSingleSizeLimit: 0,\r\n    // 是否多选，根fileNumLimit的值相关联\r\n    multiSelect: false,\r\n\r\n    auto: true,\r\n\r\n    // 第三方资源的路径，默认为全局配置mini.externalSrc的值\r\n    externalSrc: '',\r\n    pickerText: '选择文件',\r\n    startText: '开始上传',\r\n    pauseText: '暂停上传',\r\n    numLimitErrorText: '选择的文件过多！</br>最多可上传{0}个文件',\r\n    sizeLimitErrorText: '选择的文件过大！</br>最多可上传{0}KB文件',\r\n    typeDeniedErrorText: '选择的文件类型错误！</br>可上传的文件类型为：{0}',\r\n    sizeErrorText: '选择的文件过大！</br>可上传的单文件最大为{0}KB',\r\n    emptyFileErrorText: '不能上传空文件！',\r\n\r\n    set: function(kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var pickerText = kv.pickerText;\r\n        delete kv.pickerText;\r\n\r\n        // 9.3 服务化后需要该属性来控制附件是否落地\r\n        // 该属性需要在每次请求中都传递回后端\r\n        // 由于获取文件状态和上传完成这两个请求无法加额外参数，只能把它加到url上\r\n        var needChunkLocal = kv.needChunkLocal;\r\n        delete kv.needChunkLocal;\r\n\r\n        // 必须先设置needChunkLocal\r\n        // 因为之后框架的action以及uploadUrl都是依赖needChunkLocal\r\n        if (needChunkLocal) {\r\n            this.needChunkLocal = needChunkLocal;\r\n        }\r\n\r\n        mini.LargeFileUploader.superclass.set.call(this, kv);\r\n\r\n        if (pickerText) {\r\n            this._picker.innerHTML = pickerText;\r\n        }\r\n        return this;\r\n    },\r\n    _create: function() {\r\n        this.el = document.createElement(\"div\");\r\n        this.el.innerHTML = '<div class=\"mini-uploader-btns\"><div class=\"mini-ntko-pick\">' + this.pickerText + '</div></div><div class=\"mini-uploader-list\"></div><div class=\"mini-ntko\"></div>';\r\n\r\n        this._buttons = this.el.firstChild;\r\n        this._fileList = this.el.children[1];\r\n        this._ntkoContent = this.el.lastChild;\r\n\r\n        this._picker = this._buttons.firstChild;\r\n\r\n        this._uploadBtn = new mini.Button();\r\n        this._uploadBtn.setText(this.startText);\r\n        this._uploadBtn.render(this._buttons);\r\n\r\n        this._ntkoContent.innerHTML = '<object id=\"' + this.uid + '-ntko\" classid=\"clsid:882C96AC-B79E-4f50-A7A6-6E5E42431A05\" codebase=\"' + (this.externalSrc || mini.externalSrc) + 'ntkoLFUploader/NtkoLFUploader.cab#version=6,1,1,8\"><PARAM NAME=\"BackColor\" VALUE=\"16744576\"><PARAM NAME=\"ForeColor\" VALUE=\"16777215\"><PARAM NAME=\"IsUseUTF8Data\" VALUE=\"true\"><param name=\"ProductCaption\" value=\"' + (window.NTKO_ProductCaption || '国泰新点用户') + '\"><param name=\"ProductKey\" value=\"' + (window.NTKO_ProductKey || '3CF3019EA6883730AB34F0D5A8FACDB1CDB2A9EA') + '\"><PARAM NAME=\"MakerCaption\" VALUE=\"' + (window.NTKO_MakerCaption || '江苏国泰新点软件有限公司') + '\"><PARAM NAME=\"MakerKey\" VALUE=\"' + (window.NTKO_MakerKey || '39337AFCA7AFD1F882A3BF53CBE1E4AC804C65A6') + '\"><span style=\"color: red;\">不能装载NTKO大文件上传控件。</span></object>';\r\n        this._ntko = this._ntkoContent.firstChild;\r\n\r\n        this._errorContent = '';\r\n    },\r\n\r\n    _initEvents: function() {\r\n        mini._BindEvents(function() {\r\n            mini_onOne(this._picker, \"click\", this.__OnPickerClick, this);\r\n        }, this);\r\n\r\n        var that = this,\r\n            ntko = this._ntko;\r\n\r\n        // 绑定上传按钮的点击事件\r\n        this._uploadBtn.on('click', function() {\r\n            if (ntko.IsUploading) {\r\n                that.stopUpload();\r\n                that._uploadBtn.setText(that.pauseText);\r\n            } else {\r\n                that.beginUpload();\r\n                that._uploadBtn.setText(that.startText);\r\n            }\r\n        });\r\n\r\n        if (this.auto) {\r\n            this._uploadBtn.hide();\r\n        }\r\n\r\n        //\r\n        if (ntko.attachEvent) {\r\n            ntko.attachEvent('BeforeFileAdded', function(filePath, fileName, fileSize) {\r\n                ntko.CancelLastCommand = !that._beforeFileQueued(filePath, fileName, fileSize);\r\n            });\r\n            ntko.attachEvent('OnLocalFileAdded', function(filePath, fileName, fileSize) {\r\n\r\n                that._onFilesQueued(filePath, fileName, fileSize);\r\n            });\r\n            ntko.attachEvent('OnFileProcessStatusChange', function(file, statusText, isPersent, persentNumber) {\r\n                that._onUploadProgress(file, statusText, isPersent, persentNumber);\r\n            });\r\n            ntko.attachEvent('OnOneFileUploadFinished', function(file, isAllUploaded) {\r\n                that._onFileFinished(file, isAllUploaded);\r\n            });\r\n            ntko.attachEvent('OnSaveToURLFinished', function(isAllSuccess) {\r\n                that._onUploadFinished(isAllSuccess);\r\n            });\r\n        } else {\r\n            var id = this.uid + '-ntko',\r\n                lfu = 'var lfu = mini.getbyUID(\"' + this.uid + '\");',\r\n                text = lfu + 'lfu._ntko.CancelLastCommand = !lfu._beforeFileQueued(filePath, fileName, fileSize);';\r\n\r\n            addEvent({\r\n                target: id,\r\n                event: \"BeforeFileAdded(filePath, fileName, fileSize)\",\r\n                text: text\r\n            });\r\n\r\n            text = lfu + 'lfu._onFilesQueued(filePath, fileName, fileSize);';\r\n            addEvent({\r\n                target: id,\r\n                event: \"OnLocalFileAdded(filePath, fileName, fileSize)\",\r\n                text: text\r\n            });\r\n\r\n            text = lfu + 'lfu._onUploadProgress(file, statusText, isPersent, persentNumber);';\r\n            addEvent({\r\n                target: id,\r\n                event: \"OnFileProcessStatusChange(file, statusText, isPersent, persentNumber)\",\r\n                text: text\r\n            });\r\n\r\n            text = lfu + 'lfu._onFileFinished(file, isAllUploaded);';\r\n            addEvent({\r\n                target: id,\r\n                event: \"OnOneFileUploadFinished(file, isAllUploaded)\",\r\n                text: text\r\n            });\r\n\r\n            text = lfu + 'lfu._onUploadFinished(isAllSuccess);';\r\n            addEvent({\r\n                target: id,\r\n                event: \"OnSaveToURLFinished(isAllSuccess)\",\r\n                text: text\r\n            });\r\n\r\n\r\n        }\r\n\r\n        function addEvent(opt) {\r\n            var script = document.createElement('script');\r\n            script.language = \"JScript\";\r\n            script.setAttribute('for', opt.target);\r\n            script.event = opt.event;\r\n            script.text = opt.text;\r\n            document.body.appendChild(script);\r\n        }\r\n\r\n    },\r\n\r\n    _afterApply: function() {\r\n        // 说明没有初始化成功\r\n        if (this._ntko.StatusCode === undefined) {\r\n            this._buttons.innerHTML = '<a class=\"noflash\" title=\"不能装载NTKO大文件上传控件。请确保使用IE浏览器，并检查浏览器的安全设置。\">初始化错误</a>';\r\n            mini.showPageWarning({\r\n                html: '不能装载NTKO大文件上传控件。请确保使用IE浏览器，并检查浏览器的安全设置'\r\n            });\r\n        }\r\n    },\r\n    __OnPickerClick: function(e) {\r\n        var ntko = this._ntko;\r\n        try {\r\n            ntko.AddLocalFile(\"\", this.multiSelect, this._ntkoFileType);\r\n            if (this.auto) {\r\n                this.beginUpload();\r\n            }\r\n\r\n        } catch (error) {\r\n            if (ntko.StatusCode == 10) {\r\n                window.console && console.log('用户取消操作');\r\n            } else {\r\n                window.console && console.error(\"error：\" + error.number + \":\" + error.description);\r\n            }\r\n        }\r\n    },\r\n    _blocksFileField: \"NTKO_LF_BLOCK\",\r\n    beginUpload: function() {\r\n        if (this._onStartUpload()) {\r\n            var ntko = this._ntko;\r\n\r\n            ntko.QueryFileStatusURL = this._ntkoQueryFileStatusURL;\r\n            ntko.FinishedUploadURL = this._ntkoFinishedUploadURL;\r\n\r\n            var data = {\r\n                data: {}\r\n            };\r\n            this._onUploadBeforeSend(data);\r\n\r\n            ntko.BeginSaveToURL(this.uploadUrl + '&query=upload', this._blocksFileField, parseData(data.data));\r\n        }\r\n\r\n        function parseData(data) {\r\n            var r = [];\r\n            for (var i in data) {\r\n                r.push(i + '=' + data[i]);\r\n            }\r\n\r\n            return r.join('&');\r\n        }\r\n    },\r\n\r\n    stopUpload: function() {\r\n        this._ntko.StopSaveToURL();\r\n        this._onStopUpload();\r\n    },\r\n\r\n    reset: function() {\r\n        this._ntko.Reset();\r\n        this._onReset();\r\n    },\r\n\r\n    removeFile: function(fileId) {\r\n\r\n        var ntko = this._ntko,\r\n            index = this._getFileIndex(fileId),\r\n            file;\r\n\r\n        if (index > -1) {\r\n            file = ntko.GetFile(index);\r\n            ntko.RemoveFile(index);\r\n\r\n            this._fileIds[file.FilePath] = undefined;\r\n            delete this._fileIds[file.FilePath];\r\n            this._onFileDequeued(file);\r\n        }\r\n\r\n    },\r\n    _getFileIndex: function(fileId) {\r\n        var index = 0;\r\n        for (var i in this._fileIds) {\r\n            if (this._fileIds[i].id === fileId) {\r\n                return index;\r\n            }\r\n            index++;\r\n        }\r\n        return -1;\r\n    },\r\n\r\n    _ntkoFileType: '*.*',\r\n    setLimitType: function(limitType) {\r\n        this.limitType = limitType.toLowerCase();\r\n        this._ntkoFileType = this._getNtkoFileType(limitType);\r\n    },\r\n\r\n    getLimitType: function() {\r\n        return this.limitType;\r\n    },\r\n    /**\r\n     *\r\n     * function setAuto(auto)\r\n     * @member mini.WebUploader\r\n     * @param {Boolen} auto\r\n     *\r\n     */\r\n    setAuto: function(auto) {\r\n        if (this.auto != auto) {\r\n            this.auto = auto;\r\n            if (auto) {\r\n                this._uploadBtn.hide();\r\n            } else {\r\n                this._uploadBtn.show();\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function getAuto()\r\n     * @member mini.WebUploader\r\n     * @returns {Boolen}\r\n     *\r\n     */\r\n    getAuto: function() {\r\n        return this.auto;\r\n    },\r\n    _getNtkoFileType: function(limitType) {\r\n        if (!limitType) {\r\n            return '*.*';\r\n        }\r\n\r\n        var fileTypes = [],\r\n            limitTypes = limitType.split(',');\r\n\r\n        for (var i = 0, l = limitTypes.length; i < l; i++) {\r\n            fileTypes.push('*.' + limitTypes[i]);\r\n\r\n        }\r\n\r\n        return fileTypes.join(';');\r\n\r\n    },\r\n\r\n    getFileList: function() {\r\n        return this._fileList;\r\n    },\r\n\r\n    setFileNumLimit: function(fileNumLimit) {\r\n        fileNumLimit = parseInt(fileNumLimit) || 0;\r\n\r\n        this.fileNumLimit = fileNumLimit;\r\n\r\n        if (fileNumLimit === 1) {\r\n            this.multiSelect = false;\r\n        }\r\n    },\r\n\r\n    getFileNumLimit: function() {\r\n        return this.fileNumLimit;\r\n    },\r\n\r\n    setUploadUrl: function(uploadUrl) {\r\n        var urlQuery = window.location.search.substring(1);\r\n        var separator = '?';\r\n\r\n        if (uploadUrl.indexOf('?') > 0) {\r\n            separator = '&';\r\n        }\r\n\r\n        uploadUrl += (separator + 'type=ntko');\r\n        if (urlQuery) {\r\n            uploadUrl += ('&' + urlQuery);\r\n        }\r\n\r\n        if (this.needChunkLocal) {\r\n            uploadUrl += '&needChunkLocal=1';\r\n        }\r\n\r\n        this.uploadUrl = uploadUrl;\r\n\r\n        this._ntkoQueryFileStatusURL = uploadUrl + '&query=getStatus';\r\n        this._ntkoFinishedUploadURL = uploadUrl + '&query=finished';\r\n\r\n    },\r\n    getUploadUrl: function() {\r\n        return this.uploadUrl;\r\n    },\r\n    /**\r\n     *\r\n     * function setFileSingleSizeLimit(fileSingleSizeLimit)\r\n     * @member mini.WebUploader\r\n     * @param {int} fileSingleSizeLimit\r\n     *\r\n     */\r\n    setFileSingleSizeLimit: function(fileSingleSizeLimit) {\r\n        this.fileSingleSizeLimit = fileSingleSizeLimit;\r\n    },\r\n    /**\r\n     *\r\n     * function getFileSingleSizeLimit()\r\n     * @member mini.WebUploader\r\n     * @returns {int}\r\n     *\r\n     */\r\n    getFileSingleSizeLimit: function() {\r\n        return this.fileSingleSizeLimit;\r\n    },\r\n\r\n    _validateFile: function(file) {\r\n        var filesCount = this._ntko.FilesCount;\r\n        if (this.fileNumLimit && filesCount >= this.fileNumLimit) {\r\n            this._errorContent = String.format(this.numLimitErrorText, this.fileNumLimit);\r\n\r\n            return false;\r\n        }\r\n\r\n        if (this.fileSingleSizeLimit && file.size > this.fileSingleSizeLimit * 1024) {\r\n            this._errorContent = String.format(this.sizeErrorText, this.fileSingleSizeLimit);\r\n\r\n            return false;\r\n        }\r\n\r\n        if (file.size === 0) {\r\n            this._errorContent = this.emptyFileErrorText;\r\n\r\n            return false;\r\n        }\r\n\r\n        if (this.limitType && (',' + this.limitType + ',').indexOf(',' + file.ext.toLowerCase() + ',') == -1) {\r\n            this._errorContent = String.format(this.typeDeniedErrorText, this.limitType);\r\n\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    _parseAttachFile: function(attachFile) {\r\n        var file = {\r\n            path: attachFile.FilePath,\r\n            name: attachFile.FileName,\r\n            size: attachFile.FileSize,\r\n            md5: attachFile.MD5ID\r\n        };\r\n        file.ext = file.name.substr(file.name.lastIndexOf('.') + 1);\r\n        file.id = this._fileIds[file.path].id;\r\n\r\n        return file;\r\n    },\r\n\r\n    // 当文件被加入队列之前触发，此事件的handler返回值为false，则此文件不会被添加进入队列。\r\n    _beforeFileQueued: function(filePath, fileName, fileSize) {\r\n        var file = {\r\n            path: filePath,\r\n            name: fileName,\r\n            size: fileSize,\r\n            ext: fileName.substr(fileName.lastIndexOf('.') + 1)\r\n        };\r\n\r\n        if (this._events[\"beforefilequeued\"]) {\r\n            var event = {\r\n                source: this,\r\n                sender: this,\r\n                type: 'beforefilequeued',\r\n                file: file,\r\n                cancel: false\r\n            };\r\n\r\n            this.fire(\"beforefilequeued\", event);\r\n\r\n            if (event.cancel) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (this._validateFile(file)) {\r\n            return true;\r\n        } else {\r\n            if (this._errorContent) {\r\n                mini.alert(this._errorContent);\r\n            }\r\n            this._errorContent = \"\";\r\n            return false;\r\n        }\r\n\r\n    },\r\n\r\n    _fileIds: {},\r\n    // 当有文件添加进来的时候\r\n    _onFilesQueued: function(filePath, fileName, fileSize) {\r\n        var file = {\r\n            path: filePath,\r\n            name: fileName,\r\n            size: fileSize,\r\n            ext: fileName.substr(fileName.lastIndexOf('.') + 1),\r\n            id: UUID()\r\n        };\r\n\r\n        this._fileIds[file.path] = {\r\n            id: file.id\r\n        };\r\n\r\n        this.fire(\"filesqueued\", {\r\n            files: [file]\r\n        });\r\n    },\r\n    // 当文件被移除队列后触发\r\n    _onFileDequeued: function(file) {\r\n        this.fire(\"filedequeued\", {\r\n            file: file\r\n        });\r\n    },\r\n    _onUploadBeforeSend: function(data) {\r\n        this.fire(\"uploadbeforesend\", data);\r\n    },\r\n    // 文件上传过程中触发。\r\n    _onUploadProgress: function(file, statusText, isPersent, persentNumber) {\r\n        file = this._parseAttachFile(file);\r\n\r\n        console.log(arguments);\r\n\r\n        var isUploading = false;\r\n        if (isPersent) {\r\n            if (!isUploading && statusText.indexOf('正在分析文件') === 0) {\r\n                this.fire(\"md5progress\", {\r\n                    file: file,\r\n                    percentage: persentNumber / 100\r\n                });\r\n\r\n                if (persentNumber == 100) {\r\n                    isUploading = true;\r\n                }\r\n            } else {\r\n                this.fire(\"uploadprogress\", {\r\n                    file: file,\r\n                    percentage: persentNumber / 100\r\n                });\r\n\r\n            }\r\n        } else if (!this._fileIds[file.path].started) {\r\n            this.fire(\"uploadstart\", {\r\n                file: file\r\n            });\r\n            this._fileIds[file.path].started = true;\r\n        }\r\n\r\n    },\r\n\r\n    _onFileFinished: function(file, isAllUploaded) {\r\n        file = this._parseAttachFile(file);\r\n        if (isAllUploaded) {\r\n            this._onUploadSuccess(file);\r\n        } else {\r\n            this._onUploadError(file, this._parseNtkoRet(this._ntko.LastFinishedUploadRetMes));\r\n        }\r\n\r\n        this._onUploadComplete(file);\r\n    },\r\n    _onUploadSuccess: function(file) {\r\n        var ret = this._parseNtkoRet(this._ntko.LastFinishedUploadRetMes);\r\n        this.fire('uploadaccept', {\r\n            ret: ret,\r\n            object: {\r\n                file: file\r\n            }\r\n        });\r\n\r\n\r\n        this.fire(\"uploadsuccess\", {\r\n            file: file\r\n        });\r\n    },\r\n    _onUploadError: function(file, reason) {\r\n        this.fire(\"uploaderror\", {\r\n            file: file,\r\n            reason: reason\r\n        });\r\n    },\r\n    _onUploadComplete: function(file) {\r\n        this.fire(\"uploadcomplete\", {\r\n            file: file\r\n        });\r\n    },\r\n    // 当开始上传流程时触发\r\n    _onStartUpload: function() {\r\n        if (this._events[\"startupload\"]) {\r\n            var event = {\r\n                source: this,\r\n                sender: this,\r\n                type: 'startupload',\r\n                cancel: false\r\n            };\r\n\r\n            this.fire(\"startupload\", event);\r\n\r\n            if (event.cancel) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    },\r\n    // 当上传流程暂停时触发\r\n    _onStopUpload: function() {\r\n        this.fire(\"stopupload\");\r\n    },\r\n    _onUploadFinished: function(isAllSuccess) {\r\n        this._uploadBtn.setText(this.startText);\r\n        this.fire(\"uploadfinished\", {\r\n            isAllSuccess: isAllSuccess\r\n        });\r\n    },\r\n    // 当 uploader 被重置的时候触发\r\n    _onReset: function() {\r\n        this._fileIds = {};\r\n        this.fire(\"reset\");\r\n    },\r\n\r\n    _parseNtkoRet: function(ret) {\r\n        var params = {},\r\n            arr = ret.split('&');\r\n\r\n        $.each(arr, function(i, item) {\r\n            var tmp = item.split('='),\r\n                key = tmp[0],\r\n                val = tmp[1];\r\n\r\n            if (typeof params[key] == 'undefined') {\r\n                params[key] = val;\r\n            } else if (typeof params[key] == 'string') {\r\n                params[key] = [params[key], val];\r\n            } else {\r\n                params[key].push(val);\r\n            }\r\n        });\r\n\r\n        return params;\r\n    },\r\n\r\n    getAttrs: function(el) {\r\n        var attrs = mini.LargeFileUploader.superclass.getAttrs.call(this, el);\r\n        attrs.text = el.innerHTML;\r\n        mini._ParseString(el, attrs, [\"uploadUrl\", \"limitType\", \"onbeforefilequeued\",\r\n            \"onfilesqueued\", \"onreset\", \"onstartupload\", \"onstopupload\",\r\n            \"onuploadfinished\", \"onuploadstart\", \"onuploadbeforesend\", \"onuploadaccept\", \"onuploadprogress\", \"onmd5progress\",\r\n            \"onuploadsuccess\", \"onuploaderror\", \"onuploadcomplete\", \"pickerText\"\r\n        ]);\r\n        mini._ParseBool(el, attrs, [\"auto\", \"multiSelect\"]);\r\n        mini._ParseInt(el, attrs, [\"fileNumLimit\", \"fileSingleSizeLimit\"]);\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.LargeFileUploader, \"largefileuploader\");\r\n\nmini.Output = function() {\r\n    mini.Output.superclass.constructor.apply(this, arguments);\r\n};\r\n\r\nmini.extend(mini.Output, mini.Control, {\r\n    url: '',\r\n    async: false,\r\n    escape: false,\r\n    autoLoad: true,\r\n\r\n    uiCls: 'mini-output',\r\n\r\n    _create: function() {\r\n        this.el = document.createElement('div');\r\n        this.el.className = 'mini-output';\r\n    },\r\n\r\n    _initEvents: function() {},\r\n\r\n    doLayout: function() {\r\n        if (!this.canLayout()) return;\r\n\r\n        var cs = this.el.childNodes;\r\n        if (cs) {\r\n            for (var i = 0, l = cs.length; i < l; i++) {\r\n                var cel = cs[i];\r\n                mini.layout(cel);\r\n            }\r\n        }\r\n    },\r\n    doUpdate: function() {\r\n        var xhr = jQuery.ajax({\r\n            url: this.url,\r\n            async: this.async\r\n        });\r\n        var that = this;\r\n        xhr.done(function(html) {\r\n            that.setValue(html);\r\n        });\r\n    },\r\n\r\n    setUrl: function(value) {\r\n        this.url = value;\r\n        if (this.autoLoad) {\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    getUrl: function() {\r\n        return this.url;\r\n    },\r\n\r\n    setAutoLoad: function(autoLoad) {\r\n        this.autoLoad = !!autoLoad;\r\n    },\r\n    getAutoLoad: function() {\r\n        return this.autoLoad;\r\n    },\r\n\r\n    setEscape: function(escape) {\r\n        this.escape = !!escape;\r\n    },\r\n    getEscape: function() {\r\n        return this.escape;\r\n    },\r\n\r\n    setAsync: function(value) {\r\n        this.async = value;\r\n    },\r\n    getAsync: function() {\r\n        return this.async;\r\n    },\r\n\r\n    setValue: function(value) {\r\n        // 提供一个外部处理数据的接口，方便“服务端返回数据，前端根据数据渲染html”这种场景的实现\r\n        var e = {\r\n            value: value\r\n        };\r\n\r\n        this.fire('valuechanged', e);\r\n\r\n        value = e.value;\r\n\r\n        if (value === null || value === undefined) value = '';\r\n\r\n        if (this.escape) {\r\n            value = mini.htmlEncode(value);\r\n        }\r\n        mini.innerHTML(this.el, value);\r\n        mini.parse(this.el);\r\n\r\n        this.doLayout();\r\n    },\r\n\r\n    ///////////////////////////////////////////////\r\n    getAttrs: function(el) {\r\n        var attrs = mini.Output.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs, ['url', 'onvaluechanged']);\r\n\r\n        mini._ParseBool(el, attrs, ['escape', 'async', 'autoLoad']);\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.Output, 'output');\r\n\nmini.OutputText = function () {\r\n    mini.OutputText.superclass.constructor.apply(this, arguments);\r\n};\r\n\r\nmini.extend(mini.OutputText, mini.Control, {\r\n    // dateFormat: \"\",\r\n    maxWidth: \"\",\r\n    escape: false,\r\n    showTitle: true,\r\n    numFormat: '',\r\n    uiCls: \"mini-outputtext\",\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        // var dateFormat = kv.dateFormat;\r\n        // delete kv.dateFormat;\r\n\r\n        var maxWidth = kv.maxWidth;\r\n        delete kv.maxWidth;\r\n\r\n        var _escape = kv.escape;\r\n        delete kv.escape;\r\n\r\n        var showTitle = kv.showTitle;\r\n        delete kv.showTitle;\r\n\r\n        var numFormat = kv.numFormat;\r\n        delete kv.numFormat;\r\n\r\n        // if(dateFormat) {\r\n        // \tthis.dateFormat = dateFormat;\r\n        // }\r\n        if (maxWidth) {\r\n            this.setMaxWidth(maxWidth);\r\n        }\r\n        if (_escape) {\r\n            this.escape = _escape;\r\n        }\r\n        if(!mini.isNull(showTitle)) {\r\n            this.setShowTitle(showTitle);\r\n        }\r\n\r\n        if(numFormat) {\r\n            this.numFormat = numFormat;\r\n        }\r\n\r\n        mini.OutputText.superclass.set.call(this, kv);\r\n\r\n        return this;\r\n    },\r\n\r\n    _create: function () {\r\n        this.el = document.createElement(\"span\");\r\n    },\r\n\r\n    setValue: function (value) {\r\n        if (value === null || value === undefined) value = \"\";\r\n        \r\n        this.value = value;\r\n        // if (this.dateFormat && mini.isDate(mini.parseDate(value)) {\r\n        //            value = mini.formatDate(value, this.dateFormat);\r\n        //    }\r\n\r\n        //    if(this.maxLength && value.length > this.maxLength){\r\n        //    \tvalue = value.substr(0, this.maxLength) + '...';\r\n        //    }\r\n\r\n        // 添加对数字格式化的处理\r\n        var numValue;\r\n        if(this.numFormat) {\r\n            numValue = parseFloat(value);\r\n            numValue && (numValue = mini.formatNumber(numValue, this.numFormat));\r\n\r\n            if(numValue) {\r\n                value = numValue;\r\n            }\r\n        } else if (this.escape === true) {\r\n            value = mini.htmlEncode(value);\r\n            // 恢复换行\r\n            value = value.replace(/\\n/g, \"<br/>\");\r\n        }\r\n        this.el.innerHTML = value;\r\n\r\n        var title = jQuery(this.el).text();\r\n\r\n        if(this.showTitle) {\r\n            mini.setAttr(this.el, 'title', title);\r\n        }\r\n\r\n    },\r\n\r\n    setMaxWidth: function (maxWidth) {\r\n        maxWidth = maxWidth.replace(/(^\\s*)|(\\s*$)/g, '');\r\n        if (maxWidth) {\r\n            if (maxWidth.substr(maxWidth.length - 2) != 'px') {\r\n                maxWidth += 'px';\r\n            }\r\n            mini.addClass(this.el, 'mini-text-ellipsis');\r\n        } else {\r\n            mini.removeClass(this.el, 'mini-text-ellipsis');\r\n        }\r\n\r\n        this.el.style.maxWidth = maxWidth;\r\n\r\n        this.maxWidth = maxWidth;\r\n    },\r\n\r\n    getMaxWidth: function() {\r\n        return this.maxWidth;\r\n    },\r\n\r\n    getEscape: function () {\r\n        return this.escape;\r\n    },\r\n\r\n    getShowTitle: function() {\r\n        return this.showTitle;\r\n    },\r\n\r\n    setShowTitle: function(showTitle) {\r\n        this.showTitle = showTitle;\r\n    },\r\n\r\n    setNumFormat: function(numFormat) {\r\n        this.numFormat = numFormat;\r\n    },\r\n\r\n    getAttrs: function (el) {\r\n        var attrs = mini.OutputText.superclass.getAttrs.call(this, el);\r\n        // mini._ParseString(el, attrs, [\"dateFormat\"]);\r\n\r\n        mini._ParseString(el, attrs, [\"maxWidth\", \"numFormat\"]);\r\n\r\n        mini._ParseBool(el, attrs, [\"escape\", \"showTitle\"]);\r\n\r\n        return attrs;\r\n    }\r\n\r\n});\r\n\r\nmini.regClass(mini.OutputText, \"outputtext\");\nmini.PagerTree = function () {\r\n    mini.PagerTree.superclass.constructor.call(this);\r\n    mini.addClass(this.el, 'mini-tree');\r\n    mini.addClass(this.el, 'mini-treegrid');\r\n\r\n    this._Expander = new mini._PagerTree_Expander(this);\r\n    // 手动收缩节点的集合\r\n    this._collapseNodes = [];\r\n    // 手动展开节点的集合\r\n    this._expandNodes = [];\r\n    this.on(\"beforeload\", this.__OnBeforeLoad, this);\r\n};\r\nmini.extend(mini.PagerTree, mini.DataGrid, {\r\n\r\n    uiCls: 'mini-pagertree',\r\n    treeColumn: '',\r\n\r\n    idField: 'id',\r\n    parentField: 'pid',\r\n\r\n    showTreeIcon: true,                 //节点图标    \r\n    iconField: \"iconCls\",\r\n    imgField: 'img',\r\n    imgPath: '',\r\n\r\n    leafIconCls: \"mini-tree-leaf\",\r\n    folderIconCls: \"mini-tree-folder\",\r\n    _expandNodeCls: \"mini-tree-expand\",\r\n    _collapseNodeCls: \"mini-tree-collapse\",\r\n    _eciconCls: \"mini-tree-node-ecicon\",\r\n\r\n    _OnCellMouseDown: function (e) {\r\n        if (mini.findParent(e.htmlEvent.target, this._eciconCls)) {\r\n        } else if (mini.findParent(e.htmlEvent.target, 'mini-tree-checkbox')) {\r\n        } else {\r\n            this.fire(\"cellmousedown\", e);\r\n        }\r\n    },\r\n    _OnCellClick: function (e) {\r\n        if (mini.findParent(e.htmlEvent.target, this._eciconCls)) return;\r\n\r\n        if (mini.findParent(e.htmlEvent.target, 'mini-tree-checkbox')) {\r\n\r\n        } else {\r\n            this.fire(\"cellclick\", e);\r\n        }\r\n    },\r\n    _OnDrawCell: function (record, column, rowIndex, columnIndex) {\r\n        var e = mini.PagerTree.superclass._OnDrawCell.call(this, record, column, rowIndex, columnIndex);\r\n        if (this.treeColumn && this.treeColumn == column.name) {\r\n            e.headerCls += ' mini-tree-treecolumn';\r\n            e.cellCls += ' mini-tree-treecell';\r\n            e.cellStyle += ';padding:0;';\r\n\r\n            e.img = record[this.imgField];\r\n            e.iconCls = this._getNodeIcon(record);\r\n            e.showTreeIcon = this.showTreeIcon;\r\n            e.nodeCls = \"\";\r\n            e.nodeStyle = \"\";\r\n\r\n            this._createTreeCell(e);\r\n        }\r\n        return e;\r\n    },\r\n    _createTreeCell: function (e) {\r\n        var sb = [];\r\n        var node = e.record;\r\n\r\n        var isLeaf = this.isLeafNode(node);\r\n        var level = this.getNodeLevel(node);\r\n        var isExpand = this.isExpandedNode(node);\r\n\r\n        var cls = e.nodeCls;\r\n\r\n        if (!isLeaf) {\r\n            cls = isExpand ? this._expandNodeCls : this._collapseNodeCls;\r\n        }\r\n\r\n        if (!isLeaf) {\r\n            cls += \" mini-tree-parentNode\";\r\n        }\r\n\r\n\r\n        sb[sb.length] = '<div class=\"mini-tree-nodetitle ' + cls + '\" style=\"' + e.nodeStyle + '\">';\r\n\r\n        //_level\r\n        var ii = 0;\r\n        for (var i = ii; i < level - 1; i++) {\r\n            sb[sb.length] = '<span class=\"mini-tree-indent \" ></span>';\r\n        }\r\n\r\n        if (!isLeaf) {\r\n            sb[sb.length] = '<i class=\"' + this._eciconCls + '\"></i>';\r\n        } else {\r\n            sb[sb.length] = '<span class=\"' + this._eciconCls + '\" ></span>';\r\n        }\r\n\r\n\r\n        sb[sb.length] = '<span class=\"mini-tree-nodeshow\">';\r\n        if (e.showTreeIcon) {\r\n            if (e.img) {\r\n                var img = this.imgPath + e.img;\r\n                sb[sb.length] = '<span class=\"mini-tree-icon\" style=\"background-image:url(' + img + ');\"></span>';\r\n            } else {\r\n                sb[sb.length] = '<span class=\"' + e.iconCls + ' mini-tree-icon mini-icon\"></span>';\r\n            }\r\n        }\r\n\r\n        sb[sb.length] = '<span class=\"mini-tree-nodetext\">';\r\n\r\n        sb[sb.length] = e.cellHtml;\r\n\r\n        sb[sb.length] = '</span>';\r\n        sb[sb.length] = '</span>';\r\n\r\n        sb[sb.length] = '</div>';\r\n\r\n        e.cellHtml = sb.join('');\r\n    },\r\n    /////////////////////////////////////////////////////////////////////////\r\n    __OnBeforeLoad: function (e) {\r\n        e.data.__ecconfig = this._getEcConfig();\r\n    },\r\n    _getEcConfig: function() {\r\n        var config = { collapseNodes: this._collapseNodes, expandNodes: this._expandNodes };\r\n        return mini.encode(config);\r\n    },\r\n    load: function () {\r\n        this._collapseNodes = [];\r\n        this._expandNodes = [];\r\n        return mini.PagerTree.superclass.load.apply(this, arguments);\r\n    },\r\n    expandNode: function (node) {\r\n        node = this._dataSource.getbyId(node);\r\n        if (node && !this.isLeafNode(node)) {\r\n            var id = node[this.getIdField()];\r\n            if (id) {\r\n                this._expandNodes.remove(id);\r\n                this._collapseNodes.remove(id);\r\n\r\n                this._expandNodes.add(id);\r\n            }\r\n        }\r\n        this.reload();\r\n    },\r\n    collapseNode: function (node) {\r\n        node = this._dataSource.getbyId(node);\r\n        if (node && !this.isLeafNode(node)) {\r\n            var id = node[this.getIdField()];\r\n            if (id) {\r\n                this._expandNodes.remove(id);\r\n                this._collapseNodes.remove(id);\r\n\r\n                this._collapseNodes.add(id);\r\n            }\r\n        }\r\n        this.reload();\r\n    },\r\n    toggleNode: function (node) {\r\n        node = this._dataSource.getbyId(node);\r\n        if (!node) {\r\n            this.reload();\r\n        } else {\r\n            if (this.isExpandedNode(node)) {\r\n                this.collapseNode(node);\r\n            } else {\r\n                this.expandNode(node);\r\n            }\r\n        }\r\n    },\r\n    /////////////////////////////////////////////////////////////////////////\r\n    isExpandedNode: function (node) {\r\n        if(node.expanded === undefined) {\r\n            return true;\r\n        }\r\n        return node.expanded.toString() == 'true';\r\n    },\r\n    isLeafNode: function (node) {\r\n        return node.isLeaf && node.isLeaf.toString() == 'true';\r\n    },\r\n    getNodeLevel: function (node) {\r\n        return node._level;\r\n    },\r\n    _getNodeIcon: function (node) {\r\n        var icon = node[this.iconField];\r\n        if (!icon) {\r\n            if (this.isLeafNode(node)) icon = this.leafIconCls;\r\n            else icon = this.folderIconCls;\r\n        }\r\n        return icon;\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.PagerTree.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"treeColumn\", \"iconField\", \"imgField\", \"imgPath\", \"idField\", \"parentField\"\r\n             ]\r\n        );\r\n\r\n        mini._ParseBool(el, attrs,\r\n            [\"showTreeIcon\"\r\n             ]\r\n        );\r\n\r\n        return attrs;\r\n    }\r\n\r\n});\r\nmini.regClass(mini.PagerTree, \"pagertree\");\r\n\r\n//分页树折叠插件\r\nmini._PagerTree_Expander = function (grid) {\r\n    this.owner = grid;\r\n    mini.on(grid.el, \"click\", this.__OnClick, this);\r\n}\r\nmini._PagerTree_Expander.prototype = {\r\n    __OnClick: function (e) {\r\n        var tree = this.owner;\r\n        var node = tree.getRecordByEvent(e, false);\r\n        if (!node) return;\r\n        var isLeaf = tree.isLeafNode(node);\r\n        if (mini.findParent(e.target, tree._eciconCls)) {\r\n            if (tree.isLeafNode(node)) return;\r\n            tree.toggleNode(node);\r\n        }\r\n    }\r\n}\n\r\n\r\nmini.Pagination = function () {\r\n\tmini.Pagination.superclass.constructor.apply(this, arguments);\r\n};\r\n\r\nmini.extend(mini.Pagination, mini.Control, {\r\n    pageIndex: 0,\r\n    pageSize: 10,\r\n    totalCount: 0,\r\n    totalPage: 0,\r\n    showTotalCount: true,\r\n    showPageSize: true,\r\n    showPageInfo: true,\r\n    sizeList: [10, 20, 50, 100],\r\n    pageInfoText: '共{0}条',\r\n    jumpText: '跳至<input class=\"pagination-number\"  value=\"{0}\"/>页',\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var pageIndex = kv.pageIndex;\r\n        delete kv.pageIndex;\r\n\r\n        mini.Pagination.superclass.set.call(this, kv);\r\n\r\n        if (!mini.isNull(pageIndex)) {\r\n            this.setPageIndex(pageIndex);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    uiCls: \"mini-pagination\",\r\n    _create: function () {\r\n        var sf = this;\r\n        sf.el = document.createElement(\"div\");\r\n        // sf.el.className = \"mini-pagination\";\r\n        this._updatePager();\r\n\r\n    },\r\n    _updatePagerButtons: function () {\r\n        var sf = this;\r\n        var pageSize = parseInt(sf.pageSize, 10);\r\n        var pageIndex = parseInt(sf.pageIndex, 10);\r\n        var totalIndex = parseInt(sf.totalCount, 10);\r\n        var buttonCounts = Math.ceil(totalIndex / pageSize);\r\n\r\n        var nextEllipsisIndex;\r\n\r\n        var sb = [];\r\n        if(this.showTotalCount && totalIndex >= 0) {\r\n            sb.push('<div class=\"pagination-pagerinfo\">' + String.format(this.pageInfoText, totalIndex) + '</div>');\r\n        }\r\n        sb.push('<div class=\"pagination-buttons\">');\r\n        var cls = \"\",\r\n            item = '',\r\n            i = 0;\r\n        if (pageIndex == 0) {\r\n            cls = \"disabled\";\r\n        }\r\n        var prevButton = '<a class=\"pagination-button pagination-prev mini-icon ' + cls + '\" action=\"prev\"></a>';\r\n        sb.push(prevButton);\r\n\r\n        if (buttonCounts < 8) {\r\n            for (i = 0; i < buttonCounts; i++) {\r\n                cls = \"\";\r\n                if (pageIndex == i) {\r\n                    cls = \"pagination-current\";\r\n                }\r\n                item = '<a class=\"pagination-button ' + cls + '\">' + (i + 1) + '</a>';\r\n\r\n                sb.push(item);\r\n            }\r\n        } else {\r\n            if (pageIndex < 6) {\r\n                for (i = 0; i < 6; i++) {\r\n                    cls = \"\";\r\n                    if (pageIndex == i) {\r\n                        cls = \"pagination-current\";\r\n                    }\r\n                    item = '<a class=\"pagination-button ' + cls + '\">' + (i + 1) + '</a>';\r\n\r\n                    sb.push(item);\r\n                }\r\n                nextEllipsisIndex = i + 4 >= buttonCounts ? buttonCounts -1 : i + 4;\r\n                sb.push('<a class=\"pagination-button pagination-button-ellipsis\" action=\"none\" data-index=\"' + nextEllipsisIndex + '\" title=\"' + nextEllipsisIndex + '\">...</a>');\r\n                sb.push('<a class=\"pagination-button\">' + buttonCounts + '</a>');\r\n            } else if (pageIndex > buttonCounts - 6) {\r\n                sb.push('<a class=\"pagination-button\">1</a>');\r\n                sb.push('<a class=\"pagination-button pagination-button-ellipsis\" action=\"none\" data-index=\"' + (buttonCounts - 6) + '\" title=\"' + (buttonCounts - 6) + '\">...</a>');\r\n                for (i = 6; i > 0; i--) {\r\n                    cls = \"\";\r\n                    if (pageIndex == buttonCounts - i) {\r\n                        cls = \"pagination-current\";\r\n                    }\r\n                    sb.push('<a class=\"pagination-button ' + cls + '\">' + (buttonCounts - i + 1) + '</a>');\r\n                }\r\n\r\n\r\n            } else {\r\n                sb.push('<a class=\"pagination-button\">1</a>');\r\n                sb.push('<a class=\"pagination-button pagination-button-ellipsis\" action=\"none\" data-index=\"' + (pageIndex - 3) + '\" title=\"' + (pageIndex - 3) + '\">...</a>');\r\n                for (i = 0; i < 3; i++) {\r\n                    item = '<a class=\"pagination-button\">' + (pageIndex - (2 - i)) + '</a>';\r\n                    sb.push(item);\r\n                }\r\n                nextEllipsisIndex = pageIndex + 4 >= buttonCounts ? buttonCounts - 1 : pageIndex + 4;\r\n                sb.push('<a class=\"pagination-button pagination-current\">' + (pageIndex + 1) + '</a>');\r\n                sb.push('<a class=\"pagination-button pagination-button-ellipsis\" action=\"none\" data-index=\"' + nextEllipsisIndex + '\" title=\"' + nextEllipsisIndex + '\">...</a>');\r\n                sb.push('<a class=\"pagination-button\">' + buttonCounts + '</a>');\r\n            }\r\n        }\r\n\r\n        cls = \"\";\r\n        if ((pageIndex >= buttonCounts - 1 && totalIndex >= 0) || totalIndex == -9999) {\r\n            cls = \"disabled\";\r\n        }\r\n        var nextButton = '<a class=\"pagination-button pagination-next  mini-icon ' + cls + '\" action=\"next\"></a>';\r\n\r\n        sb.push(nextButton);\r\n        sb.push('</div>');\r\n        var pageButtonsStr = sb.join(\" \");\r\n        sf.el.innerHTML = pageButtonsStr;\r\n    },\r\n    _updatePagerInfo: function () {\r\n        var sf = this;\r\n\r\n        var pageSize = parseInt(sf.pageSize, 10);\r\n        var pageIndex = parseInt(sf.pageIndex, 10);\r\n\r\n        var sizeList = sf.sizeList;\r\n        var flag = false,\r\n            i = 0,\r\n            l;\r\n\r\n        function sortNumber(a, b) {\r\n            return a - b;\r\n        }\r\n    \r\n        //debugger\r\n        if(sf.showPageSize) {\r\n            for (l = sizeList.length; i < l; i++) {\r\n                if (sizeList[i] === pageSize) {\r\n                    flag = true;\r\n                }\r\n            }\r\n            if (!flag) {\r\n                sizeList.push(pageSize);\r\n            }\r\n    \r\n            sizeList.sort(sortNumber);\r\n            var sizeData = [];\r\n            for (i = 0; i < l; i++) {\r\n                sizeData.push({ id: sizeList[i], text: sizeList[i] });\r\n            }\r\n    \r\n            sf.sizeCombo = new mini.ComboBox();\r\n            sf.sizeCombo.setData(sizeData);\r\n            sf.sizeCombo.setValue(pageSize);\r\n            sf.sizeCombo.on(\"valuechanged\", function (e) {\r\n                var value = parseInt(e.value, 10);\r\n                sf._OnPageChanged(0, value);\r\n            });\r\n            sf.sizeCombo.render(sf.el);\r\n        }\r\n        \r\n        if(sf.totalCount >= 0) {\r\n            var pagerChange = document.createElement(\"span\");\r\n            pagerChange.className = \"pagination-pagerchange\";\r\n            var str = String.format(this.jumpText, pageIndex + 1);\r\n            pagerChange.innerHTML = str;\r\n            sf.el.appendChild(pagerChange);\r\n        }\r\n    },\r\n    _updatePager: function () {\r\n        this._updatePagerButtons();\r\n        this._updatePagerInfo();\r\n\r\n    },\r\n    _initEvents: function () {\r\n        mini.Pagination.superclass._initEvents.call(this);\r\n        var sf = this;\r\n        //        sf.sizeCombo.on(\"valuechanged\", function (e) {\r\n        //            \r\n        //        })\r\n        setTimeout(function () {\r\n            $(sf.el).on(\"click\", \".pagination-button\", function (e) {\r\n\r\n                var pageSize = sf.pageSize;\r\n                var pageIndex = sf.pageIndex;\r\n                var totalIndex = sf.totalCount;\r\n                var buttonCounts = Math.ceil(totalIndex / pageSize);\r\n                var action = $(e.target).attr(\"action\");\r\n                var val = '';\r\n                if (action == \"prev\") {\r\n                    if (pageIndex != 0) {\r\n                        sf._OnPageChanged(pageIndex - 1);\r\n                    }\r\n                } else if (action == \"next\") {\r\n                    if ((pageIndex < buttonCounts - 1 || totalIndex < 0) && totalIndex !== -9999) {\r\n                        sf._OnPageChanged(sf.pageIndex + 1);\r\n                    }\r\n                } else if (action == \"none\") {\r\n                    val = parseInt($(e.target).data('index'), 10);\r\n                    if (val > 0) {\r\n                        sf._OnPageChanged(val - 1);\r\n                    }\r\n                } else {\r\n                    if (!$(e.target).hasClass(\"current\")) {\r\n                        val = parseInt($(e.target).text(), 10);\r\n                        if (val > 0) {\r\n                            sf._OnPageChanged(val - 1);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }).on(\"keydown\", \".pagination-number\", function (e) {\r\n                if (e.keyCode == 13) {\r\n                    dealInput($(e.target));\r\n                }\r\n            }).on(\"change\", \".pagination-number\", function (e) {\r\n                dealInput($(e.target));\r\n            });\r\n\r\n        }, 100);\r\n\r\n        function dealInput($input) {\r\n            var pageSize = sf.pageSize;\r\n            var totalIndex = sf.totalCount;\r\n            var buttonCounts = Math.ceil(totalIndex / pageSize);\r\n\r\n            var value = parseInt($input.val());\r\n\r\n            if (isNaN(value)) {\r\n                $input.val(\"\");\r\n            } else {\r\n                if (value > buttonCounts) {\r\n                    value = buttonCounts;\r\n                    $input.val(value);\r\n                }\r\n                sf._OnPageChanged(value - 1);\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    _OnPageChanged: function (index, size) {\r\n        var e = {\r\n            pageIndex: mini.isNumber(index) ? index : this.pageIndex,\r\n            pageSize: mini.isNumber(size) ? size : this.pageSize,\r\n            cancel: false\r\n        };\r\n        if(this.totalPage > -1) {\r\n            if (e.pageIndex > this.totalPage - 1) {\r\n                e.pageIndex = this.totalPage - 1;\r\n            }\r\n        }\r\n        \r\n        if (e.pageIndex < 0) e.pageIndex = 0;\r\n\r\n        this.fire(\"beforepagechanged\", e);\r\n        if (e.cancel == true) {\r\n            return;\r\n        }\r\n\r\n        this.fire(\"pagechanged\", e);\r\n        this.update(e.pageIndex, e.pageSize);\r\n\r\n\r\n    },\r\n\r\n    //分页信息变更时激发，用户在此方法内调整分页信息展现\r\n    update: function (index, size, total) {\r\n        var sf = this;\r\n        if (mini.isNumber(index)) sf.pageIndex = parseInt(index);\r\n        if (mini.isNumber(size)) sf.pageSize = parseInt(size);\r\n        if (mini.isNumber(total)) sf.totalCount = parseInt(total);\r\n\r\n        sf.totalPage = parseInt(sf.totalCount / sf.pageSize) + 1;\r\n        \r\n        //@新增：用于处理 totalCount < 0 的场合\r\n        if (sf.totalCount < 0) {\r\n            sf.totalPage = -1;\r\n        } else {\r\n            if ((sf.totalPage - 1) * sf.pageSize == sf.totalCount) {\r\n                sf.totalPage -= 1;\r\n            }\r\n            if (sf.totalCount == 0) sf.totalPage = 0;\r\n    \r\n            if (sf.pageIndex > sf.totalPage - 1) {\r\n                sf.pageIndex = sf.totalPage - 1;\r\n            }\r\n            if (sf.totalPage <= 0) sf.totalPage = 0;\r\n        }\r\n\r\n        if (sf.pageIndex <= 0) sf.pageIndex = 0;\r\n\r\n        this._updatePager();\r\n    },\r\n    setPageIndex: function (value) {\r\n        if (isNaN(value)) return;\r\n        this.pageIndex = value;\r\n        this.update();\r\n    },\r\n    getPageIndex: function () {\r\n        return this.pageIndex;\r\n    },\r\n    setPageSize: function (value) {\r\n        if (isNaN(value)) return;\r\n        this.pageSize = value;\r\n        this.update();\r\n    },\r\n    getPageSize: function () {\r\n        return this.pageSize;\r\n    },\r\n    setTotalCount: function (value) {\r\n        value = parseInt(value);\r\n        if (isNaN(value)) return;\r\n        this.totalCount = value;\r\n        this.update();\r\n    },\r\n    getTotalCount: function () {\r\n        return this.totalCount;\r\n    },\r\n    setSizeList: function (value) {\r\n        if (!mini.isArray(value)) return;\r\n        this.sizeList = value;\r\n        this.update();\r\n    },\r\n    getSizeList: function () {\r\n        return this.sizeList;\r\n    },\r\n\r\n    setShowReloadButton: function (value) {\r\n\r\n    },\r\n    getShowReloadButton: function () {\r\n        return false;\r\n    },\r\n    setShowTotalCount: function(showTotalCount) {\r\n        if(this.showTotalCount !== showTotalCount) {\r\n            this.showTotalCount = showTotalCount;\r\n            this.update();\r\n        }\r\n    },\r\n    getShowTotalCount: function() {\r\n        return this.showTotalCount;\r\n    },\r\n    setShowPageSize: function(showPageSize) {\r\n        if(this.showPageSize !== showPageSize) {\r\n            this.showPageSize = showPageSize;\r\n            this.update();\r\n        }\r\n    },\r\n    getShowPageSize: function() {\r\n        return this.showPageSize;\r\n    },\r\n    setShowPageInfo: function(showPageInfo) {\r\n        this.showPageInfo = showPageInfo;\r\n        this.setShowTotalCount(showPageInfo);\r\n    },\r\n    getShowPageInfo: function() {\r\n        return this.showPageInfo;\r\n    },\r\n    setShowPagerButtonText: function (value) {\r\n    },\r\n    setShowPagerButtonIcon: function (value) {\r\n    },\r\n    setPageSizeWidth: function (value) {\r\n    },\r\n    setShowPageIndex: function (value) {\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Pager.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs,\r\n            [\"onpagechanged\", \"sizeList\", \"onbeforepagechanged\", \"buttons\", \"sizeText\"\r\n                ]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [ \"showPageSize\", \"showTotalCount\",\r\n                ]\r\n        );\r\n        mini._ParseInt(el, attrs,\r\n            [\"pageIndex\", \"pageSize\", \"totalCount\"\r\n                ]\r\n        );\r\n        //        var cs = mini.getChildNodes(el, true);\r\n        //        attrs.body = cs;\r\n\r\n        if (typeof attrs.sizeList == \"string\") {\r\n            attrs.sizeList = window[\"ev\" + \"al\"](attrs.sizeList);\r\n        }\r\n        if (attrs.buttons) {\r\n            attrs.buttons = mini.byId(attrs.buttons);\r\n\r\n        }\r\n\r\n\r\n\r\n        return attrs;\r\n    }\r\n\r\n});\r\n\r\nmini.regClass(mini.Pagination, \"pagination\");\nmini.PanelTip = function() {\r\n    mini.PanelTip.superclass.constructor.apply(this, arguments);\r\n};\r\n\r\nmini.extend(mini.PanelTip, mini.ToolTip, {\r\n\r\n    selector: '.paneltip',\r\n    trigger: 'click',\r\n    uiCls: \"mini-paneltip\",\r\n    url: \"\",\r\n    tplUrl: \"\",\r\n    tpl: \"\",\r\n    cssUrl: \"\",\r\n    defaultTheme: \"light\",\r\n    // 第三方资源路径\r\n    externalSrc: \"\",\r\n\r\n    _create: function() {\r\n        this.el = jQuery('<div class=\"mini-tooltip mini-paneltip\"><div class=\"mini-tooltip-arrow\"></div><i class=\"mini-paneltip-close\"></i><div class=\"mini-tooltip-inner\"></div></div>')[0];\r\n        this.$element = jQuery(this.el);\r\n        this.$close = jQuery('.mini-paneltip-close', this.$element);\r\n        this.$element.appendTo(document.body);\r\n\r\n        this.externalSrc = this.externalSrc || mini.externalSrc;\r\n    },\r\n\r\n    _initEvents: function() {\r\n        var self = this;\r\n        this.$close.on('click', function() {\r\n            self.close();\r\n        });\r\n\r\n        this._bindTooltip();\r\n    },\r\n    _opened: '',\r\n    open: function(target) {\r\n        target = jQuery(target)[0] || this.target;\r\n        var guid = jQuery(target).attr(\"data-guid\");\r\n\r\n        var e = { element: target, data: { guid: guid }, cancel: false };\r\n\r\n        var self = this;\r\n        this.fire(\"beforeopen\", e);\r\n        if (e.cancel) return;\r\n\r\n        this.$element.show();\r\n\r\n        this._target = target;\r\n\r\n        this._getData(e.data, guid);\r\n\r\n        this.fire(\"open\", { element: target });\r\n    },\r\n\r\n    _getData: function(params, openedGuid) {\r\n        var self = this;\r\n        this.showLoading();\r\n        mini.ajax({\r\n            url: this.url,\r\n            data: params,\r\n            async: true,\r\n            success: function(text) {\r\n                var data = mini.decode(text) || '';\r\n\r\n                // 记住当前展示的guid，避免点击同一个时重复请求数据\r\n                self._opened = openedGuid;\r\n\r\n                if (!window.Mustache) {\r\n                    mini.loadJS(self.externalSrc + 'mustache.min.js', function() {\r\n                        self._renderContent(data);\r\n                    });\r\n                } else {\r\n                    self._renderContent(data);\r\n                }\r\n\r\n            }\r\n        });\r\n    },\r\n\r\n    _renderContent: function(data) {\r\n        var html = Mustache.render(this.tpl, data);\r\n\r\n        this.setContent(html);\r\n\r\n        this.$close.removeClass('hidden');\r\n\r\n    },\r\n\r\n    _toggle: function(e) {\r\n        if (this._opened) {\r\n            var $target = jQuery(e.currentTarget);\r\n            var guid = $target.attr(\"data-guid\");\r\n\r\n            if (guid === this._opened) {\r\n                this.applyPlacement();\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.close();\r\n        this._enter(e);\r\n    },\r\n    _leave: function (e) {\r\n        // 鼠标移开时不自动隐藏\r\n        clearTimeout(this.openTimer);\r\n    },\r\n\r\n    showLoading: function() {\r\n        this.setContent('<div class=\"mini-tooltip-loading\"></div>');\r\n        this.$close.addClass('hidden');\r\n    },\r\n    close: function() {\r\n        this._target = null;\r\n        this.$element.hide();\r\n        this._opened = '';\r\n    },\r\n    setTplUrl: function(tplUrl) {\r\n        this.tplUrl = tplUrl;\r\n\r\n        this.tpl = jQuery.trim(mini.loadText(tplUrl));\r\n    },\r\n\r\n    setCssUrl: function(cssUrl) {\r\n        this.cssUrl = cssUrl;\r\n\r\n        mini.loadCSS(cssUrl);\r\n    },\r\n\r\n    ///////////////////////////////////////////////\r\n    getAttrs: function(el) {\r\n        var attrs = mini.PanelTip.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs, ['trigger']);\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.PanelTip, \"paneltip\");\nmini.Repeat = function(){\r\n\tmini.Repeat.superclass.constructor.call(this);\r\n};\r\n\r\nmini.extend(mini.Repeat, mini.ListControl, {\r\n\t// 模板选择器\r\n\ttemplateId: \"\",\r\n\ttemplateUrl: \"\",\r\n\turl: \"\",\r\n\t// 第三方资源的路径，默认为全局配置mini.externalSrc的值\r\n    externalSrc: '',\r\n\tuiCls: \"mini-repeat\",\r\n\t\r\n\t_create: function(){\r\n\t\tthis.el = document.createElement(\"div\");\r\n\t\t\r\n\t\tthis.externalSrc = this.externalSrc || mini.externalSrc;\r\n\t},\r\n\t\r\n\tsetTemplateUrl: function(url){\r\n\t\tthis.templateUrl = url;\r\n\t\t\r\n\t\tvar xhr = jQuery.ajax({\r\n\t    \turl: url,\r\n\t    \tasync: false\r\n\t    });\r\n\t\t\r\n\t\tvar that = this;\r\n\t\txhr.done(function(html){\r\n\t\t\tthat.template = jQuery.trim(html);\r\n\t\t}).fail(function(jqXHR, textStatus, errorThrown){\r\n\t\t\tthrow new Error(\"template not found\");\r\n\t\t});\r\n\t},\r\n\t\r\n\tgetTemplateUrl: function(){\r\n\t\treturn this.templateUrl;\r\n\t},\r\n\t\r\n\tsetTemplateId: function(id){\r\n\t\tthis.templateId = id;\r\n\t\t\r\n\t\tvar tpl = document.getElementById(id);\r\n\t\t\r\n\t\tif(tpl){\r\n\t\t\tthis.template = jQuery.trim(tpl.innerHTML);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"template not found\");\r\n\t\t}\r\n\t\t\r\n\t},\r\n\t\r\n\tgetTemplateId: function(){\r\n\t\treturn this.templateId;\r\n\t},\r\n\t\r\n\tsetData: function(data){\r\n\t\tthis.data = data || [];\r\n\r\n\t\tif(this.template){\r\n\t\t\tvar that = this;\r\n\t\t\tif(!window.Mustache) {\r\n\t\t\t\tmini.loadJS(this.externalSrc + 'mustache.min.js', function() {\r\n                    that._renderHtml();\r\n                });\r\n\t\t\t} else {\r\n\t\t\t\tthis._renderHtml();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"template not init\");\r\n\t\t}\r\n\t},\r\n\r\n\t_renderHtml: function(){\r\n\t\tvar controlData = this.data.control,\r\n\t\t\tdata = this.data.template || this.data;\r\n\t\t\t\r\n\t\t\tvar html = [], \r\n\t\t\t\ti, len;\r\n\t\t\tfor(i = 0, len = data.length; i < len; i++){\r\n\t\t\t\thtml.push(Mustache.render(this.template, data[i]));\r\n\t\t\t}\r\n\t\t\tthis.el.innerHTML = html.join('');\r\n\t\t\t\r\n\t\t\tmini.parse(this.el);\r\n\t\t\t\r\n\t\t\tif(controlData) {\r\n\t\t\t\tif (!mini.isArray(controlData)) controlData = [];\r\n\t\t\t\tvar item, control;\r\n\t\t\t\tfor(i = 0, len = controlData.length; i < len; i++) {\r\n\t\t\t\t\titem = controlData[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor(var id in item){\r\n\t\t\t\t\t\tcontrol = mini.get(id, this.el);\r\n\t\t\t    \t\tif(control && item[id]){\r\n\t\t\t    \t\t\tif(item[id].data){\r\n\t\t\t    \t\t\t\tif(control.loadList) {\r\n\t\t\t    \t\t\t\t\tcontrol.loadList(item[id].data);\r\n\t\t\t    \t\t\t\t} else if(control.setData){\r\n\t\t\t    \t\t\t\t\tcontrol.setData(item[id].data);\r\n\t\t\t    \t\t\t\t\t\r\n\t\t\t    \t\t\t\t\tif(item[id].total && control.setTotalCount) {\r\n\t\t\t    \t\t\t\t\t\tcontrol.setTotalCount(item[id].total);\r\n\t\t\t    \t\t\t\t\t}\r\n\t\t\t    \t\t\t\t}\r\n\t\t\t    \t\t\t}\r\n\t\t\t    \t\t\tif(typeof item[id] != 'object' && control.setValue){\r\n\t\t\t    \t\t\t\tcontrol.setValue(item[id]);\r\n\t\t\t    \t\t\t}\r\n\t\t\t    \t\t\tif(item[id].value && control.setValue){\r\n\t\t\t    \t\t\t\tcontrol.setValue(item[id].value);\r\n\t\t\t    \t\t\t}\r\n\t\t\t    \t\t}\r\n\t\t\t    \t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t},\r\n\t\r\n\tgetAttrs: function(el) {\r\n        var attrs = mini.Repeat.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs, [\"templateId\", \"templateUrl\"]);\r\n\r\n        return attrs;\r\n    }\r\n\t\r\n});\r\n\r\nmini.regClass(mini.Repeat, \"repeat\");\nmini.SlideWindow = function() {\r\n    mini.SlideWindow.superclass.constructor.apply(this, arguments);\r\n\r\n    this.setAllowDrag(false);\r\n    this.setAllowResize(false);\r\n};\r\nmini.extend(mini.SlideWindow, mini.Window, {\r\n    uiCls: 'mini-slidewindow',\r\n    iconCls: '',\r\n    iconStyle: '',\r\n    duration: 200,\r\n    visible: false,\r\n\r\n    x: 0,\r\n    y: 0,\r\n    showModal: false,\r\n    allowResize: false,\r\n\r\n    // 页面可见性\r\n    pageVisibility: (function() {\r\n        var prefixSupport,\r\n            keyWithPrefix = function(prefix, key) {\r\n                if (prefix !== '') {\r\n                    // 首字母大写\r\n                    return prefix + key.slice(0, 1).toUpperCase() + key.slice(1);\r\n                }\r\n                return key;\r\n            };\r\n        var isPageVisibilitySupport = (function() {\r\n            var support = false;\r\n            if (typeof window.screenX === 'number') {\r\n                ['webkit', 'moz', 'ms', 'o', ''].forEach(function(prefix) {\r\n                    if (support == false && document[keyWithPrefix(prefix, 'hidden')] != undefined) {\r\n                        prefixSupport = prefix;\r\n                        support = true;\r\n                    }\r\n                });\r\n            }\r\n            return support;\r\n        })();\r\n\r\n        var isHidden = function() {\r\n            if (isPageVisibilitySupport) {\r\n                return document[keyWithPrefix(prefixSupport, 'hidden')];\r\n            }\r\n            return undefined;\r\n        };\r\n\r\n        var visibilityState = function() {\r\n            if (isPageVisibilitySupport) {\r\n                return document[keyWithPrefix(prefixSupport, 'visibilityState')];\r\n            }\r\n            return undefined;\r\n        };\r\n\r\n        return {\r\n            isSupport: isPageVisibilitySupport,\r\n            hidden: isHidden(),\r\n            visibilityState: visibilityState(),\r\n            getVisibilityState: visibilityState,\r\n            eventName: isPageVisibilitySupport ? prefixSupport + 'visibilitychange' : '',\r\n            visibilitychange: function(fn, usecapture) {\r\n                usecapture = undefined || false;\r\n                if (isPageVisibilitySupport && typeof fn === 'function') {\r\n                    return document.addEventListener(\r\n                        prefixSupport + 'visibilitychange',\r\n                        function(evt) {\r\n                            this.hidden = isHidden();\r\n                            this.visibilityState = visibilityState();\r\n                            fn.call(this, evt);\r\n                        }.bind(this),\r\n                        usecapture\r\n                    );\r\n                }\r\n                return undefined;\r\n            }\r\n        };\r\n    })(undefined),\r\n\r\n    _create: function() {\r\n        mini.SlideWindow.superclass._create.call(this);\r\n\r\n        // 右侧没有按钮 去掉边距\r\n        this._titleEl.style.paddingRight = '0';\r\n        // 确保没有 icon\r\n        this.iconCls = this.iconStyle = '';\r\n        this.setDuration(this.duration);\r\n    },\r\n    // 打开url 则关闭对应销毁 应先滑出 再销毁\r\n    destroy: function() {\r\n        var that = this;\r\n        this.hide().then(function() {\r\n            that._destroy();\r\n        });\r\n    },\r\n    _destroy: function() {\r\n        if (this.pageVisibility.isSupport) {\r\n            jQuery(document).off(this.pageVisibility.eventName + '.' + this._id);\r\n        }\r\n        mini.un(this.el, 'mouseover', this.__OnMouseOver, this);\r\n        mini.un(window, 'resize', this.__OnWindowResize, this);\r\n        mini.Window.superclass.destroy.call(this);\r\n    },\r\n    setDuration: function(duration) {\r\n        if (!$.isNumeric(duration)) {\r\n            return false;\r\n        }\r\n        this.duration = duration;\r\n        var t = this.duration / 1000 + 's';\r\n        jQuery(this.el).css({\r\n            '-webkit-transition-duration': t,\r\n            '-moz-transition-duration': t,\r\n            '-ms-transition-duration': t,\r\n            '-o-transition-duration': t,\r\n            'transition-duration': t\r\n        });\r\n    },\r\n    getDuration: function() {\r\n        return this.duration;\r\n    },\r\n    _initEvents: function() {\r\n        var that = this;\r\n        // Window 上 绑定的有的事件不需要 因此直接采用panel上的即可\r\n        mini.Window.superclass._initEvents.call(this);\r\n\r\n        mini._BindEvents(function() {\r\n            // container 上的 over\r\n            mini.on(this.el, 'mouseover', this.__OnMouseOver, this);\r\n            // resize 记录窗口大小\r\n            mini.on(window, 'resize', this.__OnWindowResize, this);\r\n        }, this);\r\n\r\n        // 支持则在展示时 layout\r\n        if (this.pageVisibility.isSupport) {\r\n            jQuery(document).on(this.pageVisibility.eventName + '.' + this._id, function(e) {\r\n                var state = that.pageVisibility.getVisibilityState();\r\n                if (state === 'visible') {\r\n                    that.doLayout();\r\n                }\r\n            });\r\n        }\r\n    },\r\n    __OnWindowResize: function() {\r\n        var that = this;\r\n        // 页面可见时才需要处理\r\n        if (!this.pageVisibility.isSupport || this.pageVisibility.getVisibilityState() === 'visible') {\r\n            // 页面可见的情况下 resize 记录大小\r\n            this.__showWidth = jQuery(window).width();\r\n            this.__showHeight = jQuery(window).height();\r\n\r\n            // 如果在显示则 doLayout\r\n            if (this.isDisplay()) {\r\n                clearTimeout(this.__resizeTimer);\r\n                this.__resizeTimer = setTimeout(function() {\r\n                    that.doLayout();\r\n                }, 20);\r\n            }\r\n        }\r\n    },\r\n    _initButtons: function() {\r\n        this.buttons = [];\r\n        var close = this.createButton({ name: 'close', cls: 'mini-tools-back icon-left', visible: this.showCloseButton });\r\n        this.buttons.push(close);\r\n    },\r\n    doLayout: function() {\r\n        if (!this.canLayout()) return false;\r\n\r\n        mini.setSize(this.el, this.__showWidth, this.__showHeight);\r\n        mini.Window.superclass.doLayout.call(this);\r\n    },\r\n    show: function() {\r\n        var containerEl = document.body;\r\n        if (!this.isRender()) {\r\n            this.render(containerEl);\r\n        }\r\n        var w = this.__showWidth || jQuery(window).width();\r\n        var h = this.__showHeight || jQuery(window).height();\r\n\r\n        var $el = jQuery(this.el);\r\n        $el.css({\r\n            'z-index': mini.getMaxZIndex(),\r\n            position: 'fixed',\r\n            width: w,\r\n            height: h,\r\n            top: 0,\r\n            left: 0\r\n        }).show();\r\n\r\n        this.setVisible(true);\r\n        if (mini.isIE8 || mini.isIE9) {\r\n            this.doLayout();\r\n        } else {\r\n            clearTimeout(this.__hideTimer);\r\n            clearTimeout(this.__showTimer);\r\n            this.__showTimer = setTimeout(function() {\r\n                $el.addClass('show');\r\n            });\r\n        }\r\n    },\r\n    showAtEl: function() {\r\n        this.show();\r\n    },\r\n    showAtPos: function() {\r\n        this.show();\r\n    },\r\n    hide: function() {\r\n        var dtd = $.Deferred();\r\n        var that = this;\r\n        var $el = jQuery(this.el);\r\n        if (mini.isIE8 || mini.isIE9) {\r\n            that.setVisible(false);\r\n            dtd.resolve();\r\n        } else {\r\n            clearTimeout(this.__hideTimer);\r\n            clearTimeout(this.__showTimer);\r\n            $el.removeClass('show');\r\n            this.__hideTimer = setTimeout(function() {\r\n                that.setVisible(false);\r\n                dtd.resolve();\r\n            }, this.duration);\r\n        }\r\n        return dtd.promise();\r\n    },\r\n    max: function() {},\r\n    restore: function() {}\r\n});\r\n\r\nmini.regClass(mini.SlideWindow, 'slidewindow');\r\n\nmini.Slider = function () {\r\n    mini.Slider.superclass.constructor.call(this);\r\n};\r\nmini.extend(mini.Slider, mini.Control, {\r\n    uiCls: \"mini-slider\",\r\n\r\n    width: \"200px\",\r\n\r\n    formField: true,\r\n\r\n    minValue: 0,\r\n    maxValue: 100,\r\n    step: 1,\r\n    precision: 0,\r\n    showTooltip: true,\r\n\r\n    set: function(kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var value = kv.value;\r\n        delete kv.value;\r\n\r\n        mini.Slider.superclass.set.call(this, kv);\r\n\r\n        // setValue 需要其他属性来计算滑块位置，所以必须放在最后\r\n        if(!mini.isNull(value)) {\r\n            this.setValue(value);\r\n        }\r\n\r\n    },\r\n\r\n    _create: function () {\r\n        this.el = document.createElement(\"div\");\r\n        this.el.className = \"mini-slider\";\r\n\r\n        this.el.innerHTML = '<div class=\"mini-slider-runway\"><div class=\"mini-slider-bar\"></div><div class=\"mini-slider-pointer\"></div></div>';\r\n\r\n        this.runway = this.el.firstChild;\r\n        this.bar = this.runway.firstChild;\r\n        this.pointer = this.runway.lastChild;\r\n    },\r\n\r\n    _initEvents: function () {\r\n        var that = this,\r\n            oldValue,\r\n            newValue;\r\n\r\n        function handleMouseDown() {\r\n            oldValue = that.value;\r\n            $(window).on('mousemove', handleChange);\r\n            $(window).on('mouseup', handleChange);\r\n            $(window).on('mouseup', handleMouseUp);\r\n        }\r\n\r\n        function handleMouseUp() {\r\n            newValue = that.value;\r\n            $(window).off('mousemove', handleChange);\r\n            $(window).off('mouseup', handleChange);\r\n            $(window).off('mouseup', handleMouseUp);\r\n\r\n            if(oldValue != newValue) {\r\n                that.fire('valuechanged', {\r\n                    value: newValue,\r\n                    oldValue: oldValue\r\n                });\r\n            }\r\n            \r\n        }\r\n\r\n        function handleChange(e) {\r\n            that._handleChange(e);\r\n        }\r\n        $(this.el).on('mousedown', handleMouseDown);\r\n    },\r\n\r\n    _afterApply: function() {\r\n        if(this.showTooltip) {\r\n            this.toolTip = new mini.ToolTip();\r\n\r\n            this.toolTip.set({\r\n                target: document,\r\n                scope: this.el,\r\n                selector: '[data-tooltip]',\r\n                placement: 'top'\r\n            });\r\n            \r\n            this.toolTip.on('beforeopen', this._onBeforeShowToolTip, this);\r\n        }\r\n    },\r\n    _onBeforeShowToolTip: function(e) {\r\n        var event = {\r\n            content: e.content\r\n        };\r\n        this.fire('beforeshowtooltip', event);\r\n\r\n        e.content = event.content;\r\n    },\r\n    _handleChange: function (e) {\r\n        e.preventDefault && e.preventDefault();\r\n\r\n        function clamp(value, min, max) {\r\n            var dx = value - min;\r\n            var dy = max - value;\r\n            if (dx >= 0 && dy >= 0) {\r\n                return value;\r\n            }\r\n            if (Math.abs(dx) >= Math.abs(dy)) {\r\n                return max;\r\n            }\r\n            return min;\r\n        }\r\n\r\n        var container = this.el;\r\n        var containerWidth = container.clientWidth;\r\n        // var containerHeight = container.clientHeight;\r\n\r\n        var rect = container.getBoundingClientRect();\r\n        var xOffset = rect.left + window.pageXOffset;\r\n        // var yOffset = rect.top + window.pageYOffset;\r\n        var pageX = e.pageX || (e.touches ? e.touches[0].pageX : 0);\r\n        // var pageY = e.pageY || (e.touches ? e.touches[0].pageY : 0);\r\n        var left = clamp(pageX - xOffset, 0, containerWidth);\r\n        // var top = clamp(pageY - yOffset, 0, containerHeight);\r\n\r\n        var v, percent, lengthPerStep, steps, event;\r\n\r\n        if (left <= 0) {\r\n            percent = 0;\r\n            v = this.minValue;\r\n        } else if (left >= containerWidth) {\r\n            percent = 100;\r\n            v = this.maxValue;\r\n        } else {\r\n            percent = (left * 100) / containerWidth;\r\n\r\n            lengthPerStep = 100 / ((this.maxValue - this.minValue) / this.step);\r\n            steps = Math.round(percent / lengthPerStep);\r\n            v = steps * lengthPerStep * (this.maxValue - this.minValue) * 0.01 + this.minValue;\r\n            v = parseFloat(v.toFixed(this.precision));\r\n        }\r\n        this.setValue(v, percent);\r\n\r\n        if(this.showTooltip) {\r\n            event = {\r\n                content: v\r\n            };\r\n            this.fire('beforeshowtooltip', event);\r\n            this.toolTip.setContent(event.content);\r\n        }\r\n    },\r\n    setPosition: function (percent) {\r\n        this.bar.style.width = percent + '%';\r\n        this.pointer.style.left = percent + '%';\r\n\r\n    },\r\n\r\n    setValue: function (value, percent) {\r\n        value = parseFloat(value);\r\n        if (isNaN(value)) {\r\n            value = this.minValue;\r\n        }\r\n\r\n        if (this.precisions >= 0) {\r\n            value = value.toFixed(this.precisions);\r\n        }\r\n\r\n        if (value > this.maxValue) {\r\n            value = this.maxValue;\r\n        } else if (value < this.minValue) {\r\n            value = this.minValue;\r\n        }\r\n        if (this.value != value) {\r\n            this.value = value;\r\n\r\n            percent = mini.isNumber(percent) ? percent : (value - this.minValue) / (this.maxValue - this.minValue) * 100;\r\n\r\n            this.setPosition(percent);\r\n            \r\n            if(this.showTooltip) {\r\n                this.pointer.setAttribute('data-tooltip', value);\r\n            }\r\n\r\n        }\r\n    },\r\n    getValue: function() {\r\n        return this.value;\r\n    },\r\n    setMaxValue: function (value) {\r\n        value = parseFloat(value);\r\n        if (isNaN(value)) return;\r\n        value = parseFloat(value);\r\n        if (this.maxValue != value) {\r\n            this.maxValue = value;\r\n\r\n            this._ValueLimit();\r\n        }\r\n    },\r\n    getMaxValue: function (value) {\r\n        return this.maxValue;\r\n    },\r\n    setMinValue: function (value) {\r\n        value = parseFloat(value);\r\n        if (isNaN(value)) return;\r\n        value = parseFloat(value);\r\n        if (this.minValue != value) {\r\n            this.minValue = value;\r\n\r\n            this._ValueLimit();\r\n        }\r\n    },\r\n    getMinValue: function () {\r\n        return this.minValue;\r\n    },\r\n    setStep: function (value) {\r\n        value = parseFloat(value);\r\n        if (isNaN(value)) return;\r\n        if (this.step != value) {\r\n            this.step = value;\r\n\r\n            this._adjustPrecision();\r\n        }\r\n    },\r\n    getStep: function () {\r\n        return this.step;\r\n    },\r\n\r\n    _ValueLimit: function () {\r\n        if (this.minValue > this.maxValue) {\r\n            this.maxValue = this.minValue + 100;\r\n        }\r\n        if (this.value < this.minValue) {\r\n            this.setValue(this.minValue);\r\n        }\r\n        if (this.value > this.maxValue) {\r\n            this.setValue(this.maxValue);\r\n        }\r\n\r\n        this._adjustPrecision();\r\n    },\r\n\r\n    _adjustPrecision: function () {\r\n        var precisions = [this.minValue, this.maxValue, this.step].map(function (item) {\r\n            var decimal = ('' + item).split('.')[1];\r\n            return decimal ? decimal.length : 0;\r\n        });\r\n        this.precision = Math.max.apply(null, precisions);\r\n    },\r\n    getAttrs: function (el) {\r\n        var attrs = mini.Slider.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs, [\"maxValue\", \"minValue\", \"step\", \"onvaluechanged\", \"onbeforeshowtooltip\"]);\r\n\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.Slider, \"slider\");\n/* global mini */\r\n/**\r\n * TabsTreeSelect\r\n * @class\r\n * @extends mini.Control\r\n * @constructor\r\n */\r\nmini.TabsTreeSelect = function () {\r\n\r\n    mini.TabsTreeSelect.superclass.constructor.call(this);\r\n\r\n};\r\n\r\nmini.extend(mini.TabsTreeSelect, mini.ValidatorBase, {\r\n    text: \"\",\r\n    value: \"\",\r\n    width: 660,\r\n    height: 353,\r\n    expandOnLoad: false,\r\n    expandOnNodeClick: true,\r\n    idField: \"id\",\r\n    textField: \"text\",\r\n    nodesField: \"children\",\r\n    url: \"\",\r\n    filterUrl: \"\",\r\n    filterMode: \"\",\r\n    autoLoad: true,\r\n    data: [],\r\n    tabsConfig: [],\r\n    tabKeys: [],\r\n    showTreeIcon: true,\r\n    showTreeLines: true,\r\n    resultAsTree: true,\r\n    showFolderCheckBox: true,\r\n    // 选中节点时是否自动加载子节点\r\n    loadChildWhenChecked: true,\r\n    parentField: \"pid\",\r\n    // 是否只能选择叶子节点\r\n    canCheckParent: false,\r\n    checkRecursive: true,\r\n    autoCheckParent: false,\r\n    checkOnTextClick: true,\r\n\r\n    // 是否显示已选的计数\r\n    showSelectedCount: true,\r\n\r\n    // 是否显示一键排序\r\n    showSort: false,\r\n\r\n    selectedPanelTitle: \"已选人员\",\r\n\r\n    delimiter: ',',\r\n\r\n    showFullPath: false,\r\n    includeRootNode: false,\r\n\r\n    showBorder: false,\r\n\r\n    uiCls: \"mini-tabstreeselect\",\r\n\r\n    set: function (options) {\r\n        if (typeof options == \"string\") {\r\n            return this;\r\n        }\r\n\r\n        var value = options.value;\r\n        delete options.value;\r\n        var text = options.text;\r\n        delete options.text;\r\n        var data = options.data;\r\n        delete options.data;\r\n        var showBorder = options.showBorder;\r\n        delete options.showBorder;\r\n        var tabs = options.tabs;\r\n        delete options.tabs;\r\n        var url = options.url;\r\n        delete options.url;\r\n        var filterUrl = options.filterUrl;\r\n        delete options.filterUrl;\r\n        var filterMode = options.filterMode;\r\n        delete options.filterMode;\r\n        var autoLoad = options.autoLoad;\r\n        delete options.autoLoad;\r\n        var showFullPath = options.showFullPath;\r\n        delete options.showFullPath;\r\n        var includeRootNode = options.includeRootNode;\r\n        delete options.includeRootNode;\r\n\r\n        var showSort = options.showSort;\r\n        delete options.showSort;\r\n        // var textField = options.textField;\r\n        // delete options.textField;\r\n        // var idField = options.idField;\r\n        // delete options.idField;\r\n        // var nodesField = options.nodesField;\r\n        // delete options.nodesField;\r\n\r\n        mini.TabsTreeSelect.superclass.set.call(this, options);\r\n\r\n        if (!mini.isNull(autoLoad)) {\r\n            this.setAutoLoad(autoLoad);\r\n        }\r\n        if (!mini.isNull(url)) {\r\n            this.setUrl(url);\r\n        }\r\n        if (!mini.isNull(tabs)) {\r\n            this.setTabs(tabs, this.autoLoad);\r\n        }\r\n        if (!mini.isNull(data)) {\r\n            this.setData(data);\r\n        }\r\n        if (!mini.isNull(value)) {\r\n            this.setValue(value);\r\n        }\r\n        if (!mini.isNull(text)) {\r\n            this.setText(text);\r\n        }\r\n        if (!mini.isNull(filterUrl)) {\r\n            this.setFilterUrl(filterUrl);\r\n        }\r\n        if (!mini.isNull(filterMode)) {\r\n            this.setFilterMode(filterMode);\r\n        }\r\n        if (!mini.isNull(showFullPath)) {\r\n            this.showFullPath = showFullPath;\r\n\r\n            this.tree.showFullPath = showFullPath;\r\n        }\r\n        if (!mini.isNull(includeRootNode)) {\r\n            this.includeRootNode = includeRootNode;\r\n\r\n            this.tree.includeRootNode = includeRootNode;\r\n        }\r\n\r\n        if (showBorder) {\r\n            this.el.style.borderWidth = \"1px\";\r\n        }\r\n\r\n\r\n        if(showSort) {\r\n            this.showSort = showSort;\r\n        } else {\r\n            this._buttons.removeChild(this.sortBtn);\r\n        }\r\n\r\n        // if (!mini.isNull(textField)) {\r\n        //     this.setTextField(textField);\r\n        // }\r\n        // if (!mini.isNull(idField)) {\r\n        //     this.setIdField(idField);\r\n        // }\r\n        // if (!mini.isNull(nodesField)) {\r\n        //     this.setNodesField(nodesField);\r\n        // }\r\n\r\n        return this;\r\n    },\r\n\r\n    // 用于操作的title提示\r\n    actionTitles: {\r\n        sort: '一键排序',\r\n        top: '置顶',\r\n        bottom: '置底',\r\n        remove: '删除',\r\n        removeall: '删除全部',\r\n        recover: '回到初始状态'\r\n    },\r\n\r\n    sortTitles: {\r\n        none: '一键排序',\r\n        asc: '正序',\r\n        desc: '倒序'\r\n    },\r\n\r\n    // 用于生成 上移、下移、全部删除、删除等 操作元素\r\n    _getActionBtn: function (action, disabled) {\r\n        var span = document.createElement('span');\r\n\r\n        span.className = 'mini-tabstreeselect-action mini-icon ' + action + (action === 'sort' ? ' none' : '') + (disabled ? ' disabled' : '');\r\n        span.title = this.actionTitles[action];\r\n\r\n        return span;\r\n    },\r\n\r\n    _create: function () {\r\n        this.el = document.createElement('div');\r\n        this.el.className = 'mini-tabstreeselect';\r\n        // this.el.innerHTML = '<div class=\"mini-tabstreeselect-left\"><div class=\"mini-tabstreeselect-header\"></div><div class=\"mini-tabstreeselect-content\"></div></div><div class=\"mini-tabstreeselect-right\"><div class=\"mini-tabstreeselect-header\"><span class=\"mini-tabstreeselect-header-title\">' + this.selectedPanelTitle + '</span></div><div class=\"mini-tabstreeselect-content\"></div></div>';\r\n\r\n        this.el.innerHTML = '<div class=\"mini-tabstreeselect-left\"><div class=\"mini-tabstreeselect-header\"></div><div class=\"mini-tabstreeselect-content\"></div></div><div class=\"mini-tabstreeselect-right\"><div class=\"mini-tabstreeselect-header\"><div class=\"mini-tabstreeselect-header-main\"><span class=\"mini-tabstreeselect-header-title\">' + this.selectedPanelTitle + '</span><span class=\"mini-tabstreeselect-header-count hidden\"></span></div></div><div class=\"mini-tabstreeselect-content\"></div></div>';\r\n\r\n        this._leftPanel = this.el.firstChild;\r\n        this._rightPanel = this.el.lastChild;\r\n\r\n        this._leftHeader = this._leftPanel.firstChild;\r\n        this._rightHeader = this._rightPanel.firstChild.firstChild;\r\n        this._rightTitle = this._rightHeader.firstChild;\r\n        this._rightCount = this._rightHeader.lastChild;\r\n\r\n        this._leftHeader.innerHTML = '<ul class=\"mini-tabstreeselect-tabs clearfix\"></ul>';\r\n        this._tabs = this._leftHeader.firstChild;\r\n\r\n        this._leftContent = this._leftPanel.lastChild;\r\n        this._rightContent = this._rightPanel.lastChild;\r\n\r\n        this.dimensionComboBox = new mini.ComboBox();\r\n        this.dimensionComboBox.on('valuechanged', this.__onDimensionChanged, this);\r\n\r\n        this.dimensionComboBox.render(this._leftContent);\r\n        this.dimensionComboBox.hide();\r\n\r\n        this.tree = new mini.FilterTree();\r\n\r\n        this.tree.setShowTreeIcon(true);\r\n        this.tree.setStyle(\"border:0;width:100%;height:100%;overflow:hidden;\");\r\n        this.tree.setResultAsTree(this.resultAsTree);\r\n        this.tree.setCheckRecursive(this.checkRecursive);\r\n        this.tree.setShowCheckBox(true);\r\n        this.tree.setShowFolderCheckBox(this.showFolderCheckBox);\r\n        this.tree.setExpandOnNodeClick(this.expandOnNodeClick);\r\n        this.tree.setCheckOnTextClick(this.checkOnTextClick);\r\n        this.tree.setAutoLoad(true);\r\n        this.tree.on(\"load\", this.__OnLoad, this);\r\n        this.tree.on(\"nodeclick\", this.__OnNodeClick, this);\r\n        this.tree.on(\"nodecheck\", this.__OnCheckedChanged, this);\r\n        this.tree.on(\"expand\", this.__OnTreeExpand, this);\r\n        this.tree.on(\"collapse\", this.__OnTreeCollapse, this);\r\n        this.tree.on(\"beforenodecheck\", this.__OnTreeBeforeNodeCheck, this);\r\n        this.tree.on(\"beforenodeselect\", this.__OnTreeBeforeNodeSelect, this);\r\n        this.tree.on(\"drawnode\", this.__OnDrawNode, this);\r\n        this.tree.on(\"loadnode\", this.__OnLoadNode, this);\r\n        this.tree.on(\"beforeload\", this.__OnBeforeLoad, this);\r\n        this.tree.on(\"filter\", this.__OnFilter, this);\r\n\r\n        this.tree.useAnimation = true;\r\n\r\n        this.tree.render(this._leftContent);\r\n\r\n        this._rightContent.innerHTML = '<div class=\"mini-tabstreeselect-buttons\"></div><ul class=\"mini-tabstreeselect-list\"></ul>';\r\n        this._buttons = this._rightContent.firstChild;\r\n        this._selectList = this._rightContent.lastChild;\r\n\r\n        // 上移、下移、删除全部 dom\r\n        // this._buttons.appendChild(this.upBtn = this._getActionBtn('up', true));\r\n        // this._buttons.appendChild(this.downBtn = this._getActionBtn('down', true));\r\n        // this._buttons.appendChild(this.removeallBtn = this._getActionBtn('removeall'));\r\n        // this._buttons.appendChild(this.recoverBtn = this._getActionBtn('recover'));\r\n\r\n        // 右侧顶部操作按钮\r\n        this._buttons.appendChild(this.sortBtn = this._getActionBtn('sort'));\r\n        this._buttons.appendChild(this.topBtn = this._getActionBtn('top', true));\r\n        this._buttons.appendChild(this.bottomBtn = this._getActionBtn('bottom', true));\r\n        this._buttons.appendChild(this.recoverBtn = this._getActionBtn('recover'));\r\n        this._buttons.appendChild(this.removeallBtn = this._getActionBtn('removeall'));\r\n\r\n        this.selectNodes = {};\r\n        // 右侧头部显示已选人数\r\n        // 更改的地方比较多，容易与实际选择的个数不一致，该参数废除，直接统计右侧列表的个数\r\n        this.selectedCount = 0;\r\n\r\n        this._listItemTempl = '<li class=\"mini-tabstreeselect-item\" guid=\"{{value}}\"><span class=\"item-name\" title=\"{{name}}\">{{name}}</span><i class=\"mini-tabstreeselect-action mini-icon remove\" title=\"' + this.actionTitles['remove'] + '\"></i></li>';\r\n\r\n        this.bindEvents();\r\n    },\r\n    __OnDrawNode: function (evt) {\r\n        this.fire(\"drawnode\", evt);\r\n    },\r\n    __OnTreeBeforeNodeCheck: function (evt) {\r\n        evt.tree = evt.sender;\r\n        this.fire(\"beforenodecheck\", evt);\r\n    },\r\n    __OnTreeBeforeNodeSelect: function (evt) {\r\n        evt.tree = evt.sender;\r\n        this.fire(\"beforenodeselect\", evt);\r\n    },\r\n    __OnTreeExpand: function (evt) {\r\n        this.fire(\"treeexpand\", evt);\r\n    },\r\n    __OnTreeCollapse: function (evt) {\r\n        this.fire(\"treecollapse\", evt);\r\n    },\r\n    __OnNodeClick: function (evt) {\r\n        this.fire(\"nodeclick\", {\r\n            node: evt.node\r\n        });\r\n    },\r\n    __OnBeforeLoad: function (evt) {\r\n        this.fire('beforeload', evt);\r\n    },\r\n    __OnCheckedChanged: function (evt) {\r\n        var node = evt.node;\r\n        if (node.checked) {\r\n            this._addNode(node);\r\n        } else {\r\n            this._removeNode(node);\r\n        }\r\n    },\r\n\r\n    __OnLoadNode: function (evt) {\r\n        var node = evt.node,\r\n            idField = this.idField,\r\n            tree = this.tree,\r\n            selectNodes = this.selectNodes;\r\n\r\n        tree.eachChild(node, function (child) {\r\n            if (selectNodes[child[idField]]) {\r\n                tree.checkNode(child);\r\n            } else {\r\n                if (child.checked && !child.isLeaf) {\r\n                    tree.checkNode(child);\r\n                } else {\r\n                    tree.uncheckNode(child);\r\n                }\r\n            }\r\n        });\r\n\r\n        // 解决懒加载下，展开节点后，父节点由于有子节点勾选而被勾选问题\r\n        if(node.checked && !this.checkRecursive && !selectNodes[node[idField]]) {\r\n             this.tree.uncheckNode(node);\r\n        }\r\n        // if (node.checked) {\r\n        //     // this._addNode(node);\r\n        //     this.tree._dataSource._doUpdateLoadedCheckedNodes();\r\n\r\n        // } else if (!this.canCheckParent && this.checkRecursive) {\r\n        //     var allChildChecked = true;\r\n        //     this.tree.eachChild(node, function (child) {\r\n        //         if (!child.checked) {\r\n        //             allChildChecked = false;\r\n        //             return false;\r\n        //         }\r\n        //     });\r\n\r\n        //     allChildChecked && this.tree.checkNode(node);\r\n        // }\r\n\r\n    },\r\n    __OnLoad: function (evt) {\r\n        this.fire(\"load\", evt);\r\n    },\r\n\r\n    __OnFilter: function(e){\r\n        // 搜索时需要记住当前tab的搜索关键字\r\n\r\n        // var key = e.sender._filterKey;\r\n\r\n        // this.tabsConfig[this._activeTabIndex].filterKey = key;\r\n\r\n        // 由于后台返回的数据中check状态可能不准，需要前台自己重新处理一遍树节点的check状态\r\n        this.tree.uncheckAllNodes();\r\n\r\n        var valueArr = this.getValue().split(',');\r\n\r\n        for (var i = 0, len = valueArr.length; i < len; i++) {\r\n            var node = this.tree.getNode(valueArr[i]);\r\n\r\n            if (node) {\r\n                this.tree.checkNode(node);\r\n            }\r\n        }\r\n    },\r\n    __onDimensionChanged: function(e) {\r\n        var activeTabCfg = this.tabsConfig[this._activeTabIndex],\r\n            activeTabKey = this.tabKeys[this._activeTabIndex],\r\n            url = activeTabCfg.url + ('&dimension=' + e.value),\r\n            filterUrl = activeTabCfg.filterUrl,\r\n            filterKey = this.tree._filterInput.getValue();\r\n\r\n        if (filterUrl) {\r\n            this.tree.setFilterUrl(filterUrl + ('&dimension=' + e.value));\r\n        }\r\n\r\n        this._setLastDimensionValue(activeTabKey, e.value);\r\n\r\n        var needFilter = filterKey && this.tree.filterMode === 'server';\r\n\r\n        if(needFilter) {\r\n            this.tree.setAutoLoad(false);\r\n            this.tree.setUrl(url);\r\n            this.treeUrl = url;\r\n\r\n            this.tree._doFilter(filterKey);\r\n        } else {\r\n            // setUrl方法会先执行this._dataSource.setUrl(value);触发在框架绑定的beforeload事件，在事件中会获取tree的url提交给服务端。\r\n            // 但是此时tree的url还未更改，导致获取出来的是上一次的值\r\n            // 所以这里需要先手动更新下tree的url值\r\n            this.tree.url = url;\r\n            this.tree.setUrl(url);\r\n            this.treeUrl = url;\r\n\r\n            if(filterKey) {\r\n                this.tree._doFilter(filterKey);\r\n            }\r\n\r\n        }\r\n    },\r\n    _addNode: function (node) {\r\n        var value = node[this.idField];\r\n        if (this.canCheckParent || (this.tree.isLeaf(node) && !this.selectNodes[value])) {\r\n            this.selectNodes[value] = node;\r\n\r\n            if(this._curAutoSortDirection != 'none') {\r\n                this._addNodeByDirection(node, this._curAutoSortDirection);\r\n                \r\n            } else {\r\n                mini.append(this._selectList, this._getItemHtml(node));\r\n            }\r\n            \r\n\r\n            // 选中后递增\r\n            // this.selectedCount++;\r\n        } else {\r\n            var childs = this.tree.getChildNodes(node);\r\n\r\n            if (!childs.length && !this.tree.isLeaf(node)) {\r\n                if (this.loadChildWhenChecked) {\r\n                    this.tree._dataSource.loadParams.needAll = true;\r\n                    this.tree.loadNode(node);\r\n                    this.tree._dataSource.loadParams.needAll = false;\r\n\r\n                }\r\n            } else {\r\n                for (var i = 0, len = childs.length; i < len; i++) {\r\n                    this._addNode(childs[i]);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        if (!this._selectList.style.height) {\r\n            this._selectList.style.height = jQuery(this._rightContent).height() - jQuery(this._buttons).outerHeight(true) + 'px';\r\n        }\r\n\r\n        // 更新右侧头部计数\r\n        this._setSelectedCount();\r\n    },\r\n\r\n    _addNodeByDirection: function(node, direction) {\r\n        var treeValues = this.tree.getValue().split(','),\r\n            nodeValue = node[this.idField],\r\n            index = 0,\r\n            len = treeValues.length,\r\n            targetNodeValue,\r\n            $targetNode;\r\n\r\n        for(; index < len; index++) {\r\n            if(treeValues[index] === nodeValue) {\r\n                break;\r\n            }\r\n\r\n        }\r\n        if(direction === 'asc') {\r\n            targetNodeValue = treeValues[index - 1];\r\n        } else {\r\n            targetNodeValue = treeValues[index + 1];\r\n        }\r\n        if(targetNodeValue) {\r\n            $targetNode = jQuery(this._selectList).find('[guid=\"' + targetNodeValue + '\"]');\r\n        }\r\n        if($targetNode && $targetNode.length) {\r\n            $(this._getItemHtml(node)).insertAfter($targetNode);\r\n        } else {\r\n            $(this._selectList).prepend(this._getItemHtml(node));\r\n        }\r\n    },\r\n\r\n    _removeNode: function (node) {\r\n        var value = node[this.idField];\r\n        delete this.selectNodes[value];\r\n\r\n        jQuery(this._selectList).find('li[guid=\"' + value + '\"]').remove();\r\n        // 移除后递减\r\n        // this.selectedCount--;\r\n        if (this.checkRecursive & !this.tree.isLeaf(node)) {\r\n            var childs = this.tree.getChildNodes(node);\r\n\r\n            for (var i = 0, len = childs.length; i < len; i++) {\r\n                this._removeNode(childs[i]);\r\n            }\r\n        }\r\n\r\n        // 更新右侧头部计数\r\n        this._setSelectedCount();\r\n    },\r\n\r\n    _getItemHtml: function (node) {\r\n        return this._listItemTempl.replace(/{{name}}/g, this.tree.getItemText(node)).replace('{{value}}', node[this.idField]);\r\n    },\r\n\r\n    bindEvents: function () {\r\n        var that = this;\r\n\r\n        jQuery(this._tabs).on('click', '> li', function () {\r\n            var $item = jQuery(this),\r\n                index = $item.index();\r\n\r\n            if (!$item.hasClass('active')) {\r\n                that.activeTab(index);\r\n            }\r\n\r\n        });\r\n        jQuery(this._selectList).on('click', '.remove', function () {\r\n\r\n            var $item = jQuery(this.parentNode),\r\n                value = $item.attr('guid'),\r\n                node = that.tree.getNode(value);\r\n\r\n            if ($item.hasClass('selected')) {\r\n                that.selectedListNode = null;\r\n            }\r\n\r\n            // node不在当前激活的tab树里，则不需要再去操作树\r\n            if (!node) {\r\n                $item.remove();\r\n                delete that.selectNodes[value];\r\n\r\n                // that.selectedCount--;\r\n                that._setSelectedCount();\r\n            } else {\r\n                // $item.remove();\r\n                // delete that.selectNodes[value];\r\n                // 统一处理 此处调用_removeNode方法更合适\r\n                that._removeNode(node);\r\n\r\n                that.tree.uncheckNode(node);\r\n            }\r\n\r\n\r\n            that._updateButtons();\r\n\r\n        }).on('mousedown', '.mini-tabstreeselect-item', function(e){\r\n            that.dragItem = this;\r\n            that.getDrag().start(e);\r\n        }).on('click', '.mini-tabstreeselect-item', function () {\r\n            var $item = jQuery(this);\r\n\r\n            if (!$item.hasClass('selected')) {\r\n                if (that.selectedListNode) {\r\n                    that.selectedListNode.removeClass('selected');\r\n                }\r\n\r\n                $item.addClass('selected');\r\n                that.selectedListNode = $item;\r\n\r\n                that._updateButtons();\r\n            }\r\n        });\r\n\r\n        jQuery(this._buttons).on('click', '.mini-tabstreeselect-action', function () {\r\n            if (mini.hasClass(this, 'disabled')) return;\r\n\r\n            // 自动排序\r\n            if(mini.hasClass(this, 'sort')) {\r\n                that.toggleAutoSort();\r\n            }\r\n\r\n            // 往上移动选中记录\r\n            if (mini.hasClass(this, 'top')) {\r\n                that.selectedListNode.insertBefore(that._selectList.firstChild);\r\n                that.toggleAutoSort(true);\r\n\r\n                // 往下移动选中记录\r\n            } else if (mini.hasClass(this, 'bottom')) {\r\n                that.selectedListNode.insertAfter(that._selectList.lastChild);\r\n                that.toggleAutoSort(true);\r\n\r\n                // 清楚所有记录\r\n            } else if (mini.hasClass(this, 'removeall')) {\r\n                that.clearAll();\r\n\r\n                // 返回到初始状态\r\n            } else if (mini.hasClass(this, 'recover')) {\r\n                that.setValue(that.value);\r\n                that.setText(that.text);\r\n            }\r\n\r\n            that._updateButtons();\r\n        });\r\n\r\n    },\r\n\r\n    getDrag: function () {\r\n        if (!this.drag) {\r\n            this.drag = new mini.Drag({\r\n                capture: false,\r\n                onStart: mini.createDelegate(this._OnDragStart, this),\r\n                onMove: mini.createDelegate(this._OnDragMove, this),\r\n                onStop: mini.createDelegate(this._OnDragStop, this)\r\n            });\r\n        }\r\n        return this.drag;\r\n    },\r\n    _OnDragStart: function (drag) {\r\n\r\n        this._dragProxy = mini.append(document.body, '<div class=\"mini-tabstreeselect-proxy\"></div>');\r\n        this._dragProxy.innerHTML = '<div class=\"mini-tabstreeselect-proxy-inner\">' + this.dragItem.outerHTML + '</div>';\r\n        mini.setXY(this._dragProxy, drag.now[0] + 15, drag.now[1] + 18);\r\n        \r\n        mini.setWidth(this._dragProxy, mini.getBox(this.dragItem).width);\r\n\r\n        this.feedbackLine = mini.append(document.body, \"<div class='mini-feedback-line'></div>\");\r\n\r\n        mini.addClass(this.dragItem, 'dragging');\r\n    },\r\n    _OnDragMove: function (drag) {\r\n        var x = drag.now[0];\r\n        var y = drag.now[1];\r\n\r\n        mini.setXY(this._dragProxy, x + 15, y + 18);\r\n\r\n        this.targetItem = this.insertAction = null;\r\n        var t = mini.findParent(drag.event.target, 'mini-tabstreeselect-item');\r\n\r\n        if (t) {\r\n           \r\n            this.targetItem = t;\r\n            this.insertAction = \"before\";\r\n            var box = mini.getBox(this.targetItem);\r\n\r\n            if (y > box.y + box.height / 2) {\r\n\r\n                this.insertAction = \"after\";\r\n            }\r\n\r\n            this.feedbackLine.style.display = \"block\";\r\n\r\n               \r\n            if (this.insertAction == \"after\") {\r\n                mini.setXY(this.feedbackLine, box.x, box.y + box.height);\r\n            } else {\r\n                mini.setXY(this.feedbackLine, box.x, box.y);\r\n            }\r\n            \r\n\r\n            mini.setWidth(this.feedbackLine, box.width);\r\n\r\n        } else {\r\n            this.feedbackLine.style.display = \"none\";\r\n        }\r\n\r\n    },\r\n    _removeDrag: function () {\r\n        mini.removeNode(this._dragProxy);\r\n        mini.removeNode(this.feedbackLine);\r\n        this._dragProxy = this.feedbackLine = this.dragItem = this.targetItem = null;\r\n    },\r\n    _OnDragStop: function (drag) {\r\n        if(this.targetItem) {\r\n            if(this.insertAction == 'before') {\r\n                this._selectList.insertBefore(this.dragItem, this.targetItem);\r\n            } else {\r\n                if(this._selectList.lastChild == this.targetItem) {\r\n                    this._selectList.appendChild(this.dragItem);\r\n                } else {\r\n                    this._selectList.insertBefore(this.dragItem, this.targetItem.nextSibling);\r\n                }\r\n                \r\n            }\r\n\r\n            this.toggleAutoSort(true);\r\n        }\r\n\r\n        mini.removeClass(this.dragItem, 'dragging');\r\n\r\n        this._removeDrag();\r\n    },\r\n\r\n    _curAutoSortDirection: 'none',\r\n    toggleAutoSort: function(clearSort) {\r\n        if(!this.showSort) {\r\n            return;\r\n        }\r\n        var direction = clearSort ? 'none' : this._getNextAutoSortDirection();\r\n\r\n        mini.removeClass(this.sortBtn, 'asc desc none');\r\n        mini.addClass(this.sortBtn, direction);\r\n        this.sortBtn.setAttribute('title', this.sortTitles[direction]);\r\n\r\n        this._curAutoSortDirection = direction;\r\n\r\n        if(direction != 'none') {\r\n            this._serverSort(direction);\r\n        }\r\n    },\r\n\r\n    _getNextAutoSortDirection: function() {\r\n        switch(this._curAutoSortDirection) {\r\n            case 'asc':\r\n                return 'desc';\r\n            case 'desc':\r\n            default:\r\n                return 'asc';\r\n        }\r\n    },\r\n\r\n    // autoSort: function(direction) {\r\n    //     var treeValue = this.tree.getValue();\r\n    //     var needServerSort = treeValue.split(',').length != this.getValue().split(',').length;\r\n\r\n    //     if(needServerSort) {\r\n    //         this._serverSort(direction);\r\n    //     } else {\r\n    //         if(direction === 'asc') {\r\n    //             this.setValue(treeValue);\r\n    //         } else {\r\n    //             this.setValue(treeValue.split(',').reverse().join(','));\r\n    //         }\r\n    //     }\r\n    // },\r\n\r\n    _serverSort: function(direction) {\r\n        var value = this.getValue();\r\n        var data = {\r\n            value: value,\r\n            direction: direction,\r\n            eventType: 'sortChanged'\r\n        };\r\n\r\n        var e = {\r\n            url: this.treeUrl,\r\n            data: data,\r\n            sender: this\r\n        };\r\n\r\n        this.fire(\"beforesortchanged\", e);\r\n\r\n        if(value && value.split(',').length > 1) {\r\n            this._loadValue(e);\r\n        }\r\n        \r\n    },\r\n\r\n    _loadValue: function(config){\r\n        var me = this;\r\n\r\n        var maskTimer = setTimeout(function () {\r\n            me.mask();\r\n            me.isMask = true;\r\n        }, 100);\r\n\r\n        jQuery.ajax({\r\n            url: config.url,\r\n            data: config.data,\r\n            type: 'post',\r\n            dataType: 'json',\r\n            success: function (data) {\r\n                var e = {\r\n                    data: data\r\n                };\r\n                me.fire(\"beforeloadvalue\", e);\r\n                if(e.cancel) {\r\n                    return;\r\n                }\r\n                if(e.value !== undefined) {\r\n                    data = {\r\n                        value: e.value,\r\n                        text: e.text\r\n                    };\r\n                } else {\r\n                    data = mini.getSecondRequestData(data);\r\n                }\r\n                if (data) {\r\n                    var value = me.getValue();\r\n                    // var defaultValue = me.value;\r\n                    // var defaultText = me.text;\r\n\r\n                    var valueArr,\r\n                        textArr,\r\n                        i = 0,\r\n                        len = 0,\r\n                        node,\r\n                        html = [];\r\n\r\n                    // 优化 by liub @2017-12-14\r\n                    // 当value值有上千个时，ie浏览器会假死\r\n                    // 原因是setValue方法中对每一个值都会进行dom的append\r\n                    // console.time('insertHtml');\r\n                    // me.setValue(data.value, true);\r\n                    // me.setText(data.text);\r\n                    // console.timeEnd('insertHtml');\r\n\r\n                    me._selectList.innerHTML = '';\r\n                    // me.selectedCount = 0;\r\n                    me.selectNodes = {};\r\n                    me.canCheckParent && me.tree.uncheckAllNodes();\r\n\r\n                    if (data.value) {\r\n                        valueArr = data.value.split(',');\r\n                        textArr = data.text.split(',');\r\n\r\n\r\n                        for (len = valueArr.length; i < len; i++) {\r\n                            node = me.tree.getNode(valueArr[i]);\r\n\r\n                            if (node) {\r\n                                me.tree.checkNode(node);\r\n                            } else {\r\n                                node = {};\r\n                                node[me.idField] = valueArr[i];\r\n                                node[me.textField] = textArr[i];\r\n                            }\r\n\r\n                            me.selectNodes[valueArr[i]] = node;\r\n\r\n                            html.push(me._getItemHtml(node));\r\n\r\n                        }\r\n\r\n                        // mini.append方法有性能问题\r\n                        // mini.append(me._selectList, html.join(''));\r\n\r\n                        me._selectList.insertAdjacentHTML('afterbegin', html.join(''));\r\n\r\n                        // me.selectedCount = len;\r\n\r\n                    }\r\n\r\n                    me._updateButtons();\r\n                    me._setSelectedCount(len);\r\n\r\n                    // me.value = defaultValue;\r\n                    // me.text = defaultText;\r\n\r\n                    if (value != me.getValue()) {\r\n                        me._OnValueChanged();\r\n                    }\r\n\r\n                }\r\n                \r\n            },\r\n            complete: function() {\r\n                \r\n                if (maskTimer) {\r\n                    clearTimeout(maskTimer);\r\n                }\r\n                if (me.isMask) {\r\n                    me.unmask();\r\n                    me.isMask = false;\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    _updateButtons: function () {\r\n        var enable = function (el) {\r\n            mini.removeClass(el, 'disabled');\r\n        };\r\n        var disable = function (el) {\r\n            mini.addClass(el, 'disabled');\r\n        };\r\n\r\n        // 如果没有选中的条目 或 选中条目无兄弟节点，则 上移、下移 失效\r\n        if (!this.selectedListNode || !this.selectedListNode.siblings().length) {\r\n            disable(this.topBtn);\r\n            disable(this.bottomBtn);\r\n\r\n        } else if (!this.selectedListNode.prev().length) {\r\n            disable(this.topBtn);\r\n            enable(this.bottomBtn);\r\n\r\n        } else if (!this.selectedListNode.next().length) {\r\n            enable(this.topBtn);\r\n            disable(this.bottomBtn);\r\n\r\n        } else {\r\n            enable(this.topBtn);\r\n            enable(this.bottomBtn);\r\n        }\r\n\r\n    },\r\n\r\n    getSelectedNodes: function () {\r\n        // var nodes = [],\r\n        //     selectNodes = this.selectNodes,\r\n        //     textField = this.textField;\r\n        // for (var v in this.selectNodes) {\r\n        //     nodes.push({\r\n        //         value: v,\r\n        //         text: this.selectNodes[v][this.textField]\r\n        //     });\r\n        // }\r\n\r\n        // 将方法改为获取的节点为排序后的顺序\r\n        // 修改原因：张剑峰反馈框架中都是用过这个方法来获取选中节点的，\r\n        // 但获取出来是未排序的，如果页面上改成getValue的方法，改动量比较大\r\n        var nodes = [];\r\n        jQuery(this._selectList).children('li').each(function (index, item) {\r\n            var $item = jQuery(item);\r\n            \r\n            nodes.push({\r\n                value: $item.attr('guid'),\r\n                text: $item.text()\r\n            });\r\n        });\r\n        return nodes;\r\n    },\r\n\r\n    setSelectedNodes: function (nodes) {\r\n\r\n        for (var i = 0, len = nodes.length; i < len; i++) {\r\n            var node = this.tree.getNode(nodes[i].value);\r\n\r\n            if (node) {\r\n                this.tree.selectNode(node);\r\n            } else {\r\n                node = {};\r\n                node[this.textField] = nodes[i].text;\r\n                node[this.idField] = nodes[i].value;\r\n\r\n                this.selectNodes[nodes[i].value] = node;\r\n\r\n                mini.append(this._selectList, this._getItemHtml(node));\r\n            }\r\n        }\r\n    },\r\n\r\n    clearAll: function () {\r\n        // 已选列表中无内容，do nothing\r\n        if (!this._selectList.innerHTML) return;\r\n\r\n        this._selectList.innerHTML = '';\r\n        this.selectNodes = {};\r\n\r\n        this.selectedListNode = null;\r\n\r\n        this.tree.uncheckAllNodes();\r\n\r\n        // 清空已选计数\r\n        this._setSelectedCount(0);\r\n\r\n        // this._updateButtons();\r\n    },\r\n\r\n    setValue: function (value) {\r\n        this.value = value;\r\n        var valueArr = value.split(','),\r\n            html = [];\r\n        this.clearAll();\r\n        if (!value) {\r\n            return;\r\n        }\r\n        for (var i = 0, len = valueArr.length; i < len; i++) {\r\n            var node = this.tree.getNode(valueArr[i]);\r\n\r\n            if (node) {\r\n                this.tree.checkNode(node);\r\n            } else {\r\n                node = {};\r\n                node[this.textField] = node[this.idField] = valueArr[i];\r\n\r\n            }\r\n            this.selectNodes[valueArr[i]] = node;\r\n\r\n            html.push(this._getItemHtml(node));\r\n\r\n            // this.selectedCount++;\r\n        }\r\n        // mini.append(this._selectList, html.join(''));\r\n        this._selectList.insertAdjacentHTML('afterbegin', html.join(''));\r\n\r\n        this._updateButtons();\r\n        this._setSelectedCount();\r\n    },\r\n    getValue: function () {\r\n        var value = [];\r\n        jQuery(this._selectList).children('li').each(function (index, item) {\r\n            value.push(jQuery(item).attr('guid'));\r\n        });\r\n        // for (var v in this.selectNodes) {\r\n        //     value.push(v);\r\n        // }\r\n        return value.join(',');\r\n    },\r\n    setText: function (text) {\r\n        this.text = text;\r\n        if (!text) return;\r\n        var textArr = text.split(','),\r\n            valueArr = this.value.split(','),\r\n            i = 0,\r\n            len = valueArr.length,\r\n            node,\r\n            v;\r\n\r\n        for (; i < len; i++) {\r\n            v = valueArr[i];\r\n            node = this.selectNodes[v];\r\n            if (node) {\r\n                node[this.textField] = textArr[i];\r\n                jQuery(this._selectList).find('li[guid=\"' + v + '\"]').find('.item-name').attr('title', textArr[i]).html(textArr[i]);\r\n            }\r\n\r\n        }\r\n    },\r\n    getText: function () {\r\n        var text = [];\r\n\r\n        jQuery(this._selectList).children('li').each(function (index, item) {\r\n            text.push(jQuery(item).find('.item-name').text());\r\n        });\r\n        // for (var v in this.selectNodes) {\r\n        //     text.push(this.selectNodes[v][this.textField]);\r\n        // }\r\n        return text.join(',');\r\n    },\r\n\r\n    setSelectedPanelTitle: function (title) {\r\n        this.selectedPanelTitle = title;\r\n        // this._rightHeader.innerHTML = title;\r\n\r\n        // revise by chendongshun at 2017.05.09\r\n        // cause : 设置右侧头部标题后样式错误\r\n        // _rightHeader.innerHTML 为 '<span class=\"mini-tabstreeselect-header-title\">已选人员</span>' 应只设置其内部\r\n        // 准确地来说应该使用firstElementChild。\r\n        // 但考虑需要兼容ie8，同时控件内部的html是代码直接书写的，不存在空文本节点，直接使用firstChild。\r\n        // this._rightHeader.firstChild.innerHTML = title;\r\n        this._rightTitle.innerHTML = title;\r\n    },\r\n\r\n    _setSelectedCount: function (count) {\r\n        // if (count !== undefined) {\r\n        //     this.selectedCount = count;\r\n        // }\r\n        // if (this.showSelectedCount) {\r\n        //     if (this.selectedCount !== 0) {\r\n        //         mini.removeClass(this._rightCount, 'hidden');\r\n        //     } else {\r\n        //         mini.addClass(this._rightCount, 'hidden');\r\n        //     }\r\n        //     // 直接赋值数字 括号用css实现\r\n        //     this._rightCount.innerHTML = this.selectedCount;\r\n        // }\r\n\r\n        // 直接获取右侧列表的个数\r\n        if (this.showSelectedCount) {\r\n            count = count >= 0 ? count : jQuery(this._selectList).children('li').length;\r\n\r\n            if (count !== 0) {\r\n                mini.removeClass(this._rightCount, 'hidden');\r\n            } else {\r\n                mini.addClass(this._rightCount, 'hidden');\r\n            }\r\n            // 直接赋值数字 括号用css实现\r\n            this._rightCount.innerHTML = count;\r\n        }\r\n    },\r\n\r\n    setShowSelectedCount: function (show) {\r\n        this.showSelectedCount = show === true ? true : false;\r\n\r\n        if (this.showSelectedCount) {\r\n            mini.removeClass(this._rightCount, 'hidden');\r\n        } else {\r\n            mini.addClass(this._rightCount, 'hidden');\r\n        }\r\n    },\r\n    getShowSelectedCount: function () {\r\n        return this.showSelectedCount;\r\n    },\r\n\r\n    doLayout: function () {\r\n        var h = jQuery(this.el).height();\r\n        this._leftPanel.style.height = h + 'px';\r\n        this._rightPanel.style.height = h + 'px';\r\n\r\n        var s_h = jQuery(this._rightContent).height() - jQuery(this._buttons).outerHeight(true);\r\n        this._selectList.style.height = (s_h >= 0 ? s_h : 0) + 'px';\r\n\r\n        this.tree.doLayout();\r\n    },\r\n\r\n    setTabs: function (tabs, updateTree) {\r\n        var i, len,\r\n            tabArr = [],\r\n            hasParam = this.url.indexOf('?') > 0;\r\n\r\n        this.tabsConfig = [];\r\n        this.tabKeys = [];\r\n        for (i = 0, len = tabs.length; i < len; i++) {\r\n\r\n            tabArr.push('<li>' + tabs[i].tabText + '</li>');\r\n            var key = (hasParam ? '&' : '?') + 'tabKey=' + tabs[i].tabKey;\r\n            this.tabsConfig.push({\r\n                url: this.url + key,\r\n                filterMode: tabs[i].filterMode,\r\n                filterUrl: this.filterUrl ? (this.filterUrl + key) : undefined,\r\n                showDimension: tabs[i].showDimension\r\n            });\r\n            this.tabKeys.push(tabs[i].tabKey);\r\n\r\n            if(tabs[i].showDimension) {\r\n                this.showDimension = true;\r\n            }\r\n        }\r\n        this._tabs.innerHTML = tabArr.join('');\r\n\r\n        this.doLayout();\r\n\r\n        this.activeTab(0, updateTree);\r\n    },\r\n\r\n    addTab: function(tab, updateTree){\r\n        var hasParam = this.url.indexOf('?') > 0;\r\n\r\n        var key = (hasParam ? '&' : '?') + 'tabKey=' + tab.tabKey;\r\n        this.tabsConfig.push({\r\n            url: this.url + key,\r\n            filterMode: tab.filterMode,\r\n            filterUrl: this.filterUrl ? (this.filterUrl + key) : undefined\r\n        });\r\n        this.tabKeys.push(tab.tabKey);\r\n\r\n        jQuery('<li>' + tab.tabText + '</li>').appendTo(this._tabs);\r\n\r\n        this.doLayout();\r\n\r\n        if(updateTree !== false) {\r\n            this.activeTab(this.tabsConfig.length - 1, true);\r\n        }\r\n    },\r\n\r\n    _getDimensionKey: function(tabKey) {\r\n        return this.id + '_' + tabKey;\r\n    },\r\n    _getLastDimensionValue: function(tabKey) {\r\n        var key = this._getDimensionKey(tabKey),\r\n            val = mini.Cookie.get(key);\r\n\r\n        return val;\r\n    },\r\n    _setLastDimensionValue: function(tabKey, val) {\r\n        document.cookie = this._getDimensionKey(tabKey) + \"=\" + escape(val) + \";path=\" + window.location.pathname;\r\n    },\r\n    _activeTabIndex: 0,\r\n    activeTab: function (index, updateTree) {\r\n        var config = this.tabsConfig[index],\r\n            $tab = jQuery(this._tabs).children().eq(index),\r\n            dimension,\r\n            url,\r\n            filterUrl;\r\n\r\n        if (config) {\r\n            if (!$tab.hasClass('active')) {\r\n                $tab.siblings('.active').removeClass('active');\r\n                $tab.addClass('active');\r\n            }\r\n            \r\n            this._activeTabIndex = index;\r\n            \r\n            // var filterKey = config.filterKey || '';\r\n            // this.tree._filterInput.setValue(filterKey);\r\n            var filterKey = this.tree._filterInput.getValue();\r\n            this.tree._filterKey = filterKey;\r\n\r\n            url = config.url;\r\n            filterUrl = config.filterUrl;\r\n\r\n            if(config.showDimension) {\r\n                dimension = this._getLastDimensionValue(this.tabKeys[index]);\r\n                if(dimension) {\r\n                    this.dimensionComboBox.setValue(dimension);\r\n                } else {\r\n                    dimension = this.dimensionComboBox.getValue();\r\n                }\r\n                url += ('&dimension=' + dimension);\r\n\r\n                filterUrl && (filterUrl += ('&dimension=' + dimension));\r\n\r\n                this.dimensionComboBox.show();\r\n                this.tree.setHeight($(this._leftContent).height() - this.dimensionComboBox.getHeight() - 5);\r\n            } else {\r\n                this.dimensionComboBox.hide();\r\n                this.tree.setHeight('100%');\r\n            }\r\n\r\n            if (config.filterMode) {\r\n                this.tree.setFilterMode(config.filterMode);\r\n            }\r\n            if (filterUrl) {\r\n                this.tree.setFilterUrl(filterUrl);\r\n            }\r\n\r\n            var needFilter = filterKey && this.tree.filterMode === 'server';\r\n\r\n            if(needFilter) {\r\n                this.tree.setAutoLoad(false);\r\n                this.tree.setUrl(url);\r\n                this.treeUrl = url;\r\n\r\n                this.tree._doFilter(filterKey);\r\n            } else {\r\n                \r\n                if (updateTree === false) {\r\n                    this.tree.setAutoLoad(false);\r\n                } else {\r\n                    this.tree.setAutoLoad(true);\r\n                }\r\n\r\n                this.tree._dataSource.ajaxData = {\r\n                    activeTab: true\r\n                };\r\n\r\n                this.tree.setUrl(url);\r\n\r\n                // 加载后把activeTab标识清空\r\n                this.tree._dataSource.ajaxData = null;\r\n\r\n                if (this.tree._dataSource.loadParams) {\r\n                    this.tree._dataSource.loadParams.activeTab = false;\r\n                }\r\n\r\n                this.treeUrl = url;\r\n\r\n                if (needFilter || updateTree === false) {\r\n                    this.tree.setAutoLoad(true);\r\n                }\r\n\r\n                if(filterKey) {\r\n                    this.tree._doFilter(filterKey);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * function setData(data)\r\n     * @member mini.TabsTreeSelect\r\n     * @param {Array} data\r\n     *\r\n     */\r\n    setData: function (data) {\r\n        if (typeof data == \"string\") {\r\n            data = eval(\"(\" + data + \")\");\r\n        }\r\n        \r\n        var treeData = data.tree || data,\r\n            dimensionData = data.dimension;\r\n\r\n        if (!mini.isArray(treeData)) {\r\n            treeData = [];\r\n        }\r\n        if (this.resultAsTree) {\r\n            this.tree.setData(treeData);\r\n        } else {\r\n            this.tree.loadList(treeData);\r\n        }\r\n\r\n        if (!mini.isArray(dimensionData)) {\r\n            dimensionData = [];\r\n        }\r\n        this.dimensionComboBox.setData(dimensionData);\r\n\r\n        this.data = data;\r\n    },\r\n\r\n    /**\r\n     *\r\n     * function getData()\r\n     * @member mini.TabsTreeSelect\r\n     * @returns {Array}\r\n     *\r\n     */\r\n    getData: function () {\r\n        return this.data;\r\n    },\r\n\r\n    /**\r\n     *\r\n     * function setUrl(url)\r\n     * @member mini.TabsTreeSelect\r\n     * @param {String} url\r\n     *\r\n     */\r\n    setUrl: function (url) {\r\n        this.url = url;\r\n        this._updateTabsUrl();\r\n    },\r\n    /**\r\n     *\r\n     * function getUrl()\r\n     * @member mini.TabsTreeSelect\r\n     * @returns {String}\r\n     *\r\n     */\r\n    getUrl: function () {\r\n        return this.url;\r\n    },\r\n\r\n    getAutoLoad: function () {\r\n        return this.autoLoad;\r\n    },\r\n    setAutoLoad: function (autoLoad) {\r\n        this.autoLoad = autoLoad;\r\n    },\r\n\r\n    setTabKeys: function (keys) {\r\n        this.tabKeys = keys;\r\n        this._updateTabsUrl();\r\n    },\r\n\r\n    _updateTabsUrl: function () {\r\n        var i,\r\n            len = Math.min(this.tabKeys.length, this.tabsConfig.length),\r\n            hasParam = this.url.indexOf('?') > 0;\r\n\r\n        if (len > 0) {\r\n            for (i = 0; i < len; i++) {\r\n                var key = (hasParam ? '&' : '?') + 'tabKey=' + this.tabKeys[i];\r\n                this.tabsConfig[i].url = this.url + key;\r\n                this.tabsConfig[i].filterUrl = this.filterUrl ? (this.filterUrl + key) : undefined;\r\n            }\r\n\r\n            this.activeTab(0, this.autoLoad);\r\n\r\n        }\r\n    },\r\n\r\n    load: function () {\r\n        this.tree.load();\r\n    },\r\n    /**\r\n     *\r\n     * function setResultAsTree(resultAsTree)\r\n     * @member mini.TabsTreeSelect\r\n     * @param {Boolean} resultAsTree\r\n     *\r\n     */\r\n    setResultAsTree: function (resultAsTree) {\r\n        this.resultAsTree = resultAsTree;\r\n        if (this.tree) {\r\n            this.tree.setResultAsTree(resultAsTree);\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function getResultAsTree()\r\n     * @member mini.TabsTreeSelect\r\n     * @returns {Boolean}\r\n     *\r\n     */\r\n    getResultAsTree: function () {\r\n        return this.resultAsTree;\r\n    },\r\n    /**\r\n     *\r\n     * function setParentField(parentField)\r\n     * @member mini.TabsTreeSelect\r\n     * @param {String} parentField\r\n     *\r\n     */\r\n    setParentField: function (parentField) {\r\n        this.parentField = parentField;\r\n        if (this.tree) {\r\n            this.tree.setParentField(parentField);\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function getParentField()\r\n     * @member mini.TabsTreeSelect\r\n     * @returns {String}\r\n     *\r\n     */\r\n    getParentField: function () {\r\n        return this.parentField;\r\n    },\r\n    setDataField: function (dataField) {\r\n        this.dataField = dataField;\r\n        if (this.tree) {\r\n            this.tree.setDataField(dataField);\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function getDataField()\r\n     * @member mini.TabsTreeSelect\r\n     * @returns {String}\r\n     *\r\n     */\r\n    getDataField: function () {\r\n        return this.dataField;\r\n    },\r\n    /**\r\n     *\r\n     * function setIdField(idField)\r\n     * @member mini.TabsTreeSelect\r\n     * @param {String} idField\r\n     *\r\n     */\r\n    setIdField: function (idField) {\r\n        if (this.tree) {\r\n            this.tree.setIdField(idField);\r\n        }\r\n        this.idField = idField;\r\n    },\r\n    /**\r\n     *\r\n     * function getIdField()\r\n     * @member mini.TabsTreeSelect\r\n     * @returns {String}\r\n     *\r\n     */\r\n    getIdField: function () {\r\n        return this.idField;\r\n    },\r\n\r\n    getTextField: function () {\r\n        return this.textField;\r\n    },\r\n    setTextField: function (textField) {\r\n        this.textField = textField;\r\n        if (this.tree) {\r\n            this.tree.setTextField(textField);\r\n        }\r\n    },\r\n\r\n    getNodesField: function () {\r\n        return this.nodesField;\r\n    },\r\n    setNodesField: function (nodesField) {\r\n        this.nodesField = nodesField;\r\n        if (this.tree) {\r\n            this.tree.setNodeField(nodesField);\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function setShowTreeIcon(showTreeIcon)\r\n     * @member mini.TabsTreeSelect\r\n     * @param {Boolean} showTreeIcon\r\n     *\r\n     */\r\n    setShowTreeIcon: function (showTreeIcon) {\r\n        this.showTreeIcon = showTreeIcon;\r\n        if (this.tree) {\r\n            this.tree.setShowTreeIcon(showTreeIcon);\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function getShowTreeIcon()\r\n     * @member mini.TabsTreeSelect\r\n     * @returns {Boolean}\r\n     *\r\n     */\r\n    getShowTreeIcon: function () {\r\n        return this.showTreeIcon;\r\n    },\r\n    /**\r\n     *\r\n     * function setShowTreeLines(showTreeLines)\r\n     * @member mini.TabsTreeSelect\r\n     * @param {Boolean} showTreeLines\r\n     *\r\n     */\r\n    setShowTreeLines: function (showTreeLines) {\r\n        this.showTreeLines = showTreeLines;\r\n        if (this.tree) {\r\n            this.tree.setShowTreeLines(showTreeLines);\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function getShowTreeLines()\r\n     * @member mini.TabsTreeSelect\r\n     * @returns {Boolean}\r\n     *\r\n     */\r\n    getShowTreeLines: function () {\r\n        return this.showTreeLines;\r\n    },\r\n    setShowFolderCheckBox: function (showFolderCheckBox) {\r\n        this.showFolderCheckBox = showFolderCheckBox;\r\n        if (this.tree) {\r\n            this.tree.setShowFolderCheckBox(showFolderCheckBox);\r\n        }\r\n    },\r\n    getShowFolderCheckBox: function () {\r\n        return this.showFolderCheckBox;\r\n    },\r\n    setFilterUrl: function (url) {\r\n        this.filterUrl = url;\r\n        if (this.tree) {\r\n            this.tree.setFilterUrl(url);\r\n        }\r\n    },\r\n    getFilterUrl: function () {\r\n        return this.filterUrl;\r\n    },\r\n    setFilterMode: function (filterMode) {\r\n        this.filterMode = filterMode;\r\n        if (this.tree) {\r\n            this.tree.setFilterMode(filterMode);\r\n        }\r\n    },\r\n    getFilterMode: function () {\r\n        return this.filterMode;\r\n    },\r\n    setCanCheckParent: function (canCheckParent) {\r\n        this.canCheckParent = canCheckParent;\r\n        if (this.tree) {\r\n            this.tree.setCheckRecursive(!canCheckParent);\r\n        }\r\n    },\r\n    getCanCheckParent: function () {\r\n        return this.canCheckParent;\r\n    },\r\n    setCheckRecursive: function (checkRecursive) {\r\n        this.checkRecursive = checkRecursive;\r\n        if (this.tree) {\r\n            this.tree.setCheckRecursive(checkRecursive);\r\n        }\r\n    },\r\n    getCheckRecursive: function () {\r\n        return this.checkRecursive;\r\n    },\r\n    setAutoCheckParent: function (autoCheckParent) {\r\n        this.autoCheckParent = autoCheckParent;\r\n        if (this.tree) {\r\n            this.tree.setAutoCheckParent(autoCheckParent);\r\n        }\r\n    },\r\n    getAutoCheckParent: function () {\r\n        return this.AutoCheckParent;\r\n    },\r\n    setExpandOnLoad: function (expandOnLoad) {\r\n        this.expandOnLoad = expandOnLoad;\r\n        if (this.tree) {\r\n            this.tree.setExpandOnLoad(expandOnLoad);\r\n        }\r\n    },\r\n    getExpandOnLoad: function () {\r\n        return this.expandOnLoad;\r\n    },\r\n\r\n    setCheckOnTextClick: function (checkOnTextClick) {\r\n        this.checkOnTextClick = checkOnTextClick;\r\n        if (this.tree) {\r\n            this.tree.setCheckOnTextClick(checkOnTextClick);\r\n        }\r\n    },\r\n    \r\n    setExpandOnNodeClick: function (expandOnNodeClick) {\r\n        this.expandOnNodeClick = expandOnNodeClick;\r\n        if (this.tree) {\r\n            this.tree.setExpandOnNodeClick(expandOnNodeClick);\r\n        }\r\n    },\r\n\r\n    getAttrs: function (el) {\r\n        var attrs = mini.TabsTreeSelect.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs, [\"data\", \"textField\", \"pinyinField\",\r\n            \"idField\", \"nodesField\", \"parentField\", \"dataField\", \"onbeforenodecheck\",\r\n            \"onbeforenodeselect\", \"onnodeclick\", \"url\", \"filterUrl\", \"filterMode\",\r\n            \"onbeforeload\", \"onload\", \"ontreeexpand\", \"ontreecollapse\", \"ondrawnode\", \"onbeforeloadvalue\", \"selectedPanelTitle\"\r\n        ]);\r\n        mini._ParseBool(el, attrs, [\"expandOnNodeClick\", \"expandOnLoad\", \"resultAsTree\", \"showTreeIcon\",\r\n            \"showTreeLines\", \"showFolderCheckBox\", \"canCheckParent\", \"showBorder\", \"loadChildWhenChecked\", \"autoLoad\",\r\n            \"checkRecursive\", \"autoCheckParent\", \"showFullPath\", \"includeRootNode\", \"checkOnTextClick\", \"showSelectedCount\", \"showSort\"\r\n        ]);\r\n\r\n\r\n        var tabs = [],\r\n            nodes = mini.getChildNodes(el),\r\n            tabAttr = null,\r\n            i, len;\r\n\r\n        for (i = 0, len = nodes.length; i < len; i++) {\r\n            tabAttr = {};\r\n            mini._ParseString(nodes[i], tabAttr, [\"tabText\", \"tabKey\", \"filterMode\", \"showDimension\"]);\r\n            tabs.push(tabAttr);\r\n        }\r\n\r\n        attrs.tabs = tabs;\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.TabsTreeSelect, \"tabstreeselect\");\n\r\n\r\nmini.TreeSelect = function() {\r\n    this.data = [];\r\n    mini.TreeSelect.superclass.constructor.apply(this, arguments);\r\n};\r\nmini.extend(mini.TreeSelect, mini.PopupEdit, {\r\n    valueFromSelect: false,\r\n\r\n    text: '',\r\n    value: '',\r\n\r\n    autoCheckParent: false,\r\n    expandOnLoad: false,\r\n\r\n    valueField: 'id',\r\n    textField: 'text',\r\n    nodesField: 'children',\r\n    dataField: '',\r\n    delimiter: ',',\r\n\r\n    multiSelect: false,\r\n    data: [],\r\n    url: '',\r\n\r\n    allowInput: false,\r\n\r\n    showTreeIcon: false,\r\n    showTreeLines: true,\r\n\r\n    resultAsTree: false,\r\n    parentField: 'pid',\r\n    checkRecursive: false,\r\n\r\n    showFolderCheckBox: false,\r\n    showRadioButton: false, //radio\r\n\r\n    showFilter: false,\r\n\r\n    // 搜索模式，可取值为'client'、'server'\r\n    filterMode: 'client',\r\n\r\n    filterUrl: '',\r\n\r\n    showFullPath: false,\r\n    includeRootNode: false,\r\n\r\n    popupHeight: 200,\r\n    popupWidth: '100%',\r\n    popupMaxHeight: 250,\r\n    popupMinWidth: 100,\r\n\r\n    setAjaxData: function (value) {\r\n        this.ajaxData = value;\r\n        this.tree.setAjaxData(value);\r\n    },\r\n    setAjaxType: function (value) {\r\n        this.ajaxType = value;\r\n        this.tree.setAjaxType(value);\r\n    },\r\n    setAjaxOptions: function (value) {\r\n        this.ajaxOptions = value;\r\n        this.tree.setAjaxOptions(value);\r\n    },\r\n\r\n    set: function(kv) {\r\n        if (typeof kv === 'string') {\r\n            return this;\r\n        }\r\n\r\n        var value = kv.value;\r\n        delete kv.value;\r\n        var text = kv.text;\r\n        delete kv.text;\r\n        var url = kv.url;\r\n        delete kv.url;\r\n        var data = kv.data;\r\n        delete kv.data;\r\n        var showFullPath = kv.showFullPath;\r\n        delete kv.showFullPath;\r\n        var includeRootNode = kv.includeRootNode;\r\n        delete kv.includeRootNode;\r\n        var autoLoad = kv.autoLoad;\r\n        delete kv.autoLoad;\r\n\r\n        mini.TreeSelect.superclass.set.call(this, kv);\r\n\r\n        if (!mini.isNull(data)) {\r\n            this.setData(data);\r\n        }\r\n        if(!mini.isNull(autoLoad)) {\r\n            this.autoLoad = autoLoad;\r\n            if(this.tree) {\r\n                this.tree.setAutoLoad(autoLoad);\r\n            }\r\n        }\r\n        if (!mini.isNull(url)) {\r\n            this.setUrl(url);\r\n        }\r\n        if (!mini.isNull(value)) {\r\n            this.setValue(value);\r\n        }\r\n        if (!mini.isNull(text)) {\r\n            this.setText(text);\r\n        }\r\n        if (!mini.isNull(showFullPath)) {\r\n            this.showFullPath = showFullPath;\r\n\r\n            this.tree.showFullPath = showFullPath;\r\n        }\r\n        if (!mini.isNull(includeRootNode)) {\r\n            this.includeRootNode = includeRootNode;\r\n\r\n            this.tree.includeRootNode = includeRootNode;\r\n        }\r\n        return this;\r\n    },\r\n\r\n    uiCls: 'mini-treeselect',\r\n    _createPopup: function() {\r\n        mini.TreeSelect.superclass._createPopup.call(this);\r\n\r\n        this.tree = new mini.FilterTree();\r\n        this.tree.setShowTreeIcon(true);\r\n        this.tree.setStyle('border:0;width:100%;height:100%;overflow:hidden;');\r\n        this.tree.setResultAsTree(this.resultAsTree);\r\n        this.tree.render(this.popup._contentEl);\r\n        this.tree.setCheckRecursive(this.checkRecursive);\r\n        this.tree.setShowFolderCheckBox(this.showFolderCheckBox);\r\n        this.tree.setShowRadioButton(this.showRadioButton);\r\n        this.tree.setExpandOnNodeClick(this.expandOnNodeClick);\r\n        if(this.autoLoad !== undefined) {\r\n            this.tree.setAutoLoad(this.autoLoad);\r\n        }\r\n        if (!mini.isNull(this.defaultRowHeight)) this.tree.defaultRowHeight = this.defaultRowHeight;\r\n\r\n\r\n        // this.tree.on(\"nodeclick\", this.__OnNodeClick, this);\r\n        var me = this;\r\n        this.tree.on('nodeclick', function (e) {\r\n            setTimeout(function () {\r\n                me.__OnNodeClick(e);\r\n            }, 10);\r\n        }, this);\r\n\r\n        this.tree.on('nodecheck', this.__OnCheckedChanged, this);\r\n        this.tree.on('expand', this.__OnTreeExpand, this);\r\n        this.tree.on('collapse', this.__OnTreeCollapse, this);\r\n        this.tree.on('beforenodecheck', this.__OnTreeBeforeNodeCheck, this);\r\n        this.tree.on('beforenodeselect', this.__OnTreeBeforeNodeSelect, this);\r\n        this.tree.on('drawnode', this.__OnDrawNode, this);\r\n        this.tree.useAnimation = false;\r\n\r\n        this.tree.set({\r\n            showToolbar: this.showFilter,\r\n            filterMode: this.filterMode,\r\n            filterUrl: this.filterUrl\r\n        });\r\n        // 添加过滤后事件处理，解决过滤后树的选中状态与控件值不对应问题\r\n        this.tree.on('filter', this.__OnFilter, this);\r\n        //\r\n        //this.tree.setVirtualScroll(true);\r\n\r\n        this.tree.on('beforeload', function(e) {\r\n            me.fire('beforeload', e);\r\n        }, this);\r\n        this.tree.on('load', function(e) {\r\n            me.fire('load', e);\r\n        }, this);\r\n        this.tree.on('loaderror', function(e) {\r\n            me.fire('loaderror', e);\r\n        }, this);\r\n\r\n        this.tree.on('loadnode', this.__OnLoadNode, this);\r\n    },\r\n    __OnLoadNode: function (e) {\r\n        if (this.value && this.tree) {\r\n            this.tree.setValue(this.value);\r\n        }\r\n        this.fire('loadnode', e);\r\n    },\r\n    __OnDrawNode: function(e) {\r\n        this.fire('drawnode', e);\r\n    },\r\n    __OnTreeBeforeNodeCheck: function(e) {\r\n        e.tree = e.sender;\r\n        this.fire('beforenodecheck', e);\r\n    },\r\n    __OnTreeBeforeNodeSelect: function(e) {\r\n\r\n        e.tree = e.sender;\r\n        this.fire('beforenodeselect', e);\r\n        if (e.cancel) {\r\n            this._nohide = true;\r\n        }\r\n    },\r\n    __OnTreeExpand: function(e) {\r\n        //this.showPopup();\r\n    },\r\n    __OnTreeCollapse: function(e) {\r\n        //this.showPopup();\r\n    },\r\n    __OnFilter: function() {\r\n        this.tree.setValue(this.value);\r\n    },\r\n\r\n    findItems: function(value) {\r\n        return this.tree.findNodes(this.tree.getIdField(), value);\r\n    },\r\n    //    getNodesByValue: function (value) {\r\n    //        return this.tree.getNodesByValue(this.value); \r\n    //    },\r\n    findNodes: function(value) {\r\n        return this.tree.getNodesByValue(value);\r\n    },\r\n    getSelectedNode: function() {\r\n        //return this.tree.getSelectedNode();\r\n        //return this.tree._dataSource.getNodesByValue(this.value)[0];\r\n        return this.getSelectedNodes()[0];\r\n    },\r\n\r\n    //null:原始节点;true包含父节点;false不包含父节点\r\n    getCheckedNodes: function(hasParent) {\r\n        //return this.tree.getCheckedNodes(hasParent);\r\n        //return this.tree.getNodesByValue(this.value);\r\n\r\n\r\n        var nodes = this.tree.getNodesByValue(this.value);\r\n\r\n        if (hasParent === false) hasParent = 'leaf';\r\n        nodes = this.tree._dataSource.doGetCheckedNodes(nodes, hasParent);\r\n\r\n        return nodes;\r\n\r\n    },\r\n    getSelectedNodes: function() {\r\n        //return this.tree.getSelectedNodes()\r\n        return this.tree.getNodesByValue(this.value);\r\n    },\r\n    getParentNode: function(node) {\r\n        return this.tree.getParentNode(node);\r\n    },\r\n    getChildNodes: function(node) {\r\n        return this.tree.getChildNodes(node);\r\n    },\r\n    //    _OnValueChanged: function () {\r\n    //        if (this.validateOnChanged) {\r\n    //            this.validate();\r\n    //        }\r\n    //        var e = { value: this.getValue() };\r\n    //        if (this.multiSelect == false) {\r\n    //            e.node = this.tree.getSelectedNode();\r\n    //            e.isLeaf = this.tree.isLeaf(e.node);\r\n    //        }\r\n    //        this.fire(\"valuechanged\", e);\r\n    //        \r\n    //    },\r\n    showPopup: function() {\r\n        //        var ex = { cancel: false };\r\n        //        this.fire(\"beforeshowpopup\", ex);\r\n        //        if (ex.cancel == true) return;\r\n\r\n        //this.tree.setHeight(\"auto\");\r\n\r\n\r\n        var ex = { cancel: false };\r\n        this.fire('beforeshowpopup', ex);\r\n        this._firebeforeshowpopup = false;\r\n        if (ex.cancel == true) return;\r\n\r\n\r\n        var h = this.popup.el.style.height;\r\n        //        if (h == \"\" || h == \"auto\") {\r\n        //            this.tree.setHeight(\"auto\");\r\n        //        } else {\r\n        //            //this.tree.setHeight(\"100%\");\r\n        //        }\r\n\r\n        mini.TreeSelect.superclass.showPopup.call(this);\r\n        \r\n        this.tree.setValue(this.value, false);\r\n\r\n        if (this.expandOnPopup) {\r\n            this.tree.expandPath(this.value);\r\n        }\r\n\r\n        this._nohide = false;\r\n    },\r\n    expandOnPopup: false,\r\n    setExpandOnPopup: function(value) {\r\n        this.expandOnPopup = value;\r\n    },\r\n    getExpandOnPopup: function() {\r\n        return this.expandOnPopup;\r\n    },\r\n\r\n    //    hidePopup: function () {\r\n    //        this.tree.clearFilter();\r\n    //        mini.TreeSelect.superclass.hidePopup.call(this);\r\n    //    },\r\n    __OnPopupHide: function(e) {\r\n        this.__doFocusCls();\r\n        this.tree.clearFilter();\r\n        this.fire('hidepopup');\r\n    },\r\n    getItem: function(item) {\r\n        return typeof item === 'object' ? item : this.data[item];\r\n    },\r\n    indexOf: function(item) {\r\n        return this.data.indexOf(item);\r\n    },\r\n    getAt: function(index) {\r\n        return this.data[index];\r\n    },\r\n    loadList: function(list, idField, parentField) {\r\n        this.tree.loadList(list, idField, parentField);\r\n        this.data = this.tree.getData();\r\n        this._getCheckedValue();\r\n    },\r\n    getList: function() {\r\n        return this.tree.getList();\r\n    },\r\n    load: function(data) {\r\n        this.tree.load(data);\r\n        this.data = this.tree.data;\r\n        this._getCheckedValue();\r\n    },\r\n    _eval: function(_) {\r\n        return eval('(' + _ + ')');\r\n    },\r\n    setData: function(data) {\r\n        if (typeof data === 'string') {\r\n            data = this._eval(data);\r\n        }\r\n        if (!mini.isArray(data)) data = [];\r\n        this.tree.setData(data);\r\n        this.data = this.tree.data;\r\n        this._getCheckedValue();\r\n    },\r\n    getData: function() {\r\n        return this.data;\r\n    },\r\n    _getCheckedValue: function() {\r\n        var value = this.tree.getValue();\r\n        this.setValue(value);\r\n    },\r\n    setUrl: function(url) {\r\n        this.getPopup();\r\n\r\n        //        this.tree.set({\r\n        //            idField: this.valueField,\r\n        //            parentField: this.\r\n        //    });\r\n\r\n        this.tree.setUrl(url);\r\n        this.url = this.tree.url;\r\n        this.data = this.tree.data;\r\n        this._getCheckedValue();\r\n    },\r\n\r\n    getUrl: function() {\r\n        return this.url;\r\n    },\r\n    virtualScroll: false,\r\n    setVirtualScroll: function(value) {\r\n        if (this.tree) this.tree.setVirtualScroll(value);\r\n        this.virtualScroll = value;\r\n    },\r\n    getVirtualScroll: function() {\r\n        return this.virtualScroll;\r\n    },\r\n\r\n    defaultRowHeight: 23,\r\n    setDefaultRowHeight: function(value) {\r\n        if (this.tree) this.tree.defaultRowHeight = value;\r\n        this.defaultRowHeight = value;\r\n    },\r\n    getDefaultRowHeight: function() {\r\n        return this.defaultRowHeight;\r\n    },\r\n\r\n    pinyinField: 'tag',\r\n    setPinyinField: function(value) {\r\n        //if (this._listbox) this._listbox.setPhoneticField(value);\r\n        this.pinyinField = value;\r\n    },\r\n    getPinyinField: function() {\r\n        return this.pinyinField;\r\n    },\r\n\r\n    setTextField: function(value) {\r\n        if (this.tree) this.tree.setTextField(value);\r\n        this.textField = value;\r\n    },\r\n    getTextField: function() {\r\n        return this.textField;\r\n    },\r\n    setNodesField: function(value) {\r\n        if (this.tree) this.tree.setNodesField(value);\r\n        this.nodesField = value;\r\n    },\r\n    getNodesField: function() {\r\n        return this.nodesField;\r\n    },\r\n    setDataField: function(value) {\r\n        if (this.tree) this.tree.setDataField(value);\r\n        this.dataField = value;\r\n    },\r\n    getDataField: function() {\r\n        return this.dataField;\r\n    },\r\n    ///////////\r\n    getValue: function() {\r\n        var value = mini.TreeSelect.superclass.getValue.call(this);\r\n        if (this.valueFromSelect && value && this.findItems(value).length == 0) {\r\n            return '';\r\n        }\r\n        return value;\r\n    },\r\n    setValue: function(value, notUpdateTree) {\r\n        //if (this.value != value) {\r\n\r\n        var vts = this.tree.getValueAndText(value);\r\n        if (vts[1] == '' && !this.valueFromSelect) {\r\n            vts[0] = value;\r\n            vts[1] = value;\r\n        }\r\n        this.value = value;\r\n\r\n        this._valueEl.value = value;\r\n\r\n        !notUpdateTree && this.tree && this.tree.setValue(value);\r\n\r\n        //if (vts[1]) {\r\n\r\n        // this.text = this._textEl.value = vts[1];\r\n        \r\n        // 安全整改要求，服务端返回数据是对html编码的，但是提交时需要还原成正常的html标签\r\n        this.text = this._textEl.value = mini.htmlDecode(vts[1]);\r\n        //}\r\n\r\n        this._doEmpty();\r\n        //}\r\n        //this.tree.setValue(this.value);\r\n    },\r\n    setMultiSelect: function(value) {\r\n        if (this.multiSelect != value) {\r\n            this.multiSelect = value;\r\n            this.tree.setShowCheckBox(value);\r\n            this.tree.setAllowSelect(!value);\r\n            this.tree.setEnableHotTrack(!value);\r\n        }\r\n    },\r\n    getMultiSelect: function() {\r\n        return this.multiSelect;\r\n    },\r\n    __OnNodeClick: function(e) {\r\n\r\n        if (this.multiSelect) return;\r\n\r\n        var node = this.tree.getSelectedNode();\r\n        var vts = this.tree.getValueAndText(node);\r\n        var v = vts[0];\r\n\r\n        var value = this.getValue();\r\n        this.setValue(v);\r\n        if (value != this.getValue()) {\r\n            this._OnValueChanged();\r\n        }\r\n\r\n        if (this._nohide !== true) {\r\n            this.hidePopup();\r\n            // this.focus();\r\n            if (!isMobile) {\r\n                this.focus();\r\n            }\r\n        }\r\n        this._nohide = false;\r\n        this.fire('nodeclick', { node: e.node });\r\n    },\r\n    __OnCheckedChanged: function(e) {\r\n\r\n        if (!this.multiSelect) return;\r\n\r\n        var v = this.tree.getValue(!this.checkRecursive);\r\n\r\n        var value = this.getValue();\r\n        this.setValue(v);\r\n        if (value != this.getValue()) {\r\n            this._OnValueChanged();\r\n        }\r\n        // this.focus();\r\n        if (!isMobile) {\r\n            this.focus();\r\n        }\r\n    },\r\n\r\n\r\n    __OnInputKeyDown: function(e) {\r\n        var ex = { htmlEvent: e };\r\n        this.fire('keydown', ex);\r\n        if (e.keyCode == 8 && (this.isReadOnly() || this.allowInput == false)) {\r\n            return false;\r\n        }\r\n\r\n        if (e.keyCode == 9) { //tab\r\n            if (this.isShowPopup()) {\r\n                this.hidePopup();\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this.isReadOnly()) return;\r\n        var me = this;\r\n        switch (e.keyCode) {\r\n            case 27: //esc\r\n                if (this.isShowPopup()) {\r\n                    e.stopPropagation();\r\n                }\r\n\r\n                this.hidePopup();\r\n                break;\r\n            case 13: //enter                \r\n                setTimeout(function() {\r\n                    me.fire('enter', ex);\r\n                }, 10);\r\n                break;\r\n            case 37: //left\r\n                break;\r\n            case 38: //top\r\n                e.preventDefault();\r\n                break;\r\n            case 39: //right\r\n                break;\r\n            case 40: //bottom\r\n                e.preventDefault();\r\n                this.showPopup();\r\n                break;\r\n            default:\r\n                if (this.allowInput == false) {} else {\r\n                    setTimeout(function() {\r\n                        me._doQuery();\r\n                    }, 10);\r\n                }\r\n                break;\r\n        }\r\n    },\r\n    _doQuery: function() {\r\n        if (this.multiSelect) return;\r\n        var field = this.textField,\r\n            pinyinField = this.pinyinField;\r\n        var value = this._textEl.value.toLowerCase();\r\n        this.tree.filter(function(node) {\r\n            var text = String(node[field] ? node[field] : '').toLowerCase();\r\n            var pinyin = String(node[pinyinField] ? node[pinyinField] : '').toLowerCase();\r\n\r\n            if (text.indexOf(value) != -1 || pinyin.indexOf(value) != -1) {\r\n                return true;\r\n            } return false;\r\n        });\r\n        this.tree.expandAll();\r\n        this.showPopup();\r\n    },\r\n    ////////////////////////////////////\r\n\r\n    setCheckRecursive: function(value) {\r\n\r\n        this.checkRecursive = value;\r\n        if (this.tree) this.tree.setCheckRecursive(value);\r\n    },\r\n    getCheckRecursive: function() {\r\n        return this.checkRecursive;\r\n    },\r\n    setResultAsTree: function(value) {\r\n        this.resultAsTree = value;\r\n        if (this.tree) this.tree.setResultAsTree(value);\r\n    },\r\n    getResultAsTree: function() {\r\n        return this.resultAsTree;\r\n    },\r\n    setParentField: function(value) {\r\n        this.parentField = value;\r\n        if (this.tree) this.tree.setParentField(value);\r\n    },\r\n    getParentField: function() {\r\n        return this.parentField;\r\n    },\r\n    setValueField: function(valueField) {\r\n\r\n        if (this.tree) this.tree.setIdField(valueField);\r\n        this.valueField = valueField;\r\n    },\r\n    getValueField: function() {\r\n        return this.valueField;\r\n    },\r\n    setShowTreeIcon: function(value) {\r\n        this.showTreeIcon = value;\r\n        if (this.tree) this.tree.setShowTreeIcon(value);\r\n    },\r\n    getShowTreeIcon: function() {\r\n        return this.showTreeIcon;\r\n    },\r\n    setShowTreeLines: function(value) {\r\n        this.showTreeLines = value;\r\n        if (this.tree) this.tree.setShowTreeLines(value);\r\n    },\r\n    getShowTreeLines: function() {\r\n        return this.showTreeLines;\r\n    },\r\n    setShowFolderCheckBox: function(value) {\r\n\r\n        this.showFolderCheckBox = value;\r\n        if (this.tree) this.tree.setShowFolderCheckBox(value);\r\n    },\r\n    getShowFolderCheckBox: function() {\r\n        return this.showFolderCheckBox;\r\n    },\r\n    setShowRadioButton: function(value) {\r\n\r\n        this.showRadioButton = value;\r\n        if (this.tree) this.tree.setShowRadioButton(value);\r\n    },\r\n    getShowRadioButton: function() {\r\n        return this.showRadioButton;\r\n    },\r\n\r\n    setAutoCheckParent: function(value) {\r\n\r\n        this.autoCheckParent = value;\r\n        if (this.tree) this.tree.setAutoCheckParent(value);\r\n    },\r\n    getAutoCheckParent: function() {\r\n        return this.autoCheckParent;\r\n    },\r\n    setExpandOnLoad: function(value) {\r\n\r\n        this.expandOnLoad = value;\r\n        if (this.tree) this.tree.setExpandOnLoad(value);\r\n    },\r\n    getExpandOnLoad: function() {\r\n        return this.expandOnLoad;\r\n    },\r\n    setValueFromSelect: function(value) {\r\n        this.valueFromSelect = value;\r\n    },\r\n    getValueFromSelect: function() {\r\n        return this.valueFromSelect;\r\n    },\r\n\r\n    expandOnNodeClick: false,\r\n    setExpandOnNodeClick: function(value) {\r\n        this.expandOnNodeClick = value;\r\n        if (this.tree) this.tree.setExpandOnNodeClick(value);\r\n    },\r\n    getExpandOnNodeClick: function() {\r\n        return this.expandOnNodeClick;\r\n    },\r\n\r\n    getFilterUrl: function() {\r\n        return this.filterUrl || this.url;\r\n    },\r\n\r\n    getShowFilter: function() {\r\n        return this.showFilter;\r\n    },\r\n\r\n    setShowFilter: function(showFilter) {\r\n        this.showFilter = showFilter;\r\n        this.tree.set({\r\n            showToolbar: showFilter\r\n        });\r\n    },\r\n\r\n    setFilterUrl: function(filterUrl) {\r\n        this.filterUrl = filterUrl;\r\n        this.tree.setFilterUrl(filterUrl);\r\n    },\r\n\r\n    getFilterMode: function() {\r\n        return this.filterMode;\r\n    },\r\n\r\n    setFilterMode: function(filterMode) {\r\n        this.filterMode = filterMode;\r\n        this.tree.setFilterMode(filterMode);\r\n    },\r\n    \r\n    clear: function() {\r\n        this.tree._filterInput.setValue('');\r\n        this.tree._filterInput.setText('');\r\n        this.tree._doFilter('');\r\n    },\r\n\r\n    getAttrs: function(el) {\r\n        var attrs = mini.TreeSelect.superclass.getAttrs.call(this, el);\r\n\r\n        mini._ParseString(el, attrs, ['url', 'data', 'textField', 'pinyinField', 'valueField', 'nodesField', 'parentField', 'onbeforenodecheck', 'onbeforenodeselect',\r\n            'expandOnLoad', 'onnodeclick', 'onbeforeload', 'onload', 'onloaderror', 'ondrawnode', 'filterMode', 'filterUrl'\r\n        ]);\r\n        mini._ParseBool(el, attrs, ['expandOnNodeClick', 'multiSelect', 'resultAsTree', 'checkRecursive', 'showTreeIcon', 'showTreeLines',\r\n            'showFolderCheckBox', 'showRadioButton', 'autoLoad',\r\n            'autoCheckParent', 'valueFromSelect', 'virtualScroll', 'expandOnPopup', 'showFilter', 'showFullPath', 'includeRootNode'\r\n        ]);\r\n        mini._ParseInt(el, attrs, ['defaultRowHeight']);\r\n\r\n        if (attrs.expandOnLoad) {\r\n            var level = parseInt(attrs.expandOnLoad);\r\n            if (mini.isNumber(level)) {\r\n                attrs.expandOnLoad = level;\r\n            } else {\r\n                attrs.expandOnLoad = attrs.expandOnLoad == 'true' ? true : false;\r\n            }\r\n        }\r\n\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.TreeSelect, 'TreeSelect');\r\n\r\njQuery(function () {\r\n    setTimeout(function () {\r\n        try {\r\n            var activeElement = mini.getActiveElement();\r\n            if (activeElement) {\r\n                var jq = jQuery(activeElement).closest('.mini-buttonedit, .mini-textbox');\r\n                if (jq.length) {\r\n                    var o = mini.get(jq[0]);\r\n                    if (o) {\r\n                        o.blur();\r\n                        o.focus();\r\n                    }\r\n                }\r\n            }\r\n        } catch (ex) {\r\n            \r\n        }\r\n    }, 100);\r\n});\r\n\r\n\nmini.VerifyCode = function () {\r\n    mini.VerifyCode.superclass.constructor.apply(this, arguments);\r\n};\r\n\r\nmini.extend(mini.VerifyCode, mini.Control, {\r\n    url: '',\r\n\r\n    autoLoad: true,\r\n\r\n    width: 78,\r\n    height: 32,\r\n    charLength: 4,\r\n\r\n    uiCls: 'mini-verifycode',\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var url = kv.url;\r\n        delete kv.url;\r\n\r\n        mini.VerifyCode.superclass.set.call(this, kv);\r\n\r\n        if (url) {\r\n            this.setUrl(url);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    _create: function () {\r\n        this.el = document.createElement('div');\r\n\r\n        this.el.innerHTML = '<img title=\"看不清楚，换一个？\"></img>';\r\n\r\n        this._img = this.el.firstChild;\r\n\r\n    },\r\n\r\n    _initEvents: function () {\r\n        var me = this;\r\n        mini.on(this._img, 'click', function () {\r\n            me._doLoad({\r\n                width: parseInt(this.width),\r\n                height: parseInt(this.height),\r\n                charLength: me.charLength\r\n            });\r\n        });\r\n    },\r\n\r\n\r\n    setData: function (data) {\r\n        this.value = data.value;\r\n        this._img.src = data.src;\r\n        this.uuid = data.uuid;\r\n    },\r\n\r\n    setUrl: function (url) {\r\n        this.url = url;\r\n\r\n        if (this.autoLoad) {\r\n            this._doLoad({\r\n                width: parseInt(this.width),\r\n                height: parseInt(this.height),\r\n                charLength: this.charLength\r\n            });\r\n        }\r\n    },\r\n\r\n    getUrl: function () {\r\n        return this.url;\r\n    },\r\n\r\n    _doLoad: function (params) {\r\n        params = params || {};\r\n        var e = {\r\n            url: this.url,\r\n            async: false,\r\n            type: this.ajaxType ? this.ajaxType : 'post',\r\n            data: params,\r\n            params: params,\r\n            cache: false,\r\n            cancel: false\r\n        };\r\n        this.fire(\"beforeload\", e);\r\n        if (e.data != e.params && e.params != params) {\r\n            e.data = e.params;\r\n        }\r\n        if (e.cancel == true) return;\r\n\r\n        var sf = me = this;\r\n        var url = e.url;\r\n        mini.copyTo(e, {\r\n            success: function (text, textStatus, xhr) {\r\n                delete e.params;\r\n                var obj = {\r\n                    text: text,\r\n                    result: null,\r\n                    sender: me,\r\n                    options: e,\r\n                    xhr: xhr\r\n                };\r\n                var result = null;\r\n                try {\r\n                    mini_doload(obj);\r\n                    result = obj.result;\r\n                    if (!result) {\r\n                        result = mini.decode(text);\r\n                    }\r\n                } catch (ex) {\r\n                    if (mini_debugger == true) {\r\n                        alert(url + \"\\njson is error.\");\r\n                    }\r\n                }\r\n                result = {\r\n                    data: result\r\n                };\r\n\r\n                var ex = {\r\n                    data: result.data,\r\n                    cancel: false,\r\n                    result: result\r\n                }\r\n                sf.fire(\"preload\", ex);\r\n                if (ex.cancel == true) return;\r\n\r\n                sf.setData(ex.data);\r\n\r\n                delete ex.cancel;\r\n                sf.fire(\"load\", ex);\r\n\r\n            },\r\n            error: function (xhr, textStatus, errorThrown) {\r\n                var e = {\r\n                    xhr: xhr,\r\n                    text: xhr.responseText,\r\n                    textStatus: textStatus,\r\n                    errorMsg: xhr.responseText,\r\n                    errorCode: xhr.status\r\n                };\r\n                if (mini_debugger == true) {\r\n                    alert(url + \"\\n\" + e.errorCode + \"\\n\" + e.errorMsg);\r\n                }\r\n                sf.fire(\"loaderror\", e);\r\n            }\r\n        });\r\n\r\n        this._ajaxer = mini.ajax(e);\r\n    },\r\n\r\n    getAttrs: function (el) {\r\n        var attrs = mini.VerifyCode.superclass.getAttrs.call(this, el);\r\n        mini._ParseString(el, attrs,\r\n            [\"url\", \"data\", \"onbeforeload\", \"onload\", \"onloaderror\", \"onpreload\"]\r\n        );\r\n        mini._ParseBool(el, attrs,\r\n            [\"autoLoad\"]\r\n        );\r\n\r\n        mini._ParseInt(el, attrs,\r\n            [\"charLength\"]\r\n        );\r\n        return attrs;\r\n    }\r\n});\r\n\r\nmini.regClass(mini.VerifyCode, \"verifycode\");\n/**\r\n * 富文本编辑器\r\n * @class\r\n * @extends mini.Control\r\n * @requires mini.TextArea\r\n * @requires eWebEditor\r\n * \r\n */\r\nmini.WebEditor = function() {\r\n    mini.WebEditor.superclass.constructor.call(this);\r\n};\r\nmini.extend(mini.WebEditor, mini.Control, {\r\n    width: \"100%\",\r\n    height: '350px',\r\n    readOnly: false,\r\n    // ewebeditor使用的样式名\r\n    editstyle: \"coolblue\",\r\n    // ewebeditor使用的皮肤名\r\n    editSkin: \"flat10\",\r\n    value: \"\",\r\n    uiCls: \"mini-webeditor\",\r\n    formField: true,\r\n    _editorModel: window.mini_editor_model || 'ewebeditor',\r\n    /**\r\n     * 创建实例\r\n     * @private\r\n     * @member mini.WebEditor\r\n     */\r\n    _create: function() {\r\n        this.el = document.createElement(\"div\");\r\n        this.el.innerHTML = '<textarea style=\"display:none\"></textarea>';\r\n        this._fromEditor = this.el.firstChild;\r\n        this._editor = new mini.TextArea();\r\n        this._editor.setVisible(false);\r\n        this._editor.render(this.el);\r\n        var that = this;\r\n\r\n        this.externalSrc = this.externalSrc || mini.externalSrc;\r\n\r\n        if (this._editorModel === 'ewebeditor') {\r\n            if (!window.EWEBEDITOR) {\r\n                mini.loadJS(this.externalSrc + 'ewebeditor/ewebeditor.js', function() {\r\n                    that._initEditor();\r\n                });\r\n            } else {\r\n                this._initEditor();\r\n            }\r\n        } else {\r\n            if (!window.UE) {\r\n                mini.loadJS(this.externalSrc + 'ueditor/ueditor.config.js', function() {\r\n                    mini.loadJS(that.externalSrc + 'ueditor/ueditor.all.js', function() {\r\n                        that._initEditor();\r\n                    });\r\n                });\r\n            } else {\r\n                this._initEditor();\r\n            }\r\n        }\r\n\r\n    },\r\n    /**\r\n     * @inheritdoc\r\n     * @member mini.WebEditor\r\n     */\r\n    render: function(el) {\r\n        mini.WebEditor.superclass.constructor.call(this, el);\r\n    },\r\n    /**\r\n     * 初始化富文本编辑器\r\n     * @private\r\n     * @member mini.WebEditor\r\n     */\r\n    _initEditor: function() {\r\n        var that = this;\r\n        setTimeout(function() {\r\n            that._doInitEditor();\r\n        }, 1);\r\n    },\r\n    /**\r\n     * 执行真正的初始化操作\r\n     * @private\r\n     * @member mini.WebEditor\r\n     * @fires initeditor\r\n     */\r\n    _doInitEditor: function() {\r\n        if (this.isRender() === false) {\r\n            return;\r\n        }\r\n        if (this.editor) {\r\n            return;\r\n        }\r\n        var that = this;\r\n        this._editor.set({\r\n            name: this.id,\r\n            id: this.id + \"_editor\"\r\n        });\r\n        this._fromEditor.id = this.id + \"_fromEditor\";\r\n\r\n        if (this._editorModel === 'ewebeditor') {\r\n            this.editor = EWEBEDITOR.Replace(this._fromEditor.id, {\r\n                width: this.width.replace(\"px\", \"\"),\r\n                height: this.height.replace(\"px\", \"\"),\r\n                readonly: this.readOnly ? '2' : '',\r\n                style: this.editstyle,\r\n                skin: this.editSkin\r\n            });\r\n\r\n            var _o_EWEBEDITOR_EVENT = window.EWEBEDITOR_EVENT;\r\n            window.EWEBEDITOR_EVENT =function(ev) {\r\n                if(ev.flag === 'LoadComplete'){\r\n                    if(that.readOnlyChanged) {\r\n                        that.editor.setReadOnly(that.readOnly ? '2' : '');\r\n                    }\r\n                    that._loadComplete = true;\r\n                    \r\n                    that.fire('init', {\r\n                        sender: that,\r\n                        type: \"init\"\r\n                    });\r\n                }\r\n\r\n                _o_EWEBEDITOR_EVENT && _o_EWEBEDITOR_EVENT(ev);\r\n            }\r\n\r\n        } else {\r\n            this.editor = UE.getEditor(this._fromEditor.id, {\r\n                initialFrameWidth: this.width.replace(\"px\", \"\"),\r\n                readonly: this.readOnly\r\n            });\r\n\r\n            this.editor.ready(function() {\r\n\r\n                // 由于textarea是隐藏的，生成出来的编辑器也会自动隐藏，需要让编辑器显示出来\r\n                that.editor.container.parentElement.style.display = '';\r\n\r\n                // 由于ready是异步的，就有可能在调用setValue方法前已进行初始化，但在调用setValue方法时还未ready，就会造成value没有设置到编辑器上\r\n                that.value && that.editor.setContent(that.value);\r\n\r\n                that._$toolbar = jQuery(that.editor.container).find('.edui-editor-toolbarbox');\r\n                that._$footer = jQuery(that.editor.container).find('.edui-editor-bottomContainer');\r\n\r\n                that.setHeight(that.height);\r\n\r\n                that.fire('init', {\r\n                    sender: that,\r\n                    type: \"init\"\r\n                });\r\n            });\r\n        }\r\n    },\r\n\r\n    getEditor: function() {\r\n\r\n        return this.editor;\r\n    },\r\n        /**\r\n     * 获取内部原生editor\r\n     * @param {Fucntion/undefined} callback 获取成功的触发的回调函数，参数为获取到的editor\r\n     * @return {Promise} jQuery模拟的Promise\r\n     */\r\n    getEditorPromise: function (callback) {\r\n        var that = this,\r\n            dtd = jQuery.Deferred(),\r\n            reGetCount = 0;\r\n\r\n        function _getEditor() {\r\n            // 超时直接判定初始化失败 暂定50次 即一秒\r\n            if (reGetCount++ > 50) return dtd.reject(new Error('富文本控件初始化超时！'));\r\n            \r\n            var editor = that.editor;\r\n            // 已经存在则成功 否则20ms后重试\r\n            if (editor) {\r\n                setTimeout(function () {\r\n                    dtd.resolve(editor);\r\n                    if (typeof callback === 'function') {\r\n                        callback(editor);\r\n                    }\r\n                });\r\n            } else {\r\n                setTimeout(_getEditor, 20);\r\n            }\r\n        }\r\n\r\n        _getEditor();\r\n\r\n        return dtd.promise();\r\n    },\r\n    /**\r\n     * 设置富文本编辑器的值\r\n     * @param {String} value 要设置的值\r\n     * @member mini.WebEditor\r\n     */\r\n    setValue: function(value) {\r\n        this.value = this._fromEditor.value = value;\r\n\r\n        if (this._editorModel === 'ewebeditor') {\r\n            // 异步调用setHTML方法\r\n            // 防止ewebeditor未初始化好就调用setValue导致值未赋值上去\r\n            window.EWEBEDITOR && EWEBEDITOR.SetHtmlAsync(this._fromEditor.id, value);\r\n        } else {\r\n            if (this.editor && this.editor.isReady) {\r\n                this.editor.setContent(value);\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * 获取富文本编辑器的值\r\n     * @return {String} 富文本编辑器的值\r\n     * @member mini.WebEditor\r\n     */\r\n    getValue: function() {\r\n        if (this._editorModel === 'ewebeditor') {\r\n            if (this.editor && this.editor.getHTML) {\r\n                return this.editor.getHTML();\r\n            }\r\n        } else {\r\n            if (this.editor && this.editor.isReady) {\r\n                return this.editor.getContent();\r\n            }\r\n        }\r\n        return this.value;\r\n    },\r\n\r\n    /**\r\n     * 设置富文本编辑器实际提交的数据\r\n     * @member mini.Richtext\r\n     */\r\n    setSubmitData: function() {\r\n        if (this._editor) {\r\n            this._editor.setValue(this.getValue());\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 获取富文本编辑器实际提交的数据\r\n     * @return {String} 富文本编辑器实际提交的数据\r\n     * @member mini.Richtext\r\n     */\r\n    getSubmitData: function() {\r\n        if (this._editor) {\r\n            return this._editor.getValue();\r\n        }\r\n        return this.getValue();\r\n    },\r\n\r\n    /**\r\n     * 设置富文本编辑器的只读属性\r\n     * @param {Boolean} readonly `true` 表示只读， `false` 表示非只读\r\n     * @member mini.WebEditor\r\n     */\r\n    setReadOnly: function(readonly) {\r\n        if (this.editor) {\r\n            if (this._editorModel === 'ewebeditor') {\r\n                if(this._loadComplete) {\r\n                    this.editor.setReadOnly(readonly ? '2' : '');\r\n                } else {\r\n                    this.readOnlyChanged = true;\r\n                }\r\n            } else {\r\n\r\n                if (this.editor.isReady) {\r\n                    if (readonly) {\r\n                        this.editor.setDisabled('fullscreen');\r\n                    } else {\r\n                        this.editor.setEnabled();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.readOnly = readonly;\r\n    },\r\n\r\n    /**\r\n     * 获取富文本编辑器的只读属性\r\n     * @return {Boolean} 如果当前为只读状态，则返回 `true`，否则返回 `false`\r\n     * @member mini.WebEditor\r\n     */\r\n    getReadOnly: function() {\r\n        return this.readOnly;\r\n    },\r\n\r\n    setHeight: function(height) {\r\n        // ewebeditor没有提供调整高度的方法，所以不提供动态调整\r\n        if (this._editorModel === 'ueditor') {\r\n            if(height == '100%') {\r\n                height = jQuery(this.el.parentElement).height();\r\n            } else {\r\n                height = parseInt(height);\r\n\r\n            }\r\n            \r\n            if(height) {\r\n                this.height = height;\r\n                if(this.editor && this.editor.isReady) {\r\n\r\n                    this.editor.setHeight(height - this._$toolbar.height() - this._$footer.height());\r\n                }\r\n            }\r\n        }\r\n        \r\n    },\r\n\r\n    getAttrs: function(el) {\r\n        var attrs = mini.WebEditor.superclass.getAttrs.call(this, el);\r\n        attrs.text = el.innerHTML;\r\n        mini._ParseString(el, attrs, [\"value\", \"text\", \"editstyle\", \"editSkin\", \"oninit\"]);\r\n        mini._ParseBool(el, attrs, [\"readOnly\"]);\r\n\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.WebEditor, \"webeditor\");\r\n\nmini.WebUploader = function () {\r\n    mini.WebUploader.superclass.constructor.call(this);\r\n};\r\nmini.extend(mini.WebUploader, mini.Control, {\r\n    uiCls: \"mini-webuploader\",\r\n    uploadUrl: \"\",\r\n    // 允许的文件后缀，不带点，多个用逗号分割\r\n    limitType: \"\",\r\n    mimeTypes: \"\",\r\n    auto: true,\r\n    fileNumLimit: undefined,\r\n    fileSizeLimit: undefined,\r\n    fileSingleSizeLimit: undefined,\r\n    fileNameLengthLimit: 100,\r\n    chunked: false,\r\n    chunkSize: 5120,\r\n    chunkRetry: 2,\r\n    // duplicate {Boolean} [可选] [默认值：undefined] 去重， 根据文件名字、文件大小和最后修改时间来生成hash Key.\r\n    duplicate: undefined,\r\n\r\n    needMD5: false,\r\n\r\n    // 上传按钮是否显示图标\r\n    showIcon: true,\r\n\r\n    // 压缩\r\n    compress: false,\r\n\r\n    // 请求超时\r\n    timeout: 120000,\r\n    // 上传并发数。允许同时最大上传进程数。\r\n    threads: 3,\r\n\r\n    // 第三方资源的路径，默认为全局配置mini.externalSrc的值\r\n    externalSrc: '',\r\n    // 上传状态\r\n    state: 'pending',\r\n    \r\n    // 关联的拖拽容器的 选择器\r\n    dnd: '',\r\n\r\n    pickerText: '选择文件',\r\n    startText: '开始上传',\r\n    pauseText: '暂停上传',\r\n    numLimitErrorText: '选择的文件过多！</br>最多可上传{0}个文件',\r\n    sizeLimitErrorText: '选择的文件过大！</br>最多可上传{0}KB文件',\r\n    typeDeniedErrorText: '选择的文件类型错误！</br>可上传的文件类型为：{0}',\r\n    sizeErrorText: '选择的文件过大！</br>可上传的单文件最大为{0}KB',\r\n    emptyFileErrorText: '不能上传空文件！',\r\n    duplicateErrorText: '不能上传重复的文件！',\r\n    fileNameLengthErrorText: '选择的文件名称长度过长！</br>文件名最长为{0}个字符',\r\n\r\n    set: function (kv) {\r\n        if (typeof kv == 'string') {\r\n            return this;\r\n        }\r\n\r\n        var pickerText = kv.pickerText;\r\n        delete kv.pickerText;\r\n\r\n        // 有下拉菜单\r\n        if (kv.menu && jQuery(kv.menu).length) {\r\n            this._showSplit = true;\r\n            this.menu = kv.menu;\r\n\r\n            delete kv.menu;\r\n        }\r\n        // 自己指定附件列表容器\r\n        if(kv.fileList && jQuery(kv.fileList).length) {\r\n            this.setFileList(jQuery(kv.fileList)[0]);\r\n\r\n            delete kv.fileList;\r\n        }\r\n\r\n        mini.WebUploader.superclass.set.call(this, kv);\r\n\r\n        if (pickerText) {\r\n            this.pickerText = pickerText;\r\n            this._pickerText.innerHTML = pickerText;\r\n        }\r\n\r\n        this._initUploader();\r\n\r\n        return this;\r\n    },\r\n    /**\r\n     * 创建实例\r\n     * @private\r\n     * @member mini.WebUploader\r\n     */\r\n    _create: function () {\r\n        this.el = document.createElement(\"div\");\r\n\r\n        this.el.innerHTML = '<div class=\"mini-uploader-btns\"><label class=\"mini-btn-pick\"><i class=\"mini-button-icon icon-upload\"></i><span class=\"mini-btn-pick-text\">' + this.pickerText + '</span></label></div>' +\r\n            '<div class=\"mini-uploader-list\"></div>';\r\n\r\n        this._buttons = this.el.firstChild;\r\n        this._fileList = this.el.lastChild;\r\n\r\n        this._picker = this._buttons.firstChild;\r\n        this._pickerText = this._picker.lastChild;\r\n\r\n        this._uploadBtn = new mini.Button();\r\n        this._uploadBtn.setText(this.startText);\r\n        // this._editor.setVisible(false);\r\n        this._uploadBtn.render(this._buttons);\r\n\r\n        if(this.showIcon) {\r\n            mini.addClass(this._buttons, 'show-icon');\r\n        }\r\n\r\n        this._errorContent = '';\r\n\r\n        // 隐藏控件的显示，防止控件初始化时的页面闪烁\r\n        this._buttons.style.visibility = 'hidden';\r\n\r\n        this.on('render', this._initUploader, this);\r\n\r\n    },\r\n\r\n    _isInit: false,\r\n    _initUploader: function () {\r\n        var that = this;\r\n        if (!this.isInit) {\r\n            this.externalSrc = this.externalSrc || mini.externalSrc;\r\n\r\n            if (!window.WebUploader) {\r\n                mini.loadJS(this.externalSrc + 'webuploader/webuploader.min.js', function () {\r\n                    that._createUploader();\r\n                });\r\n            } else {\r\n                this._createUploader();\r\n            }\r\n                \r\n            // 加载右侧下拉菜单\r\n            if (this._showSplit) {\r\n                this._splitBtn = new mini.MenuButton();\r\n                this._splitBtn.setMenu(this.menu);\r\n                this._splitBtn.render(jQuery(this.el).find('.mini-btn-pick')[0], 'after');\r\n\r\n                mini.addClass(this._buttons, 'dropdown-menu');\r\n            }\r\n\r\n            this.isInit = true;\r\n        }\r\n    },\r\n\r\n    _createUploader: function () {\r\n        var accept = null,\r\n            that = this;\r\n        if (this.limitType) {\r\n            accept = {\r\n                extensions: this.limitType,\r\n                mimeTypes: this.mimeTypes\r\n            };\r\n        }\r\n\r\n        this._fileMD5 = {};\r\n        if (this.chunked && !this._isInit) {\r\n            this._hasFinishedList = {};\r\n\r\n            // 注册事件是全局的，只需要注册一次\r\n            if (!window.isRegWebUploader) {\r\n                WebUploader.Uploader.register({\r\n                    'before-send-file': 'preupload',\r\n                    'before-send': 'checkchunk',\r\n                    'after-send-file': 'finished'\r\n                }, {\r\n                    preupload: function (file) {\r\n                        var me = this,\r\n                            owner = this.owner,\r\n                            server = me.options.server,\r\n                            deferred = WebUploader.Deferred(),\r\n\r\n                            // 通过file获取到触发上传的上传控件\r\n                            $refer = $(file.source._refer),\r\n                            $upload = $refer.closest('.mini-webuploader');\r\n\r\n                        that = mini.getAndCreate($upload[0]);\r\n\r\n                        if (that.chunked) {\r\n                            owner.md5File(file.source)\r\n\r\n                                // 如果读取出错了，则通过reject告诉webuploader文件上传出错。\r\n                                .fail(function () {\r\n                                    deferred.reject();\r\n                                })\r\n\r\n                                // md5值计算完成\r\n                                .then(function (md5) {\r\n\r\n                                    // 记录下文件的md5，以备上传完成时使用。\r\n                                    that._fileMD5[file.id] = md5;\r\n\r\n                                    // 在分片情况下生成一个唯一id，以方便后端管理临时文件\r\n                                    file.uuid = UUID();\r\n\r\n                                    var e = {\r\n                                        url: server,\r\n                                        data: {\r\n                                            fileMD5: md5,\r\n                                            fileName: file.name,\r\n                                            fileSize: file.size,\r\n                                            uploadGuid: file.uuid\r\n                                        }\r\n\r\n                                    };\r\n\r\n                                    that._onBeforeMd5File(e);\r\n\r\n                                    // 与服务端验证\r\n                                    $.ajax(e.url, {\r\n                                        dataType: 'json',\r\n                                        data: e.data,\r\n                                        type: 'post',\r\n                                        success: function (response) {\r\n\r\n                                            that._onMd5File(response, file);\r\n\r\n                                            // 接受此promise, webuploader接着往下走。\r\n                                            deferred.resolve();\r\n                                        },\r\n                                        error: function() {\r\n                                            deferred.reject();\r\n                                            if($.ajaxSettings.error) {\r\n                                                $.ajaxSettings.error.apply(this, arguments);\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                });\r\n\r\n                            return deferred.promise();\r\n                        }\r\n\r\n                    },\r\n\r\n                    checkchunk: function (block) {\r\n                        if (that.chunked) {\r\n                            var chunkIndex = ',' + block.chunk + ',',\r\n                                deferred = $.Deferred();\r\n\r\n                            if (that._existFileParts.indexOf(chunkIndex) > -1) {\r\n                                deferred.reject();\r\n                            } else {\r\n                                deferred.resolve();\r\n                            }\r\n\r\n                            return deferred.promise();\r\n                        }\r\n                    },\r\n\r\n                    finished: function (file) {\r\n                        var deferred = WebUploader.Deferred();\r\n\r\n                        if (that.chunked) {\r\n                            // 之前已上传完成的不用再发已完成请求了\r\n                            if (that._hasFinishedList[file.id]) {\r\n                                that._hasFinishedList[file.id] = false;\r\n                                delete that._hasFinishedList[file.id];\r\n\r\n                                return;\r\n                            }\r\n                            var e = {\r\n                                url: that.uploadUrl,\r\n                                data: {\r\n                                    fileMD5: that._fileMD5[file.id],\r\n                                    fileName: file.name,\r\n                                    fileSize: file.size,\r\n                                    uploadGuid: file.uuid,\r\n                                    contentType: file.type\r\n                                }\r\n\r\n                            };\r\n                            that._onBeforeMd5FileFinished(e);\r\n\r\n                            // 告诉服务端验文件已发完\r\n                            $.ajax(e.url, {\r\n                                dataType: 'json',\r\n                                data: e.data,\r\n                                type: 'post',\r\n                                success: function (response) {\r\n\r\n                                    that._onMd5FileFinished(response, file);\r\n\r\n                                    delete that._fileMD5[file.id];\r\n\r\n                                },\r\n                                error: function() {\r\n                                    deferred.reject();\r\n                                    if($.ajaxSettings.error) {\r\n                                        $.ajaxSettings.error.apply(this, arguments);\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n\r\n                window.isRegWebUploader = true;\r\n            }\r\n\r\n\r\n        } else if (this.needMD5) {\r\n            WebUploader.Uploader.register({\r\n                'before-send-file': 'preupload'\r\n            }, {\r\n                preupload: function (file) {\r\n                    var me = this,\r\n                        owner = this.owner,\r\n                        deferred = WebUploader.Deferred();\r\n\r\n                    owner.md5File(file.source)\r\n\r\n                        // 如果读取出错了，则通过reject告诉webuploader文件上传出错。\r\n                        .fail(function () {\r\n                            deferred.reject();\r\n                        })\r\n\r\n                        // md5值计算完成\r\n                        .then(function (md5) {\r\n\r\n                            // 记录下文件的md5，以备上传完成时使用。\r\n                            that._fileMD5[file.id] = md5;\r\n\r\n                            // 接受此promise, webuploader接着往下走。\r\n                            deferred.resolve();\r\n\r\n                        });\r\n\r\n                    return deferred.promise();\r\n                }\r\n            });\r\n        }\r\n        // 防止配置错误导致无法解析\r\n        if (this.dnd && !jQuery(this.dnd).length) {\r\n            window.console && window.console.error && console.error('配置的上传拖拽元素选择器无效，无法找到 ' + this.dnd + ' 这个元素');\r\n            this.dnd = '';\r\n        }\r\n        // 对未安装flash的IE9及以下浏览器给出安装flash的提示\r\n        try {\r\n            this._uploader = WebUploader.create({\r\n                // swf文件路径\r\n                swf: this.externalSrc + 'webuploader/Uploader.swf',\r\n\r\n                // 文件接收服务端。\r\n                server: this.uploadUrl,\r\n\r\n                // 选择文件的按钮。\r\n                // pick: this._picker,\r\n                // fileNumLimit为1时，应该设置其不能多选\r\n                pick: {\r\n                    id: this._picker,\r\n                    multiple: this.fileNumLimit == 1 ? false : true\r\n                },\r\n                dnd: this.dnd,\r\n\r\n                // 是否自动上传\r\n                auto: this.auto,\r\n\r\n                // 最大文件总数量\r\n                fileNumLimit: this.fileNumLimit,\r\n\r\n                // 最大文件总大小\r\n                fileSizeLimit: this.fileSizeLimit * 1024,\r\n\r\n                // 单个文件最大大小\r\n                fileSingleSizeLimit: this.fileSingleSizeLimit * 1024,\r\n\r\n                // 可接受的文件类型\r\n                accept: accept,\r\n\r\n                // 是否要分片处理大文件上传\r\n                chunked: this.chunked,\r\n\r\n                // 如果要分片，分多大一片\r\n                chunkSize: this.chunkSize * 1024,\r\n\r\n                // 如果某个分片由于网络问题出错，允许自动重传多少次\r\n                chunkRetry: this.chunkRetry,\r\n\r\n                // 压缩\r\n                compress: this.compress,\r\n\r\n                //  是否不去重，默认为undefined，即不可上传文件名字、文件大小和最后修改时间来生成hash Key相同的文件\r\n                //                              为true时表示可上传相同文件。\r\n                duplicate: this.duplicate,\r\n\r\n                timeout: this.timeout,\r\n\r\n                threads: this.threads\r\n            });\r\n        } catch (e) {\r\n            if (e.message == 'Runtime Error') {\r\n                // IE9以下，且未安装FLASH时，提示用户下载安装\r\n                if (mini.isIE9 || mini.isIE8 || mini.isIE7 || mini.isIE6) {\r\n                    try {\r\n                        new ActiveXObject('ShockwaveFlash.ShockwaveFlash');\r\n                    } catch (e) {\r\n                        that.el.innerHTML = '<a class=\"noflash\" title=\"要使用上传功能，请下载安装Falsh后，刷新页面\" href=\"http://get.adobe.com/flashplayer/\" target=\"_blank\">初始化错误</a>';\r\n                        mini.showPageWarning({\r\n                            html: '检测到您的系统未安装Flash，上传功能不可用。请<a href=\"http://get.adobe.com/flashplayer/\" target=\"_blank\">下载安装Falsh</a>后，刷新页面'\r\n                        });\r\n                    }\r\n\r\n\r\n                }\r\n\r\n            } else {\r\n                throw e;\r\n            }\r\n            return;\r\n        }\r\n        // END\r\n\r\n        this._uploader.on('beforeFileQueued', function (file) {\r\n            return that._beforeFileQueued(file);\r\n\r\n        }).on('filesQueued', function (files) {\r\n            that._onFilesQueued(files);\r\n\r\n        }).on('fileDequeued', function (file) {\r\n            that._onFileDequeued(file);\r\n\r\n        }).on('reset', function () {\r\n            that._onReset();\r\n\r\n        }).on('startUpload', function () {\r\n            that._onStartUpload();\r\n\r\n        }).on('stopUpload', function () {\r\n            that._onStopUpload();\r\n\r\n        }).on('uploadFinished', function () {\r\n            that._onUploadFinished();\r\n\r\n        }).on('uploadStart', function (file) {\r\n            that._onUploadStart(file);\r\n\r\n        }).on('uploadBeforeSend', function (object, data, headers) {\r\n            // 当某个文件的分块在发送前触发，主要用来询问是否要添加附带参数，大文件在开起分片上传的前提下此事件可能会触发多次。\r\n            // object {Object}\r\n            // data {Object}默认的上传参数，可以扩展此对象来控制上传参数。\r\n            // headers {Object}可以扩展此对象来控制上传头部。\r\n            that._onUploadBeforeSend(object, data, headers);\r\n\r\n        }).on('uploadAccept', function (object, ret) {\r\n            // 当某个文件上传到服务端响应后，会派送此事件来询问服务端响应是否有效。如果此事件handler返回值为false, 则此文件将派送server类型的uploadError事件。\r\n            // object {Object}\r\n            // ret {Object}服务端的返回数据，json格式，如果服务端不是json格式，从ret._raw中取数据，自行解析。\r\n            return that._onUploadAccept(object, ret);\r\n\r\n        }).on('uploadProgress', function (file, percentage) {\r\n            that._onUploadProgress(file, percentage);\r\n\r\n        }).on('uploadSuccess', function (file, response) {\r\n            that._onUploadSuccess(file, response);\r\n\r\n        }).on('uploadError', function (file, reason) {\r\n            that._onUploadError(file, reason);\r\n\r\n        }).on('uploadComplete', function (file) {\r\n            that._onUploadComplete(file);\r\n\r\n        }).on('all', function (type) {\r\n            // 控制状态\r\n            if (type === 'startUpload') {\r\n                that.state = 'uploading';\r\n            } else if (type === 'stopUpload') {\r\n                that.state = 'paused';\r\n            } else if (type === 'uploadFinished') {\r\n                that.state = 'done';\r\n            }\r\n\r\n            // 非自动上传，根据状态调整上传按钮的显示文字\r\n            if (!that.auto && that.state === 'uploading') {\r\n                that._uploadBtn.setText(that.pauseText);\r\n            } else {\r\n                that._uploadBtn.setText(that.startText);\r\n            }\r\n\r\n        }).on('error', function (type) {\r\n            // 构建出错信息\r\n            switch (type) {\r\n                case 'Q_EXCEED_NUM_LIMIT':\r\n                    that._errorContent = String.format(that.numLimitErrorText, that.fileNumLimit);\r\n                    break;\r\n                case 'Q_EXCEED_SIZE_LIMIT':\r\n                    that._errorContent = String.format(that.sizeLimitErrorText, that.fileSizeLimit);\r\n                    break;\r\n                case 'Q_TYPE_DENIED':\r\n                    that._errorContent = String.format(that.typeDeniedErrorText, that.limitType);\r\n                    break;\r\n                case 'F_EXCEED_SIZE':\r\n                    that._errorContent = String.format(that.sizeErrorText, that.fileSingleSizeLimit);\r\n                    break;\r\n                case 'Q_EMPTY_FILE':\r\n                    that._errorContent = that.emptyFileErrorText;\r\n                    break;\r\n                case 'F_DUPLICATE':\r\n                    that._errorContent = that.duplicateErrorText;\r\n                    break;\r\n            }\r\n\r\n        }).on('ready', function () {\r\n            that._uploaderPick = that._picker.lastChild;\r\n            if (!that.enabled) {\r\n                that._uploader.disable();\r\n                jQuery(that._uploaderPick).detach();\r\n            }\r\n            that.fire('init', {\r\n                sender: that,\r\n                type: \"init\"\r\n            });\r\n        });\r\n\r\n        // 非自动上传，绑定上传按钮的点击事件\r\n        if (!this.auto) {\r\n            this._uploadBtn.on('click', function () {\r\n                if (that.state === 'uploading') {\r\n                    that._uploader.stop(true);\r\n                } else {\r\n                    that._uploader.upload();\r\n                }\r\n            });\r\n        } else {\r\n            // 自动上传，隐藏上传按钮\r\n            this._uploadBtn.hide();\r\n        }\r\n\r\n\r\n        // 初始化完，显示控件\r\n        this._buttons.style.visibility = 'visible';\r\n        this._isInit = true;\r\n    },\r\n\r\n    getFileList: function () {\r\n        return this._fileList;\r\n    },\r\n    setFileList: function(fileList) {\r\n        if(fileList && this._fileList != fileList) {\r\n            this._fileList = fileList;\r\n            this._unbindDefaultUIEvents && this._unbindDefaultUIEvents();\r\n            this._initEvents();\r\n        }\r\n    },\r\n\r\n    getUploader: function () {\r\n        // 由于初始化可能是异步的，this._uploader不确定什么时候初始化完成\r\n        // 这里先暂时用等待1秒\r\n        // Ugly code 待优化\r\n        /**\r\n         * 下面这段代码没有任何实际意义只是跑了1s的死循环而已\r\n         * 因为这段代码执行中一致占据进程，如果调用的时候初始化未完成，则永远是未完成状态\r\n         */\r\n        // if (!this._uploader) {\r\n        //     var start = Date.now(),\r\n        //         diff = 0;\r\n        //     while (!this._uploader && diff < 1) {\r\n        //         diff = new Date(Date.now() - start).getSeconds();\r\n        //     }\r\n        // }\r\n        return this._uploader;\r\n    },\r\n    /**\r\n     * 获取内部原生uploader\r\n     * @param {Fucntion/undefined} callback 获取成功的触发的回调函数，参数为获取到的uploader\r\n     * @return {Promise} jQuery模拟的Promise\r\n     */\r\n    getUploaderPromise: function (callback) {\r\n        var that = this,\r\n            dtd = jQuery.Deferred(),\r\n            reGetCount = 0;\r\n\r\n        function _getUploader() {\r\n            // 超时直接判定初始化失败 暂定50次 即一秒\r\n            if (reGetCount++ > 50) return dtd.reject(new Error('上传控件初始化超时！'));\r\n            \r\n            var uploader = that._uploader;\r\n            // 已经存在则成功 否则20ms后重试\r\n            if (uploader) {\r\n                setTimeout(function () {\r\n                    dtd.resolve(uploader);\r\n                    if (typeof callback === 'function') {\r\n                        callback(uploader);\r\n                    }\r\n                });\r\n            } else {\r\n                setTimeout(_getUploader, 20);\r\n            }\r\n        }\r\n\r\n        _getUploader();\r\n\r\n        return dtd.promise();\r\n    },\r\n\r\n    retry: function (file) {\r\n        this._uploader.retry(file);\r\n    },\r\n\r\n    removeFile: function (file) {\r\n        this._uploader.removeFile(file, true);\r\n    },\r\n\r\n    clearFile: function () {\r\n        var files = this._uploader.getFiles();\r\n\r\n        for (var i = files.length - 1; i >= 0; i--) {\r\n            this.removeFile(files[i]);\r\n        }\r\n    },\r\n\r\n    refresh: function () {\r\n        this._uploader && this._uploader.refresh();\r\n    },\r\n    // 当文件被加入队列之前触发，此事件的handler返回值为false，则此文件不会被添加进入队列。\r\n    _beforeFileQueued: function (file) {\r\n        if (this._events[\"beforefilequeued\"]) {\r\n            var event = {\r\n                source: this,\r\n                sender: this,\r\n                type: 'beforefilequeued',\r\n                file: file,\r\n                cancel: false\r\n            };\r\n\r\n            this.fire(\"beforefilequeued\", event);\r\n\r\n            if (event.cancel) {\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n    },\r\n    // 当有文件添加进来的时候\r\n    _onFilesQueued: function (files) {\r\n        // 如果有出错信息，则显示\r\n        if (this._errorContent) {\r\n            mini.alert(this._errorContent);\r\n        }\r\n        this._errorContent = \"\";\r\n\r\n        this.fire(\"filesqueued\", {\r\n            files: files\r\n        });\r\n    },\r\n    // 当文件被移除队列后触发\r\n    _onFileDequeued: function (file) {\r\n        this.fire(\"filedequeued\", {\r\n            file: file\r\n        });\r\n    },\r\n    // 当 uploader 被重置的时候触发\r\n    _onReset: function () {\r\n        this.fire(\"reset\");\r\n    },\r\n\r\n    // 当开始上传流程时触发\r\n    _onStartUpload: function () {\r\n        this.fire(\"startupload\");\r\n    },\r\n    // 当上传流程暂停时触发\r\n    _onStopUpload: function () {\r\n        this.fire(\"stopupload\");\r\n    },\r\n    // 当所有文件上传结束时触发\r\n    _onUploadFinished: function () {\r\n        this.fire(\"uploadfinished\");\r\n    },\r\n    // 某个文件开始上传前触发\r\n    _onUploadStart: function (file) {\r\n\r\n        this.fire(\"uploadstart\", {\r\n            file: file\r\n        });\r\n    },\r\n    // 当某个文件的分块在发送前触发，主要用来询问是否要添加附带参数，大文件在开起分片上传的前提下此事件可能会触发多次\r\n    _onUploadBeforeSend: function (object, data, headers) {\r\n        // 非分片并且指定needMD5的，上传参数中需加文件的MD5值\r\n        if (!this.chunked && this.needMD5) {\r\n            data.fileMD5 = this._fileMD5[data.id];\r\n            delete this._fileMD5[data.id];\r\n        }\r\n        this.fire(\"uploadbeforesend\", {\r\n            object: object,\r\n            data: data,\r\n            headers: headers\r\n        });\r\n    },\r\n    // 当某个文件上传到服务端响应后，会派送此事件来询问服务端响应是否有效。如果此事件handler返回值为false, 则此文件将派送server类型的uploadError事件。\r\n    _onUploadAccept: function (object, ret) {\r\n        if (this._events['uploadaccept']) {\r\n            var event = {\r\n                source: this,\r\n                sender: this,\r\n                type: 'uploadaccept',\r\n                object: object,\r\n                ret: ret,\r\n                cancel: false\r\n            };\r\n            this.fire('uploadaccept', event);\r\n\r\n            if (event.cancel) {\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n    },\r\n    // 文件上传过程中触发。\r\n    _onUploadProgress: function (file, percentage) {\r\n\r\n        this.fire(\"uploadprogress\", {\r\n            file: file,\r\n            percentage: percentage\r\n        });\r\n    },\r\n    _onUploadSuccess: function (file, ret) {\r\n        this.fire(\"uploadsuccess\", {\r\n            file: file,\r\n            ret: ret\r\n        });\r\n    },\r\n    _onUploadError: function (file, reason) {\r\n        this.fire(\"uploaderror\", {\r\n            file: file,\r\n            reason: reason\r\n        });\r\n    },\r\n    _onUploadComplete: function (file) {\r\n        // jQuery('#' + file.id).find('.mini-uploader-progressbar').fadeOut();\r\n\r\n        this.fire(\"uploadcomplete\", {\r\n            file: file\r\n        });\r\n    },\r\n\r\n    _onBeforeMd5File: function (e) {\r\n        this.fire('beforemd5file', e);\r\n    },\r\n    _onBeforeMd5FileFinished: function (e) {\r\n        this.fire('beforemd5filefinished', e);\r\n    },\r\n    _existFileParts: '',\r\n    _onMd5File: function (response, file) {\r\n        // 如果验证已经上传过\r\n        if (response.fileFinished) {\r\n            this._uploader.skipFile(file);\r\n            this._hasFinishedList[file.id] = true;\r\n\r\n        } else {\r\n            this._existFileParts = response.existFileParts || '';\r\n            this._existFileParts = ',' + this._existFileParts + ',';\r\n        }\r\n    },\r\n\r\n    _onMd5FileFinished: function (response, file) {\r\n\r\n    },\r\n    /**\r\n     *\r\n     * function setUploadUrl(uploadUrl)\r\n     * @member mini.WebUploader\r\n     * @param {String} uploadUrl\r\n     *\r\n     */\r\n    setUploadUrl: function (uploadUrl) {\r\n        this.uploadUrl = uploadUrl;\r\n        if (this._uploader) {\r\n            this._uploader.option(\"server\", uploadUrl);\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function getUploadUrl()\r\n     * @member mini.WebUploader\r\n     * @returns {String}\r\n     *\r\n     */\r\n    getUploadUrl: function () {\r\n        return this.uploadUrl;\r\n    },\r\n    /**\r\n     *\r\n     * function setAuto(auto)\r\n     * @member mini.WebUploader\r\n     * @param {Boolen} auto\r\n     *\r\n     */\r\n    setAuto: function (auto) {\r\n        this.auto = auto;\r\n        if (this._uploader) {\r\n            this._uploader.option(\"auto\", auto);\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function getAuto()\r\n     * @member mini.WebUploader\r\n     * @returns {Boolen}\r\n     *\r\n     */\r\n    getAuto: function () {\r\n        return this.auto;\r\n    },\r\n    /**\r\n     * defaultCompres 默认压缩配置\r\n     * @type {Object}\r\n     */\r\n    defaultCompres: {\r\n        width: 1600,\r\n        height: 1600,\r\n\r\n        // 图片质量，只有type为`image/jpeg`的时候才有效。\r\n        quality: 90,\r\n\r\n        // 是否允许放大，如果想要生成小图的时候不失真，此选项应该设置为false.\r\n        allowMagnify: false,\r\n\r\n        // 是否允许裁剪。\r\n        crop: false,\r\n\r\n        // 是否保留头部meta信息。\r\n        preserveHeaders: true,\r\n\r\n        // 如果发现压缩后文件大小比原来还大，则使用原来图片\r\n        // 此属性可能会影响图片自动纠正功能\r\n        noCompressIfLarger: false,\r\n\r\n        // 单位字节，如果图片大小小于此值，不会采用压缩。\r\n        compressSize: 0\r\n    },\r\n    /**\r\n     * function setCompress(compress) 设置是否压缩\r\n     * @param {Boolea]} compress\r\n     */\r\n    setCompress: function (compress) {\r\n        this.compress = compress ? this.defaultCompres : false;\r\n\r\n        if (this._uploader) {\r\n            this._uploader.option(\"compress\", this.compress);\r\n        }\r\n    },\r\n    /**\r\n     * function getCompress ()\r\n     * @return {Boolean} [description]\r\n     */\r\n    getCompress: function () {\r\n        return this.compress ? true : false;\r\n    },\r\n    /**\r\n     *\r\n     * function setFileNumLimit(fileNumLimit)\r\n     * @member mini.WebUploader\r\n     * @param {int} fileNumLimit\r\n     *\r\n     */\r\n    setFileNumLimit: function (fileNumLimit) {\r\n        this.fileNumLimit = fileNumLimit;\r\n        if (this._uploader) {\r\n            this._uploader.option(\"fileNumLimit\", fileNumLimit);\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function getFileNumLimit()\r\n     * @member mini.WebUploader\r\n     * @returns {int}\r\n     *\r\n     */\r\n    getFileNumLimit: function () {\r\n        return this.fileNumLimit;\r\n    },\r\n    /**\r\n     *\r\n     * function setFileSizeLimit(fileSizeLimit)\r\n     * @member mini.WebUploader\r\n     * @param {int} fileSizeLimit\r\n     *\r\n     */\r\n    setFileSizeLimit: function (fileSizeLimit) {\r\n        this.fileSizeLimit = fileSizeLimit;\r\n        if (this._uploader) {\r\n            this._uploader.option(\"fileSizeLimit\", fileSizeLimit * 1024);\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function getFileSizeLimit()\r\n     * @member mini.WebUploader\r\n     * @returns {int}\r\n     *\r\n     */\r\n    getFileSizeLimit: function () {\r\n        return this.fileSizeLimit;\r\n    },\r\n    /**\r\n     *\r\n     * function setFileSingleSizeLimit(fileSingleSizeLimit)\r\n     * @member mini.WebUploader\r\n     * @param {int} fileSingleSizeLimit\r\n     *\r\n     */\r\n    setFileSingleSizeLimit: function (fileSingleSizeLimit) {\r\n        this.fileSingleSizeLimit = fileSingleSizeLimit;\r\n        if (this._uploader) {\r\n            this._uploader.option(\"fileSingleSizeLimit\", fileSingleSizeLimit * 1024);\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function getFileSingleSizeLimit()\r\n     * @member mini.WebUploader\r\n     * @returns {int}\r\n     *\r\n     */\r\n    getFileSingleSizeLimit: function () {\r\n        return this.fileSingleSizeLimit;\r\n    },\r\n    // /**\r\n    //  *\r\n    //  * function setLimitType(limitType)\r\n    //  * @member mini.WebUploader\r\n    //  * @param {String} limitType\r\n    //  *\r\n    //  */\r\n    // setLimitType: function(limitType) {\r\n    //     this.limitType = limitType;\r\n    //     if (this._uploader) {\r\n    //         this._uploader.option(\"accept\", {\r\n    //             extensions: this.limitType\r\n    //         });\r\n    //     }\r\n    // },\r\n    /**\r\n     *\r\n     * function getLimitType()\r\n     * @member mini.WebUploader\r\n     * @returns {String}\r\n     *\r\n     */\r\n    getLimitType: function () {\r\n        return this.limitType;\r\n    },\r\n\r\n    setLimitType: function (limitType) {\r\n        if (this.limitType != limitType) {\r\n            this.limitType = limitType;\r\n\r\n            if (this._uploader) {\r\n                if (!this._uploader.options.accept) {\r\n                    this._uploader.options.accept = [{}];\r\n                }\r\n                this._uploader.options.accept[0].extensions = this.limitType;\r\n\r\n                 // webuploader的设置accept属性存在bug，必须要执行下面这句\r\n                 this._uploader._init({\r\n                    accept: this._uploader.options.accept\r\n                });\r\n\r\n                // // flash版本下设置limitType是无效的，必须要重新生成一遍\r\n                // if (this._uploader.predictRuntimeType() == \"flash\") {\r\n                //     var options = this._uploader.options;\r\n                //     this._uploader.destroy();\r\n                //     this._picker.innerHTML = this.pickerText;\r\n                //     this._createUploader();\r\n                // } else {\r\n\r\n                //     // webuploader的设置accept属性存在bug，必须要执行下面这句\r\n                //     this._uploader._init({\r\n                //         accept: this._uploader.options.accept\r\n                //     });\r\n                // }\r\n\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * function getMimeTypes()\r\n     * @member mini.WebUploader\r\n     * @returns {String}\r\n     *\r\n     */\r\n    getMimeTypes: function () {\r\n        return this.mimeTypes;\r\n    },\r\n    setMimeTypes: function (mimeTypes) {\r\n        if (this.mimeTypes != mimeTypes) {\r\n            this.mimeTypes = mimeTypes;\r\n\r\n            if (this._uploader) {\r\n                if (!this._uploader.options.accept) {\r\n                    this._uploader.options.accept = [{}];\r\n                }\r\n                this._uploader.options.accept[0].mimeTypes = this.mimeTypes;\r\n                // 非flash模式下，需要额外设置input的accept属性才能生效\r\n                if (this._uploader.predictRuntimeType() != \"flash\") {\r\n                \tvar _uploader = this._uploader;\r\n                \tfunction setAccept(accept) {\r\n                \t\tvar $input = jQuery(_uploader.options.pick.id).find('input[type=\"file\"]');\r\n                \t\t\r\n                \t\tif($input.length) {\r\n                    \t\t$input.attr('accept', accept);\r\n                    \t} else {\r\n                    \t\tsetTimeout(function(){\r\n                    \t\t\tsetAccept(accept);\r\n                    \t\t}, 100);\r\n                    \t}\r\n                \t}\r\n                \tsetAccept(this.mimeTypes);\r\n                \t\r\n                }\r\n            }\r\n        }\r\n    },\r\n    setVisible: function (value) {\r\n        this.visible = value;\r\n        // ie8/9下直接隐藏会导致上传报错\r\n        if (this.el) {\r\n            if (value) {\r\n                mini.removeClass(this.el, 'invisible');\r\n                mini.removeClass(this._buttons, 'webuploader-element-invisible');\r\n            } else {\r\n                mini.addClass(this.el, 'invisible');\r\n                mini.addClass(this._buttons, 'webuploader-element-invisible');\r\n            }\r\n        }\r\n    },\r\n    setEnabled: function (value) {\r\n        this.enabled = value;\r\n        if (this.enabled) {\r\n            this.removeCls(this._disabledCls);\r\n            jQuery(this._uploaderPick).appendTo(this._picker);\r\n            if (this._uploader) {\r\n                this._uploader.enable();\r\n            }\r\n        } else {\r\n            this.addCls(this._disabledCls);\r\n            if (this._uploader) {\r\n                this._uploader.disable();\r\n            }\r\n            jQuery(this._uploaderPick).detach();\r\n        }\r\n        this._doReadOnly();\r\n    },\r\n    /**\r\n     * [getDuplicate 获取是否不去重]\r\n     * @return {[type]} [是否不去重]\r\n     */\r\n    getDuplicate: function () {\r\n        return this.duplicate;\r\n    },\r\n    /**\r\n     * [setDuplicate 设置是否不去重]\r\n     * @param {[Boolean]} duplicate [是否不去重，]\r\n     * 此属性只能初始化时一次指定，设置无效，因此暂时注释掉\r\n     */\r\n    // setDuplicate: function(duplicate) {\r\n    //     this.duplicate = duplicate;\r\n    //     if (this._uploader) {\r\n    //         this._uploader.option('duplicate', this.duplicate);\r\n    //     }\r\n    // },\r\n    setPickerText: function (text) {\r\n        this.pickerText = text;\r\n        this._pickerText.innerHTML = text;\r\n        \r\n    },\r\n    getPickerText: function () {\r\n        return this.pickerText;\r\n    },\r\n\r\n    setShowIcon: function (showIcon) {\r\n        if(this.showIcon !== showIcon) {\r\n            this.showIcon = showIcon;\r\n            showIcon ? mini.addClass(this._buttons, 'show-icon') : mini.removeClass(this._buttons, 'show-icon');\r\n        }\r\n    },\r\n\r\n    getAttrs: function (el) {\r\n        var attrs = mini.WebUploader.superclass.getAttrs.call(this, el);\r\n        attrs.text = el.innerHTML;\r\n        mini._ParseString(el, attrs, [\"uploadUrl\", \"limitType\", \"mimeTypes\", \"onbeforefilequeued\",\r\n            \"onfilesqueued\", \"onfiledequeued\", \"onreset\", \"onstartupload\", \"onstopupload\",\r\n            \"onuploadfinished\", \"onuploadstart\", \"onuploadbeforesend\", \"onuploadaccept\", \"onuploadprogress\",\r\n            \"onuploadsuccess\", \"onuploaderror\", \"onuploadcomplete\", \"pickerText\", \"onbeforemd5file\", \"onbeforemd5filefinished\", \"oninit\",\r\n            \"dnd\", 'editurl', 'editext', 'previewurl', 'previewext', 'menu', 'fileList'\r\n        ]);\r\n        mini._ParseBool(el, attrs, [\"auto\", \"chunked\", \"compress\", \"needMD5\", 'duplicate', 'showIcon']);\r\n        mini._ParseInt(el, attrs, [\"fileNumLimit\", \"fileSizeLimit\", \"fileSingleSizeLimit\", \"chunkSize\", \"chunkRetry\", \"timeout\", \"threads\"]);\r\n\r\n        return attrs;\r\n    }\r\n});\r\nmini.regClass(mini.WebUploader, \"webuploader\");"],"names":["mini","components","uids","ux","doc","document","window","isReady","createTime","Date","byClass","cls","el","byId","jQuery","getComponents","id","cs","c","isControl","push","get","charAt","substr","control","uid","getbyUID","findControls","fn","scope","controls","ret","call","getChildControls","parent","pel","isAncestor","within","emptyFn","createNameControls","obj","pre","name","i","l","length","toUpperCase","substring","getsByName","parentNode","getsbyName","parentControl","body","this","getbyName","getByName","getParams","url","params","location","href","split","us","ps","decodeURIComponent","unescape","ex","reg","cmp","unreg","classes","uiClasses","getClass","className","toLowerCase","getClassByUICls","uiCls","idPre","idIndex","newId","copyTo","to","from","p","copyIf","isNull","createDelegate","apply","arguments","isElement","appendChild","isDate","value","getFullYear","isArray","unshift","undefined","isNumber","isNaN","isEquals","a","b","getTime","String","forEach","array","method","list","clone","o","sort","func","j","len","removeAt","insert","elWarp","createElement","mini_debugger","mini_useShims","mini_ajaxAsyncInvoke","mini_regClass","clazz","prototype","type","mini_extend","newClass","sp","overrides","sb","sbp","spp","superclass","constructor","extend","regClass","debug","namespace","names","_BindCallbacks","_BindEvents","_EventTimer","setTimeout","_FireBindEvents","e","_getFunctoin","fnName","cacheParts","createPathParts","path","parts","field","index","indexOf","splice","parseInt","getValueByPath","listColumnRenderer","column","values","textField","valueMaps","editor","_editor","__editor","create","valueField","getValueField","getTextField","data","getData","_valueMaps","_data","getList","text","texts","valueFromSelect","join","_getMap","v","_setMap","obj2","as","n1","n2","createArray","num","defaultValue","arr","getAndCreate","uiConfig","ui","set","Component","_events","_idPre","_id","_idSet","_canFire","kv","_allowLayout","key","renderTo","render","on","setter","doLayout","fire","event","handlers","source","sender","listener","Function","findListener","un","remove","setId","Error","_valueEl","_textEl","getId","destroy","Control","_create","_initEvents","_clearBorder","style","borderWidth","addCls","setWidth","width","setHeight","height","display","visible","_displayStyle","applyTo","jsName","readOnly","enabled","tooltip","_readOnlyCls","_disabledCls","target","setName","getName","isAutoHeight","isAutoWidth","isFixedSize","isRender","tagName","position","before","prepend","after","getEl","setJsName","getJsName","setTooltip","title","tooltipPlacement","attr","getTooltip","_sizeChanged","getWidth","content","w","outerWidth","_borderEl","b2","getBorders","left","right","getHeight","h","outerHeight","top","bottom","getBox","setBorderStyle","setStyle","getBorderStyle","borderStyle","padding","getStyle","setCls","getCls","addClass","removeCls","removeClass","_doReadOnly","setReadOnly","getReadOnly","getParent","pcontrol","isReadOnly","setEnabled","getEnabled","enable","disable","setVisible","getVisible","show","hide","isDisplay","ignoresFn","WindowVisible","_allowUpdate","beginUpdate","endUpdate","doUpdate","canLayout","enableLayout","layoutChanged","_destroyChildren","removeEl","destroyed","_destroying","onclick","ondblclick","onmousedown","onmouseup","onmousemove","onmouseover","onmouseout","onkeydown","onkeyup","oncontextmenu","clearEvent","removeNode","_contentEl","_errorIconEl","focus","blur","allowAnim","setAllowAnim","getAllowAnim","_getMaskWrapEl","mask","options","html","_maskCls","unmask","isLoading","loadingMsg","loading","msg","setLoadingMsg","getLoadingMsg","_getContextMenu","parse","items","__OnHtmlContextMenu","ev","popupEl","htmlEvent","cancel","contextMenu","showAtPos","pageX","pageY","setContextMenu","owner","getContextMenu","setDefaultValue","getDefaultValue","setValue","getValue","ajaxData","ajaxType","ajaxOptions","setAjaxOptions","getAjaxOptions","setAjaxData","getAjaxData","setAjaxType","getAjaxType","_afterApply","dataField","setDataField","getDataField","tabIndex","setTabIndex","getTabIndex","getAttrs","attrs","_ParseString","_ParseBool","cssText","isIE9","bg","background","ts","_attrs","t","_ParseInt","regHtmlAttr","__mini_setControls","contentEl","append","Container","setControls","getContentEl","getBodyEl","ValidatorBase","required","requiredErrorText","_requiredCls","errorText","_errorCls","_invalidCls","errorMode","validateOnChanged","validateOnLeave","_IsValid","forceValidate","setForceValidate","getForceValidate","keyNavEnabled","setKeyNavEnabled","getKeyNavEnabled","indentSpace","_indentCls","setIndentSpace","getIndentSpace","isEditable","allowInput","_tryValidate","_tryValidateTimer","clearTimeout","me","validate","isValid","trim","setIsValid","doUpdateValid","getIsValid","setValidateOnChanged","getValidateOnChanged","setValidateOnLeave","getValidateOnLeave","setErrorMode","getErrorMode","setErrorText","getErrorText","setRequired","getRequired","setRequiredErrorText","getRequiredErrorText","errorIconEl","getErrorIconEl","_RemoveErrorIcon","__doUpdateValid","errorTooltipPlacement","icon","doValueChanged","_OnValueChanged","oldValue","_oldValue","onValueChanged","onValidation","getAttribute","attributes","_labelLayout","border","_labelLayouted","labelField","_labelEl","offsetWidth","_doLabelLayout","_labelFieldCls","label","labelStyle","setLabelField","innerHTML","getLabelField","setLabel","getLabel","setLabelStyle","getLabelStyle","ListControl","_selecteds","delimiter","setDelimiter","getDelimiter","valueInCheckOrder","setValueInCheckOrder","getValueInCheckOrder","_itemCls","_itemHoverCls","_itemSelectedCls","setData","setUrl","mini_onOne","__OnClick","__OnDblClick","__OnMouseDown","__OnMouseUp","__OnMouseMove","__OnMouseOver","__OnMouseOut","__OnKeyDown","__OnKeyUp","__OnContextMenu","setAttr","getItemByEvent","domItem","findParent","getAttr","addItemCls","item","itemEl","getItemEl","removeItemCls","getItem","_createItemId","getElementById","_focusItem","view","dom","scrollIntoView","_focusedItem","_blurItem","getFocusedItem","row","getFocusedIndex","_scrollViewEl","findItems","getCount","getAt","updateItem","load","loadData","deselectAll","records","selects","_doLoad","getUrl","ajaxMethod","_evalAjaxData","sf","async","cache","success","textStatus","xhr","result","mini_doload","decode","alert","error","errorThrown","responseText","errorMsg","errorCode","status","_ajaxer","ajax","setSelected","getFormValue","setValueField","setTextField","getItemValue","getItemText","getValueAndText","index1","index2","record","k","valueRecords","removeAll","removeItems","addItems","insertRange","addItem","removeRange","_checkSelecteds","removeItem","moveItem","_isSelectedAll","isSelected","_selected","multiSelect","vts","setMultiSelect","getMultiSelect","getSelecteds","select","getSelected","deselect","deselects","selectAll","clearSelect","_doSelects","_createCheckId","checkbox","checked","_OnSelectionChanged","selecteds","selected","_clickTime","_fireEvent","allowDeselect","setAllowDeselect","getAllowDeselect","_OnItemClick","preventDefault","__NullItem","_blurOnOut","_OnItemMouseOut","_OnItemMouseMove","onItemClick","onItemMouseDown","onBeforeLoad","onLoad","onLoadError","onPreLoad","getText","nodeName","op","_Layouts","layout","mustLayout","childNodes","cel","toString","layoutIFrames","config","_applyTo","defaultText","replaceChild","_mini_set","_doParse","hasClass","children","getChildNodes","node","nodeType","_Removes","_firstParse","parsed","_doms","getElementsByTagName","doms","d","src","loaded","_onload","onload","_src","isIE","property","_ParseColumns","columns","filter","subCs","ii","li","subNode","removeChild","i3","l3","header","dataType","_Columns","_getColumn","columnType","columnFn","IndexColumn","ignoreCollapseIndex","cellCls","align","draggable","allowDrag","hideable","init","grid","__OnIndexChanged","isTree","_gridUID","_rowIdField","getNumberId","createNumber","rowIndex","pageIndex","pageSize","renderer","cellStyle","s","getPageIndex","getPageSize","__updateRowNumbers","getDataView","ck","_toIndex","CheckColumn","headerCls","_multiRowSelect","_checkedAll","getCheckId","__OnSelectionChanged","__OnHeaderCellClick","_doCheckState","checkedCls","toArray","virtual","isVirtualScroll","region","_viewRegion","start","end","map","getVisibleRows","_timer","sels","ExpandColumn","headerAlign","__OnCellClick","isShowRowDetail","isShow","autoHideRowDetail","hideAllRowDetail","hideRowDetail","showRowDetail","CheckBoxColumn","_type","editMode","trueValue","falseValue","getCheckBoxEl","isChecked","oneditchange","_OnCellCommitEdit","_OnCellEndEdit","allowCellEdit","isEditingRow","toggleClass","keyCode","currentCell","getCurrentCell","tv","fv","RadioButtonColumn","updateRow","that","_dataSource","_setModified","_doUpdateRow","ComboBoxColumn","TreeSelectColumn","_Resizer","allowResize","_getResizeDrag","_resizeDragger","Drag","capture","onStart","_OnDragStart","onMove","_OnDragMove","onStop","_OnDragStop","drag","proxy","cursor","elBox","setBox","xOffset","now","yOffset","minWidth","minHeight","maxWidth","maxHeight","setSize","box","_topWindow","_getTopWindow","hasMini","getParents","__ps","_winid","Owner","fixIEFocus","vbox","getViewportBox","input","_WindowID","Math","floor","random","iframeParams","createIFrame","onIFrameLoad","urls","isMHT","div","iframe","canFireLoad","attachEvent","__OnLoad","form","firstLoad","_ondestroy","contentWindow","write","close","action","enctype","appendTo","submit","_doOpen","allowModal","closeAction","titleIcon","iconCls","iconStyle","bodyStyle","showCloseButton","showFooter","ondestroy","win","Window","getTopWindow","open","targetWindow","openTop","_getResult","returnText","mini_RootPath","mini_CreateJSPath","js","scripts","ss","mini_JSPath","update","loadText","createSingle","Type","single","createTopSingle","typeName","sortTypes","string","date","parseDate","float","val","parseFloat","replace","int","currency","_ValidateVType","vtype","vtypes","vv","vt","args","VTypes","vtext","format","_getErrorText","minDateErrorText","maxDateErrorText","uniqueErrorText","emailErrorText","urlErrorText","floatErrorText","intErrorText","dateErrorText","maxLengthErrorText","minLengthErrorText","maxErrorText","minErrorText","rangeLengthErrorText","rangeCharErrorText","rangeErrorText","email","search","str_url","RegExp","test","n","formatDate","maxLength","minLength","rangeLength","min","max","rangeChar","range","summaryTypes","count","avg","total","sum","formatCurrency","prefix","sign","abs","cents","getByUid","fps","delay","bd","move","stop","contextmenu","context","trigger","selectable","setCapture","captureEvents","Event","MOUSEMOVE","MOUSEUP","MOUSEDOWN","started","startTime","stopPropagation","timer","releaseCapture","MouseButton","Right","button","JSON","dateRe1","dateRe2","re","_dateFormat","useHasOwn","hasOwnProperty","replaceString","m","charCodeAt","doEncode","getMonth","getDate","getHours","getMinutes","getSeconds","strReg1","strReg2","Object","\b","\t","\n","\f","\r","\"","\\","encode","dateFormat","json","evalParse","__js_dateRegEx","__js_dateRegEx2","json2","lastIndex","exec","_clear","clearProp","_state","_pid","_uid","Array","DAY_MS","HOUR_MS","MINUTE_MS","clearTime","maxTime","cloneDate","addDate","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds","getMilliseconds","getWeek","year","month","day","y","jd","d4","L","NumberOfWeek","getWeekStartDate","weekStartDay","getDay","getShortWeek","week","dateInfo","daysShort","getLongWeek","daysLong","getShortMonth","monthsShort","getLongMonth","monthsLong","quarterLong","quarterShort","halfYearLong","patterns","D","f","F","g","G","T","U","tt","AM","PM","ten","Early","Mid","Late","today","clockType","getHalfYear","getQuarter","locale","fd","pattern","halfyear","quarter","escapeDateTimeTokens","$0","$1","dayOfWeek","hour","halfHour","minutes","seconds","tenF","fixDate","check","setTime","ignoreTimezone","match","parseISO8601","offset","Number","setUTCFullYear","setUTCHours","parseTime","ch","t1","t2","t3","cultures","cultureName","findCulture","getCulture","current","numberFormat","number","decimals","decimalsSeparator","groupSeparator","groupSize","percent","symbol","culture","STRING","NUMBER","numberRegExp","2","4","pad","digits","zeros","repeat","numberFormatRegExp","eRegExp","clearRegExp","exponentRegExp","doFormatNumber","isGroup","formats","format0","format1","decimalPlaces","lastIndexOf","round2","fractionDigits","round","pow","value0","value1","transformFormat","f1","f2","isNumberFormat","getNumberFormat","begin","begin2","indexs","end2","formatNumber","percentFormat","currencyFormat","isCurrency","isPercent","isFormat","ms","toExponential","nf","negative","_negative","temp","inBrowser","UA","navigator","userAgent","isEdge","isAndroid","isIOS","isMobile","Keyboard","Left","Top","Bottom","PageUp","PageDown","End","Home","Enter","ESC","Space","Tab","Del","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","ua","regex","DOC","isStrict","compatMode","version","is","docMode","documentMode","isOpera","isOpera10_5","isChrome","isWebKit","isSafari","isSafari2","isSafari3","isSafari4","isSafari5_0","isSafari5","isIE7","isIE8","isIE10","isIE6","isIE11","isFirefox","isGecko","isGecko3","isGecko4","isGecko5","isGecko10","isFF3_0","isFF3_5","isFF3_6","isWindows","isMac","isAir","isLinux","scrollbarSize","chromeVersion","firefoxVersion","ieVersion","IE_V","operaVersion","safariVersion","webKitVersion","isSecure","protocol","isBorderBox","execCommand","boxModel","documentElement","noBorderBox","Middle","lastChild","firstChild","nextSibling","insertBefore","__wrap","createElements","removeChilds","isTr","rows","mini_byId","els","mini_hasClass","mini_addClass","mini_removeClass","_ceil","ceil","UUID","itoh","__BindIFrames","js_isTouchDevice","createEvent","js_touchScroll","scrollStartPos","addEventListener","scrollTop","touches","mini_getMargins","jq","css","mini_getBorders","mini_getPaddings","mini_setWidth","getPaddings","mini_setHeight","mini_getWidth","mini_getHeight","mini_setBox","x","setXY","mini_getBox","xy","getXY","mini_setStyle","styles","s1","s2","mini_getStyle","defaultView","mini_isAncestor","contains","compareDocumentPosition","mini_findParent","maxDepth","stopEl","depth","getMargins","repaint","getSize","setX","setY","jquery","scrollLeft","showAt","fixed","zindex","getMaxZIndex","timeout","timeoutHandler","constrain","animation","offsetx","offsety","size","all","nodes","butEl","findChild","getOffsetsTo","container","hscroll","vscroll","offsetHeight","r","clientHeight","ct","cl","cb","cr","clientWidth","getScrollOffset","_scrollOffset","setOpacity","opacity","unselectable","MozUserSelect","KhtmlUserSelect","UserSelect","selectRange","iStart","iEnd","oRange","createTextRange","moveStart","moveEnd","setSelectionRange","getSelectRange","selection","createRange","duplicate","selectionStart","selectionEnd","fixAttr","tabindex","readonly","for","class","maxlength","cellspacing","cellpadding","rowspan","colspan","usemap","frameborder","contenteditable","setAttribute","supportSetAttr","getAttributeNode","nodeValue","mini_preventDefault","returnValue","mini_stopPropogation","cancelBubble","srcElement","stopPropogation","mini_on","listeners","bind","mini_un","unbind","_getListeners","__windowResizes","onWindowResize","events","htmlEncode","str","htmlDecode","add","enqueue","getRange","addRange","clear","dequeue","shift","ritem","isShowBackdrop","_MaskID","_MaskObjects","backStyle","_maskid","maskEl","msgEl","marginLeft","marginTop","zIndex","center","showMaskLoading","$","Cookie","sName","aCookie","cookie","lastMatch","aCrumb","expires","domain","LargeExpDate","escape","toGMTString","del","treeToArray","nodesField","idField","parentIdField","parentId","childrenNodes","childrenArray","arrayToTree","idHash","treeToList","listToTree","slice","measureText","measureEl","j1","j2","csses","mini_layoutOnParse","autoParse","updateDevice","docEl","__LastWindowWidth","__LastWindowHeight","mini_onload","mini_onresize","doWindowResizeTimer","allowLayout","isWindowDisplay","Ext","deferTime","parentWindow","_iframes","_frames","iframes","ajaxSetup","setInterval","mini_unload","IFrames","CloseOwnerWindow","_placeholder","doLabel","placeholder","_placeholder_label","onpropertychange","propertyName","hasOn","selector","delegate","_lastDevice","triggerHandler","getClipboard","clipboardData","setClipboard","getActiveElement","activeElement","rootpath","loadJS","callback","_async","_sync","_js","state","callbacks","head","onreadystatechange","readyState","doCallback","isLocal","xmlhttp","ActiveXObject","XMLHttpRequest","statusCode","send","loadJSON","loadCSS","_css","link","rel","__executeScripts","sc","ns","getF9FrameSysParams","EpFrameSysParams","getCtrDefaultBySysParams","htmlUnescape","htmlEscape","createTextNode","supportRem","isSupport","fontSize","getFontSizeRatio","_fontSizeRatio","HtmlBaseFontSize","setFontSizeRatio","ratio","overwrite","dest","proto","_rootPath","pathname","getBoundingClientRect","externalSrc","showPageWarning","cfg","$pageWarning","_oGetAttrs","getExtraAttrs","extraAttrs","getValidErrorToolTip","_errorToolTip","ToolTip","placement","theme","defaultTheme","errorTextEl","getErrorTextEl","_errorTextEl","_RemoveErrorText","getScrollBarWidth","overflow","_scrollBarWidth","defineProperty","reservedAttrsReg","oldApply","savedAttrs","hasAttributes","hasAttr","isMatch","getSavedAttrs","some","_maximumNumber","mobileErrorText","telErrorText","phoneErrorText","phoneWithShortNumErrorText","postCodeErrorText","orgCodeErrorText","idCardErrorText","decimalLengthErrorText","projectCodeErrorText","decimalLength","mobile","tel","phone","phoneWithShortNum","postCode","orgCode","idCard","idCardWi","idCardY","idCardWiSum","idCardMod","idCardLast","validateIdCard","projectCode","u","v4","isUrl","__mouseWheelHandles","_unDocumentMousewheel","__OnDocumentMousewheel","_mousewheelXY","_onDocumentMousewheel","doWheel","isPopup","emptyText","inArray","_oParseFloat","dl","old_regClass","_EpointExt","addEpointExt","getEpointExt","extFns","extArr","each","extFn","ext","exts","isLocalData","setIsLocalData","setRemote","_getLocalListData","_localKey","_getLocalKey","_localData","_getLocalData","localStorage","_localListData","listData","localDataArr","_updateLocalData","setItem","_updateLocalListData","_addLocalData","localData","localListData","AutoComplete","disableMultiClick","iconPosition","_iconOnlyCls","_iconPosCls","ghostCls","_statePrefix","_stateList","_semantic2state","mini-btn-primary","mini-btn-info","mini-btn-success","mini-btn-warning","mini-btn-danger","_loadingSvg","_applyState","_applyGhost","Button","hideFocus","setIconPosition","setGhost","ghost","getGhost","classList","setState","console","getState","iconPos","plain","btnHtml","iconHtml","hasIcon","img","_plainCls","__prevIconPos","styleText","allowCls","setIsLoading","getIsLoading","_enableTimer","self","_lastClickedBtn","oldSetMenu","MenuButton","setMenu","menu","setyOffset","autoClear","titleEl","td","viewDate","setViewDate","isYesterday","setSelectedDate","currentTime","_OnDateClick","showMenu","dateEl","ids","time","enbaleOkButton","showOkButton","okButtonEl","getFirstDayOfWeek","firstDayOfWeek","setFirstDayOfWeek","repeatLayout","CheckBoxList","off","cellEl","autoLoad","__input","which","_tryQuery","getPopup","_listbox","doDataChange","isLoaded","setAutoLoad","getAutoLoad","showPopup","_firebeforeshowpopup","ComboBox","popup","autoFocusItem","_temporaryValue","setText","_doEmpty","clearOnLoad","ActionColumn","iconWidth","textWidth","itemGap","asText","defaultShowItems","calcWidth","unit","icons","__actions","visibleIcons","overIconIds","disabledIds","iconsHtml","columnId","iconsState","__hasIconRender","rtv","__getFun","warn","disabled","grep","renderIcon","__actionsMap","showMore","isDisabled","overIds","$icon","outerHTML","__onCellClick","targetEL","iconId","handle","__callHandle","isCall","eval","forceFn","actioncolumn","$h","noHandleArr","iconsMap","find","textContent","innerText","showMoreIcon","__extMenu","__createExtMenu","__currentRecordId","setItems","targetIcon","showAtEl","__inited","extMenu","oldHide","hideMenu","__extMenuInited","Menu","rid","getRowByUID","_rowsEl","removeEventListener","HeaderFilter","defaultOptions","filterMode","_logPrefix","onFilter","oldFn","GridView","_createPagers","DataGrid","pagerType","setPagerType","oldCreateRowsHTML","FrozenGridView","_createRowsHTML","$el","paddingTop","backgroundPosition","oldSetShowVGridLines","setShowVGridLines","oldSetShowHGridLines","setShowHGridLines","addCellTip","showCellTip","_columnsEl","_Grid_CellToolTip","__OnGridMouseMove","showHGridLines","showVGridLines","_CellToolTip","grid_error_toolTip","autoHide","onbeforeopen","cellId","element","closest","_cellMapErrors","keepFilter","__genderId","_columnControls","setColumns","__handleFilterClick","__handleGridColumnChanged","__handleGridUpdate","__handleNewData","clearFilter","__clearOldColumns","__restoreFilterStatus","hasFilter","filterColumns","col","filterColumnCfgMap","__filterChecked","__doFilter","__gridColumnChanged","__doGridColumnChanged","ctr","$target","hideColumnFilter","showColumnFilter","__getHeaderElByTrigger","filterColumnMap","$innerEl","filterMethod","getColumn","inited","headerEl","getHeaderCellEl","eq","filterPopup","__renderColumnFilter","setMaxHeight","innerHeight","columnCfg","colCfg","$trigger","__createPopupPanel","filterList","filterMultiple","filters","concat","maxChatCount","listBox","ListBox","showCheckBox","Popup","panel","Panel","panelW","pxWidth","showToolbar","showHeader","clearFilterState","_bodyEl","okBtn","cancelBtn","doFilter","_footerEl","__buildFilterParams","condition","headerCellEl","every","filterFn","checkedArr","__clearFilterState","GridColumnsHide","opt","autoCreate","__autoCreateBtn","triggerEl","_saveKey","__createControls","_originColumns","_allColumns","checkedIndexArr","showButton","disabledColumns","popupCls","$toolbar","btn","$btn","$r","getColumns","__rememberOrigin","restoreLocal","__syncCheckColumns","hidePanel","showPanel","originColumns","__restoreOrigin","updateColumn","getLocalData","_listBox","formEvent","stringify","__checkColumnsChanged","res","isInit","gridColumns","__handleSave","getColumnListFromGrid","headerType2name","getHeaderText","__getColumnEnable","columnIndex","obj2arr","__createPopup","xAlign","maxCharCount","ColumnsHide","indexcolumn","checkcolumn","_Grid_Sorter","__OnGridHeaderCellClick","sortDblClick","allowSortColumn","isEditing","sortField","allowSort","allowCancelSort","getSortOrder","clearSort","sortOrder","getSortField","sortBy","beginEditRow","cancelEditRow","allowAlternating","showSortIcon","showEmptyText","rv","_editingCell","getColumnData","filedName","_OnCellBeginEdit","initEditor","ownerRowID","displayField","_editingControl","getCellEditor","newValue","_initData","getSource","totalCount","getTotalCount","totalPage","getTotalPage","setPageIndex","_mergedCellMaps","_mergedCells","_cellErrors","isGrouping","groupBy","_groupField","_groupDir","collapseGroupOnLoad","collapseGroups","_setEditorBox","cellBox","_editWrap","viewWidth","scrollWidth","_OnDrawCell","cellHtml","_OnCellShowingEdit","getCellBox","_getEditWrap","__OnBodyMouseDown","autoShowPopup","navEditMode","navUpdown","_doInputLayout","_tryUpdateScroll","_canVirtualUpdate","isFrozen","_scrollPaging","reload","_rowsViewEl","_doRemoveRowContent","doUpdateRows","deferLayout","_syncScrollOffset","columns1","getFrozenColumns","columns2","getUnFrozenColumns","lockHtml","_createGroupingHTML","_rowsLockContentEl","_rowsViewContentEl","getScrollTop","_columnsViewEl","doAddLabel","$table","$checkboxTds","markerCls","checkerId","$contentTable","_viewEl","$td","$headerTable","_headerEl","rowCls","rowStyle","showNullItem","nullItemText","oldCreate","showTotalCount","firstButton","prevButton","nextButton","lastButton","numInput","pagesLabel","sizeList","sizes","option","sizeCombo","sizeTextEl","sizeText","firstText","prevText","nextText","lastText","reloadText","showButtonText","reloadButton","setIconCls","showButtonIcon","showReloadButton","previousSibling","_rightEl","pageInfoText","indexEl","showPageIndex","sizeEl","showPageSize","showPageInfo","_OnPageChanged","doPage","changing","oIndex","Pager","__OnPageSelectChanged","_doTitle","_titleEl","_iconEl","rt","_getWindowOffset","alwaysView","_barEl","_StartSpin","Increment","_StopSpin","loop","maxValue","minValue","allowLoopValue","sourceCount","_SpinTimer","now2","_OnDocumentMouseUp","__OnMousewheel","changeOnMousewheel","__OnInputTextChanged","wheelDelta","originalEvent","detail","increment","_createHeaderMenu","Tabs","menuBtn","_headerMenuEl","_headerMenu","setVtype","inputStyle","setInputStyle","showClose","_closeCls","setShowClose","_closeEl","getShowClose","pl","__OnBlur","_focused","_focusCls","_InputType","TextArea","popupYOffset","isShowPopup","_createPopup","popupEmptyText","popupLoadingText","popupHeight","popupMaxHeight","popupMinHeight","setTheme","themePrefix","oldThemeCls","getTheme","applyTheme","_target","setContent","$element","applyPlacement","_bindTooltip","triggers","eventOut","_toggle","_enter","_leave","tip","topspace","bottomspace","leftspace","rightspace","tipbox","pos","arrow","applyCls","centerArrow","getCalculatedOffset","wihth","setAutoHide","getAutoHide","originFn","TreeGrid","tree","$tbody","tr","prev","loadNode","expand","_loadingNode","_doLoadAjax","loadParams","_OnPreLoad","oldNodes","removeNodes","collapse","addNodes","getAllChildNodes","leafField","oldCreateTreeColumn","_createTreeColumn","Tree","$text","$cell","__OnBeforeLoadNode","__showLoading","showLoading","__loadingTimer","addNodeCls","__OnLoadNode","removeNodeCls","showTreeLines","showFullPath","includeRootNode","replaceNodes","_treeColumn","ckr","showRadioButton","nodeStyle","nodeCls","nodeHtml","textCls","getsByIds","getFullPath","fullPath","parents","getAncestors","getCheckedNodes","getSelectedNode","showRefreshButton","maskOnLoad","lockScroll","_initButtons","buttons","createButton","showCollapseButton","showMinButton","showMaxButton","refresh","_OnButtonClick","restore","_doModal","getButton","_doTools","setShowRefreshButton","getShowRefreshButton","getParentBox","_dragCls","_resizeGridEl","_doShow","_width","expanded","_height","_measureSize","Hidden","formField","setAllowDrag","setAllowResize","_doShadow","__OnWindowResize","_modalEl","shadowEl","_shimEl","setBody","Popup_prototype","showAction","hideAction","showDelay","hideDelay","yAlign","showModal","showShadow","modalStyle","_resizeCls","_unbindPopupEl","__OnLeftClick","__OnRightClick","_bindPopupEl","doShow","doHide","_Show","scrollHeight","dd","_doShim","_doShimTimer","atEl","_popupEl","pbox","winOffset","outYAlign","outXAlign","__OnBodyMouseMove","setPopupEl","setPopupCls","setShowAction","setHideAction","setShowDelay","setHideDelay","setXAlign","setYAlign","setxOffset","setShowModal","setShowShadow","setMinWidth","setMinHeight","setMaxWidth","allowPopup","_inAniming","_hideTimer","_showTimer","_tryHide","_topmousedown","_mousedown","topWin","checkOnClick","groupName","_hoverCls","_pressedCls","_checkedCls","setHref","getHref","setTarget","getTarget","getIconCls","setIconStyle","getIconStyle","setImg","getImg","getIconPosition","setPlain","getPlain","setGroupName","getGroupName","setCheckOnClick","getCheckOnClick","setChecked","getChecked","doClick","__OnDocMouseUp","onClick","SplitButton","CheckBox","_clearText","setTrueValue","setFalseValue","ckid","_checkEl","__onClick","click","getTrueValue","getFalseValue","comps","comp","TextBox","getTextEl","selectOnFocus","_emptyCls","__OnDropText","__OnFocus","__OnValidation","_inputEventsInited","_initInputEvents","__OnInputKeyDown","__OnInputKeyUp","__OnInputKeyPress","textEl","ondrop","onchange","onfocus","setAllowInput","getAllowInput","_placeholdered","setEmptyText","getEmptyText","setMaxLength","__OnMaxLengthKeyUp","__OnPaste","getMaxLength","selectText","doSelect","getInputText","setSelectOnFocus","getSelectOnFocus","valid","getVtype","setEmailErrorText","getEmailErrorText","setUrlErrorText","getUrlErrorText","setFloatErrorText","getFloatErrorText","setIntErrorText","getIntErrorText","setDateErrorText","getDateErrorText","setMaxLengthErrorText","getMaxLengthErrorText","setMinLengthErrorText","getMinLengthErrorText","setMaxErrorText","getMaxErrorText","setMinErrorText","getMinErrorText","setRangeLengthErrorText","getRangeLengthErrorText","setRangeCharErrorText","getRangeCharErrorText","setRangeErrorText","getRangeErrorText","Password","ButtonEdit","buttonToolTip","closeToolTip","inputAsValue","_noInputCls","_buttonCls","_buttonHoverCls","_buttonPressedCls","setButtons","_createButtonHtml","_buttonsEl","getButtons","getButtonByName","_getButtonsHTML","_getButtonHtml","_buttonEl","_deferSetText","_buttonWidth","_closeWidth","_paddingOffset","buttonsWidth","_noLayout","setMinLength","getMinLength","setInputAsValue","getInputAsValue","setAutoClear","getAutoClear","setButtonToolTip","getButtonToolTip","_handlerButtonElClick","btnEl","handler","up","down","_clickTarget","_OnButtonMouseDown","__doFocusCls","__fireBlur","spinType","onButtonClick","onButtonMouseDown","onTextChanged","textName","setTextName","getTextName","setShowButton","getShowButton","PopupEdit","_destroyPopup","hidePopup","_popupInner","_textChanged","popupWidth","popupMinWidth","popupMaxWidth","showPopupOnClick","setPopup","__OnPopupButtonClick","__OnPopupBeforeClose","__OnPopupClose","__OnPopupKeyDown","_syncShowPopup","__OnPopupHide","_doShowAtEl","_autoBlur","setAlwaysView","getAlwaysView","setPopupWidth","setPopupMaxWidth","setPopupMinWidth","getPopupWidth","getPopupMaxWidth","getPopupMinWidth","setPopupHeight","setPopupMaxHeight","setPopupMinHeight","getPopupHeight","getPopupMaxHeight","getPopupMinHeight","setShowPopupOnClick","getShowPopupOnClick","_initInput","oninput","setAutoFocusItem","getAutoFocusItem","listbox","__OnBeforeItemClick","__OnItemClick","__OnItemDrawCell","changeOnSelectMethod","_syncValueText","_eval","_","setClearOnLoad","getClearOnLoad","pinyinField","setPinyinField","getPinyinField","setDisplayField","setShowCheckBox","setShowNullItem","getShowNullItem","setNullItemText","getNullItemText","setValueFromSelect","getValueFromSelect","userOldText","oldText","_doQuery","autoFilter","pinyin","_filtered","itemText","itemValue","setAutoFilter","getAutoFilter","Calendar","_selectedDates","monthPicker","_selectedDate","yesterdayText","todayText","clearText","okText","cancelText","timeFormat","showTime","bodyCls","footerCls","_todayCls","_weekendCls","_otherMonthCls","_selectedDateCls","showWeekNumber","showDaysHeader","showMonthButtons","showYearButtons","showTodayButton","showClearButton","showYesterdayButton","isWeekend","getFirstDateOfMonth","tds","_innerEl","timeWrapEl","todayButtonEl","footerSpaceEl","closeButtonEl","_focusEl","yesterdayButtonEl","timeSpinner","__OnTimeChanged","getDateEl","menuEl","setShowHeader","getShowHeader","setShowFooter","getShowFooter","setShowWeekNumber","getShowWeekNumber","setShowDaysHeader","getShowDaysHeader","setShowMonthButtons","getShowMonthButtons","setShowYearButtons","getShowYearButtons","setShowTodayButton","getShowTodayButton","setShowYesterdayButton","getShowYesterdayButton","setShowClearButton","getShowClearButton","setShowOkButton","getShowOkButton","getViewDate","setSelectedDates","getSelectedDate","d2","isSelectedDate","setRows","getRows","setShowTime","getShowTime","setTimeFormat","setFormat","getTimeFormat","views","_tryShowMenu","_CreateView","firstDateOfWeek","todayTime","multiView","weekend","isToday","_OnDrawDate","allowSelect","dateCls","dateStyle","dateHtml","menuYear","menuSelectMonth","menuSelectYear","_menuselectMonth","_menuselectYear","updateMenu","__OnMenuClick","__OnMenuDblClick","__OnBodyMenuMouseDown","monthCls","yearCls","selCls","monthEl","yearEl","__getMonthYear","columnWidth","showEmpty","showAllCheckBox","__OnScroll","onscroll","_column","isVisibleColumn","hideColumn","showColumn","hasColumns","ckAllId","headerStyle","_doNullItem","rowClsIndex","rowStyleIndex","viewEl","elWidth","h2","table1","table2","getShowCheckBox","setShowAllCheckBox","getShowAllCheckBox","autoEscape","prop","repeatItems","repeatDirection","_tableCls","_tdCls","_checkType","_getRepeatTable","table","_i","_createItemHtml","_OnDrawItem","ckId","ckValue","itemCls","itemStyle","itemHtml","setRepeatItems","getRepeatItems","setRepeatLayout","getRepeatLayout","setRepeatDirection","getRepeatDirection","RadioButtonList","Spinner","allowLimitValue","allowNull","__OnButtonMouseDown","_ValueLimit","toFixed","getFormatValue","setMaxValue","getMaxValue","setMinValue","getMinValue","setIncrement","getIncrement","setDecimalPlaces","getDecimalPlaces","setChangeOnMousewheel","getChangeOnMousewheel","setAllowLimitValue","getAllowLimitValue","setAllowNull","getAllowNull","getFormat","setAllowLoopValue","getAllowLoopValue","clearInterval","_DownValue","KEY","_value","TimeSpinner","getFormattedValue","_ChangeValue","timeType","hours","_timeType","Lookup","__OnShowPopup","__OnGridRowClickChanged","__OnGridLoad","setGrid","setCheckSelectOnLoad","getGrid","_createData","_getValueMaps","vs","removes","adds","vsb","rg","_findTextIndex","rgIndex","TextBoxList","remote","editIndex","_itemHoverClass","_itemSelectedClass","_closeHoverClass","getRemote","ulEl","focusEl","_inputEl","onblur","__OnDocMouseDown","_ValueChangeTimer","showInput","insertCell","doReadOnly","li_id","inputLi","_syncInputSize","_LastInputText","_startQuery","hoverItem","blurItem","lastInputText","_doInsertInputValue","insertItem","_doInsertSelectValue","_createSelecteds","doQuery","inputMode","setIputMode","getIputMode","_stopQuery","_loading","delayTimer","ajaxDataType","ajaxContentType","_getSelectedMap","_getFilterLocalData","searchField","_selectOnLoad","__doSelectValue","jqXHR","abort","setPlaceholder","getPlaceholder","loadingText","setLoadingText","getLoadingText","popupErrorText","textLen","isFirst","isLast","setSearchField","getSearchField","minChars","enterQuery","__oldText","setMinChars","getMinChars","setPopupEmptyText","getPopupEmptyText","getPopupEmptyHtml","getPopupLoadingHtml","getPopupErrorHtml","searchText","_enterSearchText","_requestSearch","_keydownQuery","_keydownTimer","_queryTimer","_doloadTimer","doload","complete","setEnterQuery","getEnterQuery","setSelector","getSelector","setPlacement","getPlacement","setTrigger","getTrigger","openTimer","currentTarget","getContent","_getTip","enter","leave","actualWidth","actualHeight","ProgressBar","showText","textAlign","setShowText","getShowText","setTextAlign","getTextAlign","Form","getFields","getFieldsMap","fields","getField","formatted","deep","valueFn","reset","getValidateFields","disableValid","getErrorTexts","errorTexts","errors","getErrors","__OnValueChanged","_changed","setChanged","isChanged","Fit","margin","set_bodyParent","_bodyParent","_doVisibleEls","refreshOnExpand","collapseOnTitleClick","footerStyle","toolbarCls","toolbarStyle","toolbar","footer","setToolbar","setFooter","_viewportEl","_toolbarEl","_toolsEl","_doRemoveIFrame","_iframeEl","_setBodyWidth","bh","autoHeight","_autoHeight","vh","getViewportHeight","getBodyHeight","_layoutTimer","_stopLayout","getViewportWidth","padding2","border2","getHeaderHeight","margin2","getToolbarHeight","getFooterHeight","setHeaderStyle","getHeaderStyle","setBodyStyle","getBodyStyle","setToolbarStyle","getToolbarStyle","setFooterStyle","getFooterStyle","setHeaderCls","getHeaderCls","setBodyCls","getBodyCls","setToolbarCls","getToolbarCls","setFooterCls","getFooterCls","setTitle","getTitle","setShowCloseButton","getShowCloseButton","setCloseAction","getCloseAction","setShowCollapseButton","getShowCollapseButton","setShowToolbar","getShowToolbar","toggle","CloseWindow","_CloseOwnerWindow","__HideAction","btns","addButton","updateButton","removeButton","getHeaderEl","getToolbarEl","getFooterEl","getIFrameEl","clearTimeStamp","setClearTimeStamp","getClearTimeStamp","_deferLoadingTime","st","__onDestroy","loadedUrl","_iframe","loadOnRefresh","__onLoad","setRefreshOnExpand","getRefreshOnExpand","setMaskOnLoad","getMaskOnLoad","getAllowResize","setLoadOnRefresh","getLoadOnRefresh","setExpanded","getExpanded","_expandLoad","setCollapseOnTitleClick","getCollapseOnTitleClick","__OnWindowMouseDown","containerEl","_containerEl","getShowModal","getMinWidth","getMinHeight","getMaxWidth","getMaxHeight","getAllowDrag","setShowMaxButton","getShowMaxButton","setShowMinButton","getShowMinButton","showInBody","setShowInBody","getShowInBody","enableDragProxy","setEnableDragProxy","getEnableDragProxy","allowCrossBottom","setAllowCrossBottom","getAllowCrossBottom","xxx","_maskProxy","_dragProxy","dbox","moved","MessageBox","alertTitle","confirmTitle","prompTitle","prompMessage","buttonText","ok","yes","no","autoFocus","message","spaceStyle","buttonWidth","id1","id2","_Buttons","buttonsEl","animType","tb","confirm","prompt","multi","promptMessage","promptTitle","showTips","slideUp","slideDown","showMessageBox","hideMessageBox","_initTabs","activeIndex","tabAlign","tabPosition","showBody","nameField","titleField","urlField","_tabHoverCls","_tabActiveCls","setActiveIndex","_tableEl","_td1El","_td2El","_td3El","tabs","_doClearElement","_TabID","createTab","tab","newLine","active","refreshOnClick","setTabs","setNameField","getNameField","setTitleField","getTitleField","setUrlField","getUrlField","buttonsAlign","setButtonsAlign","getButtonsAlign","_buttons","setTabControls","getTab","getTabBodyEl","addTab","getTabs","butTabs","activeTab","getActiveTab","olds","removeTab","butTab","_createTabBodyId","bodyParent","acTab","isActive","autoActive","_OnTabDestroy","moveTab","updateTab","bodyEl","_cancelLoadTabs","_doLoadTab","removeAction","_getTabEvent","loadTab","_loadTabTimer","reloadTab","getTabRows","_doUpdateBottom","_doUpdateRight","_doUpdateLeft","_doUpdateTop","_handleIFrameOverflow","elHeight","plainEl","headerHeight","headerWidth","trs","first","last","trH","halfH","tr1","tr2","tabBodyEl","hds","cells","_navEl","_leftNavEl","isRightButton","navWidth","headerMenuWidth","showNavMenu","leftNavWidth","arrowPosition","_scrollToTab","_doScrollButton","_getTabBy_Id","setIdField","_doMenuSelectTab","_setHeaderMenuItems","setTabAlign","setTabPosition","allowClickWrap","setAllowClickWrap","getAllowClickWrap","getTabEl","_createTabId","getTabIFrameEl","tabBox","scrollBox","_leftButtonEl","_rightButtonEl","tabEl","_layouted","getActiveIndex","_tryActiveTab","setShowBody","getShowBody","setArrowPosition","getArrowPosition","setShowNavMenu","getShowNavMenu","getTabByEvent","_getTabByEvent","_OnCloseButtonClick","hoverTab","_scrollTimer","onBeforeCloseClick","onCloseClick","onActiveChanged","mini_Popup_prototype_hide","vertical","allowSelectItem","_selectedItem","resultAsTree","parentField","itemsField","iconClsField","showNavArrow","imgPath","menuAlign","setMenuAlign","getMenuAlign","setImgPath","ownerItem","_topArrowEl","_bottomArrowEl","isVertical","_disableContextMenu","__OnTopMouseDown","__OnBottomMouseDown","setVertical","getVertical","hideItems","showItemMenu","menuitem","hasShowItemMenu","getItems","_itemType","ownerMenu","removeItemAt","getGroupItems","it","setAllowSelectItem","getAllowSelectItem","setSelectedItem","_OnItemSelect","getSelectedItem","setShowNavArrow","getShowNavArrow","setResultAsTree","getResultAsTree","getIdField","setParentField","getParentField","setIconClsField","getIconClsField","setOverflow","getOverflow","innerEl","topEl","bottomEl","marginRight","_getScrollWidth","loadList","hideOnClick","setHideOnClick","getHideOnClick","getImgPath","isLeaf","onItemSelect","_startScrollMove","box1","_getMaxScrollLeft","parseItems","nodeChild","nodeItem","cnodes","MenuItem","MenuBar","ContextMenu","showIcon","showAllow","allowEl","_getIconImg","getTopMenu","_doUpdateIcon","background-image","_hasChildMenu","setChildren","__OnItemsChanged","getMenu","groups","topMenu","onCheckedChanged","Separator","_leftEl","_barEl2","pageSizeWidth","pageSelect","getButtonsEl","setPageSize","setTotalCount","setSizeList","getSizeList","setPageSizeWidth","getPageSizeWidth","setShowPageSize","getShowPageSize","setShowPageIndex","getShowPageIndex","setShowTotalCount","getShowTotalCount","setShowPageInfo","getShowPageInfo","setShowReloadButton","getShowReloadButton","setShowButtonText","getShowButtonText","setShowButtonIcon","getShowButtonIcon","onPageChanged","DataBinding","_bindFields","_bindForms","bindField","mode","convert","__OnCurrentChanged","bindForm","_doSetting","_currentRecord","DataSet","_sources","_links","_originals","listControl","_set_autoCreateNewID","_set_originalIdField","_set_clearOriginals","__OnRowChanged","__OnDataPreLoad","__OnDataSelectionChanged","addLink","childName","parentName","clearData","_getNameByListControl","_getRecord","oldRow","_get_originals","parentSource","_getParentSource","_parentId","maps","ors","_set_originals","nowData","old","reverse","_getLinks","links","grid1","grid2","DataSource","_init","dataview","visibleRows","_ids","_removeds","_clearOriginals","_errors","_idSelecteds","_filterInfo","_sortInfo","root","_level","viewNodes","_originalIdField","_autoCreateNewID","__changeCount","_doLoadData","_dataChanged","ds","RecordId","updateRecord","getMap","setMap","beginChange","endChange","deleteRecord","_setDeleted","getby_id","getbyId","idMap","oid","getRecord","getRow","isModified","reocrd","or","hasRecord","findRecords","ifFn","findRecord","raise","_setAdded","_getOriginal","_setRemoved","_OnCurrentChanged","setCurrent","getCurrent","fireEvent","_fireSelect","_records","_current","_currentTimer","selectPrev","selectNext","selectFirst","selectLast","getSelectedsId","getSelectedsText","_doFilter","_doSort","sortMode","getLoadParams","_sortMulti","_doClientSortField","sortFn","_getSortFnByField","sortType","typeFn","a1","b1","nullA","nullB","localeCompare","v1","pageIndexField","pageSizeField","sortFieldField","sortOrderField","totalField","startField","limitField","errorField","errorMsgField","stackTraceField","_loadTimer","_xhr","ajaxAsync","gotoPage","setSortField","setSortOrder","checkSelectOnLoad","selectOnLoad","errorFn","_successHandler","_evalUrl","_evalType","_OnBeforeLoad","_currentSelectValue","_selectsArr","_selectedValue","_resultObject","stackTrace","_selects","setSortMode","getSortMode","getCheckSelectOnLoad","setSelectOnLoad","getSelectOnLoad","DataTable","insertRow","sourceIndex","autoSelect","newSelected","newIndex","rs","targetRecord","_index","getChanges","rowState","onlyField","changes","newRow","accept","acceptRecord","reject","rejectRecord","dv","DataTree","expandOnLoad","checkedField","checkModel","autoCheckParent","onlyLeafCheckable","setExpandOnLoad","getExpandOnLoad","setNodesField","setCheckRecursive","getCheckRecursive","setShowFolderCheckBox","getShowFolderCheckBox","_doExpandOnLoad","eachNodes","level","childs","_isNodeLoading","isRoot","_doUpdateLoadedCheckedNodes","getParentNode","_createNodes","addNode","insertNode","insertNodes","pnodes","indexOfNode","removeNodeAt","moveNodes","targetNode","moveNode","___node","oldParentNode","_updateParentAndLevel","nodes2","preNode","cascadeChild","bubbleParent","eachChild","getNode","isExpandedNode","expandNode","collapseNode","collapseAll","expandAll","collapseLevel","nodeLevel","getLevel","expandLevel","expandPath","ans","collapsePath","getRootNode","useView","cnode","getChildNodeAt","hasChildNodes","_is_true","_is_false","isLeafNode","hasChildren","subNodes","isFirstNode","getFirstNode","isLastNode","getLastNode","isCheckedNode","isEnabledNode","isVisibleNode","pnode","getNextNode","getPrevNode","indexOfList","vls","_dataChangedCount","_createDataView","_createVisibleRows","inView","getChildren","cadd","_array","_dataChangedCount2","toTree","allNodes","upGrade","task","parentTask","pNodes","appendIndex","pparentTask","ppNodes","downGrade","opNodes","setCheckModel","getCheckModel","setOnlyLeafCheckable","getOnlyLeafCheckable","setAutoCheckParent","getAutoCheckParent","_doUpdateNodeCheckState","doCheckNodes","checkAll","ll","_nodes","hasCheckedChildNode","cascade","uncheckAllNodes","checkNode","uncheckNode","checkNodes","uncheckNodes","checkAllNodes","doGetCheckedNodes","sourceNodes","anode","getCheckedNodesId","getCheckedNodesText","getCheckState","indeterminate","getUnCheckableNodes","getCheckable","setCheckable","checkable","showNodeCheckbox","_DataTableApplys","_useEmptyView","getRowByUid","getRowById","clearRows","addRow","validateOnAdd","validateRow","removeRow","removeRows","removeSelected","removeRowAt","moveRow","addRows","findRows","findRow","getResultObject","_DataTreeApplys","isSelectedNode","selectNode","getSelectedNodes","updateNode","checkRecursive","showFolderCheckBox","setLeafField","getLeafField","getNodesField","setCheckedField","getCheckedField","findNodes","toggleNode","useAnimation","getNodesByValue","ColumnModel","ColumnModel_ColumnID","_defaultColumnWidth","_columnsRow","_visibleColumnsRow","_bottomColumns","_visibleColumns","_idColumns","_nameColumns","_fieldColumns","getAllColumns","getColumnsRow","getVisibleColumnsRow","getBottomColumns","getVisibleColumns","_getBottomColumnsByColumn","isAncestorColumn","_getVisibleColumnsByColumn","_columnsChanged","_updateColumnsView","columnDefaults","allowCellWrap","_maxColumnLevel","eachColumns","parentColumn","allowMove","_createColumnsRow","bottoms","cascadeColumns","_createFrozenColSpan","_frozenStartColumn","_frozenEndColumn","isFrozenColumn","frozen","startColumn","finishColumn","unFrozen","setFrozenStartColumn","setFrozenEndColumn","getFrozenColumnsRow","_columnsRow1","getUnFrozenColumnsRow","_columnsRow2","visibleColumns","isViewIndex","viewIndex","isBottomColumn","getColSpan","subColumns","colSpan","colspan0","colspan1","colspan2","viewIndex0","viewIndex1","viewIndex2","_getMaxColumnLevel","maxLevel","columnsRow","visibleColumnsRow","cols","vcols","getColumnByField","_getColumnById","_getDataTypeByField","getParentColumn","pid","getAncestorColumns","allHide","moveColumn","targetColumn","pcolumn","addColumn","removeColumn","_createTime","_createColumnModel","_bindColumnModel","_createSource","_bindSource","_doUpdateFilterRow","_doUpdateSummaryRow","_paddingTop","_paddingBottom","_rowClsHash","showColumns","_columnModel","showFilterRow","showSummaryRow","summaryRows","showPager","allowHeaderWrap","showModified","showNewRow","_rowCls","_cellCls","_headerCellCls","_rowSelectedCls","_rowHoverCls","_cellSelectedCls","defaultRowHeight","fixedRowHeight","isFixedRowHeight","fitColumns","isFitColumns","_alternatingCls","getAllowAlternating","setAllowAlternating","showGroupSummary","getShowGroupSummary","setShowGroupSummary","summaryPosition","getSummaryPosition","setSummaryPosition","_summaryEl","_summaryViewEl","_summaryLockEl","_filterEl","_bottomPagerEl","_filterViewEl","_pagers","_vscrollEl","_topRightCellEl","_bottomPager","_bindScrollEvent","_unbindScrollEvent","_scrollBindTimer","__OnRowViewScroll","doLayoutCardView","hasVScroll","hdTable","paddingRight","bdTable","filterTable","summaryTable","columnHeight","filterRowHeight","hasHScroll","tableWidth","viewType","_syncScroll","_createTopRowHTML","flag","_userEmptyTd","_createColumnsHTML","_sortField","headerText","_createHeaderText","_createHeaderCellId","sortCls","_createColumnColSpan","doUpdateColumns","columnRows","defer","canUpdate","_isCreating","getScrollLeft","updateCardView","_doUpdateTimer","_fireUpdateTimer","deferUpdate","_updateTimer","_stopDeferUpdate","_pushUpdateCallback","_updateCount","setDefaultRowHeight","getDefaultRowHeight","_getRowHeight","rowHeight","getGroupingView","groupTitleCollapsible","group","_createRowGroupId","rowid","_createRowGroupRowsId","_OnDrawGroup","_createRowHTML","createRows","_OnDrawSummaryCell","_isFastCreating","_defaultRowHeight","isCellValid","meta","itemRenderer","_createRowId","isReturn","_rowClsSb","_currentCell","_createCellId","rowSpan","cellInnerCls","cellInnerStyle","bottomHtml","emptyId","alwaysShowEmptyText","startIndex","_createFilterRowHTML","_createFilterCellId","_doRenderFilters","getFilterCellEl","_createSummaryRowHTML","_createSummaryCellId","_doSortByField","_expandGroupOnLoad","_GroupID","dir","_createGroupingView","clearGroup","_groupDataView","setGroupField","getGroupField","getGroupDir","setGroupDir","enableGroupOrder","groupMaps","getRowGroup","_getRowGroupById","_getRowGroupByEvent","getSummaryCellEl","setShowColumns","setShowFilterRow","setShowSummaryRow","setShowPager","setFitColumns","getColumnsHeight","getFilterHeight","getSummaryHeight","getPagerHeight","getGridViewBox","bodyBox","__OnSourceLoadData","__OnSourceClearData","__OnColumnsChanged","hideColumns","setDefaultColumnWidth","getDefaultColumnWidth","setColumnWidth","getColumnWidth","getColumnBox","getMaxColumnLevel","_isCellVisible","_createDrawCellEvent","cellInnnerStyle","cell","defaultColumnDateFormat","currencyUnit","summaryType","summaryRenderer","summaryValue","setScrollTop","setScrollLeft","getPagerType","pager","_setBottomPager","bottomPager","unbindPager","bindPager","setAlwaysShowEmptyText","getAlwaysShowEmptyText","setShowEmptyText","getShowEmptyText","setShowModified","getShowModified","setShowNewRow","getShowNewRow","setAllowCellWrap","getAllowCellWrap","setAllowHeaderWrap","getAllowHeaderWrap","setEnableGroupOrder","getEnableGroupOrder","getShowHGridLines","getShowVGridLines","setShowSortIcon","getShowSortIcon","frozenPosition","isRightFrozen","_columnsLockEl","_rowsLockEl","_filterLockEl","__OnMouseWheel","frozenColumnsRow","unFrozenColumnsRow","frozenColumns","unfrozenColumns","html1","html2","_syncRowsHeightTimer","syncRowDetail","row1","_getRowDetailEl","row2","_doSyncRowHeight","td1","td2","h1","_syncRowsHeight","rowMap","_getRowEl","_syncColumnHeight","lock","_layoutColumns","getTds","clearHeight","getRowHeight","nospan","th","clearHeights","syncNoRowSpan","syncRowSpan","lockedWidth","marginStyle","_doLayoutScroll","getLockedWidth","_doEmptyText","leftStyle","_doClearFrozen","unFrozenColumns","getFrozenStartColumn","getFrozenEndColumn","_canDeferSyncScroll","ScrollGridView","virtualScroll","virtualRows","virtualColumns","setVirtualScroll","getVirtualScroll","setVirtualColumns","getVirtualColumns","_getScrollView","_getScrollViewCount","_getScrollRowHeight","_getRangeHeight","_getIndexByScrollTop","__getScrollViewRange","_getColumnByScrollLeft","_getRangeWidth","_getColumnAllWidth","_getViewRegion","nowRegion","_getViewNowRegion","i2","viewStart","viewEnd","viewTop","viewBottom","bodyWidth","endColumn","viewLeft","bodyHeight","startRow","endRow","__OnVScroll","_layoutScroll","_scrollTop","_vscrollContentEl","_onScrollDownUp","_VScrollMouseDown","outHeight","getScrollHeight","__scrollTimer","_scrollTopTimer","wheelIncrement","setWheelIncrement","getWheelIncrement","_updateScrollTop","doVirtualColumns","_virtualColumnTimer","mousedown","mouseup","mousewheelEditable","_Grid_Select","__OnRowMouseMove","__OnCellMouseDown","__OnGridCellClick","__OnGridKeyDown","inGrid","shiftKey","ctrlKey","altKey","editOnTabKey","_beginEditNextCell","editNextOnEnterKey","isEditingCell","beginEditCell","allowCellSelect","setCurrentCell","onlyCheckSelection","allowRowSelect","commitEdit","cellEditAction","selectOnRightClick","__doSelect","enableHotTrack","focusRow","allowHotTrackOut","onselectstart","allowUnselect","_Grid_RowGroup","toggleRowGroup","_Grid_ColumnsMenu","createMenu","__OnGridDestroy","showColumnsMenu","checkedCount","_getCellByEvent","_getCellEl","getCellError","getShowCellTip","__OnGridHeaderMouseMove","__OnGridHeaderMouseOut","_focusedColumnEl","_Grid_ColumnMove","__onGridMouseDown","_remove","_getColumnByEvent","allowMoveColumn","dragColumn","_columnEl","getDrag","moveTop","moveBottom","insertAction","columnBox","_Grid_ColumnSplitter","allowResizeColumn","splitterColumn","_ignoreClick","columnMinWidth","columnMaxWidth","_Grid_DragDrop","__OnGridCellMouseDown","_dragging","dropObj","isAllowDrag","dragText","beginRecord","_getDrag","dragData","_getDragData","feedbackEl","lastFeedbackClass","getEnableHotTrack","setEnableHotTrack","_getDropTargetObj","allowDrop","_getRecordByEvent","dropRecord","dragAction","getFeedback","setRowFeedback","dragRecords","dragRecord","hasParent","dr","__root","_OnDragDrop","dragNodes","dropAction","dragNode","dropNode","feedback","rowBox","lastAddDomRow","removeRowCls","feedbackLine","lastRowFeedback","getRowBox","addRowCls","way","effect","IsLeaf","allowLeafDropIn","_OnGiveFeedback","_Grid_Events","__windowResize","_getEditingControl","_row","_tryFocus","eve","evName","_Events","_Select","_DragDrop","_RowGroup","_Splitter","_ColumnMove","_Sorter","_ColumnsMenu","getValidateOnAdd","setValidateOnAdd","_$onlyCheckSelection","allowCellValid","defaultColumnWidth","_destroyEditors","editors","__OnSourceBeforeLoad","__OnSourcePreLoad","__OnSourceLoadSuccess","__OnSourceLoadError","__OnSourceSort","__OnSourceFilter","__OnPageInfoChanged","__OnSourceAdd","__OnSourceUpdate","__OnSourceRemove","__OnSourceMove","_doAddRowEl","_addTimer","_doUpdateRowEl","_doRemoveRowEl","_toSummary","_doMoveRowEl","_selectionTimer","_doRowSelect","_updatePagesInfo","pagers","setPagerButtons","setPager","__OnPageChanged","_canUpdateRowEl","rowEl2","rowEl","rowEl1","bdTable1","bdTable2","doAdd","inertRowEl","_getRowGroupEl","_getRowGroupRowsEl","_getHeaderCellEl","getRowEl","getCellEl","getRecordByEvent","_getRowByID","getColumnByEvent","getColumnFromEvent","getCellFromEvent","getRowFromEvent","getRowByEvent","getCellByEvent","hasRowCls","_marked","d1","_fixFocus","_focusRow","offsetBottom","setShowLoading","getShowLoading","setAllowHotTrackOut","getAllowHotTrackOut","setOnlyCheckSelection","getOnlyCheckSelection","setAllowUnselect","getAllowUnselect","setAllowRowSelect","getAllowRowSelect","setAllowCellSelect","getAllowCellSelect","setAllowCellEdit","getAllowCellEdit","setCellEditAction","getCellEditAction","setAllowCellValid","getAllowCellValid","setAllowResizeColumn","getAllowResizeColumn","setAllowSortColumn","getAllowSortColumn","setAllowMoveColumn","getAllowMoveColumn","setShowColumnsMenu","getShowColumnsMenu","setEditNextRowCell","editNextRowCell","getEditNextRowCell","setEditNextOnEnterKey","getEditNextOnEnterKey","setEditOnTabKey","getEditOnTabKey","setCreateOnEnter","createOnEnter","getCreateOnEnter","_doCurrentCell","_getAnchorCell","cc","cancelEdit","_editing","commitEditRow","getEditingRow","validateCell","editorHeight","cell1","cell2","getEditWrap","cellEditorContainer","___OnEditControlKeyDown","_enterTimestamp","enterCommit","newCell","setNavEditMode","getNavEditMode","skipReadOnlyCell","setSkipReadOnlyCell","getSkipReadOnlyCell","isCellCanEdit","next","_editTimestamp","getPrevCanEditCell","setLastRow","getNextCanEditCell","setNextRow","getEditorOwnerRow","editorConfig","editorEl","rowData","getEditRowData","isNewRow","getEditingRows","getEditData","dataView","pidField","collapseRowGroup","expandGroups","expandRowGroup","g2","rows2","showAllRowDetail","_showDetail","toggleRowDetail","_createRowDetailId","_createRowDetail","getRowDetailCellEl","setAutoHideRowDetail","getAutoHideRowDetail","mergeColumns","bottomColumns","__cells","cellValue","margeCells","mergeCells","doMargedCellMaps","_getCellEls","_getDragText","setAllowLeafDropIn","getAllowLeafDropIn","setAllowDrop","getAllowDrop","moveUp","i1","moveDown","setAjaxAsync","getAjaxAsync","setAjaxMethod","getAjaxMethod","setSortDblClick","getSortDblClick","setShowCellTip","setAllowCancelSort","getAllowCancelSort","_virtualRows","setPageIndexField","getPageIndexField","setPageSizeField","getPageSizeField","setStartField","getStartField","setLimitField","getLimitField","setSortFieldField","getSortFieldField","setSortOrderField","getSortOrderField","setTotalField","getTotalField","setErrorField","getErrorField","setErrorMsgField","getErrorMsgField","setStackTraceField","getStackTraceField","getBottomPager","setSizeText","getSizeText","showPagerButtonText","setShowPagerButtonText","getShowPagerButtonText","showPagerButtonIcon","setShowPagerButtonIcon","getShowPagerButtonIcon","setPagerStyle","pagerStyle","setPagerCls","pagerCls","setDropAction","getDropAction","setGroupTitleCollapsible","getGroupTitleCollapsible","allowEmptyContextMenu","setAllowEmptyContextMenu","getAllowEmptyContextMenu","_beforeOpenContentMenu","headerContextMenu","setHeaderContextMenu","getHeaderContextMenu","setSelectOnRightClick","getSelectOnRightClick","pagerButtons","mini_DataGrid_CellValidator_Prototype","getCellErrors","unique","setCellIsValid","_removeRowError","_AsyncLoader","_Tree_AsyncLoader","_Expander","_Tree_Expander","setShowArrow","showArrow","showTreeIcon","showExpandButtons","expandOnDblClick","expandOnNodeClick","loadOnExpand","_checkBoxType","iconField","leafIconCls","folderIconCls","_checkBoxCls","_expandNodeCls","_collapseNodeCls","_eciconCls","_inNodeCls","isEditingNode","_editingNode","__OnNodeDblClick","__OnNodeClick","__OnTreeExpand","__OnTreeCollapse","__OnCheckChanged","__OnSourceAddNode","__OnSourceRemoveNode","__OnSourceMoveNode","_virtualUpdate","_updateNodeTimer","_doAddNodeEl","_doUpdateTreeNodeEl","_doRemoveNodeEl","_doMoveNodeEl","updateParent","targetEl","_getNodeEl","nodesEl","_getNodesEl","nodesEl2","_doUpdateNodeTitle","hasChild","objNode","nodeEl1","nodeEl2","nodesEl1","detail1","detail2","_createNodeHTML","_getNodesTr","_doCheckNodeEl","isTreeCell","imgField","_getNodeIcon","checkBoxType","_isViewFirstNode","_viewNodes","_getViewChildNodes","_isViewLastNode","_isInViewLastNode","isInLastNode","_createNodeTitle","indentStyle","editId","ecCls","_createCheckNodeId","_renderCheckState","_renderCheckStateNodes","_renderCheckStateTimer","isVisible","isExpand","nodesId","_createNodesId","_createNodesHTML","rootNode","checkOnTextClick","setCheckOnTextClick","getCheckOnTextClick","setTreeColumn","getTreeColumn","setShowTreeIcon","getShowTreeIcon","setShowRadioButton","getShowRadioButton","setCheckBoxType","_doUpdateCheckState","getCheckBoxType","setIconsField","_iconsField","getIconsField","_getCheckBoxEl","_doExpandCollapseNode","onCallback","doExpandAnim","animate","doCollapseAnim","isIndeterminate","_checkChangedTimer","_tryToggleCheckNode","_tryToggleNode","_OnCellMouseDown","_OnCellClick","setNodeText","setNodeIconCls","setIconField","getIconField","setAllowSelect","getAllowSelect","setShowExpandButtons","getShowExpandButtons","setShowTreeLines","getShowTreeLines","getShowArrow","setLeafIcon","leafIcon","getLeafIcon","setFolderIcon","folderIcon","getFolderIcon","getExpandOnDblClick","setExpandOnNodeClick","getExpandOnNodeClick","setLoadOnExpand","getLoadOnExpand","hideNode","el1","el2","showNode","enableNode","disableNode","setImgField","getImgField","parseNodes","nodeTitle","jqTitle","cdata","hoverMode","inNodeShow","showTopbar","_editInput","beginEdit","doEdit","__OnEditInputKeyDown","__OnEditInputBlur","_canToggle","__OnBeforeNodeExpand","asyncLoad","customCls","showNoTipCheck","clickNoTipCheck","_content","foot","contentHeight","validation","inputId","deletePrompt","tpl","confirmHtml","contentHtml","deleteConfirm","hideTips","immediately","Avatar","username","shortName","bgColor","portrait","_tpl","_portraitEl","_getShortName","setUsername","setBgColor","setPortrait","getUsername","backgroundColor","getBgColor","getPortrait","line-height","CatalogImport","pickerText","uploader","WebUploader","uploadUrl","fileNumLimit","limitType","showDefaultUI","auto","_onBeforeFileQueued","_onFilesQueued","_onUploadBeforeSend","_onUploadProgress","_onUploadSuccess","_uploadBtn","fileList","_bindEvent","clearFile","attachGuid","_curAttachGuid","file","files","_generateFileList","isImportFinished","_uploader","md5File","progress","percentage","then","md5","fileMD5","_curFileMD5","fileName","fileSize","getCommonData","commonDto","_onPostFileMd5","response","getSecondRequestData","_onQueryFileStatus","setDetailStatus","_oldAttachGuid","attachGuidOld","_onFinished","pollingFrequency","_pollingFrequency","pollingStatus","upload","isContinueImport","$progressbar","$progresstext","$progressbody","_getSize","_onPollingStatus","$status","_currentFileId","handlepercent","_generateStatuslist","isCheckEnd","isSaveEnd","sheetName","checkCount","checkSuccessCount","checkErrorCount","checkMsg","saveCount","saveSuccessCount","saveErrorCount","saveMsg","taskMsg","extraDatas","fileId","isSuccess","$action","done","detailStatus","isDetailShow","renderDetailStatus","detailContent","showDetailStatus","detailEl","hideDetailStatus","setUploadUrl","setPickerText","Color","setColor","CPGlobal","stringParsers","parser","space","RGBtoHSB","HSLtoRGB","setHue","setSaturation","setLightness","setAlpha","toRGB","B","C","R","X","toHex","rgb","toHSL","S","Colorpicker","translateFormats","isInput","component","picker","template","keyup","alpha","preview","base","place","color","previewColor","newColor","pointer","slider","zone","sliders","saturation","hue","knob","mousemove","maxLeft","maxTop","callLeft","callTop","colorpicker","$this","defaults","Constructor","rgba","hsl","hsla","hex","V","HueToRGB","q","tg","execResult","ColorPicker","_valueBox","_indication","colorPicker","_getValue","DataExport","gridId","exportUrl","columnsValue","columnsText","paramName","dynamicColumns","expandText","collapseText","exportText","leftListTitle","rightListTitle","fromText","pageNumInfo","pageText","exportModelText","showExportModel","_iconCls","bodyArr","_panel","_exportBtn","_listContent","_exportRbl","_radioTrs","_rowTr","_curPageTr","_pageTr","_fromNumInput","_toNumInput","exportModelCheck","_exportFormWrap","_exportForm","_exportFormField","_exportIframe","_contentL","_contentM","_contentR","leftListBox","rightListBox","_OnExport","toIndex","dataGrid","fromIndex","_OnDocMouseUp","_getExportData","exportType","maxPageIndex","exportByTemplate","checkedRows","_getSelectedGridIds","setExportUrl","getExportUrl","getGridId","setGridId","_adjustRadioLayout","columnsData","_getColumns","childColumns","setCollapseText","getFileName","setFileName","setShowIcon","setShowExportModel","DataImport","maskContent","$parent","_generateImportStatus","DatePicker","valueFormat","maxDate","minDate","valueType","laydate","elem","_translateToLaydateFormat","_getBtns","ready","_onLaydateReady","endDate","_onLaydateDone","onHide","drawdate","_beforeLaydateRender","_fixedHoverScroller","_fixedTimeScrollPos","g1","origin","scrollerWidth","nextTick","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","currentTop","currentHeight","viewHeight","_monthPicker","_laydate","_updateLaydateFormat","dateType","EXP_IF","EXP_SPLIT","EXP","setValueFormat","getValueFormat","nullValue","setNullValue","getNullValue","_updateLaydateShowTime","_updateLaydateBtns","setMaxDate","getMaxDate","setMinDate","getMinDate","setMaxDateErrorText","getMaxDateErrorText","setMinDateErrorText","getMinDateErrorText","MonthPicker","DateRangePicker","rangeType","setRangeType","$btns","startDate","_formatDate","isEmptyObject","FilterTree","initComponents","bindEvents","filterUrl","_filterKey","_filterInput","_initialData","search_condition","getFilterUrl","err","isFilter","setFilterUrl","getFilterMode","setFilterMode","ImageUploader","actionButtons","role","maxBtnNum","imageWidth","imageHeight","limitWidth","NaN","limitHeight","fileSizeLimit","multiple","serverFileNum","STATE_TEXT","PEDDING","UPLOADING","DONE","FAIL","_dealUrl","_initToolTip","_fileIdPrefix","_fileIndex","_createInput","_listEl","_fileInput","_$addBtn","lineHeight","__onAddBtnClick","__onFileChange","setActionButtons","MORE_ID","actionButtonsMap","log","handleActionBtnClick","_genderActionBtnEventData","_showActionPopup","_actionBtnHtml","_initActonBtnPopup","$file","fileGuid","fileData","fileEl","moreTarget","removeImage","reselectImage","_getFileData","fileItem","_removeFileData","removed","serverFiles","_updateAddBtnState","$fileEl","removeAttribute","handleReselect","setMultiple","_validateWidthHeight","wrappedFile","fromServer","_genderImgEl","_doUpload","change","cloneNode","_getFileWrapper","dtd","Deferred","resolve","promise","image","Image","URL","createObjectURL","onerror","revokeObjectURL","__doFilesAdd","_filesQueue","_validateImageSize","__fileQueue","__doFilesUpload","limit","_genderItemEl","downloadUrl","insertAdjacentElement","replaceEl","replaceWith","formData","FormData","contentType","processData","onloadstart","onprogress","fail","attachLength","uploadDateTime","createDocumentFragment","empty","eventType","getMultiple","getFileNumLimit","setFileNumLimit","isNumeric","getFileSizeLimit","setFileSizeLimit","getImageWidth","setImageWidth","getImageHeight","setImageHeight","$cs","factory","define","amd","exports","require","caretTimeoutId","iPhone","chrome","android","definitions","9","*","autoclear","dataName","caret","settings","defs","tests","partialPosition","firstNonMaskPos","lastRequiredNonMaskPos","oldVal","completed","tryFireCompleted","buffer","seekNext","shiftL","writeBuffer","blurEvent","checkVal","focusText","clearBuffer","allow","defaultBuffer","one","removeData","seekPrev","metaKey","fromCharCode","shiftR","curVal","InputMask","setMask","getMask","LargeFileUploader","fileSingleSizeLimit","startText","pauseText","numLimitErrorText","sizeLimitErrorText","typeDeniedErrorText","sizeErrorText","emptyFileErrorText","needChunkLocal","_picker","_fileList","_ntkoContent","NTKO_ProductCaption","NTKO_ProductKey","NTKO_MakerCaption","NTKO_MakerKey","_ntko","_errorContent","__OnPickerClick","lfu","ntko","addEvent","script","language","IsUploading","stopUpload","beginUpload","filePath","CancelLastCommand","_beforeFileQueued","statusText","isPersent","persentNumber","isAllUploaded","_onFileFinished","isAllSuccess","_onUploadFinished","StatusCode","AddLocalFile","_ntkoFileType","description","_blocksFileField","_onStartUpload","QueryFileStatusURL","_ntkoQueryFileStatusURL","FinishedUploadURL","_ntkoFinishedUploadURL","BeginSaveToURL","parseData","StopSaveToURL","_onStopUpload","Reset","_onReset","removeFile","_getFileIndex","GetFile","RemoveFile","_fileIds","FilePath","_onFileDequeued","setLimitType","_getNtkoFileType","getLimitType","setAuto","getAuto","fileTypes","limitTypes","getFileList","urlQuery","separator","getUploadUrl","setFileSingleSizeLimit","getFileSingleSizeLimit","_validateFile","filesCount","FilesCount","_parseAttachFile","attachFile","FileName","FileSize","MD5ID","isUploading","_onUploadError","_parseNtkoRet","LastFinishedUploadRetMes","_onUploadComplete","object","reason","tmp","Output","setEscape","getEscape","setAsync","getAsync","OutputText","showTitle","numFormat","_escape","setShowTitle","numValue","getShowTitle","setNumFormat","PagerTree","_PagerTree_Expander","_collapseNodes","_expandNodes","__OnBeforeLoad","treeColumn","_createTreeCell","getNodeLevel","__ecconfig","_getEcConfig","collapseNodes","expandNodes","Pagination","jumpText","_updatePager","_updatePagerButtons","nextEllipsisIndex","totalIndex","buttonCounts","pageButtonsStr","_updatePagerInfo","pagerChange","sizeData","dealInput","$input","PanelTip","tplUrl","cssUrl","$close","_opened","guid","_getData","openedGuid","Mustache","_renderContent","setTplUrl","setCssUrl","Repeat","templateId","templateUrl","setTemplateUrl","getTemplateUrl","setTemplateId","getTemplateId","_renderHtml","controlData","SlideWindow","duration","pageVisibility","prefixSupport","support","keyWithPrefix","isPageVisibilitySupport","screenX","isHidden","visibilityState","hidden","getVisibilityState","eventName","visibilitychange","usecapture","evt","setDuration","_destroy","-webkit-transition-duration","-moz-transition-duration","-ms-transition-duration","-o-transition-duration","transition-duration","getDuration","__showWidth","__showHeight","__resizeTimer","z-index","__hideTimer","__showTimer","Slider","step","precision","showTooltip","runway","bar","handleMouseUp","handleChange","_handleChange","toolTip","_onBeforeShowToolTip","dx","dy","containerWidth","pageXOffset","lengthPerStep","setPosition","precisions","setStep","_adjustPrecision","getStep","decimal","TabsTreeSelect","tabsConfig","tabKeys","loadChildWhenChecked","canCheckParent","showSelectedCount","showSort","selectedPanelTitle","showBorder","sortBtn","actionTitles","removeall","recover","sortTitles","none","asc","desc","_getActionBtn","span","_leftPanel","_rightPanel","_leftHeader","_rightHeader","_rightTitle","_rightCount","_tabs","_leftContent","_rightContent","dimensionComboBox","__onDimensionChanged","__OnCheckedChanged","__OnTreeBeforeNodeCheck","__OnTreeBeforeNodeSelect","__OnDrawNode","__OnFilter","_selectList","topBtn","bottomBtn","recoverBtn","removeallBtn","selectNodes","selectedCount","_listItemTempl","_addNode","_removeNode","child","valueArr","activeTabCfg","_activeTabIndex","activeTabKey","filterKey","_setLastDimensionValue","treeUrl","_curAutoSortDirection","_addNodeByDirection","_getItemHtml","needAll","_setSelectedCount","direction","$targetNode","treeValues","targetNodeValue","insertAfter","$item","selectedListNode","_updateButtons","dragItem","toggleAutoSort","clearAll","targetItem","_removeDrag","_getNextAutoSortDirection","_serverSort","_loadValue","maskTimer","isMask","textArr","insertAdjacentHTML","siblings","setSelectedNodes","setSelectedPanelTitle","setShowSelectedCount","getShowSelectedCount","s_h","updateTree","tabArr","hasParam","tabText","tabKey","showDimension","_getDimensionKey","_getLastDimensionValue","$tab","dimension","needFilter","treeData","dimensionData","_updateTabsUrl","setTabKeys","keys","setNodeField","setCanCheckParent","getCanCheckParent","AutoCheckParent","tabAttr","TreeSelect","showFilter","_nohide","expandOnPopup","setExpandOnPopup","getExpandOnPopup","_getCheckedValue","notUpdateTree","getShowFilter","setShowFilter","VerifyCode","charLength","_img","uuid","WebEditor","editstyle","editSkin","_editorModel","mini_editor_model","_fromEditor","EWEBEDITOR","_initEditor","UE","_doInitEditor","_o_EWEBEDITOR_EVENT","Replace","skin","EWEBEDITOR_EVENT","readOnlyChanged","_loadComplete","getEditor","initialFrameWidth","parentElement","_$toolbar","_$footer","getEditorPromise","reGetCount","_getEditor","SetHtmlAsync","getHTML","setSubmitData","getSubmitData","setDisabled","mimeTypes","fileNameLengthLimit","chunked","chunkSize","chunkRetry","needMD5","compress","threads","dnd","duplicateErrorText","fileNameLengthErrorText","_showSplit","setFileList","_pickerText","_initUploader","visibility","_isInit","_createUploader","_splitBtn","extensions","_fileMD5","_hasFinishedList","isRegWebUploader","Uploader","register","before-send-file","before-send","after-send-file","preupload","server","deferred","$upload","_refer","uploadGuid","_onBeforeMd5File","_onMd5File","ajaxSettings","checkchunk","block","chunkIndex","chunk","_existFileParts","finished","_onBeforeMd5FileFinished","_onMd5FileFinished","swf","pick","_onUploadStart","headers","_onUploadAccept","_uploaderPick","detach","_unbindDefaultUIEvents","getUploader","getUploaderPromise","_getUploader","retry","getFiles","fileFinished","skipFile","existFileParts","defaultCompres","quality","allowMagnify","crop","preserveHeaders","noCompressIfLarger","compressSize","setCompress","getCompress","getMimeTypes","setMimeTypes","predictRuntimeType","setAccept","getDuplicate","getPickerText"],"mappings":"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"}