<?xml version="1.0" encoding="UTF-8"?>
<configuration packages="com.epoint.core.utils.log">
	<appenders>
		<!-- [控制台日志、正式环境会输出到wrapper.log] -->
		<Console name="Console" target="SYSTEM_OUT">
			<PatternLayout pattern="#### %d{yyyyMMdd HH:mm:ss,SSS} | %l | %p |  %m %n" />
		</Console>

		<!-- 按钮点击日志 -->
		<RollingFile name="BUTTON_LOG" fileName="../logs/button.log"
			filePattern="../logs/button.%d{yyyy-MM-dd}">
			<PatternLayout pattern="#### %d{yyyyMMdd HH:mm:ss,SSS} | %l | %p |  %m %n" />
			<Policies>
				<TimeBasedTriggeringPolicy />
			</Policies>
			<DefaultRolloverStrategy>
				<Delete basePath="../logs/" maxDepth="1">
					<IfFileName glob="button.*" />
					<IfLastModified age="180d" />
				</Delete>
			</DefaultRolloverStrategy>
		</RollingFile>

		<!-- 工作流日志 -->
		<RollingFile name="WORKFLOW_LOG" fileName="../logs/workflow.log"
			filePattern="../logs/workflow.%d{yyyy-MM-dd}">
			<PatternLayout pattern="#### %d{yyyyMMdd HH:mm:ss,SSS} | %l | %p |  %m %n" />
			<Policies>
				<TimeBasedTriggeringPolicy />
			</Policies>
			<DefaultRolloverStrategy>
				<Delete basePath="../logs/" maxDepth="1">
					<IfFileName glob="workflow.*" />
					<IfLastModified age="180d" />
				</Delete>
			</DefaultRolloverStrategy>
		</RollingFile>
	</appenders>

	<loggers>
		<!-- 工作流日志控制器 additivity指示是否遵循缺省的继承机制：若是additivity设为false，则子Logger只会在自己的appender里输出，而不会在父Logger的appender里输出 -->
		<AsyncLogger name="com.epoint.workflow.bizlogic" level="info"
			additivity="false" includeLocation="true">
			<AppenderRef ref="WORKFLOW_LOG" />
		</AsyncLogger>

		<!-- 按钮点击日志控制器 additivity指示是否遵循缺省的继承机制：若是additivity设为false，则子Logger只会在自己的appender里输出，而不会在父Logger的appender里输出 -->
		<AsyncLogger name="com.epoint.frame.util.ButtonLog" level="debug"
			additivity="false" includeLocation="true">
			<AppenderRef ref="BUTTON_LOG" />
		</AsyncLogger>

		<!-- sql日志控制器 -->
		<Logger name="druid.sql.Statement" level="error">
		</Logger>

		<!-- SOA日志 -->
		<Logger name="SOA" level="error">
		</Logger>

		<!-- 统一附件日志 -->
		<Logger name="epoint-attach-log" level="info">
		</Logger>

		<!-- 集群session日志控制器 -->
		<Logger name="com.epoint.core.utils.clustered" level="error">
		</Logger>

		<!-- cxf日志控制器 -->
		<Logger name="org.apache.cxf" level="error">
		</Logger>

		<!-- 安全日志控制器 -->
		<Logger name="com.epoint.frame.security" level="info">
		</Logger>

		<!-- springmvc的html页面等资源处理的日志控制器 -->
		<Logger name="org.springframework.web.servlet.resource" level="error">
		</Logger>

		<!-- springmvc的rest接口日志控制器 -->
		<Logger name="org.springframework.web.servlet.mvc.method.annotation"
			level="error">
		</Logger>

		<!-- oauth2缓存管理 -->
		<Logger name="com.epoint.oauth2.core.memory.EhCacheManagerAdapter"
			level="error">
		</Logger>

		<!-- shiro登录日志控制器 -->
		<Logger name="org.apache.shiro.authc.pam.ModularRealmAuthenticator"
			level="error">
		</Logger>

		<!-- 统一认证（SSO） -->
		<Logger name="epoint-sso-log" level="info">
		</Logger>
		
		<!-- p6spy日志控制器 -->
		<Logger name="p6spy" level="error">
		</Logger>

		<AsyncRoot level="info" includeLocation="true">
			<AppenderRef ref="Console" />
		</AsyncRoot>
	</loggers>
</configuration>