(function(F,c){var y=c("#tabNav"),q=c(".fui-tabnav-hd",y),e=c(".fui-tabnav-main",q),z=e.parent(),h=c(".fui-tabnav-bd",y),k=c(".fui-navlist-wrap",h),r=c("#mainContent"),G=c("#content-iframe",r),t=c(".nav-scroll-btns",q),l=c(".nav-scroll-btns",h),A=l.find(".scroll-left"),u=l.find(".scroll-right"),f,v=function(a){G[0].src=Util.getRightUrl(a)},B=Mustache,H=c.trim(c("#tabnav-item-templ").html()),I=c.trim(c("#tabnav-subitem-templ").html()),J=function(a){var b=[],d=[];c.each(a,function(a,c){if(c.items&&c.items.length){var e={items:c.items};c.target=e.id="sub_"+c.code;d.push(B.render(I,e))}b.push(B.render(H,c))});e.html(Util.clearHtml(b.join("")));k.html(Util.clearHtml(d.join("")))},w,m={},x=0,g=0,n=0,p=0,C=function(a,b){b=b||0;var d=0;c(a).find("li").each(function(a,e){d+=c(e).outerWidth()+b});return d-b},D=function(){w||(w=C(e,12));n=w-x;0<n?t.removeClass("invisible"):(t.addClass("invisible"),e.stop(!0).css("margin-left",0),t.find(".scroll-left").addClass("disabled").next().removeClass("disabled"))},E=function(a){if((a=a||k.find(".fui-tabnav-sub.active"))&&a.length){var b=a[0].id;m[b]=m[b]||C(a);g=g||k.width();p=m[b]-g;m[b]>g?(l.removeClass("invisible"),a=-parseInt(e.css("margin-left"),10),0===a?(A.addClass("disabled"),u.removeClass("disabled")):(a>=p?u.addClass("disabled"):u.removeClass("disabled"),A.removeClass("disabled"))):(l.addClass("invisible"),a.stop(!0).css("margin-left",0))}};c(F).on("resize",function(){x=z.width();g=k.width();D();E()});q.on("click",".fui-tabnav-item",function(a){a.preventDefault();var b=c(this);a=b.find(".fui-tabnav-link");var d=a.data("target");b.hasClass("active")||(b=b.addClass("active").siblings(".active").removeClass("active"),Util.redrawPseudoEl(a.find("\x3e .fui-tabnav-icon")[0]),Util.redrawPseudoEl(b.find("\x3e .fui-tabnav-link \x3e .fui-tabnav-icon")[0]),d?(a=c("#"+d),a.addClass("active").siblings().removeClass("active"),h.removeClass("hidden"),r.addClass("shrinked"),f=a,E(a),a.find(".fui-tabnav-item").eq(0).trigger("click")):(h.addClass("hidden"),r.removeClass("shrinked"),a=a.data("url"),v(a)))}).on("click",".scroll-left",function(){var a=c(this),b=-parseInt(e.css("margin-left")),d=Math.min(100,b);0>b||(a.next().removeClass("disabled"),e.stop(!0).animate({marginLeft:"+\x3d"+d+"px"},function(){d==b&&a.addClass("disabled")}))}).on("click",".scroll-right",function(){var a=c(this),b=-parseInt(e.css("margin-left"),10),d=n-b,f=Math.min(100,d);b>=n||(a.prev().removeClass("disabled"),e.stop(!0).animate({marginLeft:"-\x3d"+f+"px"},function(){f==d&&a.addClass("disabled")}))});l.on("click",".scroll-left",function(){if(f&&f.length){var a=c(this),b=-parseInt(f.css("margin-left")),d=Math.min(100,b);0>b||(a.next().removeClass("disabled"),f.stop(!0).animate({marginLeft:"+\x3d"+d+"px"},function(){d==b&&a.addClass("disabled")}))}}).on("click",".scroll-right",function(){if(f&&f.length){var a=c(this),b=-parseInt(f.css("margin-left"),10),d=p-b,e=Math.min(100,d);b>=p||(a.prev().removeClass("disabled"),f.stop(!0).animate({marginLeft:"-\x3d"+e+"px"},function(){e==d&&a.addClass("disabled")}))}});h.on("click",".fui-tabnav-item",function(a){a.preventDefault();a=c(this);var b=a.find(".fui-tabnav-link").data("url");a.addClass("active").siblings().removeClass("active");v(b)});c(function(){var a=c.extend({query:"init-tabNav"},TabNav.params);return Util.ajax({type:"POST",dataType:"json",url:Util.getRightUrl(TabNav.loadUrl),data:a,error:Util._ajaxErr}).done(function(a){a&&(J(a),TabNav.defaultUrl?v(TabNav.defaultUrl):e.find(".fui-tabnav-item").eq(0).trigger("click"),x=z.width(),g=k.width(),D())})})})(this,jQuery);