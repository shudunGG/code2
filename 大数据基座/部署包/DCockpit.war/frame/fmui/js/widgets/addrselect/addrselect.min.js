!function(e,i){"use strict";function t(e){var t=this,s=[{key:window.cityData3,value:"请引入city.data-3.js"},{key:e,value:"请传入配置项!"},{key:e.container,value:"请传入容器"}];t.environment(s);var c=i.selector(e.container);if(e.container=c,!e.itemClick&&"function"!=typeof e.itemClick)throw new Error("请传入回调函数itemClick");t.itemClick=e.itemClick,t._insertTempl(c,a),t=i.extend(t,n,e),c.style.top=parseInt(t.top)+"px",t.isMask&&t._makeMask(),t.domArray={provinceList:c.querySelector("[data-type=province]"),cityList:c.querySelector("[data-type=city]")},t._analysisCityData(cityData3),t._showCity(),t._initListeners()}var a='<div class="em-province-area mui-scroll-wrapper"><ul class="em-province-list mui-scroll" data-type="province"></ul></div><div class="em-city-area mui-scroll-wrapper"><ul class="em-city-list cur mui-scroll" data-type="city"></ul></div>',n={top:0,province:[],city:[],provinceValue:"",cityValue:"",areaCode:"",litemplate:'<li class="em-list-item" data-areacode="{{value}}" data-index="{{index}}">{{{text}}}</li>',proviceActiveCls:"cur",cityActiveCls:"cur",isClose:!0,provinceIndex:0,cityIndex:0,isMask:!0};t.prototype={show:function(){this.container.style.display="block",this.maskEle&&(this.maskEle.style.display="block")},hide:function(){this.container.style.display="none",this.maskEle&&(this.maskEle.style.display="none")},toggle:function(){var e=this.container,i=this.maskEle;"block"==e.style.display?(e.style.display="none",i&&(i.style.display="none")):(e.style.display="block",i&&(i.style.display="block"))},_insertTempl:function(e,i){e.innerHTML=i,mui(".mui-scroll-wrapper").scroll({scrollY:!0,scrollX:!1})},environment:function(e){for(var i=0,t=e.length;i<t;i++)if(!e[i].key)throw new Error(e[i].value)},_analysisCityData:function(e){var i=this,t=i.province=[],a=i.domArray;e.forEach(function(e,i){t.push({text:e.text,value:e.value,index:i})}),i._ergodic(t,a.provinceList)},_ergodic:function(e,i,t){var a="",n=this.domArray.cityList.children,s=this.litemplate;e.forEach(function(e){a+=Mustache.render(s,e)}),i.innerHTML=a,void 0!=t&&n[t].classList.add("cur")},_initListeners:function(){var e=this,i=e.maskEle,t=e.container,a=e.isClose,n=e.domArray.provinceList,s=e.proviceActiveCls,c=e.domArray.cityList,r=e.cityActiveCls;e.provinceName=n.children[0].innerHTML,e.cityName=c.children[0].innerHTML,e.areaCode=c.children[0].dataset.areacode,e._addEvent(n,"li",function(){var i=this,t=i.dataset.index,a=cityData3[t].children[0].children||cityData3[t].children,n=e.siblings(i);e.provinceIndex=t,e.provinceName=i.innerHTML,i.classList.add(s),n.forEach(function(e,i){e.classList.remove(s)}),e._ergodic(a,c)}),e._addEvent(c,"li",function(){var n=this,s=e.siblings(n);n.classList.add(r),c.classList.remove("cur"),s.forEach(function(e){e.classList.remove(r)}),[].slice.call(c.children).forEach(function(i,t){i.classList.contains(r)&&(e.cityIndex=t)}),1==a&&(t.style.display="none");var l={areaCode:n.dataset.areacode,cityName:n.innerHTML,provinceName:e.provinceName};i&&(i.style.display="none"),e.itemClick.call(n,l)}),e._addEvent(i,"",function(){this.style.display="none",t.style.display="none"})},_addEvent:function(e,i,t){i=i.toUpperCase(),e&&e.addEventListener("tap",function(e){for(var a=e.target;i&&a.tagName!=i;)a=a.parentNode;t.call(a)})},siblings:function(e){for(var i=[],t=e.parentNode.children,a=0,n=t.length;a<n;a++)e!=t[a]&&i.push(t[a]);return i},_showCity:function(e,i){e=e||0,i=i||0;var t=this,a=cityData3[e].children[0].children,n=t.domArray,s=n.provinceList,c=n.cityList;s.children[e].classList.add("cur"),this._ergodic(a,c,i)},_makeMask:function(){var i=e.getElementById("em-mask");if(i)this.maskEle=i;else{var t=e.createElement("div");t.id="em-mask",t.style.cssText="display: none; position: fixed; left: 0; right: 0; bottom: 0; background-color: #666; z-index: 10;",t.style.top=this.top,e.body.appendChild(t),this.maskEle=e.getElementById("em-mask")}}},window.AddrSelect=t}(document,window.Util);