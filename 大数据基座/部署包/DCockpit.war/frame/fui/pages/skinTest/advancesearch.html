<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>高级搜索测试</title>
    <script>
            var data = [{
                "id": "usa",
                "text": "美国"
            }, {
                "id": "cn",
                "text": "中国"
            }, {
                "id": "jp",
                "text": "日本"
            }, {
                "id": "en",
                "text": "英国"
            }, {
                "id": "de",
                "text": "德国"
            }, {
                "id": "fr",
                "text": "法国"
            }, {
                "id": "ca",
                "text": "加拿大"
            }, {
                "id": "at",
                "text": "奥地利"
            }, {
                "id": "ch",
                "text": "瑞士"
            }];
            </script>
    <script src="../../js/cssboot.js"></script>
</head>

<body>

    <!-- toolbar区域 -->
    <div class="fui-toolbar">
        <div class="btn-group mr10">
            <a class="mini-button" iconCls="icon-save">保存</a>
            <a class="mini-button" iconCls="icon-cut">操作2</a>
        </div>
        <div class="btn-group mr5">
            <a class="mini-button" plain="true" iconCls="icon-addcircle">增加</a>
            <a class="mini-button" plain="true" enabled="false" iconCls="icon-edit">修改</a>
            <a class="mini-button" plain="true" iconCls="icon-minuscircle">删除</a>
        </div>

        <!--帮助按钮 -->
        <!-- <a role="helper" showtype="tooltip">注意事项</a> -->
        <a role="helper" >注意事项</a>

        <p class="text-special mr10">这是一个简短说明文字</p>

        <div class="btn-group r">
            <a class="mini-button">操作3</a>
            <a class="mini-button">操作4</a>
        </div>
        <div class="btn-group mr5 r">
            <a class="mini-button" plain="true" iconCls="icon-addcircle">增加</a>
            <a class="mini-button" plain="true" iconCls="icon-edit">修改</a>
            <a class="mini-button" plain="true" enabled="false" iconCls="icon-minuscircle">删除</a>
        </div>

        <div class="btn-group mr5 r">
            <a class="mini-button" iconCls="icon-addcircle" tooltip="增加" ></a>
            <a class="mini-button" iconCls="icon-edit" tooltip="编辑" ></a>
            <!-- <a class="mini-button" iconCls="icon-minuscircle" tooltip="删除" ></a> -->
        </div>


    </div>
    <!-- 帮助信息区域 默认隐藏-->
    <div class="fui-notice hidden">
        <p><em>注意点1：</em>我在这篇教程中介绍的BezierPlugin插件，可以使得几乎所有的属性沿着一条由一组点值定义的贝塞尔曲线路径运动。</p>
        <p><em>注意点2：</em>我在这篇教程中介绍的BezierPlugin插件，可以使得几乎所有的属性沿着一条由一组点值定义的贝塞尔曲线路径运动。</p>
        <p><em>注意点3：</em>我在这篇教程中介绍的BezierPlugin插件，可以使得几乎所有的属性沿着一条由一组点值定义的贝塞尔曲线路径运动。</p>
    </div>
    <!-- 条件区域 -->
    <div class="fui-search" primaryControl="pivotalKey" opened="true">
        <!-- 
            primaryControl 值为一个下面搜索区域中的textbox的id。
            当指定了此属性，并且对应的控件类型为textbox 将会在工具栏高级搜索按钮旁边加上一个输入框，输入值自动关联设置给下面指定的控件，并绑定了回车触发搜索回调。
            仅当opened属性不为true时生效，且指定的控件类型必须为textbox
        -->
        <!-- opened 是否默认展开 -->
        <!-- 表单布局 -->
        <div class="fui-form">
            <div role="form">
                <div role="row">
                    <div role="control" label="搜索关键字段" starred="true">
                        <input class="mini-textbox" id="pivotalKey" emptyText="请输入提示字符" style="width:100%;" />
                    </div>
                    <div role="control" label="表单字段11" starred="true">
                        <input class="mini-textbox" id="country" emptyText="请输入提示字符" value="我水电费见识过的积分关键是高房价时代光华福建省大公鸡富商巨贾分号仅深度国际发送到交话费国剧盛典"
                            style="width:100%;" />
                    </div>
                    <div role="control" label="表单字段11" starred="true">
                        <input class="mini-textbox" emptyText="请输入提示字符" value="我水电费见识过的积分关键是高房价时代光华福建省大公鸡富商巨贾分号仅深度国际发送到交话费国剧盛典"
                            style="width:100%;" />
                    </div>
                </div>
                <div role="row">
                    <div role="control" label="表单字段11" starred="true">
                        <input class="mini-textbox" emptyText="请输入提示字符" value="我水电费见识过的积分关键是高房价时代光华福建省大公鸡富商巨贾分号仅深度国际发送到交话费国剧盛典"
                            style="width:100%;" />
                    </div>
                    <div role="control" label="表单字段11" starred="true">
                        <input class="mini-textbox" emptyText="请输入提示字符" value="我水电费见识过的积分关键是高房价时代光华福建省大公鸡富商巨贾分号仅深度国际发送到交话费国剧盛典"
                            style="width:100%;" />
                    </div>
                    <div role="control" label="表单字段11" starred="true">
                        <input class="mini-textbox" emptyText="请输入提示字符" value="我水电费见识过的积分关键是高房价时代光华福建省大公鸡富商巨贾分号仅深度国际发送到交话费国剧盛典"
                            style="width:100%;" />
                    </div>
                </div>
                <!-- 2列 -->
                <div role="row">
                    <div role="control" label="表单字段1" starred="true">
                        <input class="mini-textbox" emptyText="请输入提示字符" style="width:100%;" />
                    </div>
                    <div role="control" label="国家" starred="true">
                        <input name="country" class="mini-combobox" value="cn" data="data" style="width:100%" />
                    </div>
                </div>
                <!-- 4列 -->
                <div role="row">
                    <div role="control" label="时间" starred="true">
                        <input name="BirthDay" class="mini-datepicker" value="2010-10-12" style="width:100%" />
                    </div>
                    <div role="control" label="年龄" starred="true">
                        <input name="Age" class="mini-spinner" value="22" minValue="10" maxValue="50" style="width:100%" />
                    </div>
                </div>
                <!-- 4列 -->
                <!-- <div role="row">
                    <div role="control" label="表单字段5" starred="true">
                        <input id="checkboxlist" name="country2" class="mini-checkboxlist" repeatItems="5" repeatLayout="table"
                            textField="text" valueField="id" value="cn,usa" data="data" style="width:100%" />
                    </div>
                    <div role="control" label="表单字段6" starred="true">
                        <input id="checkbox1" class="mini-checkbox" text="我是CheckBook" checked="true" style="width:100%" />
                    </div>
                </div> -->

            </div>

        </div>

        <!-- 搜索按钮 -->
        <a role="searcher" callback="searchData"></a>
        <a role="reset" callback="resetCallback"></a>
        <a role="close" callback="closeCallback"></a>
    </div>

    <!-- 内容区域 -->
    <div class="fui-content">
        <!--<p style="margin-bottom: 50px;">1</p>
            <p style="margin-bottom: 50px;">1</p>
            <p style="margin-bottom: 50px;">1</p>
            <p style="margin-bottom: 50px;">1</p>
            <p style="margin-bottom: 50px;">1</p>
            <p style="margin-bottom: 50px;">1</p>
            <p style="margin-bottom: 50px;">1</p>-->
        <div id="datagrid" class="mini-datagrid" style="width:100%;height:100%;" url="https://fe.epoint.com.cn/miniui_dev/demo/data/AjaxService.php?method=SearchEmployees"
            idField="id" allowResize="true" sizeList="[20,30,50,100]" pageSize="20">
            <div property="columns">
                <div type="indexcolumn"></div>
                <div field="loginname" width="120" headerAlign="center" allowSort="true">员工帐号</div>
                <div field="name" width="120" headerAlign="center" allowSort="true">姓名</div>
                <div field="gender" width="100" renderer="onGenderRenderer" align="center" headerAlign="center">性别</div>
                <div field="salary" numberFormat="¥#,0.00" align="right" width="100" allowSort="true">薪资</div>
                <div field="age" width="100" allowSort="true" decimalPlaces="2" dataType="float">年龄</div>
                <div field="createtime" width="100" headerAlign="center" dateFormat="yyyy-MM-dd" allowSort="true">创建日期</div>
            </div>
        </div>
    </div>

    <script>

        function searchData() {
            console.log('search');
            var sc = {};
            $.map(mini.getChildControls($('.fui-form')[0]),function (item) {
                sc[item.id] = item.getValue();
            });
            console.log('搜索条件' + JSON.stringify(sc, 0, 4));
            grid.load();
        }

        function resetCallback(params) {
            console.log('reset');
        }

        function closeCallback(params) {
            console.log('close');
        }


        // SrcBoot.output(['fui/js/epoint/uc/oauploader/oauploader.js']);
    </script>
    <script src="../../js/jsboot.js"></script>

    <script type="text/javascript">
        // mini.parse();


        var grid = mini.get("datagrid");


        grid.load();


        function search() {
            var key = document.getElementById("key").value;
            grid.load({
                key: key
            });
        }
        $("#key").bind("keydown", function (e) {
            if (e.keyCode == 13) {
                search();
            }
        });
        ///////////////////////////////////////////////////////
        var Genders = [{
            id: 1,
            text: '男'
        }, {
            id: 2,
            text: '女'
        }];

        function onGenderRenderer(e) {
            for (var i = 0, l = Genders.length; i < l; i++) {
                var g = Genders[i];
                if (g.id == e.value) return g.text;
            }
            return "";
        }
    </script>

</body>

</html>