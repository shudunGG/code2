<!DOCTYPE html>
<html>

<head>
<title>信息发布审核工作流</title>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!-- 请修改相对路径 -->
<script src="../../../../../frame/fui/js/cssboot.js"></script>
<style>
#editor {
	height: 300px;
}
</style>
</head>

<body>
	<div class="page-loading"></div>

	<!-- toolbar区域 -->
	<div class="fui-toolbar">
		<div class="uc-handlecontrols" id="handlecontrols"
			action="handlecontrolsaction.handleCtrl" style="width: 100%"></div>
	</div>

	<!-- 内容区域 -->
	<div class="fui-content">
		<!-- 隐藏按钮id不能修改 -->
		<div class="hidden">
			<!-- <a class="mini-button" id="btnSaveFrom" onclick="saveFrom();">保存</a> -->
			<a class="mini-button" id="btnSubmit" onclick="submit();">提交</a>
		</div>

		<div class="fui-accordions">
			<div role="accordion" opened="ture">
				<div role="head" title="表单填写"></div>
				<div role="body">
					<div id="fui-form" class="fui-form">
						<div role="form">
							<div role="row">
								<div role="control" label="信息标题">
									<div class="mini-outputtext" bind="dataBean.title"></div>
								</div>
								<div role="control" label="所属栏目">
									<div class="mini-outputtext" bind="dataBean.categoryname"></div>
								</div>
							</div>
							<div role="row">
								<div role="control" label="发布日期">
									<div class="mini-outputtext" bind="dataBean.publishdate"
										data-options="{'format':'yyyy-MM-dd'}" dateFormat="yyyy-MM-dd"></div>
								</div>
								<div role="control" label="截止有效期">
									<div class="mini-outputtext" bind="dataBean.publishenddate"
										data-options="{'format':'yyyy-MM-dd'}" dateFormat="yyyy-MM-dd"></div>
								</div>
							</div>
							<div role="row" id="apiUrl">
								<div role="control" label="创建日期">
									<div class="mini-outputtext" bind="dataBean.pubtime"
										data-options="{'format':'yyyy-MM-dd'}" dateFormat="yyyy-MM-dd"></div>
								</div>
								<div role="control" label="状态">
									<div class="mini-outputtext" bind="dataBean.status"></div>
								</div>
							</div>
							<div role="row">
								<div role="control" label="发布人">
									<div class="mini-outputtext" bind="dataBean.createusername"></div>
								</div>
							</div>
							<div role="row">
								<div role="control" label="简介">
									<div class="mini-outputtext" bind="dataBean.overview"></div>
								</div>
							</div>
							<div role="row">
								<div role="control" label="内容" starred="true">
									<textarea id="ueditor" class="mini-webeditor" editstyle="light" editSkin="flat8"
										readOnly="true" bind="dataBean.content" maxlength="10000"></textarea>
								</div>
							</div>
							<div role="row" id="url">
								<div role="control" label="链接地址">
									<input class="mini-outputtext"" bind="dataBean.url" />
								</div>
							</div>
							<div role="row">
								<div role="control" label="附件">
									<div id="uploader3" class="mini-webuploader" pickerText="上传附件"
										action="getAttachModel" showDefaultUI="true" onload="onload"
										limitType="xls,xlsx,docx,doc,txt,ppt,pptx,pdf,rar,zip,7z,mp3,mp4"
										auto="true" fileNumLimit="5" fileSizeLimit="10000k"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="fui-accordions">
			<div role="accordion">
				<div role="head" title="签署意见"></div>
				<div role="body">
					<!-- 
							showmode(显示意见模板模式)
		   					1:(默认)显示意见模板区域，但仅显示个人意见模板
		   					2:显示意见模板区域，显示公共和个人意见模板
		   					3:不显示意见模板区域
						-->
					<div class="uc-workflowopinion" id="workflowopinion"
						action="workflowopinionaction.opinionCtrl"
						data-options="{'showmode' : 2}" style="width: 100%;"></div>
				</div>
			</div>
		</div>
	</div>
	<!-- 请修改相对路径 -->
	<script src="../../../../../rest/resource/jsboot"></script>
	<script
		src="../../../../../frame/pages/epointworkflow/js/workflowjsboot.js"></script>

	<script>
		//初始化页面
		epoint.initPage('webinfoworkflowaction', '', function(data) {

		});

		function submit() {
			if (epoint.validate()) {
				epoint.execute('submit', '', newCallback);
			} else
				ShowTdOperate(true);
		}

		// 新增操作的回调,必须回调handlecontrols中的HeaderSubmit触发流程流转
		function newCallback(data) {
			if (data && data.msg) {
				epoint.alert(data.msg, '', null, 'info');
				ShowTdOperate(true);
			} else {
				HeaderSubmit();
			}
		}
	</script>
</body>

</html>