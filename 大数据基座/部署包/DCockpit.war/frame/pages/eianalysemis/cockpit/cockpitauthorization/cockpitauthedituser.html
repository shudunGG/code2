<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>配置授权</title>
    <script src="../../../../../frame/fui/js/cssboot.js"></script>
    </script>
    <style type="text/css">
    </style>
</head>

<body>
    <div class="page-loading"></div>
    <!-- 页面内容区域 -->
    <div class="fui-content">
        <div class="fui-form" id="fui-form">
            <div role="row">
                <div class="form-control span6" label="用户设置">
                    <div id="tabstreeselect" class="mini-tabstreeselect"
                        selectedPanelTitle="已选择记录" style="width: 99%; height: 600px"
                        action="getTreeModel2" loadWhenChecked="true"
                        filterMode="server" showBorder="true">
                        <div tabText="授权用戶" tabKey="user"></div>
                    </div>
                </div>
                <div style="width: 100%;text-align: center;">
                    <a class="mini-button mini-btn-primary" style="margin: 5px auto;width: 120px;" 
                        iconCls="icon-addcircle" onclick="saveAndClose" id="initBtn">保存授权</a>
                    <a class="mini-button" style="margin: 5px auto;width: 120px;" onclick="epoint.closeDialog">取消</a>
                </div>
                

            </div>
        </div>
    </div>


    <script src="../../../../../rest/resource/jsboot"></script>
    <script>
        //树js对象
        var tree2 = mini.get("tabstreeselect");

		epoint.initPage('cockpitauthorizationaction', '@all', function (data){
            // epoint.execute("initTree", '@none', null, function(data){
            //     epoint.refresh('fui-form');
            // });
            
		});

        

        function saveAndClose(){
            epoint.execute("saveUser", 'tabstreeselect', null, function (data){
                epoint.alert("授权成功");
                epoint.closeDialog();
            });
        }
    </script>
</body>

</html>