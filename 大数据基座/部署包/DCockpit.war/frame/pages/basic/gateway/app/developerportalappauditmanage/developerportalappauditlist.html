<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>审核记录列表</title>
<script src="../../../../../fui/js/cssboot.js"></script>
</head>

<body>
	<div class="page-loading"></div>
	
	<!-- 条件区域 -->
	<div class="fui-condition">
		<div class="fui-form" id="fui-form">
			<div id="cform" role="form">
				<div role="row">
					<div role="control" label="状态">
						<div id="search_appStatus" class="mini-combobox" style="width:150px;"
						textField="text" valueField="id" bind="appStatus" showClose="true"
					    data="[{id:'approved',text:'审核通过'},{id:'denied',text:'审核不通过'}]" onkeyenter="searchData();" oncloseclick="onCloseClick"></div>
					</div>
					<div role="control" label="应用名">
						<input id="search_appName" class="mini-textbox"
							bind="appName" onkeyenter="searchData();" />
					</div>
					<div role="control" label="申请人">
						<input id="search_linkManName" class="mini-textbox"
							bind="linkManName" onkeyenter="searchData();" />
					</div>
				</div>
			</div>
		</div>
		<a role="searcher" callback="searchData"></a>
	</div>
	
	<!-- 内容区域 -->
	<div class="fui-content">
		<div id="datagrid" name="datagrid" class="mini-datagrid"
			idField="rowguid" multiSelect="true"
			style="width: 100%; height: 100%;" allowResize="true"
			showPager="true" action="getDataGridData">
			<div property="columns">
				<div type="indexcolumn" width="50" headerAlign="center">序</div>
				<div field="appName" headerAlign="center" width="150">应用名称</div>
				<div field="companyName" headerAlign="center" align="left" width="100%">企业名称</div>
				<div field="linkManName" headerAlign="center" align="center" width="150">申请人</div>
				<div field="auditTime" headerAlign="center" renderer="onAuditTimeRender"
					align="center" width="150">审核时间</div>
				<div id="auditStatus" field="appstatus" headerAlign="center" align="center" width="150" render="onRender">审核状态</div>
				<div field="auditDesc" headerAlign="center" align="center" width="150">理由</div>
			</div>
		</div>
	</div>

	<script src="../../../../../../rest/resource/jsboot"></script>
	<script>
		//<![CDATA[
		                      
		//初始化页面
		epoint.initPage('developerportalappauditlistaction','',initCallBack);
		
		var onRender = function(e){
			return renderCell(e,"pass");
		}
		
		
		function initCallBack(e){
			var appGuid = e.appGuid;
			console.log('appGuid='+appGuid);
			
		/* 	mini.get("selectedServiceType").setText(e.serviceType);
			mini.get("selectedServiceType").setValue(e.serviceType);
			
			mini.get("selectedDistrict").setText(e.allowDistrict);
			mini.get("selectedDistrict").setValue(e.allowDistrict); */
			
		}

		// 表格对象
		var grid = mini.get("datagrid");

		// 格式化审核时间列
		function onAuditTimeRender(e) {
			
			var auditTime = e.value;
			
			auditTime = new Date(auditTime);
			
			// 格式化时间
			var year = auditTime.getFullYear();
			var month = auditTime.getMonth() + 1;
			month = fixZero(month);
			var date = auditTime.getDate();
			date = fixZero(date);
			var hours = auditTime.getHours();
			hours = fixZero(hours);
			var minutes = auditTime.getMinutes();
			minutes = fixZero(minutes);
			var seconds = auditTime.getSeconds();
			seconds = fixZero(seconds);
			
			return year + '-' + month + '-' + date + ' ' + hours + ':' + minutes + ':' + seconds;
		}

		function fixZero(data){
			if (data < 10) {
				data = '0' + data;
			}
			return data;
		}

		// 搜索条件状态清除
		function onCloseClick(e) {
            var obj = e.sender;
            obj.setText("");
            obj.setValue("");
        }
				
		// 搜索
		function searchData(){
			epoint.refresh(['datagrid', 'fui-form']);
		}
		//]]>
	</script>


</body>
</html>