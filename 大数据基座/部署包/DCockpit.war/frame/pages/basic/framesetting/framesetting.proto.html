<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>框架系统参数配置</title>
        <script src="../../../js/cssboot.js"></script>
        <script>
            SrcBoot.output(['./framesetting.min.css']);
        </script>
        <style>
            .form-label {
                text-align: left;
                padding-left: 10px;
            }
        </style>
    </head>

    <body>
        <div class="page-loading"></div>
        <div class="fui-toolbar">
            <!-- <span class="mini-button" id="save">保存配置</span> -->
            <div class="tabs-header clearfix l" id="tabs-header" data-group="config-tab">
                <div class="tab-item l" data-target="base"><span class="modicon-8"></span>基本配置</div>
                <div class="tab-item l" data-target="safe"><span class="modicon-73"></span>安全配置</div>
                <div class="tab-item l" data-target="role"><span class="modicon-92"></span>权限配置</div>
            </div>
            <div class="button-group r">
                <input id="search-input" class="mini-autocomplete" textField="name" valueField="id" value="" showNullItem="false" remote="false" allowInput="true" emptyText="搜索" loadingText="" />
            </div>
        </div>
        <div class="fui-content">
            <div class="tabs-wrap" id="tabs-wrap" data-group="config-tab">
                <div class="tab-body clearfix" data-id="base">
                    <div class="category-nav"></div>
                    <div class="config-content">
                        <!-- 组织架构同步 -->
                        <div class="fui-block">
                            <div class="fui-block-hd">组织架构同步</div>
                            <div class="fui-block-bd">
                                <div class="fui-form">
                                    <div role="form">
                                        <div role="row">
                                            <div role="control" label="Ldap同步">
                                                <input class="mini-checkbox switch" bind="ass" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="Ldap 数据结构">
                                                <input class="mini-radiobuttonlist" data="mockedListData" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="Ldap 数据源">
                                                <input class="mini-radiobuttonlist" data="mockedListData" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="Ldap 连接地址">
                                                <input class="mini-textbox" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="登录DN地址">
                                                <input class="mini-textbox" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="登录密码">
                                                <input class="mini-password" />
                                            </div>
                                        </div>
                                        <div role="row" class="bottom-space">
                                            <div role="control" label="Ldap 根路径">
                                                <input class="mini-textbox" />
                                            </div>
                                        </div>

                                        <div role="row">
                                            <div role="control" label="微信同步">
                                                <input class="mini-checkbox" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="企业id">
                                                <input class="mini-textbox" />
                                            </div>
                                        </div>
                                        <div role="row" class="bottom-space">
                                            <div role="control" label="通讯录密钥">
                                                <input class="mini-textbox" />
                                            </div>
                                        </div>

                                        <div role="row">
                                            <div role="control" label="钉钉同步">
                                                <input class="mini-checkbox" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="企业id">
                                                <input class="mini-textbox" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="通讯录密钥">
                                                <input class="mini-textbox" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="第三方同步id取值">
                                                <input class="mini-radiobuttonlist" data="[{id:'userguid',text:'userguid'},{id:'loginid',text:'loginid'}]" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 用户管理 -->
                        <div class="fui-block">
                            <div class="fui-block-hd">用户管理</div>
                            <div class="fui-block-bd">
                                <div class="fui-form">
                                    <div role="form">
                                        <div role="row">
                                            <div role="control" label="独立单位管控">
                                                <input class="mini-checkbox" text="开启下层权限管理" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="用户切换功能">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="多账号模式">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="手机号唯一性">
                                                <input class="mini-checkbox" text="开启唯一性检查" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="用户删除">
                                                <input class="mini-checkbox" text="允许 admin 、 ouAdmin 删除" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="同步兼职部门">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                        <div role="row" class="bottom-space">
                                            <div role="control" label="同步子部门">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>

                                        <div role="row">
                                            <div role="control" label="部门简称">
                                                <input class="mini-checkbox" text="部门名称在树中显示为简称" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="部门模块">
                                                <input class="mini-checkbox" text="启动用" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="部门排序">
                                                <input class="mini-radiobuttonlist" data="[{id:'asc',text:'升序'},{id:'desc',text:'降序'}]" />
                                            </div>
                                        </div>
                                        <div role="row" class="bottom-space">
                                            <div role="control" label="部门内排序">
                                                <input class="mini-checkbox" text="开启用户列表在部门内排序" />
                                            </div>
                                        </div>

                                        <div role="row">
                                            <div role="control" label="用户登录名">
                                                <input class="mini-checkbox" text="开启大小写敏感" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="用户默认密码">
                                                <input class="mini-password" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="强制修改密码">
                                                <input class="mini-checkbox" text="开启" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="密码复杂度">
                                                <input class="mini-radiobuttonlist" data="[{id:'h',text:'高'},{id:'m',text:'中'},{id:'s',text:'低'}]" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="密码有效天数">
                                                <input class="mini-spinner narrow" value="15" step="5" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="头像压缩比例">
                                                <input class="mini-spinner narrow" value="80" step="10" minValue="0" maxValue="100" />
                                            </div>
                                        </div>
                                        <div role="row" class="bottom-space">
                                            <div role="control" label="头像压缩配置"><input class="mini-textbox narrow" value="50" />K</div>
                                        </div>

                                        <div role="row">
                                            <div role="control" label="脱敏处理">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="手机号脱敏处理">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 租户管理 -->
                        <div class="fui-block">
                            <div class="fui-block-hd">租户管理</div>
                            <div class="fui-block-bd">
                                <div class="fui-form">
                                    <div role="form">
                                        <div role="row">
                                            <div role="control" label="租户模式">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 安全配置 -->
                        <div class="fui-block">
                            <div class="fui-block-hd">安全配置</div>
                            <div class="fui-block-bd">
                                <div class="fui-form">
                                    <div role="form">
                                        <div role="row">
                                            <div role="control" label="安全校验">
                                                <input class="mini-checkbox" text="开启页面 bind 请求安全校验" />
                                                <span class="text-assist">开发时清关闭，否则会将页面的控件信息记录到缓存</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="校验文件夹配置">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">bind 校验拓展文件夹，配置webapp 下额外的需要加入验证的页面文件夹（只需要webapp下第一层目录，多个以“;”分隔）</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="跳过解析的action">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">bind 校验解析需要跳过的action名字，多个以“;”分隔</span>
                                            </div>
                                        </div>
                                        <div role="row" class="bottom-space">
                                            <div role="control" label="管理员访问验证">
                                                <input class="mini-checkbox" text="自检页面天机管理员用户访问全选验证" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="url 拷贝防御">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">需要进行url拷贝防御的地址配置，多个以“;”分隔。 框架附件下载地址（attachAction/getContent）</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="跳过 url 拷贝防御">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">url 拷贝防御跳过的IP地址，多个以“;”分隔。</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="URL 参数加密">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                        <div role="row" class="bottom-space">
                                            <div role="control" label="跳过 url 参数加密">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">多个以“;”分隔。</span>
                                            </div>
                                        </div>

                                        <div role="row">
                                            <div role="control" label="请求方法拦截">
                                                <input class="mini-checkbox" text="启用" />
                                                <span class="text-assist">针对图片下载类的GET请求需求，需要在方法上添加相应的的注解； @RequestSupport(Type={RequestType.GET})</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="数据源防篡改">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="移动端接口参数加密">
                                                <input class="mini-checkbox" text="启用移动端接口参数加密" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="隐藏域安全校验">
                                                <input class="mini-checkbox" text="启用隐藏域数据Xss防御" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="文件编号检测">
                                                <input class="mini-checkbox" text="开启上传控件 fileNumLimit 检测" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="表格字段同步">
                                                <input class="mini-checkbox" text="表格服务端返回的数据与前端定义的表格列保持同步" />
                                                <span class="text-assist">即未在前端页面上定义的列的数据不会返回。</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-body clearfix" data-id="safe">
                    <div class="category-nav"></div>
                    <div class="config-content">
                        <!-- 租户管理 -->
                        <div class="fui-block">
                            <div class="fui-block-hd">租户管理2</div>
                            <div class="fui-block-bd">
                                <div class="fui-form">
                                    <div role="form">
                                        <div role="row">
                                            <div role="control" label="租户模式">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 安全配置 -->
                        <div class="fui-block">
                            <div class="fui-block-hd">安全配置2</div>
                            <div class="fui-block-bd">
                                <div class="fui-form">
                                    <div role="form">
                                        <div role="row">
                                            <div role="control" label="安全校验">
                                                <input class="mini-checkbox" text="开启页面 bind 请求安全校验" />
                                                <span class="text-assist">开发时清关闭，否则会将页面的控件信息记录到缓存</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="校验文件夹配置">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">bind 校验拓展文件夹，配置webapp 下额外的需要加入验证的页面文件夹（只需要webapp下第一层目录，多个以“;”分隔）</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="跳过解析的action">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">bind 校验解析需要跳过的action名字，多个以“;”分隔</span>
                                            </div>
                                        </div>
                                        <div role="row" class="bottom-space">
                                            <div role="control" label="管理员访问验证">
                                                <input class="mini-checkbox" text="自检页面天机管理员用户访问全选验证" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="url 拷贝防御">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">需要进行url拷贝防御的地址配置，多个以“;”分隔。 框架附件下载地址（attachAction/getContent）</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="跳过 url 拷贝防御">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">url 拷贝防御跳过的IP地址，多个以“;”分隔。</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="URL 参数加密">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                        <div role="row" class="bottom-space">
                                            <div role="control" label="跳过 url 参数加密">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">多个以“;”分隔。</span>
                                            </div>
                                        </div>

                                        <div role="row">
                                            <div role="control" label="请求方法拦截">
                                                <input class="mini-checkbox" text="启用" />
                                                <span class="text-assist">针对图片下载类的GET请求需求，需要在方法上添加相应的的注解； @RequestSupport(Type={RequestType.GET})</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="数据源防篡改">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="移动端接口参数加密">
                                                <input class="mini-checkbox" text="启用移动端接口参数加密" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="隐藏域安全校验">
                                                <input class="mini-checkbox" text="启用隐藏域数据Xss防御" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="文件编号检测">
                                                <input class="mini-checkbox" text="开启上传控件 fileNumLimit 检测" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="表格字段同步">
                                                <input class="mini-checkbox" text="表格服务端返回的数据与前端定义的表格列保持同步" />
                                                <span class="text-assist">即未在前端页面上定义的列的数据不会返回。</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-body clearfix" data-id="role">
                    <div class="category-nav"></div>
                    <div class="config-content">
                        <!-- 租户管理 -->
                        <div class="fui-block">
                            <div class="fui-block-hd">租户管理3</div>
                            <div class="fui-block-bd">
                                <div class="fui-form">
                                    <div role="form">
                                        <div role="row">
                                            <div role="control" label="租户模式">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 安全配置 -->
                        <div class="fui-block">
                            <div class="fui-block-hd">安全配置3</div>
                            <div class="fui-block-bd">
                                <div class="fui-form">
                                    <div role="form">
                                        <div role="row">
                                            <div role="control" label="安全校验">
                                                <input class="mini-checkbox" text="开启页面 bind 请求安全校验" />
                                                <span class="text-assist">开发时清关闭，否则会将页面的控件信息记录到缓存</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="校验文件夹配置">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">bind 校验拓展文件夹，配置webapp 下额外的需要加入验证的页面文件夹（只需要webapp下第一层目录，多个以“;”分隔）</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="跳过解析的action">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">bind 校验解析需要跳过的action名字，多个以“;”分隔</span>
                                            </div>
                                        </div>
                                        <div role="row" class="bottom-space">
                                            <div role="control" label="管理员访问验证">
                                                <input class="mini-checkbox" text="自检页面天机管理员用户访问全选验证" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="url 拷贝防御">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">需要进行url拷贝防御的地址配置，多个以“;”分隔。 框架附件下载地址（attachAction/getContent）</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="跳过 url 拷贝防御">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">url 拷贝防御跳过的IP地址，多个以“;”分隔。</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="URL 参数加密">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                        <div role="row" class="bottom-space">
                                            <div role="control" label="跳过 url 参数加密">
                                                <input class="mini-textarea" />
                                                <span class="text-assist">多个以“;”分隔。</span>
                                            </div>
                                        </div>

                                        <div role="row">
                                            <div role="control" label="请求方法拦截">
                                                <input class="mini-checkbox" text="启用" />
                                                <span class="text-assist">针对图片下载类的GET请求需求，需要在方法上添加相应的的注解； @RequestSupport(Type={RequestType.GET})</span>
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="数据源防篡改">
                                                <input class="mini-checkbox" text="启用" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="移动端接口参数加密">
                                                <input class="mini-checkbox" text="启用移动端接口参数加密" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="隐藏域安全校验">
                                                <input class="mini-checkbox" text="启用隐藏域数据Xss防御" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="文件编号检测">
                                                <input class="mini-checkbox" text="开启上传控件 fileNumLimit 检测" />
                                            </div>
                                        </div>
                                        <div role="row">
                                            <div role="control" label="表格字段同步">
                                                <input class="mini-checkbox" text="表格服务端返回的数据与前端定义的表格列保持同步" />
                                                <span class="text-assist">即未在前端页面上定义的列的数据不会返回。</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            var mockedListData = [{ id: 'select-1', text: '选项1' }, { id: 'select-2', text: '选项2' }, { id: 'select-3', text: '选项3' }, { id: 'select-4', text: '选项4' }, { id: 'select-5', text: '选项5' }];

            SrcBoot.debug = true;
        </script>
        <script src="../../../js/jsboot.js"></script>
        <script>
            SrcBoot.output(['./framesetting.js']);
        </script>
        <script>
            function removeColon() {
                $('#config-content')
                    .find('.form-label')
                    .each(function(i, label) {
                        var $l = $(label);
                        var t = $l.text();
                        t = t.substring(0, t.length - 1);
                        $l.text(t);
                    });
            }
            removeColon();

            ConfigManager.init();
            /**
             * ConfigManager 下有如下 方法
             * init() 初始化方法 自动绑定事件 收集数据 生成左侧导航
             * getData() 根据页面表单数据收集搜索和导航数据
             * buildNav(forceUpdate) 依照数据构建生成左侧导航 参数 forceUpdate 会强制从新从页面表单收集数据
             */
            // 模拟数据使用
            SrcBoot.mock = true;
            // 实时保存
            $(function() {
                $.each(mini.getChildControls($('#tabs-wrap')[0]), function(i, ctr) {
                    ctr.on('valueChanged', function(ev) {
                        console.log('valueChanged', ev);
                        // epoint.showLoading();
                        // todo 保存
                        epoint.execute('https://fe.epoint.com.cn/mock/26/themedataaction/saveTest', $(ev.sender.el).parent()[0], '', function(data) {
                            epoint.showTips('保存成功', {
                                state: 'success',
                                iconCls: 'success'
                            });
                            // epoint.hideLoading();
                        });
                    });
                });
            });
        </script>
    </body>
</html>
