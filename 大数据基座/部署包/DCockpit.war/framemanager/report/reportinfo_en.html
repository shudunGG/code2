<!DOCTYPE html>
<html>

<head>
<title>The report</title>
<meta charset="UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge" />

<script src="../../frame/fui/js/cssboot.js"></script>
</head>
<body>

	<div class="page-loading"></div>

	<!-- toolbar area -->
	<div class="fui-toolbar">
		<div class="btn-group mr10">
			<a class="mini-button" id="addbtn" onclick="add"
				style="display: none;">save and close</a><a class="mini-button" id="savebtn"
				onclick="save" style="display: none;">save changes</a> <a
				class="mini-button" id="closebtn" onclick="epoint.closeDialog">shut down</a>
		</div>
	</div>

	<!-- content area -->
	<div id="fui-content" class="fui-content">
		<div class="fui-form" id="fui-form">
			<div role="form">
				<div role="row">
					<div role="control" label="report name" starred="true">
						<input class="mini-textbox" bind="reportInfo.reportname"
							required="true" requiredErrorText="activityThe name of theCan't be empty!"
							vtype="maxLength:50" />
					</div>
				</div>
				<div role="row">
					<div role="control" label="data source">
						<input bind="reportInfo.dsID" action="getDsItems"
							allowInput="false" autoLoad="true" class="mini-combobox"
							showNullItem="false" />
					</div>
				</div>
				<div role="row">
					<div role="control" label="reportcategory">
						<input class="mini-output" bind="reportInfo.categoryname" />
					</div>
				</div>
				<div role="row">
					<div role="control" label="upload report" starred="true">
						<div id="uploader" class="mini-webuploader"
							action="reportinfoaction.getFileUploadModel" fileNumLimit="1"
							fileSingleSizeLimit="5120" limitType="mrt"></div>
					</div>
				</div>
				<div role="row">
					<div role="control" label="order no">
						<input class="mini-textbox" bind="reportInfo.ordernumber"
							vtype="int" />
					</div>
				</div>
			</div>
		</div>
	</div>



	
 
 	<script type="text/javascript">var miniLocal='en_US.js';</script>
 	<script src="../../rest/resource/jsboot"></script>

	<!-- Configuration Variables -->
	<script>
		//Initialize the page
        epoint.initPage ("reportinfoaction", null, initCallback);
        
        function initCallback (data)
        {
	        if (data.type == 'add')
	        {
		        document.getElementById ("addbtn").style.display = '';
	        }
	        else if (data.type == 'edit')
	        {
		        document.getElementById ("savebtn").style.display = '';
	        }
        }

        //addThe report
        function add ()
        {
	        if (epoint.validate ())
	        {
		        epoint.execute ("add", "fui-form", function (data)
		        {
			        if (data.flag != null && (data.flag == "1"))
			        {
			        	epoint.alertAndClose (data.message, '', null, null, 'info');
			        }
			        else
			        {
			        	epoint.alert (data.message, '', null, 'info');
			        }
		        });
	        }
        }

        //saveThe report
        function save ()
        {
	        if (epoint.validate ())
	        {
		        epoint.execute ("save", "fui-form", function (data)
		        {
		        	if (data.flag != null && (data.flag == "1"))
			        {
			        	epoint.alertAndClose (data.message, '', null, null, 'info');
			        }
			        else
			        {
			        	epoint.alert (data.message, '', null, 'info');
			        }
		        });
	        }
        }
	</script>
</body>
</html>
