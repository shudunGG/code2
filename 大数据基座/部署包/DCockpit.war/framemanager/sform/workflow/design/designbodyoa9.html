<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<link href="../css/workflowdesign.css" rel="stylesheet" />
<title>流程活动配置</title>
<script src="../../../../frame/fui/js/cssboot.js"></script>
<script>
	SrcBoot.output([ 'framemanager/sform/workflow/css/workflowdesign.css' ]);
</script>
</head>
<body>
	<!-- 必须有，加载时的loading效果 -->
	<div class="page-loading"></div>
	<!-- 内容区域 -->
	<div class="fui-content">
		<div id="ie5menu" class="ContextMenu">
			<ul>
			    <li class="ContextMenuLi" id="addManualTemplete"><img
					src="../image/ManuralTemplete.jpg" /><span>新建人工活动模版</span></li>
				<li class="ContextMenuLi" id="addManual">
				     <img src="../image/ManualNewVml.jpg" /><span>新建人工活动</span>
			    </li>
				<li class="ContextMenuLi" id="addSubProcess">
				     <img src="../image/SubProcessNewVml.jpg" /><span>新建子流程</span>
				</li>
				<li class="ContextMenuLi" id="addRouter">
				     <img src="../image/RouterNewVml.jpg" /><span>新建路由活动</span>
				</li>
			</ul>
		</div>

		<div id="ie5menu1" class="ContextMenu" style="width: 120px;">
			<ul>
				<li id="OpenEdit">
				    <img src="../image/contextmenu/add_step.gif" /><span>设置属性</span>
				</li>
				<li id="Del">
				    <img src="../image/contextmenu/del_obj.gif" /><span>删除</span>
				</li>
			</ul>
		</div>
		<div id="WorkFlowWrapperBg"
			style="background-image: url(../image/bg.png); overflow: auto; width: 100%; height: 100%; position: relative;">
			<div id="WorkFlowWrapper"></div>
		</div>
		<div id="toolBar2">
			<div class="toolbar-menu clickable" id="save"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title="保存" src="../image/save.png" />
			</div>
			<div class="toolbar-menu clickable" id="image"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title=" 图片" src="../image/picture.png" />
			</div>
			<div class="toolbar-menu" id="Div1"
				style="padding-right: 0px; padding-left: 0px; font-size: 15px; width: 2px; height: 15px;">
				<img title="" src="../image/dividingline.png" />
			</div>
			<div class="toolbar-menu clickable" id="alignLeft"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title="左部对齐" src="../image/justifyleft.png" />
			</div>
			<div class="toolbar-menu clickable" id="alignTop"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title="上部对齐" src="../image/justifytop.png" />
			</div>
			<div class="toolbar-menu clickable" id="alignGrid"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title=" 网格对齐" src="../image/justifygrid.png" />
			</div>
			<div class="toolbar-menu" id="Div2"
				style="padding-right: 0px; padding-left: 0px; font-size: 15px; width: 2px; height: 15px;">
				<img title="" src="../image/dividingline.png" />
			</div>
			<div class="toolbar-menu clickable" id="transform"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title=" Y方向" src="../image/Y.png" />
			</div>
			<div class="toolbar-menu clickable" id="Typesetting"
				style="padding-left: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title=" 排版" src="../image/typeset.png" />
			</div>
			<div class="toolbar-menu clickable" id="MoveRight"
				style="padding-left: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title=" 右移" src="../image/moveright.png" />
			</div>
			<div class="toolbar-menu clickable" id="MoveDown"
				style="padding-left: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title=" 下移" src="../image/movedown.png" />
			</div>
		</div>
		<div id="toolBar">
			<div class="toolbar-menu selectable" id="pointer">
				<img title="指针" src="../image/Cusor.jpg" width="30" height="30" />
			</div>
			<div class="toolbar-menu state" id="template" type="ManualTemplete">
			    <img title="人工活动配置模版" src="../image/ManuralTemplete.jpg" width="30" height="30" />
			</div>
			<div class="toolbar-menu state" type="Manual">
				<img title="人工活动" src="../image/RghdNew.jpg" width="30" height="30" />
			</div>
			<div class="toolbar-menu state" type="SubProcess">
				<img title="子流程活动" src="../image/ZlchdNew.jpg" width="30" height="30" />
			</div>
			<div class="toolbar-menu state" type="Router">
				<img title="路由活动" src="../image/LyhdNew.jpg" width="30" height="30" />
			</div>
			<div class="toolbar-menu state" type="Browser">
				<img title="浏览活动" src="../image/BrowserNewVml.jpg" width="30" height="30" />
			</div>
			<div class="toolbar-menu selectable" id="path">
				<img title="活动变迁" src="../image/Draw.jpg" width="30" height="30" />
			</div>
		</div>
	</div>

	<script src="../../../../rest/resource/jsboot"></script>
    <script>
		SrcBoot.output([ '../js/raphael-min.js',
		                 '../js/graffle.js',
		                 '../js/workflowdesign_new.js',
		                 '../js/jquery.contextmenu.r2.js',
		                 '../js/flowshow.js']);
	</script>
	<script>
		//<![CDATA[
		//初始化请求
		epoint.initPage('designsformbodyaction', '', initCallBack);
		var ProcessVersionGuid = Util._getUrlParams(Util.getSafeLocation().href,'processVersionGuid');
		var MainPVActivityGuid = Util._getUrlParams(Util.getSafeLocation().href,'mainPVActivityGuid');
		var param;
		// 初始化操作的回调
		function initCallBack(data) {
		}
		function callBack(data) {
			//epoint.execute('designbodyoa9action.readXmlJson', 'fui-form',callBack);
		}

		function deleteNode(a, b) {
			epoint.execute('deleteNode', '', [ a, b ], delback);
		}

		function delback(data) {
			if (data) {
				AfterDel(data.msg, data.mes);
			}
		}

		function workcheckIsCanAddHDBQ(a, b, c) {
			epoint.execute('checkIsCanAddHDBQ', '', [ a, b, c ]);
		}

		function ReadXML2() {
			epoint.execute('readXmlJson', '', '', TypeSet);
		}

		function workSaveXml(a) {
			epoint.execute('saveXml', '', [ a ], function(b) {
				epoint.alert('保存成功！', '', null, 'success');
			});
		}

		function dialogvalueset(par) {
			param = par;
		}

		//通用的ajax方法返回结果处理
		function AjaxOperationHd(args) {
			var value = args.msg;
			if (value == "DrawLine") {
				afterDrawLine();
				location.reload(false);
			} else {
				epoint.alert(value, '', null, 'info');
			}
		}

		$(document).ready(function() {
			$("#WorkFlowWrapperBg").css({
				width : $(this).width() - 44,
				height : $(this).height() - 41,
				marginLeft : 44,
				marginTop : 41
			});
			epoint.execute('readXmlJson', '', ReadXMLHd);
			$('body').bind('contextmenu', function() {
				return false;
			});
			$(document).click(function(e) {
				if (e.which != 3) {
					$("#ie5menu").hide();
					$("#ie5menu1").hide();
				}
			});
			$(".ContextMenu").find("li").hover(function() {
				$(this).css("background-color", "#B6BDD2");
			}, function() {
				$(this).css("background-color", "");
			});
		});

		//]]>
	</script>

</body>

</html>