<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<title>文本框</title>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta name="generator" content="www.leipi.org" />
<link rel="stylesheet" href="bootstrap/css/bootstrap.css">
<!--[if lte IE 6]>
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap-ie6.css">
    <![endif]-->
<!--[if lte IE 7]>
    <link rel="stylesheet" type="text/css" href="bootstrap/css/ie.css">
    <![endif]-->
<link rel="stylesheet" href="leipi.style.css">
<link rel="stylesheet" href="tab.css" type="text/css" />
<script type="text/javascript"
	src="../../../../frame/fui/js/widgets/ueditor/dialogs/internal.js"></script>

</head>

<body>
	<div class="wrapper">
		<div id="tabhead" class="tabhead">
			<span class="tab focus" data-content-id="basic">基本属性</var></span> <span
				class="tab" data-content-id="external">扩展配置</var></span>
		</div>
		<div id="tabbody" class="tabbody">
			<div id="basic" class="panel focus">
				<iframe src="base.html" width="100%" height="400" name="base"></iframe>
			</div>

			<div id="external" class="panel">
				<table class="table table-bordered table-striped table-hover">
					<tr>
						<th><span>增强</span></th>
					</tr>
					<tr>
						<td><label class="checkbox"><input id="orgrich"
								type="checkbox" /> 富文本形式 </label></td>
					</tr>
				</table>
			</div>
		</div>
	</div>

	<script type="text/javascript" src="tab.js"></script>
	<script type="text/javascript">
		var oNode = null, thePlugins = 'textarea';
		window.onload = function() {
			initTabs();
			if (UE.plugins[thePlugins].editdom) {
				oNode = UE.plugins[thePlugins].editdom;
				window.frames["base"].iframeedit(oNode);
				var gRich = oNode.getAttribute('orgrich');
				if (gRich == '1') {
					$G('orgrich').checked = true;
				}
			} else {
				parent.controlId += 1;
				var df = "Ctrl" + parent.controlId
				window.frames["base"].iframeinit(df);
			}
		}
		dialog.oncancel = function() {
			if (UE.plugins[thePlugins].editdom) {
				delete UE.plugins[thePlugins].editdom;
			}
		};
		dialog.onok = function() {
			var orgname = window.frames["base"].document
					.getElementById("orgname").value;
			if (orgname == '') {
				alert('请输入控件名称');
				return false;
			}
			var gValue = window.frames["base"].document
					.getElementById("orgvalue").value.replace(/\"/g, "&quot;"), gTitle = orgname
					.replace(/\"/g, "&quot;"), gFontSize = window.frames["base"].document
					.getElementById("orgfontsize").value, gWidth = window.frames["base"].document
					.getElementById("orgwidth").value, gHeight = window.frames["base"].document
					.getElementById("orgheight").value, gAlign = window.frames["base"].document
					.getElementById("orgalign").value;

			if (!oNode) {
				try {
					oNode = document.createElement('img');
					oNode = window.frames["base"].iframeonok(oNode);
					if (oNode == false) {
						return false;
					}
					oNode.setAttribute('data-ctrl', "textarea");
					oNode.setAttribute('datafieldcn', gTitle);
					oNode.setAttribute('defaultvalue', gValue);
					oNode.setAttribute('class', 'textbox');
					oNode.setAttribute('type', 'text');
					oNode.setAttribute('title', gTitle);
					oNode.setAttribute('value', gValue);
					// 					oNode.setAttribute('name', 'leipiNewField');
					oNode.setAttribute('controltype', thePlugins);
					if ($G('orgrich').checked) {
						oNode.setAttribute('orgrich', "1");
					} else {
						oNode.setAttribute('orgrich', "0");
					}
					editor.execCommand('insertHtml', oNode.outerHTML);
				} catch (e) {
					try {
						editor.execCommand('error');
					} catch (e) {
						alert('控件异常，请到 [雷劈网] 反馈或寻求帮助！');
					}
					return false;
				}
			} else {
				oNode = window.frames["base"].iframeonok(oNode);
				if (oNode == false) {
					return false;
				}
				oNode.setAttribute('data-ctrl', "textarea");
				oNode.setAttribute('class', "textarea");
				oNode.innerHTML = oNode.getAttribute('value');
				if ($G('orgrich').checked) {
					oNode.setAttribute('orgrich', 1);
				} else {
					oNode.setAttribute('orgrich', 0);
				}
				delete UE.plugins[thePlugins].editdom;
			}
		};
	</script>
</body>

</html>