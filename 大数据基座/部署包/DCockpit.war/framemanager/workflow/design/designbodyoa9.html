<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<link href="../css/workflowdesign.css" rel="stylesheet" />
<title>流程活动配置</title>
<script src="../../../frame/fui/js/cssboot.js"></script>
</head>
<body>
	<!-- 必须有，加载时的loading效果 -->
	<div class="page-loading"></div>
	<!-- 内容区域 -->
	<div class="fui-content">
		<div id="ie5menu" class="ContextMenu">
			<ul>
			    <li class="ContextMenuLi" id="addManualTemplete"><img
					src="../image/ManuralTemplete.jpg" /><span>新建人工活动模版</span></li>
				<li class="ContextMenuLi" id="addManual"><img
					src="../image/ManualNewVml.jpg" /><span>新建人工活动</span></li>
				<li class="ContextMenuLi" id="addSubProcess"><img
					src="../image/SubProcessNewVml.jpg" /><span>新建子流程</span></li>
				<li class="ContextMenuLi" id="addRouter"><img
					src="../image/RouterNewVml.jpg" /><span>新建路由活动</span></li>
				<li class="ContextMenuLi" id="addExternal"><img
					src="../image/External.jpg" /><span>新建外部活动</span></li>
				<li class="ContextMenuLi" id="OpenActivitySort"><img
					src="../image/UnFixButton_Down.jpg" /><span>表格式查看</span></li>
			</ul>
		</div>


		<div id="ie5menu1" class="ContextMenu" style="width: 120px;">
			<ul>
				<li id="OpenEdit"><img src="../image/contextmenu/add_step.gif" /><span>设置属性</span>
				</li>
				<li id="Del"><img src="../image/contextmenu/del_obj.gif" /><span>删
						除</span></li>
				<!--             <li> -->
				<!--                 <img src="#{request.contextPath}/frame/epointworkflow/image/contextmenu/exit1.gif" width="24" /><span>取消</span> -->
				<!--             </li> -->
			</ul>
		</div>
		<div id="WorkFlowWrapperBg"
			style="background-image: url(../image/bg.png); overflow: auto; width: 100%; height: 100%; position: relative;">
			<div id="WorkFlowWrapper"></div>
		</div>
		<div id="toolBar2">
			<div class="toolbar-menu clickable" id="save"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title="保存" src="../image/save.png" />
			</div>
			<div class="toolbar-menu clickable" id="image"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title=" 图片" src="../image/picture.png" />
			</div>
			<div class="toolbar-menu" id="Div1"
				style="padding-right: 0px; padding-left: 0px; font-size: 15px; width: 2px; height: 15px;">
				<img title="" src="../image/dividingline.png" />
			</div>
			<div class="toolbar-menu clickable" id="alignLeft"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title="左部对齐" src="../image/justifyleft.png" />
			</div>
			<div class="toolbar-menu clickable" id="alignTop"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title="上部对齐" src="../image/justifytop.png" />
			</div>
			<div class="toolbar-menu clickable" id="alignGrid"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title=" 网格对齐" src="../image/justifygrid.png" />
			</div>
			<div class="toolbar-menu" id="Div2"
				style="padding-right: 0px; padding-left: 0px; font-size: 15px; width: 2px; height: 15px;">
				<img title="" src="../image/dividingline.png" />
			</div>
			<div class="toolbar-menu clickable" id="transform"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title=" Y方向" src="../image/Y.png" />
			</div>
			<div class="toolbar-menu clickable" id="Typesetting"
				style="padding-left: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title=" 排版" src="../image/typeset.png" />
			</div>
			<div class="toolbar-menu clickable" id="MoveRight"
				style="padding-left: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title=" 右移" src="../image/moveright.png" />
			</div>
			<div class="toolbar-menu clickable" id="MoveDown"
				style="padding-left: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title=" 下移" src="../image/movedown.png" />
			</div>
			<div class="toolbar-menu" id="Div3"
				style="padding-right: 0px; padding-left: 0px; font-size: 15px; width: 2px; height: 15px;">
				<img title="" src="../image/dividingline.png" />
			</div>
			<div class="toolbar-menu clickable" id="materail"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title="流程材料" src="../image/materail.png" />
			</div>
			<div class="toolbar-menu clickable" id="context"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title="相关数据" src="../image/context.png" />
			</div>
			<div class="toolbar-menu clickable" id="method"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title="方法管理" src="../image/method.png" />
			</div>

			<div class="toolbar-menu clickable" id="sort"
				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;">
				<img title="活动排序" src="../image/order.png" />
			</div>
			<!-- 			<div class="toolbar-menu clickable" id="print" -->
			<!-- 				style="padding-right: 0px; font-size: 15px; width: 15px; height: 15px;"> -->
			<!-- 				<img title=" 打印" src="../image/print.png" /> -->
			<!-- 			</div> -->
		</div>
		<div id="toolBar">
			<div class="toolbar-menu selectable" id="pointer">
				<img title="指针" src="../image/Cusor.jpg" width="30" height="30" />
			</div>
			<div class="toolbar-menu state" id="ManualTemplete" type="ManualTemplete">
				<img title="人工活动配置模版" src="../image/ManuralTemplete.jpg" width="30"
					height="30" />
			</div>
			<div class="toolbar-menu state" type="Manual">
				<img title="人工活动" src="../image/RghdNew.jpg" width="30" height="30" />
			</div>
			<!--<div class="toolbar-menu state" type="JoinSign">
				<img title="会签活动" src="../image/JoinSign.jpg"
					width="30" height="30" />
			</div>
			<div class="toolbar-menu state" type="PassSign">
				<img title="传签活动" src="../image/PassSign.jpg"
					width="30" height="30" />
			</div>-->
			<div class="toolbar-menu state" type="SubProcess">
				<img title="子流程活动" src="../image/ZlchdNew.jpg" width="30"
					height="30" />
			</div>

			<!--<div class="toolbar-menu state" type="Suspension">
				<img title="悬挂待批" src="../image/Suspension.jpg"
					width="30" height="30" />
			</div>-->

			<!--         <div class="toolbar-menu state" type="out"> -->
			<!--             <img title="外部流程活动" src="../image/extend.png" width="30" height="30" /> -->
			<!--         </div> -->
			<!--         <div class="toolbar-menu state" type="inside"> -->
			<!--             <img title="自定义流程活动" src="../image/diyactivity.png" width="30" height="30" /> -->
			<!--         </div> -->

			<div class="toolbar-menu state" type="Router">
				<img title="路由活动" src="../image/LyhdNew.jpg" width="30" height="30" />
			</div>
			<div class="toolbar-menu state" type="Browser">
				<img title="浏览活动" src="../image/BrowserNewVml.jpg" width="30"
					height="30" />
			</div>
			<div class="toolbar-menu state" type="External">
				<img title="外部活动" src="../image/External.jpg" width="30" height="30" />
			</div>
			<div class="toolbar-menu selectable" id="path">
				<img title="活动变迁" src="../image/Draw.jpg" width="30" height="30" />
			</div>
			<div id="DvelopmentTarget"></div>
		</div>
	</div>


	<script src="../../../rest/resource/jsboot"></script>
	<script>
		SrcBoot.output([ 'framemanager/workflow/js/raphael-min.js',
				'framemanager/workflow/js/graffle.js',
				'framemanager/workflow/js/workflowdesign_new.js',
				'framemanager/workflow/js/jquery.contextmenu.r2.js',
				'framemanager/workflow/js/flowshow.js' ]);
	</script>
	<script>
		//<![CDATA[
		//初始化请求
		epoint.initPage('designbodyoa9action', '', initCallBack);
		var ProcessVersionGuid = Util._getUrlParams(
				Util.getSafeLocation().href, 'processVersionGuid');
		var MainPVActivityGuid = Util._getUrlParams(
				Util.getSafeLocation().href, 'mainPVActivityGuid');
		var TempleteACTGuid = "";
		var param;
		// 初始化操作的回调
		function initCallBack(data) {
			if (data.tempactivitys && data.tempactivitynames) {
				var tempacts = data.tempactivitys.split(";");
				var tempactnames = data.tempactivitynames.split(";");
				for (var n = 0; n < tempacts.length; n++) {
					//获取div  
					var div = document.getElementById("DvelopmentTarget");

					//换行  
					var div2 = document.createElement("div");
					div2.setAttribute('class', 'toolbar-menu state');
					div2
							.setAttribute('type', 'ManualByTemplete_'
									+ tempacts[n]);
					div2.setAttribute('id', 'template_' + tempacts[n]);
					div.appendChild(div2);

					//换行  
					var img = document.createElement("img");
					img.setAttribute('title', tempactnames[n]);
					img.setAttribute('src', '../image/CommonTemplete.jpg');
					img.setAttribute('width', '30');
					img.setAttribute('height', '30');
					div2.appendChild(img);
				}
			}
		}
		function callBack(data) {
			//epoint.execute('designbodyoa9action.readXmlJson', 'fui-form',callBack);
		}

		function deleteNode(a, b) {
			epoint.execute('designbodyoa9action.deleteNode', '', [ a, b ],
					delback);
		}

		function delback(data) {
			if (data) {
				AfterDel(data.msg, data.mes);
			}
		}

		function workcheckIsCanAddHDBQ(a, b, c) {
			epoint.execute('designbodyoa9action.checkIsCanAddHDBQ', '', [ a, b,
					c ]);
		}

		function ReadXML2() {
			epoint.execute('designbodyoa9action.readXmlJson', '', '', TypeSet);
		}

		function workSaveXml(a) {
			epoint.execute('designbodyoa9action.saveXml', '', [ epoint
					.encodeUtf(a) ], function(b) {
				epoint.alert('保存成功！', '', null, 'success');
			});
		}

		function dialogvalueset(par) {
			param = par;
		}

		//通用的ajax方法返回结果处理
		function AjaxOperationHd(args) {
			var value = args.msg;
			if (value == "DrawLine") {
				afterDrawLine();
				location.reload(false);
			} else {
				epoint.alert(value, '', null, 'info');
			}
		}

		$(document).ready(function() {
			$("#WorkFlowWrapperBg").css({
				width : $(this).width() - 44,
				height : $(this).height() - 41,
				marginLeft : 44,
				marginTop : 41
			});
			epoint.execute('designbodyoa9action.readXmlJson', '', ReadXMLHd);
			$('body').bind('contextmenu', function() {
				return false;
			});
			$(document).click(function(e) {
				if (e.which != 3) {
					$("#ie5menu").hide();
					$("#ie5menu1").hide();
				}
			});
			$(".ContextMenu").find("li").hover(function() {
				$(this).css("background-color", "#B6BDD2");
			}, function() {
				$(this).css("background-color", "");
			});
		});

		//]]>
	</script>

</body>

</html>