<!DOCTYPE html>
<html>

	<head>
		<title>Transfer subsystem</title>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />

		<script src="../../../../frame/fui/js/cssboot.js"></script>
	</head>

	<body>
		<div class="page-loading"></div>
		<!-- toolbar area -->
		<div class="fui-toolbar">
			<div class="btn-group mr10">
				<a class="mini-button" id="transfer" onclick="transfer()">Determine the transfer</a><a
				class="mini-button" id="transferCancel" onclick="epoint.closeDialog">cancel</a>
			</div>
		</div>

		<div class="fui-content">
			<ul id="tree" class="mini-tree" style="height: 100%" textField="text"
			idField="id" parentField="pid"
			action="tablecategoryselectaction.getTreeData" resultAsTree="false"></ul>

			<!-- Add a hidden field to the tree and the linkage of the table -->
			<input bind="cateGoryNum" id="categoryNum" class="mini-hidden" />
		</div>
		
 
 	<script type="text/javascript">var miniLocal='en_US.js';</script>
 	<script src="../../../../rest/resource/jsboot"></script>

		<!-- Configuration Variables -->
		<script>
			// Initialize the page
			epoint.initPage('tablecategoryselectaction');

			//The treejsobject
			var tree = mini.get("tree");

			// Click on the left side of theThe treeRefresh the form on the right side
			tree.on("nodeselect", function(e) {
				var id = e.node.objectcode;
				// To the leftThe treeClick on the nodeidIn a hidden field
				// Send the second request, in the table will automatically bring conditions areaThe contents of the
				mini.get('categoryNum').setValue(id);
			});

			function transfer() {
				epoint.execute("transfer", "", msgCallBack);
			}

			// Back off to remind
			function msgCallBack(data) {
				if(data){
					epoint.alert(data.msg, '', null, 'info');
					if(data.success){
						epoint.closeDialog(data.success);
					}
				}
			}
		</script>
	</body>

</html>
