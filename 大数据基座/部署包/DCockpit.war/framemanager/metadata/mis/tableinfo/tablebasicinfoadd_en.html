<!DOCTYPE html>
<html>

	<head>
		<title>Add the data table</title>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />

		<script src="../../../../frame/fui/js/cssboot.js"></script>
	</head>

	<body>
		<div class="page-loading"></div>
		<!-- toolbar area -->
		<div class="fui-toolbar">
			<div class="btn-group mr10">
				<a class="mini-button" iconCls="icon-addcircle" id="add"
				onclick="saveAndClose()">sure add</a><a class="mini-button"
				id="addCancel" iconCls="icon-minuscircle"
				onclick="epoint.closeDialog">cancel the add</a>
			</div>
			<!--Help information area Hidden by default -->
			<a role="helper" class="mr10">precautions</a>
		</div>
		<div class="fui-notice hidden">
			<p>
				<span class="text-danger">
					note: if you don't choosedataThe source, the default framedataThe source
				</span>
			</p>
			<p>
				<span class="text-danger">
				    note: if theTo enable thedataThe source, all the tables are for the operationdataThe sourceThe specifieddataTable
				</span>
			</p>
		</div>

		<div class="fui-content">
			<!-- The form layout -->
			<div class="fui-form" id="fui-form">
				<div role="form">
					<!-- 2column -->
					<div role="row">
						<div role="control" label="table chinese name" starred="true">
							<input class="mini-textbox"
							bind="tablebasicinfoaddaction.tableBasicInfo.tableName"
							required="true" requiredErrorText="Table name in ChineseCan't be empty"
							vtype="maxLength:50" />
						</div>
						<div role="control" label="SQL table name" id="sqlDiv">
							<input id="sqlTableName"
							bind="tablebasicinfoaddaction.tableBasicInfo.sqlTableName"
							class="mini-textbox" emptyText="dataThe name of the table" />
						</div>
					</div>
					<div role="row">
						<div role="control" label="dataThe source">
							<input autoLoad="false" id="dataSource"
							action="tablebasicinfoaddaction.getDataResource" showNullItem="true"
							bind="tablebasicinfoaddaction.dataSourceGuid" property="editor"
							class="mini-combobox" />
						</div>
					</div>
					<div role="row">
						<div role="control" label="onlinedata source">
							<div id="linkds" class="mini-checkbox" style="width: 20px"
							bind="tablebasicinfoaddaction.isEnable" readOnly="false"
							onvaluechanged="changType"></div>
							<div class="mini-outputtext" value="To enable the" style="width: 30px"></div>
						</div>
					</div>
					<div role="row" id="dataSourceRow" style="display:none">
						<div role="control" label="datatable">
							<div class="mini-autocomplete" id="acSimple" textField="text"
							valueField="id" bind="tablebasicinfoaddaction.tableName"
							extraId="dataSource"
							action="tablebasicinfoaddaction.getComplete"></div>
						</div>
					</div>
					<div role="row">
						<!-- TODO -->
						<div role="control" label="order no">
							<input bind="tablebasicinfoaddaction.tableBasicInfo.ordernum"
							class="mini-textbox" vType="int" />
						</div>
						<div role="control" label="tableID">
							<input bind="tablebasicinfoaddaction.tableBasicInfo.tableid"
								class="mini-textbox" vType="int" />
						</div>
					</div>
				</div>
			</div>
		</div>
		
 
 	<script type="text/javascript">var miniLocal='en_US.js';</script>
 	<script src="../../../../rest/resource/jsboot"></script>

		<!-- Configuration Variables -->
		<script>
			// Initialize the page
			epoint.initPage('tablebasicinfoaddaction', "", callback);

			function callback() {
			}

			// save and close
			function saveAndClose() {
				if (epoint.validate()) {
					epoint.execute('tablebasicinfoaddaction.add', 'fui-form', closeCallback);
				}
			}

			// Whether or notTo enable theonlinedataThe source
			function changType(e) {
				var checked = this.getChecked();
				var dsRow = $('#dataSourceRow');
				if(checked){
					Util.form.hideField('#sqlDiv');
					dsRow.show();
				}
				else{
					Util.form.showField('#sqlDiv');
					dsRow.hide();
				}
			}

			// The callback for the close operation
			function closeCallback(data) {
				if (data.message) {
					//if (data.message.indexOf("successful") != -1) {
					if(data.sucess){
						epoint.alertAndClose(data.message, '', null, null, 'success');
					} else {
						epoint.alert(data.message, '', null, 'error');
					}
				}
			}
		</script>
	</body>

</html>
