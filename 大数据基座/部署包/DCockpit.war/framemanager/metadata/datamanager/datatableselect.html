<!DOCTYPE html>
<html>

<head>
<title>数据管理</title>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<script src="../../../frame/fui/js/cssboot.js"></script>
</head>

<body>
	<div class="page-loading"></div>

	<!-- toolbar区域 -->
	<div class="fui-toolbar">
		<div class="btn-group mr10">
			<a class="mini-button" iconCls="icon-addcircle" onclick="addTable()">确认采集</a>
		</div>
	</div>
	<div class="fui-condition">
		<!-- 表单布局 -->
		<div class="fui-form" id="fui-form">
			<div role="form">
				<!-- 2列 -->
				<div role="row">
					<div role="control" label="表中文名称" starred="false">
						<input bind="sqltablename" id="sqltablename" class="mini-textbox" />

					</div>
				</div>
			</div>
		</div>
		<!-- 搜索按钮 -->
		<a role="searcher" callback="searchData"></a>
	</div>
	<div class="fui-content">
		<div id="datagrid" class="mini-datagrid" sortOrder="desc" idField="name" multiSelect="true" style="width: 100%; height: 100%;" allowResize="true"
			action="getTableData" showPager="false" allowCellSelect="true">
			<div property="columns">
				<div type="checkcolumn" width="20"></div>
				<div type="indexcolumn" headerAlign="center" width="20">序</div>
				<div field="name" width="80" Align="center" headerAlign="center">表中文名称</div>
				<!-- <div field="owner" width="80" id="owner" Align="center" headerAlign="center" class="mini-hidden">模式名</div> -->
			</div>
		</div>
	</div>
	<script src="../../../rest/resource/jsboot"></script>
	<script>
		//<![CDATA[  
		//初始化页面
		epoint.initPage("datatableselectaction");

		// 表格的搜索
		function searchData() {
			epoint.refresh([ 'datagrid', 'fui-form' ]);
		}

		// 保存信息
		function addTable() {
			if (mini.get("datagrid").getSelecteds().length > 0) {
				epoint.execute("addTable", null, function(ret) {
					epoint.alertAndClose(ret);
				});
			} else {
				epoint.alert("请选择要采集的数据表");
			}
		}

		//_$t
	</script>

</body>
</html>