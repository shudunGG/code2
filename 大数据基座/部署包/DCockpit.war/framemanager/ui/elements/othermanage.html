<!DOCTYPE html>
<html lang="zh-CN">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>第三方元件配置</title>
<script src="../../../frame/fui/js/cssboot.js"></script>
<!-- <script>
        SrcBoot.output([
            './manage.css'
        ]);
    </script> -->
<style>
.title-img-item {
	width: 20px;
	height: 20px;
	margin: 10px;
}
</style>
</head>

<body>
	<div class="fui-toolbar">
		<div class="btn-group">
			<span class="mini-button" onclick="saveAndClose">保存并关闭</span>
		</div>
	</div>
	<div class="fui-content">
		<div class="fui-accordions">
			<div role="accordion" opened="true">
				<div role="head" title="总览"></div>
				<div role="body">
					<div class="fui-form">
						<div role="form">
							<div role="row">
								<div role="control" label="无边框">
									<div class="mini-checkboxlist" repeatItems="3" textField="text"
										valueField="value" value="noborder"
										data="[{value:'true',text:''}]"
										onvaluechanged="onBorderValueChanged" bind="noborder"></div>
								</div>
							</div>
							<div role="row" id="border-color-row">
								<div role="control" label="边框颜色">
									<input class="mini-colorpicker" allowInput="true" format="hex"
										value="#ddd" bind="dataBean.framecolor" />

								</div>
								<div role="control"></div>
							</div>
							<div role="row"></div>
							<div role="row"></div>
							<div role="row"></div>
							<div role="row"></div>
							<div role="row"></div>
							<div role="row"></div>
							<div role="row">
								<div role="control" label="显示标题栏">
									<div class="mini-checkboxlist" repeatItems="3" textField="text"
										valueField="value" value="noborder"
										data="[{value:'1',text:''}]"
										onvaluechanged="onShowTitleBarChanged"
										bind="dataBean.isShowTitle"></div>
								</div>
							</div>
							<div role="row" class="title-settings-el">
								<div role="control" label="标题">
									<input class="mini-textbox" bind="dataBean.title" />
								</div>
							</div>
							<div role="row"></div>
							<div role="row"></div>
							<div role="row"></div>
							<div role="row"></div>
							<div role="row"></div>
							<div role="row"></div>
							<div role="row">
								<div role="control" label="高度">
									<input changeOnMousewheel="false" class="mini-spinner"
										minValue="0" maxValue="1000" bind="dataBean.height" />
								</div>
							</div>
							<div role="row">
								<div role="control" label="自定义链接地址">
									<input class="mini-textarea" bind="dataBean.customlinkurl" />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="../../../rest/resource/jsboot"></script>

	<script>
		SrcBoot.output([ './todo/manage.js' ]);
	</script>
	<script>
		// 元件ID
		var elementID = Util.getUrlParams('elementID');

		// // 页面初始化 回传元件ID
		epoint.initPage('frameportalelementaction', {
			elementID : elementID
		}, initCallback);

		// =====================================
		// 边框选择变化时 调整颜色可见性
		// 边框颜色
		var $borderColorEl = $('#border-color-row');

		function onBorderValueChanged(e) {
			if (e.value == 'true') {
				adjustBorderColorVisible(false);
			} else {
				adjustBorderColorVisible(true);
			}
		}

		function adjustBorderColorVisible(show) {
			if (show) {
				$borderColorEl.show();
			} else {
				$borderColorEl.hide();
			}
		}

		// =====================================
		// 是否显示标题栏变化时 调整标题相关可见性
		// 标题图片和颜色
		var $titleSettingsEl = $('.title-settings-el');

		function onShowTitleBarChanged(e) {
			if (e.value == '1') {
				adjustTitleSettingsVisible(true)
			} else {
				adjustTitleSettingsVisible(false);
			}
		}

		function adjustTitleSettingsVisible(show) {
			if (show) {
				$titleSettingsEl.show();
			} else {
				$titleSettingsEl.hide();
			}
		}

		function saveAndClose() {
			epoint.execute('save', '', function() {
				epoint.closeDialog('save');
			});
		}

		function initCallback(data) {
			if (data.noborder) {
				adjustBorderColorVisible(false);
			}
			if (data.notitle) {
				adjustTitleSettingsVisible(false);
			}
		}

		// 初始化拉取数据后 进行如下的可视化调整
		function epoint_preload(controls, custom) {
			// 根据有无边框确定是否显示边框颜色的选择
			// adjustBorderColorVisible(true/false);
			// 是否展示标题栏的相关设置
			// adjustTitleSettingsVisible(true/false);
			// 是否展示更多的打开方式
			// adjustMoreOpentypeVisible(true/false);
		}
	</script>

</body>

</html>