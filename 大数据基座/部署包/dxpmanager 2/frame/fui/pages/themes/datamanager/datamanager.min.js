/*!
 * 新点研发平台
 * author:jiangqn
 * date: 2019-09-23
 * version: 1.0.0
 */var $main=$("#main"),$loading=$("#loading"),menuData=[],quickMenuList=[],menuWidth=185;(function(a,b){a._datamanagerEvent_=new Util.UserEvent;var h=b("#cover-wrap");a.createMainContentCover=Util.browsers.isIE&&window.hasObjectTag?function(){var a=document.createElement("iframe");a.width="100%";a.height="100%";a.scrolling="no";a.frameBorder=0;a.style.background="transparent";a.src="../../activexcover/activexcover.html";return b('\x3cdiv class\x3d"main-content-cover hidden"\x3e\x3c/div\x3e').append(a).appendTo(h)}:function(){return b('\x3cdiv class\x3d"main-content-cover hidden"\x3e\x3c/div\x3e').appendTo(h)};a._getData_=function(b,a){return Util.ajax({url:epoint.dealRestfulUrl(getDataUrl+"/"+b),data:a})};a.dealLinkOpen=function(b){console.log(b);switch(b.openType){case "tabsnav":TabsNav.addTab(b);break;case "dialog":epoint.openTopDialog(b.name,Util.getRightUrl(b.url));break;case "blank":a.open(Util.getRightUrl(b.url),b.id)}};a._ANIMATION_TIME_={slide:200};a.useWebsocket=!0===Util.getFrameSysParam("useWebsocket");a.eWebSocket=void 0;a.creatWebSocket=function(b,f,d){if(eWebSocket)d&&d();else{var c=a.EWebSocketConfig?a.EWebSocketConfig:{url:EmsgConfig.websocketUrl};c.uid=b;c.uname=f;a.EWebSocket?(eWebSocket=new EWebSocket(c),d&&d(),_datamanagerEvent_.fire("websocketCreated")):Util.loadJs("fui/pages/ewebsocket/ewebsocket.js",function(){eWebSocket=new EWebSocket(c);d&&d();_datamanagerEvent_.fire("websocketCreated")})}};a.getTplHtml=function(a,f){var d=b("#"+a).html();Mustache.parse(d);return Mustache.render(d,f)};String.prototype.includes||(String.prototype.includes=function(b,a){"number"!==typeof a&&(a=0);return a+b.length>this.length?!1:-1!==this.indexOf(b,a)})})(this,jQuery);(function(a,b){"[object Function]"===Object.prototype.toString.call(a.EpTabsNav)?(window.TabsNav=new EpTabsNav({ifrContainer:"#main-ifr-wrap",tabContainer:"#main-tab-wrap",needScrollBtn:!1,scrollBtnSite:"sides",smoothItems:3,refreshOnActiveTab:Util.getFrameSysParam("refreshOnActiveTab")||!1,needQuickNav:!0,position:"top",tabWidth:117,menuLinked:!0}),TabsNav._$pageCover=createMainContentCover()):console.error('The TabsNav is required! , please add the "fui/pages/tabsnav/tabsnav.js" before theme\'s javascript file')})(this,jQuery);(function(a,b){var h=b("#user-info"),u=b(".user-portrait",h),f=b("#user-action-panel"),d=createMainContentCover();h.on("click",".user-info-summary",function(){h.hasClass("active")?(h.removeClass("active"),f.slideUp(),d.addClass("hidden")):(h.addClass("active"),f.slideDown(),d.removeClass("hidden"))}).on("click",".user-action-item",function(){var a=b(this);if(a.hasClass("person-info"))TabsNav.addTab({id:this.getAttribute("data-id"),name:this.getAttribute("data-name"),url:this.getAttribute("data-url")});else if(a.hasClass("logout"))mini.confirm("\u60a8\u786e\u5b9a\u8981\u9000\u51fa\u7cfb\u7edf\u5417\uff1f","\u7cfb\u7edf\u63d0\u793a",function(b){"ok"==b&&(eWebSocket&&eWebSocket.close(),UserSettins.logout())});else if(a.hasClass("role-change"))UserSettins.changeRole(_userGuid_);else{var m=a.data("opentype"),f=a.data("id"),k=a.attr("url"),q=a.text(),n=a.attr("script");f||(f=Util.uuid(),a.data("id",f).attr("data-id",f));if(k)dealLinkOpen({id:f,openType:m,name:q,url:k});else if(n)try{eval(n)}catch(v){console.error(v)}}h.removeClass("active");d.addClass("hidden")});b("body").on("click",function(a){b(a.target).closest("#user-info,#user-action-panel").length||(h.removeClass("active"),f.slideUp(),d.addClass("hidden"))});Util.ajax({url:getUserInfoUrl}).done(function(c){a._userName_=c.name;a._userGuid_=c.guid;a._msgcenterConfig_=b.extend({},MsgCenterConfig,{isMsgCenterMaxSize:c.isMsgCenterMaxSize||!1,msgCenterOrder:c.msgCenterOrder||"asc",hideCallback:function(){d.addClass("hidden")}});useWebsocket&&creatWebSocket(_userGuid_,_userName_);if(c.portrait){var m=Util.getRightUrl(epoint.dealRestfulUrl(c.portrait));u.attr("src",m+"\x26t\x3d"+Math.random())}c.hasParttime&&h.find(".user-action-item.role-change").removeClass("hidden");m=b("#user-info-detail");m.find(".user-name").text(c.name).attr("title",c.name);m.find(".user-dept").text(c.ouName).attr("title",c.ouName)});_getData_("getPageInfo").done(function(c){c.fullSearchUrl&&(a._fullSearchUrl_=c.fullSearchUrl);var m={closeIcon:!1,refresh:!0};b.each(c.homes,function(a,k){var d=!1;k.items&&b.each(k.items,function(b,a){if(c.defaultHome){if(a.code==c.defaultHome)return m.id=a.code||"home",m.url=a.url,m.name=a.name,d=!0,!1}else if("tabsnav"==a.openType)return m.id=a.code||"home",m.url=a.url,m.name=a.name,d=!0,!1});if(d)return!1});TabsNav.addTab(m);_datamanagerEvent_.fire("afterPageInfo")});b(a).on("message",function(b){try{var a=JSON.parse(b.originalEvent.data);"userPortraitChange"===a.type&&u.attr("src",a.imgData)}catch(w){}});_getData_("getExtTabsInfo").done(function(a){if(a&&a.length){var c="";b.each(a,function(b,a){a.icon=a.icon||"modicon-8";/^icon-/.test(a.icon)&&(a.icon="action-icon "+a.icon);c+=Mustache.render('\x3cli class\x3d"user-action-item" title\x3d"{{name}}" url\x3d"{{url}}" data-opentype\x3d"{{openType}}" script\x3d"{{script}}"\x3e\x3cspan class\x3d"{{icon}}"\x3e\x3c/span\x3e{{name}}\x3c/li\x3e',a)});b(c).insertAfter("#person-info-setting")}})})(this,jQuery);window.OpenEMsg=function(a,b,h){window.eMsg?"undefined"===typeof b?eMsg.open(a):eMsg.openSession(a,b,h):creatWebSocket(_userGuid_,_userName_,function(){eWebSocket.openEmsg(a,b,h)})};(function(a,b){function h(){new MessageList({container:p,getUrl:epoint.dealRestfulUrl(getDataUrl+"/getMsgData"),ignoreUrl:epoint.dealRestfulUrl(getDataUrl+"/ignoreRemind"),afterOpenMsg:function(){f()},afterIgnore:function(){g()}})}function u(){D=new EMsgList({content:B,getUrl:EmsgConfig.baseUrl,ignoreUrl:EmsgConfig.baseUrl,userImg:EmsgConfig.userImg,groupImg:EmsgConfig.groupImg,afterOpenEMsg:function(){f()},onDecEmsgCount:G});a.RefreshEMsg=b.proxy(D.getData,D)}function f(){E.addClass("hidden");l.stop(!0).animate({right:-350},function(){l.addClass("hidden")});r.find("[data-ref].active").removeClass("active")}var d="\u60a8\u6709\u65b0\u6d88\u606f\u63d0\u9192\uff0c\u8bf7\u70b9\u51fb\u67e5\u770b\uff01",c=0,m="",w={roll:function(){m=a.systemTitle||document.title;document.title=d;clearTimeout(c);c=setTimeout(function H(){document.title=d.substring(1,d.length)+d.substring(0,1);d=document.title;c=setTimeout(H,300)},300)},stop:function(){clearTimeout(c);document.title=m||document.title;d="\u60a8\u6709\u65b0\u6d88\u606f\u63d0\u9192\uff0c\u8bf7\u70b9\u51fb\u67e5\u770b\uff01"}},k=b("#msg-sound"),q,n;Util.browsers.isIE?q=b('\x3ciframe src\x3d"" frameborder\x3d"0" class\x3d"hidden" id\x3d"msgcenter-sound"\x3e\x3c/iframe\x3e').appendTo(k):(k.html('\x3caudio id\x3d"msgcenter-sound-audio" controls\x3d"controls" src\x3d"../../msgsound/newsms.wav" class\x3d"hidden-accessible"\x3e\x3c/audio\x3e'),n=document.getElementById("msgcenter-sound-audio"));var v=function(b){b=parseInt(b,10);return 99<b?"99+":0>=b?"":b+""},r=b("#header-action-btns"),x=b(".remind-num",r),e=b(".emsg-num",r),l=b("#msg-panel"),k=b("#msgRemind",l),p=b(".msg-panel-content",k),k=b("#msgEMsg",l),y=b(".msg-panel-content",k),B=b(".emsg-recent-list",y),A=b(".online-user-num",k),z=document.getElementById("online-user"),t={show:function(){RemindTipsCfg.show&&this.autoHide()},autoHide:function(){return 0!=RemindTipsCfg.timeout?function(){clearTimeout(t.timer);t.timer=setTimeout(function(){},RemindTipsCfg.timeout)}:function(){}}(),initEvent:function(){}};t.initEvent();var g=function(b){var a={haseXun:!0,needNum:!0};b&&(a.inCache=!0);return _getData_("getMsgCount",a).done(function(b){F(b)})},F=function(b){var a=0,g=!1;b.remind?(a=parseInt(x.data("num"),10)||0,b.remind>a&&(g=!0,t.show()),x.removeClass("hidden").text(v(b.remind)),x.data("num",b.remind)):x.text("").addClass("hidden");b.eXun?(a=parseInt(e.data("num"),10)||0,b.eXun>a&&(g=!0),e.removeClass("hidden").text(v(b.eXun)),e.data("num",b.eXun)):e.text("").addClass("hidden");if(g){if(!1!==Util.getFrameSysParam("messageSound"))if(Util.browsers.isIE)q[0].src=Util.getRightUrl("../../msgsound/sound.html?_\x3d"+ +new Date);else try{n&&n.play()["catch"](function(){var b=new window.SpeechSynthesisUtterance;b.text="\u60a8\u6709\u65b0\u77ed\u6d88\u606f\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\uff01";window.speechSynthesis.speak(b)})}catch(I){}w.roll()}else w.stop()};_datamanagerEvent_.on("afterPageInfo",function(){g();useWebsocket||setInterval(function(){g(!0)},6E4)});if(useWebsocket)_datamanagerEvent_.on("websocketCreated",function(){eWebSocket.socketEvent.on("messagecount",function(b){F(b.data)})});a.getMessageCount=g;a.MessageList?h():Util.loadJs("../../../js/widgets/messagelist/messagelist.js",function(){h()});var G=function(){var b=e.text();b&&(b=parseInt(b,10)-1);0==b&&(b="",e.data("num",0).addClass("hidden"));e.text(b)},D;a.EMsgList?u():Util.loadJs("../../../js/widgets/emsglist/emsglist.js",function(){u()});a.OnlineUserSettings&&a.OnlineUserSettings.show&&(k.find(".msg-panel-head").addClass("tab").find(".panel-hd-tab.hidden").removeClass("hidden"),k.on("click",".panel-hd-tab",function(){var a=b(this),g=a.data("ref"),c=a.data("hasShow"),e=B;a.hasClass("active")||(a.addClass("active").siblings().removeClass("active"),g&&(e=b("#"+g,y),c||setTimeout(function(){OnlineUserSettings.onRefreshData(function(b){A.html(b)});a.data("hasShow",!0)},10)),e.removeClass("hidden").siblings().addClass("hidden"))}));a.hideMessagePanel=f;var E=createMainContentCover(),C;a.messageCenter={refresh:function(){C&&C.refresh()}};r.on("click","[data-ref]",function(){var g=b(this),c=g.data("ref"),e=b("#"+c,l);if(g.hasClass("active"))f(),E.addClass("hidden");else if(g.addClass("active").siblings(".active").removeClass("active"),"msgRemind"==c)C||(C=new MsgCenter(_msgcenterConfig_)),C.show(),hideMessagePanel();else{if("msgEMsg"==c){if(D.getData(),a.OnlineUserSettings&&a.OnlineUserSettings.show)if(z.src)OnlineUserSettings.onRefreshData(function(b){A.html(b)});else z.src=OnlineUserSettings.url,z.attachEvent?z.attachEvent("onload",function(){OnlineUserSettings.onRefreshData(function(b){A.html(b)})}):z.onload=function(){OnlineUserSettings.onRefreshData(function(b){A.html(b)})}}else"msgSkin"==c&&a.initSkinView&&a.initSkinView();e.removeClass("hidden").siblings(".msg-panel-detail").addClass("hidden");e.find(".msg-panel-content").removeClass("hidden");l.removeClass("hidden");l.stop(!0).animate({right:0});E.removeClass("hidden")}});l.on("click",".msg-panel-hide",function(){f()});b("body").on("click",function(a){b(a.target).closest("#msg-panel , .header-action-btn[data-ref]").length||hideMessagePanel()})})(this,jQuery);(function(a,b){function h(){return Util.ajax({url:a.fullSearchCateUrl}).done(function(b){u(b.categories)})}function u(c){c=c||[];"string"==typeof c&&(c=JSON.parse(c));var f=[];b.each(c,function(b,a){f.push({id:a.guid,name:a.name,iconCls:a.icon||"view"})});f.length||f.push({id:"all",name:"\u5168\u6587\u68c0\u7d22",iconCls:"modicon-25"});ClassifySearch._styleLoaded=!0;ClassifySearch._$pageCover=createMainContentCover();new ClassifySearch({id:"header-search",searchTarget:"\u5185\u5bb9",category:f,placeholder:"\u641c\u7d22",maxShowCharacter:5,enter:function(b,c){var d;d=b||"all";try{TabsNav.removeTab("fullsearch")}catch(n){}TabsNav.addTab({id:"fullsearch",name:"\u5168\u6587\u68c0\u7d22",url:a._fullSearchUrl_+"?wd\x3d"+a.encodeURI(c)+"\x26type\x3d"+d})}});setTimeout(function(){d.removeClass("invisible")},200)}var f=b(".header-container"),d=b("#top-search").addClass("invisible");_datamanagerEvent_.on("afterPageInfo",function(){a._fullSearchUrl_?(h(),f.addClass("has-search")):f.removeClass("has-search");_datamanagerEvent_.fire("headerSearchLoad")})})(this,jQuery);(function(a,b){function h(){var a=[];b(".all-menu-block",l).each(function(g,c){var e=b(c);if(3>g)0===g?e.css({top:"10px",left:0}):e.css({top:"10px",left:menuWidth*g+"px"}),a.push(e.outerHeight()+10);else{var d=u(a);0===d?e.css({top:d.num+30+"px",left:0}):e.css({top:d.num+30+"px",left:menuWidth*d.index+"px"});a[d.index]=e.outerHeight()+d.num+30}})}function u(b){var a=0,g=0;b.forEach(function(b,e){0===e?a=b:0!==e&&b<a&&(a=b,g=e)});return{num:a,index:g}}function f(){menuData.forEach(function(b){b.hasSub=b.items&&b.items.length?!0:!1})}function d(){b(".allmenu-item").each(function(a,e){for(var g=b(e),c=g.data("id"),d=0;d<quickMenuList.length;d++)if(quickMenuList[d].code==c){g.addClass("active");break}})}function c(){var a=[];b(".quick-menu").each(function(g,e){for(var c=b(e).data("id"),d=0;d<quickMenuList.length;d++)if(quickMenuList[d].code==c){a.push(quickMenuList[d]);break}});quickMenuList=a}function m(b){for(var a=0;a<quickMenuList.length;a++)quickMenuList[a].code==b&&quickMenuList.splice(a,1);r.html(getTplHtml("quick-menu-tpl",{list:quickMenuList}))}function w(){var b=[];quickMenuList.forEach(function(a){b.push(String(a.code))});console.log(b);Util.ajax({url:saveCommonMenuUrl,data:{type:"user-setting",userSelected:JSON.stringify(b)}}).done(function(b){})}function k(){var b=e.val(),a=[],c=JSON.parse(JSON.stringify(menuData));""===b?l.html(getTplHtml("allmenu-block-tpl",{list:menuData})):(c.forEach(function(e){var g=!1,c={items:[]};e.name.includes(b)&&(g=!0);e.items&&e.items.length&&e.items.forEach(function(a){a.name.includes(b)&&(c.items.push(a),g=!0)});g&&(c.code=e.code,c.name=e.name,c.icon=e.icon,c.openType=e.openType,c.url=e.url,a.push(c))}),l.html(getTplHtml("allmenu-block-tpl",{list:a})));h();d()}function q(){n.removeClass("active");v.addClass("hide");y.removeClass("show");B.addClass("hidden")}var n=b("#menu-trigger"),v=b("#global-menu"),r=b("#quick-menu-list"),x=b("#all-menu-search"),e=b("#allmenu-search-input"),l=b("#all-menu-body"),p=b("#all-menu"),y=b("#all-menu-box"),B=createMainContentCover(),A=!1,z=!1,t=!1;n.on("click",function(){n.hasClass("active")?q():(n.addClass("active"),v.removeClass("hide"),B.removeClass("hidden"))});e.on("focus",function(){x.addClass("active")}).on("blur",function(){x.removeClass("active")}).on("keydown",function(b){13===b.keyCode&&k()});l.on("click",".allmenu-item-flag",function(a){a.stopPropagation();a=b(this).parent();var e=a.data("id"),c;a.data("icon");var g=a.data("name"),d=a.data("url"),p=a.data("opentype");c=a.data("icon");a.hasClass("active")?(a.removeClass("active"),m(e)):(e={code:e,name:g,icon:c,openType:p},d&&(e.url=d),quickMenuList.push(e),a.addClass("active"),r.html(getTplHtml("quick-menu-tpl",{list:quickMenuList})));w()}).on("click",".allmenu-item",function(){var e=b(this),c=e.data("id"),d=e.data("name"),p=e.data("url"),f=e.data("opentype"),l=e.data("hassub"),r=e.data("icon");$loading.removeClass("hidden");q();setTimeout(function(){p&&dealLinkOpen({id:c,name:d,url:p,openType:f});var g=p?!1:!0;if(e.hasClass("level1"))l?($main.removeClass("left-none"),getLefMenu({code:c,name:d,icon:r},g)):($main.addClass("left-none"),dealLinkOpen({id:c,name:d,url:p,openType:f}));else{var k=e.siblings(".level1").data("id"),x=e.data("name");e.data("url");e.data("opentype");e.data("hassub");var h=e.data("icon");$main.removeClass("left-none");getLefMenu({code:k,name:x,icon:h,activeCode:c},g)}$loading.addClass("hidden");b(a).trigger("resize")},500)});r.on("click",".quick-menu-close",function(a){a.stopPropagation();a=b(this).parent().data("id");m(a);for(var e=b(".allmenu-item"),c=0;c<e.length;c++){var d=e.eq(c);if(d.data("id")==a){d.removeClass("active");break}}w()}).on("click",".quick-menu",function(){e.val("");k();b("#all-menu-"+b(this).data("id")).trigger("click")});p.on("mouseenter",function(){t=!1;p.addClass("active");setTimeout(function(){t||y.addClass("show")},200)}).on("mouseleave",function(){t=!0;p.removeClass("active");setTimeout(function(){t&&y.removeClass("show")},600)});y.on("mouseenter",function(){t=!1;p.addClass("active")}).on("mouseleave",function(){t=!0;p.removeClass("active");setTimeout(function(){t&&y.removeClass("show")},600)});b("body").on("click",function(a){b(a.target).closest("#menu-trigger,#global-menu,#all-menu-box").length||q()});(function(){r.sortable({axis:"y",handle:".quick-menu-drag",zIndex:100,deactivate:function(b,a){c();w()}})})();(function(){Util.ajax({url:getMenuUrl,data:{query:"all"}}).done(function(b){z=!0;menuData=b;f();l.html(getTplHtml("allmenu-block-tpl",{list:menuData}));h();A&&d()})})();(function(){Util.ajax({url:getQuickMenuUrl}).done(function(b){A=!0;quickMenuList=b;r.html(getTplHtml("quick-menu-tpl",{list:quickMenuList}));z&&d()})})()})(window,jQuery);(function(a,b){function h(a,c){var e="";b.each(a,function(a,d){d.hasSub=!(!d.items||!d.items.length);d.rowkey=void 0===c?a+"":c+"-"+a;var f=d.rowkey.split("-").length;d.isTop=1===f;d.level="level-"+f;var l;l=f||d.rowkey.split("-").length;l=2==l||1==l?36:36+15*(l-2);d.indent=l;1===f&&(d.icon=d.icon||"modicon-1");e=d.hasSub?e+Mustache.render('\x3cli class\x3d"left-menu-item {{level}}"\x3e\x3ca href\x3d"javascript:void(0);" data-url\x3d"{{url}}" data-id\x3d"{{code}}" title\x3d"{{name}}" data-openType\x3d"{{openType}}" data-hasSub\x3d"{{hasSub}}" class\x3d"left-menu-link"style\x3d"padding-left: {{indent}}px;"\x3e{{#isTop}}\x3ci class\x3d"left-menu-icon {{icon}} "\x3e\x3c/i\x3e{{/isTop}}\x3cspan class\x3d"left-menu-name"\x3e{{name}}\x3c/span\x3e{{#hasSub}}\x3ci class\x3d"left-menu-trigger"\x3e\x3c/i\x3e{{/hasSub}}\x3c/a\x3e{{#hasSub}}{{#isTop}}\x3cdiv class\x3d"left-menu-sub"\x3e\x3cdiv class\x3d"left-menu-sub-inner"\x3e\x3cdiv class\x3d"left-menu-sub-header"\x3e\x3cspan class\x3d"left-menu-sub-title"\x3e{{name}}\x3c/span\x3e\x3c/div\x3e{{/isTop}}\x3cul class\x3d"left-menu-sub-list" style\x3d"display:none;"\x3e {{{subMenu}}}\x3c/ul\x3e{{#isTop}}\x3c/div\x3e\x3c/div\x3e{{/isTop}}{{/hasSub}}\x3c/li\x3e',b.extend(d,{subMenu:h(d.items,d.rowkey)})):e+Mustache.render('\x3cli class\x3d"left-menu-item {{level}}"\x3e\x3ca href\x3d"javascript:void(0);" data-url\x3d"{{url}}" data-id\x3d"{{code}}" title\x3d"{{name}}" data-openType\x3d"{{openType}}" data-hasSub\x3d"{{hasSub}}" class\x3d"left-menu-link"style\x3d"padding-left: {{indent}}px;"\x3e{{#isTop}}\x3ci class\x3d"left-menu-icon {{icon}} "\x3e\x3c/i\x3e{{/isTop}}\x3cspan class\x3d"left-menu-name"\x3e{{name}}\x3c/span\x3e{{#hasSub}}\x3ci class\x3d"left-menu-trigger"\x3e\x3c/i\x3e{{/hasSub}}\x3c/a\x3e{{#hasSub}}{{#isTop}}\x3cdiv class\x3d"left-menu-sub"\x3e\x3cdiv class\x3d"left-menu-sub-inner"\x3e\x3cdiv class\x3d"left-menu-sub-header"\x3e\x3cspan class\x3d"left-menu-sub-title"\x3e{{name}}\x3c/span\x3e\x3c/div\x3e{{/isTop}}\x3cul class\x3d"left-menu-sub-list" style\x3d"display:none;"\x3e {{{subMenu}}}\x3c/ul\x3e{{#isTop}}\x3c/div\x3e\x3c/div\x3e{{/isTop}}{{/hasSub}}\x3c/li\x3e',d)});return e}function u(a,d){if(a&&a.length){console.log(d);var e=h(a);k=b(Mustache.render('\x3cdiv class\x3d"left-menu-wrap" id\x3d"left-menu-{{code}}"\x3e\x3cdiv class\x3d"left-menu-header" data-url\x3d"{{url}}" data-id\x3d"{{code}}" data-openType\x3d"{{openType}}" data-hasSub\x3d"{{hasSub}}" \x3e\x3cspan class\x3d"left-menu-header-txt"\x3e{{name}}\x3c/span\x3e\x3cspan class\x3d"left-menu-header-icon {{icon}}"\x3e\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"left-menu-list"\x3e{{{leftMenuItems}}}\x3c/ul\x3e\x3c/div\x3e',{code:d.code,name:d.name,leftMenuItems:e,icon:d.icon,hasSub:d.hasSub,openType:d.openType,url:d.url}));k.appendTo(w).siblings(".left-menu-wrap").addClass("hidden");Util.browsers.isIE8&&k.find(".left-menu-list").height(c.height()-m.height()||36)}}function f(b){if(q[b])return TabsNav.addTab(q[b]);var a="",e="";w.find("#left-menu-"+b).find(".left-menu-link").each(function(d,c){e=c.getAttribute("data-url");a=c.getAttribute("data-opentype");if(e&&"tabsnav"==a)return q[b]={id:c.getAttribute("data-id"),name:c.title,url:e},TabsNav.addTab(q[b]),!1})}var d={},c=b("#left-menu"),m=b(".left-nav-trigger",c),w=b(".left-nav-container",c);createMainContentCover();var k;(function(){$main.removeClass("left-narrow");var a=Util.browsers.isIE8||Util.browsers.isIE9,d=createMainContentCover();b(".left-nav-trigger").on("click",function(){$main.hasClass("left-narrow")?$main.removeClass("left-narrow"):($main.addClass("left-narrow"),k&&!k.find(".left-menu-item.level-1.opened").length&&c.trigger("hide-trans"))});c.on("hide-trans",function(){!a&&c.addClass("hide-trans")}).on("transitionend",function(b){b.target===this&&c.removeClass("hide-trans")}).on("click",".left-menu-link",function(){var a=b(this),d=a.parent(),c=d.hasClass("level-1"),f=a.data("hassub"),k={url:a.data("url"),openType:a.data("opentype"),name:this.title,id:a.data("id")};f&&(c=c?a.next().find(".left-menu-sub-list:eq(0)"):a.next(),d.hasClass("opened")?(d.removeClass("opened"),c.stop(!0).slideUp(_ANIMATION_TIME_.slide)):(d.addClass("opened"),c.stop(!0).slideDown(_ANIMATION_TIME_.slide),d.siblings(".opened").removeClass("opened").find(".left-menu-sub-list:eq(0)").stop(!0).slideUp(_ANIMATION_TIME_.slide)));k.url&&(b(".left-menu-link").removeClass("active"),a.addClass("active"),dealLinkOpen(k))});b("body").on("click",function(a){b(a.target).closest("#left-menu").length||d.addClass("hidden")})})();a.getLefMenu=function(a,c){var e=a.code;if(!d[e])for(var l=0;l<menuData.length;l++){var h=menuData[l];if(h.code==e){u(h.items,h);d[e]="resolve";c&&f(e+"");break}}"resolve"===d[e]&&(k=b("#left-menu-"+e),k.removeClass("hidden").siblings(".left-menu-wrap").addClass("hidden"),c&&f(e));a.activeCode&&(e=b("#left-menu-"+e),l=b(".left-menu-item.level-1\x3e.left-menu-link",e),b(".left-menu-sub-list",e).slideUp(_ANIMATION_TIME_.slide),b(".left-menu-link").removeClass("active"),b(".left-menu-item").removeClass("opened"),l.each(function(c,d){var e=b(d);e.data("id")==a.activeCode&&(e.data("hassub")?(e.parent().addClass("opened"),e.parent().find(".left-menu-sub-list:eq(0)").slideDown(_ANIMATION_TIME_.slide)):e.addClass("active"))}))};var q={},n,v=!1;c.on("mouseover",".left-menu-list,.left-menu-header",function(){$main.hasClass("left-narrow")&&(v=!0,n=setTimeout(function(){v&&($main.removeClass("left-narrow"),$main.addClass("left-over"))},300))}).on("mouseleave",function(){n&&(n=null,v=!1);$main.hasClass("left-over")&&($main.removeClass("left-over"),$main.addClass("left-narrow"))}).on("click",".left-menu-header",function(){b(this).data("url")&&dealLinkOpen({id:b(this).data("id"),name:b(this).data("name"),url:b(this).data("url"),openType:b(this).data("opentype")})})})(this,jQuery);