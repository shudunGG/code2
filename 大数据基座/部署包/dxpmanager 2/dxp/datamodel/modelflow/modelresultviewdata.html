<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"></meta>
<meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
<title>数据预览</title>
<script src="../../../frame/fui/js/cssboot.js"></script>
</head>
<body>
	<div class="page-loading"></div>
	<!-- toolbar区域  -->
	<div class="fui-toolbar">
		<div class="btn-group mr10">
			<a class="mini-dataexport" style="left: 2px" id="dataexport"
				gridId="datagrid" fileName="导出结果" action="getExportModel"
				position="left" collapseText="导出excel"></a>
		</div>
	</div>
	<div class="fui-content">
		<div id="datagrid" class="mini-datagrid" 
			style="width: 100%; height: 100%;" action="getTableData"
			showPager="true" allowCellEdit="true" allowCellSelect="true"
			editNextOnEnterKey="true" editNextRowCell="true"></div>
	</div>

	<script src="../../../rest/resource/jsboot"></script>
	<script type="text/javascript">
		//<![CDATA[
		epoint.initPage("dxpmodelresultviewdataaction", '', callbackinit);
		var grid = mini.get("datagrid");
		// 初始化回掉，动态生成列
		function callbackinit(data) {
			if(data.msg){
				epoint.alert(data.msg);
			}else if(data.columns){
				//adjustContentHeight();//隐藏的condition出来 要重新计算一次高度
				drawDynamicColumn(data);
				grid.reload();
			}
		}

		// 绘制动态列
		function drawDynamicColumn(data) {
			var tmp = data.columns;
			console.log(tmp);
			var columns = eval('(' + tmp + ')');
			grid.set(columns);
		   // grid.frozenColumns(0, 3);
		}
		
		function beforeexportfc() {
			epoint.showLoading();
		}
		//]]>
	</script>
</body>
</html>