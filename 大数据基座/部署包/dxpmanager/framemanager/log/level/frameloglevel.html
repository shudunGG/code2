<!DOCTYPE html>
<html>

<head>
<title>添加日志等级设置</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<script src="../../../frame/fui/js/cssboot.js"></script>
</head>

<body>
	<div class="page-loading"></div>
	<div class="fui-toolbar">
		<div class="btn-group mr10">
			<a class="mini-button" id="addNew" iconCls="icon-save"
				onclick="saveAndNew">保存并新建</a> <a class="mini-button" id="addClose"
				iconCls="icon-save" onclick="saveAndClose">保存并关闭</a> <a
				class="mini-button" iconCls="icon-removecircle"
				onclick="epoint.closeDialog">关闭</a>
		</div>
	</div>

	<div class="fui-content">
		<div id="fui-form" class="fui-form">
			<!-- 2列 -->
			<div role="row">
				<div role="control" label="日志名称" starred="true">
					<input id="levelname"
						bind="frameloglevelaction.frameLogLevel.logname"
						requiredErrorText="日志名称不能为空" class="mini-textbox" required="true" />
				</div>
				<div role="control" label="日志等级">
					<input id="level"
						data="[{text:'DEBUG',id:'DEBUG'},{text:'INFO',id:'INFO'},{text:'WARN',id:'WARN'},{text:'ERROR',id:'ERROR'},{text:'FATAL',id:'FATAL'},{text:'ALL',id:'ALL'},{text:'OFF',id:'OFF'}]"
						textField="text" valueField="id"
						bind="frameloglevelaction.frameLogLevel.loglevel"
						class="mini-combobox" />
				</div>
			</div>
			<div role="row">
				<div role="control" label="启用">
					<input id="isworking"
						bind="frameloglevelaction.frameLogLevel.isworking"
						class="mini-checkbox" checked="true" />
				</div>
			</div>
			<div role="row">
				<div role="control" label="备注">
					<input id="description"
						bind="frameloglevelaction.frameLogLevel.description"
						class="mini-textarea" />
				</div>
			</div>
		</div>
	</div>

	<script src="../../../rest/resource/jsboot"></script>
	<script type="text/javascript">
		epoint.initPage("frameloglevelaction");

		function saveAndNew() {
			if (epoint.validate()) {
				epoint.execute('frameloglevelaction.addLevel', 'fui-form',
						newCallback);
			}
		}

		function saveAndClose() {
			if (epoint.validate()) {
				epoint.execute('frameloglevelaction.addLevel', 'fui-form',
						closeCallback);
			}
		}

		function newCallback(data) {
			if (data.msg) {
				epoint.alert(data.msg, null, null, 'info');
				epoint.clear('fui-form');
			}
		}

		function closeCallback(data) {
			if (data.msg) {
				var options = {
					backParam : 'ok', //回传到父页面的参数
					chkMsg : '成功', //检查信息(判断message中是否包含该参数值， 如果包含才真正关闭窗口，否则仅做alert,默认为"成功")
					needCheck : true
				//是否必须对chkMsg进行检查，默认为false
				};
				epoint.alertAndClose(data.msg, '', '', options, 'info');
			}
		}
	</script>
</body>
</html>

