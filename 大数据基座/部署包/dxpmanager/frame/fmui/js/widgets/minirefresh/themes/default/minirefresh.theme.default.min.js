!function(s,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):s.MiniRefresh=t()}(this,function(){"use strict";function s(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function t(s,t){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?s:t}function o(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(s,t):s.__proto__=t)}var n=function(){function s(s,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,n.key,n)}}return function(t,o,n){return o&&s(t.prototype,o),n&&s(t,n),t}}(),e=MiniRefreshTools.Core,i=MiniRefreshTools.version,r=MiniRefreshTools.extend,a=MiniRefreshTools.namespace,p="minirefresh-theme-default",h="minirefresh-downwrap",c="minirefresh-upwrap",l="minirefresh-fade-in",u="minirefresh-fade-out",d="minirefresh-totop",w="minirefresh-rotate",f="minirefresh-hardware-speedup",W="minirefresh-hidden",v="body-scroll-wrap",m="downwrap-success",T="downwrap-error",g="status-default",y="status-pull",_="status-loading",L="status-success",k="status-error",b="status-nomore",P=75,C={down:{successAnim:{isEnable:!1,duration:300},contentdown:"下拉刷新",contentover:"释放刷新",contentrefresh:"加载中...",contentsuccess:"刷新成功",contenterror:"刷新失败",isWrapCssTranslate:!1},up:{toTop:{isEnable:!0,duration:300,offset:800},contentdown:"",contentrefresh:"加载中...",contentnomore:"没有更多数据了"}},S=function(e){function i(o){s(this,i);var n=r(!0,{},C,o);return t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n))}return o(i,e),n(i,[{key:"_initHook",value:function(){var s=this.container,t=this.contentWrap;s.classList.add(p),t.classList.add(f),this.options.isUseBodyScroll&&(s.classList.add(v),t.classList.add(v)),this._initDownWrap(),this._initUpWrap(),this._initToTop()}},{key:"_refreshHook",value:function(){this.options.down.isWrapCssTranslate?this._transformDownWrap(-this.downWrapHeight):this._transformDownWrap(0,0,!0),this.options.up.toTop.isEnable||(this.toTopBtn&&this.toTopBtn.classList.add(W),this.isShowToTopBtn=!1)}},{key:"_initDownWrap",value:function(){var s=this.container,t=this.contentWrap,o=this.options,n=document.createElement("div");n.className=h+" "+f,n.innerHTML=' \n            <div class="downwrap-content">\n                <p class="downwrap-progress"></p>\n                <p class="downwrap-tips">'+o.down.contentdown+"</p>\n            </div>\n        ",s.insertBefore(n,t),this.downWrap=n,this.downWrapProgress=this.downWrap.querySelector(".downwrap-progress"),this.downWrapTips=this.downWrap.querySelector(".downwrap-tips"),this.isCanPullDown=!1,this.downWrapHeight=n.offsetHeight||P,this._transformDownWrap(-this.downWrapHeight),i._changeWrapStatusClass(this.downWrap,g)}},{key:"_transformDownWrap",value:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments[2];if(o||this.options.down.isWrapCssTranslate){var n=t+"ms",e="translateY("+s+"px)  translateZ(0px)";this.downWrap.style.webkitTransitionDuration=n,this.downWrap.style.transitionDuration=n,this.downWrap.style.webkitTransform=e,this.downWrap.style.transform=e}}},{key:"_initUpWrap",value:function(){var s=this.contentWrap,t=this.options,o=document.createElement("div");o.className=c+" "+f,o.innerHTML=' \n            <p class="upwrap-progress"></p>\n            <p class="upwrap-tips">'+t.up.contentdown+"</p>\n        ",o.style.visibility="hidden",s.appendChild(o),this.upWrap=o,this.upWrapProgress=this.upWrap.querySelector(".upwrap-progress"),this.upWrapTips=this.upWrap.querySelector(".upwrap-tips"),i._changeWrapStatusClass(this.upWrap,g)}},{key:"_initToTop",value:function(){var s=this,t=this.options,o=t.up.toTop.isEnable,n=t.up.toTop.duration;if(o){var e=document.createElement("div");e.className=d+" "+p,e.onclick=function(){s.scroller.scrollTo(0,n)},e.classList.add(W),this.toTopBtn=e,this.isShowToTopBtn=!1,this.container.appendChild(e)}}},{key:"_pullHook",value:function(s,t){var o=this.options,n=360;if(s<t?this.isCanPullDown&&(this.isCanPullDown=!1,i._changeWrapStatusClass(this.downWrap,g),this.downWrapTips.innerText=o.down.contentdown):this.isCanPullDown||(this.downWrapTips.innerText=o.down.contentover,this.isCanPullDown=!0,i._changeWrapStatusClass(this.downWrap,y)),this.downWrapProgress){var e=s/t,r=n*e,a="rotate("+r+"deg)";this.downWrapProgress.style.webkitTransform=a,this.downWrapProgress.style.transform=a}this._transformDownWrap(-this.downWrapHeight+s)}},{key:"_scrollHook",value:function(s){var t=this.options,o=t.up.toTop.isEnable,n=this.toTopBtn;o&&n&&(s>=t.up.toTop.offset?this.isShowToTopBtn||(n.classList.remove(u),n.classList.remove(W),n.classList.add(l),this.isShowToTopBtn=!0):this.isShowToTopBtn&&(n.classList.add(u),n.classList.remove(l),this.isShowToTopBtn=!1))}},{key:"_downLoaingHook",value:function(){this._transformDownWrap(-this.downWrapHeight+this.options.down.offset,this.options.down.bounceTime),this.downWrapTips.innerText=this.options.down.contentrefresh,this.downWrapProgress.classList.add(w),i._changeWrapStatusClass(this.downWrap,_)}},{key:"_downLoaingSuccessHook",value:function(s,t){this.options.down.contentsuccess=t||this.options.down.contentsuccess,this.downWrapTips.innerText=s?this.options.down.contentsuccess:this.options.down.contenterror,this.downWrapProgress.classList.remove(w),this.downWrapProgress.classList.add(u),this.downWrapProgress.classList.add(s?m:T),i._changeWrapStatusClass(this.downWrap,s?L:k)}},{key:"_downLoaingEndHook",value:function(s){this.downWrapTips.innerText=this.options.down.contentdown,this.downWrapProgress.classList.remove(w),this.downWrapProgress.classList.remove(u),this.downWrapProgress.classList.remove(s?m:T),this.isCanPullDown=!1,this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime),i._changeWrapStatusClass(this.downWrap,g)}},{key:"_cancelLoaingHook",value:function(){this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime),i._changeWrapStatusClass(this.downWrap,g)}},{key:"_upLoaingHook",value:function(s){s?(this.upWrapTips.innerText=this.options.up.contentrefresh,this.upWrapProgress.classList.add(w),this.upWrapProgress.classList.remove(W),this.upWrap.style.visibility="visible"):this.upWrap.style.visibility="hidden",i._changeWrapStatusClass(this.upWrap,_)}},{key:"_upLoaingEndHook",value:function(s){s?(this.upWrapTips.innerText=this.options.up.contentnomore,i._changeWrapStatusClass(this.upWrap,b)):(this.upWrapTips.innerText=this.options.up.contentdown,i._changeWrapStatusClass(this.upWrap,g)),this.upWrapProgress.classList.remove(w),this.upWrapProgress.classList.add(W)}},{key:"_resetUpLoadingHook",value:function(){this.upWrapTips.innerText=this.options.up.contentdown,this.upWrapProgress.classList.remove(w),this.upWrapProgress.classList.add(W),i._changeWrapStatusClass(this.upWrap,g)}},{key:"_lockUpLoadingHook",value:function(s){this.upWrap.style.visibility=s?"hidden":"visible"}},{key:"_lockDownLoadingHook",value:function(s){this.downWrap.style.visibility=s?"hidden":"visible"}}],[{key:"_changeWrapStatusClass",value:function(s,t){s.classList.remove(b),s.classList.remove(g),s.classList.remove(y),s.classList.remove(_),s.classList.remove(L),s.classList.remove(k),s.classList.add(t)}}]),i}(e);return S.sign="default",S.version=i,a("theme.defaults",S),window.MiniRefresh=S,S});