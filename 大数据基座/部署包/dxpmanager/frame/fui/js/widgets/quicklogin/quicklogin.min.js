(function(m,b){function q(){var a;try{a=document.all("EliteIVGetSerialNumber").SERIAL_NUMBER()}catch(c){return!1}return a}var d=b("#shortcut-login"),k=d.find(".login-type"),t=d.find(".login-type-trigger"),h=d.find(".login-input"),n=h.find(".user-input"),g=h.find(".usb-input"),e=d.find(".login-btn"),r=b("#r-user-name"),p=b("#r-user-pw"),l=b("#r-usb-pw"),u=function(){n.find("input").on("focus",function(){var a=b(this);a.parent().removeClass("haserror");a.hasClass("r-user-name")?a.attr("placeholder","\u8bf7\u8f93\u5165\u7528\u6237\u540d"):a.hasClass("r-user-pw")&&a.attr("placeholder","\u8bf7\u8f93\u5165\u5bc6\u7801");e.prop("disabled",!1).removeClass("unable")});g.find("input").on("focus",function(){var a=b(this);a.parent().removeClass("haserror");a.hasClass("r-usb-pw")&&a.attr("placeholder","\u8bf7\u8f93\u5165\u5bc6\u7801");e.prop("disabled",!1).removeClass("unable")});t.on("click",function(){f.switchLoginType()});e.on("click",function(){a:{if("0"==f.loginType){if(a=b.trim(r.val()),c=b.trim(p.val()),!a||!c){n.addClass("haserror");p.attr("placeholder","\u5bc6\u7801\u9519\u8bef");e.prop("disabled",!0).addClass("unable");break a}}else if("10"==f.loginType&&(a=q(),c=b.trim(l.val()),!a||!c)){g.addClass("haserror");l.attr("placeholder","\u5bc6\u7801\u9519\u8bef");e.prop("disabled",!0).addClass("unable");break a}a=epoint.encode(a);c=epoint.encode(c);epoint.execute("loginaction.login","@none",[a,c,"499"],d)}});var a,c,d=function(b){b.systemMessages?-1!=b.systemMessages.indexOf("\u6b64\u8d26\u53f7")?(b=b.systemMessages.split("?"),epoint.confirm(b[0]+"?","",function(){epoint.execute("loginaction.login","@none",[a,c,"498"],d)})):-1!=b.systemMessages.indexOf("IsDefaultOU")?f.hide():epoint.alert(b.systemMessages):f.hide()}},f={isInit:!1,loginType:"0",switchLoginType:function(a){var b=q();void 0===a&&("0"==this.loginType?(k.stop(!0).animate({marginTop:-50},300),h.stop(!0).animate({marginTop:-50},300),this.loginType="10",b?g.removeClass("haserror"):(g.addClass("haserror"),l.attr("placeholder","\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301").prop("disabled",!0))):(k.stop(!0).animate({marginTop:0},300),h.stop(!0).animate({marginTop:0},300),this.loginType="0"));"0"==a?(k.stop(!0).animate({marginTop:0},300),h.stop(!0).animate({marginTop:0},300),this.loginType="0"):"10"==a&&(k.stop(!0).animate({marginTop:-50},300),h.stop(!0).animate({marginTop:-50},300),this.loginType="10",b?g.removeClass("haserror"):(g.addClass("haserror"),l.attr("placeholder","\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301").prop("disabled",!0)));"0"==f.loginType?n.hasClass("haserror")?e.prop("disabled",!0).addClass("unable"):e.prop("disabled",!1).removeClass("unable"):"10"==f.loginType&&(g.hasClass("haserror")?e.prop("disabled",!0).addClass("unable"):e.prop("disabled",!1).removeClass("unable"));return this.loginType},show:function(){this.isInit||(u(),this.isInit=!0);d.css("z-index",mini.getMaxZIndex()).removeClass("hidden");if(m.localStorage){var a=localStorage.getItem("_loginType_"),b=localStorage.getItem("_loginUsername_");a&&this.switchLoginType(a);"0"==this.loginType&&b&&(r[0].value=b)}},hide:function(){d.addClass("hidden");p.val("")}};m.quickLogin=m.quicklyLogin=f})(window,jQuery);