!function(e,i){"use strict";function t(e){var t=this,s=[{key:window.cityData3,value:"请引入city.data-3.js"},{key:e,value:"请传入配置项!"},{key:e.container,value:"请传入父级元素"}];t.environment(s);var r=i.selector(e.container);if(t.parentDom=r,t._hasBtn(e.showBtn,"showBtn"),t.showBtn||(r.style.display="block"),!e.itemClick&&"function"!=typeof e.itemClick)throw new Error("请传入回调函数itemClick");t.itemClick=e.itemClick,t._insertTempl(r,n),t=i.extend(a,e,t),r.style.top=parseInt(t.top)+"px",t.isMask&&t._makeMask(),t.domArray={provinceList:r.querySelector("[data-type=province]"),cityList:r.querySelector("[data-type=city]")},t._analysisCityData(cityData3),t._showCity(),t._initListeners()}var n='<div class="em-province-area mui-scroll-wrapper"><ul class="em-province-list mui-scroll" data-type="province"></ul></div><div class="em-city-area mui-scroll-wrapper"><ul class="em-city-list cur mui-scroll" data-type="city"></ul></div>',a={top:0,province:[],city:[],provinceValue:"",cityValue:"",areaCode:"",litemplate:'<li class="em-list-item" data-areacode="{{value}}" data-index="{{index}}">{{{text}}}</li>',proviceActiveCls:"cur",cityActiveCls:"cur",isClose:!0,provinceIndex:0,cityIndex:0,isMask:!0};t.prototype={_insertTempl:function(e,i){e.innerHTML=i,mui(".mui-scroll-wrapper").scroll({scrollY:!0,scrollX:!1})},environment:function(e){for(var i=0,t=e.length;i<t;i++)if(!e[i].key)throw new Error(e[i].value)},_analysisCityData:function(e){var i=this,t=i.province=[],n=i.domArray;e.forEach(function(e,i){t.push({text:e.text,value:e.value,index:i})}),i._ergodic(t,n.provinceList)},_ergodic:function(e,i,t){var n="",a=this.domArray.cityList.children,s=this.litemplate;e.forEach(function(e){n+=Mustache.render(s,e)}),i.innerHTML=n,void 0!=t&&a[t].classList.add("cur")},_initListeners:function(){var e=this,i=e.showBtn,t=e.maskEle,n=e.parentDom,a=e.isClose,s=e.domArray.provinceList,r=e.proviceActiveCls,c=e.domArray.cityList,o=e.cityActiveCls;e.provinceName=s.children[0].innerHTML,e.cityName=c.children[0].innerHTML,e.areaCode=c.children[0].dataset.areacode;var l=function(){n.style.display="block",t.style.display="block",e._showCity(e.provinceIndex,e.cityIndex)};"ejs"==i?window.itemClickNBRightEJS=l:i&&e._addEvent(i,"",l),e._addEvent(s,"li",function(){var i=this,t=i.dataset.index,n=cityData3[t].children[0].children,a=e.siblings(i);e.provinceIndex=t,e.provinceName=i.innerHTML,i.classList.add(r),a.forEach(function(e,i){e.classList.remove(r)}),e._ergodic(n,c)}),e._addEvent(c,"li",function(){var i=this,s=e.siblings(i);i.classList.add(o),c.classList.remove("cur"),s.forEach(function(e){e.classList.remove(o)}),[].slice.call(c.children).forEach(function(i,t){i.classList.contains(o)&&(e.cityIndex=t)}),1==a&&(n.style.display="none");var r={areaCode:i.dataset.areacode,cityName:i.innerHTML,provinceName:e.provinceName};t.style.display="none",e.itemClick.call(i,r)}),e._addEvent(t,"",function(){this.style.display="none",n.style.display="none"})},_addEvent:function(e,i,t){i=i.toUpperCase(),e.addEventListener("tap",function(e){for(var n=e.target;i&&n.tagName!=i;)n=n.parentNode;t.call(n)})},siblings:function(e){for(var i=[],t=e.parentNode.children,n=0,a=t.length;n<a;n++)e!=t[n]&&i.push(t[n]);return i},_showCity:function(e,i){e=e||0,i=i||0;var t=this,n=cityData3[e].children[0].children,a=t.domArray,s=a.provinceList,r=a.cityList;s.children[e].classList.add("cur"),this._ergodic(n,r,i)},_hasBtn:function(e,t){var n=this;e&&"ejs"!=e?n[t]=i.selector(e):"ejs"==e&&(n[t]="ejs")},_makeMask:function(){var i=e.createElement("div");i.id="em-mask",i.style.cssText="display: none; position: fixed; left: 0; right: 0; bottom: 0; background-color: #666; z-index: 10;",i.style.top=this.top,e.body.appendChild(i),this.maskEle=e.getElementById("em-mask")}},window.AddrSelect=t}(document,window.Util);