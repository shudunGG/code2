<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"></meta>
<meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
<title>算法预览</title>
<script src="../../../frame/fui/js/cssboot.js"></script>
</head>
<body>
	<div class="page-loading"></div>
	<div class="fui-content">
		<div id="msg" class="mini-textarea" style="width: 100%; height: 100%;"></div>
		<div id="datagrid" class="mini-datagrid" 
			style="width: 100%; height: 100%;" action="getTableData"
			showPager="false" allowCellEdit="true" allowCellSelect="true"
			editNextOnEnterKey="true" editNextRowCell="true"
			visible="false"></div>
	</div>

	<script src="../../../rest/resource/jsboot"></script>
	<script type="text/javascript">
		//<![CDATA[
		epoint.initPage("dxpmodelresultviewalgorithmaction", '', callbackinit);
		var grid = mini.get("datagrid");
		// 初始化回掉，动态生成列
		function callbackinit(data) {
			console.log(data)
			if(data.msg){
				// 执行失败或执行中，打印日志信息
				mini.get('msg').setValue(data.msg);
			}else{
				// 执行成功，渲染结果
				//adjustContentHeight();//隐藏的condition出来 要重新计算一次高度
				mini.get('msg').setVisible(false);
				mini.get('datagrid').setVisible(true);
				drawDynamicColumn(data);
				grid.reload();
				//mini.get('msg').setValue(data.dataPreview);
			}

		}

		// 绘制动态列
		function drawDynamicColumn(data) {
			var tmp = data.columns;
			console.log(tmp);
			var columns = eval('(' + tmp + ')');
			grid.set(columns);
		   // grid.frozenColumns(0, 3);
		}
		//]]>
	</script>
</body>
</html>